var EI=Object.defineProperty;var _I=(e,t,n)=>t in e?EI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ke=(e,t,n)=>_I(e,typeof t!="symbol"?t+"":t,n);function ZE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Xde=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t6={exports:{}},Sv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI=Symbol.for("react.transitional.element"),LI=Symbol.for("react.fragment");function n6(e,t,n){var r=null;if(n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:TI,type:e,key:r,ref:t!==void 0?t:null,props:n}}Sv.Fragment=LI;Sv.jsx=n6;Sv.jsxs=n6;t6.exports=Sv;var i=t6.exports,r6={exports:{}},Kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nj=Symbol.for("react.transitional.element"),RI=Symbol.for("react.portal"),OI=Symbol.for("react.fragment"),PI=Symbol.for("react.strict_mode"),II=Symbol.for("react.profiler"),FI=Symbol.for("react.consumer"),zI=Symbol.for("react.context"),BI=Symbol.for("react.forward_ref"),HI=Symbol.for("react.suspense"),UI=Symbol.for("react.memo"),s6=Symbol.for("react.lazy"),$I=Symbol.for("react.activity"),q4=Symbol.iterator;function qI(e){return e===null||typeof e!="object"?null:(e=q4&&e[q4]||e["@@iterator"],typeof e=="function"?e:null)}var a6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i6=Object.assign,o6={};function hp(e,t,n){this.props=e,this.context=t,this.refs=o6,this.updater=n||a6}hp.prototype.isReactComponent={};hp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function l6(){}l6.prototype=hp.prototype;function jj(e,t,n){this.props=e,this.context=t,this.refs=o6,this.updater=n||a6}var Sj=jj.prototype=new l6;Sj.constructor=jj;i6(Sj,hp.prototype);Sj.isPureReactComponent=!0;var V4=Array.isArray;function uN(){}var cr={H:null,A:null,T:null,S:null},c6=Object.prototype.hasOwnProperty;function kj(e,t,n){var r=n.ref;return{$$typeof:Nj,type:e,key:t,ref:r!==void 0?r:null,props:n}}function VI(e,t){return kj(e.type,t,e.props)}function Cj(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nj}function YI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Y4=/\/+/g;function n2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?YI(""+e.key):t.toString(36)}function WI(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(uN,uN):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Wf(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Nj:case RI:o=!0;break;case s6:return o=e._init,Wf(o(e._payload),t,n,r,s)}}if(o)return s=s(e),o=r===""?"."+n2(e,0):r,V4(s)?(n="",o!=null&&(n=o.replace(Y4,"$&/")+"/"),Wf(s,t,n,"",function(d){return d})):s!=null&&(Cj(s)&&(s=VI(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(Y4,"$&/")+"/")+o)),t.push(s)),1;o=0;var l=r===""?".":r+":";if(V4(e))for(var c=0;c<e.length;c++)r=e[c],a=l+n2(r,c),o+=Wf(r,t,n,a,s);else if(c=qI(e),typeof c=="function")for(e=c.call(e),c=0;!(r=e.next()).done;)r=r.value,a=l+n2(r,c++),o+=Wf(r,t,n,a,s);else if(a==="object"){if(typeof e.then=="function")return Wf(WI(e),t,n,r,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function n0(e,t,n){if(e==null)return e;var r=[],s=0;return Wf(e,r,"","",function(a){return t.call(n,a,s++)}),r}function GI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var W4=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},KI={map:n0,forEach:function(e,t,n){n0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return n0(e,function(){t++}),t},toArray:function(e){return n0(e,function(t){return t})||[]},only:function(e){if(!Cj(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Kt.Activity=$I;Kt.Children=KI;Kt.Component=hp;Kt.Fragment=OI;Kt.Profiler=II;Kt.PureComponent=jj;Kt.StrictMode=PI;Kt.Suspense=HI;Kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=cr;Kt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return cr.H.useMemoCache(e)}};Kt.cache=function(e){return function(){return e.apply(null,arguments)}};Kt.cacheSignal=function(){return null};Kt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var r=i6({},e.props),s=e.key;if(t!=null)for(a in t.key!==void 0&&(s=""+t.key),t)!c6.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}return kj(e.type,s,r)};Kt.createContext=function(e){return e={$$typeof:zI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:FI,_context:e},e};Kt.createElement=function(e,t,n){var r,s={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=""+t.key),t)c6.call(t,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(s[r]=t[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return kj(e,a,s)};Kt.createRef=function(){return{current:null}};Kt.forwardRef=function(e){return{$$typeof:BI,render:e}};Kt.isValidElement=Cj;Kt.lazy=function(e){return{$$typeof:s6,_payload:{_status:-1,_result:e},_init:GI}};Kt.memo=function(e,t){return{$$typeof:UI,type:e,compare:t===void 0?null:t}};Kt.startTransition=function(e){var t=cr.T,n={};cr.T=n;try{var r=e(),s=cr.S;s!==null&&s(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(uN,W4)}catch(a){W4(a)}finally{t!==null&&n.types!==null&&(t.types=n.types),cr.T=t}};Kt.unstable_useCacheRefresh=function(){return cr.H.useCacheRefresh()};Kt.use=function(e){return cr.H.use(e)};Kt.useActionState=function(e,t,n){return cr.H.useActionState(e,t,n)};Kt.useCallback=function(e,t){return cr.H.useCallback(e,t)};Kt.useContext=function(e){return cr.H.useContext(e)};Kt.useDebugValue=function(){};Kt.useDeferredValue=function(e,t){return cr.H.useDeferredValue(e,t)};Kt.useEffect=function(e,t){return cr.H.useEffect(e,t)};Kt.useEffectEvent=function(e){return cr.H.useEffectEvent(e)};Kt.useId=function(){return cr.H.useId()};Kt.useImperativeHandle=function(e,t,n){return cr.H.useImperativeHandle(e,t,n)};Kt.useInsertionEffect=function(e,t){return cr.H.useInsertionEffect(e,t)};Kt.useLayoutEffect=function(e,t){return cr.H.useLayoutEffect(e,t)};Kt.useMemo=function(e,t){return cr.H.useMemo(e,t)};Kt.useOptimistic=function(e,t){return cr.H.useOptimistic(e,t)};Kt.useReducer=function(e,t,n){return cr.H.useReducer(e,t,n)};Kt.useRef=function(e){return cr.H.useRef(e)};Kt.useState=function(e){return cr.H.useState(e)};Kt.useSyncExternalStore=function(e,t,n){return cr.H.useSyncExternalStore(e,t,n)};Kt.useTransition=function(){return cr.H.useTransition()};Kt.version="19.2.0";r6.exports=Kt;var C=r6.exports;const ge=e6(C),Aj=ZE({__proto__:null,default:ge},[C]);var d6={exports:{}},kv={},u6={exports:{}},f6={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(X,P){var z=X.length;X.push(P);e:for(;0<z;){var oe=z-1>>>1,Y=X[oe];if(0<s(Y,P))X[oe]=P,X[z]=Y,z=oe;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var P=X[0],z=X.pop();if(z!==P){X[0]=z;e:for(var oe=0,Y=X.length,q=Y>>>1;oe<q;){var _=2*(oe+1)-1,$=X[_],J=_+1,te=X[J];if(0>s($,z))J<Y&&0>s(te,$)?(X[oe]=te,X[J]=z,oe=J):(X[oe]=$,X[_]=z,oe=_);else if(J<Y&&0>s(te,z))X[oe]=te,X[J]=z,oe=J;else break e}}return P}function s(X,P){var z=X.sortIndex-P.sortIndex;return z!==0?z:X.id-P.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,p=3,h=!1,m=!1,g=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function j(X){for(var P=n(d);P!==null;){if(P.callback===null)r(d);else if(P.startTime<=X)r(d),P.sortIndex=P.expirationTime,t(c,P);else break;P=n(d)}}function D(X){if(g=!1,j(X),!m)if(n(c)!==null)m=!0,T||(T=!0,O());else{var P=n(d);P!==null&&W(D,P.startTime-X)}}var T=!1,A=-1,S=5,E=-1;function I(){return x?!0:!(e.unstable_now()-E<S)}function L(){if(x=!1,T){var X=e.unstable_now();E=X;var P=!0;try{e:{m=!1,g&&(g=!1,v(A),A=-1),h=!0;var z=p;try{t:{for(j(X),f=n(c);f!==null&&!(f.expirationTime>X&&I());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,p=f.priorityLevel;var Y=oe(f.expirationTime<=X);if(X=e.unstable_now(),typeof Y=="function"){f.callback=Y,j(X),P=!0;break t}f===n(c)&&r(c),j(X)}else r(c);f=n(c)}if(f!==null)P=!0;else{var q=n(d);q!==null&&W(D,q.startTime-X),P=!1}}break e}finally{f=null,p=z,h=!1}P=void 0}}finally{P?O():T=!1}}}var O;if(typeof N=="function")O=function(){N(L)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,U=F.port2;F.port1.onmessage=L,O=function(){U.postMessage(null)}}else O=function(){y(L,0)};function W(X,P){A=y(function(){X(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(X){switch(p){case 1:case 2:case 3:var P=3;break;default:P=p}var z=p;p=P;try{return X()}finally{p=z}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(X,P){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var z=p;p=X;try{return P()}finally{p=z}},e.unstable_scheduleCallback=function(X,P,z){var oe=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?oe+z:oe):z=oe,X){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=z+Y,X={id:u++,callback:P,priorityLevel:X,startTime:z,expirationTime:Y,sortIndex:-1},z>oe?(X.sortIndex=z,t(d,X),n(c)===null&&X===n(d)&&(g?(v(A),A=-1):g=!0,W(D,z-oe))):(X.sortIndex=Y,t(c,X),m||h||(m=!0,T||(T=!0,O()))),X},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(X){var P=p;return function(){var z=p;p=P;try{return X.apply(this,arguments)}finally{p=z}}}})(f6);u6.exports=f6;var JI=u6.exports,h6={exports:{}},ya={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XI=C;function p6(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Rc(){}var ua={d:{f:Rc,r:function(){throw Error(p6(522))},D:Rc,C:Rc,L:Rc,m:Rc,X:Rc,S:Rc,M:Rc},p:0,findDOMNode:null},QI=Symbol.for("react.portal");function ZI(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:QI,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}var Im=XI.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Cv(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ya.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ua;ya.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(p6(299));return ZI(e,t,null,n)};ya.flushSync=function(e){var t=Im.T,n=ua.p;try{if(Im.T=null,ua.p=2,e)return e()}finally{Im.T=t,ua.p=n,ua.d.f()}};ya.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ua.d.C(e,t))};ya.prefetchDNS=function(e){typeof e=="string"&&ua.d.D(e)};ya.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,r=Cv(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ua.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:a}):n==="script"&&ua.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ya.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Cv(t.as,t.crossOrigin);ua.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ua.d.M(e)};ya.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,r=Cv(n,t.crossOrigin);ua.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ya.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Cv(t.as,t.crossOrigin);ua.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ua.d.m(e)};ya.requestFormReset=function(e){ua.d.r(e)};ya.unstable_batchedUpdates=function(e,t){return e(t)};ya.useFormState=function(e,t,n){return Im.H.useFormState(e,t,n)};ya.useFormStatus=function(){return Im.H.useHostTransitionStatus()};ya.version="19.2.0";function m6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m6)}catch(e){console.error(e)}}m6(),h6.exports=ya;var pp=h6.exports;const Mj=e6(pp),eF=ZE({__proto__:null,default:Mj},[pp]);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys=JI,g6=C,tF=pp;function Be(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function x6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qg(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function y6(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b6(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function G4(e){if(Qg(e)!==e)throw Error(Be(188))}function nF(e){var t=e.alternate;if(!t){if(t=Qg(e),t===null)throw Error(Be(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return G4(s),e;if(a===r)return G4(s),t;a=a.sibling}throw Error(Be(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(Be(189))}}if(n.alternate!==r)throw Error(Be(190))}if(n.tag!==3)throw Error(Be(188));return n.stateNode.current===n?e:t}function v6(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v6(e),t!==null)return t;e=e.sibling}return null}var ur=Object.assign,rF=Symbol.for("react.element"),r0=Symbol.for("react.transitional.element"),km=Symbol.for("react.portal"),sh=Symbol.for("react.fragment"),w6=Symbol.for("react.strict_mode"),fN=Symbol.for("react.profiler"),N6=Symbol.for("react.consumer"),zl=Symbol.for("react.context"),Dj=Symbol.for("react.forward_ref"),hN=Symbol.for("react.suspense"),pN=Symbol.for("react.suspense_list"),Ej=Symbol.for("react.memo"),$c=Symbol.for("react.lazy"),mN=Symbol.for("react.activity"),sF=Symbol.for("react.memo_cache_sentinel"),K4=Symbol.iterator;function nm(e){return e===null||typeof e!="object"?null:(e=K4&&e[K4]||e["@@iterator"],typeof e=="function"?e:null)}var aF=Symbol.for("react.client.reference");function gN(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===aF?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sh:return"Fragment";case fN:return"Profiler";case w6:return"StrictMode";case hN:return"Suspense";case pN:return"SuspenseList";case mN:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case km:return"Portal";case zl:return e.displayName||"Context";case N6:return(e._context.displayName||"Context")+".Consumer";case Dj:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ej:return t=e.displayName||null,t!==null?t:gN(e.type)||"Memo";case $c:t=e._payload,e=e._init;try{return gN(e(t))}catch{}}return null}var Cm=Array.isArray,It=g6.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Cn=tF.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_u={pending:!1,data:null,method:null,action:null},xN=[],ah=-1;function Go(e){return{current:e}}function As(e){0>ah||(e.current=xN[ah],xN[ah]=null,ah--)}function nr(e,t){ah++,xN[ah]=e.current,e.current=t}var $o=Go(null),hg=Go(null),hd=Go(null),Oy=Go(null);function Py(e,t){switch(nr(hd,t),nr(hg,e),nr($o,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?tC(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=tC(t),e=UT(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}As($o),nr($o,e)}function Ph(){As($o),As(hg),As(hd)}function yN(e){e.memoizedState!==null&&nr(Oy,e);var t=$o.current,n=UT(t,e.type);t!==n&&(nr(hg,e),nr($o,n))}function Iy(e){hg.current===e&&(As($o),As(hg)),Oy.current===e&&(As(Oy),Sg._currentValue=_u)}var r2,J4;function fu(e){if(r2===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);r2=t&&t[1]||"",J4=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+r2+e+J4}var s2=!1;function a2(e,t){if(!e||s2)return"";s2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(h){var p=h}Reflect.construct(e,[],f)}else{try{f.call()}catch(h){p=h}e.call(f.prototype)}}else{try{throw Error()}catch(h){p=h}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(h){if(h&&p&&typeof h.stack=="string")return[h.stack,p.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],l=a[1];if(o&&l){var c=o.split(`
`),d=l.split(`
`);for(s=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;s<d.length&&!d[s].includes("DetermineComponentFrameRoot");)s++;if(r===c.length||s===d.length)for(r=c.length-1,s=d.length-1;1<=r&&0<=s&&c[r]!==d[s];)s--;for(;1<=r&&0<=s;r--,s--)if(c[r]!==d[s]){if(r!==1||s!==1)do if(r--,s--,0>s||c[r]!==d[s]){var u=`
`+c[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=r&&0<=s);break}}}finally{s2=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?fu(n):""}function iF(e,t){switch(e.tag){case 26:case 27:case 5:return fu(e.type);case 16:return fu("Lazy");case 13:return e.child!==t&&t!==null?fu("Suspense Fallback"):fu("Suspense");case 19:return fu("SuspenseList");case 0:case 15:return a2(e.type,!1);case 11:return a2(e.type.render,!1);case 1:return a2(e.type,!0);case 31:return fu("Activity");default:return""}}function X4(e){try{var t="",n=null;do t+=iF(e,n),n=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var bN=Object.prototype.hasOwnProperty,_j=ys.unstable_scheduleCallback,i2=ys.unstable_cancelCallback,oF=ys.unstable_shouldYield,lF=ys.unstable_requestPaint,ci=ys.unstable_now,cF=ys.unstable_getCurrentPriorityLevel,j6=ys.unstable_ImmediatePriority,S6=ys.unstable_UserBlockingPriority,Fy=ys.unstable_NormalPriority,dF=ys.unstable_LowPriority,k6=ys.unstable_IdlePriority,uF=ys.log,fF=ys.unstable_setDisableYieldValue,Zg=null,di=null;function ed(e){if(typeof uF=="function"&&fF(e),di&&typeof di.setStrictMode=="function")try{di.setStrictMode(Zg,e)}catch{}}var ui=Math.clz32?Math.clz32:mF,hF=Math.log,pF=Math.LN2;function mF(e){return e>>>=0,e===0?32:31-(hF(e)/pF|0)|0}var s0=256,a0=262144,i0=4194304;function hu(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Av(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var l=r&134217727;return l!==0?(r=l&~a,r!==0?s=hu(r):(o&=l,o!==0?s=hu(o):n||(n=l&~e,n!==0&&(s=hu(n))))):(l=r&~a,l!==0?s=hu(l):o!==0?s=hu(o):n||(n=r&~e,n!==0&&(s=hu(n)))),s===0?0:t!==0&&t!==s&&!(t&a)&&(a=s&-s,n=t&-t,a>=n||a===32&&(n&4194048)!==0)?t:s}function ex(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function gF(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function C6(){var e=i0;return i0<<=1,!(i0&62914560)&&(i0=4194304),e}function o2(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tx(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xF(e,t,n,r,s,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,d=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-ui(n),f=1<<u;l[u]=0,c[u]=-1;var p=d[u];if(p!==null)for(d[u]=null,u=0;u<p.length;u++){var h=p[u];h!==null&&(h.lane&=-536870913)}n&=~f}r!==0&&A6(e,r,0),a!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function A6(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ui(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function M6(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ui(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function D6(e,t){var n=t&-t;return n=n&42?1:Tj(n),n&(e.suspendedLanes|t)?0:n}function Tj(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Lj(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function E6(){var e=Cn.p;return e!==0?e:(e=window.event,e===void 0?32:ZT(e.type))}function Q4(e,t){var n=Cn.p;try{return Cn.p=e,t()}finally{Cn.p=n}}var Bd=Math.random().toString(36).slice(2),Bs="__reactFiber$"+Bd,Oa="__reactProps$"+Bd,mp="__reactContainer$"+Bd,vN="__reactEvents$"+Bd,yF="__reactListeners$"+Bd,bF="__reactHandles$"+Bd,Z4="__reactResources$"+Bd,nx="__reactMarker$"+Bd;function Rj(e){delete e[Bs],delete e[Oa],delete e[vN],delete e[yF],delete e[bF]}function ih(e){var t=e[Bs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mp]||n[Bs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=iC(e);e!==null;){if(n=e[Bs])return n;e=iC(e)}return t}e=n,n=e.parentNode}return null}function gp(e){if(e=e[Bs]||e[mp]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Am(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(Be(33))}function yh(e){var t=e[Z4];return t||(t=e[Z4]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ss(e){e[nx]=!0}var _6=new Set,T6={};function uf(e,t){Ih(e,t),Ih(e+"Capture",t)}function Ih(e,t){for(T6[e]=t,e=0;e<t.length;e++)_6.add(t[e])}var vF=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),e3={},t3={};function wF(e){return bN.call(t3,e)?!0:bN.call(e3,e)?!1:vF.test(e)?t3[e]=!0:(e3[e]=!0,!1)}function ty(e,t,n){if(wF(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function o0(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function yl(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}function _i(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function L6(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function NF(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wN(e){if(!e._valueTracker){var t=L6(e)?"checked":"value";e._valueTracker=NF(e,t,""+e[t])}}function R6(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=L6(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function zy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var jF=/[\n"\\]/g;function Oi(e){return e.replace(jF,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function NN(e,t,n,r,s,a,o,l){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+_i(t)):e.value!==""+_i(t)&&(e.value=""+_i(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?jN(e,o,_i(t)):n!=null?jN(e,o,_i(n)):r!=null&&e.removeAttribute("value"),s==null&&a!=null&&(e.defaultChecked=!!a),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+_i(l):e.removeAttribute("name")}function O6(e,t,n,r,s,a,o,l){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.type=a),t!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||t!=null)){wN(e);return}n=n!=null?""+_i(n):"",t=t!=null?""+_i(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}r=r??s,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=l?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o),wN(e)}function jN(e,t,n){t==="number"&&zy(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bh(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_i(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function P6(e,t,n){if(t!=null&&(t=""+_i(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+_i(n):""}function I6(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(Be(92));if(Cm(r)){if(1<r.length)throw Error(Be(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=_i(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r),wN(e)}function Fh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var SF=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function n3(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||SF.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function F6(e,t,n){if(t!=null&&typeof t!="object")throw Error(Be(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&n3(e,s,r)}else for(var a in t)t.hasOwnProperty(a)&&n3(e,a,t[a])}function Oj(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kF=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),CF=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ny(e){return CF.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Bl(){}var SN=null;function Pj(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oh=null,vh=null;function r3(e){var t=gp(e);if(t&&(e=t.stateNode)){var n=e[Oa]||null;e:switch(e=t.stateNode,t.type){case"input":if(NN(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Oi(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Oa]||null;if(!s)throw Error(Be(90));NN(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&R6(r)}break e;case"textarea":P6(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&bh(e,!!n.multiple,t,!1)}}}var l2=!1;function z6(e,t,n){if(l2)return e(t,n);l2=!0;try{var r=e(t);return r}finally{if(l2=!1,(oh!==null||vh!==null)&&(zv(),oh&&(t=oh,e=vh,vh=oh=null,r3(t),e)))for(t=0;t<e.length;t++)r3(e[t])}}function pg(e,t){var n=e.stateNode;if(n===null)return null;var r=n[Oa]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Be(231,t,typeof n));return n}var sc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kN=!1;if(sc)try{var rm={};Object.defineProperty(rm,"passive",{get:function(){kN=!0}}),window.addEventListener("test",rm,rm),window.removeEventListener("test",rm,rm)}catch{kN=!1}var td=null,Ij=null,ry=null;function B6(){if(ry)return ry;var e,t=Ij,n=t.length,r,s="value"in td?td.value:td.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[a-r];r++);return ry=s.slice(e,1<r?1-r:void 0)}function sy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function l0(){return!0}function s3(){return!1}function Ia(e){function t(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?l0:s3,this.isPropagationStopped=s3,this}return ur(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=l0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=l0)},persist:function(){},isPersistent:l0}),t}var ff={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mv=Ia(ff),rx=ur({},ff,{view:0,detail:0}),AF=Ia(rx),c2,d2,sm,Dv=ur({},rx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fj,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sm&&(sm&&e.type==="mousemove"?(c2=e.screenX-sm.screenX,d2=e.screenY-sm.screenY):d2=c2=0,sm=e),c2)},movementY:function(e){return"movementY"in e?e.movementY:d2}}),a3=Ia(Dv),MF=ur({},Dv,{dataTransfer:0}),DF=Ia(MF),EF=ur({},rx,{relatedTarget:0}),u2=Ia(EF),_F=ur({},ff,{animationName:0,elapsedTime:0,pseudoElement:0}),TF=Ia(_F),LF=ur({},ff,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RF=Ia(LF),OF=ur({},ff,{data:0}),i3=Ia(OF),PF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=FF[e])?!!t[e]:!1}function Fj(){return zF}var BF=ur({},rx,{key:function(e){if(e.key){var t=PF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?IF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fj,charCode:function(e){return e.type==="keypress"?sy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),HF=Ia(BF),UF=ur({},Dv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o3=Ia(UF),$F=ur({},rx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fj}),qF=Ia($F),VF=ur({},ff,{propertyName:0,elapsedTime:0,pseudoElement:0}),YF=Ia(VF),WF=ur({},Dv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GF=Ia(WF),KF=ur({},ff,{newState:0,oldState:0}),JF=Ia(KF),XF=[9,13,27,32],zj=sc&&"CompositionEvent"in window,Fm=null;sc&&"documentMode"in document&&(Fm=document.documentMode);var QF=sc&&"TextEvent"in window&&!Fm,H6=sc&&(!zj||Fm&&8<Fm&&11>=Fm),l3=" ",c3=!1;function U6(e,t){switch(e){case"keyup":return XF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $6(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lh=!1;function ZF(e,t){switch(e){case"compositionend":return $6(t);case"keypress":return t.which!==32?null:(c3=!0,l3);case"textInput":return e=t.data,e===l3&&c3?null:e;default:return null}}function ez(e,t){if(lh)return e==="compositionend"||!zj&&U6(e,t)?(e=B6(),ry=Ij=td=null,lh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return H6&&t.locale!=="ko"?null:t.data;default:return null}}var tz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tz[e.type]:t==="textarea"}function q6(e,t,n,r){oh?vh?vh.push(r):vh=[r]:oh=r,t=rb(t,"onChange"),0<t.length&&(n=new Mv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zm=null,mg=null;function nz(e){zT(e,0)}function Ev(e){var t=Am(e);if(R6(t))return e}function u3(e,t){if(e==="change")return t}var V6=!1;if(sc){var f2;if(sc){var h2="oninput"in document;if(!h2){var f3=document.createElement("div");f3.setAttribute("oninput","return;"),h2=typeof f3.oninput=="function"}f2=h2}else f2=!1;V6=f2&&(!document.documentMode||9<document.documentMode)}function h3(){zm&&(zm.detachEvent("onpropertychange",Y6),mg=zm=null)}function Y6(e){if(e.propertyName==="value"&&Ev(mg)){var t=[];q6(t,mg,e,Pj(e)),z6(nz,t)}}function rz(e,t,n){e==="focusin"?(h3(),zm=t,mg=n,zm.attachEvent("onpropertychange",Y6)):e==="focusout"&&h3()}function sz(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ev(mg)}function az(e,t){if(e==="click")return Ev(t)}function iz(e,t){if(e==="input"||e==="change")return Ev(t)}function oz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gi=typeof Object.is=="function"?Object.is:oz;function gg(e,t){if(gi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!bN.call(t,s)||!gi(e[s],t[s]))return!1}return!0}function p3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function m3(e,t){var n=p3(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=p3(n)}}function W6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?W6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function G6(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=zy(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zy(e.document)}return t}function Bj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var lz=sc&&"documentMode"in document&&11>=document.documentMode,ch=null,CN=null,Bm=null,AN=!1;function g3(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;AN||ch==null||ch!==zy(r)||(r=ch,"selectionStart"in r&&Bj(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bm&&gg(Bm,r)||(Bm=r,r=rb(CN,"onSelect"),0<r.length&&(t=new Mv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ch)))}function lu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dh={animationend:lu("Animation","AnimationEnd"),animationiteration:lu("Animation","AnimationIteration"),animationstart:lu("Animation","AnimationStart"),transitionrun:lu("Transition","TransitionRun"),transitionstart:lu("Transition","TransitionStart"),transitioncancel:lu("Transition","TransitionCancel"),transitionend:lu("Transition","TransitionEnd")},p2={},K6={};sc&&(K6=document.createElement("div").style,"AnimationEvent"in window||(delete dh.animationend.animation,delete dh.animationiteration.animation,delete dh.animationstart.animation),"TransitionEvent"in window||delete dh.transitionend.transition);function hf(e){if(p2[e])return p2[e];if(!dh[e])return e;var t=dh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in K6)return p2[e]=t[n];return e}var J6=hf("animationend"),X6=hf("animationiteration"),Q6=hf("animationstart"),cz=hf("transitionrun"),dz=hf("transitionstart"),uz=hf("transitioncancel"),Z6=hf("transitionend"),e_=new Map,MN="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");MN.push("scrollEnd");function go(e,t){e_.set(e,t),uf(t,[e])}var By=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Di=[],uh=0,Hj=0;function _v(){for(var e=uh,t=Hj=uh=0;t<e;){var n=Di[t];Di[t++]=null;var r=Di[t];Di[t++]=null;var s=Di[t];Di[t++]=null;var a=Di[t];if(Di[t++]=null,r!==null&&s!==null){var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}a!==0&&t_(n,s,a)}}function Tv(e,t,n,r){Di[uh++]=e,Di[uh++]=t,Di[uh++]=n,Di[uh++]=r,Hj|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Uj(e,t,n,r){return Tv(e,t,n,r),Hy(e)}function pf(e,t){return Tv(e,null,null,t),Hy(e)}function t_(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var s=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(s=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,s&&t!==null&&(s=31-ui(n),e=a.hiddenUpdates,r=e[s],r===null?e[s]=[t]:r.push(t),t.lane=n|536870912),a):null}function Hy(e){if(50<Km)throw Km=0,KN=null,Error(Be(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var fh={};function fz(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(e,t,n,r){return new fz(e,t,n,r)}function $j(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vl(e,t){var n=e.alternate;return n===null?(n=si(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function n_(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ay(e,t,n,r,s,a){var o=0;if(r=e,typeof e=="function")$j(e)&&(o=1);else if(typeof e=="string")o=x9(e,n,$o.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case mN:return e=si(31,n,t,s),e.elementType=mN,e.lanes=a,e;case sh:return Tu(n.children,s,a,t);case w6:o=8,s|=24;break;case fN:return e=si(12,n,t,s|2),e.elementType=fN,e.lanes=a,e;case hN:return e=si(13,n,t,s),e.elementType=hN,e.lanes=a,e;case pN:return e=si(19,n,t,s),e.elementType=pN,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zl:o=10;break e;case N6:o=9;break e;case Dj:o=11;break e;case Ej:o=14;break e;case $c:o=16,r=null;break e}o=29,n=Error(Be(130,e===null?"null":typeof e,"")),r=null}return t=si(o,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function Tu(e,t,n,r){return e=si(7,e,r,t),e.lanes=n,e}function m2(e,t,n){return e=si(6,e,null,t),e.lanes=n,e}function r_(e){var t=si(18,null,null,0);return t.stateNode=e,t}function g2(e,t,n){return t=si(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var x3=new WeakMap;function Pi(e,t){if(typeof e=="object"&&e!==null){var n=x3.get(e);return n!==void 0?n:(t={value:e,source:t,stack:X4(t)},x3.set(e,t),t)}return{value:e,source:t,stack:X4(t)}}var hh=[],ph=0,Uy=null,xg=0,Ti=[],Li=0,Ed=null,Io=1,Fo="";function Pl(e,t){hh[ph++]=xg,hh[ph++]=Uy,Uy=e,xg=t}function s_(e,t,n){Ti[Li++]=Io,Ti[Li++]=Fo,Ti[Li++]=Ed,Ed=e;var r=Io;e=Fo;var s=32-ui(r)-1;r&=~(1<<s),n+=1;var a=32-ui(t)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Io=1<<32-ui(t)+s|n<<s|r,Fo=a+e}else Io=1<<a|n<<s|r,Fo=e}function qj(e){e.return!==null&&(Pl(e,1),s_(e,1,0))}function Vj(e){for(;e===Uy;)Uy=hh[--ph],hh[ph]=null,xg=hh[--ph],hh[ph]=null;for(;e===Ed;)Ed=Ti[--Li],Ti[Li]=null,Fo=Ti[--Li],Ti[Li]=null,Io=Ti[--Li],Ti[Li]=null}function a_(e,t){Ti[Li++]=Io,Ti[Li++]=Fo,Ti[Li++]=Ed,Io=t.id,Fo=t.overflow,Ed=e}var Hs=null,or=null,xn=!1,pd=null,Ii=!1,DN=Error(Be(519));function _d(e){var t=Error(Be(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yg(Pi(t,e)),DN}function y3(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Bs]=e,t[Oa]=r,n){case"dialog":un("cancel",t),un("close",t);break;case"iframe":case"object":case"embed":un("load",t);break;case"video":case"audio":for(n=0;n<Ng.length;n++)un(Ng[n],t);break;case"source":un("error",t);break;case"img":case"image":case"link":un("error",t),un("load",t);break;case"details":un("toggle",t);break;case"input":un("invalid",t),O6(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":un("invalid",t);break;case"textarea":un("invalid",t),I6(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||HT(t.textContent,n)?(r.popover!=null&&(un("beforetoggle",t),un("toggle",t)),r.onScroll!=null&&un("scroll",t),r.onScrollEnd!=null&&un("scrollend",t),r.onClick!=null&&(t.onclick=Bl),t=!0):t=!1,t||_d(e,!0)}function b3(e){for(Hs=e.return;Hs;)switch(Hs.tag){case 5:case 31:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:Hs=Hs.return}}function Of(e){if(e!==Hs)return!1;if(!xn)return b3(e),xn=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||e5(e.type,e.memoizedProps)),n=!n),n&&or&&_d(e),b3(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Be(317));or=aC(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Be(317));or=aC(e)}else t===27?(t=or,Hd(e.type)?(e=s5,s5=null,or=e):or=t):or=Hs?Bi(e.stateNode.nextSibling):null;return!0}function Yu(){or=Hs=null,xn=!1}function x2(){var e=pd;return e!==null&&(Aa===null?Aa=e:Aa.push.apply(Aa,e),pd=null),e}function yg(e){pd===null?pd=[e]:pd.push(e)}var EN=Go(null),mf=null,Hl=null;function Gc(e,t,n){nr(EN,t._currentValue),t._currentValue=n}function Yl(e){e._currentValue=EN.current,As(EN)}function _N(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function TN(e,t,n,r){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){var o=s.child;a=a.firstContext;e:for(;a!==null;){var l=a;a=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),_N(a.return,n,e),r||(o=null);break e}a=l.next}}else if(s.tag===18){if(o=s.return,o===null)throw Error(Be(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_N(o,n,e),o=null}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}}function xp(e,t,n,r){e=null;for(var s=t,a=!1;s!==null;){if(!a){if(s.flags&524288)a=!0;else if(s.flags&262144)break}if(s.tag===10){var o=s.alternate;if(o===null)throw Error(Be(387));if(o=o.memoizedProps,o!==null){var l=s.type;gi(s.pendingProps.value,o.value)||(e!==null?e.push(l):e=[l])}}else if(s===Oy.current){if(o=s.alternate,o===null)throw Error(Be(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Sg):e=[Sg])}s=s.return}e!==null&&TN(t,e,n,r),t.flags|=262144}function $y(e){for(e=e.firstContext;e!==null;){if(!gi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Wu(e){mf=e,Hl=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Us(e){return i_(mf,e)}function c0(e,t){return mf===null&&Wu(e),i_(e,t)}function i_(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Hl===null){if(e===null)throw Error(Be(308));Hl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Hl=Hl.next=t;return n}var hz=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},pz=ys.unstable_scheduleCallback,mz=ys.unstable_NormalPriority,ts={$$typeof:zl,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yj(){return{controller:new hz,data:new Map,refCount:0}}function sx(e){e.refCount--,e.refCount===0&&pz(mz,function(){e.controller.abort()})}var Hm=null,LN=0,zh=0,wh=null;function gz(e,t){if(Hm===null){var n=Hm=[];LN=0,zh=xS(),wh={status:"pending",value:void 0,then:function(r){n.push(r)}}}return LN++,t.then(v3,v3),t}function v3(){if(--LN===0&&Hm!==null){wh!==null&&(wh.status="fulfilled");var e=Hm;Hm=null,zh=0,wh=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function xz(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(r.status="rejected",r.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),r}var w3=It.S;It.S=function(e,t){vT=ci(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&gz(e,t),w3!==null&&w3(e,t)};var Lu=Go(null);function Wj(){var e=Lu.current;return e!==null?e:Qn.pooledCache}function iy(e,t){t===null?nr(Lu,Lu.current):nr(Lu,t.pool)}function o_(){var e=Wj();return e===null?null:{parent:ts._currentValue,pool:e}}var yp=Error(Be(460)),Gj=Error(Be(474)),Lv=Error(Be(542)),qy={then:function(){}};function N3(e){return e=e.status,e==="fulfilled"||e==="rejected"}function l_(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Bl,Bl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,S3(e),e;default:if(typeof t.status=="string")t.then(Bl,Bl);else{if(e=Qn,e!==null&&100<e.shellSuspendCounter)throw Error(Be(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=r}},function(r){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,S3(e),e}throw Ru=t,yp}}function pu(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ru=n,yp):n}}var Ru=null;function j3(){if(Ru===null)throw Error(Be(459));var e=Ru;return Ru=null,e}function S3(e){if(e===yp||e===Lv)throw Error(Be(483))}var Nh=null,bg=0;function d0(e){var t=bg;return bg+=1,Nh===null&&(Nh=[]),l_(Nh,e,t)}function am(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function u0(e,t){throw t.$$typeof===rF?Error(Be(525)):(e=Object.prototype.toString.call(t),Error(Be(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function c_(e){function t(y,v){if(e){var N=y.deletions;N===null?(y.deletions=[v],y.flags|=16):N.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y){for(var v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(y,v){return y=Vl(y,v),y.index=0,y.sibling=null,y}function a(y,v,N){return y.index=N,e?(N=y.alternate,N!==null?(N=N.index,N<v?(y.flags|=67108866,v):N):(y.flags|=67108866,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function l(y,v,N,j){return v===null||v.tag!==6?(v=m2(N,y.mode,j),v.return=y,v):(v=s(v,N),v.return=y,v)}function c(y,v,N,j){var D=N.type;return D===sh?u(y,v,N.props.children,j,N.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===$c&&pu(D)===v.type)?(v=s(v,N.props),am(v,N),v.return=y,v):(v=ay(N.type,N.key,N.props,null,y.mode,j),am(v,N),v.return=y,v)}function d(y,v,N,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==N.containerInfo||v.stateNode.implementation!==N.implementation?(v=g2(N,y.mode,j),v.return=y,v):(v=s(v,N.children||[]),v.return=y,v)}function u(y,v,N,j,D){return v===null||v.tag!==7?(v=Tu(N,y.mode,j,D),v.return=y,v):(v=s(v,N),v.return=y,v)}function f(y,v,N){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=m2(""+v,y.mode,N),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case r0:return N=ay(v.type,v.key,v.props,null,y.mode,N),am(N,v),N.return=y,N;case km:return v=g2(v,y.mode,N),v.return=y,v;case $c:return v=pu(v),f(y,v,N)}if(Cm(v)||nm(v))return v=Tu(v,y.mode,N,null),v.return=y,v;if(typeof v.then=="function")return f(y,d0(v),N);if(v.$$typeof===zl)return f(y,c0(y,v),N);u0(y,v)}return null}function p(y,v,N,j){var D=v!==null?v.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return D!==null?null:l(y,v,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case r0:return N.key===D?c(y,v,N,j):null;case km:return N.key===D?d(y,v,N,j):null;case $c:return N=pu(N),p(y,v,N,j)}if(Cm(N)||nm(N))return D!==null?null:u(y,v,N,j,null);if(typeof N.then=="function")return p(y,v,d0(N),j);if(N.$$typeof===zl)return p(y,v,c0(y,N),j);u0(y,N)}return null}function h(y,v,N,j,D){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return y=y.get(N)||null,l(v,y,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case r0:return y=y.get(j.key===null?N:j.key)||null,c(v,y,j,D);case km:return y=y.get(j.key===null?N:j.key)||null,d(v,y,j,D);case $c:return j=pu(j),h(y,v,N,j,D)}if(Cm(j)||nm(j))return y=y.get(N)||null,u(v,y,j,D,null);if(typeof j.then=="function")return h(y,v,N,d0(j),D);if(j.$$typeof===zl)return h(y,v,N,c0(v,j),D);u0(v,j)}return null}function m(y,v,N,j){for(var D=null,T=null,A=v,S=v=0,E=null;A!==null&&S<N.length;S++){A.index>S?(E=A,A=null):E=A.sibling;var I=p(y,A,N[S],j);if(I===null){A===null&&(A=E);break}e&&A&&I.alternate===null&&t(y,A),v=a(I,v,S),T===null?D=I:T.sibling=I,T=I,A=E}if(S===N.length)return n(y,A),xn&&Pl(y,S),D;if(A===null){for(;S<N.length;S++)A=f(y,N[S],j),A!==null&&(v=a(A,v,S),T===null?D=A:T.sibling=A,T=A);return xn&&Pl(y,S),D}for(A=r(A);S<N.length;S++)E=h(A,y,S,N[S],j),E!==null&&(e&&E.alternate!==null&&A.delete(E.key===null?S:E.key),v=a(E,v,S),T===null?D=E:T.sibling=E,T=E);return e&&A.forEach(function(L){return t(y,L)}),xn&&Pl(y,S),D}function g(y,v,N,j){if(N==null)throw Error(Be(151));for(var D=null,T=null,A=v,S=v=0,E=null,I=N.next();A!==null&&!I.done;S++,I=N.next()){A.index>S?(E=A,A=null):E=A.sibling;var L=p(y,A,I.value,j);if(L===null){A===null&&(A=E);break}e&&A&&L.alternate===null&&t(y,A),v=a(L,v,S),T===null?D=L:T.sibling=L,T=L,A=E}if(I.done)return n(y,A),xn&&Pl(y,S),D;if(A===null){for(;!I.done;S++,I=N.next())I=f(y,I.value,j),I!==null&&(v=a(I,v,S),T===null?D=I:T.sibling=I,T=I);return xn&&Pl(y,S),D}for(A=r(A);!I.done;S++,I=N.next())I=h(A,y,S,I.value,j),I!==null&&(e&&I.alternate!==null&&A.delete(I.key===null?S:I.key),v=a(I,v,S),T===null?D=I:T.sibling=I,T=I);return e&&A.forEach(function(O){return t(y,O)}),xn&&Pl(y,S),D}function x(y,v,N,j){if(typeof N=="object"&&N!==null&&N.type===sh&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case r0:e:{for(var D=N.key;v!==null;){if(v.key===D){if(D=N.type,D===sh){if(v.tag===7){n(y,v.sibling),j=s(v,N.props.children),j.return=y,y=j;break e}}else if(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===$c&&pu(D)===v.type){n(y,v.sibling),j=s(v,N.props),am(j,N),j.return=y,y=j;break e}n(y,v);break}else t(y,v);v=v.sibling}N.type===sh?(j=Tu(N.props.children,y.mode,j,N.key),j.return=y,y=j):(j=ay(N.type,N.key,N.props,null,y.mode,j),am(j,N),j.return=y,y=j)}return o(y);case km:e:{for(D=N.key;v!==null;){if(v.key===D)if(v.tag===4&&v.stateNode.containerInfo===N.containerInfo&&v.stateNode.implementation===N.implementation){n(y,v.sibling),j=s(v,N.children||[]),j.return=y,y=j;break e}else{n(y,v);break}else t(y,v);v=v.sibling}j=g2(N,y.mode,j),j.return=y,y=j}return o(y);case $c:return N=pu(N),x(y,v,N,j)}if(Cm(N))return m(y,v,N,j);if(nm(N)){if(D=nm(N),typeof D!="function")throw Error(Be(150));return N=D.call(N),g(y,v,N,j)}if(typeof N.then=="function")return x(y,v,d0(N),j);if(N.$$typeof===zl)return x(y,v,c0(y,N),j);u0(y,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,v!==null&&v.tag===6?(n(y,v.sibling),j=s(v,N),j.return=y,y=j):(n(y,v),j=m2(N,y.mode,j),j.return=y,y=j),o(y)):n(y,v)}return function(y,v,N,j){try{bg=0;var D=x(y,v,N,j);return Nh=null,D}catch(A){if(A===yp||A===Lv)throw A;var T=si(29,A,null,y.mode);return T.lanes=j,T.return=y,T}finally{}}}var Gu=c_(!0),d_=c_(!1),qc=!1;function Kj(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function RN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function md(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function gd(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,kn&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Hy(e),t_(e,null,n),t}return Tv(e,r,t,n),Hy(e)}function Um(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,M6(e,n)}}function y2(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ON=!1;function $m(){if(ON){var e=wh;if(e!==null)throw e}}function qm(e,t,n,r){ON=!1;var s=e.updateQueue;qc=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;o=0,u=d=c=null,l=a;do{var p=l.lane&-536870913,h=p!==l.lane;if(h?(mn&p)===p:(r&p)===p){p!==0&&p===zh&&(ON=!0),u!==null&&(u=u.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var m=e,g=l;p=t;var x=n;switch(g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(x,f,p);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,p=typeof m=="function"?m.call(x,f,p):m,p==null)break e;f=ur({},f,p);break e;case 2:qc=!0}}p=l.callback,p!==null&&(e.flags|=64,h&&(e.flags|=8192),h=s.callbacks,h===null?s.callbacks=[p]:h.push(p))}else h={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=h,c=f):u=u.next=h,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);u===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,a===null&&(s.shared.lanes=0),Ld|=o,e.lanes=o,e.memoizedState=f}}function u_(e,t){if(typeof e!="function")throw Error(Be(191,e));e.call(t)}function f_(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)u_(n[e],t)}var Bh=Go(null),Vy=Go(0);function k3(e,t){e=lc,nr(Vy,e),nr(Bh,t),lc=e|t.baseLanes}function PN(){nr(Vy,lc),nr(Bh,Bh.current)}function Jj(){lc=Vy.current,As(Bh),As(Vy)}var xi=Go(null),zi=null;function Kc(e){var t=e.alternate;nr(Br,Br.current&1),nr(xi,e),zi===null&&(t===null||Bh.current!==null||t.memoizedState!==null)&&(zi=e)}function IN(e){nr(Br,Br.current),nr(xi,e),zi===null&&(zi=e)}function h_(e){e.tag===22?(nr(Br,Br.current),nr(xi,e),zi===null&&(zi=e)):Jc()}function Jc(){nr(Br,Br.current),nr(xi,xi.current)}function ri(e){As(xi),zi===e&&(zi=null),As(Br)}var Br=Go(0);function Yy(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n5(n)||r5(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ac=0,Qt=null,qn=null,Zr=null,Wy=!1,jh=!1,Ku=!1,Gy=0,vg=0,Sh=null,yz=0;function kr(){throw Error(Be(321))}function Xj(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gi(e[n],t[n]))return!1;return!0}function Qj(e,t,n,r,s,a){return ac=a,Qt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,It.H=e===null||e.memoizedState===null?q_:cS,Ku=!1,a=n(r,s),Ku=!1,jh&&(a=m_(t,n,r,s)),p_(e),a}function p_(e){It.H=wg;var t=qn!==null&&qn.next!==null;if(ac=0,Zr=qn=Qt=null,Wy=!1,vg=0,Sh=null,t)throw Error(Be(300));e===null||ns||(e=e.dependencies,e!==null&&$y(e)&&(ns=!0))}function m_(e,t,n,r){Qt=e;var s=0;do{if(jh&&(Sh=null),vg=0,jh=!1,25<=s)throw Error(Be(301));if(s+=1,Zr=qn=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}It.H=V_,a=t(n,r)}while(jh);return a}function bz(){var e=It.H,t=e.useState()[0];return t=typeof t.then=="function"?ax(t):t,e=e.useState()[0],(qn!==null?qn.memoizedState:null)!==e&&(Qt.flags|=1024),t}function Zj(){var e=Gy!==0;return Gy=0,e}function eS(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function tS(e){if(Wy){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Wy=!1}ac=0,Zr=qn=Qt=null,jh=!1,vg=Gy=0,Sh=null}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zr===null?Qt.memoizedState=Zr=e:Zr=Zr.next=e,Zr}function Vr(){if(qn===null){var e=Qt.alternate;e=e!==null?e.memoizedState:null}else e=qn.next;var t=Zr===null?Qt.memoizedState:Zr.next;if(t!==null)Zr=t,qn=e;else{if(e===null)throw Qt.alternate===null?Error(Be(467)):Error(Be(310));qn=e,e={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},Zr===null?Qt.memoizedState=Zr=e:Zr=Zr.next=e}return Zr}function Rv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ax(e){var t=vg;return vg+=1,Sh===null&&(Sh=[]),e=l_(Sh,e,t),t=Qt,(Zr===null?t.memoizedState:Zr.next)===null&&(t=t.alternate,It.H=t===null||t.memoizedState===null?q_:cS),e}function Ov(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ax(e);if(e.$$typeof===zl)return Us(e)}throw Error(Be(438,String(e)))}function nS(e){var t=null,n=Qt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=Qt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Rv(),Qt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=sF;return t.index++,n}function ic(e,t){return typeof t=="function"?t(e):t}function oy(e){var t=Vr();return rS(t,qn,e)}function rS(e,t,n){var r=e.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=n;var s=e.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}t.baseQueue=s=a,r.pending=null}if(a=e.baseState,s===null)e.memoizedState=a;else{t=s.next;var l=o=null,c=null,d=t,u=!1;do{var f=d.lane&-536870913;if(f!==d.lane?(mn&f)===f:(ac&f)===f){var p=d.revertLane;if(p===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),f===zh&&(u=!0);else if((ac&p)===p){d=d.next,p===zh&&(u=!0);continue}else f={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=f,o=a):c=c.next=f,Qt.lanes|=p,Ld|=p;f=d.action,Ku&&n(a,f),a=d.hasEagerState?d.eagerState:n(a,f)}else p={lane:f,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,o=a):c=c.next=p,Qt.lanes|=f,Ld|=f;d=d.next}while(d!==null&&d!==t);if(c===null?o=a:c.next=l,!gi(a,e.memoizedState)&&(ns=!0,u&&(n=wh,n!==null)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,r.lastRenderedState=a}return s===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function b2(e){var t=Vr(),n=t.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);gi(a,t.memoizedState)||(ns=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function g_(e,t,n){var r=Qt,s=Vr(),a=xn;if(a){if(n===void 0)throw Error(Be(407));n=n()}else n=t();var o=!gi((qn||s).memoizedState,n);if(o&&(s.memoizedState=n,ns=!0),s=s.queue,sS(b_.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||Zr!==null&&Zr.memoizedState.tag&1){if(r.flags|=2048,Hh(9,{destroy:void 0},y_.bind(null,r,s,n,t),null),Qn===null)throw Error(Be(349));a||ac&127||x_(r,t,n)}return n}function x_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Qt.updateQueue,t===null?(t=Rv(),Qt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function y_(e,t,n,r){t.value=n,t.getSnapshot=r,v_(t)&&w_(e)}function b_(e,t,n){return n(function(){v_(t)&&w_(e)})}function v_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gi(e,n)}catch{return!0}}function w_(e){var t=pf(e,2);t!==null&&Ta(t,e,2)}function FN(e){var t=la();if(typeof e=="function"){var n=e;if(e=n(),Ku){ed(!0);try{n()}finally{ed(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:e},t}function N_(e,t,n,r){return e.baseState=n,rS(e,qn,typeof r=="function"?r:ic)}function vz(e,t,n,r,s){if(Iv(e))throw Error(Be(485));if(e=t.action,e!==null){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){a.listeners.push(o)}};It.T!==null?n(!0):a.isTransition=!1,r(a),n=t.pending,n===null?(a.next=t.pending=a,j_(t,a)):(a.next=n.next,t.pending=n.next=a)}}function j_(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var a=It.T,o={};It.T=o;try{var l=n(s,r),c=It.S;c!==null&&c(o,l),C3(e,t,l)}catch(d){zN(e,t,d)}finally{a!==null&&o.types!==null&&(a.types=o.types),It.T=a}}else try{a=n(s,r),C3(e,t,a)}catch(d){zN(e,t,d)}}function C3(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){A3(e,t,r)},function(r){return zN(e,t,r)}):A3(e,t,n)}function A3(e,t,n){t.status="fulfilled",t.value=n,S_(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,j_(e,n)))}function zN(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,S_(t),t=t.next;while(t!==r)}e.action=null}function S_(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function k_(e,t){return t}function M3(e,t){if(xn){var n=Qn.formState;if(n!==null){e:{var r=Qt;if(xn){if(or){t:{for(var s=or,a=Ii;s.nodeType!==8;){if(!a){s=null;break t}if(s=Bi(s.nextSibling),s===null){s=null;break t}}a=s.data,s=a==="F!"||a==="F"?s:null}if(s){or=Bi(s.nextSibling),r=s.data==="F!";break e}}_d(r)}r=!1}r&&(t=n[0])}}return n=la(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k_,lastRenderedState:t},n.queue=r,n=H_.bind(null,Qt,r),r.dispatch=n,r=FN(!1),a=lS.bind(null,Qt,!1,r.queue),r=la(),s={state:t,dispatch:null,action:e,pending:null},r.queue=s,n=vz.bind(null,Qt,s,a,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function D3(e){var t=Vr();return C_(t,qn,e)}function C_(e,t,n){if(t=rS(e,t,k_)[0],e=oy(ic)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=ax(t)}catch(o){throw o===yp?Lv:o}else r=t;t=Vr();var s=t.queue,a=s.dispatch;return n!==t.memoizedState&&(Qt.flags|=2048,Hh(9,{destroy:void 0},wz.bind(null,s,n),null)),[r,a,e]}function wz(e,t){e.action=t}function E3(e){var t=Vr(),n=qn;if(n!==null)return C_(t,n,e);Vr(),t=t.memoizedState,n=Vr();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Hh(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=Qt.updateQueue,t===null&&(t=Rv(),Qt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function A_(){return Vr().memoizedState}function ly(e,t,n,r){var s=la();Qt.flags|=e,s.memoizedState=Hh(1|t,{destroy:void 0},n,r===void 0?null:r)}function Pv(e,t,n,r){var s=Vr();r=r===void 0?null:r;var a=s.memoizedState.inst;qn!==null&&r!==null&&Xj(r,qn.memoizedState.deps)?s.memoizedState=Hh(t,a,n,r):(Qt.flags|=e,s.memoizedState=Hh(1|t,a,n,r))}function _3(e,t){ly(8390656,8,e,t)}function sS(e,t){Pv(2048,8,e,t)}function Nz(e){Qt.flags|=4;var t=Qt.updateQueue;if(t===null)t=Rv(),Qt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function M_(e){var t=Vr().memoizedState;return Nz({ref:t,nextImpl:e}),function(){if(kn&2)throw Error(Be(440));return t.impl.apply(void 0,arguments)}}function D_(e,t){return Pv(4,2,e,t)}function E_(e,t){return Pv(4,4,e,t)}function __(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function T_(e,t,n){n=n!=null?n.concat([e]):null,Pv(4,4,__.bind(null,t,e),n)}function aS(){}function L_(e,t){var n=Vr();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Xj(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function R_(e,t){var n=Vr();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Xj(t,r[1]))return r[0];if(r=e(),Ku){ed(!0);try{e()}finally{ed(!1)}}return n.memoizedState=[r,t],r}function iS(e,t,n){return n===void 0||ac&1073741824&&!(mn&261930)?e.memoizedState=t:(e.memoizedState=n,e=NT(),Qt.lanes|=e,Ld|=e,n)}function O_(e,t,n,r){return gi(n,t)?n:Bh.current!==null?(e=iS(e,n,r),gi(e,t)||(ns=!0),e):!(ac&42)||ac&1073741824&&!(mn&261930)?(ns=!0,e.memoizedState=n):(e=NT(),Qt.lanes|=e,Ld|=e,t)}function P_(e,t,n,r,s){var a=Cn.p;Cn.p=a!==0&&8>a?a:8;var o=It.T,l={};It.T=l,lS(e,!1,t,n);try{var c=s(),d=It.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=xz(c,r);Vm(e,t,u,fi(e))}else Vm(e,t,r,fi(e))}catch(f){Vm(e,t,{then:function(){},status:"rejected",reason:f},fi())}finally{Cn.p=a,o!==null&&l.types!==null&&(o.types=l.types),It.T=o}}function jz(){}function BN(e,t,n,r){if(e.tag!==5)throw Error(Be(476));var s=I_(e).queue;P_(e,s,t,_u,n===null?jz:function(){return F_(e),n(r)})}function I_(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:_u,baseState:_u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:_u},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function F_(e){var t=I_(e);t.next===null&&(t=e.alternate.memoizedState),Vm(e,t.next.queue,{},fi())}function oS(){return Us(Sg)}function z_(){return Vr().memoizedState}function B_(){return Vr().memoizedState}function Sz(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=fi();e=md(n);var r=gd(t,e,n);r!==null&&(Ta(r,t,n),Um(r,t,n)),t={cache:Yj()},e.payload=t;return}t=t.return}}function kz(e,t,n){var r=fi();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Iv(e)?U_(t,n):(n=Uj(e,t,n,r),n!==null&&(Ta(n,e,r),$_(n,t,r)))}function H_(e,t,n){var r=fi();Vm(e,t,n,r)}function Vm(e,t,n,r){var s={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Iv(e))U_(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,gi(l,o))return Tv(e,t,s,0),Qn===null&&_v(),!1}catch{}finally{}if(n=Uj(e,t,s,r),n!==null)return Ta(n,e,r),$_(n,t,r),!0}return!1}function lS(e,t,n,r){if(r={lane:2,revertLane:xS(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Iv(e)){if(t)throw Error(Be(479))}else t=Uj(e,n,r,2),t!==null&&Ta(t,e,2)}function Iv(e){var t=e.alternate;return e===Qt||t!==null&&t===Qt}function U_(e,t){jh=Wy=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $_(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,M6(e,n)}}var wg={readContext:Us,use:Ov,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useLayoutEffect:kr,useInsertionEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useSyncExternalStore:kr,useId:kr,useHostTransitionStatus:kr,useFormState:kr,useActionState:kr,useOptimistic:kr,useMemoCache:kr,useCacheRefresh:kr};wg.useEffectEvent=kr;var q_={readContext:Us,use:Ov,useCallback:function(e,t){return la().memoizedState=[e,t===void 0?null:t],e},useContext:Us,useEffect:_3,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ly(4194308,4,__.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ly(4194308,4,e,t)},useInsertionEffect:function(e,t){ly(4,2,e,t)},useMemo:function(e,t){var n=la();t=t===void 0?null:t;var r=e();if(Ku){ed(!0);try{e()}finally{ed(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=la();if(n!==void 0){var s=n(t);if(Ku){ed(!0);try{n(t)}finally{ed(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=kz.bind(null,Qt,e),[r.memoizedState,e]},useRef:function(e){var t=la();return e={current:e},t.memoizedState=e},useState:function(e){e=FN(e);var t=e.queue,n=H_.bind(null,Qt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:aS,useDeferredValue:function(e,t){var n=la();return iS(n,e,t)},useTransition:function(){var e=FN(!1);return e=P_.bind(null,Qt,e.queue,!0,!1),la().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Qt,s=la();if(xn){if(n===void 0)throw Error(Be(407));n=n()}else{if(n=t(),Qn===null)throw Error(Be(349));mn&127||x_(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,_3(b_.bind(null,r,a,e),[e]),r.flags|=2048,Hh(9,{destroy:void 0},y_.bind(null,r,a,n,t),null),n},useId:function(){var e=la(),t=Qn.identifierPrefix;if(xn){var n=Fo,r=Io;n=(r&~(1<<32-ui(r)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Gy++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=yz++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:oS,useFormState:M3,useActionState:M3,useOptimistic:function(e){var t=la();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=lS.bind(null,Qt,!0,n),n.dispatch=t,[e,t]},useMemoCache:nS,useCacheRefresh:function(){return la().memoizedState=Sz.bind(null,Qt)},useEffectEvent:function(e){var t=la(),n={impl:e};return t.memoizedState=n,function(){if(kn&2)throw Error(Be(440));return n.impl.apply(void 0,arguments)}}},cS={readContext:Us,use:Ov,useCallback:L_,useContext:Us,useEffect:sS,useImperativeHandle:T_,useInsertionEffect:D_,useLayoutEffect:E_,useMemo:R_,useReducer:oy,useRef:A_,useState:function(){return oy(ic)},useDebugValue:aS,useDeferredValue:function(e,t){var n=Vr();return O_(n,qn.memoizedState,e,t)},useTransition:function(){var e=oy(ic)[0],t=Vr().memoizedState;return[typeof e=="boolean"?e:ax(e),t]},useSyncExternalStore:g_,useId:z_,useHostTransitionStatus:oS,useFormState:D3,useActionState:D3,useOptimistic:function(e,t){var n=Vr();return N_(n,qn,e,t)},useMemoCache:nS,useCacheRefresh:B_};cS.useEffectEvent=M_;var V_={readContext:Us,use:Ov,useCallback:L_,useContext:Us,useEffect:sS,useImperativeHandle:T_,useInsertionEffect:D_,useLayoutEffect:E_,useMemo:R_,useReducer:b2,useRef:A_,useState:function(){return b2(ic)},useDebugValue:aS,useDeferredValue:function(e,t){var n=Vr();return qn===null?iS(n,e,t):O_(n,qn.memoizedState,e,t)},useTransition:function(){var e=b2(ic)[0],t=Vr().memoizedState;return[typeof e=="boolean"?e:ax(e),t]},useSyncExternalStore:g_,useId:z_,useHostTransitionStatus:oS,useFormState:E3,useActionState:E3,useOptimistic:function(e,t){var n=Vr();return qn!==null?N_(n,qn,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:nS,useCacheRefresh:B_};V_.useEffectEvent=M_;function v2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ur({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var HN={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fi(),s=md(r);s.payload=t,n!=null&&(s.callback=n),t=gd(e,s,r),t!==null&&(Ta(t,e,r),Um(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fi(),s=md(r);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=gd(e,s,r),t!==null&&(Ta(t,e,r),Um(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fi(),r=md(n);r.tag=2,t!=null&&(r.callback=t),t=gd(e,r,n),t!==null&&(Ta(t,e,n),Um(t,e,n))}};function T3(e,t,n,r,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!gg(n,r)||!gg(s,a):!0}function L3(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&HN.enqueueReplaceState(t,t.state,null)}function Ju(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=ur({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}function Y_(e){By(e)}function W_(e){console.error(e)}function G_(e){By(e)}function Ky(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function R3(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function UN(e,t,n){return n=md(n),n.tag=3,n.payload={element:null},n.callback=function(){Ky(e,t)},n}function K_(e){return e=md(e),e.tag=3,e}function J_(e,t,n,r){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var a=r.value;e.payload=function(){return s(a)},e.callback=function(){R3(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){R3(t,n,r),typeof s!="function"&&(xd===null?xd=new Set([this]):xd.add(this));var l=r.stack;this.componentDidCatch(r.value,{componentStack:l!==null?l:""})})}function Cz(e,t,n,r,s){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&xp(t,n,s,!0),n=xi.current,n!==null){switch(n.tag){case 31:case 13:return zi===null?eb():n.alternate===null&&Dr===0&&(Dr=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===qy?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),_2(e,r,s)),!1;case 22:return n.flags|=65536,r===qy?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),_2(e,r,s)),!1}throw Error(Be(435,n.tag))}return _2(e,r,s),eb(),!1}if(xn)return t=xi.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==DN&&(e=Error(Be(422),{cause:r}),yg(Pi(e,n)))):(r!==DN&&(t=Error(Be(423),{cause:r}),yg(Pi(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,r=Pi(r,n),s=UN(e.stateNode,r,s),y2(e,s),Dr!==4&&(Dr=2)),!1;var a=Error(Be(520),{cause:r});if(a=Pi(a,n),Gm===null?Gm=[a]:Gm.push(a),Dr!==4&&(Dr=2),t===null)return!0;r=Pi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=UN(n.stateNode,r,e),y2(n,e),!1;case 1:if(t=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(xd===null||!xd.has(a))))return n.flags|=65536,s&=-s,n.lanes|=s,s=K_(s),J_(s,e,n,r),y2(n,s),!1}n=n.return}while(n!==null);return!1}var dS=Error(Be(461)),ns=!1;function Is(e,t,n,r){t.child=e===null?d_(t,null,n,r):Gu(t,e.child,n,r)}function O3(e,t,n,r,s){n=n.render;var a=t.ref;if("ref"in r){var o={};for(var l in r)l!=="ref"&&(o[l]=r[l])}else o=r;return Wu(t),r=Qj(e,t,n,o,a,s),l=Zj(),e!==null&&!ns?(eS(e,t,s),oc(e,t,s)):(xn&&l&&qj(t),t.flags|=1,Is(e,t,r,s),t.child)}function P3(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!$j(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,X_(e,t,a,r,s)):(e=ay(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!uS(e,s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:gg,n(o,r)&&e.ref===t.ref)return oc(e,t,s)}return t.flags|=1,e=Vl(a,r),e.ref=t.ref,e.return=t,t.child=e}function X_(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(gg(a,r)&&e.ref===t.ref)if(ns=!1,t.pendingProps=r=a,uS(e,s))e.flags&131072&&(ns=!0);else return t.lanes=e.lanes,oc(e,t,s)}return $N(e,t,n,r,s)}function Q_(e,t,n,r){var s=r.children,a=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if(t.flags&128){if(a=a!==null?a.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;r=s&~a}else r=0,t.child=null;return I3(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&iy(t,a!==null?a.cachePool:null),a!==null?k3(t,a):PN(),h_(t);else return r=t.lanes=536870912,I3(e,t,a!==null?a.baseLanes|n:n,n,r)}else a!==null?(iy(t,a.cachePool),k3(t,a),Jc(),t.memoizedState=null):(e!==null&&iy(t,null),PN(),Jc());return Is(e,t,s,n),t.child}function Mm(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function I3(e,t,n,r,s){var a=Wj();return a=a===null?null:{parent:ts._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&iy(t,null),PN(),h_(t),e!==null&&xp(e,t,r,!0),t.childLanes=s,null}function cy(e,t){return t=Jy({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function F3(e,t,n){return Gu(t,e.child,null,n),e=cy(t,t.pendingProps),e.flags|=2,ri(t),t.memoizedState=null,e}function Az(e,t,n){var r=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(xn){if(r.mode==="hidden")return e=cy(t,r),t.lanes=536870912,Mm(null,e);if(IN(t),(e=or)?(e=qT(e,Ii),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ed!==null?{id:Io,overflow:Fo}:null,retryLane:536870912,hydrationErrors:null},n=r_(e),n.return=t,t.child=n,Hs=t,or=null)):e=null,e===null)throw _d(t);return t.lanes=536870912,null}return cy(t,r)}var a=e.memoizedState;if(a!==null){var o=a.dehydrated;if(IN(t),s)if(t.flags&256)t.flags&=-257,t=F3(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(Be(558));else if(ns||xp(e,t,n,!1),s=(n&e.childLanes)!==0,ns||s){if(r=Qn,r!==null&&(o=D6(r,n),o!==0&&o!==a.retryLane))throw a.retryLane=o,pf(e,o),Ta(r,e,o),dS;eb(),t=F3(e,t,n)}else e=a.treeContext,or=Bi(o.nextSibling),Hs=t,xn=!0,pd=null,Ii=!1,e!==null&&a_(t,e),t=cy(t,r),t.flags|=4096;return t}return e=Vl(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function dy(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(Be(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function $N(e,t,n,r,s){return Wu(t),n=Qj(e,t,n,r,void 0,s),r=Zj(),e!==null&&!ns?(eS(e,t,s),oc(e,t,s)):(xn&&r&&qj(t),t.flags|=1,Is(e,t,n,s),t.child)}function z3(e,t,n,r,s,a){return Wu(t),t.updateQueue=null,n=m_(t,r,n,s),p_(e),r=Zj(),e!==null&&!ns?(eS(e,t,a),oc(e,t,a)):(xn&&r&&qj(t),t.flags|=1,Is(e,t,n,a),t.child)}function B3(e,t,n,r,s){if(Wu(t),t.stateNode===null){var a=fh,o=n.contextType;typeof o=="object"&&o!==null&&(a=Us(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=HN,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Kj(t),o=n.contextType,a.context=typeof o=="object"&&o!==null?Us(o):fh,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(v2(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(o=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),o!==a.state&&HN.enqueueReplaceState(a,a.state,null),qm(t,r,a,s),$m(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var l=t.memoizedProps,c=Ju(n,l);a.props=c;var d=a.context,u=n.contextType;o=fh,typeof u=="object"&&u!==null&&(o=Us(u));var f=n.getDerivedStateFromProps;u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l||d!==o)&&L3(t,a,r,o),qc=!1;var p=t.memoizedState;a.state=p,qm(t,r,a,s),$m(),d=t.memoizedState,l||p!==d||qc?(typeof f=="function"&&(v2(t,n,f,r),d=t.memoizedState),(c=qc||T3(t,n,c,r,p,d,o))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=o,r=c):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,RN(e,t),o=t.memoizedProps,u=Ju(n,o),a.props=u,f=t.pendingProps,p=a.context,d=n.contextType,c=fh,typeof d=="object"&&d!==null&&(c=Us(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||p!==c)&&L3(t,a,r,c),qc=!1,p=t.memoizedState,a.state=p,qm(t,r,a,s),$m();var h=t.memoizedState;o!==f||p!==h||qc||e!==null&&e.dependencies!==null&&$y(e.dependencies)?(typeof l=="function"&&(v2(t,n,l,r),h=t.memoizedState),(u=qc||T3(t,n,u,r,p,h,c)||e!==null&&e.dependencies!==null&&$y(e.dependencies))?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,h,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,h,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,dy(e,t),r=(t.flags&128)!==0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Gu(t,e.child,null,s),t.child=Gu(t,null,n,s)):Is(e,t,n,s),t.memoizedState=a.state,e=t.child):e=oc(e,t,s),e}function H3(e,t,n,r){return Yu(),t.flags|=256,Is(e,t,n,r),t.child}var w2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function N2(e){return{baseLanes:e,cachePool:o_()}}function j2(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=oi),e}function Z_(e,t,n){var r=t.pendingProps,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(Br.current&2)!==0),o&&(s=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(xn){if(s?Kc(t):Jc(),(e=or)?(e=qT(e,Ii),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ed!==null?{id:Io,overflow:Fo}:null,retryLane:536870912,hydrationErrors:null},n=r_(e),n.return=t,t.child=n,Hs=t,or=null)):e=null,e===null)throw _d(t);return r5(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,s?(Jc(),s=t.mode,l=Jy({mode:"hidden",children:l},s),r=Tu(r,s,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,r=t.child,r.memoizedState=N2(n),r.childLanes=j2(e,o,n),t.memoizedState=w2,Mm(null,r)):(Kc(t),qN(t,l))}var c=e.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(a)t.flags&256?(Kc(t),t.flags&=-257,t=S2(e,t,n)):t.memoizedState!==null?(Jc(),t.child=e.child,t.flags|=128,t=null):(Jc(),l=r.fallback,s=t.mode,r=Jy({mode:"visible",children:r.children},s),l=Tu(l,s,n,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,Gu(t,e.child,null,n),r=t.child,r.memoizedState=N2(n),r.childLanes=j2(e,o,n),t.memoizedState=w2,t=Mm(null,r));else if(Kc(t),r5(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var d=o.dgst;o=d,r=Error(Be(419)),r.stack="",r.digest=o,yg({value:r,source:null,stack:null}),t=S2(e,t,n)}else if(ns||xp(e,t,n,!1),o=(n&e.childLanes)!==0,ns||o){if(o=Qn,o!==null&&(r=D6(o,n),r!==0&&r!==c.retryLane))throw c.retryLane=r,pf(e,r),Ta(o,e,r),dS;n5(l)||eb(),t=S2(e,t,n)}else n5(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,or=Bi(l.nextSibling),Hs=t,xn=!0,pd=null,Ii=!1,e!==null&&a_(t,e),t=qN(t,r.children),t.flags|=4096);return t}return s?(Jc(),l=r.fallback,s=t.mode,c=e.child,d=c.sibling,r=Vl(c,{mode:"hidden",children:r.children}),r.subtreeFlags=c.subtreeFlags&65011712,d!==null?l=Vl(d,l):(l=Tu(l,s,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,Mm(null,r),r=t.child,l=e.child.memoizedState,l===null?l=N2(n):(s=l.cachePool,s!==null?(c=ts._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=o_(),l={baseLanes:l.baseLanes|n,cachePool:s}),r.memoizedState=l,r.childLanes=j2(e,o,n),t.memoizedState=w2,Mm(e.child,r)):(Kc(t),n=e.child,e=n.sibling,n=Vl(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function qN(e,t){return t=Jy({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Jy(e,t){return e=si(22,e,null,t),e.lanes=0,e}function S2(e,t,n){return Gu(t,e.child,null,n),e=qN(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function U3(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_N(e.return,t,n)}function k2(e,t,n,r,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s,o.treeForkCount=a)}function eT(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;r=r.children;var o=Br.current,l=(o&2)!==0;if(l?(o=o&1|2,t.flags|=128):o&=1,nr(Br,o),Is(e,t,r,n),r=xn?xg:0,!l&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&U3(e,n,t);else if(e.tag===19)U3(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Yy(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),k2(t,!1,s,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Yy(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}k2(t,!0,n,null,a,r);break;case"together":k2(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function oc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ld|=t.lanes,!(n&t.childLanes))if(e!==null){if(xp(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(Be(153));if(t.child!==null){for(e=t.child,n=Vl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Vl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function uS(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&$y(e)))}function Mz(e,t,n){switch(t.tag){case 3:Py(t,t.stateNode.containerInfo),Gc(t,ts,e.memoizedState.cache),Yu();break;case 27:case 5:yN(t);break;case 4:Py(t,t.stateNode.containerInfo);break;case 10:Gc(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,IN(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Kc(t),t.flags|=128,null):n&t.child.childLanes?Z_(e,t,n):(Kc(t),e=oc(e,t,n),e!==null?e.sibling:null);Kc(t);break;case 19:var s=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(xp(e,t,n,!1),r=(n&t.childLanes)!==0),s){if(r)return eT(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nr(Br,Br.current),r)break;return null;case 22:return t.lanes=0,Q_(e,t,n,t.pendingProps);case 24:Gc(t,ts,e.memoizedState.cache)}return oc(e,t,n)}function tT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ns=!0;else{if(!uS(e,n)&&!(t.flags&128))return ns=!1,Mz(e,t,n);ns=!!(e.flags&131072)}else ns=!1,xn&&t.flags&1048576&&s_(t,xg,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=pu(t.elementType),t.type=e,typeof e=="function")$j(e)?(r=Ju(e,r),t.tag=1,t=B3(null,t,e,r,n)):(t.tag=0,t=$N(null,t,e,r,n));else{if(e!=null){var s=e.$$typeof;if(s===Dj){t.tag=11,t=O3(null,t,e,r,n);break e}else if(s===Ej){t.tag=14,t=P3(null,t,e,r,n);break e}}throw t=gN(e)||e,Error(Be(306,t,""))}}return t;case 0:return $N(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,s=Ju(r,t.pendingProps),B3(e,t,r,s,n);case 3:e:{if(Py(t,t.stateNode.containerInfo),e===null)throw Error(Be(387));r=t.pendingProps;var a=t.memoizedState;s=a.element,RN(e,t),qm(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Gc(t,ts,r),r!==a.cache&&TN(t,[ts],n,!0),$m(),r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=H3(e,t,r,n);break e}else if(r!==s){s=Pi(Error(Be(424)),t),yg(s),t=H3(e,t,r,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(or=Bi(e.firstChild),Hs=t,xn=!0,pd=null,Ii=!0,n=d_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Yu(),r===s){t=oc(e,t,n);break e}Is(e,t,r,n)}t=t.child}return t;case 26:return dy(e,t),e===null?(n=lC(t.type,null,t.pendingProps,null))?t.memoizedState=n:xn||(n=t.type,e=t.pendingProps,r=sb(hd.current).createElement(n),r[Bs]=t,r[Oa]=e,$s(r,n,e),Ss(r),t.stateNode=r):t.memoizedState=lC(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return yN(t),e===null&&xn&&(r=t.stateNode=VT(t.type,t.pendingProps,hd.current),Hs=t,Ii=!0,s=or,Hd(t.type)?(s5=s,or=Bi(r.firstChild)):or=s),Is(e,t,t.pendingProps.children,n),dy(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&xn&&((s=r=or)&&(r=s9(r,t.type,t.pendingProps,Ii),r!==null?(t.stateNode=r,Hs=t,or=Bi(r.firstChild),Ii=!1,s=!0):s=!1),s||_d(t)),yN(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,r=a.children,e5(s,a)?r=null:o!==null&&e5(s,o)&&(t.flags|=32),t.memoizedState!==null&&(s=Qj(e,t,bz,null,null,n),Sg._currentValue=s),dy(e,t),Is(e,t,r,n),t.child;case 6:return e===null&&xn&&((e=n=or)&&(n=a9(n,t.pendingProps,Ii),n!==null?(t.stateNode=n,Hs=t,or=null,e=!0):e=!1),e||_d(t)),null;case 13:return Z_(e,t,n);case 4:return Py(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Gu(t,null,r,n):Is(e,t,r,n),t.child;case 11:return O3(e,t,t.type,t.pendingProps,n);case 7:return Is(e,t,t.pendingProps,n),t.child;case 8:return Is(e,t,t.pendingProps.children,n),t.child;case 12:return Is(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Gc(t,t.type,r.value),Is(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Wu(t),s=Us(s),r=r(s),t.flags|=1,Is(e,t,r,n),t.child;case 14:return P3(e,t,t.type,t.pendingProps,n);case 15:return X_(e,t,t.type,t.pendingProps,n);case 19:return eT(e,t,n);case 31:return Az(e,t,n);case 22:return Q_(e,t,n,t.pendingProps);case 24:return Wu(t),r=Us(ts),e===null?(s=Wj(),s===null&&(s=Qn,a=Yj(),s.pooledCache=a,a.refCount++,a!==null&&(s.pooledCacheLanes|=n),s=a),t.memoizedState={parent:r,cache:s},Kj(t),Gc(t,ts,s)):(e.lanes&n&&(RN(e,t),qm(t,null,null,n),$m()),s=e.memoizedState,a=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Gc(t,ts,r)):(r=a.cache,Gc(t,ts,r),r!==s.cache&&TN(t,[ts],n,!0))),Is(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(Be(156,t.tag))}function bl(e){e.flags|=4}function C2(e,t,n,r,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(kT())e.flags|=8192;else throw Ru=qy,Gj}else e.flags&=-16777217}function $3(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!GT(t))if(kT())e.flags|=8192;else throw Ru=qy,Gj}function f0(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?C6():536870912,e.lanes|=t,Uh|=t)}function im(e,t){if(!xn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ar(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&65011712,r|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Dz(e,t,n){var r=t.pendingProps;switch(Vj(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(t),null;case 1:return ar(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Yl(ts),Ph(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Of(t)?bl(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,x2())),ar(t),null;case 26:var s=t.type,a=t.memoizedState;return e===null?(bl(t),a!==null?(ar(t),$3(t,a)):(ar(t),C2(t,s,null,r,n))):a?a!==e.memoizedState?(bl(t),ar(t),$3(t,a)):(ar(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&bl(t),ar(t),C2(t,s,e,r,n)),null;case 27:if(Iy(t),n=hd.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&bl(t);else{if(!r){if(t.stateNode===null)throw Error(Be(166));return ar(t),null}e=$o.current,Of(t)?y3(t):(e=VT(s,r,n),t.stateNode=e,bl(t))}return ar(t),null;case 5:if(Iy(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&bl(t);else{if(!r){if(t.stateNode===null)throw Error(Be(166));return ar(t),null}if(a=$o.current,Of(t))y3(t);else{var o=sb(hd.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":a=o.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof r.is=="string"?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a=typeof r.is=="string"?o.createElement(s,{is:r.is}):o.createElement(s)}}a[Bs]=t,a[Oa]=r;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)a.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch($s(a,s,r),s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&bl(t)}}return ar(t),C2(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&bl(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Be(166));if(e=hd.current,Of(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,s=Hs,s!==null)switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Bs]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||HT(e.nodeValue,n)),e||_d(t,!0)}else e=sb(e).createTextNode(r),e[Bs]=t,t.stateNode=e}return ar(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Of(t),n!==null){if(e===null){if(!r)throw Error(Be(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Be(557));e[Bs]=t}else Yu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ar(t),e=!1}else n=x2(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(ri(t),t):(ri(t),null);if(t.flags&128)throw Error(Be(558))}return ar(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Of(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Be(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Be(317));s[Bs]=t}else Yu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ar(t),s=!1}else s=x2(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(ri(t),t):(ri(t),null)}return ri(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,s=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(s=r.alternate.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==s&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),f0(t,t.updateQueue),ar(t),null);case 4:return Ph(),e===null&&yS(t.stateNode.containerInfo),ar(t),null;case 10:return Yl(t.type),ar(t),null;case 19:if(As(Br),r=t.memoizedState,r===null)return ar(t),null;if(s=(t.flags&128)!==0,a=r.rendering,a===null)if(s)im(r,!1);else{if(Dr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Yy(e),a!==null){for(t.flags|=128,im(r,!1),e=a.updateQueue,t.updateQueue=e,f0(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)n_(n,e),n=n.sibling;return nr(Br,Br.current&1|2),xn&&Pl(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&ci()>Qy&&(t.flags|=128,s=!0,im(r,!1),t.lanes=4194304)}else{if(!s)if(e=Yy(a),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,f0(t,e),im(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!xn)return ar(t),null}else 2*ci()-r.renderingStartTime>Qy&&n!==536870912&&(t.flags|=128,s=!0,im(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e!==null?e.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ci(),e.sibling=null,n=Br.current,nr(Br,s?n&1|2:n&1),xn&&Pl(t,r.treeForkCount),e):(ar(t),null);case 22:case 23:return ri(t),Jj(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(ar(t),t.subtreeFlags&6&&(t.flags|=8192)):ar(t),n=t.updateQueue,n!==null&&f0(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&As(Lu),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Yl(ts),ar(t),null;case 25:return null;case 30:return null}throw Error(Be(156,t.tag))}function Ez(e,t){switch(Vj(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yl(ts),Ph(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Iy(t),null;case 31:if(t.memoizedState!==null){if(ri(t),t.alternate===null)throw Error(Be(340));Yu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ri(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Be(340));Yu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return As(Br),null;case 4:return Ph(),null;case 10:return Yl(t.type),null;case 22:case 23:return ri(t),Jj(),e!==null&&As(Lu),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Yl(ts),null;case 25:return null;default:return null}}function nT(e,t){switch(Vj(t),t.tag){case 3:Yl(ts),Ph();break;case 26:case 27:case 5:Iy(t);break;case 4:Ph();break;case 31:t.memoizedState!==null&&ri(t);break;case 13:ri(t);break;case 19:As(Br);break;case 10:Yl(t.type);break;case 22:case 23:ri(t),Jj(),e!==null&&As(Lu);break;case 24:Yl(ts)}}function ix(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==s)}}catch(l){Bn(t,t.return,l)}}function Td(e,t,n){try{var r=t.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var a=s.next;r=a;do{if((r.tag&e)===e){var o=r.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,s=t;var c=n,d=l;try{d()}catch(u){Bn(s,c,u)}}}r=r.next}while(r!==a)}}catch(u){Bn(t,t.return,u)}}function rT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{f_(t,n)}catch(r){Bn(e,e.return,r)}}}function sT(e,t,n){n.props=Ju(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Bn(e,t,r)}}function Ym(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(s){Bn(e,t,s)}}function zo(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(s){Bn(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Bn(e,t,s)}else n.current=null}function aT(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){Bn(e,e.return,s)}}function A2(e,t,n){try{var r=e.stateNode;Qz(r,e.type,n,t),r[Oa]=t}catch(s){Bn(e,e.return,s)}}function iT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Hd(e.type)||e.tag===4}function M2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Hd(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function VN(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bl));else if(r!==4&&(r===27&&Hd(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(VN(e,t,n),e=e.sibling;e!==null;)VN(e,t,n),e=e.sibling}function Xy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Hd(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Xy(e,t,n),e=e.sibling;e!==null;)Xy(e,t,n),e=e.sibling}function oT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);$s(t,r,n),t[Bs]=e,t[Oa]=n}catch(a){Bn(e,e.return,a)}}var Fl=!1,es=!1,D2=!1,q3=typeof WeakSet=="function"?WeakSet:Set,Ns=null;function _z(e,t){if(e=e.containerInfo,QN=lb,e=G6(e),Bj(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,f=e,p=null;t:for(;;){for(var h;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==a||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++d===s&&(l=o),p===a&&++u===r&&(c=o),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ZN={focusedElem:e,selectionRange:n},lb=!1,Ns=t;Ns!==null;)if(t=Ns,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ns=e;else for(;Ns!==null;){switch(t=Ns,a=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)s=e[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var m=Ju(n.type,s);e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(g){Bn(n,n.return,g)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)t5(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":t5(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(Be(163))}if(e=t.sibling,e!==null){e.return=t.return,Ns=e;break}Ns=t.return}}function lT(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:wl(e,n),r&4&&ix(5,n);break;case 1:if(wl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(o){Bn(n,n.return,o)}else{var s=Ju(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Bn(n,n.return,o)}}r&64&&rT(n),r&512&&Ym(n,n.return);break;case 3:if(wl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{f_(e,t)}catch(o){Bn(n,n.return,o)}}break;case 27:t===null&&r&4&&oT(n);case 26:case 5:wl(e,n),t===null&&r&4&&aT(n),r&512&&Ym(n,n.return);break;case 12:wl(e,n);break;case 31:wl(e,n),r&4&&uT(e,n);break;case 13:wl(e,n),r&4&&fT(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Bz.bind(null,n),i9(e,n))));break;case 22:if(r=n.memoizedState!==null||Fl,!r){t=t!==null&&t.memoizedState!==null||es,s=Fl;var a=es;Fl=r,(es=t)&&!a?Tl(e,n,(n.subtreeFlags&8772)!==0):wl(e,n),Fl=s,es=a}break;case 30:break;default:wl(e,n)}}function cT(e){var t=e.alternate;t!==null&&(e.alternate=null,cT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Rj(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var hr=null,Sa=!1;function vl(e,t,n){for(n=n.child;n!==null;)dT(e,t,n),n=n.sibling}function dT(e,t,n){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(Zg,n)}catch{}switch(n.tag){case 26:es||zo(n,t),vl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:es||zo(n,t);var r=hr,s=Sa;Hd(n.type)&&(hr=n.stateNode,Sa=!1),vl(e,t,n),Jm(n.stateNode),hr=r,Sa=s;break;case 5:es||zo(n,t);case 6:if(r=hr,s=Sa,hr=null,vl(e,t,n),hr=r,Sa=s,hr!==null)if(Sa)try{(hr.nodeType===9?hr.body:hr.nodeName==="HTML"?hr.ownerDocument.body:hr).removeChild(n.stateNode)}catch(a){Bn(n,t,a)}else try{hr.removeChild(n.stateNode)}catch(a){Bn(n,t,a)}break;case 18:hr!==null&&(Sa?(e=hr,rC(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Yh(e)):rC(hr,n.stateNode));break;case 4:r=hr,s=Sa,hr=n.stateNode.containerInfo,Sa=!0,vl(e,t,n),hr=r,Sa=s;break;case 0:case 11:case 14:case 15:Td(2,n,t),es||Td(4,n,t),vl(e,t,n);break;case 1:es||(zo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&sT(n,t,r)),vl(e,t,n);break;case 21:vl(e,t,n);break;case 22:es=(r=es)||n.memoizedState!==null,vl(e,t,n),es=r;break;default:vl(e,t,n)}}function uT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Yh(e)}catch(n){Bn(t,t.return,n)}}}function fT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Yh(e)}catch(n){Bn(t,t.return,n)}}function Tz(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new q3),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new q3),t;default:throw Error(Be(435,e.tag))}}function h0(e,t){var n=Tz(e);t.forEach(function(r){if(!n.has(r)){n.add(r);var s=Hz.bind(null,e,r);r.then(s,s)}})}function Na(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r],a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(Hd(l.type)){hr=l.stateNode,Sa=!1;break e}break;case 5:hr=l.stateNode,Sa=!1;break e;case 3:case 4:hr=l.stateNode.containerInfo,Sa=!0;break e}l=l.return}if(hr===null)throw Error(Be(160));dT(a,o,s),hr=null,Sa=!1,a=s.alternate,a!==null&&(a.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)hT(t,e),t=t.sibling}var no=null;function hT(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Na(t,e),ja(e),r&4&&(Td(3,e,e.return),ix(3,e),Td(5,e,e.return));break;case 1:Na(t,e),ja(e),r&512&&(es||n===null||zo(n,n.return)),r&64&&Fl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var s=no;if(Na(t,e),ja(e),r&512&&(es||n===null||zo(n,n.return)),r&4){var a=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":a=s.getElementsByTagName("title")[0],(!a||a[nx]||a[Bs]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=s.createElement(r),s.head.insertBefore(a,s.querySelector("head > title"))),$s(a,r,n),a[Bs]=e,Ss(a),r=a;break e;case"link":var o=dC("link","href",s).get(r+(n.href||""));if(o){for(var l=0;l<o.length;l++)if(a=o[l],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(l,1);break t}}a=s.createElement(r),$s(a,r,n),s.head.appendChild(a);break;case"meta":if(o=dC("meta","content",s).get(r+(n.content||""))){for(l=0;l<o.length;l++)if(a=o[l],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(l,1);break t}}a=s.createElement(r),$s(a,r,n),s.head.appendChild(a);break;default:throw Error(Be(468,r))}a[Bs]=e,Ss(a),r=a}e.stateNode=r}else uC(s,e.type,e.stateNode);else e.stateNode=cC(s,r,e.memoizedProps);else a!==r?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,r===null?uC(s,e.type,e.stateNode):cC(s,r,e.memoizedProps)):r===null&&e.stateNode!==null&&A2(e,e.memoizedProps,n.memoizedProps)}break;case 27:Na(t,e),ja(e),r&512&&(es||n===null||zo(n,n.return)),n!==null&&r&4&&A2(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Na(t,e),ja(e),r&512&&(es||n===null||zo(n,n.return)),e.flags&32){s=e.stateNode;try{Fh(s,"")}catch(m){Bn(e,e.return,m)}}r&4&&e.stateNode!=null&&(s=e.memoizedProps,A2(e,s,n!==null?n.memoizedProps:s)),r&1024&&(D2=!0);break;case 6:if(Na(t,e),ja(e),r&4){if(e.stateNode===null)throw Error(Be(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Bn(e,e.return,m)}}break;case 3:if(hy=null,s=no,no=ab(t.containerInfo),Na(t,e),no=s,ja(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yh(t.containerInfo)}catch(m){Bn(e,e.return,m)}D2&&(D2=!1,pT(e));break;case 4:r=no,no=ab(e.stateNode.containerInfo),Na(t,e),ja(e),no=r;break;case 12:Na(t,e),ja(e);break;case 31:Na(t,e),ja(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,h0(e,r)));break;case 13:Na(t,e),ja(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Fv=ci()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,h0(e,r)));break;case 22:s=e.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=Fl,u=es;if(Fl=d||s,es=u||c,Na(t,e),es=u,Fl=d,ja(e),r&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||c||Fl||es||mu(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){c=n=t;try{if(a=c.stateNode,s)o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var f=c.memoizedProps.style,p=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(m){Bn(c,c.return,m)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(m){Bn(c,c.return,m)}}}else if(t.tag===18){if(n===null){c=t;try{var h=c.stateNode;s?sC(h,!0):sC(c.stateNode,!1)}catch(m){Bn(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,h0(e,n))));break;case 19:Na(t,e),ja(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,h0(e,r)));break;case 30:break;case 21:break;default:Na(t,e),ja(e)}}function ja(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(iT(r)){n=r;break}r=r.return}if(n==null)throw Error(Be(160));switch(n.tag){case 27:var s=n.stateNode,a=M2(e);Xy(e,a,s);break;case 5:var o=n.stateNode;n.flags&32&&(Fh(o,""),n.flags&=-33);var l=M2(e);Xy(e,l,o);break;case 3:case 4:var c=n.stateNode.containerInfo,d=M2(e);VN(e,d,c);break;default:throw Error(Be(161))}}catch(u){Bn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;pT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function wl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)lT(e,t.alternate,t),t=t.sibling}function mu(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Td(4,t,t.return),mu(t);break;case 1:zo(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&sT(t,t.return,n),mu(t);break;case 27:Jm(t.stateNode);case 26:case 5:zo(t,t.return),mu(t);break;case 22:t.memoizedState===null&&mu(t);break;case 30:mu(t);break;default:mu(t)}e=e.sibling}}function Tl(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,s=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Tl(s,a,n),ix(4,a);break;case 1:if(Tl(s,a,n),r=a,s=r.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(d){Bn(r,r.return,d)}if(r=a,s=r.updateQueue,s!==null){var l=r.stateNode;try{var c=s.shared.hiddenCallbacks;if(c!==null)for(s.shared.hiddenCallbacks=null,s=0;s<c.length;s++)u_(c[s],l)}catch(d){Bn(r,r.return,d)}}n&&o&64&&rT(a),Ym(a,a.return);break;case 27:oT(a);case 26:case 5:Tl(s,a,n),n&&r===null&&o&4&&aT(a),Ym(a,a.return);break;case 12:Tl(s,a,n);break;case 31:Tl(s,a,n),n&&o&4&&uT(s,a);break;case 13:Tl(s,a,n),n&&o&4&&fT(s,a);break;case 22:a.memoizedState===null&&Tl(s,a,n),Ym(a,a.return);break;case 30:break;default:Tl(s,a,n)}t=t.sibling}}function fS(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&sx(n))}function hS(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sx(e))}function eo(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)mT(e,t,n,r),t=t.sibling}function mT(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:eo(e,t,n,r),s&2048&&ix(9,t);break;case 1:eo(e,t,n,r);break;case 3:eo(e,t,n,r),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sx(e)));break;case 12:if(s&2048){eo(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,l=a.onPostCommit;typeof l=="function"&&l(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){Bn(t,t.return,c)}}else eo(e,t,n,r);break;case 31:eo(e,t,n,r);break;case 13:eo(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState!==null?a._visibility&2?eo(e,t,n,r):Wm(e,t):a._visibility&2?eo(e,t,n,r):(a._visibility|=2,Gf(e,t,n,r,(t.subtreeFlags&10256)!==0||!1)),s&2048&&fS(o,t);break;case 24:eo(e,t,n,r),s&2048&&hS(t.alternate,t);break;default:eo(e,t,n,r)}}function Gf(e,t,n,r,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var a=e,o=t,l=n,c=r,d=o.flags;switch(o.tag){case 0:case 11:case 15:Gf(a,o,l,c,s),ix(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState!==null?u._visibility&2?Gf(a,o,l,c,s):Wm(a,o):(u._visibility|=2,Gf(a,o,l,c,s)),s&&d&2048&&fS(o.alternate,o);break;case 24:Gf(a,o,l,c,s),s&&d&2048&&hS(o.alternate,o);break;default:Gf(a,o,l,c,s)}t=t.sibling}}function Wm(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Wm(n,r),s&2048&&fS(r.alternate,r);break;case 24:Wm(n,r),s&2048&&hS(r.alternate,r);break;default:Wm(n,r)}t=t.sibling}}var Dm=8192;function Pf(e,t,n){if(e.subtreeFlags&Dm)for(e=e.child;e!==null;)gT(e,t,n),e=e.sibling}function gT(e,t,n){switch(e.tag){case 26:Pf(e,t,n),e.flags&Dm&&e.memoizedState!==null&&y9(n,no,e.memoizedState,e.memoizedProps);break;case 5:Pf(e,t,n);break;case 3:case 4:var r=no;no=ab(e.stateNode.containerInfo),Pf(e,t,n),no=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Dm,Dm=16777216,Pf(e,t,n),Dm=r):Pf(e,t,n));break;default:Pf(e,t,n)}}function xT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function om(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Ns=r,bT(r,e)}xT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)yT(e),e=e.sibling}function yT(e){switch(e.tag){case 0:case 11:case 15:om(e),e.flags&2048&&Td(9,e,e.return);break;case 3:om(e);break;case 12:om(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,uy(e)):om(e);break;default:om(e)}}function uy(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Ns=r,bT(r,e)}xT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Td(8,t,t.return),uy(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,uy(t));break;default:uy(t)}e=e.sibling}}function bT(e,t){for(;Ns!==null;){var n=Ns;switch(n.tag){case 0:case 11:case 15:Td(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:sx(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Ns=r;else e:for(n=e;Ns!==null;){r=Ns;var s=r.sibling,a=r.return;if(cT(r),r===n){Ns=null;break e}if(s!==null){s.return=a,Ns=s;break e}Ns=a}}}var Lz={getCacheForType:function(e){var t=Us(ts),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Us(ts).controller.signal}},Rz=typeof WeakMap=="function"?WeakMap:Map,kn=0,Qn=null,fn=null,mn=0,In=0,Za=null,nd=!1,bp=!1,pS=!1,lc=0,Dr=0,Ld=0,Ou=0,mS=0,oi=0,Uh=0,Gm=null,Aa=null,YN=!1,Fv=0,vT=0,Qy=1/0,Zy=null,xd=null,gs=0,yd=null,$h=null,Wl=0,WN=0,GN=null,wT=null,Km=0,KN=null;function fi(){return kn&2&&mn!==0?mn&-mn:It.T!==null?xS():E6()}function NT(){if(oi===0)if(!(mn&536870912)||xn){var e=a0;a0<<=1,!(a0&3932160)&&(a0=262144),oi=e}else oi=536870912;return e=xi.current,e!==null&&(e.flags|=32),oi}function Ta(e,t,n){(e===Qn&&(In===2||In===9)||e.cancelPendingCommit!==null)&&(qh(e,0),rd(e,mn,oi,!1)),tx(e,n),(!(kn&2)||e!==Qn)&&(e===Qn&&(!(kn&2)&&(Ou|=n),Dr===4&&rd(e,mn,oi,!1)),Ko(e))}function jT(e,t,n){if(kn&6)throw Error(Be(327));var r=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ex(e,t),s=r?Iz(e,t):E2(e,t,!0),a=r;do{if(s===0){bp&&!r&&rd(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!Oz(n)){s=E2(e,t,!1),a=!1;continue}if(s===2){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var l=e;s=Gm;var c=l.current.memoizedState.isDehydrated;if(c&&(qh(l,o).flags|=256),o=E2(l,o,!1),o!==2){if(pS&&!c){l.errorRecoveryDisabledLanes|=a,Ou|=a,s=4;break e}a=Aa,Aa=s,a!==null&&(Aa===null?Aa=a:Aa.push.apply(Aa,a))}s=o}if(a=!1,s!==2)continue}}if(s===1){qh(e,0),rd(e,t,0,!0);break}e:{switch(r=e,a=s,a){case 0:case 1:throw Error(Be(345));case 4:if((t&4194048)!==t)break;case 6:rd(r,t,oi,!nd);break e;case 2:Aa=null;break;case 3:case 5:break;default:throw Error(Be(329))}if((t&62914560)===t&&(s=Fv+300-ci(),10<s)){if(rd(r,t,oi,!nd),Av(r,0,!0)!==0)break e;Wl=t,r.timeoutHandle=$T(V3.bind(null,r,n,Aa,Zy,YN,t,oi,Ou,Uh,nd,a,"Throttled",-0,0),s);break e}V3(r,n,Aa,Zy,YN,t,oi,Ou,Uh,nd,a,null,-0,0)}}break}while(!0);Ko(e)}function V3(e,t,n,r,s,a,o,l,c,d,u,f,p,h){if(e.timeoutHandle=-1,f=t.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bl},gT(t,a,f);var m=(a&62914560)===a?Fv-ci():(a&4194048)===a?vT-ci():0;if(m=b9(f,m),m!==null){Wl=a,e.cancelPendingCommit=m(W3.bind(null,e,t,a,n,r,s,o,l,c,u,f,null,p,h)),rd(e,a,o,!d);return}}W3(e,t,a,n,r,s,o,l,c)}function Oz(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!gi(a(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rd(e,t,n,r){t&=~mS,t&=~Ou,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var a=31-ui(s),o=1<<a;r[a]=-1,s&=~o}n!==0&&A6(e,n,t)}function zv(){return kn&6?!0:(ox(0),!1)}function gS(){if(fn!==null){if(In===0)var e=fn.return;else e=fn,Hl=mf=null,tS(e),Nh=null,bg=0,e=fn;for(;e!==null;)nT(e.alternate,e),e=e.return;fn=null}}function qh(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,t9(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Wl=0,gS(),Qn=e,fn=n=Vl(e.current,null),mn=t,In=0,Za=null,nd=!1,bp=ex(e,t),pS=!1,Uh=oi=mS=Ou=Ld=Dr=0,Aa=Gm=null,YN=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var s=31-ui(r),a=1<<s;t|=e[s],r&=~a}return lc=t,_v(),n}function ST(e,t){Qt=null,It.H=wg,t===yp||t===Lv?(t=j3(),In=3):t===Gj?(t=j3(),In=4):In=t===dS?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Za=t,fn===null&&(Dr=1,Ky(e,Pi(t,e.current)))}function kT(){var e=xi.current;return e===null?!0:(mn&4194048)===mn?zi===null:(mn&62914560)===mn||mn&536870912?e===zi:!1}function CT(){var e=It.H;return It.H=wg,e===null?wg:e}function AT(){var e=It.A;return It.A=Lz,e}function eb(){Dr=4,nd||(mn&4194048)!==mn&&xi.current!==null||(bp=!0),!(Ld&134217727)&&!(Ou&134217727)||Qn===null||rd(Qn,mn,oi,!1)}function E2(e,t,n){var r=kn;kn|=2;var s=CT(),a=AT();(Qn!==e||mn!==t)&&(Zy=null,qh(e,t)),t=!1;var o=Dr;e:do try{if(In!==0&&fn!==null){var l=fn,c=Za;switch(In){case 8:gS(),o=6;break e;case 3:case 2:case 9:case 6:xi.current===null&&(t=!0);var d=In;if(In=0,Za=null,mh(e,l,c,d),n&&bp){o=0;break e}break;default:d=In,In=0,Za=null,mh(e,l,c,d)}}Pz(),o=Dr;break}catch(u){ST(e,u)}while(!0);return t&&e.shellSuspendCounter++,Hl=mf=null,kn=r,It.H=s,It.A=a,fn===null&&(Qn=null,mn=0,_v()),o}function Pz(){for(;fn!==null;)MT(fn)}function Iz(e,t){var n=kn;kn|=2;var r=CT(),s=AT();Qn!==e||mn!==t?(Zy=null,Qy=ci()+500,qh(e,t)):bp=ex(e,t);e:do try{if(In!==0&&fn!==null){t=fn;var a=Za;t:switch(In){case 1:In=0,Za=null,mh(e,t,a,1);break;case 2:case 9:if(N3(a)){In=0,Za=null,Y3(t);break}t=function(){In!==2&&In!==9||Qn!==e||(In=7),Ko(e)},a.then(t,t);break e;case 3:In=7;break e;case 4:In=5;break e;case 7:N3(a)?(In=0,Za=null,Y3(t)):(In=0,Za=null,mh(e,t,a,7));break;case 5:var o=null;switch(fn.tag){case 26:o=fn.memoizedState;case 5:case 27:var l=fn;if(o?GT(o):l.stateNode.complete){In=0,Za=null;var c=l.sibling;if(c!==null)fn=c;else{var d=l.return;d!==null?(fn=d,Bv(d)):fn=null}break t}}In=0,Za=null,mh(e,t,a,5);break;case 6:In=0,Za=null,mh(e,t,a,6);break;case 8:gS(),Dr=6;break e;default:throw Error(Be(462))}}Fz();break}catch(u){ST(e,u)}while(!0);return Hl=mf=null,It.H=r,It.A=s,kn=n,fn!==null?0:(Qn=null,mn=0,_v(),Dr)}function Fz(){for(;fn!==null&&!oF();)MT(fn)}function MT(e){var t=tT(e.alternate,e,lc);e.memoizedProps=e.pendingProps,t===null?Bv(e):fn=t}function Y3(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=z3(n,t,t.pendingProps,t.type,void 0,mn);break;case 11:t=z3(n,t,t.pendingProps,t.type.render,t.ref,mn);break;case 5:tS(t);default:nT(n,t),t=fn=n_(t,lc),t=tT(n,t,lc)}e.memoizedProps=e.pendingProps,t===null?Bv(e):fn=t}function mh(e,t,n,r){Hl=mf=null,tS(t),Nh=null,bg=0;var s=t.return;try{if(Cz(e,s,t,n,mn)){Dr=1,Ky(e,Pi(n,e.current)),fn=null;return}}catch(a){if(s!==null)throw fn=s,a;Dr=1,Ky(e,Pi(n,e.current)),fn=null;return}t.flags&32768?(xn||r===1?e=!0:bp||mn&536870912?e=!1:(nd=e=!0,(r===2||r===9||r===3||r===6)&&(r=xi.current,r!==null&&r.tag===13&&(r.flags|=16384))),DT(t,e)):Bv(t)}function Bv(e){var t=e;do{if(t.flags&32768){DT(t,nd);return}e=t.return;var n=Dz(t.alternate,t,lc);if(n!==null){fn=n;return}if(t=t.sibling,t!==null){fn=t;return}fn=t=e}while(t!==null);Dr===0&&(Dr=5)}function DT(e,t){do{var n=Ez(e.alternate,e);if(n!==null){n.flags&=32767,fn=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){fn=e;return}fn=e=n}while(e!==null);Dr=6,fn=null}function W3(e,t,n,r,s,a,o,l,c){e.cancelPendingCommit=null;do Hv();while(gs!==0);if(kn&6)throw Error(Be(327));if(t!==null){if(t===e.current)throw Error(Be(177));if(a=t.lanes|t.childLanes,a|=Hj,xF(e,n,a,o,l,c),e===Qn&&(fn=Qn=null,mn=0),$h=t,yd=e,Wl=n,WN=a,GN=s,wT=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Uz(Fy,function(){return RT(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,t.subtreeFlags&13878||r){r=It.T,It.T=null,s=Cn.p,Cn.p=2,o=kn,kn|=4;try{_z(e,t,n)}finally{kn=o,Cn.p=s,It.T=r}}gs=1,ET(),_T(),TT()}}function ET(){if(gs===1){gs=0;var e=yd,t=$h,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=It.T,It.T=null;var r=Cn.p;Cn.p=2;var s=kn;kn|=4;try{hT(t,e);var a=ZN,o=G6(e.containerInfo),l=a.focusedElem,c=a.selectionRange;if(o!==l&&l&&l.ownerDocument&&W6(l.ownerDocument.documentElement,l)){if(c!==null&&Bj(l)){var d=c.start,u=c.end;if(u===void 0&&(u=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(u,l.value.length);else{var f=l.ownerDocument||document,p=f&&f.defaultView||window;if(p.getSelection){var h=p.getSelection(),m=l.textContent.length,g=Math.min(c.start,m),x=c.end===void 0?g:Math.min(c.end,m);!h.extend&&g>x&&(o=x,x=g,g=o);var y=m3(l,g),v=m3(l,x);if(y&&v&&(h.rangeCount!==1||h.anchorNode!==y.node||h.anchorOffset!==y.offset||h.focusNode!==v.node||h.focusOffset!==v.offset)){var N=f.createRange();N.setStart(y.node,y.offset),h.removeAllRanges(),g>x?(h.addRange(N),h.extend(v.node,v.offset)):(N.setEnd(v.node,v.offset),h.addRange(N))}}}}for(f=[],h=l;h=h.parentNode;)h.nodeType===1&&f.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var j=f[l];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}lb=!!QN,ZN=QN=null}finally{kn=s,Cn.p=r,It.T=n}}e.current=t,gs=2}}function _T(){if(gs===2){gs=0;var e=yd,t=$h,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=It.T,It.T=null;var r=Cn.p;Cn.p=2;var s=kn;kn|=4;try{lT(e,t.alternate,t)}finally{kn=s,Cn.p=r,It.T=n}}gs=3}}function TT(){if(gs===4||gs===3){gs=0,lF();var e=yd,t=$h,n=Wl,r=wT;t.subtreeFlags&10256||t.flags&10256?gs=5:(gs=0,$h=yd=null,LT(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(xd=null),Lj(n),t=t.stateNode,di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(Zg,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=It.T,s=Cn.p,Cn.p=2,It.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var l=r[o];a(l.value,{componentStack:l.stack})}}finally{It.T=t,Cn.p=s}}Wl&3&&Hv(),Ko(e),s=e.pendingLanes,n&261930&&s&42?e===KN?Km++:(Km=0,KN=e):Km=0,ox(0)}}function LT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,sx(t)))}function Hv(){return ET(),_T(),TT(),RT()}function RT(){if(gs!==5)return!1;var e=yd,t=WN;WN=0;var n=Lj(Wl),r=It.T,s=Cn.p;try{Cn.p=32>n?32:n,It.T=null,n=GN,GN=null;var a=yd,o=Wl;if(gs=0,$h=yd=null,Wl=0,kn&6)throw Error(Be(331));var l=kn;if(kn|=4,yT(a.current),mT(a,a.current,o,n),kn=l,ox(0,!1),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(Zg,a)}catch{}return!0}finally{Cn.p=s,It.T=r,LT(e,t)}}function G3(e,t,n){t=Pi(n,t),t=UN(e.stateNode,t,2),e=gd(e,t,2),e!==null&&(tx(e,2),Ko(e))}function Bn(e,t,n){if(e.tag===3)G3(e,e,n);else for(;t!==null;){if(t.tag===3){G3(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xd===null||!xd.has(r))){e=Pi(n,e),n=K_(2),r=gd(t,n,2),r!==null&&(J_(n,r,t,e),tx(r,2),Ko(r));break}}t=t.return}}function _2(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Rz;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(pS=!0,s.add(n),e=zz.bind(null,e,t,n),t.then(e,e))}function zz(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Qn===e&&(mn&n)===n&&(Dr===4||Dr===3&&(mn&62914560)===mn&&300>ci()-Fv?!(kn&2)&&qh(e,0):mS|=n,Uh===mn&&(Uh=0)),Ko(e)}function OT(e,t){t===0&&(t=C6()),e=pf(e,t),e!==null&&(tx(e,t),Ko(e))}function Bz(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),OT(e,n)}function Hz(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(Be(314))}r!==null&&r.delete(t),OT(e,n)}function Uz(e,t){return _j(e,t)}var tb=null,Kf=null,JN=!1,nb=!1,T2=!1,sd=0;function Ko(e){e!==Kf&&e.next===null&&(Kf===null?tb=Kf=e:Kf=Kf.next=e),nb=!0,JN||(JN=!0,qz())}function ox(e,t){if(!T2&&nb){T2=!0;do for(var n=!1,r=tb;r!==null;){if(e!==0){var s=r.pendingLanes;if(s===0)var a=0;else{var o=r.suspendedLanes,l=r.pingedLanes;a=(1<<31-ui(42|e)+1)-1,a&=s&~(o&~l),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,K3(r,a))}else a=mn,a=Av(r,r===Qn?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||ex(r,a)||(n=!0,K3(r,a));r=r.next}while(n);T2=!1}}function $z(){PT()}function PT(){nb=JN=!1;var e=0;sd!==0&&e9()&&(e=sd);for(var t=ci(),n=null,r=tb;r!==null;){var s=r.next,a=IT(r,t);a===0?(r.next=null,n===null?tb=s:n.next=s,s===null&&(Kf=n)):(n=r,(e!==0||a&3)&&(nb=!0)),r=s}gs!==0&&gs!==5||ox(e),sd!==0&&(sd=0)}function IT(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-ui(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=gF(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}if(t=Qn,n=mn,n=Av(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(In===2||In===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&i2(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||ex(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&i2(r),Lj(n)){case 2:case 8:n=S6;break;case 32:n=Fy;break;case 268435456:n=k6;break;default:n=Fy}return r=FT.bind(null,e),n=_j(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&i2(r),e.callbackPriority=2,e.callbackNode=null,2}function FT(e,t){if(gs!==0&&gs!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Hv()&&e.callbackNode!==n)return null;var r=mn;return r=Av(e,e===Qn?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(jT(e,r,t),IT(e,ci()),e.callbackNode!=null&&e.callbackNode===n?FT.bind(null,e):null)}function K3(e,t){if(Hv())return null;jT(e,t,!0)}function qz(){n9(function(){kn&6?_j(j6,$z):PT()})}function xS(){if(sd===0){var e=zh;e===0&&(e=s0,s0<<=1,!(s0&261888)&&(s0=256)),sd=e}return sd}function J3(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ny(""+e)}function X3(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Vz(e,t,n,r,s){if(t==="submit"&&n&&n.stateNode===s){var a=J3((s[Oa]||null).action),o=r.submitter;o&&(t=(t=o[Oa]||null)?J3(t.formAction):o.getAttribute("formAction"),t!==null&&(a=t,o=null));var l=new Mv("action","action",null,r,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(sd!==0){var c=o?X3(s,o):new FormData(s);BN(n,{pending:!0,data:c,method:s.method,action:a},null,c)}}else typeof a=="function"&&(l.preventDefault(),c=o?X3(s,o):new FormData(s),BN(n,{pending:!0,data:c,method:s.method,action:a},a,c))},currentTarget:s}]})}}for(var L2=0;L2<MN.length;L2++){var R2=MN[L2],Yz=R2.toLowerCase(),Wz=R2[0].toUpperCase()+R2.slice(1);go(Yz,"on"+Wz)}go(J6,"onAnimationEnd");go(X6,"onAnimationIteration");go(Q6,"onAnimationStart");go("dblclick","onDoubleClick");go("focusin","onFocus");go("focusout","onBlur");go(cz,"onTransitionRun");go(dz,"onTransitionStart");go(uz,"onTransitionCancel");go(Z6,"onTransitionEnd");Ih("onMouseEnter",["mouseout","mouseover"]);Ih("onMouseLeave",["mouseout","mouseover"]);Ih("onPointerEnter",["pointerout","pointerover"]);Ih("onPointerLeave",["pointerout","pointerover"]);uf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uf("onBeforeInput",["compositionend","keypress","textInput","paste"]);uf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ng="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ng));function zT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;a=l,s.currentTarget=d;try{a(s)}catch(u){By(u)}s.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;a=l,s.currentTarget=d;try{a(s)}catch(u){By(u)}s.currentTarget=null,a=c}}}}function un(e,t){var n=t[vN];n===void 0&&(n=t[vN]=new Set);var r=e+"__bubble";n.has(r)||(BT(t,e,2,!1),n.add(r))}function O2(e,t,n){var r=0;t&&(r|=4),BT(n,e,r,t)}var p0="_reactListening"+Math.random().toString(36).slice(2);function yS(e){if(!e[p0]){e[p0]=!0,_6.forEach(function(n){n!=="selectionchange"&&(Gz.has(n)||O2(n,!1,e),O2(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[p0]||(t[p0]=!0,O2("selectionchange",!1,t))}}function BT(e,t,n,r){switch(ZT(t)){case 2:var s=N9;break;case 8:s=j9;break;default:s=NS}n=s.bind(null,t,n,e),s=void 0,!kN||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function P2(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===s)return;o=o.return}for(;l!==null;){if(o=ih(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){r=a=o;continue e}l=l.parentNode}}r=r.return}z6(function(){var d=a,u=Pj(n),f=[];e:{var p=e_.get(e);if(p!==void 0){var h=Mv,m=e;switch(e){case"keypress":if(sy(n)===0)break e;case"keydown":case"keyup":h=HF;break;case"focusin":m="focus",h=u2;break;case"focusout":m="blur",h=u2;break;case"beforeblur":case"afterblur":h=u2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=a3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=DF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=qF;break;case J6:case X6:case Q6:h=TF;break;case Z6:h=YF;break;case"scroll":case"scrollend":h=AF;break;case"wheel":h=GF;break;case"copy":case"cut":case"paste":h=RF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=o3;break;case"toggle":case"beforetoggle":h=JF}var g=(t&4)!==0,x=!g&&(e==="scroll"||e==="scrollend"),y=g?p!==null?p+"Capture":null:p;g=[];for(var v=d,N;v!==null;){var j=v;if(N=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||N===null||y===null||(j=pg(v,y),j!=null&&g.push(jg(v,j,N))),x)break;v=v.return}0<g.length&&(p=new h(p,m,null,n,u),f.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&n!==SN&&(m=n.relatedTarget||n.fromElement)&&(ih(m)||m[mp]))break e;if((h||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=d,m=m?ih(m):null,m!==null&&(x=Qg(m),g=m.tag,m!==x||g!==5&&g!==27&&g!==6)&&(m=null)):(h=null,m=d),h!==m)){if(g=a3,j="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=o3,j="onPointerLeave",y="onPointerEnter",v="pointer"),x=h==null?p:Am(h),N=m==null?p:Am(m),p=new g(j,v+"leave",h,n,u),p.target=x,p.relatedTarget=N,j=null,ih(u)===d&&(g=new g(y,v+"enter",m,n,u),g.target=N,g.relatedTarget=x,j=g),x=j,h&&m)t:{for(g=Kz,y=h,v=m,N=0,j=y;j;j=g(j))N++;j=0;for(var D=v;D;D=g(D))j++;for(;0<N-j;)y=g(y),N--;for(;0<j-N;)v=g(v),j--;for(;N--;){if(y===v||v!==null&&y===v.alternate){g=y;break t}y=g(y),v=g(v)}g=null}else g=null;h!==null&&Q3(f,p,h,g,!1),m!==null&&x!==null&&Q3(f,x,m,g,!0)}}e:{if(p=d?Am(d):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var T=u3;else if(d3(p))if(V6)T=iz;else{T=sz;var A=rz}else h=p.nodeName,!h||h.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?d&&Oj(d.elementType)&&(T=u3):T=az;if(T&&(T=T(e,d))){q6(f,T,n,u);break e}A&&A(e,p,d),e==="focusout"&&d&&p.type==="number"&&d.memoizedProps.value!=null&&jN(p,"number",p.value)}switch(A=d?Am(d):window,e){case"focusin":(d3(A)||A.contentEditable==="true")&&(ch=A,CN=d,Bm=null);break;case"focusout":Bm=CN=ch=null;break;case"mousedown":AN=!0;break;case"contextmenu":case"mouseup":case"dragend":AN=!1,g3(f,n,u);break;case"selectionchange":if(lz)break;case"keydown":case"keyup":g3(f,n,u)}var S;if(zj)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else lh?U6(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(H6&&n.locale!=="ko"&&(lh||E!=="onCompositionStart"?E==="onCompositionEnd"&&lh&&(S=B6()):(td=u,Ij="value"in td?td.value:td.textContent,lh=!0)),A=rb(d,E),0<A.length&&(E=new i3(E,e,null,n,u),f.push({event:E,listeners:A}),S?E.data=S:(S=$6(n),S!==null&&(E.data=S)))),(S=QF?ZF(e,n):ez(e,n))&&(E=rb(d,"onBeforeInput"),0<E.length&&(A=new i3("onBeforeInput","beforeinput",null,n,u),f.push({event:A,listeners:E}),A.data=S)),Vz(f,e,d,n,u)}zT(f,t)})}function jg(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rb(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||a===null||(s=pg(e,n),s!=null&&r.unshift(jg(e,s,a)),s=pg(e,t),s!=null&&r.push(jg(e,s,a))),e.tag===3)return r;e=e.return}return[]}function Kz(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Q3(e,t,n,r,s){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===r)break;l!==5&&l!==26&&l!==27||d===null||(c=d,s?(d=pg(n,a),d!=null&&o.unshift(jg(n,d,c))):s||(d=pg(n,a),d!=null&&o.push(jg(n,d,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Jz=/\r\n?/g,Xz=/\u0000|\uFFFD/g;function Z3(e){return(typeof e=="string"?e:""+e).replace(Jz,`
`).replace(Xz,"")}function HT(e,t){return t=Z3(t),Z3(e)===t}function $n(e,t,n,r,s,a){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||Fh(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&Fh(e,""+r);break;case"className":o0(e,"class",r);break;case"tabIndex":o0(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":o0(e,n,r);break;case"style":F6(e,r,a);break;case"data":if(t!=="object"){o0(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=ny(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(t!=="input"&&$n(e,t,"name",s.name,s,null),$n(e,t,"formEncType",s.formEncType,s,null),$n(e,t,"formMethod",s.formMethod,s,null),$n(e,t,"formTarget",s.formTarget,s,null)):($n(e,t,"encType",s.encType,s,null),$n(e,t,"method",s.method,s,null),$n(e,t,"target",s.target,s,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=ny(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=Bl);break;case"onScroll":r!=null&&un("scroll",e);break;case"onScrollEnd":r!=null&&un("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(Be(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error(Be(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=ny(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":un("beforetoggle",e),un("toggle",e),ty(e,"popover",r);break;case"xlinkActuate":yl(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":yl(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":yl(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":yl(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":yl(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":yl(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":yl(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":yl(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":yl(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":ty(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=kF.get(n)||n,ty(e,n,r))}}function XN(e,t,n,r,s,a){switch(n){case"style":F6(e,r,a);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(Be(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error(Be(60));e.innerHTML=n}}break;case"children":typeof r=="string"?Fh(e,r):(typeof r=="number"||typeof r=="bigint")&&Fh(e,""+r);break;case"onScroll":r!=null&&un("scroll",e);break;case"onScrollEnd":r!=null&&un("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Bl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!T6.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),a=e[Oa]||null,a=a!=null?a[n]:null,typeof a=="function"&&e.removeEventListener(t,a,s),typeof r=="function")){typeof a!="function"&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):ty(e,n,r)}}}function $s(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":un("error",e),un("load",e);var r=!1,s=!1,a;for(a in n)if(n.hasOwnProperty(a)){var o=n[a];if(o!=null)switch(a){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Be(137,t));default:$n(e,t,a,o,n,null)}}s&&$n(e,t,"srcSet",n.srcSet,n,null),r&&$n(e,t,"src",n.src,n,null);return;case"input":un("invalid",e);var l=a=o=s=null,c=null,d=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(u!=null)switch(r){case"name":s=u;break;case"type":o=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":a=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(Be(137,t));break;default:$n(e,t,r,u,n,null)}}O6(e,a,l,c,d,o,s,!1);return;case"select":un("invalid",e),r=o=a=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":a=l;break;case"defaultValue":o=l;break;case"multiple":r=l;default:$n(e,t,s,l,n,null)}t=a,n=o,e.multiple=!!r,t!=null?bh(e,!!r,t,!1):n!=null&&bh(e,!!r,n,!0);return;case"textarea":un("invalid",e),a=s=r=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Be(91));break;default:$n(e,t,o,l,n,null)}I6(e,r,s,a);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(r=n[c],r!=null))switch(c){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:$n(e,t,c,r,n,null)}return;case"dialog":un("beforetoggle",e),un("toggle",e),un("cancel",e),un("close",e);break;case"iframe":case"object":un("load",e);break;case"video":case"audio":for(r=0;r<Ng.length;r++)un(Ng[r],e);break;case"image":un("error",e),un("load",e);break;case"details":un("toggle",e);break;case"embed":case"source":case"link":un("error",e),un("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(r=n[d],r!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(Be(137,t));default:$n(e,t,d,r,n,null)}return;default:if(Oj(t)){for(u in n)n.hasOwnProperty(u)&&(r=n[u],r!==void 0&&XN(e,t,u,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(r=n[l],r!=null&&$n(e,t,l,r,n,null))}function Qz(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,o=null,l=null,c=null,d=null,u=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&f!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":c=f;default:r.hasOwnProperty(h)||$n(e,t,h,null,r,f)}}for(var p in r){var h=r[p];if(f=n[p],r.hasOwnProperty(p)&&(h!=null||f!=null))switch(p){case"type":a=h;break;case"name":s=h;break;case"checked":d=h;break;case"defaultChecked":u=h;break;case"value":o=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(Be(137,t));break;default:h!==f&&$n(e,t,p,h,r,f)}}NN(e,o,l,c,d,u,a,s);return;case"select":h=o=l=p=null;for(a in n)if(c=n[a],n.hasOwnProperty(a)&&c!=null)switch(a){case"value":break;case"multiple":h=c;default:r.hasOwnProperty(a)||$n(e,t,a,null,r,c)}for(s in r)if(a=r[s],c=n[s],r.hasOwnProperty(s)&&(a!=null||c!=null))switch(s){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&$n(e,t,s,a,r,c)}t=l,n=o,r=h,p!=null?bh(e,!!n,p,!1):!!r!=!!n&&(t!=null?bh(e,!!n,t,!0):bh(e,!!n,n?[]:"",!1));return;case"textarea":h=p=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!r.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:$n(e,t,l,null,r,s)}for(o in r)if(s=r[o],a=n[o],r.hasOwnProperty(o)&&(s!=null||a!=null))switch(o){case"value":p=s;break;case"defaultValue":h=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(Be(91));break;default:s!==a&&$n(e,t,o,s,r,a)}P6(e,p,h);return;case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&p!=null&&!r.hasOwnProperty(m))switch(m){case"selected":e.selected=!1;break;default:$n(e,t,m,null,r,p)}for(c in r)if(p=r[c],h=n[c],r.hasOwnProperty(c)&&p!==h&&(p!=null||h!=null))switch(c){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:$n(e,t,c,p,r,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&$n(e,t,g,null,r,p);for(d in r)if(p=r[d],h=n[d],r.hasOwnProperty(d)&&p!==h&&(p!=null||h!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(Be(137,t));break;default:$n(e,t,d,p,r,h)}return;default:if(Oj(t)){for(var x in n)p=n[x],n.hasOwnProperty(x)&&p!==void 0&&!r.hasOwnProperty(x)&&XN(e,t,x,void 0,r,p);for(u in r)p=r[u],h=n[u],!r.hasOwnProperty(u)||p===h||p===void 0&&h===void 0||XN(e,t,u,p,r,h);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&p!=null&&!r.hasOwnProperty(y)&&$n(e,t,y,null,r,p);for(f in r)p=r[f],h=n[f],!r.hasOwnProperty(f)||p===h||p==null&&h==null||$n(e,t,f,p,r,h)}function eC(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Zz(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var s=n[r],a=s.transferSize,o=s.initiatorType,l=s.duration;if(a&&l&&eC(o)){for(o=0,l=s.responseEnd,r+=1;r<n.length;r++){var c=n[r],d=c.startTime;if(d>l)break;var u=c.transferSize,f=c.initiatorType;u&&eC(f)&&(c=c.responseEnd,o+=u*(c<l?1:(l-d)/(c-d)))}if(--r,t+=8*(a+o)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var QN=null,ZN=null;function sb(e){return e.nodeType===9?e:e.ownerDocument}function tC(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function UT(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function e5(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var I2=null;function e9(){var e=window.event;return e&&e.type==="popstate"?e===I2?!1:(I2=e,!0):(I2=null,!1)}var $T=typeof setTimeout=="function"?setTimeout:void 0,t9=typeof clearTimeout=="function"?clearTimeout:void 0,nC=typeof Promise=="function"?Promise:void 0,n9=typeof queueMicrotask=="function"?queueMicrotask:typeof nC<"u"?function(e){return nC.resolve(null).then(e).catch(r9)}:$T;function r9(e){setTimeout(function(){throw e})}function Hd(e){return e==="head"}function rC(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(r===0){e.removeChild(s),Yh(t);return}r--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")r++;else if(n==="html")Jm(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Jm(n);for(var a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[nx]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=o}}else n==="body"&&Jm(e.ownerDocument.body);n=s}while(n);Yh(t)}function sC(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=r}while(n)}function t5(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":t5(n),Rj(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function s9(e,t,n,r){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[nx])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(a=e.getAttribute("rel"),a==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(a=e.getAttribute("src"),(a!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var a=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===a)return e}else return e;if(e=Bi(e.nextSibling),e===null)break}return null}function a9(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Bi(e.nextSibling),e===null))return null;return e}function qT(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Bi(e.nextSibling),e===null))return null;return e}function n5(e){return e.data==="$?"||e.data==="$~"}function r5(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function i9(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Bi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var s5=null;function aC(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Bi(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function iC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function VT(e,t,n){switch(t=sb(n),e){case"html":if(e=t.documentElement,!e)throw Error(Be(452));return e;case"head":if(e=t.head,!e)throw Error(Be(453));return e;case"body":if(e=t.body,!e)throw Error(Be(454));return e;default:throw Error(Be(451))}}function Jm(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Rj(e)}var $i=new Map,oC=new Set;function ab(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pc=Cn.d;Cn.d={f:o9,r:l9,D:c9,C:d9,L:u9,m:f9,X:p9,S:h9,M:m9};function o9(){var e=pc.f(),t=zv();return e||t}function l9(e){var t=gp(e);t!==null&&t.tag===5&&t.type==="form"?F_(t):pc.r(e)}var vp=typeof document>"u"?null:document;function YT(e,t,n){var r=vp;if(r&&typeof t=="string"&&t){var s=Oi(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),oC.has(s)||(oC.add(s),e={rel:e,crossOrigin:n,href:t},r.querySelector(s)===null&&(t=r.createElement("link"),$s(t,"link",e),Ss(t),r.head.appendChild(t)))}}function c9(e){pc.D(e),YT("dns-prefetch",e,null)}function d9(e,t){pc.C(e,t),YT("preconnect",e,t)}function u9(e,t,n){pc.L(e,t,n);var r=vp;if(r&&e&&t){var s='link[rel="preload"][as="'+Oi(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+Oi(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+Oi(n.imageSizes)+'"]')):s+='[href="'+Oi(e)+'"]';var a=s;switch(t){case"style":a=Vh(e);break;case"script":a=wp(e)}$i.has(a)||(e=ur({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),$i.set(a,e),r.querySelector(s)!==null||t==="style"&&r.querySelector(lx(a))||t==="script"&&r.querySelector(cx(a))||(t=r.createElement("link"),$s(t,"link",e),Ss(t),r.head.appendChild(t)))}}function f9(e,t){pc.m(e,t);var n=vp;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Oi(r)+'"][href="'+Oi(e)+'"]',a=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=wp(e)}if(!$i.has(a)&&(e=ur({rel:"modulepreload",href:e},t),$i.set(a,e),n.querySelector(s)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(cx(a)))return}r=n.createElement("link"),$s(r,"link",e),Ss(r),n.head.appendChild(r)}}}function h9(e,t,n){pc.S(e,t,n);var r=vp;if(r&&e){var s=yh(r).hoistableStyles,a=Vh(e);t=t||"default";var o=s.get(a);if(!o){var l={loading:0,preload:null};if(o=r.querySelector(lx(a)))l.loading=5;else{e=ur({rel:"stylesheet",href:e,"data-precedence":t},n),(n=$i.get(a))&&bS(e,n);var c=o=r.createElement("link");Ss(c),$s(c,"link",e),c._p=new Promise(function(d,u){c.onload=d,c.onerror=u}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,fy(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:l},s.set(a,o)}}}function p9(e,t){pc.X(e,t);var n=vp;if(n&&e){var r=yh(n).hoistableScripts,s=wp(e),a=r.get(s);a||(a=n.querySelector(cx(s)),a||(e=ur({src:e,async:!0},t),(t=$i.get(s))&&vS(e,t),a=n.createElement("script"),Ss(a),$s(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}}function m9(e,t){pc.M(e,t);var n=vp;if(n&&e){var r=yh(n).hoistableScripts,s=wp(e),a=r.get(s);a||(a=n.querySelector(cx(s)),a||(e=ur({src:e,async:!0,type:"module"},t),(t=$i.get(s))&&vS(e,t),a=n.createElement("script"),Ss(a),$s(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}}function lC(e,t,n,r){var s=(s=hd.current)?ab(s):null;if(!s)throw Error(Be(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Vh(n.href),n=yh(s).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Vh(n.href);var a=yh(s).hoistableStyles,o=a.get(e);if(o||(s=s.ownerDocument||s,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,o),(a=s.querySelector(lx(e)))&&!a._p&&(o.instance=a,o.state.loading=5),$i.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},$i.set(e,n),a||g9(s,e,n,o.state))),t&&r===null)throw Error(Be(528,""));return o}if(t&&r!==null)throw Error(Be(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=wp(n),n=yh(s).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(Be(444,e))}}function Vh(e){return'href="'+Oi(e)+'"'}function lx(e){return'link[rel="stylesheet"]['+e+"]"}function WT(e){return ur({},e,{"data-precedence":e.precedence,precedence:null})}function g9(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),$s(t,"link",n),Ss(t),e.head.appendChild(t))}function wp(e){return'[src="'+Oi(e)+'"]'}function cx(e){return"script[async]"+e}function cC(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Oi(n.href)+'"]');if(r)return t.instance=r,Ss(r),r;var s=ur({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Ss(r),$s(r,"style",s),fy(r,n.precedence,e),t.instance=r;case"stylesheet":s=Vh(n.href);var a=e.querySelector(lx(s));if(a)return t.state.loading|=4,t.instance=a,Ss(a),a;r=WT(n),(s=$i.get(s))&&bS(r,s),a=(e.ownerDocument||e).createElement("link"),Ss(a);var o=a;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),$s(a,"link",r),t.state.loading|=4,fy(a,n.precedence,e),t.instance=a;case"script":return a=wp(n.src),(s=e.querySelector(cx(a)))?(t.instance=s,Ss(s),s):(r=n,(s=$i.get(a))&&(r=ur({},n),vS(r,s)),e=e.ownerDocument||e,s=e.createElement("script"),Ss(s),$s(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(Be(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,fy(r,n.precedence,e));return t.instance}function fy(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,a=s,o=0;o<r.length;o++){var l=r[o];if(l.dataset.precedence===t)a=l;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function bS(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function vS(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var hy=null;function dC(e,t,n){if(hy===null){var r=new Map,s=hy=new Map;s.set(n,r)}else s=hy,r=s.get(n),r||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var a=n[s];if(!(a[nx]||a[Bs]||e==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var o=a.getAttribute(t)||"";o=e+o;var l=r.get(o);l?l.push(a):r.set(o,[a])}}return r}function uC(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function x9(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function GT(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function y9(e,t,n,r){if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var s=Vh(r.href),a=t.querySelector(lx(s));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ib.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,Ss(a);return}a=t.ownerDocument||t,r=WT(r),(s=$i.get(s))&&bS(r,s),a=a.createElement("link"),Ss(a);var o=a;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),$s(a,"link",r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=ib.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var F2=0;function b9(e,t){return e.stylesheets&&e.count===0&&py(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&py(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4+t);0<e.imgBytes&&F2===0&&(F2=62500*Zz());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&py(e,e.stylesheets),e.unsuspend)){var a=e.unsuspend;e.unsuspend=null,a()}},(e.imgBytes>F2?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(s)}}:null}function ib(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)py(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ob=null;function py(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ob=new Map,t.forEach(v9,e),ob=null,ib.call(e))}function v9(e,t){if(!(t.state.loading&4)){var n=ob.get(e);if(n)var r=n.get(null);else{n=new Map,ob.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var o=s[a];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}s=t.instance,o=s.getAttribute("data-precedence"),a=n.get(o)||r,a===r&&n.set(null,s),n.set(o,s),this.count++,r=ib.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),a?a.parentNode.insertBefore(s,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Sg={$$typeof:zl,Provider:null,Consumer:null,_currentValue:_u,_currentValue2:_u,_threadCount:0};function w9(e,t,n,r,s,a,o,l,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=o2(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=o2(0),this.hiddenUpdates=o2(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function KT(e,t,n,r,s,a,o,l,c,d,u,f){return e=new w9(e,t,n,o,c,d,u,f,l),t=1,a===!0&&(t|=24),a=si(3,null,null,t),e.current=a,a.stateNode=e,t=Yj(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Kj(a),e}function JT(e){return e?(e=fh,e):fh}function XT(e,t,n,r,s,a){s=JT(s),r.context===null?r.context=s:r.pendingContext=s,r=md(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=gd(e,r,t),n!==null&&(Ta(n,e,t),Um(n,e,t))}function fC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wS(e,t){fC(e,t),(e=e.alternate)&&fC(e,t)}function QT(e){if(e.tag===13||e.tag===31){var t=pf(e,67108864);t!==null&&Ta(t,e,67108864),wS(e,67108864)}}function hC(e){if(e.tag===13||e.tag===31){var t=fi();t=Tj(t);var n=pf(e,t);n!==null&&Ta(n,e,t),wS(e,t)}}var lb=!0;function N9(e,t,n,r){var s=It.T;It.T=null;var a=Cn.p;try{Cn.p=2,NS(e,t,n,r)}finally{Cn.p=a,It.T=s}}function j9(e,t,n,r){var s=It.T;It.T=null;var a=Cn.p;try{Cn.p=8,NS(e,t,n,r)}finally{Cn.p=a,It.T=s}}function NS(e,t,n,r){if(lb){var s=a5(r);if(s===null)P2(e,t,r,cb,n),pC(e,r);else if(k9(s,e,t,n,r))r.stopPropagation();else if(pC(e,r),t&4&&-1<S9.indexOf(e)){for(;s!==null;){var a=gp(s);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=hu(a.pendingLanes);if(o!==0){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-ui(o);l.entanglements[1]|=c,o&=~c}Ko(a),!(kn&6)&&(Qy=ci()+500,ox(0))}}break;case 31:case 13:l=pf(a,2),l!==null&&Ta(l,a,2),zv(),wS(a,2)}if(a=a5(r),a===null&&P2(e,t,r,cb,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else P2(e,t,r,null,n)}}function a5(e){return e=Pj(e),jS(e)}var cb=null;function jS(e){if(cb=null,e=ih(e),e!==null){var t=Qg(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=y6(t),e!==null)return e;e=null}else if(n===31){if(e=b6(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cb=e,null}function ZT(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cF()){case j6:return 2;case S6:return 8;case Fy:case dF:return 32;case k6:return 268435456;default:return 32}default:return 32}}var i5=!1,bd=null,vd=null,wd=null,kg=new Map,Cg=new Map,Xc=[],S9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pC(e,t){switch(e){case"focusin":case"focusout":bd=null;break;case"dragenter":case"dragleave":vd=null;break;case"mouseover":case"mouseout":wd=null;break;case"pointerover":case"pointerout":kg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cg.delete(t.pointerId)}}function lm(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=gp(t),t!==null&&QT(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function k9(e,t,n,r,s){switch(t){case"focusin":return bd=lm(bd,e,t,n,r,s),!0;case"dragenter":return vd=lm(vd,e,t,n,r,s),!0;case"mouseover":return wd=lm(wd,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return kg.set(a,lm(kg.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Cg.set(a,lm(Cg.get(a)||null,e,t,n,r,s)),!0}return!1}function eL(e){var t=ih(e.target);if(t!==null){var n=Qg(t);if(n!==null){if(t=n.tag,t===13){if(t=y6(n),t!==null){e.blockedOn=t,Q4(e.priority,function(){hC(n)});return}}else if(t===31){if(t=b6(n),t!==null){e.blockedOn=t,Q4(e.priority,function(){hC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function my(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=a5(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);SN=r,n.target.dispatchEvent(r),SN=null}else return t=gp(n),t!==null&&QT(t),e.blockedOn=n,!1;t.shift()}return!0}function mC(e,t,n){my(e)&&n.delete(t)}function C9(){i5=!1,bd!==null&&my(bd)&&(bd=null),vd!==null&&my(vd)&&(vd=null),wd!==null&&my(wd)&&(wd=null),kg.forEach(mC),Cg.forEach(mC)}function m0(e,t){e.blockedOn===t&&(e.blockedOn=null,i5||(i5=!0,ys.unstable_scheduleCallback(ys.unstable_NormalPriority,C9)))}var g0=null;function gC(e){g0!==e&&(g0=e,ys.unstable_scheduleCallback(ys.unstable_NormalPriority,function(){g0===e&&(g0=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if(typeof r!="function"){if(jS(r||n)===null)continue;break}var a=gp(n);a!==null&&(e.splice(t,3),t-=3,BN(a,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Yh(e){function t(c){return m0(c,e)}bd!==null&&m0(bd,e),vd!==null&&m0(vd,e),wd!==null&&m0(wd,e),kg.forEach(t),Cg.forEach(t);for(var n=0;n<Xc.length;n++){var r=Xc[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Xc.length&&(n=Xc[0],n.blockedOn===null);)eL(n),n.blockedOn===null&&Xc.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var s=n[r],a=n[r+1],o=s[Oa]||null;if(typeof a=="function")o||gC(n);else if(o){var l=null;if(a&&a.hasAttribute("formAction")){if(s=a,o=a[Oa]||null)l=o.formAction;else if(jS(s)!==null)continue}else l=o.action;typeof l=="function"?n[r+1]=l:(n.splice(r,3),r-=3),gC(n)}}}function tL(){function e(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(o){return s=o})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function SS(e){this._internalRoot=e}Uv.prototype.render=SS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Be(409));var n=t.current,r=fi();XT(n,r,e,t,null,null)};Uv.prototype.unmount=SS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;XT(e.current,2,null,e,null,null),zv(),t[mp]=null}};function Uv(e){this._internalRoot=e}Uv.prototype.unstable_scheduleHydration=function(e){if(e){var t=E6();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xc.length&&t!==0&&t<Xc[n].priority;n++);Xc.splice(n,0,e),n===0&&eL(e)}};var xC=g6.version;if(xC!=="19.2.0")throw Error(Be(527,xC,"19.2.0"));Cn.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Be(188)):(e=Object.keys(e).join(","),Error(Be(268,e)));return e=nF(t),e=e!==null?v6(e):null,e=e===null?null:e.stateNode,e};var A9={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:It,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var x0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!x0.isDisabled&&x0.supportsFiber)try{Zg=x0.inject(A9),di=x0}catch{}}kv.createRoot=function(e,t){if(!x6(e))throw Error(Be(299));var n=!1,r="",s=Y_,a=W_,o=G_;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=KT(e,1,!1,null,null,n,r,null,s,a,o,tL),e[mp]=t.current,yS(e),new SS(t)};kv.hydrateRoot=function(e,t,n){if(!x6(e))throw Error(Be(299));var r=!1,s="",a=Y_,o=W_,l=G_,c=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),t=KT(e,1,!0,t,n??null,r,s,c,a,o,l,tL),t.context=JT(null),n=t.current,r=fi(),r=Tj(r),s=md(r),s.callback=null,gd(n,s,r),n=r,t.current.lanes=n,tx(t,n),Ko(t),e[mp]=t.current,yS(e),new Uv(t)};kv.version="19.2.0";function nL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nL)}catch(e){console.error(e)}}nL(),d6.exports=kv;var M9=d6.exports;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pr(){return pr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pr.apply(this,arguments)}var Qr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qr||(Qr={}));const yC="popstate";function D9(e){e===void 0&&(e={});function t(r,s){let{pathname:a,search:o,hash:l}=r.location;return Ag("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Qu(s)}return _9(t,n,null,e)}function on(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function E9(){return Math.random().toString(36).substr(2,8)}function bC(e,t){return{usr:e.state,key:e.key,idx:t}}function Ag(e,t,n,r){return n===void 0&&(n=null),pr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ud(t):t,{state:n,key:t&&t.key||r||E9()})}function Qu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ud(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function _9(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=Qr.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(pr({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function f(){l=Qr.Pop;let x=u(),y=x==null?null:x-d;d=x,c&&c({action:l,location:g.location,delta:y})}function p(x,y){l=Qr.Push;let v=Ag(g.location,x,y);d=u()+1;let N=bC(v,d),j=g.createHref(v);try{o.pushState(N,"",j)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(j)}a&&c&&c({action:l,location:g.location,delta:1})}function h(x,y){l=Qr.Replace;let v=Ag(g.location,x,y);d=u();let N=bC(v,d),j=g.createHref(v);o.replaceState(N,"",j),a&&c&&c({action:l,location:g.location,delta:0})}function m(x){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof x=="string"?x:Qu(x);return v=v.replace(/ $/,"%20"),on(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return l},get location(){return e(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(yC,f),c=x,()=>{s.removeEventListener(yC,f),c=null}},createHref(x){return t(s,x)},createURL:m,encodeLocation(x){let y=m(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:h,go(x){return o.go(x)}};return g}var Fn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Fn||(Fn={}));const T9=new Set(["lazy","caseSensitive","path","id","index","children"]);function L9(e){return e.index===!0}function db(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((s,a)=>{let o=[...n,String(a)],l=typeof s.id=="string"?s.id:o.join("-");if(on(s.index!==!0||!s.children,"Cannot specify children on an index route"),on(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),L9(s)){let c=pr({},s,t(s),{id:l});return r[l]=c,c}else{let c=pr({},s,t(s),{id:l,children:void 0});return r[l]=c,s.children&&(c.children=db(s.children,t,o,r)),c}})}function bu(e,t,n){return n===void 0&&(n="/"),gy(e,t,n,!1)}function gy(e,t,n,r){let s=typeof t=="string"?Ud(t):t,a=cc(s.pathname||"/",n);if(a==null)return null;let o=rL(e);O9(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Y9(a);l=q9(o[c],d,r)}return l}function R9(e,t){let{route:n,pathname:r,params:s}=e;return{id:n.id,pathname:r,params:s,data:t[n.id],handle:n.handle}}function rL(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(on(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Gl([r,c.relativePath]),u=n.concat(c);a.children&&a.children.length>0&&(on(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),rL(a.children,t,u,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:U9(d,a.index),routesMeta:u})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of sL(a.path))s(a,o,c)}),t}function sL(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=sL(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function O9(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$9(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const P9=/^:[\w-]+$/,I9=3,F9=2,z9=1,B9=10,H9=-2,vC=e=>e==="*";function U9(e,t){let n=e.split("/"),r=n.length;return n.some(vC)&&(r+=H9),t&&(r+=F9),n.filter(s=>!vC(s)).reduce((s,a)=>s+(P9.test(a)?I9:a===""?z9:B9),r)}function $9(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function q9(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,s={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",f=ub({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!f&&d&&n&&!r[r.length-1].route.index&&(f=ub({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Gl([a,f.pathname]),pathnameBase:J9(Gl([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=Gl([a,f.pathnameBase]))}return o}function ub(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=V9(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,u,f)=>{let{paramName:p,isOptional:h}=u;if(p==="*"){let g=l[f]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const m=l[f];return h&&!m?d[p]=void 0:d[p]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function V9(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Xu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Y9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Xu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function cc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const W9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G9=e=>W9.test(e);function K9(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Ud(e):e,a;if(n)if(G9(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Xu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?a=wC(n.substring(1),"/"):a=wC(n,t)}else a=t;return{pathname:a,search:X9(r),hash:Q9(s)}}function wC(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function z2(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aL(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function $v(e,t){let n=aL(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function qv(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Ud(e):(s=pr({},e),on(!s.pathname||!s.pathname.includes("?"),z2("?","pathname","search",s)),on(!s.pathname||!s.pathname.includes("#"),z2("#","pathname","hash",s)),on(!s.search||!s.search.includes("#"),z2("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=K9(s,l),d=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Gl=e=>e.join("/").replace(/\/\/+/g,"/"),J9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Q9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class fb{constructor(t,n,r,s){s===void 0&&(s=!1),this.status=t,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Mg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const iL=["post","put","patch","delete"],Z9=new Set(iL),eB=["get",...iL],tB=new Set(eB),nB=new Set([301,302,303,307,308]),rB=new Set([307,308]),B2={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sB={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},cm={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},kS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aB=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),oL="remix-router-transitions";function iB(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;on(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let ue=e.detectErrorBoundary;s=be=>({hasErrorBoundary:ue(be)})}else s=aB;let a={},o=db(e.routes,s,void 0,a),l,c=e.basename||"/",d=e.dataStrategy||dB,u=e.patchRoutesOnNavigation,f=pr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),p=null,h=new Set,m=null,g=null,x=null,y=e.hydrationData!=null,v=bu(o,e.history.location,c),N=!1,j=null;if(v==null&&!u){let ue=ka(404,{pathname:e.history.location.pathname}),{matches:be,route:ke}=TC(o);v=be,j={[ke.id]:ue}}v&&!e.hydrationData&&ba(v,o,e.history.location.pathname).active&&(v=null);let D;if(v)if(v.some(ue=>ue.route.lazy))D=!1;else if(!v.some(ue=>ue.route.loader))D=!0;else if(f.v7_partialHydration){let ue=e.hydrationData?e.hydrationData.loaderData:null,be=e.hydrationData?e.hydrationData.errors:null;if(be){let ke=v.findIndex(Oe=>be[Oe.route.id]!==void 0);D=v.slice(0,ke+1).every(Oe=>!l5(Oe.route,ue,be))}else D=v.every(ke=>!l5(ke.route,ue,be))}else D=e.hydrationData!=null;else if(D=!1,v=[],f.v7_partialHydration){let ue=ba(null,o,e.history.location.pathname);ue.active&&ue.matches&&(N=!0,v=ue.matches)}let T,A={historyAction:e.history.action,location:e.history.location,matches:v,initialized:D,navigation:B2,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||j,fetchers:new Map,blockers:new Map},S=Qr.Pop,E=!1,I,L=!1,O=new Map,F=null,U=!1,W=!1,X=[],P=new Set,z=new Map,oe=0,Y=-1,q=new Map,_=new Set,$=new Map,J=new Map,te=new Set,Z=new Map,ie=new Map,he;function ye(){if(p=e.history.listen(ue=>{let{action:be,location:ke,delta:Oe}=ue;if(he){he(),he=void 0;return}Xu(ie.size===0||Oe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Je=Ht({currentLocation:A.location,nextLocation:ke,historyAction:be});if(Je&&Oe!=null){let lt=new Promise(Mt=>{he=Mt});e.history.go(Oe*-1),At(Je,{state:"blocked",location:ke,proceed(){At(Je,{state:"proceeding",proceed:void 0,reset:void 0,location:ke}),lt.then(()=>e.history.go(Oe))},reset(){let Mt=new Map(A.blockers);Mt.set(Je,cm),Pe({blockers:Mt})}});return}return Ae(be,ke)}),n){SB(t,O);let ue=()=>kB(t,O);t.addEventListener("pagehide",ue),F=()=>t.removeEventListener("pagehide",ue)}return A.initialized||Ae(Qr.Pop,A.location,{initialHydration:!0}),T}function Se(){p&&p(),F&&F(),h.clear(),I&&I.abort(),A.fetchers.forEach((ue,be)=>rt(be)),A.blockers.forEach((ue,be)=>jn(be))}function Ee(ue){return h.add(ue),()=>h.delete(ue)}function Pe(ue,be){be===void 0&&(be={}),A=pr({},A,ue);let ke=[],Oe=[];f.v7_fetcherPersist&&A.fetchers.forEach((Je,lt)=>{Je.state==="idle"&&(te.has(lt)?Oe.push(lt):ke.push(lt))}),te.forEach(Je=>{!A.fetchers.has(Je)&&!z.has(Je)&&Oe.push(Je)}),[...h].forEach(Je=>Je(A,{deletedFetchers:Oe,viewTransitionOpts:be.viewTransitionOpts,flushSync:be.flushSync===!0})),f.v7_fetcherPersist?(ke.forEach(Je=>A.fetchers.delete(Je)),Oe.forEach(Je=>rt(Je))):Oe.forEach(Je=>te.delete(Je))}function qe(ue,be,ke){var Oe,Je;let{flushSync:lt}=ke===void 0?{}:ke,Mt=A.actionData!=null&&A.navigation.formMethod!=null&&ro(A.navigation.formMethod)&&A.navigation.state==="loading"&&((Oe=ue.state)==null?void 0:Oe._isRedirect)!==!0,ut;be.actionData?Object.keys(be.actionData).length>0?ut=be.actionData:ut=null:Mt?ut=A.actionData:ut=null;let ct=be.loaderData?EC(A.loaderData,be.loaderData,be.matches||[],be.errors):A.loaderData,st=A.blockers;st.size>0&&(st=new Map(st),st.forEach((Ft,rr)=>st.set(rr,cm)));let ht=E===!0||A.navigation.formMethod!=null&&ro(A.navigation.formMethod)&&((Je=ue.state)==null?void 0:Je._isRedirect)!==!0;l&&(o=l,l=void 0),U||S===Qr.Pop||(S===Qr.Push?e.history.push(ue,ue.state):S===Qr.Replace&&e.history.replace(ue,ue.state));let _t;if(S===Qr.Pop){let Ft=O.get(A.location.pathname);Ft&&Ft.has(ue.pathname)?_t={currentLocation:A.location,nextLocation:ue}:O.has(ue.pathname)&&(_t={currentLocation:ue,nextLocation:A.location})}else if(L){let Ft=O.get(A.location.pathname);Ft?Ft.add(ue.pathname):(Ft=new Set([ue.pathname]),O.set(A.location.pathname,Ft)),_t={currentLocation:A.location,nextLocation:ue}}Pe(pr({},be,{actionData:ut,loaderData:ct,historyAction:S,location:ue,initialized:!0,navigation:B2,revalidation:"idle",restoreScrollPosition:is(ue,be.matches||A.matches),preventScrollReset:ht,blockers:st}),{viewTransitionOpts:_t,flushSync:lt===!0}),S=Qr.Pop,E=!1,L=!1,U=!1,W=!1,X=[]}async function We(ue,be){if(typeof ue=="number"){e.history.go(ue);return}let ke=o5(A.location,A.matches,c,f.v7_prependBasename,ue,f.v7_relativeSplatPath,be==null?void 0:be.fromRouteId,be==null?void 0:be.relative),{path:Oe,submission:Je,error:lt}=NC(f.v7_normalizeFormMethod,!1,ke,be),Mt=A.location,ut=Ag(A.location,Oe,be&&be.state);ut=pr({},ut,e.history.encodeLocation(ut));let ct=be&&be.replace!=null?be.replace:void 0,st=Qr.Push;ct===!0?st=Qr.Replace:ct===!1||Je!=null&&ro(Je.formMethod)&&Je.formAction===A.location.pathname+A.location.search&&(st=Qr.Replace);let ht=be&&"preventScrollReset"in be?be.preventScrollReset===!0:void 0,_t=(be&&be.flushSync)===!0,Ft=Ht({currentLocation:Mt,nextLocation:ut,historyAction:st});if(Ft){At(Ft,{state:"blocked",location:ut,proceed(){At(Ft,{state:"proceeding",proceed:void 0,reset:void 0,location:ut}),We(ue,be)},reset(){let rr=new Map(A.blockers);rr.set(Ft,cm),Pe({blockers:rr})}});return}return await Ae(st,ut,{submission:Je,pendingError:lt,preventScrollReset:ht,replace:be&&be.replace,enableViewTransition:be&&be.viewTransition,flushSync:_t})}function V(){if(dt(),Pe({revalidation:"loading"}),A.navigation.state!=="submitting"){if(A.navigation.state==="idle"){Ae(A.historyAction,A.location,{startUninterruptedRevalidation:!0});return}Ae(S||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:L===!0})}}async function Ae(ue,be,ke){I&&I.abort(),I=null,S=ue,U=(ke&&ke.startUninterruptedRevalidation)===!0,tl(A.location,A.matches),E=(ke&&ke.preventScrollReset)===!0,L=(ke&&ke.enableViewTransition)===!0;let Oe=l||o,Je=ke&&ke.overrideNavigation,lt=ke!=null&&ke.initialHydration&&A.matches&&A.matches.length>0&&!N?A.matches:bu(Oe,be,c),Mt=(ke&&ke.flushSync)===!0;if(lt&&A.initialized&&!W&&gB(A.location,be)&&!(ke&&ke.submission&&ro(ke.submission.formMethod))){qe(be,{matches:lt},{flushSync:Mt});return}let ut=ba(lt,Oe,be.pathname);if(ut.active&&ut.matches&&(lt=ut.matches),!lt){let{error:dn,notFoundMatches:rn,route:Tn}=Un(be.pathname);qe(be,{matches:rn,loaderData:{},errors:{[Tn.id]:dn}},{flushSync:Mt});return}I=new AbortController;let ct=If(e.history,be,I.signal,ke&&ke.submission),st;if(ke&&ke.pendingError)st=[vu(lt).route.id,{type:Fn.error,error:ke.pendingError}];else if(ke&&ke.submission&&ro(ke.submission.formMethod)){let dn=await Ve(ct,be,ke.submission,lt,ut.active,{replace:ke.replace,flushSync:Mt});if(dn.shortCircuited)return;if(dn.pendingActionResult){let[rn,Tn]=dn.pendingActionResult;if(ti(Tn)&&Mg(Tn.error)&&Tn.error.status===404){I=null,qe(be,{matches:dn.matches,loaderData:{},errors:{[rn]:Tn.error}});return}}lt=dn.matches||lt,st=dn.pendingActionResult,Je=H2(be,ke.submission),Mt=!1,ut.active=!1,ct=If(e.history,ct.url,ct.signal)}let{shortCircuited:ht,matches:_t,loaderData:Ft,errors:rr}=await et(ct,be,lt,ut.active,Je,ke&&ke.submission,ke&&ke.fetcherSubmission,ke&&ke.replace,ke&&ke.initialHydration===!0,Mt,st);ht||(I=null,qe(be,pr({matches:_t||lt},_C(st),{loaderData:Ft,errors:rr})))}async function Ve(ue,be,ke,Oe,Je,lt){lt===void 0&&(lt={}),dt();let Mt=NB(be,ke);if(Pe({navigation:Mt},{flushSync:lt.flushSync===!0}),Je){let st=await ra(Oe,be.pathname,ue.signal);if(st.type==="aborted")return{shortCircuited:!0};if(st.type==="error"){let ht=vu(st.partialMatches).route.id;return{matches:st.partialMatches,pendingActionResult:[ht,{type:Fn.error,error:st.error}]}}else if(st.matches)Oe=st.matches;else{let{notFoundMatches:ht,error:_t,route:Ft}=Un(be.pathname);return{matches:ht,pendingActionResult:[Ft.id,{type:Fn.error,error:_t}]}}}let ut,ct=Em(Oe,be);if(!ct.route.action&&!ct.route.lazy)ut={type:Fn.error,error:ka(405,{method:ue.method,pathname:be.pathname,routeId:ct.route.id})};else if(ut=(await Me("action",A,ue,[ct],Oe,null))[ct.route.id],ue.signal.aborted)return{shortCircuited:!0};if(ju(ut)){let st;return lt&&lt.replace!=null?st=lt.replace:st=AC(ut.response.headers.get("Location"),new URL(ue.url),c)===A.location.pathname+A.location.search,await Re(ue,ut,!0,{submission:ke,replace:st}),{shortCircuited:!0}}if(ad(ut))throw ka(400,{type:"defer-action"});if(ti(ut)){let st=vu(Oe,ct.route.id);return(lt&&lt.replace)!==!0&&(S=Qr.Push),{matches:Oe,pendingActionResult:[st.route.id,ut]}}return{matches:Oe,pendingActionResult:[ct.route.id,ut]}}async function et(ue,be,ke,Oe,Je,lt,Mt,ut,ct,st,ht){let _t=Je||H2(be,lt),Ft=lt||Mt||RC(_t),rr=!U&&(!f.v7_partialHydration||!ct);if(Oe){if(rr){let Wn=_e(ht);Pe(pr({navigation:_t},Wn!==void 0?{actionData:Wn}:{}),{flushSync:st})}let ln=await ra(ke,be.pathname,ue.signal);if(ln.type==="aborted")return{shortCircuited:!0};if(ln.type==="error"){let Wn=vu(ln.partialMatches).route.id;return{matches:ln.partialMatches,loaderData:{},errors:{[Wn]:ln.error}}}else if(ln.matches)ke=ln.matches;else{let{error:Wn,notFoundMatches:Gi,route:No}=Un(be.pathname);return{matches:Gi,loaderData:{},errors:{[No.id]:Wn}}}}let dn=l||o,[rn,Tn]=SC(e.history,A,ke,Ft,be,f.v7_partialHydration&&ct===!0,f.v7_skipActionErrorRevalidation,W,X,P,te,$,_,dn,c,ht);if(Jt(ln=>!(ke&&ke.some(Wn=>Wn.route.id===ln))||rn&&rn.some(Wn=>Wn.route.id===ln)),Y=++oe,rn.length===0&&Tn.length===0){let ln=Vt();return qe(be,pr({matches:ke,loaderData:{},errors:ht&&ti(ht[1])?{[ht[0]]:ht[1].error}:null},_C(ht),ln?{fetchers:new Map(A.fetchers)}:{}),{flushSync:st}),{shortCircuited:!0}}if(rr){let ln={};if(!Oe){ln.navigation=_t;let Wn=_e(ht);Wn!==void 0&&(ln.actionData=Wn)}Tn.length>0&&(ln.fetchers=ne(Tn)),Pe(ln,{flushSync:st})}Tn.forEach(ln=>{Pt(ln.key),ln.controller&&z.set(ln.key,ln.controller)});let Ha=()=>Tn.forEach(ln=>Pt(ln.key));I&&I.signal.addEventListener("abort",Ha);let{loaderResults:wi,fetcherResults:Ua}=await He(A,ke,rn,Tn,ue);if(ue.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",Ha),Tn.forEach(ln=>z.delete(ln.key));let Vs=y0(wi);if(Vs)return await Re(ue,Vs.result,!0,{replace:ut}),{shortCircuited:!0};if(Vs=y0(Ua),Vs)return _.add(Vs.key),await Re(ue,Vs.result,!0,{replace:ut}),{shortCircuited:!0};let{loaderData:yc,errors:vo}=DC(A,ke,wi,ht,Tn,Ua,Z);Z.forEach((ln,Wn)=>{ln.subscribe(Gi=>{(Gi||ln.done)&&Z.delete(Wn)})}),f.v7_partialHydration&&ct&&A.errors&&(vo=pr({},A.errors,vo));let Gr=Vt(),wo=Mn(Y),nl=Gr||wo||Tn.length>0;return pr({matches:ke,loaderData:yc,errors:vo},nl?{fetchers:new Map(A.fetchers)}:{})}function _e(ue){if(ue&&!ti(ue[1]))return{[ue[0]]:ue[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function ne(ue){return ue.forEach(be=>{let ke=A.fetchers.get(be.key),Oe=dm(void 0,ke?ke.data:void 0);A.fetchers.set(be.key,Oe)}),new Map(A.fetchers)}function de(ue,be,ke,Oe){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Pt(ue);let Je=(Oe&&Oe.flushSync)===!0,lt=l||o,Mt=o5(A.location,A.matches,c,f.v7_prependBasename,ke,f.v7_relativeSplatPath,be,Oe==null?void 0:Oe.relative),ut=bu(lt,Mt,c),ct=ba(ut,lt,Mt);if(ct.active&&ct.matches&&(ut=ct.matches),!ut){Qe(ue,be,ka(404,{pathname:Mt}),{flushSync:Je});return}let{path:st,submission:ht,error:_t}=NC(f.v7_normalizeFormMethod,!0,Mt,Oe);if(_t){Qe(ue,be,_t,{flushSync:Je});return}let Ft=Em(ut,st),rr=(Oe&&Oe.preventScrollReset)===!0;if(ht&&ro(ht.formMethod)){ce(ue,be,st,Ft,ut,ct.active,Je,rr,ht);return}$.set(ue,{routeId:be,path:st}),De(ue,be,st,Ft,ut,ct.active,Je,rr,ht)}async function ce(ue,be,ke,Oe,Je,lt,Mt,ut,ct){dt(),$.delete(ue);function st(Sn){if(!Sn.route.action&&!Sn.route.lazy){let $a=ka(405,{method:ct.formMethod,pathname:ke,routeId:be});return Qe(ue,be,$a,{flushSync:Mt}),!0}return!1}if(!lt&&st(Oe))return;let ht=A.fetchers.get(ue);it(ue,jB(ct,ht),{flushSync:Mt});let _t=new AbortController,Ft=If(e.history,ke,_t.signal,ct);if(lt){let Sn=await ra(Je,new URL(Ft.url).pathname,Ft.signal,ue);if(Sn.type==="aborted")return;if(Sn.type==="error"){Qe(ue,be,Sn.error,{flushSync:Mt});return}else if(Sn.matches){if(Je=Sn.matches,Oe=Em(Je,ke),st(Oe))return}else{Qe(ue,be,ka(404,{pathname:ke}),{flushSync:Mt});return}}z.set(ue,_t);let rr=oe,rn=(await Me("action",A,Ft,[Oe],Je,ue))[Oe.route.id];if(Ft.signal.aborted){z.get(ue)===_t&&z.delete(ue);return}if(f.v7_fetcherPersist&&te.has(ue)){if(ju(rn)||ti(rn)){it(ue,Hc(void 0));return}}else{if(ju(rn))if(z.delete(ue),Y>rr){it(ue,Hc(void 0));return}else return _.add(ue),it(ue,dm(ct)),Re(Ft,rn,!1,{fetcherSubmission:ct,preventScrollReset:ut});if(ti(rn)){Qe(ue,be,rn.error);return}}if(ad(rn))throw ka(400,{type:"defer-action"});let Tn=A.navigation.location||A.location,Ha=If(e.history,Tn,_t.signal),wi=l||o,Ua=A.navigation.state!=="idle"?bu(wi,A.navigation.location,c):A.matches;on(Ua,"Didn't find any matches after fetcher action");let Vs=++oe;q.set(ue,Vs);let yc=dm(ct,rn.data);A.fetchers.set(ue,yc);let[vo,Gr]=SC(e.history,A,Ua,ct,Tn,!1,f.v7_skipActionErrorRevalidation,W,X,P,te,$,_,wi,c,[Oe.route.id,rn]);Gr.filter(Sn=>Sn.key!==ue).forEach(Sn=>{let $a=Sn.key,kf=A.fetchers.get($a),wr=dm(void 0,kf?kf.data:void 0);A.fetchers.set($a,wr),Pt($a),Sn.controller&&z.set($a,Sn.controller)}),Pe({fetchers:new Map(A.fetchers)});let wo=()=>Gr.forEach(Sn=>Pt(Sn.key));_t.signal.addEventListener("abort",wo);let{loaderResults:nl,fetcherResults:ln}=await He(A,Ua,vo,Gr,Ha);if(_t.signal.aborted)return;_t.signal.removeEventListener("abort",wo),q.delete(ue),z.delete(ue),Gr.forEach(Sn=>z.delete(Sn.key));let Wn=y0(nl);if(Wn)return Re(Ha,Wn.result,!1,{preventScrollReset:ut});if(Wn=y0(ln),Wn)return _.add(Wn.key),Re(Ha,Wn.result,!1,{preventScrollReset:ut});let{loaderData:Gi,errors:No}=DC(A,Ua,nl,void 0,Gr,ln,Z);if(A.fetchers.has(ue)){let Sn=Hc(rn.data);A.fetchers.set(ue,Sn)}Mn(Vs),A.navigation.state==="loading"&&Vs>Y?(on(S,"Expected pending action"),I&&I.abort(),qe(A.navigation.location,{matches:Ua,loaderData:Gi,errors:No,fetchers:new Map(A.fetchers)})):(Pe({errors:No,loaderData:EC(A.loaderData,Gi,Ua,No),fetchers:new Map(A.fetchers)}),W=!1)}async function De(ue,be,ke,Oe,Je,lt,Mt,ut,ct){let st=A.fetchers.get(ue);it(ue,dm(ct,st?st.data:void 0),{flushSync:Mt});let ht=new AbortController,_t=If(e.history,ke,ht.signal);if(lt){let rn=await ra(Je,new URL(_t.url).pathname,_t.signal,ue);if(rn.type==="aborted")return;if(rn.type==="error"){Qe(ue,be,rn.error,{flushSync:Mt});return}else if(rn.matches)Je=rn.matches,Oe=Em(Je,ke);else{Qe(ue,be,ka(404,{pathname:ke}),{flushSync:Mt});return}}z.set(ue,ht);let Ft=oe,dn=(await Me("loader",A,_t,[Oe],Je,ue))[Oe.route.id];if(ad(dn)&&(dn=await CS(dn,_t.signal,!0)||dn),z.get(ue)===ht&&z.delete(ue),!_t.signal.aborted){if(te.has(ue)){it(ue,Hc(void 0));return}if(ju(dn))if(Y>Ft){it(ue,Hc(void 0));return}else{_.add(ue),await Re(_t,dn,!1,{preventScrollReset:ut});return}if(ti(dn)){Qe(ue,be,dn.error);return}on(!ad(dn),"Unhandled fetcher deferred data"),it(ue,Hc(dn.data))}}async function Re(ue,be,ke,Oe){let{submission:Je,fetcherSubmission:lt,preventScrollReset:Mt,replace:ut}=Oe===void 0?{}:Oe;be.response.headers.has("X-Remix-Revalidate")&&(W=!0);let ct=be.response.headers.get("Location");on(ct,"Expected a Location header on the redirect Response"),ct=AC(ct,new URL(ue.url),c);let st=Ag(A.location,ct,{_isRedirect:!0});if(n){let rn=!1;if(be.response.headers.has("X-Remix-Reload-Document"))rn=!0;else if(kS.test(ct)){const Tn=e.history.createURL(ct);rn=Tn.origin!==t.location.origin||cc(Tn.pathname,c)==null}if(rn){ut?t.location.replace(ct):t.location.assign(ct);return}}I=null;let ht=ut===!0||be.response.headers.has("X-Remix-Replace")?Qr.Replace:Qr.Push,{formMethod:_t,formAction:Ft,formEncType:rr}=A.navigation;!Je&&!lt&&_t&&Ft&&rr&&(Je=RC(A.navigation));let dn=Je||lt;if(rB.has(be.response.status)&&dn&&ro(dn.formMethod))await Ae(ht,st,{submission:pr({},dn,{formAction:ct}),preventScrollReset:Mt||E,enableViewTransition:ke?L:void 0});else{let rn=H2(st,Je);await Ae(ht,st,{overrideNavigation:rn,fetcherSubmission:lt,preventScrollReset:Mt||E,enableViewTransition:ke?L:void 0})}}async function Me(ue,be,ke,Oe,Je,lt){let Mt,ut={};try{Mt=await uB(d,ue,be,ke,Oe,Je,lt,a,s)}catch(ct){return Oe.forEach(st=>{ut[st.route.id]={type:Fn.error,error:ct}}),ut}for(let[ct,st]of Object.entries(Mt))if(xB(st)){let ht=st.result;ut[ct]={type:Fn.redirect,response:pB(ht,ke,ct,Je,c,f.v7_relativeSplatPath)}}else ut[ct]=await hB(st);return ut}async function He(ue,be,ke,Oe,Je){let lt=ue.matches,Mt=Me("loader",ue,Je,ke,be,null),ut=Promise.all(Oe.map(async ht=>{if(ht.matches&&ht.match&&ht.controller){let Ft=(await Me("loader",ue,If(e.history,ht.path,ht.controller.signal),[ht.match],ht.matches,ht.key))[ht.match.route.id];return{[ht.key]:Ft}}else return Promise.resolve({[ht.key]:{type:Fn.error,error:ka(404,{pathname:ht.path})}})})),ct=await Mt,st=(await ut).reduce((ht,_t)=>Object.assign(ht,_t),{});return await Promise.all([vB(be,ct,Je.signal,lt,ue.loaderData),wB(be,st,Oe)]),{loaderResults:ct,fetcherResults:st}}function dt(){W=!0,X.push(...Jt()),$.forEach((ue,be)=>{z.has(be)&&P.add(be),Pt(be)})}function it(ue,be,ke){ke===void 0&&(ke={}),A.fetchers.set(ue,be),Pe({fetchers:new Map(A.fetchers)},{flushSync:(ke&&ke.flushSync)===!0})}function Qe(ue,be,ke,Oe){Oe===void 0&&(Oe={});let Je=vu(A.matches,be);rt(ue),Pe({errors:{[Je.route.id]:ke},fetchers:new Map(A.fetchers)},{flushSync:(Oe&&Oe.flushSync)===!0})}function Et(ue){return J.set(ue,(J.get(ue)||0)+1),te.has(ue)&&te.delete(ue),A.fetchers.get(ue)||sB}function rt(ue){let be=A.fetchers.get(ue);z.has(ue)&&!(be&&be.state==="loading"&&q.has(ue))&&Pt(ue),$.delete(ue),q.delete(ue),_.delete(ue),f.v7_fetcherPersist&&te.delete(ue),P.delete(ue),A.fetchers.delete(ue)}function Yn(ue){let be=(J.get(ue)||0)-1;be<=0?(J.delete(ue),te.add(ue),f.v7_fetcherPersist||rt(ue)):J.set(ue,be),Pe({fetchers:new Map(A.fetchers)})}function Pt(ue){let be=z.get(ue);be&&(be.abort(),z.delete(ue))}function Bt(ue){for(let be of ue){let ke=Et(be),Oe=Hc(ke.data);A.fetchers.set(be,Oe)}}function Vt(){let ue=[],be=!1;for(let ke of _){let Oe=A.fetchers.get(ke);on(Oe,"Expected fetcher: "+ke),Oe.state==="loading"&&(_.delete(ke),ue.push(ke),be=!0)}return Bt(ue),be}function Mn(ue){let be=[];for(let[ke,Oe]of q)if(Oe<ue){let Je=A.fetchers.get(ke);on(Je,"Expected fetcher: "+ke),Je.state==="loading"&&(Pt(ke),q.delete(ke),be.push(ke))}return Bt(be),be.length>0}function kt(ue,be){let ke=A.blockers.get(ue)||cm;return ie.get(ue)!==be&&ie.set(ue,be),ke}function jn(ue){A.blockers.delete(ue),ie.delete(ue)}function At(ue,be){let ke=A.blockers.get(ue)||cm;on(ke.state==="unblocked"&&be.state==="blocked"||ke.state==="blocked"&&be.state==="blocked"||ke.state==="blocked"&&be.state==="proceeding"||ke.state==="blocked"&&be.state==="unblocked"||ke.state==="proceeding"&&be.state==="unblocked","Invalid blocker state transition: "+ke.state+" -> "+be.state);let Oe=new Map(A.blockers);Oe.set(ue,be),Pe({blockers:Oe})}function Ht(ue){let{currentLocation:be,nextLocation:ke,historyAction:Oe}=ue;if(ie.size===0)return;ie.size>1&&Xu(!1,"A router only supports one blocker at a time");let Je=Array.from(ie.entries()),[lt,Mt]=Je[Je.length-1],ut=A.blockers.get(lt);if(!(ut&&ut.state==="proceeding")&&Mt({currentLocation:be,nextLocation:ke,historyAction:Oe}))return lt}function Un(ue){let be=ka(404,{pathname:ue}),ke=l||o,{matches:Oe,route:Je}=TC(ke);return Jt(),{notFoundMatches:Oe,route:Je,error:be}}function Jt(ue){let be=[];return Z.forEach((ke,Oe)=>{(!ue||ue(Oe))&&(ke.cancel(),be.push(Oe),Z.delete(Oe))}),be}function Tt(ue,be,ke){if(m=ue,x=be,g=ke||null,!y&&A.navigation===B2){y=!0;let Oe=is(A.location,A.matches);Oe!=null&&Pe({restoreScrollPosition:Oe})}return()=>{m=null,x=null,g=null}}function bn(ue,be){return g&&g(ue,be.map(Oe=>R9(Oe,A.loaderData)))||ue.key}function tl(ue,be){if(m&&x){let ke=bn(ue,be);m[ke]=x()}}function is(ue,be){if(m){let ke=bn(ue,be),Oe=m[ke];if(typeof Oe=="number")return Oe}return null}function ba(ue,be,ke){if(u)if(ue){if(Object.keys(ue[0].params).length>0)return{active:!0,matches:gy(be,ke,c,!0)}}else return{active:!0,matches:gy(be,ke,c,!0)||[]};return{active:!1,matches:null}}async function ra(ue,be,ke,Oe){if(!u)return{type:"success",matches:ue};let Je=ue;for(;;){let lt=l==null,Mt=l||o,ut=a;try{await u({signal:ke,path:be,matches:Je,fetcherKey:Oe,patch:(ht,_t)=>{ke.aborted||CC(ht,_t,Mt,ut,s)}})}catch(ht){return{type:"error",error:ht,partialMatches:Je}}finally{lt&&!ke.aborted&&(o=[...o])}if(ke.aborted)return{type:"aborted"};let ct=bu(Mt,be,c);if(ct)return{type:"success",matches:ct};let st=gy(Mt,be,c,!0);if(!st||Je.length===st.length&&Je.every((ht,_t)=>ht.route.id===st[_t].route.id))return{type:"success",matches:null};Je=st}}function Lt(ue){a={},l=db(ue,s,void 0,a)}function Wi(ue,be){let ke=l==null;CC(ue,be,l||o,a,s),ke&&(o=[...o],Pe({}))}return T={get basename(){return c},get future(){return f},get state(){return A},get routes(){return o},get window(){return t},initialize:ye,subscribe:Ee,enableScrollRestoration:Tt,navigate:We,fetch:de,revalidate:V,createHref:ue=>e.history.createHref(ue),encodeLocation:ue=>e.history.encodeLocation(ue),getFetcher:Et,deleteFetcher:Yn,dispose:Se,getBlocker:kt,deleteBlocker:jn,patchRoutes:Wi,_internalFetchControllers:z,_internalActiveDeferreds:Z,_internalSetRoutes:Lt},T}function oB(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function o5(e,t,n,r,s,a,o,l){let c,d;if(o){c=[];for(let f of t)if(c.push(f),f.route.id===o){d=f;break}}else c=t,d=t[t.length-1];let u=qv(s||".",$v(c,a),cc(e.pathname,n)||e.pathname,l==="path");if(s==null&&(u.search=e.search,u.hash=e.hash),(s==null||s===""||s===".")&&d){let f=AS(u.search);if(d.route.index&&!f)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&f){let p=new URLSearchParams(u.search),h=p.getAll("index");p.delete("index"),h.filter(g=>g).forEach(g=>p.append("index",g));let m=p.toString();u.search=m?"?"+m:""}}return r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Gl([n,u.pathname])),Qu(u)}function NC(e,t,n,r){if(!r||!oB(r))return{path:n};if(r.formMethod&&!bB(r.formMethod))return{path:n,error:ka(405,{method:r.formMethod})};let s=()=>({path:n,error:ka(400,{type:"invalid-body"})}),a=r.formMethod||"get",o=e?a.toUpperCase():a.toLowerCase(),l=dL(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ro(o))return s();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((h,m)=>{let[g,x]=m;return""+h+g+"="+x+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!ro(o))return s();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return s()}}}on(typeof FormData=="function","FormData is not available in this environment");let c,d;if(r.formData)c=c5(r.formData),d=r.formData;else if(r.body instanceof FormData)c=c5(r.body),d=r.body;else if(r.body instanceof URLSearchParams)c=r.body,d=MC(c);else if(r.body==null)c=new URLSearchParams,d=new FormData;else try{c=new URLSearchParams(r.body),d=MC(c)}catch{return s()}let u={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(ro(u.formMethod))return{path:n,submission:u};let f=Ud(n);return t&&f.search&&AS(f.search)&&c.append("index",""),f.search="?"+c,{path:Qu(f),submission:u}}function jC(e,t,n){n===void 0&&(n=!1);let r=e.findIndex(s=>s.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function SC(e,t,n,r,s,a,o,l,c,d,u,f,p,h,m,g){let x=g?ti(g[1])?g[1].error:g[1].data:void 0,y=e.createURL(t.location),v=e.createURL(s),N=n;a&&t.errors?N=jC(n,Object.keys(t.errors)[0],!0):g&&ti(g[1])&&(N=jC(n,g[0]));let j=g?g[1].statusCode:void 0,D=o&&j&&j>=400,T=N.filter((S,E)=>{let{route:I}=S;if(I.lazy)return!0;if(I.loader==null)return!1;if(a)return l5(I,t.loaderData,t.errors);if(lB(t.loaderData,t.matches[E],S)||c.some(F=>F===S.route.id))return!0;let L=t.matches[E],O=S;return kC(S,pr({currentUrl:y,currentParams:L.params,nextUrl:v,nextParams:O.params},r,{actionResult:x,actionStatus:j,defaultShouldRevalidate:D?!1:l||y.pathname+y.search===v.pathname+v.search||y.search!==v.search||lL(L,O)}))}),A=[];return f.forEach((S,E)=>{if(a||!n.some(U=>U.route.id===S.routeId)||u.has(E))return;let I=bu(h,S.path,m);if(!I){A.push({key:E,routeId:S.routeId,path:S.path,matches:null,match:null,controller:null});return}let L=t.fetchers.get(E),O=Em(I,S.path),F=!1;p.has(E)?F=!1:d.has(E)?(d.delete(E),F=!0):L&&L.state!=="idle"&&L.data===void 0?F=l:F=kC(O,pr({currentUrl:y,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:x,actionStatus:j,defaultShouldRevalidate:D?!1:l})),F&&A.push({key:E,routeId:S.routeId,path:S.path,matches:I,match:O,controller:new AbortController})}),[T,A]}function l5(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,s=n!=null&&n[e.id]!==void 0;return!r&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!s}function lB(e,t,n){let r=!t||n.route.id!==t.route.id,s=e[n.route.id]===void 0;return r||s}function lL(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function kC(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function CC(e,t,n,r,s){var a;let o;if(e){let d=r[e];on(d,"No route found to patch children into: routeId = "+e),d.children||(d.children=[]),o=d.children}else o=n;let l=t.filter(d=>!o.some(u=>cL(d,u))),c=db(l,s,[e||"_","patch",String(((a=o)==null?void 0:a.length)||"0")],r);o.push(...c)}function cL(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var s;return(s=t.children)==null?void 0:s.some(a=>cL(n,a))}):!1}async function cB(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let s=n[e.id];on(s,"No route found in manifest");let a={};for(let o in r){let c=s[o]!==void 0&&o!=="hasErrorBoundary";Xu(!c,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!c&&!T9.has(o)&&(a[o]=r[o])}Object.assign(s,a),Object.assign(s,pr({},t(s),{lazy:void 0}))}async function dB(e){let{matches:t}=e,n=t.filter(s=>s.shouldLoad);return(await Promise.all(n.map(s=>s.resolve()))).reduce((s,a,o)=>Object.assign(s,{[n[o].route.id]:a}),{})}async function uB(e,t,n,r,s,a,o,l,c,d){let u=a.map(h=>h.route.lazy?cB(h.route,c,l):void 0),f=a.map((h,m)=>{let g=u[m],x=s.some(v=>v.route.id===h.route.id);return pr({},h,{shouldLoad:x,resolve:async v=>(v&&r.method==="GET"&&(h.route.lazy||h.route.loader)&&(x=!0),x?fB(t,r,h,g,v,d):Promise.resolve({type:Fn.data,result:void 0}))})}),p=await e({matches:f,request:r,params:a[0].params,fetcherKey:o,context:d});try{await Promise.all(u)}catch{}return p}async function fB(e,t,n,r,s,a){let o,l,c=d=>{let u,f=new Promise((m,g)=>u=g);l=()=>u(),t.signal.addEventListener("abort",l);let p=m=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):d({request:t,params:n.params,context:a},...m!==void 0?[m]:[]),h=(async()=>{try{return{type:"data",result:await(s?s(g=>p(g)):p())}}catch(m){return{type:"error",result:m}}})();return Promise.race([h,f])};try{let d=n.route[e];if(r)if(d){let u,[f]=await Promise.all([c(d).catch(p=>{u=p}),r]);if(u!==void 0)throw u;o=f}else if(await r,d=n.route[e],d)o=await c(d);else if(e==="action"){let u=new URL(t.url),f=u.pathname+u.search;throw ka(405,{method:t.method,pathname:f,routeId:n.route.id})}else return{type:Fn.data,result:void 0};else if(d)o=await c(d);else{let u=new URL(t.url),f=u.pathname+u.search;throw ka(404,{pathname:f})}on(o.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Fn.error,result:d}}finally{l&&t.signal.removeEventListener("abort",l)}return o}async function hB(e){let{result:t,type:n}=e;if(uL(t)){let f;try{let p=t.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?t.body==null?f=null:f=await t.json():f=await t.text()}catch(p){return{type:Fn.error,error:p}}return n===Fn.error?{type:Fn.error,error:new fb(t.status,t.statusText,f),statusCode:t.status,headers:t.headers}:{type:Fn.data,data:f,statusCode:t.status,headers:t.headers}}if(n===Fn.error){if(LC(t)){var r,s;if(t.data instanceof Error){var a,o;return{type:Fn.error,error:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}}return{type:Fn.error,error:new fb(((r=t.init)==null?void 0:r.status)||500,void 0,t.data),statusCode:Mg(t)?t.status:void 0,headers:(s=t.init)!=null&&s.headers?new Headers(t.init.headers):void 0}}return{type:Fn.error,error:t,statusCode:Mg(t)?t.status:void 0}}if(yB(t)){var l,c;return{type:Fn.deferred,deferredData:t,statusCode:(l=t.init)==null?void 0:l.status,headers:((c=t.init)==null?void 0:c.headers)&&new Headers(t.init.headers)}}if(LC(t)){var d,u;return{type:Fn.data,data:t.data,statusCode:(d=t.init)==null?void 0:d.status,headers:(u=t.init)!=null&&u.headers?new Headers(t.init.headers):void 0}}return{type:Fn.data,data:t}}function pB(e,t,n,r,s,a){let o=e.headers.get("Location");if(on(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!kS.test(o)){let l=r.slice(0,r.findIndex(c=>c.route.id===n)+1);o=o5(new URL(t.url),l,s,!0,o,a),e.headers.set("Location",o)}return e}function AC(e,t,n){if(kS.test(e)){let r=e,s=r.startsWith("//")?new URL(t.protocol+r):new URL(r),a=cc(s.pathname,n)!=null;if(s.origin===t.origin&&a)return s.pathname+s.search+s.hash}return e}function If(e,t,n,r){let s=e.createURL(dL(t)).toString(),a={signal:n};if(r&&ro(r.formMethod)){let{formMethod:o,formEncType:l}=r;a.method=o.toUpperCase(),l==="application/json"?(a.headers=new Headers({"Content-Type":l}),a.body=JSON.stringify(r.json)):l==="text/plain"?a.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?a.body=c5(r.formData):a.body=r.formData}return new Request(s,a)}function c5(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function MC(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function mB(e,t,n,r,s){let a={},o=null,l,c=!1,d={},u=n&&ti(n[1])?n[1].error:void 0;return e.forEach(f=>{if(!(f.route.id in t))return;let p=f.route.id,h=t[p];if(on(!ju(h),"Cannot handle redirect results in processLoaderData"),ti(h)){let m=h.error;u!==void 0&&(m=u,u=void 0),o=o||{};{let g=vu(e,p);o[g.route.id]==null&&(o[g.route.id]=m)}a[p]=void 0,c||(c=!0,l=Mg(h.error)?h.error.status:500),h.headers&&(d[p]=h.headers)}else ad(h)?(r.set(p,h.deferredData),a[p]=h.deferredData.data,h.statusCode!=null&&h.statusCode!==200&&!c&&(l=h.statusCode),h.headers&&(d[p]=h.headers)):(a[p]=h.data,h.statusCode&&h.statusCode!==200&&!c&&(l=h.statusCode),h.headers&&(d[p]=h.headers))}),u!==void 0&&n&&(o={[n[0]]:u},a[n[0]]=void 0),{loaderData:a,errors:o,statusCode:l||200,loaderHeaders:d}}function DC(e,t,n,r,s,a,o){let{loaderData:l,errors:c}=mB(t,n,r,o);return s.forEach(d=>{let{key:u,match:f,controller:p}=d,h=a[u];if(on(h,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(ti(h)){let m=vu(e.matches,f==null?void 0:f.route.id);c&&c[m.route.id]||(c=pr({},c,{[m.route.id]:h.error})),e.fetchers.delete(u)}else if(ju(h))on(!1,"Unhandled fetcher revalidation redirect");else if(ad(h))on(!1,"Unhandled fetcher deferred data");else{let m=Hc(h.data);e.fetchers.set(u,m)}}),{loaderData:l,errors:c}}function EC(e,t,n,r){let s=pr({},t);for(let a of n){let o=a.route.id;if(t.hasOwnProperty(o)?t[o]!==void 0&&(s[o]=t[o]):e[o]!==void 0&&a.route.loader&&(s[o]=e[o]),r&&r.hasOwnProperty(o))break}return s}function _C(e){return e?ti(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function vu(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function TC(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ka(e,t){let{pathname:n,routeId:r,method:s,type:a,message:o}=t===void 0?{}:t,l="Unknown Server Error",c="Unknown @remix-run/router error";return e===400?(l="Bad Request",s&&n&&r?c="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?c="defer() is not supported in actions":a==="invalid-body"&&(c="Unable to encode submission body")):e===403?(l="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):e===404?(l="Not Found",c='No route matches URL "'+n+'"'):e===405&&(l="Method Not Allowed",s&&n&&r?c="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(c='Invalid request method "'+s.toUpperCase()+'"')),new fb(e||500,l,new Error(c),!0)}function y0(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,s]=t[n];if(ju(s))return{key:r,result:s}}}function dL(e){let t=typeof e=="string"?Ud(e):e;return Qu(pr({},t,{hash:""}))}function gB(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function xB(e){return uL(e.result)&&nB.has(e.result.status)}function ad(e){return e.type===Fn.deferred}function ti(e){return e.type===Fn.error}function ju(e){return(e&&e.type)===Fn.redirect}function LC(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function yB(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function uL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function bB(e){return tB.has(e.toLowerCase())}function ro(e){return Z9.has(e.toLowerCase())}async function vB(e,t,n,r,s){let a=Object.entries(t);for(let o=0;o<a.length;o++){let[l,c]=a[o],d=e.find(p=>(p==null?void 0:p.route.id)===l);if(!d)continue;let u=r.find(p=>p.route.id===d.route.id),f=u!=null&&!lL(u,d)&&(s&&s[d.route.id])!==void 0;ad(c)&&f&&await CS(c,n,!1).then(p=>{p&&(t[l]=p)})}}async function wB(e,t,n){for(let r=0;r<n.length;r++){let{key:s,routeId:a,controller:o}=n[r],l=t[s];e.find(d=>(d==null?void 0:d.route.id)===a)&&ad(l)&&(on(o,"Expected an AbortController for revalidating fetcher deferred result"),await CS(l,o.signal,!0).then(d=>{d&&(t[s]=d)}))}}async function CS(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Fn.data,data:e.deferredData.unwrappedData}}catch(s){return{type:Fn.error,error:s}}return{type:Fn.data,data:e.deferredData.data}}}function AS(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Em(e,t){let n=typeof t=="string"?Ud(t).search:t.search;if(e[e.length-1].route.index&&AS(n||""))return e[e.length-1];let r=aL(e);return r[r.length-1]}function RC(e){let{formMethod:t,formAction:n,formEncType:r,text:s,formData:a,json:o}=e;if(!(!t||!n||!r)){if(s!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function H2(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function NB(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function dm(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function jB(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Hc(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function SB(e,t){try{let n=e.sessionStorage.getItem(oL);if(n){let r=JSON.parse(n);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&t.set(s,new Set(a||[]))}}catch{}}function kB(e,t){if(t.size>0){let n={};for(let[r,s]of t)n[r]=[...s];try{e.sessionStorage.setItem(oL,JSON.stringify(n))}catch(r){Xu(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hb.apply(this,arguments)}const dx=C.createContext(null),MS=C.createContext(null),mc=C.createContext(null),DS=C.createContext(null),Jo=C.createContext({outlet:null,matches:[],isDataRoute:!1}),fL=C.createContext(null);function CB(e,t){let{relative:n}=t===void 0?{}:t;Np()||on(!1);let{basename:r,navigator:s}=C.useContext(mc),{hash:a,pathname:o,search:l}=Vv(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Gl([r,o])),s.createHref({pathname:c,search:l,hash:a})}function Np(){return C.useContext(DS)!=null}function Xo(){return Np()||on(!1),C.useContext(DS).location}function hL(e){C.useContext(mc).static||C.useLayoutEffect(e)}function Fa(){let{isDataRoute:e}=C.useContext(Jo);return e?HB():AB()}function AB(){Np()||on(!1);let e=C.useContext(dx),{basename:t,future:n,navigator:r}=C.useContext(mc),{matches:s}=C.useContext(Jo),{pathname:a}=Xo(),o=JSON.stringify($v(s,n.v7_relativeSplatPath)),l=C.useRef(!1);return hL(()=>{l.current=!0}),C.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=qv(d,JSON.parse(o),a,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Gl([t,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[t,r,o,a,e])}const MB=C.createContext(null);function DB(e){let t=C.useContext(Jo).outlet;return t&&C.createElement(MB.Provider,{value:e},t)}function EB(){let{matches:e}=C.useContext(Jo),t=e[e.length-1];return t?t.params:{}}function Vv(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=C.useContext(mc),{matches:s}=C.useContext(Jo),{pathname:a}=Xo(),o=JSON.stringify($v(s,r.v7_relativeSplatPath));return C.useMemo(()=>qv(e,JSON.parse(o),a,n==="path"),[e,o,a,n])}function _B(e,t,n,r){Np()||on(!1);let{navigator:s}=C.useContext(mc),{matches:a}=C.useContext(Jo),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Xo(),u;u=d;let f=u.pathname||"/",p=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let h=bu(e,{pathname:p});return PB(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Gl([c,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Gl([c,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),a,n,r)}function TB(){let e=BB(),t=Mg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:s},n):null,null)}const LB=C.createElement(TB,null);class RB extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?C.createElement(Jo.Provider,{value:this.props.routeContext},C.createElement(fL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OB(e){let{routeContext:t,match:n,children:r}=e,s=C.useContext(dx);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(Jo.Provider,{value:t},r)}function PB(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let u=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);u>=0||on(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:p,errors:h}=n,m=f.route.loader&&p[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||m){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let h,m=!1,g=null,x=null;n&&(h=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||LB,c&&(d<0&&p===0?(UB("route-fallback"),m=!0,x=null):d===p&&(m=!0,x=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,p+1)),v=()=>{let N;return h?N=g:m?N=x:f.route.Component?N=C.createElement(f.route.Component,null):f.route.element?N=f.route.element:N=u,C.createElement(OB,{match:f,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:N})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?C.createElement(RB,{location:n.location,revalidation:n.revalidation,component:g,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var pL=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pL||{}),mL=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mL||{});function IB(e){let t=C.useContext(dx);return t||on(!1),t}function FB(e){let t=C.useContext(MS);return t||on(!1),t}function zB(e){let t=C.useContext(Jo);return t||on(!1),t}function gL(e){let t=zB(),n=t.matches[t.matches.length-1];return n.route.id||on(!1),n.route.id}function BB(){var e;let t=C.useContext(fL),n=FB(mL.UseRouteError),r=gL();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function HB(){let{router:e}=IB(pL.UseNavigateStable),t=gL(),n=C.useRef(!1);return hL(()=>{n.current=!0}),C.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,hb({fromRouteId:t},a)))},[e,t])}const OC={};function UB(e,t,n){OC[e]||(OC[e]=!0)}function $B(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Dg(e){let{to:t,replace:n,state:r,relative:s}=e;Np()||on(!1);let{future:a,static:o}=C.useContext(mc),{matches:l}=C.useContext(Jo),{pathname:c}=Xo(),d=Fa(),u=qv(t,$v(l,a.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(u);return C.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function qB(e){return DB(e.context)}function VB(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Qr.Pop,navigator:a,static:o=!1,future:l}=e;Np()&&on(!1);let c=t.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:c,navigator:a,static:o,future:hb({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Ud(r));let{pathname:u="/",search:f="",hash:p="",state:h=null,key:m="default"}=r,g=C.useMemo(()=>{let x=cc(u,c);return x==null?null:{location:{pathname:x,search:f,hash:p,state:h,key:m},navigationType:s}},[c,u,f,p,h,m,s]);return g==null?null:C.createElement(mc.Provider,{value:d},C.createElement(DS.Provider,{children:n,value:g}))}new Promise(()=>{});function YB(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:C.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:C.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:C.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wh(){return Wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wh.apply(this,arguments)}function xL(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function WB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function GB(e,t){return e.button===0&&(!t||t==="_self")&&!WB(e)}const KB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JB=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],XB="6";try{window.__reactRouterVersion=XB}catch{}function QB(e,t){return iB({basename:void 0,future:Wh({},void 0,{v7_prependBasename:!0}),history:D9({window:void 0}),hydrationData:ZB(),routes:e,mapRouteProperties:YB,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function ZB(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Wh({},t,{errors:eH(t.errors)})),t}function eH(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,s]of t)if(s&&s.__type==="RouteErrorResponse")n[r]=new fb(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let o=new a(s.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let a=new Error(s.message);a.stack="",n[r]=a}}else n[r]=s;return n}const yL=C.createContext({isTransitioning:!1}),tH=C.createContext(new Map),nH="startTransition",PC=Aj[nH],rH="flushSync",IC=eF[rH];function sH(e){PC?PC(e):e()}function um(e){IC?IC(e):e()}class aH{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function iH(e){let{fallbackElement:t,router:n,future:r}=e,[s,a]=C.useState(n.state),[o,l]=C.useState(),[c,d]=C.useState({isTransitioning:!1}),[u,f]=C.useState(),[p,h]=C.useState(),[m,g]=C.useState(),x=C.useRef(new Map),{v7_startTransition:y}=r||{},v=C.useCallback(S=>{y?sH(S):S()},[y]),N=C.useCallback((S,E)=>{let{deletedFetchers:I,flushSync:L,viewTransitionOpts:O}=E;S.fetchers.forEach((U,W)=>{U.data!==void 0&&x.current.set(W,U.data)}),I.forEach(U=>x.current.delete(U));let F=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!O||F){L?um(()=>a(S)):v(()=>a(S));return}if(L){um(()=>{p&&(u&&u.resolve(),p.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:O.currentLocation,nextLocation:O.nextLocation})});let U=n.window.document.startViewTransition(()=>{um(()=>a(S))});U.finished.finally(()=>{um(()=>{f(void 0),h(void 0),l(void 0),d({isTransitioning:!1})})}),um(()=>h(U));return}p?(u&&u.resolve(),p.skipTransition(),g({state:S,currentLocation:O.currentLocation,nextLocation:O.nextLocation})):(l(S),d({isTransitioning:!0,flushSync:!1,currentLocation:O.currentLocation,nextLocation:O.nextLocation}))},[n.window,p,u,x,v]);C.useLayoutEffect(()=>n.subscribe(N),[n,N]),C.useEffect(()=>{c.isTransitioning&&!c.flushSync&&f(new aH)},[c]),C.useEffect(()=>{if(u&&o&&n.window){let S=o,E=u.promise,I=n.window.document.startViewTransition(async()=>{v(()=>a(S)),await E});I.finished.finally(()=>{f(void 0),h(void 0),l(void 0),d({isTransitioning:!1})}),h(I)}},[v,o,u,n.window]),C.useEffect(()=>{u&&o&&s.location.key===o.location.key&&u.resolve()},[u,p,s.location,o]),C.useEffect(()=>{!c.isTransitioning&&m&&(l(m.state),d({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))},[c.isTransitioning,m]),C.useEffect(()=>{},[]);let j=C.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:S=>n.navigate(S),push:(S,E,I)=>n.navigate(S,{state:E,preventScrollReset:I==null?void 0:I.preventScrollReset}),replace:(S,E,I)=>n.navigate(S,{replace:!0,state:E,preventScrollReset:I==null?void 0:I.preventScrollReset})}),[n]),D=n.basename||"/",T=C.useMemo(()=>({router:n,navigator:j,static:!1,basename:D}),[n,j,D]),A=C.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return C.useEffect(()=>$B(r,n.future),[r,n.future]),C.createElement(C.Fragment,null,C.createElement(dx.Provider,{value:T},C.createElement(MS.Provider,{value:s},C.createElement(tH.Provider,{value:x.current},C.createElement(yL.Provider,{value:c},C.createElement(VB,{basename:D,location:s.location,navigationType:s.historyAction,navigator:j,future:A},s.initialized||n.future.v7_partialHydration?C.createElement(oH,{routes:n.routes,future:n.future,state:s}):t))))),null)}const oH=C.memo(lH);function lH(e){let{routes:t,future:n,state:r}=e;return _B(t,void 0,r,n)}const cH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bL=C.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:f}=t,p=xL(t,KB),{basename:h}=C.useContext(mc),m,g=!1;if(typeof d=="string"&&dH.test(d)&&(m=d,cH))try{let N=new URL(window.location.href),j=d.startsWith("//")?new URL(N.protocol+d):new URL(d),D=cc(j.pathname,h);j.origin===N.origin&&D!=null?d=D+j.search+j.hash:g=!0}catch{}let x=CB(d,{relative:s}),y=hH(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:f});function v(N){r&&r(N),N.defaultPrevented||y(N)}return C.createElement("a",Wh({},p,{href:m||x,onClick:g||a?r:v,ref:n,target:c}))}),uH=C.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:d,children:u}=t,f=xL(t,JB),p=Vv(c,{relative:f.relative}),h=Xo(),m=C.useContext(MS),{navigator:g,basename:x}=C.useContext(mc),y=m!=null&&pH(p)&&d===!0,v=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,N=h.pathname,j=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(N=N.toLowerCase(),j=j?j.toLowerCase():null,v=v.toLowerCase()),j&&x&&(j=cc(j,x)||j);const D=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let T=N===v||!o&&N.startsWith(v)&&N.charAt(D)==="/",A=j!=null&&(j===v||!o&&j.startsWith(v)&&j.charAt(v.length)==="/"),S={isActive:T,isPending:A,isTransitioning:y},E=T?r:void 0,I;typeof a=="function"?I=a(S):I=[a,T?"active":null,A?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(S):l;return C.createElement(bL,Wh({},f,{"aria-current":E,className:I,ref:n,style:L,to:c,viewTransition:d}),typeof u=="function"?u(S):u)});var d5;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(d5||(d5={}));var FC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(FC||(FC={}));function fH(e){let t=C.useContext(dx);return t||on(!1),t}function hH(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,c=Fa(),d=Xo(),u=Vv(e,{relative:o});return C.useCallback(f=>{if(GB(f,n)){f.preventDefault();let p=r!==void 0?r:Qu(d)===Qu(u);c(e,{replace:p,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,c,u,r,s,n,e,a,o,l])}function pH(e,t){t===void 0&&(t={});let n=C.useContext(yL);n==null&&on(!1);let{basename:r}=fH(d5.useViewTransitionState),s=Vv(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=cc(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=cc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ub(s.pathname,o)!=null||ub(s.pathname,a)!=null}/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gH=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),zC=e=>{const t=gH(e);return t.charAt(0).toUpperCase()+t.slice(1)},vL=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),xH=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>C.createElement("svg",{ref:c,...yH,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:vL("lucide",s),...!a&&!xH(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>C.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(e,t)=>{const n=C.forwardRef(({className:r,...s},a)=>C.createElement(bH,{ref:a,iconNode:t,className:vL(`lucide-${mH(zC(e))}`,`lucide-${e}`,r),...s}));return n.displayName=zC(e),n};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],wH=ze("activity",vH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],jH=ze("arrow-left",NH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],kH=ze("arrow-right-left",SH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],U2=ze("arrow-up-down",CH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],id=ze("award",AH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],DH=ze("ban",MH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EH=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],_H=ze("banknote",EH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],BC=ze("bell",TH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],RH=ze("bold",LH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],PH=ze("book-open",OH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],$2=ze("bot",IH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],zH=ze("box",FH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Zu=ze("briefcase",BH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Eg=ze("building-2",HH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Kl=ze("building",UH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]],q2=ze("cake",$H);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],VH=ze("calendar-clock",qH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Pu=ze("calendar-days",YH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pa=ze("calendar",WH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],KH=ze("chart-column",GH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],XH=ze("chart-no-axes-column",JH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ZH=ze("chart-pie",QH);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Jl=ze("check",eU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wL=ze("chevron-down",tU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gf=ze("chevron-right",nU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gc=ze("chevron-left",rU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bs=ze("circle-alert",sU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yr=ze("circle-check-big",aU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],oU=ze("circle-play",iU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],HC=ze("circle-user-round",lU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],dU=ze("circle-user",cU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],jp=ze("circle-x",uU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],hU=ze("clipboard-list",fU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Es=ze("clock",pU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],UC=ze("cloud-upload",mU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],xU=ze("code",gU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],_g=ze("coffee",yU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],vU=ze("credit-card",bU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ES=ze("database",wU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Gh=ze("dollar-sign",NU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xf=ze("download",jU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],kU=ze("ellipsis-vertical",SU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],AU=ze("eye-off",CU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Yv=ze("eye",MU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],EU=ze("factory",DU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],yr=ze("file-text",_U);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],LU=ze("fingerprint-pattern",TU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],OU=ze("funnel",RU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],$C=ze("git-pull-request",PU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Sp=ze("globe",IU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],zU=ze("graduation-cap",FU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],NL=ze("grid-3x3",BU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],xy=ze("hash",HU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],jL=ze("heart",UU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],qU=ze("history",$U);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],b0=ze("id-card",VU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ef=ze("image",YU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],GU=ze("indian-rupee",WU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_S=ze("info",KU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],XU=ze("italic",JU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],TS=ze("landmark",QU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],e$=ze("laptop",ZU);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],n$=ze("layers",t$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],s$=ze("layout-dashboard",r$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],i$=ze("layout-grid",a$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],l$=ze("list-ordered",o$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],SL=ze("list",c$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Hr=ze("loader-circle",d$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Xl=ze("lock",u$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Tg=ze("log-out",f$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Kh=ze("mail",h$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],u5=ze("map-pin",p$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],g$=ze("menu",m$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],y$=ze("message-circle",x$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],kL=ze("message-square-plus",b$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["path",{d:"M14 14a2 2 0 0 0 2-2V8h-2",key:"1r06pg"}],["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M8 14a2 2 0 0 0 2-2V8H8",key:"1jzu5j"}]],pb=ze("message-square-quote",v$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],N$=ze("messages-square",w$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Jh=ze("monitor",j$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],k$=ze("moon",S$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],LS=ze("network",C$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],lo=ze("package",A$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],qC=ze("party-popper",M$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Wv=ze("pen",D$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],mb=ze("phone",E$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],CL=ze("pill",_$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],AL=ze("plane",T$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],f5=ze("play",L$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wr=ze("plus",R$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],P$=ze("redo",O$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yf=ze("save",I$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bf=ze("search",F$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Lg=ze("send",z$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],h5=ze("settings",B$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],U$=ze("shield-alert",H$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gv=ze("shield",$$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],V$=ze("sliders-horizontal",q$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],RS=ze("smartphone",Y$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kh=ze("square-check-big",W$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],OS=ze("square-pen",G$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],J$=ze("sun",K$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],Q$=ze("text-align-center",X$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],eq=ze("text-align-end",Z$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],nq=ze("text-align-start",tq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],sq=ze("timer",rq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],br=ze("trash-2",aq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ch=ze("trending-up",iq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],lq=ze("triangle-alert",oq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],dq=ze("undo",cq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],yi=ze("upload",uq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ML=ze("user-check",fq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],pq=ze("user-plus",hq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],DL=ze("user-x",mq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hi=ze("user",gq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],yq=ze("users-round",xq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pa=ze("users",bq);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bi=ze("x",vq);function wq(){const[e,t]=C.useState(()=>{const r=localStorage.getItem("theme");return r==="light"||r==="dark"?r:window.matchMedia("(prefers-color-scheme: light)").matches?"dark":"light"});return C.useEffect(()=>{const r=window.document.documentElement;r.classList.remove("light","dark"),r.classList.add(e),localStorage.setItem("theme",e)},[e]),{theme:e,toggleTheme:()=>{t(r=>r==="light"?"dark":"light")}}}function EL(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=EL(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Er(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=EL(e))&&(r&&(r+=" "),r+=t);return r}const Nq=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},jq=(e,t)=>({classGroupId:e,validator:t}),_L=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),gb="-",VC=[],Sq="arbitrary..",kq=e=>{const t=Aq(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Cq(o);const l=o.split(gb),c=l[0]===""&&l.length>1?1:0;return TL(l,c,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const c=r[o],d=n[o];return c?d?Nq(d,c):c:d||VC}return n[o]||VC}}},TL=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const s=e[t],a=n.nextPart.get(s);if(a){const d=TL(e,t+1,a);if(d)return d}const o=n.validators;if(o===null)return;const l=t===0?e.join(gb):e.slice(t).join(gb),c=o.length;for(let d=0;d<c;d++){const u=o[d];if(u.validator(l))return u.classGroupId}},Cq=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?Sq+r:void 0})(),Aq=e=>{const{theme:t,classGroups:n}=e;return Mq(n,t)},Mq=(e,t)=>{const n=_L();for(const r in e){const s=e[r];PS(s,n,r,t)}return n},PS=(e,t,n,r)=>{const s=e.length;for(let a=0;a<s;a++){const o=e[a];Dq(o,t,n,r)}},Dq=(e,t,n,r)=>{if(typeof e=="string"){Eq(e,t,n);return}if(typeof e=="function"){_q(e,t,n,r);return}Tq(e,t,n,r)},Eq=(e,t,n)=>{const r=e===""?t:LL(t,e);r.classGroupId=n},_q=(e,t,n,r)=>{if(Lq(e)){PS(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(jq(n,e))},Tq=(e,t,n,r)=>{const s=Object.entries(e),a=s.length;for(let o=0;o<a;o++){const[l,c]=s[o];PS(c,LL(t,l),n,r)}},LL=(e,t)=>{let n=e;const r=t.split(gb),s=r.length;for(let a=0;a<s;a++){const o=r[a];let l=n.nextPart.get(o);l||(l=_L(),n.nextPart.set(o,l)),n=l}return n},Lq=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Rq=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const s=(a,o)=>{n[a]=o,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(a){let o=n[a];if(o!==void 0)return o;if((o=r[a])!==void 0)return s(a,o),o},set(a,o){a in n?n[a]=o:s(a,o)}}},p5="!",YC=":",Oq=[],WC=(e,t,n,r,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),Pq=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const a=[];let o=0,l=0,c=0,d;const u=s.length;for(let g=0;g<u;g++){const x=s[g];if(o===0&&l===0){if(x===YC){a.push(s.slice(c,g)),c=g+1;continue}if(x==="/"){d=g;continue}}x==="["?o++:x==="]"?o--:x==="("?l++:x===")"&&l--}const f=a.length===0?s:s.slice(c);let p=f,h=!1;f.endsWith(p5)?(p=f.slice(0,-1),h=!0):f.startsWith(p5)&&(p=f.slice(1),h=!0);const m=d&&d>c?d-c:void 0;return WC(a,h,p,m)};if(t){const s=t+YC,a=r;r=o=>o.startsWith(s)?a(o.slice(s.length)):WC(Oq,!1,o,void 0,!0)}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},Iq=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let a=0;a<n.length;a++){const o=n[a],l=o[0]==="[",c=t.has(o);l||c?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(o)):s.push(o)}return s.length>0&&(s.sort(),r.push(...s)),r}},Fq=e=>({cache:Rq(e.cacheSize),parseClassName:Pq(e),sortModifiers:Iq(e),...kq(e)}),zq=/\s+/,Bq=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=t,o=[],l=e.trim().split(zq);let c="";for(let d=l.length-1;d>=0;d-=1){const u=l[d],{isExternal:f,modifiers:p,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:g}=n(u);if(f){c=u+(c.length>0?" "+c:c);continue}let x=!!g,y=r(x?m.substring(0,g):m);if(!y){if(!x){c=u+(c.length>0?" "+c:c);continue}if(y=r(m),!y){c=u+(c.length>0?" "+c:c);continue}x=!1}const v=p.length===0?"":p.length===1?p[0]:a(p).join(":"),N=h?v+p5:v,j=N+y;if(o.indexOf(j)>-1)continue;o.push(j);const D=s(y,x);for(let T=0;T<D.length;++T){const A=D[T];o.push(N+A)}c=u+(c.length>0?" "+c:c)}return c},Hq=(...e)=>{let t=0,n,r,s="";for(;t<e.length;)(n=e[t++])&&(r=RL(n))&&(s&&(s+=" "),s+=r);return s},RL=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=RL(e[r]))&&(n&&(n+=" "),n+=t);return n},Uq=(e,...t)=>{let n,r,s,a;const o=c=>{const d=t.reduce((u,f)=>f(u),e());return n=Fq(d),r=n.cache.get,s=n.cache.set,a=l,l(c)},l=c=>{const d=r(c);if(d)return d;const u=Bq(c,n);return s(c,u),u};return a=o,(...c)=>a(Hq(...c))},$q=[],ps=e=>{const t=n=>n[e]||$q;return t.isThemeGetter=!0,t},OL=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,PL=/^\((?:(\w[\w-]*):)?(.+)\)$/i,qq=/^\d+\/\d+$/,Vq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Wq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Gq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Kq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ff=e=>qq.test(e),sn=e=>!!e&&!Number.isNaN(Number(e)),Oc=e=>!!e&&Number.isInteger(Number(e)),V2=e=>e.endsWith("%")&&sn(e.slice(0,-1)),Nl=e=>Vq.test(e),Jq=()=>!0,Xq=e=>Yq.test(e)&&!Wq.test(e),IL=()=>!1,Qq=e=>Gq.test(e),Zq=e=>Kq.test(e),eV=e=>!gt(e)&&!xt(e),tV=e=>kp(e,BL,IL),gt=e=>OL.test(e),cu=e=>kp(e,HL,Xq),Y2=e=>kp(e,iV,sn),GC=e=>kp(e,FL,IL),nV=e=>kp(e,zL,Zq),v0=e=>kp(e,UL,Qq),xt=e=>PL.test(e),fm=e=>Cp(e,HL),rV=e=>Cp(e,oV),KC=e=>Cp(e,FL),sV=e=>Cp(e,BL),aV=e=>Cp(e,zL),w0=e=>Cp(e,UL,!0),kp=(e,t,n)=>{const r=OL.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Cp=(e,t,n=!1)=>{const r=PL.exec(e);return r?r[1]?t(r[1]):n:!1},FL=e=>e==="position"||e==="percentage",zL=e=>e==="image"||e==="url",BL=e=>e==="length"||e==="size"||e==="bg-size",HL=e=>e==="length",iV=e=>e==="number",oV=e=>e==="family-name",UL=e=>e==="shadow",lV=()=>{const e=ps("color"),t=ps("font"),n=ps("text"),r=ps("font-weight"),s=ps("tracking"),a=ps("leading"),o=ps("breakpoint"),l=ps("container"),c=ps("spacing"),d=ps("radius"),u=ps("shadow"),f=ps("inset-shadow"),p=ps("text-shadow"),h=ps("drop-shadow"),m=ps("blur"),g=ps("perspective"),x=ps("aspect"),y=ps("ease"),v=ps("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...j(),xt,gt],T=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto","contain","none"],S=()=>[xt,gt,c],E=()=>[Ff,"full","auto",...S()],I=()=>[Oc,"none","subgrid",xt,gt],L=()=>["auto",{span:["full",Oc,xt,gt]},Oc,xt,gt],O=()=>[Oc,"auto",xt,gt],F=()=>["auto","min","max","fr",xt,gt],U=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],W=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...S()],P=()=>[Ff,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],z=()=>[e,xt,gt],oe=()=>[...j(),KC,GC,{position:[xt,gt]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",sV,tV,{size:[xt,gt]}],_=()=>[V2,fm,cu],$=()=>["","none","full",d,xt,gt],J=()=>["",sn,fm,cu],te=()=>["solid","dashed","dotted","double"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>[sn,V2,KC,GC],he=()=>["","none",m,xt,gt],ye=()=>["none",sn,xt,gt],Se=()=>["none",sn,xt,gt],Ee=()=>[sn,xt,gt],Pe=()=>[Ff,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Nl],breakpoint:[Nl],color:[Jq],container:[Nl],"drop-shadow":[Nl],ease:["in","out","in-out"],font:[eV],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Nl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Nl],shadow:[Nl],spacing:["px",sn],text:[Nl],"text-shadow":[Nl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ff,gt,xt,x]}],container:["container"],columns:[{columns:[sn,gt,xt,l]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[Oc,"auto",xt,gt]}],basis:[{basis:[Ff,"full","auto",l,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[sn,Ff,"auto","initial","none",gt]}],grow:[{grow:["",sn,xt,gt]}],shrink:[{shrink:["",sn,xt,gt]}],order:[{order:[Oc,"first","last","none",xt,gt]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...W(),"normal"]}],"justify-self":[{"justify-self":["auto",...W()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...W(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...W(),{baseline:["","last"]}]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...W(),"baseline"]}],"place-self":[{"place-self":["auto",...W()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:P()}],w:[{w:[l,"screen",...P()]}],"min-w":[{"min-w":[l,"screen","none",...P()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...P()]}],h:[{h:["screen","lh",...P()]}],"min-h":[{"min-h":["screen","lh","none",...P()]}],"max-h":[{"max-h":["screen","lh",...P()]}],"font-size":[{text:["base",n,fm,cu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,xt,Y2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",V2,gt]}],"font-family":[{font:[rV,gt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,xt,gt]}],"line-clamp":[{"line-clamp":[sn,"none",xt,Y2]}],leading:[{leading:[a,...S()]}],"list-image":[{"list-image":["none",xt,gt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",xt,gt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:[sn,"from-font","auto",xt,cu]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[sn,"auto",xt,gt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xt,gt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xt,gt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:oe()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Oc,xt,gt],radial:["",xt,gt],conic:[Oc,xt,gt]},aV,nV]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:_()}],"gradient-via-pos":[{via:_()}],"gradient-to-pos":[{to:_()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:$()}],"rounded-s":[{"rounded-s":$()}],"rounded-e":[{"rounded-e":$()}],"rounded-t":[{"rounded-t":$()}],"rounded-r":[{"rounded-r":$()}],"rounded-b":[{"rounded-b":$()}],"rounded-l":[{"rounded-l":$()}],"rounded-ss":[{"rounded-ss":$()}],"rounded-se":[{"rounded-se":$()}],"rounded-ee":[{"rounded-ee":$()}],"rounded-es":[{"rounded-es":$()}],"rounded-tl":[{"rounded-tl":$()}],"rounded-tr":[{"rounded-tr":$()}],"rounded-br":[{"rounded-br":$()}],"rounded-bl":[{"rounded-bl":$()}],"border-w":[{border:J()}],"border-w-x":[{"border-x":J()}],"border-w-y":[{"border-y":J()}],"border-w-s":[{"border-s":J()}],"border-w-e":[{"border-e":J()}],"border-w-t":[{"border-t":J()}],"border-w-r":[{"border-r":J()}],"border-w-b":[{"border-b":J()}],"border-w-l":[{"border-l":J()}],"divide-x":[{"divide-x":J()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":J()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...te(),"hidden","none"]}],"divide-style":[{divide:[...te(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[sn,xt,gt]}],"outline-w":[{outline:["",sn,fm,cu]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",u,w0,v0]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",f,w0,v0]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[sn,cu]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":J()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",p,w0,v0]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[sn,xt,gt]}],"mix-blend":[{"mix-blend":[...Z(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Z()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[sn]}],"mask-image-linear-from-pos":[{"mask-linear-from":ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":ie()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":ie()}],"mask-image-t-to-pos":[{"mask-t-to":ie()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":ie()}],"mask-image-r-to-pos":[{"mask-r-to":ie()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":ie()}],"mask-image-b-to-pos":[{"mask-b-to":ie()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":ie()}],"mask-image-l-to-pos":[{"mask-l-to":ie()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":ie()}],"mask-image-x-to-pos":[{"mask-x-to":ie()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":ie()}],"mask-image-y-to-pos":[{"mask-y-to":ie()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[xt,gt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":ie()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[sn]}],"mask-image-conic-from-pos":[{"mask-conic-from":ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":ie()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:oe()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",xt,gt]}],filter:[{filter:["","none",xt,gt]}],blur:[{blur:he()}],brightness:[{brightness:[sn,xt,gt]}],contrast:[{contrast:[sn,xt,gt]}],"drop-shadow":[{"drop-shadow":["","none",h,w0,v0]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",sn,xt,gt]}],"hue-rotate":[{"hue-rotate":[sn,xt,gt]}],invert:[{invert:["",sn,xt,gt]}],saturate:[{saturate:[sn,xt,gt]}],sepia:[{sepia:["",sn,xt,gt]}],"backdrop-filter":[{"backdrop-filter":["","none",xt,gt]}],"backdrop-blur":[{"backdrop-blur":he()}],"backdrop-brightness":[{"backdrop-brightness":[sn,xt,gt]}],"backdrop-contrast":[{"backdrop-contrast":[sn,xt,gt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",sn,xt,gt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[sn,xt,gt]}],"backdrop-invert":[{"backdrop-invert":["",sn,xt,gt]}],"backdrop-opacity":[{"backdrop-opacity":[sn,xt,gt]}],"backdrop-saturate":[{"backdrop-saturate":[sn,xt,gt]}],"backdrop-sepia":[{"backdrop-sepia":["",sn,xt,gt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",xt,gt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[sn,"initial",xt,gt]}],ease:[{ease:["linear","initial",y,xt,gt]}],delay:[{delay:[sn,xt,gt]}],animate:[{animate:["none",v,xt,gt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,xt,gt]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:ye()}],"rotate-x":[{"rotate-x":ye()}],"rotate-y":[{"rotate-y":ye()}],"rotate-z":[{"rotate-z":ye()}],scale:[{scale:Se()}],"scale-x":[{"scale-x":Se()}],"scale-y":[{"scale-y":Se()}],"scale-z":[{"scale-z":Se()}],"scale-3d":["scale-3d"],skew:[{skew:Ee()}],"skew-x":[{"skew-x":Ee()}],"skew-y":[{"skew-y":Ee()}],transform:[{transform:[xt,gt,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Pe()}],"translate-x":[{"translate-x":Pe()}],"translate-y":[{"translate-y":Pe()}],"translate-z":[{"translate-z":Pe()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xt,gt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xt,gt]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[sn,fm,cu,Y2]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},IS=Uq(lV);function dc(...e){return IS(Er(e))}const Ce="http://localhost:5001/api",xs="http://localhost:5001";class cV{getAuthHeaders(){const t=localStorage.getItem("authToken");return console.log("[ApiService Debug] getAuthHeaders. Token found:",!!t),{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}async registerUser(t){const n=await fetch(`${Ce}/auth/register`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to register user")}return n.json()}async login(t,n,r){const s=await fetch(`${Ce}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,location:r})});if(!s.ok){const o=await s.json();throw new Error(o.message||"Login failed")}const a=await s.json();return a.token&&localStorage.setItem("authToken",a.token),a}async getCurrentUser(){const t=await fetch(`${Ce}/auth/me`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch user")}return t.json()}async updateCurrentUser(t){const n=await fetch(`${Ce}/auth/me`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to update profile")}return n.json()}async getAllEmployees(){const t=await fetch(`${Ce}/employees`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch employees")}return t.json()}async getEmployeesOnLeave(){const t=await fetch(`${Ce}/leave/active`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch employees on leave");return t.json()}async getAllTenants(t){const n=t?`?${new URLSearchParams(t).toString()}`:"",r=await fetch(`${Ce}/superadmin/tenants${n}`,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch tenants");return r.json()}async createTenant(t){const n=t instanceof FormData,r=n?t:JSON.stringify(t),s=this.getAuthHeaders();n&&delete s["Content-Type"];const a=await fetch(`${Ce}/superadmin/tenants`,{method:"POST",headers:s,body:r});if(!a.ok){const o=await a.json();throw new Error(o.message||"Failed to create tenant")}return a.json()}async updateTenant(t,n){const r=n instanceof FormData,s=r?n:JSON.stringify(n),a=this.getAuthHeaders();r&&delete a["Content-Type"];const o=await fetch(`${Ce}/superadmin/tenants/${t}`,{method:"PATCH",headers:a,body:s});if(!o.ok){const l=await o.json();throw new Error(l.message||"Failed to update tenant")}return o.json()}async deleteTenant(t){const n=await fetch(`${Ce}/superadmin/tenants/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete tenant");return n.json()}async updateTenantStatus(t,n){const r=await fetch(`${Ce}/superadmin/tenants/${t}/status`,{method:"PATCH",headers:this.getAuthHeaders(),body:JSON.stringify({status:n})});if(!r.ok)throw new Error("Failed to update tenant status");return r.json()}async getPlatformAnalytics(){const t=await fetch(`${Ce}/superadmin/analytics/overview`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch analytics");return t.json()}async registerCompany(t){const n=await fetch(`${Ce}/registration/register-company`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to register company")}return n.json()}async getCompanySettings(){const t=await fetch(`${Ce}/settings/company`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch company settings");return t.json()}async getSubscriptionDetails(){const t=await fetch(`${Ce}/settings/subscription`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch subscription");return t.json()}async getUsageAnalytics(){const t=await fetch(`${Ce}/settings/usage`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch usage analytics");return t.json()}async getAllGlobalUsers(t){const n=new URLSearchParams(t).toString(),r=await fetch(`${Ce}/superadmin/users?${n}`,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch global users");return r.json()}async updateGlobalUserStatus(t,n){const r=await fetch(`${Ce}/superadmin/users/${t}/status`,{method:"PATCH",headers:this.getAuthHeaders(),body:JSON.stringify({status:n})});if(!r.ok)throw new Error("Failed to update user status");return r.json()}async deleteGlobalUser(t){const n=await fetch(`${Ce}/superadmin/users/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||"Failed to delete user")}return n.json()}async updateProfile(t){const n=await fetch(`${Ce}/auth/me`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to update profile")}return n.json()}async getAllUsers(){const t=await fetch(`${Ce}/admin/users`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch users")}return t.json()}async getAIConfig(){const t=await fetch(`${Ce}/ai/config`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch AI config");return t.json()}async getMyFeedbacks(){const t=await fetch(`${Ce}/feedback/my`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch feedbacks");return t.json()}async createFeedback(t){const n=await fetch(`${Ce}/feedback`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to send feedback")}return n.json()}async getRoles(){const t=await fetch(`${Ce}/admin/roles`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch roles");return t.json()}async createUser(t){const n=await fetch(`${Ce}/admin/users`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to create user")}return n.json()}async deleteUser(t){const n=await fetch(`${Ce}/admin/users/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to delete user")}return n.json()}async createRole(t){const n=await fetch(`${Ce}/admin/roles`,{method:"POST",headers:{"Content-Type":"application/json",...this.getAuthHeaders()},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to create role")}return n.json()}async updateRole(t,n){const r=await fetch(`${Ce}/admin/roles/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",...this.getAuthHeaders()},body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to update role")}return r.json()}async deleteRole(t){const n=await fetch(`${Ce}/admin/roles/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to delete role")}return n.json()}async updateUserStatus(t,n){const r=await fetch(`${Ce}/admin/users/${t}/status`,{method:"PATCH",headers:this.getAuthHeaders(),body:JSON.stringify({status:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to update user status")}return r.json()}async resetUserPassword(t){const n=await fetch(`${Ce}/admin/users/${t}/reset-password`,{method:"POST",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to reset password")}return n.json()}async getPermissions(){const t=await fetch(`${Ce}/admin/permissions`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch permissions")}return t.json()}async getAssetCategories(t=!1){const n=await fetch(`${Ce}/asset-categories?includeInactive=${t}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to fetch asset categories")}return n.json()}async createAssetCategory(t){const n=await fetch(`${Ce}/asset-categories`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to create asset category")}return n.json()}async updateAssetCategory(t,n){const r=await fetch(`${Ce}/asset-categories/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to update asset category")}return r.json()}async deleteAssetCategory(t){const n=await fetch(`${Ce}/asset-categories/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to delete asset category")}return n.json()}async toggleAssetCategoryStatus(t){const n=await fetch(`${Ce}/asset-categories/${t}/toggle-status`,{method:"PATCH",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to toggle asset category status")}return n.json()}async getAssets(t){const n=t?"?"+new URLSearchParams(t).toString():"",r=await fetch(`${Ce}/assets${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to fetch assets")}return r.json()}async createAsset(t){const n=t instanceof FormData,r=this.getAuthHeaders();n&&delete r["Content-Type"];const s=await fetch(`${Ce}/assets`,{method:"POST",headers:r,body:n?t:JSON.stringify(t)});if(!s.ok){const a=await s.json();throw new Error(a.message||"Failed to create asset")}return s.json()}async updateAsset(t,n){const r=n instanceof FormData,s=this.getAuthHeaders();r&&delete s["Content-Type"];const a=await fetch(`${Ce}/assets/${t}`,{method:"PUT",headers:s,body:r?n:JSON.stringify(n)});if(!a.ok){const o=await a.json();throw new Error(o.message||"Failed to update asset")}return a.json()}async deleteAsset(t){const n=await fetch(`${Ce}/assets/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to delete asset")}return n.json()}async getAssetStats(){const t=await fetch(`${Ce}/assets/stats`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch asset statistics")}return t.json()}async uploadAssetInvoice(t,n){const r=new FormData;r.append("invoice",n);const s=localStorage.getItem("authToken"),a=await fetch(`${Ce}/assets/${t}/upload-invoice`,{method:"POST",headers:{...s&&{Authorization:`Bearer ${s}`}},body:r});if(!a.ok){const o=await a.json();throw new Error(o.message||"Failed to upload invoice")}return a.json()}async disposeAsset(t,n){const r=await fetch(`${Ce}/assets/${t}/dispose`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to dispose asset")}return r.json()}async assignAsset(t){const n=await fetch(`${Ce}/asset-assignments/assign`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to assign asset")}return n.json()}async acknowledgeAsset(t){const n=await fetch(`${Ce}/asset-assignments/${t}/acknowledge`,{method:"POST",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to acknowledge asset")}return n.json()}async returnAsset(t,n){const r=await fetch(`${Ce}/asset-assignments/${t}/return`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to return asset")}return r.json()}async getMyAssets(){const t=await fetch(`${Ce}/asset-assignments/employee`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch assigned assets")}return t.json()}async getAssetAssignments(t){const n=t?"?"+new URLSearchParams(t).toString():"",r=await fetch(`${Ce}/asset-assignments${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to fetch asset assignments")}return r.json()}async reportAssetIncident(t,n){const r=new FormData;Object.keys(t).forEach(o=>{t[o]!==void 0&&t[o]!==null&&r.append(o,t[o])}),n&&n.length>0&&n.forEach(o=>{r.append("photos",o)});const s=localStorage.getItem("authToken"),a=await fetch(`${Ce}/asset-incidents/report`,{method:"POST",headers:{...s&&{Authorization:`Bearer ${s}`}},body:r});if(!a.ok){const o=await a.json();throw new Error(o.message||"Failed to report incident")}return a.json()}async getAssetIncidents(t){const n=t?"?"+new URLSearchParams(t).toString():"",r=await fetch(`${Ce}/asset-incidents${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to fetch incidents")}return r.json()}async resolveAssetIncident(t,n){const r=await fetch(`${Ce}/asset-incidents/${t}/resolve`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to resolve incident")}return r.json()}async getAssetHistory(t){const n=await fetch(`${Ce}/asset-history/asset/${t}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to fetch asset history")}return n.json()}async getAllAssetHistory(t){const n=t?"?"+new URLSearchParams(t).toString():"",r=await fetch(`${Ce}/asset-history${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to fetch history logs")}return r.json()}async createLeavePolicy(t){const n=t instanceof FormData,r=await fetch(`${Ce}/leave-policies`,{method:"POST",headers:n?{Authorization:`Bearer ${localStorage.getItem("authToken")}`}:this.getAuthHeaders(),body:n?t:JSON.stringify(t)});if(!r.ok){const s=await r.json();throw new Error(s.message||s.error||"Failed to create leave policy")}return r.json()}async getLeavePolicies(){const t=await fetch(`${Ce}/leave-policies`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch leave policies");return t.json()}async getLeavePolicy(t){const n=await fetch(`${Ce}/leave-policies/${t}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch leave policy");return n.json()}async updateLeavePolicy(t,n){const r=n instanceof FormData,s=await fetch(`${Ce}/leave-policies/${t}`,{method:"PUT",headers:r?{Authorization:`Bearer ${localStorage.getItem("token")}`}:this.getAuthHeaders(),body:r?n:JSON.stringify(n)});if(!s.ok)throw new Error("Failed to update leave policy");return s.json()}async deleteLeavePolicy(t){const n=await fetch(`${Ce}/leave-policies/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete leave policy");return n.json()}async getLeaveStats(){const t=await fetch(`${Ce}/leave/stats`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch leave stats");return t.json()}async applyLeave(t){const n=await fetch(`${Ce}/leave/apply`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to apply for leave")}return n.json()}async getMyLeaves(){const t=await fetch(`${Ce}/leave/my-leaves`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch my leaves");return t.json()}async getPendingLeaveApprovals(){const t=await fetch(`${Ce}/leave/pending-approvals`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending leave approvals");return t.json()}async approveLeave(t,n){const r=await fetch(`${Ce}/leave/${t}/approve`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!r.ok)throw new Error("Failed to approve leave");return r.json()}async rejectLeave(t,n){const r=await fetch(`${Ce}/leave/${t}/reject`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!r.ok)throw new Error("Failed to reject leave");return r.json()}async upsertSalaryStructure(t){const n=await fetch(`${Ce}/payroll/structure`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to save salary structure");return n.json()}async getSalaryStructure(t){const n=await fetch(`${Ce}/payroll/structure/${t}`,{headers:this.getAuthHeaders()});if(!n.ok){if(n.status===404)return{structure:null};throw new Error("Failed to fetch salary structure")}return n.json()}async calculatePayroll(t){const n=await fetch(`${Ce}/payroll/calculate`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to calculate payroll")}return n.json()}async getPayrollList(t){const n=new URLSearchParams(t).toString(),r=await fetch(`${Ce}/payroll/list?${n}`,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch payroll list");return r.json()}async updatePayrollStatus(t,n){const r=await fetch(`${Ce}/payroll/${t}/status`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({status:n})});if(!r.ok)throw new Error("Failed to update payroll status");return r.json()}async getMyPayslips(){const t=await fetch(`${Ce}/payroll/my-payslips`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch payslips");return t.json()}async getProjects(t){const n=new URLSearchParams(t).toString(),r=await fetch(`${Ce}/projects?${n}`,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch projects");return r.json()}async getProjectById(t){const n=await fetch(`${Ce}/projects/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch project");return n.json()}async createProject(t){const n=await fetch(`${Ce}/projects`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to create project");return n.json()}async updateProject(t,n){const r=await fetch(`${Ce}/projects/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to update project");return r.json()}async clearAuditLogs(){if(!(await fetch(`${Ce}/audit`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to clear audit logs")}async getTasks(t){const n=new URLSearchParams(t).toString(),r=await fetch(`${Ce}/tasks?${n}`,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch tasks");return r.json()}async createTask(t){const n=await fetch(`${Ce}/tasks`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to create task");return n.json()}async updateTask(t,n){const r=await fetch(`${Ce}/tasks/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to update task");return r.json()}async updateCompanySettings(t){const n=t instanceof FormData,r=this.getAuthHeaders();n&&delete r["Content-Type"];const s=await fetch(`${Ce}/settings/company`,{method:"PUT",headers:r,body:n?t:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to update settings");return s.json()}async getEmployees(){const t=await fetch(`${Ce}/employees`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch employees")}return t.json()}async getEmployeeById(t){const n=await fetch(`${Ce}/employees/${t}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to fetch employee")}return n.json()}async createEmployee(t){const n=t instanceof FormData,r=this.getAuthHeaders();n&&delete r["Content-Type"];const s=await fetch(`${Ce}/employees`,{method:"POST",headers:r,body:n?t:JSON.stringify(t)});if(!s.ok){const a=await s.json();throw new Error(a.message||"Failed to create employee")}return s.json()}async updateEmployee(t,n){const r=n instanceof FormData,s=this.getAuthHeaders();r&&delete s["Content-Type"];const a=await fetch(`${Ce}/employees/${t}`,{method:"PUT",headers:s,body:r?n:JSON.stringify(n)});if(!a.ok){const o=await a.json();throw new Error(o.message||"Failed to update employee")}return a.json()}async getUpcomingEvents(){const t=await fetch(`${Ce}/employees/upcoming-events`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch upcoming events")}return t.json()}async getHierarchy(){const t=await fetch(`${Ce}/employees/hierarchy`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch hierarchy")}return t.json()}async clockIn(){const t=await fetch(`${Ce}/attendance/clock-in`,{method:"POST",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to clock in")}return t.json()}async clockOut(t){const n=await fetch(`${Ce}/attendance/clock-out`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({completedTasks:t})});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to clock out")}return n.json()}async startBreak(){const t=await fetch(`${Ce}/attendance/break-start`,{method:"POST",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to start break")}return t.json()}async endBreak(){const t=await fetch(`${Ce}/attendance/break-end`,{method:"POST",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to end break")}return t.json()}async getAttendanceStatus(){const t=await fetch(`${Ce}/attendance/status`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch status");return t.json()}async getAttendanceHistory(t){const n=new URLSearchParams(t).toString(),r=await fetch(`${Ce}/attendance/history?${n}`,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch history");return r.json()}async getHolidays(t){const n=t?`?year=${t}`:"",r=await fetch(`${Ce}/holidays${n}`,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch holidays");return r.json()}async addHoliday(t){const n=await fetch(`${Ce}/holidays`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to add holiday")}return n.json()}async deleteHoliday(t){const n=await fetch(`${Ce}/holidays/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete holiday");return n.json()}async createTimesheetEntry(t){const n=await fetch(`${Ce}/timesheet/entry`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to create timesheet entry")}return n.json()}async getTimesheetEntries(t){const n=new URLSearchParams(t).toString(),r=await fetch(`${Ce}/timesheet/entries?${n}`,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch timesheet entries");return r.json()}async updateTimesheetEntry(t,n){const r=await fetch(`${Ce}/timesheet/entry/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to update timesheet entry")}return r.json()}async deleteTimesheetEntry(t){const n=await fetch(`${Ce}/timesheet/entry/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete timesheet entry");return n.json()}async requestTimeCorrection(t){const n=await fetch(`${Ce}/time-correction/request`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to request correction")}return n.json()}async getMyCorrections(){const t=await fetch(`${Ce}/time-correction/my-requests`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch corrections");return t.json()}async getPendingCorrections(){const t=await fetch(`${Ce}/time-correction/pending`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending corrections");return t.json()}async approveCorrection(t,n){const r=await fetch(`${Ce}/time-correction/${t}/approve`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!r.ok)throw new Error("Failed to approve correction");return r.json()}async getNotifications(){const t=await fetch(`${Ce}/notifications`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch notifications");return t.json()}async markNotificationRead(t){const n=await fetch(`${Ce}/notifications/${t}/read`,{method:"PUT",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to mark notification as read");return n.json()}async rejectCorrection(t,n){const r=await fetch(`${Ce}/time-correction/${t}/reject`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!r.ok)throw new Error("Failed to reject correction");return r.json()}async getTeamStatus(){const t=await fetch(`${Ce}/attendance/team-status`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch team status");return t.json()}async submitTimesheets(t){const n=await fetch(`${Ce}/timesheet/submit`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({weekEnding:t})});if(!n.ok)throw new Error("Failed to submit timesheets");return n.json()}async getPendingTimesheetApprovals(){const t=await fetch(`${Ce}/timesheet/pending-approvals`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending approvals");return t.json()}async approveTimesheet(t,n){const r=await fetch(`${Ce}/timesheet/${t}/approve`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!r.ok)throw new Error("Failed to approve timesheet");return r.json()}async rejectTimesheet(t,n){const r=await fetch(`${Ce}/timesheet/${t}/reject`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!r.ok)throw new Error("Failed to reject timesheet");return r.json()}async getAuditLogs(t){const n=new URLSearchParams(t).toString(),r=await fetch(`${Ce}/audit?${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch audit logs");return r.json()}async deleteAuditLog(t){if(!(await fetch(`${Ce}/audit/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete audit log")}async getEntityAuditLogs(t,n){const r=await fetch(`${Ce}/audit/${t}/${n}`,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch entity audit logs");return r.json()}async getPolicyStatus(){const t=await fetch(`${Ce}/ai/policy-status`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch policy status");return t.json()}async uploadPolicy(t){const n=new FormData;Array.from(t).forEach(o=>{n.append("policyFiles",o)});const s=this.getAuthHeaders();delete s["Content-Type"];const a=await fetch(`${Ce}/ai/upload-policy`,{method:"POST",headers:s,body:n});if(!a.ok){const o=await a.json();throw new Error(o.message||"Failed to upload policy")}return a.json()}async deletePolicy(t){const n=await fetch(`${Ce}/ai/policy/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to delete policy")}return n.json()}async askAi(t){const n=await fetch(`${Ce}/ai/chat`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({question:t})});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to get AI response")}return n.json()}async getBadges(){const t=await fetch(`${Ce}/badges`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch badges");return t.json()}async createBadge(t){const n=this.getAuthHeaders();delete n["Content-Type"];const r=await fetch(`${Ce}/badges`,{method:"POST",headers:n,body:t});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to create badge")}return r.json()}async deleteBadge(t){const n=await fetch(`${Ce}/badges/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete badge");return n.json()}async getAppreciations(t){const n=t&&t.recipientId?`?recipientId=${t.recipientId}`:"",r=await fetch(`${Ce}/appreciation${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch appreciations");return r.json()}async createAppreciation(t){const n=await fetch(`${Ce}/appreciation`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to send appreciation")}return n.json()}async markAppreciationsAsSeen(t){const n=await fetch(`${Ce}/appreciation/mark-seen`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({ids:t})});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to mark appreciations as seen")}return n.json()}async updateBadge(t,n){const r=localStorage.getItem("authToken"),s=await fetch(`${Ce}/badges/${t}`,{method:"PUT",headers:{...r&&{Authorization:`Bearer ${r}`}},body:n});if(!s.ok){const a=await s.json();throw new Error(a.message||"Failed to update badge")}return s.json()}async getHRLeaveOverview(t){const n=localStorage.getItem("hrms_token"),r=new URLSearchParams;Object.keys(t).forEach(a=>{t[a]&&r.append(a,t[a])});const s=await fetch(`${Ce}/leave/hr-overview?${r.toString()}`,{headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`}}});if(!s.ok){const a=await s.json();throw new Error(a.message||"Failed to fetch HR leave overview")}return s.json()}async getEmailSettings(){const t=await fetch(`${Ce}/email-automation/settings`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.text();throw new Error(`Failed to fetch email settings: ${t.status} ${n}`)}return t.json()}async updateEmailSettings(t){const n=await fetch(`${Ce}/email-automation/settings`,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to update email settings");return n.json()}async triggerEmailAutomation(){const t=await fetch(`${Ce}/email-automation/trigger`,{method:"POST",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to trigger email automation");return t.json()}async getEmailAuditLogs(){const t=await fetch(`${Ce}/email-automation/audit-logs`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch audit logs");return t.json()}async getSocialFeed(t){const n=t?"?"+new URLSearchParams(t).toString():"",r=await fetch(`${Ce}/social/feed${n}`,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to fetch social feed");return r.json()}async createPost(t){const n=await fetch(`${Ce}/social/posts`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to create post");return n.json()}async updatePost(t,n){const r=await fetch(`${Ce}/social/posts/${t}`,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({content:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to update post")}return r.json()}async deletePost(t){const n=await fetch(`${Ce}/social/posts/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete post");return n.json()}async toggleReaction(t,n){const r=await fetch(`${Ce}/social/posts/${t}/react`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({type:n})});if(!r.ok)throw new Error("Failed to toggle reaction");return r.json()}async votePoll(t,n){const r=await fetch(`${Ce}/social/posts/${t}/vote`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({optionIndex:n})});if(!r.ok)throw new Error("Failed to vote");return r.json()}async getComments(t){const n=await fetch(`${Ce}/social/posts/${t}/comments`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch comments");return n.json()}async addComment(t,n,r){const s=await fetch(`${Ce}/social/posts/${t}/comments`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({content:n,parentId:r})});if(!s.ok)throw new Error("Failed to add comment");return s.json()}async toggleCommentReaction(t,n){const r=await fetch(`${Ce}/social/comments/${t}/react`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({type:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to toggle comment reaction")}return r.json()}async uploadSocialMedia(t){const n=new FormData;n.append("file",t);const r=localStorage.getItem("authToken"),s=await fetch(`${Ce}/social/upload-media`,{method:"POST",headers:{...r&&{Authorization:`Bearer ${r}`}},body:n});if(!s.ok)throw new Error("Failed to upload media");return s.json()}async checkNewSocialPosts(t){const n=await fetch(`${Ce}/social/check-new?lastChecked=${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to check new posts");return n.json()}async createDocumentType(t){const n=await fetch(`${Ce}/documents/types`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to create document type")}return n.json()}async getAllDocumentTypes(){const t=await fetch(`${Ce}/documents/types`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch document types");return t.json()}async updateDocumentType(t,n){const r=await fetch(`${Ce}/documents/types/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to update document type")}return r.json()}async deleteDocumentType(t){const n=await fetch(`${Ce}/documents/types/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete document type");return n.json()}async uploadEmployeeDocument(t){const n=localStorage.getItem("authToken"),r=await fetch(`${Ce}/documents/employee/upload`,{method:"POST",headers:{...n&&{Authorization:`Bearer ${n}`}},body:t});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to upload document")}return r.json()}async getEmployeeDocuments(t){const n=await fetch(`${Ce}/documents/employee/${t}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch employee documents");return n.json()}async restoreDocumentVersion(t,n){const r=await fetch(`${Ce}/documents/employee/restore/${t}/${n}`,{method:"POST",headers:this.getAuthHeaders()});if(!r.ok)throw new Error("Failed to restore document version");return r.json()}}const xe=new cV,$L=C.createContext(void 0);function dV({children:e}){const[t,n]=C.useState(null),[r,s]=C.useState(!1),[a,o]=C.useState(!0);C.useEffect(()=>{const p=localStorage.getItem("hrms_user"),h=localStorage.getItem("authToken");if(p&&h)try{const m=JSON.parse(p);m&&(m.id||m._id)?(n(m),s(!0)):(console.warn("[AuthContext] Stored user missing ID. Clearing session."),localStorage.removeItem("hrms_user"),localStorage.removeItem("authToken"))}catch(m){console.error("Failed to parse stored user",m),localStorage.removeItem("hrms_user"),localStorage.removeItem("authToken")}o(!1)},[]);const l=p=>{const h=typeof p=="object"&&(p!=null&&p.name)?p.name:p;if(typeof h!="string")return"Employee";const m={admin:"Admin",hr:"HR",accountant:"Accountant",pm:"Project Manager",employee:"Employee",intern:"Intern",contractor:"Consultant",consultant:"Consultant"};return Object.values(m).includes(h)?h:m[h.toLowerCase()]||"Employee"},c=()=>{n(null),s(!1),localStorage.removeItem("hrms_user"),localStorage.removeItem("authToken")};C.useEffect(()=>{localStorage.getItem("authToken")&&d()},[]);const d=async()=>{var p,h,m,g;try{const y=(await xe.getCurrentUser()).user,v={id:y.id||y._id,email:y.email,name:y.name||y.email.split("@")[0],employeeId:y.employeeId,department:y.department,designation:y.designation,role:y.isSuperAdmin?"Super Admin":(p=y.roles)!=null&&p[0]?l(y.roles[0]):"Employee",roles:((h=y.roles)==null?void 0:h.map(l))||["Employee"],avatar:y.avatar,tenantId:y.tenantId,isSuperAdmin:y.isSuperAdmin||!1,isCompanyAdmin:y.isCompanyAdmin||!1,doj:y.doj,pan:y.pan,bankName:y.bankName,bankAccountNo:y.bankAccountNo,accessibleModules:((g=(m=y.roles)==null?void 0:m[0])==null?void 0:g.accessibleModules)||y.accessibleModules};return v.id||console.error("[AuthContext] CRITICAL: Missing ID in updated user!"),n(v),localStorage.setItem("hrms_user",JSON.stringify(v)),v}catch(x){return console.error("Failed to refresh user data",x),c(),null}},u=async(p,h,m)=>{var g,x,y;o(!0);try{const v=await xe.login(p,h,m);v.token&&localStorage.setItem("authToken",v.token);const N=await xe.getCurrentUser(),j={id:N.user.id||N.user._id,email:N.user.email,name:N.user.name||N.user.email.split("@")[0],role:N.user.isSuperAdmin?"Super Admin":l(((g=N.user.roles[0])==null?void 0:g.name)||N.user.roles[0]||"employee"),department:N.user.department,designation:N.user.employeeId,avatar:N.user.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(N.user.name||N.user.email)}&background=random`,employeeId:N.user.employeeId,doj:N.user.doj,pan:N.user.pan,bankName:N.user.bankName,bankAccountNo:N.user.bankAccountNo,tenantId:N.user.tenantId,isSuperAdmin:N.user.isSuperAdmin||!1,isCompanyAdmin:N.user.isCompanyAdmin||!1,accessibleModules:((y=(x=N.user.roles)==null?void 0:x[0])==null?void 0:y.accessibleModules)||N.user.accessibleModules};return n(j),s(!0),localStorage.setItem("hrms_user",JSON.stringify(j)),j}catch(v){console.error("API login failed, trying dummy credentials...",v);const N=f(p);if(N)return n(N),s(!0),localStorage.setItem("hrms_user",JSON.stringify(N)),localStorage.setItem("authToken","dummy-token"),N;throw v}finally{o(!1)}};console.log(t,"user");const f=(p,h)=>({"admin@sys.com":{id:"admin-1",email:"admin@sys.com",name:"System Admin",role:"Admin",department:"IT",designation:"System Administrator",avatar:"SA",employeeId:"EMP-001",doj:"2023-01-01",pan:"ABCDE1234F",bankName:"HDFC Bank",bankAccountNo:"1234567890"},"hr@company.com":{id:"hr-1",email:"hr@company.com",name:"HR Executive",role:"HR",department:"Human Resources",designation:"HR Executive",avatar:"HR",employeeId:"EMP-002",doj:"2023-02-01",pan:"FGHIJ5678K",bankName:"ICICI Bank",bankAccountNo:"0987654321"},"pm@company.com":{id:"pm-1",email:"pm@company.com",name:"Project Manager",role:"Project Manager",department:"Engineering",designation:"Project Manager",avatar:"PM",employeeId:"EMP-003",doj:"2023-03-01",pan:"LMNOP9012Q",bankName:"SBI",bankAccountNo:"1122334455"},"employee@company.com":{id:"emp-1",email:"employee@company.com",name:"John Employee",role:"Employee",department:"Engineering",designation:"Software Engineer",avatar:"JE",employeeId:"EMP-004",doj:"2023-04-01",pan:"RSTUV3456W",bankName:"Axis Bank",bankAccountNo:"5566778899"},"acc@company.com":{id:"acc-1",email:"acc@company.com",name:"Accountant",role:"Accountant",department:"Finance",designation:"Senior Accountant",avatar:"AC",employeeId:"EMP-005",doj:"2023-05-01",pan:"XYZAB7890C",bankName:"Kotak Bank",bankAccountNo:"9988776655"},"intern@company.com":{id:"int-1",email:"intern@company.com",name:"Intern",role:"Intern",department:"Engineering",designation:"Software Intern",avatar:"IN",employeeId:"EMP-006",doj:"2024-01-01",pan:"DEFGH1234I",bankName:"Canara Bank",bankAccountNo:"6655443322"},"contract@company.com":{id:"con-1",email:"contract@company.com",name:"Contractor",role:"Consultant",department:"Engineering",designation:"Contract Developer",avatar:"CO",employeeId:"EMP-007",doj:"2023-06-01",pan:"JKLMN5678O",bankName:"Union Bank",bankAccountNo:"2233445566"}})[p.toLowerCase()]||null;return i.jsx($L.Provider,{value:{user:t,isAuthenticated:r,isLoading:a,login:u,logout:c,refreshUser:d},children:e})}function cn(){const e=C.useContext($L);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const qL=[{to:"/",label:"Dashboard",roles:["Admin","HR","Accountant","Project Manager","Employee","Intern"]},{to:"/employee-management",label:"Employee Management",roles:["Admin","HR"]},{to:"/roles",label:"Role Management",roles:["Admin","HR"]},{to:"/settings/documents",label:"Document Management",roles:["Admin","HR"],module:"documents"},{to:"/assets",label:"Asset Management",roles:["Admin","HR"]},{to:"/my-assets",label:"My Assets",roles:["Accountant","Project Manager","Employee","Intern","Consultant"]},{to:"/ai-configuration",label:"AI Chatbot Configuration",roles:["Admin","HR"]},{to:"/attendance",label:"Attendance & Time Tracking",roles:["Employee","HR","Project Manager","Intern","Consultant"]},{to:"/audit",label:"Audit Trail",roles:["Admin","HR"]},{to:"/leave",label:"Leave Management",roles:["Admin","HR","Project Manager","Employee","Intern","Consultant"]},{to:"/payroll",label:"Payroll & Finance",roles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"]},{to:"/projects",label:"Project Management",roles:["Admin","Project Manager","Employee","Intern","Consultant","Accountant"]},{to:"/organization",label:"Hierarchy",roles:["Admin","HR","Project Manager","Employee","Intern","Consultant"]},{to:"/superadmin/analytics",label:"Platform Analytics",roles:["Super Admin"]},{to:"/superadmin/tenants",label:"Tenant Management",roles:["Super Admin"]},{to:"/superadmin/users",label:"User Management",roles:["Super Admin"]},{to:"/superadmin/settings",label:"Platform Settings",roles:["Super Admin"]},{to:"/settings",label:"System Settings",roles:["Admin"]},{to:"/miscellaneous",label:"Miscellaneous",roles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"]},{to:"/social",label:"Social Wall",roles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"]}];function uV(e){const t=qL.find(n=>n.roles.includes(e));return(t==null?void 0:t.to)||"/"}function VL(e){return qL.filter(t=>t.roles.includes(e))}function Nd({content:e,children:t,position:n="bottom",trigger:r="hover"}){const[s,a]=C.useState(!1),o=C.useRef(null),l=C.useRef(null),[c,d]=C.useState({top:0,left:0}),[u,f]=C.useState(0),p=C.useRef(null),h=()=>{if(!o.current)return;const v=o.current.getBoundingClientRect(),N=window.scrollX,j=window.scrollY,D=window.innerWidth;let T=0,A=0,S=0;switch(n){case"top":T=v.top+j-8,A=v.left+N+v.width/2;break;case"bottom":T=v.bottom+j+8,A=v.left+N+v.width/2;break;case"left":T=v.top+j+v.height/2,A=v.left+N-8;break;case"right":T=v.top+j+v.height/2,A=v.right+N+8;break}if((n==="top"||n==="bottom")&&l.current){const I=l.current.getBoundingClientRect().width/2,L=10,O=A-N;let F=O;O+I>D-L&&(F=D-L-I),O-I<L&&(F=L+I);const U=F+N;S=A-U,A=U}d({top:T,left:A}),f(S)},m=()=>{h(),r==="hover"?p.current=setTimeout(()=>a(!0),200):a(!0)},g=()=>{p.current&&clearTimeout(p.current),a(!1)},x=v=>{v.stopPropagation(),s?g():m()};C.useEffect(()=>{if(r==="click"&&s){const v=N=>{o.current&&!o.current.contains(N.target)&&l.current&&!l.current.contains(N.target)&&g()};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}}},[r,s]),C.useLayoutEffect(()=>{s&&h()},[s]),C.useEffect(()=>{if(s)return window.addEventListener("scroll",h),window.addEventListener("resize",h),()=>{window.removeEventListener("scroll",h),window.removeEventListener("resize",h)}},[s]);const y=i.jsxs("div",{ref:l,className:"fixed z-[9999] px-3 py-1.5 text-xs font-medium text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded shadow-lg animate-in fade-in zoom-in-95 duration-200",style:{top:c.top,left:c.left,transform:n==="top"?"translate(-50%, -100%)":n==="bottom"?"translate(-50%, 0)":n==="left"?"translate(-100%, -50%)":"translate(0, -50%)"},children:[e,i.jsx("div",{className:`absolute w-2 h-2 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 transform rotate-45 ${n==="top"?"bottom-[-5px] left-1/2 -translate-x-1/2 -rotate-135 border-l-0 border-t-0 border-r border-b":n==="bottom"?"top-[-5px] left-1/2 -translate-x-1/2 border-l border-t":n==="left"?"right-[-5px] top-1/2 -translate-y-1/2 rotate-135 border-l-0 border-t-0 border-r border-b":"left-[-5px] top-1/2 -translate-y-1/2 -rotate-45"}`,style:{marginLeft:u?`${u}px`:void 0}})]});return i.jsxs(i.Fragment,{children:[i.jsx("div",{ref:o,className:"relative flex items-center justify-center cursor-pointer",onMouseEnter:r==="hover"?m:void 0,onMouseLeave:r==="hover"?g:void 0,onClick:r==="click"?x:void 0,children:t}),s&&pp.createPortal(y,document.body)]})}const JC=e=>{let t;const n=new Set,r=(d,u)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const p=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(h=>h(t,p))}},s=()=>t,l={setState:r,getState:s,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d))},c=t=e(r,s,l);return l},fV=e=>e?JC(e):JC,hV=e=>e;function pV(e,t=hV){const n=ge.useSyncExternalStore(e.subscribe,ge.useCallback(()=>t(e.getState()),[e,t]),ge.useCallback(()=>t(e.getInitialState()),[e,t]));return ge.useDebugValue(n),n}const XC=e=>{const t=fV(e),n=r=>pV(t,r);return Object.assign(n,t),n},mV=e=>e?XC(e):XC,FS=mV((e,t)=>({leaveStats:null,workStats:null,holidays:null,widgetAnimationPlayed:!1,notifications:[],unreadCount:0,setWidgetAnimationPlayed:()=>e({widgetAnimationPlayed:!0}),fetchDashboardData:async()=>{await Promise.all([t().fetchLeaveStats(),t().fetchHolidays()]);try{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),1).toISOString(),s=new Date(n.getFullYear(),n.getMonth()+1,0).toISOString(),[a,o]=await Promise.all([xe.getTimesheetEntries({startDate:r,endDate:s}),xe.getAttendanceHistory({startDate:r,endDate:s})]),c=(Array.isArray(a)?a:a.data||[]).reduce((h,m)=>h+(Number(m.duration)||0),0),d=Array.isArray(o)?o:o.data||o.history||[];let u=0,f=0;d.forEach(h=>{if(h.clockIn){f++;const m=new Date(h.clockIn),g=m.getHours(),x=m.getMinutes();(g<9||g===9&&x<=30)&&u++}});const p=f>0?Math.round(u/f*100):0;e({workStats:{totalHours:Math.round(c),onTimePercentage:p}})}catch(n){console.error("Failed to fetch dashboard work stats",n)}},fetchLeaveStats:async()=>{try{if(t().leaveStats)return;const n=await xe.getLeaveStats();e({leaveStats:n.stats})}catch(n){console.error("Failed to fetch leave stats:",n)}},fetchHolidays:async()=>{try{if(t().holidays)return;const n=await xe.getHolidays();e({holidays:n.data||[]})}catch(n){console.error("Failed to fetch holidays:",n)}},fetchNotifications:async()=>{try{const n=await xe.getNotifications(),r=Array.isArray(n)?n:[],s=r.filter(a=>!a.read).length;e({notifications:r,unreadCount:s})}catch(n){console.error("Failed to fetch notifications",n)}},markNotificationRead:async n=>{try{const{notifications:r}=t();if(n==="all"){const s=r.map(a=>({...a,read:!0}));e({notifications:s,unreadCount:0}),await xe.markNotificationRead("all")}else{const s=r.map(o=>o._id===n?{...o,read:!0}:o),a=s.filter(o=>!o.read).length;e({notifications:s,unreadCount:a}),await xe.markNotificationRead(n)}}catch(r){console.error("Failed to mark notification read",r),t().fetchNotifications()}},resetStore:()=>{e({leaveStats:null,workStats:null,holidays:null,notifications:[],unreadCount:0})}}));function QC(){const{notifications:e,unreadCount:t,fetchNotifications:n,markNotificationRead:r}=FS(),[s,a]=C.useState(!1),o=C.useRef(null),l=Fa();C.useEffect(()=>{n();const f=setInterval(()=>{n()},6e4);return()=>clearInterval(f)},[]),C.useEffect(()=>{const f=p=>{o.current&&!o.current.contains(p.target)&&a(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const c=f=>{f.stopPropagation(),r("all")},d=f=>{f.read||r(f._id),a(!1),f.type==="LEAVE"?l("/leave"):f.type==="TIMESHEET"?l("/attendance"):f.type==="PAYROLL"&&l("/payroll")},u=f=>{switch(f){case"LEAVE":return"text-orange-500 bg-orange-50";case"TIMESHEET":return"text-blue-500 bg-blue-50";case"PAYROLL":return"text-green-500 bg-green-50";default:return"text-gray-500 bg-gray-50"}};return i.jsxs("div",{className:"relative",ref:o,children:[i.jsx(Nd,{content:"Notifications",children:i.jsxs("button",{onClick:()=>a(!s),className:"relative p-2 text-text-secondary hover:text-text-primary hover:bg-bg-hover rounded-lg transition-colors",children:[i.jsx(BC,{size:20}),t>0&&i.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-status-error rounded-full ring-2 ring-white animate-pulse"})]})}),s&&i.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-bg-card rounded-lg shadow-lg border border-border animate-in fade-in slide-in-from-top-2 duration-200",style:{zIndex:99999},children:[i.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[i.jsx("h3",{className:"font-semibold text-text-primary",children:"Notifications"}),t>0&&i.jsxs("button",{onClick:c,className:"text-xs text-brand-primary hover:text-brand-dark flex items-center gap-1",children:[i.jsx(Jl,{size:12})," Mark all read"]})]}),i.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length===0?i.jsx("div",{className:"p-8 text-center text-text-secondary text-sm",children:"No notifications yet"}):e.map(f=>i.jsx("div",{onClick:()=>d(f),className:`p-4 border-b border-border last:border-0 cursor-pointer hover:bg-bg-hover transition-colors ${f.read?"":"bg-brand-primary/5"}`,children:i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:`p-2 rounded-lg h-fit ${u(f.type)}`,children:[i.jsx(BC,{size:16})," "]}),i.jsxs("div",{children:[i.jsx("p",{className:`text-sm ${f.read?"font-medium":"font-semibold"} text-text-primary`,children:f.title}),i.jsx("p",{className:"text-xs text-text-secondary mt-1 line-clamp-2",children:f.message}),i.jsx("p",{className:"text-[10px] text-text-tertiary mt-2",children:new Date(f.createdAt).toLocaleString()})]})]})},f._id))})]})]})}const Ze=C.forwardRef(({label:e,error:t,helperText:n,className:r="",leftIcon:s,rightIcon:a,id:o,required:l,...c},d)=>{const u=o||c.name||Math.random().toString(36).substr(2,9);return i.jsxs("div",{className:"w-full",children:[e&&i.jsxs("label",{htmlFor:u,className:"block text-sm font-medium text-text-secondary mb-1",children:[e," ",l&&i.jsx("span",{className:"text-status-error",children:"*"})]}),i.jsxs("div",{className:"relative",children:[s&&i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-text-muted",children:s}),i.jsx("input",{ref:d,id:u,disabled:c.disabled,required:l,className:`
            w-full rounded-lg border bg-bg-card
            ${t?"border-status-error focus:ring-status-error":"border-border focus:ring-brand-primary"}
            ${s?"pl-10":"px-3"}
            ${a?"pr-10":"px-3"}
            py-2 text-sm placeholder-text-muted text-text-primary
            focus:outline-none focus:ring-2 focus:border-transparent
            disabled:bg-bg-main disabled:text-text-muted
            h-[38px]
            ${r}
          `,...c}),a&&i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-text-muted",children:a})]}),t&&i.jsx("p",{className:"mt-1 text-xs text-status-error",children:t}),!t&&n&&i.jsx("p",{className:"mt-1 text-xs text-text-muted",children:n})]})});Ze.displayName="Input";function gV(){const{user:e}=cn(),[t,n]=C.useState(!1),[r,s]=C.useState([{id:"welcome",sender:"bot",text:"Hello! I am your HR AI Assistant. How can I help you regarding company policies today?",timestamp:new Date}]),[a,o]=C.useState(""),[l,c]=C.useState(!1),d=C.useRef(null),u=()=>{var p;(p=d.current)==null||p.scrollIntoView({behavior:"smooth"})};if(C.useEffect(()=>{u()},[r,t]),!e)return null;const f=async p=>{if(p==null||p.preventDefault(),!a.trim()||l)return;const h={id:Date.now().toString(),sender:"user",text:a,timestamp:new Date};s(m=>[...m,h]),o(""),c(!0);try{const m=await xe.askAi(h.text),g={id:(Date.now()+1).toString(),sender:"bot",text:m.answer,timestamp:new Date};s(x=>[...x,g])}catch{const g={id:(Date.now()+1).toString(),sender:"bot",text:"Sorry, I encountered an error while processing your request. Please try again later.",timestamp:new Date};s(x=>[...x,g])}finally{c(!1)}};return i.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end",children:[t&&i.jsxs("div",{className:"mb-4 w-[350px] md:w-[400px] h-[500px] bg-bg-card rounded-2xl shadow-xl border border-border flex flex-col overflow-hidden animate-in slide-in-from-bottom-5 fade-in duration-200",children:[i.jsxs("div",{className:"bg-brand-primary p-4 flex justify-between items-center text-white",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 bg-white/20 rounded-full",children:i.jsx($2,{size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm",children:"HR Assistant"}),i.jsxs("p",{className:"text-xs text-brand-primary-foreground/80 flex items-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-status-success rounded-full"}),"Online"]})]})]}),i.jsx("button",{onClick:()=>n(!1),className:"text-white/80 hover:text-white transition-colors",children:i.jsx(bi,{size:20})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-bg-main/50",children:[r.map(p=>i.jsxs("div",{className:`flex gap-3 ${p.sender==="user"?"flex-row-reverse":"flex-row"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${p.sender==="user"?"bg-brand-secondary text-white":"bg-brand-primary/10 text-brand-primary"}`,children:p.sender==="user"?i.jsx(hi,{size:14}):i.jsx($2,{size:14})}),i.jsxs("div",{className:`max-w-[80%] px-4 py-2.5 rounded-2xl text-sm ${p.sender==="user"?"bg-brand-primary text-white rounded-tr-none":"bg-bg-card border border-border text-text-primary rounded-tl-none shadow-sm"}`,children:[i.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:p.text}),i.jsx("span",{className:`text-[10px] block mt-1 ${p.sender==="user"?"text-white/70":"text-text-muted"}`,children:p.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},p.id)),l&&i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary/10 text-brand-primary flex items-center justify-center shrink-0",children:i.jsx($2,{size:14})}),i.jsx("div",{className:"bg-bg-card border border-border px-4 py-3 rounded-2xl rounded-tl-none shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-brand-primary rounded-full animate-bounce [animation-delay:-0.3s]"}),i.jsx("span",{className:"w-2 h-2 bg-brand-primary rounded-full animate-bounce [animation-delay:-0.15s]"}),i.jsx("span",{className:"w-2 h-2 bg-brand-primary rounded-full animate-bounce"})]}),i.jsx("span",{className:"text-xs text-text-muted animate-pulse font-medium",children:"Thinking..."})]})})]}),i.jsx("div",{ref:d})]}),i.jsxs("form",{onSubmit:f,className:"p-4 bg-bg-card border-t border-border",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-1",children:i.jsx(Ze,{value:a,onChange:p=>o(p.target.value),placeholder:"Ask about HR policies...",className:"bg-bg-main rounded-full px-4 py-2.5 text-sm"})}),i.jsx("button",{type:"submit",disabled:!a.trim()||l,className:"p-2.5 bg-brand-primary text-white rounded-full hover:bg-brand-secondary disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",children:i.jsx(Lg,{size:18})})]}),i.jsx("p",{className:"text-[10px] text-text-muted mt-2 ml-2",children:"AI can make mistakes. Please verify important info with HR."})]})]}),!t&&i.jsx("button",{onClick:()=>n(!0),className:"bg-brand-primary hover:bg-brand-secondary text-white h-14 w-14 rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",children:i.jsx(N$,{size:22})})]})}function uc({src:e,alt:t,name:n,className:r,size:s="md",fallbackColor:a="bg-brand-secondary"}){const[o,l]=C.useState(!1);C.useEffect(()=>{l(!1)},[e]);const c=u=>u?u.split(" ").map(f=>f[0]).slice(0,2).join("").toUpperCase():"",d=()=>{switch(s){case"sm":return"w-8 h-8 text-xs";case"md":return"w-10 h-10 text-sm";case"lg":return"w-16 h-16 text-lg";case"xl":return"w-24 h-24 text-2xl";default:return"w-10 h-10 text-sm"}};return!e||o?i.jsx("div",{className:dc("rounded-full flex items-center justify-center text-white font-bold overflow-hidden",a,d(),r),children:n?c(n):i.jsx(hi,{size:16})}):i.jsx("div",{className:dc("rounded-full overflow-hidden",d(),r),children:i.jsx("img",{src:e,alt:t||n||"Avatar",className:"w-full h-full object-cover",onError:()=>l(!0)})})}const xV={success:i.jsx(Yr,{className:"w-5 h-5 text-green-500"}),error:i.jsx(bs,{className:"w-5 h-5 text-red-500"}),warning:i.jsx(bs,{className:"w-5 h-5 text-yellow-500"}),info:i.jsx(_S,{className:"w-5 h-5 text-blue-500"})},yV={success:"border-l-4 border-green-500",error:"border-l-4 border-red-500",warning:"border-l-4 border-yellow-500",info:"border-l-4 border-blue-500"};function bV({id:e,message:t,type:n="info",onClose:r,duration:s=5e3}){return C.useEffect(()=>{const a=setTimeout(()=>{r(e)},s);return()=>clearTimeout(a)},[e,s,r]),i.jsxs("div",{className:`flex items-center w-full max-w-sm p-4 text-gray-800 bg-white rounded-lg shadow-lg dark:text-gray-400 dark:bg-gray-800 transition-all transform translate-x-0 ${yV[n]}`,role:"alert",children:[i.jsx("div",{className:"flex-shrink-0",children:xV[n]}),i.jsx("div",{className:"ml-3 text-sm font-normal mr-2 flex-1",children:t}),i.jsxs("button",{type:"button",className:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700",onClick:()=>r(e),"aria-label":"Close",children:[i.jsx("span",{className:"sr-only",children:"Close"}),i.jsx(bi,{className:"w-4 h-4"})]})]})}const YL=C.createContext(void 0);function vV({children:e}){const{user:t}=cn(),[n,r]=C.useState(0),s=C.useRef(new Date().toISOString()),[a,o]=C.useState([]),l=()=>{try{const f=window.AudioContext||window.webkitAudioContext;if(!f)return;const p=new f,h=p.createOscillator(),m=p.createGain();h.connect(m),m.connect(p.destination),h.type="sine",h.frequency.setValueAtTime(500,p.currentTime),m.gain.setValueAtTime(.1,p.currentTime),m.gain.exponentialRampToValueAtTime(1e-5,p.currentTime+.5),h.start(),h.stop(p.currentTime+.5)}catch(f){console.error("Audio play failed",f)}};C.useEffect(()=>{if(!t)return;console.log("Starting Social Wall polling...");const f=setInterval(async()=>{var p,h;try{const m=s.current,g=new Date().toISOString(),x=await xe.checkNewSocialPosts(m);if(s.current=g,x.count>0&&(console.log("New posts found:",x.count),r(y=>y+x.count),x.latestPost)){const y=`${(p=x.latestPost.author)==null?void 0:p.firstName} ${((h=x.latestPost.author)==null?void 0:h.lastName)||""}`.trim();x.latestPost.author._id!==t.employeeId&&x.latestPost.author!==t.employeeId&&(c(`New post from ${y}`,"info"),l())}}catch(m){console.error("Polling error",m)}},15e3);return()=>clearInterval(f)},[t]);const c=(f,p)=>{const h=Date.now().toString();o(m=>[...m,{id:h,message:f,type:p}])},d=f=>{o(p=>p.filter(h=>h.id!==f))},u=()=>{r(0)};return i.jsxs(YL.Provider,{value:{unreadSocialCount:n,clearSocialNotifications:u,showToast:c},children:[e,i.jsx("div",{className:"fixed top-24 right-4 z-50 space-y-2",children:a.map(f=>i.jsx(bV,{id:f.id,message:f.message,type:f.type,onClose:d},f.id))})]})}function ux(){const e=C.useContext(YL);if(e===void 0)throw new Error("useNotification must be used within a NotificationProvider");return e}function ZC(e,t){C.useEffect(()=>{const n=r=>{const s=e==null?void 0:e.current;!s||s.contains((r==null?void 0:r.target)||null)||t(r)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[e,t])}function wV(){var E,I,L,O,F,U,W,X;const{user:e,logout:t}=cn(),{theme:n,toggleTheme:r}=wq(),{unreadSocialCount:s,clearSocialNotifications:a}=ux(),[o,l]=C.useState(!1),[c,d]=C.useState(!1),u=Xo(),f=Fa(),p=C.useRef(null);ZC(p,()=>d(!1)),C.useEffect(()=>{if(e!=null&&e.tenantId&&typeof e.tenantId=="object"){const P=e.tenantId.settings;if(P!=null&&P.favicon){const z=document.querySelector("link[rel~='icon']");if(z)z.href=P.favicon;else{const oe=document.createElement("link");oe.rel="icon",oe.href=P.favicon,document.head.appendChild(oe)}}}},[e]);const h=()=>l(!o),m=[{to:"/",icon:s$,label:"Dashboard"},{to:"/employee-management",icon:Pa,label:"Employee Management"},{to:"/roles",icon:Gv,label:"Role Management"},{to:"/settings/documents",icon:yr,label:"Document Management"},{to:"/attendance",icon:Es,label:"Attendance & Time Tracking"},{to:"/audit",icon:hU,label:"Audit Trail"},{to:"/leave",icon:Pu,label:"Leave Management"},{to:"/payroll",icon:_H,label:"Payroll & Finance"},{to:"/projects",icon:Zu,label:"Project Management"},{to:"/organization",icon:LS,label:"Hierarchy"},{to:"/social",icon:xy,label:"Social Wall"},{to:"/superadmin/tenants",icon:Eg,label:"Tenant Management"},{to:"/superadmin/analytics",icon:KH,label:"Platform Analytics"},{to:"/superadmin/settings",icon:h5,label:"Settings"},{to:"/miscellaneous",icon:NL,label:"Miscellaneous"},{to:"/assets",icon:lo,label:"Asset Management"},{to:"/my-assets",icon:lo,label:"My Assets"},{to:"/settings",icon:h5,label:"System Settings"}],g=e?VL(e.role):[],x=e!=null&&e.tenantId&&typeof e.tenantId=="object"&&"limits"in e.tenantId?e.tenantId.limits:null,y=x==null?void 0:x.enabledModules,v={"/attendance":"attendance","/leave":"leave","/payroll":"payroll","/projects":"projects","/social":"social","/assets":"assets","/my-assets":"assets","/employees":"employees","/employee-management":"employees","/roles":"roles","/settings/documents":"documents","/audit":"audit","/organization":"organization","/miscellaneous/feedback":"feedback","/miscellaneous/appreciation":"appreciation","/miscellaneous/email-automation":"email_automation","/tasks":"tasks","/ai-configuration":"ai_chatbot"},j=g.filter(P=>{if((e==null?void 0:e.role)==="Super Admin"||!y)return!0;if(P.to==="/social"&&!y.includes("social"))return!1;const z=v[P.to];if(z&&!y.includes(z))return!1;if((e==null?void 0:e.role)!=="Super Admin"&&(e!=null&&e.accessibleModules)){if(P.to==="/social"&&!e.accessibleModules.includes("social"))return!1;const oe=v[P.to];if((e.role==="Admin"||e.isCompanyAdmin)&&(oe==="roles"||oe==="employees"))return!0;if(oe&&!e.accessibleModules.includes(oe))return!1}return!0}).filter(P=>P.to!=="/social").map(P=>{const z=m.find(oe=>oe.to===P.to);return{...P,icon:(z==null?void 0:z.icon)||hi}}),D=()=>{const P=u.pathname,z={"/":["Dashboard"],"/miscellaneous":["Miscellaneous"],"/miscellaneous/feedback":["Miscellaneous","Feedback"],"/miscellaneous/appreciation":["Miscellaneous","Appreciation"],"/miscellaneous/email-automation":["Miscellaneous","Email Automation"],"/miscellaneous/asset-categories":["Miscellaneous","Asset Categories"],"/assets":["Asset Management","Dashboard"],"/assets/inventory":["Asset Management","Inventory"],"/my-assets":["My Assets"],"/social":["Social Wall"]};if(z[P])return z[P];const oe=j.find(Y=>Y.to===P);return oe?[oe.label]:["Page"]},[T,A]=C.useState(!1),S=C.useRef(null);return ZC(S,()=>A(!1)),i.jsxs("div",{className:"min-h-screen bg-bg-main flex flex-col md:flex-row transition-colors duration-200",children:[i.jsxs("header",{className:"md:hidden bg-bg-sidebar border-b border-border p-4 flex justify-between items-center sticky top-0 z-20",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:h,className:"text-text-primary p-1",children:o?i.jsx(bi,{size:24}):i.jsx(g$,{size:24})}),(I=(E=e==null?void 0:e.tenantId)==null?void 0:E.settings)!=null&&I.logo?i.jsx("img",{src:(e==null?void 0:e.tenantId).settings.logo,alt:"Company Logo",className:"h-8 w-auto object-contain"}):i.jsx("span",{className:"font-bold text-xl text-brand-primary",children:"NeointeractionHR"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[g.some(P=>P.to==="/social")&&(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||((O=(L=e.tenantId.limits)==null?void 0:L.enabledModules)==null?void 0:O.includes("social")))&&i.jsxs("button",{onClick:()=>{a(),f("/social")},className:"p-1 text-text-secondary relative",children:[i.jsx(xy,{size:20}),s>0&&i.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full border border-white"})]}),i.jsx(QC,{}),i.jsxs("div",{className:"relative",ref:S,children:[i.jsx("button",{onClick:()=>A(!T),className:"focus:outline-none",children:i.jsx(uc,{src:e==null?void 0:e.avatar,name:e==null?void 0:e.name,alt:e==null?void 0:e.name,size:"sm"})}),T&&i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-bg-card rounded-lg shadow-lg border border-border py-1 z-50",children:[i.jsxs("div",{className:"px-4 py-2 border-b border-border",children:[i.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:e==null?void 0:e.name}),i.jsx("p",{className:"text-xs text-text-muted truncate",children:e==null?void 0:e.designation})]}),(e==null?void 0:e.role)!=="Super Admin"&&i.jsxs("button",{onClick:()=>{A(!1),f("/profile")},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-bg-hover flex items-center gap-2",children:[i.jsx(HC,{size:16}),"My Profile"]}),i.jsxs("button",{onClick:()=>{t(),A(!1),f("/login",{replace:!0})},className:"w-full px-4 py-2 text-left text-sm text-status-error hover:bg-bg-hover flex items-center gap-2",children:[i.jsx(Tg,{size:16}),"Logout"]})]})]})]})]}),i.jsxs("aside",{className:dc("fixed inset-y-0 left-0 z-50 w-[280px] bg-bg-sidebar border-r border-border transform transition-transform duration-200 ease-in-out md:translate-x-0 md:static md:h-screen flex flex-col",o?"translate-x-0":"-translate-x-full"),children:[i.jsx("div",{className:"p-6 flex items-center justify-between border-b border-border h-16",children:(U=(F=e==null?void 0:e.tenantId)==null?void 0:F.settings)!=null&&U.logo?i.jsx("img",{src:(e==null?void 0:e.tenantId).settings.logo,alt:"Company Logo",className:"h-10 w-auto object-contain"}):i.jsx("span",{className:"font-bold text-2xl text-brand-primary",children:"NeointeractionHR"})}),i.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:j.map(P=>i.jsxs(uH,{to:P.to,onClick:()=>l(!1),className:({isActive:z})=>dc("flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors",z?"bg-brand-primary/10 text-brand-primary":"text-text-secondary hover:bg-bg-hover hover:text-text-primary"),children:[i.jsx(P.icon,{size:20}),P.label]},P.to))}),i.jsxs("div",{className:"p-4 border-t border-border space-y-4",children:[i.jsx("div",{className:"space-y-2"}),i.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-text-secondary hover:text-text-primary text-sm w-full px-4 py-2 rounded-lg hover:bg-bg-hover transition-colors",children:[n==="dark"?i.jsx(J$,{size:18}):i.jsx(k$,{size:18}),i.jsx("span",{children:n==="dark"?"Light Mode":"Dark Mode"})]})]})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>l(!1)}),i.jsxs("div",{className:"flex-1 flex flex-col h-[calc(100vh-64px)] md:h-screen overflow-hidden",children:[i.jsxs("header",{className:"hidden md:flex bg-bg-sidebar border-b border-border h-16 px-8 items-center justify-between sticky top-0 z-10",style:{zIndex:999},children:[i.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-sm",children:[i.jsx("span",{className:"text-text-muted",children:"Home"}),D().map((P,z)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(gf,{size:16}),i.jsx("span",{className:z===D().length-1?"font-medium text-text-primary":"text-text-muted",children:P})]},z))]}),i.jsxs("div",{className:"flex items-center gap-4",children:[g.some(P=>P.to==="/social")&&(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||((X=(W=e.tenantId.limits)==null?void 0:W.enabledModules)==null?void 0:X.includes("social")))&&i.jsx(Nd,{content:"Social Wall",children:i.jsxs("button",{onClick:()=>{a(),f("/social")},className:"relative p-2 text-text-secondary hover:text-brand-primary hover:bg-bg-hover rounded-full transition-colors",children:[i.jsx(xy,{size:20}),s>0&&i.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border border-white"})]})}),i.jsx(QC,{}),i.jsxs("div",{className:"relative",ref:p,children:[i.jsx(Nd,{content:"User Profile",children:i.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-3 pl-4 border-l border-border hover:opacity-80 transition-opacity",children:[i.jsxs("div",{className:"text-right hidden md:block",children:[i.jsx("p",{className:"text-sm font-medium text-text-primary",children:e==null?void 0:e.name}),i.jsx("p",{className:"text-xs text-text-muted",children:e==null?void 0:e.designation})]}),i.jsx(uc,{src:e==null?void 0:e.avatar,name:e==null?void 0:e.name,alt:e==null?void 0:e.name,size:"md"})]})}),c&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-bg-card rounded-lg shadow-lg border border-border py-1 z-20",children:[i.jsxs("div",{className:"px-4 py-2 border-b border-border md:hidden",children:[i.jsx("p",{className:"text-sm font-medium text-text-primary",children:e==null?void 0:e.name}),i.jsx("p",{className:"text-xs text-text-muted",children:e==null?void 0:e.designation})]}),(e==null?void 0:e.role)!=="Super Admin"&&i.jsxs("button",{onClick:()=>{d(!1),f("/profile")},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-bg-hover flex items-center gap-2",children:[i.jsx(HC,{size:16}),"My Profile"]}),i.jsxs("button",{onClick:()=>{t(),d(!1),f("/login",{replace:!0})},className:"w-full px-4 py-2 text-left text-sm text-status-error hover:bg-bg-hover flex items-center gap-2",children:[i.jsx(Tg,{size:16}),"Logout"]})]})})]})]})]}),i.jsx("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:i.jsx("div",{className:"max-w-8xl mx-auto",children:i.jsx(qB,{})})})]}),(e==null?void 0:e.role)!=="Super Admin"&&(e==null?void 0:e.role)!=="Admin"&&i.jsx(gV,{})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function NV(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function od(e,t){return typeof e=="function"?e(t):e}function vi(e,t){return n=>{t.setState(r=>({...r,[e]:od(n,r[e])}))}}function Kv(e){return e instanceof Function}function jV(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function SV(e,t){const n=[],r=s=>{s.forEach(a=>{n.push(a);const o=t(a);o!=null&&o.length&&r(o)})};return r(e),n}function Rt(e,t,n){let r=[],s;return a=>{let o;n.key&&n.debug&&(o=Date.now());const l=e(a);if(!(l.length!==r.length||l.some((u,f)=>r[f]!==u)))return s;r=l;let d;if(n.key&&n.debug&&(d=Date.now()),s=t(...l),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-o)*100)/100,f=Math.round((Date.now()-d)*100)/100,p=f/16,h=(m,g)=>{for(m=String(m);m.length<g;)m=" "+m;return m};console.info(`%c ${h(f,5)} /${h(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,n==null?void 0:n.key)}return s}}function Ot(e,t,n,r){return{debug:()=>{var s;return(s=e==null?void 0:e.debugAll)!=null?s:e[t]},key:!1,onChange:r}}function kV(e,t,n,r){const s=()=>{var o;return(o=a.getValue())!=null?o:e.options.renderFallbackValue},a={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:s,getContext:Rt(()=>[e,n,t,a],(o,l,c,d)=>({table:o,column:l,row:c,cell:d,getValue:d.getValue,renderValue:d.renderValue}),Ot(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(a,n,t,e)},{}),a}function CV(e,t,n,r){var s,a;const l={...e._getDefaultColumnDef(),...t},c=l.accessorKey;let d=(s=(a=l.id)!=null?a:c?typeof String.prototype.replaceAll=="function"?c.replaceAll(".","_"):c.replace(/\./g,"_"):void 0)!=null?s:typeof l.header=="string"?l.header:void 0,u;if(l.accessorFn?u=l.accessorFn:c&&(c.includes(".")?u=p=>{let h=p;for(const g of c.split(".")){var m;h=(m=h)==null?void 0:m[g]}return h}:u=p=>p[l.accessorKey]),!d)throw new Error;let f={id:`${String(d)}`,accessorFn:u,parent:r,depth:n,columnDef:l,columns:[],getFlatColumns:Rt(()=>[!0],()=>{var p;return[f,...(p=f.columns)==null?void 0:p.flatMap(h=>h.getFlatColumns())]},Ot(e.options,"debugColumns")),getLeafColumns:Rt(()=>[e._getOrderColumnsFn()],p=>{var h;if((h=f.columns)!=null&&h.length){let m=f.columns.flatMap(g=>g.getLeafColumns());return p(m)}return[f]},Ot(e.options,"debugColumns"))};for(const p of e._features)p.createColumn==null||p.createColumn(f,e);return f}const Ws="debugHeaders";function eA(e,t,n){var r;let a={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],l=c=>{c.subHeaders&&c.subHeaders.length&&c.subHeaders.map(l),o.push(c)};return l(a),o},getContext:()=>({table:e,header:a,column:t})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(a,e)}),a}const AV={createTable:e=>{e.getHeaderGroups=Rt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,s)=>{var a,o;const l=(a=r==null?void 0:r.map(f=>n.find(p=>p.id===f)).filter(Boolean))!=null?a:[],c=(o=s==null?void 0:s.map(f=>n.find(p=>p.id===f)).filter(Boolean))!=null?o:[],d=n.filter(f=>!(r!=null&&r.includes(f.id))&&!(s!=null&&s.includes(f.id)));return N0(t,[...l,...d,...c],e)},Ot(e.options,Ws)),e.getCenterHeaderGroups=Rt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,s)=>(n=n.filter(a=>!(r!=null&&r.includes(a.id))&&!(s!=null&&s.includes(a.id))),N0(t,n,e,"center")),Ot(e.options,Ws)),e.getLeftHeaderGroups=Rt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var s;const a=(s=r==null?void 0:r.map(o=>n.find(l=>l.id===o)).filter(Boolean))!=null?s:[];return N0(t,a,e,"left")},Ot(e.options,Ws)),e.getRightHeaderGroups=Rt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var s;const a=(s=r==null?void 0:r.map(o=>n.find(l=>l.id===o)).filter(Boolean))!=null?s:[];return N0(t,a,e,"right")},Ot(e.options,Ws)),e.getFooterGroups=Rt(()=>[e.getHeaderGroups()],t=>[...t].reverse(),Ot(e.options,Ws)),e.getLeftFooterGroups=Rt(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),Ot(e.options,Ws)),e.getCenterFooterGroups=Rt(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),Ot(e.options,Ws)),e.getRightFooterGroups=Rt(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),Ot(e.options,Ws)),e.getFlatHeaders=Rt(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ot(e.options,Ws)),e.getLeftFlatHeaders=Rt(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ot(e.options,Ws)),e.getCenterFlatHeaders=Rt(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ot(e.options,Ws)),e.getRightFlatHeaders=Rt(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ot(e.options,Ws)),e.getCenterLeafHeaders=Rt(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ot(e.options,Ws)),e.getLeftLeafHeaders=Rt(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ot(e.options,Ws)),e.getRightLeafHeaders=Rt(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ot(e.options,Ws)),e.getLeafHeaders=Rt(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var s,a,o,l,c,d;return[...(s=(a=t[0])==null?void 0:a.headers)!=null?s:[],...(o=(l=n[0])==null?void 0:l.headers)!=null?o:[],...(c=(d=r[0])==null?void 0:d.headers)!=null?c:[]].map(u=>u.getLeafHeaders()).flat()},Ot(e.options,Ws))}};function N0(e,t,n,r){var s,a;let o=0;const l=function(p,h){h===void 0&&(h=1),o=Math.max(o,h),p.filter(m=>m.getIsVisible()).forEach(m=>{var g;(g=m.columns)!=null&&g.length&&l(m.columns,h+1)},0)};l(e);let c=[];const d=(p,h)=>{const m={depth:h,id:[r,`${h}`].filter(Boolean).join("_"),headers:[]},g=[];p.forEach(x=>{const y=[...g].reverse()[0],v=x.column.depth===m.depth;let N,j=!1;if(v&&x.column.parent?N=x.column.parent:(N=x.column,j=!0),y&&(y==null?void 0:y.column)===N)y.subHeaders.push(x);else{const D=eA(n,N,{id:[r,h,N.id,x==null?void 0:x.id].filter(Boolean).join("_"),isPlaceholder:j,placeholderId:j?`${g.filter(T=>T.column===N).length}`:void 0,depth:h,index:g.length});D.subHeaders.push(x),g.push(D)}m.headers.push(x),x.headerGroup=m}),c.push(m),h>0&&d(g,h-1)},u=t.map((p,h)=>eA(n,p,{depth:o,index:h}));d(u,o-1),c.reverse();const f=p=>p.filter(m=>m.column.getIsVisible()).map(m=>{let g=0,x=0,y=[0];m.subHeaders&&m.subHeaders.length?(y=[],f(m.subHeaders).forEach(N=>{let{colSpan:j,rowSpan:D}=N;g+=j,y.push(D)})):g=1;const v=Math.min(...y);return x=x+v,m.colSpan=g,m.rowSpan=x,{colSpan:g,rowSpan:x}});return f((s=(a=c[0])==null?void 0:a.headers)!=null?s:[]),c}const zS=(e,t,n,r,s,a,o)=>{let l={id:t,index:r,original:n,depth:s,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:c=>{if(l._valuesCache.hasOwnProperty(c))return l._valuesCache[c];const d=e.getColumn(c);if(d!=null&&d.accessorFn)return l._valuesCache[c]=d.accessorFn(l.original,r),l._valuesCache[c]},getUniqueValues:c=>{if(l._uniqueValuesCache.hasOwnProperty(c))return l._uniqueValuesCache[c];const d=e.getColumn(c);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(l._uniqueValuesCache[c]=d.columnDef.getUniqueValues(l.original,r),l._uniqueValuesCache[c]):(l._uniqueValuesCache[c]=[l.getValue(c)],l._uniqueValuesCache[c])},renderValue:c=>{var d;return(d=l.getValue(c))!=null?d:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>SV(l.subRows,c=>c.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let c=[],d=l;for(;;){const u=d.getParentRow();if(!u)break;c.push(u),d=u}return c.reverse()},getAllCells:Rt(()=>[e.getAllLeafColumns()],c=>c.map(d=>kV(e,l,d,d.id)),Ot(e.options,"debugRows")),_getAllCellsByColumnId:Rt(()=>[l.getAllCells()],c=>c.reduce((d,u)=>(d[u.column.id]=u,d),{}),Ot(e.options,"debugRows"))};for(let c=0;c<e._features.length;c++){const d=e._features[c];d==null||d.createRow==null||d.createRow(l,e)}return l},MV={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},WL=(e,t,n)=>{var r,s;const a=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=e.getValue(t))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(a))};WL.autoRemove=e=>uo(e);const GL=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};GL.autoRemove=e=>uo(e);const KL=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};KL.autoRemove=e=>uo(e);const JL=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};JL.autoRemove=e=>uo(e);const XL=(e,t,n)=>!n.some(r=>{var s;return!((s=e.getValue(t))!=null&&s.includes(r))});XL.autoRemove=e=>uo(e)||!(e!=null&&e.length);const QL=(e,t,n)=>n.some(r=>{var s;return(s=e.getValue(t))==null?void 0:s.includes(r)});QL.autoRemove=e=>uo(e)||!(e!=null&&e.length);const ZL=(e,t,n)=>e.getValue(t)===n;ZL.autoRemove=e=>uo(e);const eR=(e,t,n)=>e.getValue(t)==n;eR.autoRemove=e=>uo(e);const BS=(e,t,n)=>{let[r,s]=n;const a=e.getValue(t);return a>=r&&a<=s};BS.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,s=typeof n!="number"?parseFloat(n):n,a=t===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(s)?1/0:s;if(a>o){const l=a;a=o,o=l}return[a,o]};BS.autoRemove=e=>uo(e)||uo(e[0])&&uo(e[1]);const Rl={includesString:WL,includesStringSensitive:GL,equalsString:KL,arrIncludes:JL,arrIncludesAll:XL,arrIncludesSome:QL,equals:ZL,weakEquals:eR,inNumberRange:BS};function uo(e){return e==null||e===""}const DV={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:vi("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);return typeof r=="string"?Rl.includesString:typeof r=="number"?Rl.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Rl.equals:Array.isArray(r)?Rl.arrIncludes:Rl.weakEquals},e.getFilterFn=()=>{var n,r;return Kv(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:Rl[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,s;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((s=t.options.enableFilters)!=null?s:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const s=e.getFilterFn(),a=r==null?void 0:r.find(u=>u.id===e.id),o=od(n,a?a.value:void 0);if(tA(s,o,e)){var l;return(l=r==null?void 0:r.filter(u=>u.id!==e.id))!=null?l:[]}const c={id:e.id,value:o};if(a){var d;return(d=r==null?void 0:r.map(u=>u.id===e.id?c:u))!=null?d:[]}return r!=null&&r.length?[...r,c]:[c]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=s=>{var a;return(a=od(t,s))==null?void 0:a.filter(o=>{const l=n.find(c=>c.id===o.id);if(l){const c=l.getFilterFn();if(tA(c,o.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function tA(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const EV=(e,t,n)=>n.reduce((r,s)=>{const a=s.getValue(e);return r+(typeof a=="number"?a:0)},0),_V=(e,t,n)=>{let r;return n.forEach(s=>{const a=s.getValue(e);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},TV=(e,t,n)=>{let r;return n.forEach(s=>{const a=s.getValue(e);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},LV=(e,t,n)=>{let r,s;return n.forEach(a=>{const o=a.getValue(e);o!=null&&(r===void 0?o>=o&&(r=s=o):(r>o&&(r=o),s<o&&(s=o)))}),[r,s]},RV=(e,t)=>{let n=0,r=0;if(t.forEach(s=>{let a=s.getValue(e);a!=null&&(a=+a)>=a&&(++n,r+=a)}),n)return r/n},OV=(e,t)=>{if(!t.length)return;const n=t.map(a=>a.getValue(e));if(!jV(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((a,o)=>a-o);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},PV=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),IV=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,FV=(e,t)=>t.length,W2={sum:EV,min:_V,max:TV,extent:LV,mean:RV,median:OV,unique:PV,uniqueCount:IV,count:FV},zV={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:vi("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((r=t.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);if(typeof r=="number")return W2.sum;if(Object.prototype.toString.call(r)==="[object Date]")return W2.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return Kv(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:W2[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var s;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function BV(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(a=>!t.includes(a.id));return n==="remove"?r:[...t.map(a=>e.find(o=>o.id===a)).filter(Boolean),...r]}const HV={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:vi("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Rt(n=>[Xm(t,n)],n=>n.findIndex(r=>r.id===e.id),Ot(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=Xm(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const s=Xm(t,n);return((r=s[s.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=Rt(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>s=>{let a=[];if(!(t!=null&&t.length))a=s;else{const o=[...t],l=[...s];for(;l.length&&o.length;){const c=o.shift(),d=l.findIndex(u=>u.id===c);d>-1&&a.push(l.splice(d,1)[0])}a=[...a,...l]}return BV(a,n,r)},Ot(e.options,"debugTable"))}},G2=()=>({left:[],right:[]}),UV={getInitialState:e=>({columnPinning:G2(),...e}),getDefaultOptions:e=>({onColumnPinningChange:vi("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(s=>s.id).filter(Boolean);t.setColumnPinning(s=>{var a,o;if(n==="right"){var l,c;return{left:((l=s==null?void 0:s.left)!=null?l:[]).filter(f=>!(r!=null&&r.includes(f))),right:[...((c=s==null?void 0:s.right)!=null?c:[]).filter(f=>!(r!=null&&r.includes(f))),...r]}}if(n==="left"){var d,u;return{left:[...((d=s==null?void 0:s.left)!=null?d:[]).filter(f=>!(r!=null&&r.includes(f))),...r],right:((u=s==null?void 0:s.right)!=null?u:[]).filter(f=>!(r!=null&&r.includes(f)))}}return{left:((a=s==null?void 0:s.left)!=null?a:[]).filter(f=>!(r!=null&&r.includes(f))),right:((o=s==null?void 0:s.right)!=null?o:[]).filter(f=>!(r!=null&&r.includes(f)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var s,a,o;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((a=(o=t.options.enableColumnPinning)!=null?o:t.options.enablePinning)!=null?a:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(l=>l.id),{left:r,right:s}=t.getState().columnPinning,a=n.some(l=>r==null?void 0:r.includes(l)),o=n.some(l=>s==null?void 0:s.includes(l));return a?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,r;const s=e.getIsPinned();return s?(n=(r=t.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Rt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,s)=>{const a=[...r??[],...s??[]];return n.filter(o=>!a.includes(o.column.id))},Ot(t.options,"debugRows")),e.getLeftVisibleCells=Rt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(a=>n.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),Ot(t.options,"debugRows")),e.getRightVisibleCells=Rt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(a=>n.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),Ot(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?G2():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:G2())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var s,a;return!!((s=r.left)!=null&&s.length||(a=r.right)!=null&&a.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=Rt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(s=>s.id===r)).filter(Boolean),Ot(e.options,"debugColumns")),e.getRightLeafColumns=Rt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(s=>s.id===r)).filter(Boolean),Ot(e.options,"debugColumns")),e.getCenterLeafColumns=Rt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const s=[...n??[],...r??[]];return t.filter(a=>!s.includes(a.id))},Ot(e.options,"debugColumns"))}};function $V(e){return e||(typeof document<"u"?document:null)}const j0={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},K2=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),qV={getDefaultColumnDef:()=>j0,getInitialState:e=>({columnSizing:{},columnSizingInfo:K2(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:vi("columnSizing",e),onColumnSizingInfoChange:vi("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,s;const a=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:j0.minSize,(r=a??e.columnDef.size)!=null?r:j0.size),(s=e.columnDef.maxSize)!=null?s:j0.maxSize)},e.getStart=Rt(n=>[n,Xm(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((s,a)=>s+a.getSize(),0),Ot(t.options,"debugColumns")),e.getAfter=Rt(n=>[n,Xm(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((s,a)=>s+a.getSize(),0),Ot(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...s}=n;return s})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var a;n+=(a=s.column.getSize())!=null?a:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),s=r==null?void 0:r.getCanResize();return a=>{if(!r||!s||(a.persist==null||a.persist(),J2(a)&&a.touches&&a.touches.length>1))return;const o=e.getSize(),l=e?e.getLeafHeaders().map(y=>[y.column.id,y.column.getSize()]):[[r.id,r.getSize()]],c=J2(a)?Math.round(a.touches[0].clientX):a.clientX,d={},u=(y,v)=>{typeof v=="number"&&(t.setColumnSizingInfo(N=>{var j,D;const T=t.options.columnResizeDirection==="rtl"?-1:1,A=(v-((j=N==null?void 0:N.startOffset)!=null?j:0))*T,S=Math.max(A/((D=N==null?void 0:N.startSize)!=null?D:0),-.999999);return N.columnSizingStart.forEach(E=>{let[I,L]=E;d[I]=Math.round(Math.max(L+L*S,0)*100)/100}),{...N,deltaOffset:A,deltaPercentage:S}}),(t.options.columnResizeMode==="onChange"||y==="end")&&t.setColumnSizing(N=>({...N,...d})))},f=y=>u("move",y),p=y=>{u("end",y),t.setColumnSizingInfo(v=>({...v,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},h=$V(n),m={moveHandler:y=>f(y.clientX),upHandler:y=>{h==null||h.removeEventListener("mousemove",m.moveHandler),h==null||h.removeEventListener("mouseup",m.upHandler),p(y.clientX)}},g={moveHandler:y=>(y.cancelable&&(y.preventDefault(),y.stopPropagation()),f(y.touches[0].clientX),!1),upHandler:y=>{var v;h==null||h.removeEventListener("touchmove",g.moveHandler),h==null||h.removeEventListener("touchend",g.upHandler),y.cancelable&&(y.preventDefault(),y.stopPropagation()),p((v=y.touches[0])==null?void 0:v.clientX)}},x=VV()?{passive:!1}:!1;J2(a)?(h==null||h.addEventListener("touchmove",g.moveHandler,x),h==null||h.addEventListener("touchend",g.upHandler,x)):(h==null||h.addEventListener("mousemove",m.moveHandler,x),h==null||h.addEventListener("mouseup",m.upHandler,x)),t.setColumnSizingInfo(y=>({...y,startOffset:c,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?K2():(n=e.initialState.columnSizingInfo)!=null?n:K2())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0}}};let S0=null;function VV(){if(typeof S0=="boolean")return S0;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return S0=e,S0}function J2(e){return e.type==="touchstart"}const YV={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:vi("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const s=e.columns;return(n=s.length?s.some(a=>a.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Rt(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),Ot(t.options,"debugRows")),e.getVisibleCells=Rt(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],Ot(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>Rt(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),Ot(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((s,a)=>({...s,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Xm(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const WV={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},GV={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:vi("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,s,a;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((s=t.options.enableFilters)!=null?s:!0)&&((a=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?a:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Rl.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return Kv(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:Rl[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},KV={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:vi("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,s;if(!t){e._queue(()=>{t=!0});return}if((r=(s=e.options.autoResetAll)!=null?s:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var s,a;e.setExpanded(r?{}:(s=(a=e.initialState)==null?void 0:a.expanded)!=null?s:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(a=>{const o=a.split(".");r=Math.max(r,o.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var s;const a=r===!0?!0:!!(r!=null&&r[e.id]);let o={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(l=>{o[l]=!0}):o=r,n=(s=n)!=null?s:!a,!a&&n)return{...o,[e.id]:!0};if(a&&!n){const{[e.id]:l,...c}=o;return c}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r!=null&&r[e.id])},e.getCanExpand=()=>{var n,r,s;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((s=e.subRows)!=null&&s.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},m5=0,g5=10,X2=()=>({pageIndex:m5,pageSize:g5}),JV={getInitialState:e=>({...e,pagination:{...X2(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:vi("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,s;if(!t){e._queue(()=>{t=!0});return}if((r=(s=e.options.autoResetAll)!=null?s:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const s=a=>od(r,a);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(s)},e.resetPagination=r=>{var s;e.setPagination(r?X2():(s=e.initialState.pagination)!=null?s:X2())},e.setPageIndex=r=>{e.setPagination(s=>{let a=od(r,s.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return a=Math.max(0,Math.min(a,o)),{...s,pageIndex:a}})},e.resetPageIndex=r=>{var s,a;e.setPageIndex(r?m5:(s=(a=e.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?s:m5)},e.resetPageSize=r=>{var s,a;e.setPageSize(r?g5:(s=(a=e.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?s:g5)},e.setPageSize=r=>{e.setPagination(s=>{const a=Math.max(1,od(r,s.pageSize)),o=s.pageSize*s.pageIndex,l=Math.floor(o/a);return{...s,pageIndex:l,pageSize:a}})},e.setPageCount=r=>e.setPagination(s=>{var a;let o=od(r,(a=e.options.pageCount)!=null?a:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...s,pageCount:o}}),e.getPageOptions=Rt(()=>[e.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((a,o)=>o)),s},Ot(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,s=e.getPageCount();return s===-1?!0:s===0?!1:r<s-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},Q2=()=>({top:[],bottom:[]}),XV={getInitialState:e=>({rowPinning:Q2(),...e}),getDefaultOptions:e=>({onRowPinningChange:vi("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,s)=>{const a=r?e.getLeafRows().map(c=>{let{id:d}=c;return d}):[],o=s?e.getParentRows().map(c=>{let{id:d}=c;return d}):[],l=new Set([...o,e.id,...a]);t.setRowPinning(c=>{var d,u;if(n==="bottom"){var f,p;return{top:((f=c==null?void 0:c.top)!=null?f:[]).filter(g=>!(l!=null&&l.has(g))),bottom:[...((p=c==null?void 0:c.bottom)!=null?p:[]).filter(g=>!(l!=null&&l.has(g))),...Array.from(l)]}}if(n==="top"){var h,m;return{top:[...((h=c==null?void 0:c.top)!=null?h:[]).filter(g=>!(l!=null&&l.has(g))),...Array.from(l)],bottom:((m=c==null?void 0:c.bottom)!=null?m:[]).filter(g=>!(l!=null&&l.has(g)))}}return{top:((d=c==null?void 0:c.top)!=null?d:[]).filter(g=>!(l!=null&&l.has(g))),bottom:((u=c==null?void 0:c.bottom)!=null?u:[]).filter(g=>!(l!=null&&l.has(g)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=t.options;return typeof r=="function"?r(e):(n=r??s)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:s}=t.getState().rowPinning,a=n.some(l=>r==null?void 0:r.includes(l)),o=n.some(l=>s==null?void 0:s.includes(l));return a?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const s=e.getIsPinned();if(!s)return-1;const a=(n=s==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(o=>{let{id:l}=o;return l});return(r=a==null?void 0:a.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?Q2():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:Q2())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var s,a;return!!((s=r.top)!=null&&s.length||(a=r.bottom)!=null&&a.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=(t,n,r)=>{var s;return((s=e.options.keepPinnedRows)==null||s?(n??[]).map(o=>{const l=e.getRow(o,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(o=>t.find(l=>l.id===o))).filter(Boolean).map(o=>({...o,position:r}))},e.getTopRows=Rt(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),Ot(e.options,"debugRows")),e.getBottomRows=Rt(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),Ot(e.options,"debugRows")),e.getCenterRows=Rt(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const s=new Set([...n??[],...r??[]]);return t.filter(a=>!s.has(a.id))},Ot(e.options,"debugRows"))}},QV={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:vi("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},s=e.getPreGroupedRowModel().flatRows;return t?s.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):s.forEach(a=>{delete r[a.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),s={...n};return e.getRowModel().rows.forEach(a=>{x5(s,a.id,r,!0,e)}),s}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Rt(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Z2(e,n):{rows:[],flatRows:[],rowsById:{}},Ot(e.options,"debugTable")),e.getFilteredSelectedRowModel=Rt(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Z2(e,n):{rows:[],flatRows:[],rowsById:{}},Ot(e.options,"debugTable")),e.getGroupedSelectedRowModel=Rt(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Z2(e,n):{rows:[],flatRows:[],rowsById:{}},Ot(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(s=>!n[s.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const s=e.getIsSelected();t.setRowSelection(a=>{var o;if(n=typeof n<"u"?n:!s,e.getCanSelect()&&s===n)return a;const l={...a};return x5(l,e.id,n,(o=r==null?void 0:r.selectChildren)!=null?o:!0,t),l})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return HS(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return y5(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return y5(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var s;n&&e.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},x5=(e,t,n,r,s)=>{var a;const o=s.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),o.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(a=o.subRows)!=null&&a.length&&o.getCanSelectSubRows()&&o.subRows.forEach(l=>x5(e,l.id,n,r,s))};function Z2(e,t){const n=e.getState().rowSelection,r=[],s={},a=function(o,l){return o.map(c=>{var d;const u=HS(c,n);if(u&&(r.push(c),s[c.id]=c),(d=c.subRows)!=null&&d.length&&(c={...c,subRows:a(c.subRows)}),u)return c}).filter(Boolean)};return{rows:a(t.rows),flatRows:r,rowsById:s}}function HS(e,t){var n;return(n=t[e.id])!=null?n:!1}function y5(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let s=!0,a=!1;return e.subRows.forEach(o=>{if(!(a&&!s)&&(o.getCanSelect()&&(HS(o,t)?a=!0:s=!1),o.subRows&&o.subRows.length)){const l=y5(o,t);l==="all"?a=!0:(l==="some"&&(a=!0),s=!1)}}),s?"all":a?"some":!1}const b5=/([0-9]+)/gm,ZV=(e,t,n)=>tR(Rd(e.getValue(n)).toLowerCase(),Rd(t.getValue(n)).toLowerCase()),eY=(e,t,n)=>tR(Rd(e.getValue(n)),Rd(t.getValue(n))),tY=(e,t,n)=>US(Rd(e.getValue(n)).toLowerCase(),Rd(t.getValue(n)).toLowerCase()),nY=(e,t,n)=>US(Rd(e.getValue(n)),Rd(t.getValue(n))),rY=(e,t,n)=>{const r=e.getValue(n),s=t.getValue(n);return r>s?1:r<s?-1:0},sY=(e,t,n)=>US(e.getValue(n),t.getValue(n));function US(e,t){return e===t?0:e>t?1:-1}function Rd(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function tR(e,t){const n=e.split(b5).filter(Boolean),r=t.split(b5).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),a=r.shift(),o=parseInt(s,10),l=parseInt(a,10),c=[o,l].sort();if(isNaN(c[0])){if(s>a)return 1;if(a>s)return-1;continue}if(isNaN(c[1]))return isNaN(o)?-1:1;if(o>l)return 1;if(l>o)return-1}return n.length-r.length}const hm={alphanumeric:ZV,alphanumericCaseSensitive:eY,text:tY,textCaseSensitive:nY,datetime:rY,basic:sY},aY={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:vi("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const a=s==null?void 0:s.getValue(e.id);if(Object.prototype.toString.call(a)==="[object Date]")return hm.datetime;if(typeof a=="string"&&(r=!0,a.split(b5).length>1))return hm.alphanumeric}return r?hm.text:hm.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return Kv(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:hm[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const s=e.getNextSortingOrder(),a=typeof n<"u"&&n!==null;t.setSorting(o=>{const l=o==null?void 0:o.find(h=>h.id===e.id),c=o==null?void 0:o.findIndex(h=>h.id===e.id);let d=[],u,f=a?n:s==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&r?l?u="toggle":u="add":o!=null&&o.length&&c!==o.length-1?u="replace":l?u="toggle":u="replace",u==="toggle"&&(a||s||(u="remove")),u==="add"){var p;d=[...o,{id:e.id,desc:f}],d.splice(0,d.length-((p=t.options.maxMultiSortColCount)!=null?p:Number.MAX_SAFE_INTEGER))}else u==="toggle"?d=o.map(h=>h.id===e.id?{...h,desc:f}:h):u==="remove"?d=o.filter(h=>h.id!==e.id):d=[{id:e.id,desc:f}];return d})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,s;const a=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==a&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(s=t.options.enableMultiRemove)!=null)||s)?!1:o==="desc"?"asc":"desc":a},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(s=>s.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(s=>s.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},iY=[AV,YV,HV,UV,MV,DV,WV,GV,aY,zV,KV,JV,XV,QV,qV];function oY(e){var t,n;const r=[...iY,...(t=e._features)!=null?t:[]];let s={_features:r};const a=s._features.reduce((p,h)=>Object.assign(p,h.getDefaultOptions==null?void 0:h.getDefaultOptions(s)),{}),o=p=>s.options.mergeOptions?s.options.mergeOptions(a,p):{...a,...p};let c={...{},...(n=e.initialState)!=null?n:{}};s._features.forEach(p=>{var h;c=(h=p.getInitialState==null?void 0:p.getInitialState(c))!=null?h:c});const d=[];let u=!1;const f={_features:r,options:{...a,...e},initialState:c,_queue:p=>{d.push(p),u||(u=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();u=!1}).catch(h=>setTimeout(()=>{throw h})))},reset:()=>{s.setState(s.initialState)},setOptions:p=>{const h=od(p,s.options);s.options=o(h)},getState:()=>s.options.state,setState:p=>{s.options.onStateChange==null||s.options.onStateChange(p)},_getRowId:(p,h,m)=>{var g;return(g=s.options.getRowId==null?void 0:s.options.getRowId(p,h,m))!=null?g:`${m?[m.id,h].join("."):h}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(p,h)=>{let m=(h?s.getPrePaginationRowModel():s.getRowModel()).rowsById[p];if(!m&&(m=s.getCoreRowModel().rowsById[p],!m))throw new Error;return m},_getDefaultColumnDef:Rt(()=>[s.options.defaultColumn],p=>{var h;return p=(h=p)!=null?h:{},{header:m=>{const g=m.header.column.columnDef;return g.accessorKey?g.accessorKey:g.accessorFn?g.id:null},cell:m=>{var g,x;return(g=(x=m.renderValue())==null||x.toString==null?void 0:x.toString())!=null?g:null},...s._features.reduce((m,g)=>Object.assign(m,g.getDefaultColumnDef==null?void 0:g.getDefaultColumnDef()),{}),...p}},Ot(e,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:Rt(()=>[s._getColumnDefs()],p=>{const h=function(m,g,x){return x===void 0&&(x=0),m.map(y=>{const v=CV(s,y,x,g),N=y;return v.columns=N.columns?h(N.columns,v,x+1):[],v})};return h(p)},Ot(e,"debugColumns")),getAllFlatColumns:Rt(()=>[s.getAllColumns()],p=>p.flatMap(h=>h.getFlatColumns()),Ot(e,"debugColumns")),_getAllFlatColumnsById:Rt(()=>[s.getAllFlatColumns()],p=>p.reduce((h,m)=>(h[m.id]=m,h),{}),Ot(e,"debugColumns")),getAllLeafColumns:Rt(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(p,h)=>{let m=p.flatMap(g=>g.getLeafColumns());return h(m)},Ot(e,"debugColumns")),getColumn:p=>s._getAllFlatColumnsById()[p]};Object.assign(s,f);for(let p=0;p<s._features.length;p++){const h=s._features[p];h==null||h.createTable==null||h.createTable(s)}return s}function lY(){return e=>Rt(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,a,o){a===void 0&&(a=0);const l=[];for(let d=0;d<s.length;d++){const u=zS(e,e._getRowId(s[d],d,o),s[d],d,a,void 0,o==null?void 0:o.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,l.push(u),e.options.getSubRows){var c;u.originalSubRows=e.options.getSubRows(s[d],d),(c=u.originalSubRows)!=null&&c.length&&(u.subRows=r(u.originalSubRows,a+1,u))}}return l};return n.rows=r(t),n},Ot(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function cY(e){const t=[],n=r=>{var s;t.push(r),(s=r.subRows)!=null&&s.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function dY(e,t,n){return n.options.filterFromLeafRows?uY(e,t,n):fY(e,t,n)}function uY(e,t,n){var r;const s=[],a={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(c,d){d===void 0&&(d=0);const u=[];for(let p=0;p<c.length;p++){var f;let h=c[p];const m=zS(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);if(m.columnFilters=h.columnFilters,(f=h.subRows)!=null&&f.length&&d<o){if(m.subRows=l(h.subRows,d+1),h=m,t(h)&&!m.subRows.length){u.push(h),a[h.id]=h,s.push(h);continue}if(t(h)||m.subRows.length){u.push(h),a[h.id]=h,s.push(h);continue}}else h=m,t(h)&&(u.push(h),a[h.id]=h,s.push(h))}return u};return{rows:l(e),flatRows:s,rowsById:a}}function fY(e,t,n){var r;const s=[],a={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(c,d){d===void 0&&(d=0);const u=[];for(let p=0;p<c.length;p++){let h=c[p];if(t(h)){var f;if((f=h.subRows)!=null&&f.length&&d<o){const g=zS(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);g.subRows=l(h.subRows,d+1),h=g}u.push(h),s.push(h),a[h.id]=h}}return u};return{rows:l(e),flatRows:s,rowsById:a}}function hY(){return e=>Rt(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let p=0;p<t.flatRows.length;p++)t.flatRows[p].columnFilters={},t.flatRows[p].columnFiltersMeta={};return t}const s=[],a=[];(n??[]).forEach(p=>{var h;const m=e.getColumn(p.id);if(!m)return;const g=m.getFilterFn();g&&s.push({id:p.id,filterFn:g,resolvedValue:(h=g.resolveFilterValue==null?void 0:g.resolveFilterValue(p.value))!=null?h:p.value})});const o=(n??[]).map(p=>p.id),l=e.getGlobalFilterFn(),c=e.getAllLeafColumns().filter(p=>p.getCanGlobalFilter());r&&l&&c.length&&(o.push("__global__"),c.forEach(p=>{var h;a.push({id:p.id,filterFn:l,resolvedValue:(h=l.resolveFilterValue==null?void 0:l.resolveFilterValue(r))!=null?h:r})}));let d,u;for(let p=0;p<t.flatRows.length;p++){const h=t.flatRows[p];if(h.columnFilters={},s.length)for(let m=0;m<s.length;m++){d=s[m];const g=d.id;h.columnFilters[g]=d.filterFn(h,g,d.resolvedValue,x=>{h.columnFiltersMeta[g]=x})}if(a.length){for(let m=0;m<a.length;m++){u=a[m];const g=u.id;if(u.filterFn(h,g,u.resolvedValue,x=>{h.columnFiltersMeta[g]=x})){h.columnFilters.__global__=!0;break}}h.columnFilters.__global__!==!0&&(h.columnFilters.__global__=!1)}}const f=p=>{for(let h=0;h<o.length;h++)if(p.columnFilters[o[h]]===!1)return!1;return!0};return dY(t.rows,f,e)},Ot(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function pY(e){return t=>Rt(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:s,pageIndex:a}=n;let{rows:o,flatRows:l,rowsById:c}=r;const d=s*a,u=d+s;o=o.slice(d,u);let f;t.options.paginateExpandedRows?f={rows:o,flatRows:l,rowsById:c}:f=cY({rows:o,flatRows:l,rowsById:c}),f.flatRows=[];const p=h=>{f.flatRows.push(h),h.subRows.length&&h.subRows.forEach(p)};return f.rows.forEach(p),f},Ot(t.options,"debugTable"))}function mY(){return e=>Rt(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,s=[],a=r.filter(c=>{var d;return(d=e.getColumn(c.id))==null?void 0:d.getCanSort()}),o={};a.forEach(c=>{const d=e.getColumn(c.id);d&&(o[c.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const l=c=>{const d=c.map(u=>({...u}));return d.sort((u,f)=>{for(let h=0;h<a.length;h+=1){var p;const m=a[h],g=o[m.id],x=g.sortUndefined,y=(p=m==null?void 0:m.desc)!=null?p:!1;let v=0;if(x){const N=u.getValue(m.id),j=f.getValue(m.id),D=N===void 0,T=j===void 0;if(D||T){if(x==="first")return D?-1:1;if(x==="last")return D?1:-1;v=D&&T?0:D?x:-x}}if(v===0&&(v=g.sortingFn(u,f,m.id)),v!==0)return y&&(v*=-1),g.invertSorting&&(v*=-1),v}return u.index-f.index}),d.forEach(u=>{var f;s.push(u),(f=u.subRows)!=null&&f.length&&(u.subRows=l(u.subRows))}),d};return{rows:l(n.rows),flatRows:s,rowsById:n.rowsById}},Ot(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function nA(e,t){return e?gY(e)?C.createElement(e,t):e:null}function gY(e){return xY(e)||typeof e=="function"||yY(e)}function xY(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function yY(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function bY(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=C.useState(()=>({current:oY(t)})),[r,s]=C.useState(()=>n.current.initialState);return n.current.setOptions(a=>({...a,...e,state:{...r,...e.state},onStateChange:o=>{s(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}function vY(...e){return IS(Er(e))}function le({className:e,...t}){return i.jsx("div",{className:vY("animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",e),...t})}function Qo({columns:e,data:t,isLoading:n,emptyMessage:r="No data found.",onRowClick:s,enableSearch:a=!0,pageSize:o=6}){const[l,c]=C.useState([]),[d,u]=C.useState(""),f=NV(),p=C.useMemo(()=>e.map(m=>{const g=m.accessorKey||m.searchKey||m.header;return f.accessor(x=>m.accessorKey?x[m.accessorKey]:m.searchKey?x[m.searchKey]:null,{id:g,header:m.header,enableSorting:m.enableSorting??!!m.accessorKey,enableGlobalFilter:!!(m.accessorKey||m.searchKey),cell:x=>m.render?m.render(x.row.original):x.getValue()})}),[e]),h=bY({data:t,columns:p,state:{sorting:l,globalFilter:d},initialState:{pagination:{pageSize:o}},onSortingChange:c,onGlobalFilterChange:u,getCoreRowModel:lY(),getSortedRowModel:mY(),getFilteredRowModel:hY(),getPaginationRowModel:pY()});return n?i.jsxs("div",{className:"bg-bg-card rounded-lg border border-border overflow-hidden",children:[a&&i.jsx("div",{className:"p-4 border-b border-border",children:i.jsx(le,{className:"h-9 w-full max-w-sm rounded-lg"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{className:"bg-bg-main",children:i.jsx("tr",{className:"border-b border-border",children:e.map((m,g)=>i.jsx("th",{className:"px-6 py-4",children:i.jsx(le,{className:"h-4 w-24"})},g))})}),i.jsx("tbody",{className:"divide-y divide-border",children:[1,2,3,4,5].map(m=>i.jsx("tr",{children:e.map((g,x)=>i.jsx("td",{className:"px-6 py-3",children:i.jsx(le,{className:"h-4 w-full"})},x))},m))})]})})]}):i.jsxs("div",{className:"bg-bg-card rounded-lg border border-border overflow-hidden",children:[a&&i.jsx("div",{className:"p-4 border-b border-border",children:i.jsxs("div",{className:"relative max-w-sm",children:[i.jsx(bf,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",size:18}),i.jsx("input",{type:"text",value:d??"",onChange:m=>u(m.target.value),placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 text-sm border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 bg-bg-main text-text-primary placeholder:text-text-muted transition-all"})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{className:"bg-bg-main text-text-secondary text-xs uppercase font-semibold",children:h.getHeaderGroups().map(m=>i.jsx("tr",{children:m.headers.map(g=>{const x=e.find(y=>y.accessorKey===g.id||y.header===g.id);return i.jsx("th",{className:`px-6 py-4 cursor-pointer select-none group ${(x==null?void 0:x.className)||""}`,onClick:g.column.getToggleSortingHandler(),children:i.jsxs("div",{className:"flex items-center gap-1",children:[nA(g.column.columnDef.header,g.getContext()),{asc:i.jsx(U2,{size:14,className:"opacity-100 rotate-180"}),desc:i.jsx(U2,{size:14,className:"opacity-100"})}[g.column.getIsSorted()]??(g.column.getCanSort()&&i.jsx(U2,{size:14,className:"opacity-0 group-hover:opacity-50 transition-opacity"}))]})},g.id)})},m.id))}),i.jsx("tbody",{className:"divide-y divide-border",children:h.getRowModel().rows.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:e.length,className:"px-6 py-8 text-center text-text-muted",children:r})}):h.getRowModel().rows.map(m=>i.jsx("tr",{className:`hover:bg-bg-hover transition-colors ${s?"cursor-pointer":""}`,onClick:()=>s&&s(m.original),children:m.getVisibleCells().map(g=>i.jsx("td",{className:"px-6 py-3 text-text-primary",children:nA(g.column.columnDef.cell,g.getContext())},g.id))},m.id))})]})}),h.getPageCount()>1&&i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-border bg-bg-main/50",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"p-1 rounded hover:bg-bg-hover text-text-secondary disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>h.previousPage(),disabled:!h.getCanPreviousPage(),children:i.jsx(gc,{size:18})}),i.jsxs("span",{className:"text-sm text-text-secondary",children:["Page ",h.getState().pagination.pageIndex+1," of"," ",h.getPageCount()]}),i.jsx("button",{className:"p-1 rounded hover:bg-bg-hover text-text-secondary disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>h.nextPage(),disabled:!h.getCanNextPage(),children:i.jsx(gf,{size:18})})]}),i.jsxs("div",{className:"text-sm text-text-muted",children:["Showing ",h.getRowModel().rows.length," rows"]})]})]})}function Hn({isOpen:e,onClose:t,title:n,children:r,footer:s,maxWidth:a="max-w-md",hideHeader:o=!1,padding:l="p-6",bodyClassName:c}){return e?pp.createPortal(i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] backdrop-blur-sm",children:i.jsxs("div",{className:`bg-bg-card rounded-xl shadow-2xl w-full ${a} mx-4 animate-in fade-in zoom-in-95 duration-300 ease-out border border-border flex flex-col max-h-[90vh]`,children:[!o&&i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border shrink-0",children:[i.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:n}),i.jsx("button",{onClick:t,className:"text-text-muted hover:text-text-primary p-1 rounded hover:bg-bg-hover transition-colors",children:i.jsx(bi,{size:20})})]}),i.jsx("div",{className:c||`${l} space-y-4 overflow-y-auto`,children:r}),s&&i.jsx("div",{className:"p-3 bg-bg-main/50 rounded-b-xl shrink-0",children:s})]})}),document.body):null}function ma({isOpen:e,onClose:t,onConfirm:n,title:r,message:s,confirmText:a="Confirm",cancelText:o="Cancel",variant:l="danger",isLoading:c=!1,showCancel:d=!0}){const u=()=>{switch(l){case"danger":return i.jsx(lq,{size:28,className:"text-status-error"});case"warning":return i.jsx(bs,{size:28,className:"text-status-warning"});case"success":return i.jsx(Yr,{size:28,className:"text-status-success"});case"info":default:return i.jsx(_S,{size:28,className:"text-brand-primary"})}},f=()=>{switch(l){case"danger":return"bg-status-error/10";case"warning":return"bg-status-warning/10";case"success":return"bg-status-success/10";case"info":default:return"bg-brand-primary/10"}},p=()=>{switch(l){case"danger":return"bg-status-error hover:bg-status-error/90";case"warning":return"bg-status-warning hover:bg-status-warning/90";case"success":return"bg-status-success hover:bg-status-success/90";case"info":default:return"bg-brand-primary hover:bg-brand-primary/90"}};return i.jsx(Hn,{isOpen:e,onClose:t,title:r,maxWidth:"max-w-sm",hideHeader:!0,padding:"p-4",footer:i.jsxs("div",{className:"flex justify-center gap-4 w-full",children:[d&&i.jsx("button",{onClick:t,className:"px-3 py-1.5 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",disabled:c,children:o}),i.jsx("button",{onClick:n,className:`px-3 py-1.5 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 ${p()}`,disabled:c,children:c?"Processing...":a})]}),children:i.jsxs("div",{className:"flex flex-col items-center text-center p-0",children:[i.jsx("div",{className:`p-3 rounded-full mb-3 ${f()} animate-in zoom-in-50 duration-300`,children:u()}),i.jsx("h3",{className:"text-lg font-bold text-text-primary mb-1",children:r}),i.jsx("p",{className:"text-base text-text-secondary leading-relaxed",children:s})]})})}function Jv({size:e=24,className:t,variant:n="primary"}){const r={primary:"text-brand-primary",secondary:"text-text-secondary",white:"text-white",muted:"text-text-muted"};return i.jsx(Hr,{size:e,className:dc("animate-spin",r[n],t)})}const at=({children:e,className:t="",variant:n="primary",size:r="md",isLoading:s=!1,leftIcon:a,rightIcon:o,disabled:l,...c})=>{const d="inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"bg-brand-primary text-white hover:bg-brand-secondary focus:ring-brand-primary shadow-lg shadow-brand-primary/20",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 text-gray-700 focus:ring-brand-primary",ghost:"bg-transparent hover:bg-gray-100 text-gray-700 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-500 text-white hover:bg-yellow-600 focus:ring-yellow-500"},f={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return i.jsxs("button",{className:`${d} ${u[n]} ${f[r]} ${t}`,disabled:l||s,...c,children:[s&&i.jsx(Jv,{size:16,className:"mr-2",variant:"white"}),!s&&a&&i.jsx("span",{className:"mr-2",children:a}),e,!s&&o&&i.jsx("span",{className:"ml-2",children:o})]})};function Iu({className:e,icon:t=Xl,...n}){const[r,s]=C.useState(!1);return i.jsxs("div",{className:"relative",children:[t&&i.jsx(t,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted pointer-events-none",size:18}),i.jsx("input",{type:r?"text":"password",className:dc("w-full rounded-lg border bg-bg-card text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:border-transparent focus:ring-brand-primary h-[38px]",t?"pl-10":"px-3","pr-10 py-2 text-sm",e),...n}),i.jsx("button",{type:"button",onClick:()=>s(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors focus:outline-none",tabIndex:-1,children:r?i.jsx(AU,{size:18}):i.jsx(Yv,{size:18})})]})}function pm(...e){return IS(Er(e))}const Gt=({label:e,options:t,value:n,onChange:r,error:s,helperText:a,className:o="",placeholder:l="Select an option",disabled:c=!1,required:d=!1,id:u})=>{const[f,p]=C.useState(!1),h=C.useRef(null),m=t.find(y=>y.value===n);C.useEffect(()=>{const y=v=>{h.current&&!h.current.contains(v.target)&&p(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]);const g=y=>{r(y),p(!1)},x=()=>{c||p(!f)};return i.jsxs("div",{className:pm("w-full",o),ref:h,children:[e&&i.jsxs("label",{htmlFor:u,className:"block text-sm font-medium text-text-secondary mb-1",children:[e," ",d&&i.jsx("span",{className:"text-status-error",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{onClick:x,className:pm("w-full rounded-lg border bg-bg-card px-3 py-2 text-sm cursor-pointer flex items-center justify-between transition-colors h-[38px]",s?"border-status-error focus:ring-status-error":"border-border hover:border-text-muted focus:ring-brand-primary",f&&"ring-2 ring-brand-primary/20 border-brand-primary",c&&"bg-bg-main text-text-muted cursor-not-allowed opacity-70"),children:[i.jsx("span",{className:pm("block truncate text-text-primary",!m&&"text-text-muted"),children:m?m.label:l}),i.jsx(wL,{size:16,className:pm("text-text-muted transition-transform duration-200",f&&"transform rotate-180")})]}),f&&i.jsx("div",{className:"absolute z-50 w-full mt-1 bg-bg-card border border-border rounded-lg shadow-lg max-h-60 overflow-auto animate-in fade-in zoom-in-95 duration-100",children:t.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-text-muted text-center",children:"No options available"}):i.jsx("ul",{className:"py-1",children:t.map(y=>i.jsxs("li",{onClick:()=>g(y.value),className:pm("px-3 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-bg-hover transition-colors text-text-primary",y.value===n&&"bg-brand-primary/5 text-brand-primary font-medium"),children:[i.jsx("span",{className:"truncate",children:y.label}),y.value===n&&i.jsx(Jl,{size:14})]},y.value))})})]}),s&&i.jsx("p",{className:"mt-1 text-xs text-status-error",children:s}),!s&&a&&i.jsx("p",{className:"mt-1 text-xs text-text-muted",children:a})]})},nR=6048e5,wY=864e5,Xv=6e4,Qv=36e5,NY=1e3,k0=43200,rA=1440,sA=Symbol.for("constructDateFrom");function _n(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&sA in e?e[sA](t):e instanceof Date?new e.constructor(t):new Date(t)}function mt(e,t){return _n(t||e,e)}function fo(e,t,n){const r=mt(e,n==null?void 0:n.in);return isNaN(t)?_n((n==null?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function ho(e,t,n){const r=mt(e,n==null?void 0:n.in);if(isNaN(t))return _n(e,NaN);if(!t)return r;const s=r.getDate(),a=_n(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const o=a.getDate();return s>=o?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}function rR(e,t,n){return _n(e,+mt(e)+t)}function jY(e,t,n){return rR(e,t*Qv)}let SY={};function $d(){return SY}function fc(e,t){var l,c,d,u;const n=$d(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,s=mt(e,t==null?void 0:t.in),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Xh(e,t){return fc(e,{...t,weekStartsOn:1})}function sR(e,t){const n=mt(e,t==null?void 0:t.in),r=n.getFullYear(),s=_n(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Xh(s),o=_n(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=Xh(o);return n.getTime()>=a.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function Qh(e){const t=mt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function xo(e,...t){const n=_n.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function tf(e,t){const n=mt(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Zh(e,t,n){const[r,s]=xo(n==null?void 0:n.in,e,t),a=tf(r),o=tf(s),l=+a-Qh(a),c=+o-Qh(o);return Math.round((l-c)/wY)}function kY(e,t){const n=sR(e,t),r=_n(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Xh(r)}function Rg(e,t,n){const r=mt(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*Xv),r}function $S(e,t,n){return ho(e,t*3,n)}function CY(e,t,n){return rR(e,t*1e3)}function xb(e,t,n){return fo(e,t*7,n)}function Ql(e,t,n){return ho(e,t*12,n)}function aA(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=_n.bind(null,s));const a=mt(s,r);(!n||n<a||isNaN(+a))&&(n=a)}),_n(r,n||NaN)}function iA(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=_n.bind(null,s));const a=mt(s,r);(!n||n>a||isNaN(+a))&&(n=a)}),_n(r,n||NaN)}function yy(e,t){const n=+mt(e)-+mt(t);return n<0?-1:n>0?1:n}function AY(e){return _n(e,Date.now())}function MY(e,t,n){const[r,s]=xo(n==null?void 0:n.in,e,t);return+tf(r)==+tf(s)}function Zl(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Og(e){return!(!Zl(e)&&typeof e!="number"||isNaN(+mt(e)))}function Pg(e,t,n){const[r,s]=xo(n==null?void 0:n.in,e,t),a=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return a*12+o}function ld(e,t){const n=mt(e,t==null?void 0:t.in);return Math.trunc(n.getMonth()/3)+1}function yb(e,t,n){const[r,s]=xo(n==null?void 0:n.in,e,t),a=r.getFullYear()-s.getFullYear(),o=ld(r)-ld(s);return a*4+o}function bb(e,t,n){const[r,s]=xo(n==null?void 0:n.in,e,t);return r.getFullYear()-s.getFullYear()}function DY(e,t,n){const[r,s]=xo(n==null?void 0:n.in,e,t),a=oA(r,s),o=Math.abs(Zh(r,s));r.setDate(r.getDate()-a*o);const l=+(oA(r,s)===-a),c=a*(o-l);return c===0?0:c}function oA(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function EY(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function _Y(e,t){return+mt(e)-+mt(t)}function qS(e,t){const n=mt(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function VS(e,t){const n=mt(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function TY(e,t){const n=mt(e,t==null?void 0:t.in);return+qS(n,t)==+VS(n,t)}function LY(e,t,n){const[r,s,a]=xo(n==null?void 0:n.in,e,e,t),o=yy(s,a),l=Math.abs(Pg(s,a));if(l<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*l);let c=yy(s,a)===-o;TY(r)&&l===1&&yy(r,a)===1&&(c=!1);const d=o*(l-+c);return d===0?0:d}function RY(e,t,n){const r=_Y(e,t)/1e3;return EY(n==null?void 0:n.roundingMethod)(r)}function v5(e,t){const n=mt(e,t==null?void 0:t.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}function aR(e,t){const n=mt(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function iR(e,t){const n=mt(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Zv(e,t){const n=mt(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function OY(e,t){var l,c;const n=$d(),r=n.weekStartsOn??((c=(l=n.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,s=mt(e,t==null?void 0:t.in),a=s.getDay(),o=(a<r?-7:0)+6-(a-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const PY={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IY=(e,t,n)=>{let r;const s=PY[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ew(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const FY={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zY={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},BY={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},HY={date:ew({formats:FY,defaultWidth:"full"}),time:ew({formats:zY,defaultWidth:"full"}),dateTime:ew({formats:BY,defaultWidth:"full"})},UY={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$Y=(e,t,n,r)=>UY[e];function mm(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const qY={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},VY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},YY={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WY={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},GY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},KY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},JY=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},XY={ordinalNumber:JY,era:mm({values:qY,defaultWidth:"wide"}),quarter:mm({values:VY,defaultWidth:"wide",argumentCallback:e=>e-1}),month:mm({values:YY,defaultWidth:"wide"}),day:mm({values:WY,defaultWidth:"wide"}),dayPeriod:mm({values:GY,defaultWidth:"wide",formattingValues:KY,defaultFormattingWidth:"wide"})};function gm(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?ZY(l,f=>f.test(o)):QY(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function QY(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function ZY(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function eW(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const tW=/^(\d+)(th|st|nd|rd)?/i,nW=/\d+/i,rW={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sW={any:[/^b/i,/^(a|c)/i]},aW={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},iW={any:[/1/i,/2/i,/3/i,/4/i]},oW={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lW={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cW={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dW={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},uW={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fW={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hW={ordinalNumber:eW({matchPattern:tW,parsePattern:nW,valueCallback:e=>parseInt(e,10)}),era:gm({matchPatterns:rW,defaultMatchWidth:"wide",parsePatterns:sW,defaultParseWidth:"any"}),quarter:gm({matchPatterns:aW,defaultMatchWidth:"wide",parsePatterns:iW,defaultParseWidth:"any",valueCallback:e=>e+1}),month:gm({matchPatterns:oW,defaultMatchWidth:"wide",parsePatterns:lW,defaultParseWidth:"any"}),day:gm({matchPatterns:cW,defaultMatchWidth:"wide",parsePatterns:dW,defaultParseWidth:"any"}),dayPeriod:gm({matchPatterns:uW,defaultMatchWidth:"any",parsePatterns:fW,defaultParseWidth:"any"})},YS={code:"en-US",formatDistance:IY,formatLong:HY,formatRelative:$Y,localize:XY,match:hW,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pW(e,t){const n=mt(e,t==null?void 0:t.in);return Zh(n,Zv(n))+1}function WS(e,t){const n=mt(e,t==null?void 0:t.in),r=+Xh(n)-+kY(n);return Math.round(r/nR)+1}function GS(e,t){var u,f,p,h;const n=mt(e,t==null?void 0:t.in),r=n.getFullYear(),s=$d(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((h=(p=s.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,o=_n((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=fc(o,t),c=_n((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=fc(c,t);return+n>=+l?r+1:+n>=+d?r:r-1}function mW(e,t){var l,c,d,u;const n=$d(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,s=GS(e,t),a=_n((t==null?void 0:t.in)||e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),fc(a,t)}function oR(e,t){const n=mt(e,t==null?void 0:t.in),r=+fc(n,t)-+mW(n,t);return Math.round(r/nR)+1}function Pn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Pc={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Pn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Pn(n+1,2)},d(e,t){return Pn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Pn(e.getHours()%12||12,t.length)},H(e,t){return Pn(e.getHours(),t.length)},m(e,t){return Pn(e.getMinutes(),t.length)},s(e,t){return Pn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Pn(s,t.length)}},zf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lA={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Pc.y(e,t)},Y:function(e,t,n,r){const s=GS(e,r),a=s>0?s:1-s;if(t==="YY"){const o=a%100;return Pn(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):Pn(a,t.length)},R:function(e,t){const n=sR(e);return Pn(n,t.length)},u:function(e,t){const n=e.getFullYear();return Pn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Pn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Pn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Pc.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Pn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=oR(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Pn(s,t.length)},I:function(e,t,n){const r=WS(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Pn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Pc.d(e,t)},D:function(e,t,n){const r=pW(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Pn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Pn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Pn(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Pn(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=zf.noon:r===0?s=zf.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=zf.evening:r>=12?s=zf.afternoon:r>=4?s=zf.morning:s=zf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Pc.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Pc.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Pn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Pn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Pc.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Pc.s(e,t)},S:function(e,t){return Pc.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return dA(r);case"XXXX":case"XX":return gu(r);case"XXXXX":case"XXX":default:return gu(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return dA(r);case"xxxx":case"xx":return gu(r);case"xxxxx":case"xxx":default:return gu(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+cA(r,":");case"OOOO":default:return"GMT"+gu(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+cA(r,":");case"zzzz":default:return"GMT"+gu(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Pn(r,t.length)},T:function(e,t,n){return Pn(+e,t.length)}};function cA(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+t+Pn(a,2)}function dA(e,t){return e%60===0?(e>0?"-":"+")+Pn(Math.abs(e)/60,2):gu(e,t)}function gu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Pn(Math.trunc(r/60),2),a=Pn(r%60,2);return n+s+t+a}const uA=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},lR=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},gW=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return uA(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",uA(r,t)).replace("{{time}}",lR(s,t))},w5={p:lR,P:gW},xW=/^D+$/,yW=/^Y+$/,bW=["D","DD","YY","YYYY"];function vW(e){return xW.test(e)}function wW(e){return yW.test(e)}function NW(e,t,n){const r=jW(e,t,n);if(console.warn(r),bW.includes(e))throw new RangeError(r)}function jW(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const SW=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kW=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CW=/^'([^]*?)'?$/,AW=/''/g,MW=/[a-zA-Z]/;function qi(e,t,n){var u,f,p,h,m,g,x,y;const r=$d(),s=(n==null?void 0:n.locale)??r.locale??YS,a=(n==null?void 0:n.firstWeekContainsDate)??((f=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(p=r.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((y=(x=r.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,l=mt(e,n==null?void 0:n.in);if(!Og(l))throw new RangeError("Invalid time value");let c=t.match(kW).map(v=>{const N=v[0];if(N==="p"||N==="P"){const j=w5[N];return j(v,s.formatLong)}return v}).join("").match(SW).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const N=v[0];if(N==="'")return{isToken:!1,value:DW(v)};if(lA[N])return{isToken:!0,value:v};if(N.match(MW))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const N=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&wW(N)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&vW(N))&&NW(N,t,String(e));const j=lA[N[0]];return j(l,N,s.localize,d)}).join("")}function DW(e){const t=e.match(CW);return t?t[1].replace(AW,"'"):e}function EW(e,t,n){const r=$d(),s=(n==null?void 0:n.locale)??r.locale??YS,a=2520,o=yy(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[c,d]=xo(n==null?void 0:n.in,...o>0?[t,e]:[e,t]),u=RY(d,c),f=(Qh(d)-Qh(c))/1e3,p=Math.round((u-f)/60);let h;if(p<2)return n!=null&&n.includeSeconds?u<5?s.formatDistance("lessThanXSeconds",5,l):u<10?s.formatDistance("lessThanXSeconds",10,l):u<20?s.formatDistance("lessThanXSeconds",20,l):u<40?s.formatDistance("halfAMinute",0,l):u<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):p===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<rA){const m=Math.round(p/60);return s.formatDistance("aboutXHours",m,l)}else{if(p<a)return s.formatDistance("xDays",1,l);if(p<k0){const m=Math.round(p/rA);return s.formatDistance("xDays",m,l)}else if(p<k0*2)return h=Math.round(p/k0),s.formatDistance("aboutXMonths",h,l)}if(h=LY(d,c),h<12){const m=Math.round(p/k0);return s.formatDistance("xMonths",m,l)}else{const m=h%12,g=Math.trunc(h/12);return m<3?s.formatDistance("aboutXYears",g,l):m<9?s.formatDistance("overXYears",g,l):s.formatDistance("almostXYears",g+1,l)}}function cR(e,t){return EW(e,AY(e),t)}function fA(e,t){return mt(e,t==null?void 0:t.in).getDate()}function _W(e,t){return mt(e,t==null?void 0:t.in).getDay()}function TW(e,t){const n=mt(e,t==null?void 0:t.in),r=n.getFullYear(),s=n.getMonth(),a=_n(n,0);return a.setFullYear(r,s+1,0),a.setHours(0,0,0,0),a.getDate()}function LW(){return Object.assign({},$d())}function Zs(e,t){return mt(e,t==null?void 0:t.in).getHours()}function RW(e,t){const n=mt(e,t==null?void 0:t.in).getDay();return n===0?7:n}function ea(e,t){return mt(e,t==null?void 0:t.in).getMinutes()}function _a(e,t){return mt(e,t==null?void 0:t.in).getMonth()}function jd(e){return mt(e).getSeconds()}function N5(e){return+mt(e)}function hn(e,t){return mt(e,t==null?void 0:t.in).getFullYear()}function ec(e,t){return+mt(e)>+mt(t)}function Bo(e,t){return+mt(e)<+mt(t)}function OW(e,t){return+mt(e)==+mt(t)}function PW(e,t){const n=IW(t)?new t(0):_n(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}function IW(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const FW=10;class dR{constructor(){Ke(this,"subPriority",0)}validate(t,n){return!0}}class zW extends dR{constructor(t,n,r,s,a){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=s,a&&(this.subPriority=a)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class BW extends dR{constructor(n,r){super();Ke(this,"priority",FW);Ke(this,"subPriority",-1);this.context=n||(s=>_n(r,s))}set(n,r){return r.timestampIsSet?n:_n(n,PW(n,this.context))}}class An{run(t,n,r,s){const a=this.parse(t,n,r,s);return a?{setter:new zW(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(t,n,r){return!0}}class HW extends An{constructor(){super(...arguments);Ke(this,"priority",140);Ke(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const Ur={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Oo={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function $r(e,t){return e&&{value:t(e.value),rest:e.rest}}function xr(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Po(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*Qv+a*Xv+o*NY),rest:t.slice(n[0].length)}}function uR(e){return xr(Ur.anyDigitsSigned,e)}function _r(e,t){switch(e){case 1:return xr(Ur.singleDigit,t);case 2:return xr(Ur.twoDigits,t);case 3:return xr(Ur.threeDigits,t);case 4:return xr(Ur.fourDigits,t);default:return xr(new RegExp("^\\d{1,"+e+"}"),t)}}function vb(e,t){switch(e){case 1:return xr(Ur.singleDigitSigned,t);case 2:return xr(Ur.twoDigitsSigned,t);case 3:return xr(Ur.threeDigitsSigned,t);case 4:return xr(Ur.fourDigitsSigned,t);default:return xr(new RegExp("^-?\\d{1,"+e+"}"),t)}}function KS(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function fR(e,t){const n=t>0,r=n?t:1-t;let s;if(r<=50)s=e||100;else{const a=r+50,o=Math.trunc(a/100)*100,l=e>=a%100;s=e+o-(l?100:0)}return n?s:1-s}function hR(e){return e%400===0||e%4===0&&e%100!==0}class UW extends An{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const a=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return $r(_r(4,n),a);case"yo":return $r(s.ordinalNumber(n,{unit:"year"}),a);default:return $r(_r(r.length,n),a)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const a=n.getFullYear();if(s.isTwoDigitYear){const l=fR(s.year,a);return n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class $W extends An{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const a=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return $r(_r(4,n),a);case"Yo":return $r(s.ordinalNumber(n,{unit:"year"}),a);default:return $r(_r(r.length,n),a)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,a){const o=GS(n,a);if(s.isTwoDigitYear){const c=fR(s.year,o);return n.setFullYear(c,0,a.firstWeekContainsDate),n.setHours(0,0,0,0),fc(n,a)}const l=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(l,0,a.firstWeekContainsDate),n.setHours(0,0,0,0),fc(n,a)}}class qW extends An{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return vb(r==="R"?4:r.length,n)}set(n,r,s){const a=_n(n,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),Xh(a)}}class VW extends An{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return vb(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class YW extends An{constructor(){super(...arguments);Ke(this,"priority",120);Ke(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return _r(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class WW extends An{constructor(){super(...arguments);Ke(this,"priority",120);Ke(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return _r(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class GW extends An{constructor(){super(...arguments);Ke(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ke(this,"priority",110)}parse(n,r,s){const a=o=>o-1;switch(r){case"M":return $r(xr(Ur.month,n),a);case"MM":return $r(_r(2,n),a);case"Mo":return $r(s.ordinalNumber(n,{unit:"month"}),a);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class KW extends An{constructor(){super(...arguments);Ke(this,"priority",110);Ke(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const a=o=>o-1;switch(r){case"L":return $r(xr(Ur.month,n),a);case"LL":return $r(_r(2,n),a);case"Lo":return $r(s.ordinalNumber(n,{unit:"month"}),a);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function JW(e,t,n){const r=mt(e,n==null?void 0:n.in),s=oR(r,n)-t;return r.setDate(r.getDate()-s*7),mt(r,n==null?void 0:n.in)}class XW extends An{constructor(){super(...arguments);Ke(this,"priority",100);Ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return xr(Ur.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return _r(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,a){return fc(JW(n,s,a),a)}}function QW(e,t,n){const r=mt(e,n==null?void 0:n.in),s=WS(r,n)-t;return r.setDate(r.getDate()-s*7),r}class ZW extends An{constructor(){super(...arguments);Ke(this,"priority",100);Ke(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return xr(Ur.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return _r(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return Xh(QW(n,s))}}const eG=[31,28,31,30,31,30,31,31,30,31,30,31],tG=[31,29,31,30,31,30,31,31,30,31,30,31];class nG extends An{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"subPriority",1);Ke(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return xr(Ur.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return _r(r.length,n)}}validate(n,r){const s=n.getFullYear(),a=hR(s),o=n.getMonth();return a?r>=1&&r<=tG[o]:r>=1&&r<=eG[o]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class rG extends An{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"subpriority",1);Ke(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return xr(Ur.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return _r(r.length,n)}}validate(n,r){const s=n.getFullYear();return hR(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function JS(e,t,n){var f,p,h,m;const r=$d(),s=(n==null?void 0:n.weekStartsOn)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,a=mt(e,n==null?void 0:n.in),o=a.getDay(),c=(t%7+7)%7,d=7-s,u=t<0||t>6?t-(o+d)%7:(c+d)%7-(o+d)%7;return fo(a,u,n)}class sG extends An{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,a){return n=JS(n,s,a),n.setHours(0,0,0,0),n}}class aG extends An{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,a){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return $r(_r(r.length,n),o);case"eo":return $r(s.ordinalNumber(n,{unit:"day"}),o);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,a){return n=JS(n,s,a),n.setHours(0,0,0,0),n}}class iG extends An{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,a){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return $r(_r(r.length,n),o);case"co":return $r(s.ordinalNumber(n,{unit:"day"}),o);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,a){return n=JS(n,s,a),n.setHours(0,0,0,0),n}}function oG(e,t,n){const r=mt(e,n==null?void 0:n.in),s=RW(r,n),a=t-s;return fo(r,a,n)}class lG extends An{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const a=o=>o===0?7:o;switch(r){case"i":case"ii":return _r(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return $r(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),a);case"iiiii":return $r(s.day(n,{width:"narrow",context:"formatting"}),a);case"iiiiii":return $r(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),a);case"iiii":default:return $r(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),a)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=oG(n,s),n.setHours(0,0,0,0),n}}class cG extends An{constructor(){super(...arguments);Ke(this,"priority",80);Ke(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(KS(s),0,0,0),n}}class dG extends An{constructor(){super(...arguments);Ke(this,"priority",80);Ke(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(KS(s),0,0,0),n}}class uG extends An{constructor(){super(...arguments);Ke(this,"priority",80);Ke(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(KS(s),0,0,0),n}}class fG extends An{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return xr(Ur.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return _r(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const a=n.getHours()>=12;return a&&s<12?n.setHours(s+12,0,0,0):!a&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class hG extends An{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return xr(Ur.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return _r(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class pG extends An{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return xr(Ur.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return _r(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class mG extends An{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return xr(Ur.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return _r(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const a=s<=24?s%24:s;return n.setHours(a,0,0,0),n}}class gG extends An{constructor(){super(...arguments);Ke(this,"priority",60);Ke(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return xr(Ur.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return _r(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class xG extends An{constructor(){super(...arguments);Ke(this,"priority",50);Ke(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return xr(Ur.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return _r(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class yG extends An{constructor(){super(...arguments);Ke(this,"priority",30);Ke(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=a=>Math.trunc(a*Math.pow(10,-r.length+3));return $r(_r(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class bG extends An{constructor(){super(...arguments);Ke(this,"priority",10);Ke(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Po(Oo.basicOptionalMinutes,n);case"XX":return Po(Oo.basic,n);case"XXXX":return Po(Oo.basicOptionalSeconds,n);case"XXXXX":return Po(Oo.extendedOptionalSeconds,n);case"XXX":default:return Po(Oo.extended,n)}}set(n,r,s){return r.timestampIsSet?n:_n(n,n.getTime()-Qh(n)-s)}}class vG extends An{constructor(){super(...arguments);Ke(this,"priority",10);Ke(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Po(Oo.basicOptionalMinutes,n);case"xx":return Po(Oo.basic,n);case"xxxx":return Po(Oo.basicOptionalSeconds,n);case"xxxxx":return Po(Oo.extendedOptionalSeconds,n);case"xxx":default:return Po(Oo.extended,n)}}set(n,r,s){return r.timestampIsSet?n:_n(n,n.getTime()-Qh(n)-s)}}class wG extends An{constructor(){super(...arguments);Ke(this,"priority",40);Ke(this,"incompatibleTokens","*")}parse(n){return uR(n)}set(n,r,s){return[_n(n,s*1e3),{timestampIsSet:!0}]}}class NG extends An{constructor(){super(...arguments);Ke(this,"priority",20);Ke(this,"incompatibleTokens","*")}parse(n){return uR(n)}set(n,r,s){return[_n(n,s),{timestampIsSet:!0}]}}const jG={G:new HW,y:new UW,Y:new $W,R:new qW,u:new VW,Q:new YW,q:new WW,M:new GW,L:new KW,w:new XW,I:new ZW,d:new nG,D:new rG,E:new sG,e:new aG,c:new iG,i:new lG,a:new cG,b:new dG,B:new uG,h:new fG,H:new hG,K:new pG,k:new mG,m:new gG,s:new xG,S:new yG,X:new bG,x:new vG,t:new wG,T:new NG},SG=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kG=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CG=/^'([^]*?)'?$/,AG=/''/g,MG=/\S/,DG=/[a-zA-Z]/;function EG(e,t,n,r){var x,y,v,N,j,D,T,A;const s=()=>_n((r==null?void 0:r.in)||n,NaN),a=LW(),o=(r==null?void 0:r.locale)??a.locale??YS,l=(r==null?void 0:r.firstWeekContainsDate)??((y=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:y.firstWeekContainsDate)??a.firstWeekContainsDate??((N=(v=a.locale)==null?void 0:v.options)==null?void 0:N.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((D=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:D.weekStartsOn)??a.weekStartsOn??((A=(T=a.locale)==null?void 0:T.options)==null?void 0:A.weekStartsOn)??0;if(!t)return e?s():mt(n,r==null?void 0:r.in);const d={firstWeekContainsDate:l,weekStartsOn:c,locale:o},u=[new BW(r==null?void 0:r.in,n)],f=t.match(kG).map(S=>{const E=S[0];if(E in w5){const I=w5[E];return I(S,o.formatLong)}return S}).join("").match(SG),p=[];for(let S of f){const E=S[0],I=jG[E];if(I){const{incompatibleTokens:L}=I;if(Array.isArray(L)){const F=p.find(U=>L.includes(U.token)||U.token===E);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${S}\` at the same time`)}else if(I.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${S}\` and any other token at the same time`);p.push({token:E,fullToken:S});const O=I.run(e,S,o.match,d);if(!O)return s();u.push(O.setter),e=O.rest}else{if(E.match(DG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");if(S==="''"?S="'":E==="'"&&(S=_G(S)),e.indexOf(S)===0)e=e.slice(S.length);else return s()}}if(e.length>0&&MG.test(e))return s();const h=u.map(S=>S.priority).sort((S,E)=>E-S).filter((S,E,I)=>I.indexOf(S)===E).map(S=>u.filter(E=>E.priority===S).sort((E,I)=>I.subPriority-E.subPriority)).map(S=>S[0]);let m=mt(n,r==null?void 0:r.in);if(isNaN(+m))return s();const g={};for(const S of h){if(!S.validate(m,d))return s();const E=S.set(m,g,d);Array.isArray(E)?(m=E[0],Object.assign(g,E[1])):m=E}return m}function _G(e){return e.match(CG)[1].replace(AG,"'")}function TG(e,t,n){const[r,s]=xo(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function LG(e,t,n){const[r,s]=xo(n==null?void 0:n.in,e,t);return+v5(r)==+v5(s)}function RG(e,t,n){const[r,s]=xo(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()}function Ig(e,t,n){const r=+mt(e,n==null?void 0:n.in),[s,a]=[+mt(t.start,n==null?void 0:n.in),+mt(t.end,n==null?void 0:n.in)].sort((o,l)=>o-l);return r>=s&&r<=a}function OG(e,t,n){return fo(e,-1,n)}function j5(e,t){const n=()=>_n(t==null?void 0:t.in,NaN),s=zG(e);let a;if(s.date){const d=BG(s.date,2);a=HG(d.restDateString,d.year)}if(!a||isNaN(+a))return n();const o=+a;let l=0,c;if(s.time&&(l=UG(s.time),isNaN(l)))return n();if(s.timezone){if(c=$G(s.timezone),isNaN(c))return n()}else{const d=new Date(o+l),u=mt(0,t==null?void 0:t.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return mt(o+l+c,t==null?void 0:t.in)}const C0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},PG=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,IG=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,FG=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zG(e){const t={},n=e.split(C0.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],C0.timeZoneDelimiter.test(t.date)&&(t.date=e.split(C0.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const s=C0.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function BG(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?s:a*100,restDateString:e.slice((r[1]||r[2]).length)}}function HG(e,t){if(t===null)return new Date(NaN);const n=e.match(PG);if(!n)return new Date(NaN);const r=!!n[4],s=xm(n[1]),a=xm(n[2])-1,o=xm(n[3]),l=xm(n[4]),c=xm(n[5])-1;if(r)return GG(t,l,c)?qG(t,l,c):new Date(NaN);{const d=new Date(0);return!YG(t,a,o)||!WG(t,s)?new Date(NaN):(d.setUTCFullYear(t,a,Math.max(s,o)),d)}}function xm(e){return e?parseInt(e):1}function UG(e){const t=e.match(IG);if(!t)return NaN;const n=tw(t[1]),r=tw(t[2]),s=tw(t[3]);return KG(n,r,s)?n*Qv+r*Xv+s*1e3:NaN}function tw(e){return e&&parseFloat(e.replace(",","."))||0}function $G(e){if(e==="Z")return 0;const t=e.match(FG);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return JG(r,s)?n*(r*Qv+s*Xv):NaN}function qG(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,a=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}const VG=[31,null,31,30,31,30,31,31,30,31,30,31];function pR(e){return e%400===0||e%4===0&&e%100!==0}function YG(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(VG[t]||(pR(e)?29:28))}function WG(e,t){return t>=1&&t<=(pR(e)?366:365)}function GG(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function KG(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function JG(e,t){return t>=0&&t<=59}function ei(e,t,n){const r=mt(e,n==null?void 0:n.in),s=r.getFullYear(),a=r.getDate(),o=_n(e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const l=TW(o);return r.setMonth(t,Math.min(a,l)),r}function by(e,t,n){const r=mt(e,n==null?void 0:n.in);return r.setHours(t),r}function vy(e,t,n){const r=mt(e,n==null?void 0:n.in);return r.setMinutes(t),r}function Jf(e,t,n){const r=mt(e,n==null?void 0:n.in),s=Math.trunc(r.getMonth()/3)+1,a=t-s;return ei(r,r.getMonth()+a*3)}function wy(e,t,n){const r=mt(e,n==null?void 0:n.in);return r.setSeconds(t),r}function Lo(e,t,n){const r=mt(e,n==null?void 0:n.in);return isNaN(+r)?_n(e,NaN):(r.setFullYear(t),r)}function Fu(e,t,n){return ho(e,-t,n)}function mR(e,t,n){return $S(e,-1,n)}function hA(e,t,n){return xb(e,-1,n)}function ep(e,t,n){return Ql(e,-t,n)}function e1(){return typeof window<"u"}function Ap(e){return gR(e)?(e.nodeName||"").toLowerCase():"#document"}function pi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Zo(e){var t;return(t=(gR(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function gR(e){return e1()?e instanceof Node||e instanceof pi(e).Node:!1}function fa(e){return e1()?e instanceof Element||e instanceof pi(e).Element:!1}function Vo(e){return e1()?e instanceof HTMLElement||e instanceof pi(e).HTMLElement:!1}function pA(e){return!e1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pi(e).ShadowRoot}const XG=new Set(["inline","contents"]);function fx(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Vi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!XG.has(s)}const QG=new Set(["table","td","th"]);function ZG(e){return QG.has(Ap(e))}const eK=[":popover-open",":modal"];function t1(e){return eK.some(t=>{try{return e.matches(t)}catch{return!1}})}const tK=["transform","translate","scale","rotate","perspective"],nK=["transform","translate","scale","rotate","perspective","filter"],rK=["paint","layout","strict","content"];function XS(e){const t=QS(),n=fa(e)?Vi(e):e;return tK.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||nK.some(r=>(n.willChange||"").includes(r))||rK.some(r=>(n.contain||"").includes(r))}function sK(e){let t=Od(e);for(;Vo(t)&&!tp(t);){if(XS(t))return t;if(t1(t))return null;t=Od(t)}return null}function QS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const aK=new Set(["html","body","#document"]);function tp(e){return aK.has(Ap(e))}function Vi(e){return pi(e).getComputedStyle(e)}function n1(e){return fa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Od(e){if(Ap(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pA(e)&&e.host||Zo(e);return pA(t)?t.host:t}function xR(e){const t=Od(e);return tp(t)?e.ownerDocument?e.ownerDocument.body:e.body:Vo(t)&&fx(t)?t:xR(t)}function Fg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=xR(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),o=pi(s);if(a){const l=S5(o);return t.concat(o,o.visualViewport||[],fx(s)?s:[],l&&n?Fg(l):[])}return t.concat(s,Fg(s,[],n))}function S5(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const np=Math.min,zu=Math.max,wb=Math.round,A0=Math.floor,qo=e=>({x:e,y:e}),iK={left:"right",right:"left",bottom:"top",top:"bottom"},oK={start:"end",end:"start"};function lK(e,t,n){return zu(e,np(t,n))}function r1(e,t){return typeof e=="function"?e(t):e}function rp(e){return e.split("-")[0]}function hx(e){return e.split("-")[1]}function cK(e){return e==="x"?"y":"x"}function ZS(e){return e==="y"?"height":"width"}const dK=new Set(["top","bottom"]);function Su(e){return dK.has(rp(e))?"y":"x"}function ek(e){return cK(Su(e))}function uK(e,t,n){n===void 0&&(n=!1);const r=hx(e),s=ek(e),a=ZS(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Nb(o)),[o,Nb(o)]}function fK(e){const t=Nb(e);return[k5(e),t,k5(t)]}function k5(e){return e.replace(/start|end/g,t=>oK[t])}const mA=["left","right"],gA=["right","left"],hK=["top","bottom"],pK=["bottom","top"];function mK(e,t,n){switch(e){case"top":case"bottom":return n?t?gA:mA:t?mA:gA;case"left":case"right":return t?hK:pK;default:return[]}}function gK(e,t,n,r){const s=hx(e);let a=mK(rp(e),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(k5)))),a}function Nb(e){return e.replace(/left|right|bottom|top/g,t=>iK[t])}function xK(e){return{top:0,right:0,bottom:0,left:0,...e}}function yR(e){return typeof e!="number"?xK(e):{top:e,right:e,bottom:e,left:e}}function jb(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}var yK=typeof document<"u",bK=function(){},Sb=yK?C.useLayoutEffect:bK;const vK={...Aj},wK=vK.useInsertionEffect,NK=wK||(e=>e());function jK(e){const t=C.useRef(()=>{});return NK(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function xA(e,t,n){let{reference:r,floating:s}=e;const a=Su(t),o=ek(t),l=ZS(o),c=rp(t),d=a==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let h;switch(c){case"top":h={x:u,y:r.y-s.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-s.width,y:f};break;default:h={x:r.x,y:r.y}}switch(hx(t)){case"start":h[o]-=p*(n&&d?-1:1);break;case"end":h[o]+=p*(n&&d?-1:1);break}return h}const SK=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:f}=xA(d,r,c),p=r,h={},m=0;for(let g=0;g<l.length;g++){const{name:x,fn:y}=l[g],{x:v,y:N,data:j,reset:D}=await y({x:u,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:h,rects:d,platform:o,elements:{reference:e,floating:t}});u=v??u,f=N??f,h={...h,[x]:{...h[x],...j}},D&&m<=50&&(m++,typeof D=="object"&&(D.placement&&(p=D.placement),D.rects&&(d=D.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):D.rects),{x:u,y:f}=xA(d,p,c)),g=-1)}return{x:u,y:f,placement:p,strategy:s,middlewareData:h}};async function kK(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=r1(t,e),m=yR(h),x=l[p?f==="floating"?"reference":"floating":f],y=jb(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(x)))==null||n?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),v=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},D=jb(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:N,strategy:c}):v);return{top:(y.top-D.top+m.top)/j.y,bottom:(D.bottom-y.bottom+m.bottom)/j.y,left:(y.left-D.left+m.left)/j.x,right:(D.right-y.right+m.right)/j.x}}const CK=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=r1(e,t)||{};if(d==null)return{};const f=yR(u),p={x:n,y:r},h=ek(s),m=ZS(h),g=await o.getDimensions(d),x=h==="y",y=x?"top":"left",v=x?"bottom":"right",N=x?"clientHeight":"clientWidth",j=a.reference[m]+a.reference[h]-p[h]-a.floating[m],D=p[h]-a.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let A=T?T[N]:0;(!A||!await(o.isElement==null?void 0:o.isElement(T)))&&(A=l.floating[N]||a.floating[m]);const S=j/2-D/2,E=A/2-g[m]/2-1,I=np(f[y],E),L=np(f[v],E),O=I,F=A-g[m]-L,U=A/2-g[m]/2+S,W=lK(O,U,F),X=!c.arrow&&hx(s)!=null&&U!==W&&a.reference[m]/2-(U<O?I:L)-g[m]/2<0,P=X?U<O?U-O:U-F:0;return{[h]:p[h]+P,data:{[h]:W,centerOffset:U-W-P,...X&&{alignmentOffset:P}},reset:X}}}),AK=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...x}=r1(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const y=rp(s),v=Su(l),N=rp(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),D=p||(N||!g?[Nb(l)]:fK(l)),T=m!=="none";!p&&T&&D.push(...gK(l,g,m,j));const A=[l,...D],S=await kK(t,x),E=[];let I=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&E.push(S[y]),f){const U=uK(s,o,j);E.push(S[U[0]],S[U[1]])}if(I=[...I,{placement:s,overflows:E}],!E.every(U=>U<=0)){var L,O;const U=(((L=a.flip)==null?void 0:L.index)||0)+1,W=A[U];if(W&&(!(f==="alignment"?v!==Su(W):!1)||I.every(z=>Su(z.placement)===v?z.overflows[0]>0:!0)))return{data:{index:U,overflows:I},reset:{placement:W}};let X=(O=I.filter(P=>P.overflows[0]<=0).sort((P,z)=>P.overflows[1]-z.overflows[1])[0])==null?void 0:O.placement;if(!X)switch(h){case"bestFit":{var F;const P=(F=I.filter(z=>{if(T){const oe=Su(z.placement);return oe===v||oe==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(oe=>oe>0).reduce((oe,Y)=>oe+Y,0)]).sort((z,oe)=>z[1]-oe[1])[0])==null?void 0:F[0];P&&(X=P);break}case"initialPlacement":X=l;break}if(s!==X)return{reset:{placement:X}}}return{}}}},MK=new Set(["left","top"]);async function DK(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=rp(n),l=hx(n),c=Su(n)==="y",d=MK.has(o)?-1:1,u=a&&c?-1:1,f=r1(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof m=="number"&&(h=l==="end"?m*-1:m),c?{x:h*u,y:p*d}:{x:p*d,y:h*u}}const EK=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=t,c=await DK(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}};function bR(e){const t=Vi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Vo(e),a=s?e.offsetWidth:n,o=s?e.offsetHeight:r,l=wb(n)!==a||wb(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function tk(e){return fa(e)?e:e.contextElement}function Ah(e){const t=tk(e);if(!Vo(t))return qo(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=bR(t);let o=(a?wb(n.width):n.width)/r,l=(a?wb(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const _K=qo(0);function vR(e){const t=pi(e);return!QS()||!t.visualViewport?_K:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function TK(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==pi(e)?!1:t}function nf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=tk(e);let o=qo(1);t&&(r?fa(r)&&(o=Ah(r)):o=Ah(e));const l=TK(a,n,r)?vR(a):qo(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,u=s.width/o.x,f=s.height/o.y;if(a){const p=pi(a),h=r&&fa(r)?pi(r):r;let m=p,g=S5(m);for(;g&&r&&h!==m;){const x=Ah(g),y=g.getBoundingClientRect(),v=Vi(g),N=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,j=y.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;c*=x.x,d*=x.y,u*=x.x,f*=x.y,c+=N,d+=j,m=pi(g),g=S5(m)}}return jb({width:u,height:f,x:c,y:d})}function s1(e,t){const n=n1(e).scrollLeft;return t?t.left+n:nf(Zo(e)).left+n}function wR(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-s1(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function LK(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",o=Zo(r),l=t?t1(t.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},d=qo(1);const u=qo(0),f=Vo(r);if((f||!f&&!a)&&((Ap(r)!=="body"||fx(o))&&(c=n1(r)),Vo(r))){const h=nf(r);d=Ah(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const p=o&&!f&&!a?wR(o,c):qo(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+p.x,y:n.y*d.y-c.scrollTop*d.y+u.y+p.y}}function RK(e){return Array.from(e.getClientRects())}function OK(e){const t=Zo(e),n=n1(e),r=e.ownerDocument.body,s=zu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=zu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+s1(e);const l=-n.scrollTop;return Vi(r).direction==="rtl"&&(o+=zu(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}const yA=25;function PK(e,t){const n=pi(e),r=Zo(e),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=QS();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const d=s1(r);if(d<=0){const u=r.ownerDocument,f=u.body,p=getComputedStyle(f),h=u.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,m=Math.abs(r.clientWidth-f.clientWidth-h);m<=yA&&(a-=m)}else d<=yA&&(a+=d);return{width:a,height:o,x:l,y:c}}const IK=new Set(["absolute","fixed"]);function FK(e,t){const n=nf(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Vo(e)?Ah(e):qo(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,d=r*a.y;return{width:o,height:l,x:c,y:d}}function bA(e,t,n){let r;if(t==="viewport")r=PK(e,n);else if(t==="document")r=OK(Zo(e));else if(fa(t))r=FK(t,n);else{const s=vR(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return jb(r)}function NR(e,t){const n=Od(e);return n===t||!fa(n)||tp(n)?!1:Vi(n).position==="fixed"||NR(n,t)}function zK(e,t){const n=t.get(e);if(n)return n;let r=Fg(e,[],!1).filter(l=>fa(l)&&Ap(l)!=="body"),s=null;const a=Vi(e).position==="fixed";let o=a?Od(e):e;for(;fa(o)&&!tp(o);){const l=Vi(o),c=XS(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&IK.has(s.position)||fx(o)&&!c&&NR(e,o))?r=r.filter(u=>u!==o):s=l,o=Od(o)}return t.set(e,r),r}function BK(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?t1(t)?[]:zK(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((d,u)=>{const f=bA(t,u,s);return d.top=zu(f.top,d.top),d.right=np(f.right,d.right),d.bottom=np(f.bottom,d.bottom),d.left=zu(f.left,d.left),d},bA(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function HK(e){const{width:t,height:n}=bR(e);return{width:t,height:n}}function UK(e,t,n){const r=Vo(t),s=Zo(t),a=n==="fixed",o=nf(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=qo(0);function d(){c.x=s1(s)}if(r||!r&&!a)if((Ap(t)!=="body"||fx(s))&&(l=n1(t)),r){const h=nf(t,!0,a,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&d();a&&!r&&s&&d();const u=s&&!r&&!a?wR(s,l):qo(0),f=o.left+l.scrollLeft-c.x-u.x,p=o.top+l.scrollTop-c.y-u.y;return{x:f,y:p,width:o.width,height:o.height}}function nw(e){return Vi(e).position==="static"}function vA(e,t){if(!Vo(e)||Vi(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Zo(e)===n&&(n=n.ownerDocument.body),n}function jR(e,t){const n=pi(e);if(t1(e))return n;if(!Vo(e)){let s=Od(e);for(;s&&!tp(s);){if(fa(s)&&!nw(s))return s;s=Od(s)}return n}let r=vA(e,t);for(;r&&ZG(r)&&nw(r);)r=vA(r,t);return r&&tp(r)&&nw(r)&&!XS(r)?n:r||sK(e)||n}const $K=async function(e){const t=this.getOffsetParent||jR,n=this.getDimensions,r=await n(e.floating);return{reference:UK(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qK(e){return Vi(e).direction==="rtl"}const VK={convertOffsetParentRelativeRectToViewportRelativeRect:LK,getDocumentElement:Zo,getClippingRect:BK,getOffsetParent:jR,getElementRects:$K,getClientRects:RK,getDimensions:HK,getScale:Ah,isElement:fa,isRTL:qK};function SR(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function YK(e,t){let n=null,r;const s=Zo(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:u,top:f,width:p,height:h}=d;if(l||t(),!p||!h)return;const m=A0(f),g=A0(s.clientWidth-(u+p)),x=A0(s.clientHeight-(f+h)),y=A0(u),N={rootMargin:-m+"px "+-g+"px "+-x+"px "+-y+"px",threshold:zu(0,np(1,c))||1};let j=!0;function D(T){const A=T[0].intersectionRatio;if(A!==c){if(!j)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!SR(d,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(D,{...N,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,N)}n.observe(e)}return o(!0),a}function WK(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=tk(e),u=s||a?[...d?Fg(d):[],...Fg(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),a&&y.addEventListener("resize",n)});const f=d&&l?YK(d,n):null;let p=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===d&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var N;(N=h)==null||N.observe(t)})),n()}),d&&!c&&h.observe(d),h.observe(t));let m,g=c?nf(e):null;c&&x();function x(){const y=nf(e);g&&!SR(g,y)&&n(),g=y,m=requestAnimationFrame(x)}return n(),()=>{var y;u.forEach(v=>{s&&v.removeEventListener("scroll",n),a&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,c&&cancelAnimationFrame(m)}}const GK=EK,KK=AK,wA=CK,JK=(e,t,n)=>{const r=new Map,s={platform:VK,...n},a={...s.platform,_c:r};return SK(e,t,{...s,platform:a})};var XK=typeof document<"u",QK=function(){},Ny=XK?C.useLayoutEffect:QK;function kb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!kb(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!kb(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function kR(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function NA(e,t){const n=kR(e);return Math.round(t*n)/n}function rw(e){const t=C.useRef(e);return Ny(()=>{t.current=e}),t}function ZK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,f]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=C.useState(r);kb(p,r)||h(r);const[m,g]=C.useState(null),[x,y]=C.useState(null),v=C.useCallback(z=>{z!==T.current&&(T.current=z,g(z))},[]),N=C.useCallback(z=>{z!==A.current&&(A.current=z,y(z))},[]),j=a||m,D=o||x,T=C.useRef(null),A=C.useRef(null),S=C.useRef(u),E=c!=null,I=rw(c),L=rw(s),O=rw(d),F=C.useCallback(()=>{if(!T.current||!A.current)return;const z={placement:t,strategy:n,middleware:p};L.current&&(z.platform=L.current),JK(T.current,A.current,z).then(oe=>{const Y={...oe,isPositioned:O.current!==!1};U.current&&!kb(S.current,Y)&&(S.current=Y,pp.flushSync(()=>{f(Y)}))})},[p,t,n,L,O]);Ny(()=>{d===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(z=>({...z,isPositioned:!1})))},[d]);const U=C.useRef(!1);Ny(()=>(U.current=!0,()=>{U.current=!1}),[]),Ny(()=>{if(j&&(T.current=j),D&&(A.current=D),j&&D){if(I.current)return I.current(j,D,F);F()}},[j,D,F,I,E]);const W=C.useMemo(()=>({reference:T,floating:A,setReference:v,setFloating:N}),[v,N]),X=C.useMemo(()=>({reference:j,floating:D}),[j,D]),P=C.useMemo(()=>{const z={position:n,left:0,top:0};if(!X.floating)return z;const oe=NA(X.floating,u.x),Y=NA(X.floating,u.y);return l?{...z,transform:"translate("+oe+"px, "+Y+"px)",...kR(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:oe,top:Y}},[n,l,X.floating,u.x,u.y]);return C.useMemo(()=>({...u,update:F,refs:W,elements:X,floatingStyles:P}),[u,F,W,X,P])}const eJ=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?wA({element:r.current,padding:s}).fn(n):{}:r?wA({element:r,padding:s}).fn(n):{}}}},tJ=(e,t)=>({...GK(e),options:[e,t]}),nJ=(e,t)=>({...KK(e),options:[e,t]}),rJ=(e,t)=>({...eJ(e),options:[e,t]}),sJ={...Aj};let jA=!1,aJ=0;const SA=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+aJ++;function iJ(){const[e,t]=C.useState(()=>jA?SA():void 0);return Sb(()=>{e==null&&t(SA())},[]),C.useEffect(()=>{jA=!0},[]),e}const oJ=sJ.useId,CR=oJ||iJ,lJ=C.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:a,shift:o}},width:l=14,height:c=7,tipRadius:d=0,strokeWidth:u=0,staticOffset:f,stroke:p,d:h,style:{transform:m,...g}={},...x}=t,y=CR(),[v,N]=C.useState(!1);if(Sb(()=>{if(!s)return;Vi(s).direction==="rtl"&&N(!0)},[s]),!s)return null;const[j,D]=r.split("-"),T=j==="top"||j==="bottom";let A=f;(T&&o!=null&&o.x||!T&&o!=null&&o.y)&&(A=null);const S=u*2,E=S/2,I=l/2*(d/-8+1),L=c/2*d/4,O=!!h,F=A&&D==="end"?"bottom":"top";let U=A&&D==="end"?"right":"left";A&&v&&(U=D==="end"?"left":"right");const W=(a==null?void 0:a.x)!=null?A||a.x:"",X=(a==null?void 0:a.y)!=null?A||a.y:"",P=h||"M0,0"+(" H"+l)+(" L"+(l-I)+","+(c-L))+(" Q"+l/2+","+c+" "+I+","+(c-L))+" Z",z={top:O?"rotate(180deg)":"",left:O?"rotate(90deg)":"rotate(-90deg)",bottom:O?"":"rotate(180deg)",right:O?"rotate(-90deg)":"rotate(90deg)"}[j];return i.jsxs("svg",{...x,"aria-hidden":!0,ref:n,width:O?l:l+S,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[U]:W,[F]:X,[j]:T||O?"100%":"calc(100% - "+S/2+"px)",transform:[z,m].filter(oe=>!!oe).join(" "),...g},children:[S>0&&i.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:p,strokeWidth:S+(h?0:1),d:P}),i.jsx("path",{stroke:S&&!h?x.fill:"none",d:P}),i.jsx("clipPath",{id:y,children:i.jsx("rect",{x:-E,y:E*(O?-1:1),width:l+S,height:l})})]})});function cJ(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const dJ=C.createContext(null),uJ=C.createContext(null),fJ=()=>{var e;return((e=C.useContext(dJ))==null?void 0:e.id)||null},hJ=()=>C.useContext(uJ);function pJ(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=CR(),a=C.useRef({}),[o]=C.useState(()=>cJ()),l=fJ()!=null,[c,d]=C.useState(r.reference),u=jK((h,m,g)=>{a.current.openEvent=h?m:void 0,o.emit("openchange",{open:h,event:m,reason:g,nested:l}),n==null||n(h,m,g)}),f=C.useMemo(()=>({setPositionReference:d}),[]),p=C.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return C.useMemo(()=>({dataRef:a,open:t,onOpenChange:u,elements:p,events:o,floatingId:s,refs:f}),[t,u,p,o,s,f])}function mJ(e){e===void 0&&(e={});const{nodeId:t}=e,n=pJ({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[a,o]=C.useState(null),[l,c]=C.useState(null),u=(s==null?void 0:s.domReference)||a,f=C.useRef(null),p=hJ();Sb(()=>{u&&(f.current=u)},[u]);const h=ZK({...e,elements:{...s,...l&&{reference:l}}}),m=C.useCallback(N=>{const j=fa(N)?{getBoundingClientRect:()=>N.getBoundingClientRect(),getClientRects:()=>N.getClientRects(),contextElement:N}:N;c(j),h.refs.setReference(j)},[h.refs]),g=C.useCallback(N=>{(fa(N)||N===null)&&(f.current=N,o(N)),(fa(h.refs.reference.current)||h.refs.reference.current===null||N!==null&&!fa(N))&&h.refs.setReference(N)},[h.refs]),x=C.useMemo(()=>({...h.refs,setReference:g,setPositionReference:m,domReference:f}),[h.refs,g,m]),y=C.useMemo(()=>({...h.elements,domReference:u}),[h.elements,u]),v=C.useMemo(()=>({...h,...r,refs:x,elements:y,nodeId:t}),[h,x,y,t,r]);return Sb(()=>{r.dataRef.current.floatingContext=v;const N=p==null?void 0:p.nodesRef.current.find(j=>j.id===t);N&&(N.context=v)}),C.useMemo(()=>({...h,context:v,refs:x,elements:y}),[h,x,y,v])}/*!
  react-datepicker v9.0.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var C5=function(t,n){return C5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},C5(t,n)};function qs(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");C5(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var an=function(){return an=Object.assign||function(n){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},an.apply(this,arguments)};function Ho(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var gJ=function(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,r=e.showTime,s=r===void 0?!1:r,a=e.className,o=e.children,l=e.inline,c=n?"Choose Time":"Choose Date".concat(s?" and Time":"");return ge.createElement("div",{className:a,"aria-label":c,role:l?void 0:"dialog","aria-modal":l?void 0:"true"},o)},xJ=function(e,t){var n=C.useRef(null),r=C.useRef(e);C.useEffect(function(){r.current=e},[e]);var s=C.useCallback(function(a){var o,l=a.composed&&a.composedPath&&a.composedPath().find(function(c){return c instanceof Node})||a.target;n.current&&!n.current.contains(l)&&(t&&l instanceof HTMLElement&&l.classList.contains(t)||(o=r.current)===null||o===void 0||o.call(r,a))},[t]);return C.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),n},a1=function(e){var t=e.children,n=e.onClickOutside,r=e.className,s=e.containerRef,a=e.style,o=e.ignoreClass,l=xJ(n,o);return ge.createElement("div",{className:r,style:a,ref:function(c){l.current=c,s&&(s.current=c)}},t)},M0=null,kA=!1;function AR(){if(kA)return M0;kA=!0;try{M0=require("date-fns-tz")}catch{M0=null}return M0}function CA(e,t){if(!t)return e;var n=AR();return n?n.toZonedTime(e,t):e}function jl(e,t){if(!t)return e;var n=AR();return n?n.fromZonedTime(e,t):e}var nt;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(nt||(nt={}));function MR(){var e=typeof window<"u"?window:globalThis;return e}var px=12;function Nn(e){if(e==null)return new Date;var t=typeof e=="string"?j5(e):mt(e);return Da(t)?t:new Date}function du(e,t,n,r,s){s===void 0&&(s=Nn());for(var a=sp(n)||sp(nk()),o=Array.isArray(t)?t:[t],l=0,c=o;l<c.length;l++){var d=c[l],u=EG(e,d,s,{locale:a});if(Da(u)&&(!r||e===dr(u,d,n)))return u}return null}function yJ(e,t){if(t===void 0&&(t=Nn()),!e)return null;var n=e.match(/\b(1\d{3}|2\d{3})\b/);if(!n||!n[1])return null;var r=parseInt(n[1],10),s=e.match(/(?:^|[/\-\s])?(0?[1-9]|1[0-2])(?:[/\-\s]|$)/),a=s&&s[1]?parseInt(s[1],10)-1:t.getMonth();return new Date(r,a,1)}function Da(e){return Og(e)}function dr(e,t,n){if(n==="en")return qi(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?sp(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),r=r||sp(nk()),qi(e,t,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Ca(e,t){var n=t.dateFormat,r=t.locale,s=Array.isArray(n)&&n.length>0?n[0]:n;return e&&dr(e,s,r)||""}var DR=" - ";function bJ(e,t,n){if(!e&&!t)return"";var r=e?Ca(e,n):"",s=t?Ca(t,n):"",a=n.rangeSeparator||DR;return"".concat(r).concat(a).concat(s)}function vJ(e,t){if(!(e!=null&&e.length))return"";var n=e[0]?Ca(e[0],t):"";if(e.length===1)return n;if(e.length===2&&e[1]){var r=Ca(e[1],t);return"".concat(n,", ").concat(r)}var s=e.length-1;return"".concat(n," (+").concat(s,")")}function Sl(e,t){var n=t.hour,r=n===void 0?0:n,s=t.minute,a=s===void 0?0:s,o=t.second,l=o===void 0?0:o;return by(vy(wy(e,l),a),r)}function wJ(e){return WS(e)}function NJ(e,t){return dr(e,"ddd",t)}function _m(e){return tf(e)}function Sd(e,t,n){var r=sp(t||nk());return fc(e,{locale:r,weekStartsOn:n})}function tc(e){return aR(e)}function Tm(e){return Zv(e)}function AA(e){return v5(e)}function MA(){return tf(Nn())}function DA(e){return qS(e)}function jJ(e){return OY(e)}function SJ(e){return VS(e)}function Ro(e,t){return e&&t?RG(e,t):!e&&!t}function da(e,t){return e&&t?TG(e,t):!e&&!t}function Cb(e,t){return e&&t?LG(e,t):!e&&!t}function pn(e,t){return e&&t?MY(e,t):!e&&!t}function ku(e,t){return e&&t?OW(e,t):!e&&!t}function xu(e,t,n){var r,s=tf(t),a=qS(n);try{r=Ig(e,{start:s,end:a})}catch{r=!1}return r}function nk(){var e=MR();return e.__localeId__}function sp(e){if(typeof e=="string"){var t=MR();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function kJ(e,t,n){return t(dr(e,"EEEE",n))}function CJ(e,t){return dr(e,"EEEEEE",t)}function AJ(e,t){return dr(e,"EEE",t)}function rk(e,t){return dr(ei(Nn(),e),"LLLL",t)}function ER(e,t){return dr(ei(Nn(),e),"LLL",t)}function MJ(e,t){return dr(Jf(Nn(),e),"QQQ",t)}function Ri(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,a=n.excludeDates,o=n.excludeDateIntervals,l=n.includeDates,c=n.includeDateIntervals,d=n.filterDate,u=n.disabled;return u?!0:mx(e,{minDate:r,maxDate:s})||a&&a.some(function(f){return f instanceof Date?pn(e,f):pn(e,f.date)})||o&&o.some(function(f){var p=f.start,h=f.end;return Ig(e,{start:p,end:h})})||l&&!l.some(function(f){return pn(e,f)})||c&&!c.some(function(f){var p=f.start,h=f.end;return Ig(e,{start:p,end:h})})||d&&!d(Nn(e))||!1}function sk(e,t){var n=t===void 0?{}:t,r=n.excludeDates,s=n.excludeDateIntervals;return s&&s.length>0?s.some(function(a){var o=a.start,l=a.end;return Ig(e,{start:o,end:l})}):r&&r.some(function(a){var o;return a instanceof Date?pn(e,a):pn(e,(o=a.date)!==null&&o!==void 0?o:new Date)})||!1}function _R(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,a=n.excludeDates,o=n.includeDates,l=n.filterDate;return mx(e,{minDate:r?aR(r):void 0,maxDate:s?VS(s):void 0})||(a==null?void 0:a.some(function(c){return da(e,c instanceof Date?c:c.date)}))||o&&!o.some(function(c){return da(e,c)})||l&&!l(Nn(e))||!1}function D0(e,t,n,r){var s=hn(e),a=_a(e),o=hn(t),l=_a(t),c=hn(r);return s===o&&s===c?a<=n&&n<=l:s<o?c===s&&a<=n||c===o&&l>=n||c<o&&c>s:!1}function DJ(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,a=n.excludeDates,o=n.includeDates;return mx(e,{minDate:r,maxDate:s})||a&&a.some(function(l){return da(l instanceof Date?l:l.date,e)})||o&&!o.some(function(l){return da(l,e)})||!1}function E0(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,a=n.excludeDates,o=n.includeDates,l=n.filterDate,c=n.disabled;return c?!0:mx(e,{minDate:r,maxDate:s})||(a==null?void 0:a.some(function(d){return Cb(e,d instanceof Date?d:d.date)}))||o&&!o.some(function(d){return Cb(e,d)})||l&&!l(Nn(e))||!1}function _0(e,t,n){if(!t||!n||!Og(t)||!Og(n))return!1;var r=hn(t),s=hn(n);return r<=e&&s>=e}function jy(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,a=n.excludeDates,o=n.includeDates,l=n.filterDate,c=n.disabled;if(c)return!0;var d=new Date(e,0,1);return mx(d,{minDate:r?Zv(r):void 0,maxDate:s?iR(s):void 0})||(a==null?void 0:a.some(function(u){return Ro(d,u instanceof Date?u:u.date)}))||o&&!o.some(function(u){return Ro(d,u)})||l&&!l(Nn(d))||!1}function T0(e,t,n,r){var s=hn(e),a=ld(e),o=hn(t),l=ld(t),c=hn(r);return s===o&&s===c?a<=n&&n<=l:s<o?c===s&&a<=n||c===o&&l>=n||c<o&&c>s:!1}function mx(e,t){var n,r=t===void 0?{}:t,s=r.minDate,a=r.maxDate;return(n=s&&Zh(e,s)<0||a&&Zh(e,a)>0)!==null&&n!==void 0?n:!1}function EA(e,t){return t.some(function(n){return Zs(n)===Zs(e)&&ea(n)===ea(e)&&jd(n)===jd(e)})}function _A(e,t){var n=t===void 0?{}:t,r=n.excludeTimes,s=n.includeTimes,a=n.filterTime;return r&&EA(e,r)||s&&!EA(e,s)||a&&!a(e)||!1}function TA(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s=Nn();s=by(s,Zs(e)),s=vy(s,ea(e)),s=wy(s,jd(e));var a=Nn();a=by(a,Zs(n)),a=vy(a,ea(n)),a=wy(a,jd(n));var o=Nn();o=by(o,Zs(r)),o=vy(o,ea(r)),o=wy(o,jd(r));var l;try{l=!Ig(s,{start:a,end:o})}catch{l=!1}return l}function LA(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,a=Fu(e,1);return r&&Pg(r,a)>0||s&&s.every(function(o){return Pg(o,a)>0})||!1}function RA(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,a=ho(e,1);return r&&Pg(a,r)>0||s&&s.every(function(o){return Pg(a,o)>0})||!1}function EJ(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,a=Zv(e),o=mR(a);return r&&yb(r,o)>0||s&&s.every(function(l){return yb(l,o)>0})||!1}function _J(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,a=iR(e),o=$S(a,1);return r&&yb(o,r)>0||s&&s.every(function(l){return yb(o,l)>0})||!1}function OA(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,a=ep(e,1);return r&&bb(r,a)>0||s&&s.every(function(o){return bb(o,a)>0})||!1}function TJ(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.yearItemNumber,a=s===void 0?px:s,o=Tm(ep(e,a)),l=Ul(o,a).endPeriod,c=r&&hn(r);return c&&c>l||!1}function PA(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,a=Ql(e,1);return r&&bb(a,r)>0||s&&s.every(function(o){return bb(a,o)>0})||!1}function LJ(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.yearItemNumber,a=s===void 0?px:s,o=Ql(e,a),l=Ul(o,a).startPeriod,c=r&&hn(r);return c&&c<l||!1}function TR(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(s){return Zh(s,t)>=0});return iA(r)}else return n?iA(n):t}function LR(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(s){return Zh(s,t)<=0});return aA(r)}else return n?aA(n):t}function IA(e,t){var n;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var r=new Map,s=0,a=e.length;s<a;s++){var o=e[s];if(Zl(o)){var l=dr(o,"MM.dd.yyyy"),c=r.get(l)||[];c.includes(t)||(c.push(t),r.set(l,c))}else if(typeof o=="object"){var d=Object.keys(o),u=(n=d[0])!==null&&n!==void 0?n:"",f=o[u];if(typeof u=="string"&&Array.isArray(f))for(var p=0,h=f.length;p<h;p++){var m=f[p];if(m){var l=dr(m,"MM.dd.yyyy"),c=r.get(l)||[];c.includes(u)||(c.push(u),r.set(l,c))}}}}return r}function RJ(e,t){return e.length!==t.length?!1:e.every(function(n,r){return n===t[r]})}function OJ(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(r){var s=r.date,a=r.holidayName;if(Zl(s)){var o=dr(s,"MM.dd.yyyy"),l=n.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===t&&RJ(l.holidayNames,[a]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?Ho(Ho([],c,!0),[a],!1):[a],n.set(o,l)}}}),n}function PJ(e,t,n,r,s){for(var a=s.length,o=[],l=0;l<a;l++){var c=e,d=s[l];d&&(c=jY(c,Zs(d)),c=Rg(c,ea(d)),c=CY(c,jd(d)));var u=Rg(e,(n+1)*r);ec(c,t)&&Bo(c,u)&&d!=null&&o.push(d)}return o}function Bf(e){return e<10?"0".concat(e):"".concat(e)}function Ul(e,t){t===void 0&&(t=px);var n=Math.ceil(hn(e)/t)*t,r=n-(t-1);return{startPeriod:r,endPeriod:n}}function IJ(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function FA(e){var t=e.getSeconds(),n=e.getMilliseconds();return mt(e.getTime()-t*1e3-n)}function RR(e,t){return FA(e).getTime()===FA(t).getTime()}function zA(e){if(!Zl(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function sw(e,t){if(!Zl(e)||!Zl(t))throw new Error("Invalid date received");var n=zA(e),r=zA(t);return Bo(n,r)}function OR(e){return e.key===nt.Space}var aw=function(e){qs(t,e);function t(n){var r=e.call(this,n)||this;return r.inputRef=ge.createRef(),r.onTimeChange=function(s){var a,o;r.setState({time:s});var l=r.props.date,c=l instanceof Date&&!isNaN(+l),d=c?l:new Date;if(s!=null&&s.includes(":")){var u=s.split(":"),f=u[0],p=u[1];d.setHours(Number(f)),d.setMinutes(Number(p))}(o=(a=r.props).onChange)===null||o===void 0||o.call(a,d)},r.renderTimeInput=function(){var s=r.state.time,a=r.props,o=a.date,l=a.timeString,c=a.customTimeInput;return c?C.cloneElement(c,{date:o,value:s,onChange:r.onTimeChange}):ge.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var d;(d=r.inputRef.current)===null||d===void 0||d.focus()},required:!0,value:s,onChange:function(d){r.onTimeChange(d.target.value||l)}})},r.state={time:r.props.timeString},r}return t.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},t.prototype.render=function(){return ge.createElement("div",{className:"react-datepicker__input-time-container"},ge.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),ge.createElement("div",{className:"react-datepicker-time__input-container"},ge.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(C.Component),FJ=function(e){qs(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dayEl=C.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var s,a,o=r.key;o===nt.Space&&(r.preventDefault(),r.key=nt.Enter),(a=(s=n.props).handleOnKeyDown)===null||a===void 0||a.call(s,r)},n.isSameDay=function(r){return pn(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var s=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(o){return n.isSameDayOrWeek(o)}):n.isSameDayOrWeek(n.props.selected),a=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!s&&n.isSameDayOrWeek(n.props.preSelection)&&!a},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),Ri(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate,disabled:n.props.disabled})},n.isExcluded=function(){return sk(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return pn(n.props.day,Sd(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&pn(r,Sd(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,s=r.day,a=r.highlightDates;if(!a)return!1;var o=dr(s,"MM.dd.yyyy");return a.get(o)},n.getHolidaysClass=function(){var r,s=n.props,a=s.day,o=s.holidays;if(!o)return[void 0];var l=dr(a,"MM.dd.yyyy");return o.has(l)?[(r=o.get(l))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,s=r.day,a=r.startDate,o=r.endDate;return!a||!o?!1:xu(s,a,o)},n.isInSelectingRange=function(){var r,s=n.props,a=s.day,o=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,d=s.selectsDisabledDaysInRange,u=s.startDate,f=s.swapRange,p=s.endDate,h=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;if(n.isAfterMonth()||n.isBeforeMonth()||!(o||l||c)||!h||!d&&n.isDisabled())return!1;if(o&&p&&(Bo(h,p)||ku(h,p)))return xu(a,h,p);if(l&&u&&(ec(h,u)||ku(h,u)))return xu(a,u,h);if(c&&u&&!p){if(ku(h,u)||ec(h,u))return xu(a,u,h);if(f&&Bo(h,u))return xu(a,h,u)}return!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,a=s.day,o=s.startDate,l=s.selectsStart,c=s.swapRange,d=s.selectsRange,u=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return l?pn(a,u):d&&c&&o&&u?pn(a,Bo(u,o)?u:o):pn(a,o)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,a=s.day,o=s.endDate,l=s.selectsEnd,c=s.selectsRange,d=s.swapRange,u=s.startDate,f=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return l?pn(a,f):c&&d&&u&&f?pn(a,Bo(f,u)?u:f):c?pn(a,f):pn(a,o)},n.isRangeStart=function(){var r=n.props,s=r.day,a=r.startDate,o=r.endDate;return!a||!o?!1:pn(a,s)},n.isRangeEnd=function(){var r=n.props,s=r.day,a=r.startDate,o=r.endDate;return!a||!o?!1:pn(o,s)},n.isWeekend=function(){var r=_W(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===_a(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(_a(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(Nn())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(s){return n.isSameDayOrWeek(s)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var s=n.props.dayClassName?n.props.dayClassName(r):void 0;return Er("react-datepicker__day",s,"react-datepicker__day--"+NJ(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,s=r.day,a=r.ariaLabelPrefixWhenEnabled,o=a===void 0?"Choose":a,l=r.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,d=n.isDisabled()||n.isExcluded()?c:o;return"".concat(d," ").concat(dr(s,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,s=r.day,a=r.holidays,o=a===void 0?new Map:a,l=r.excludeDates,c=dr(s,"MM.dd.yyyy"),d=[];return o.has(c)&&d.push.apply(d,o.get(c).holidayNames),n.isExcluded()&&d.push(l==null?void 0:l.filter(function(u){return u instanceof Date?pn(u,s):pn(u==null?void 0:u.date,s)}).map(function(u){if(!(u instanceof Date))return u==null?void 0:u.message})),d.join(", ")},n.getTabIndex=function(){var r=n.props.selected,s=n.props.preSelection,a=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&pn(s,r))?0:-1;return a},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(fA(n.props.day),n.props.day):fA(n.props.day)},n.render=function(){return ge.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"gridcell",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&ge.createElement("span",{className:"overlay"},n.getTitle()))},n}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},t.prototype.isDayActiveElement=function(){var n,r,s;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(C.Component),zJ=function(e){qs(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.weekNumberEl=C.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var s,a,o=r.key;o===nt.Space&&(r.preventDefault(),r.key=nt.Enter),(a=(s=n.props).handleOnKeyDown)===null||a===void 0||a.call(s,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!pn(n.props.date,n.props.selected)&&pn(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||pn(n.props.date,n.props.selected)&&pn(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var s=!1;n.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&pn(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(s=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},t.prototype.render=function(){var n=this.props,r=n.weekNumber,s=n.isWeekDisabled,a=n.ariaLabelPrefix,o=a===void 0?t.defaultProps.ariaLabelPrefix:a,l=n.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!s,"react-datepicker__week-number--selected":!!l&&pn(this.props.date,this.props.selected)};return ge.createElement("div",{ref:this.weekNumberEl,className:Er(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},r)},t}(C.Component),BJ=function(e){qs(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isDisabled=function(r){return Ri(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,s){n.props.onDayClick&&n.props.onDayClick(r,s)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,s,a){for(var o,l,c,d=new Date(r),u=0;u<7;u++){var f=new Date(r);f.setDate(f.getDate()+u);var p=!n.isDisabled(f);if(p){d=f;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(d,s,a),n.props.showWeekPicker&&n.handleDayClick(d,a),((o=n.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((c=(l=n.props).setOpen)===null||c===void 0||c.call(l,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):wJ(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),s=fo(r,6),a=new Date(r);a<=s;){if(!n.isDisabled(a))return!1;a=fo(a,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),s=[],a=n.formatWeekNumber(r);if(n.props.showWeekNumber){var o=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,a):void 0;s.push(ge.createElement(zJ,an({key:"W"},t.defaultProps,n.props,{weekNumber:a,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:o})))}return s.concat([0,1,2,3,4,5,6].map(function(l){var c=fo(r,l);return ge.createElement(FJ,an({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:n.handleDayClick.bind(n,c),onMouseEnter:n.handleDayMouseEnter.bind(n,c)}))}))},n.startOfWeek=function(){return Sd(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!pn(n.startOfWeek(),n.props.selected)&&pn(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":pn(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},r=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return ge.createElement("div",{className:Er(n,r),role:"row"},this.renderDays())},t}(C.Component),ym,HJ=6,Mh={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},iw=(ym={},ym[Mh.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},ym[Mh.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},ym[Mh.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},ym),L0=1;function BA(e,t){return e?Mh.FOUR_COLUMNS:t?Mh.TWO_COLUMNS:Mh.THREE_COLUMNS}var UJ=function(e){qs(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.MONTH_REFS=Ho([],Array(12),!0).map(function(){return C.createRef()}),n.QUARTER_REFS=Ho([],Array(4),!0).map(function(){return C.createRef()}),n.isDisabled=function(r){return Ri(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate,disabled:n.props.disabled})},n.isExcluded=function(r){return sk(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,s){var a,o;(o=(a=n.props).onDayClick)===null||o===void 0||o.call(a,r,s,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var s,a;(a=(s=n.props).onDayMouseEnter)===null||a===void 0||a.call(s,r)},n.handleMouseLeave=function(){var r,s;(s=(r=n.props).onMouseLeave)===null||s===void 0||s.call(r)},n.isRangeStartMonth=function(r){var s=n.props,a=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:da(ei(a,r),o)},n.isRangeStartQuarter=function(r){var s=n.props,a=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Cb(Jf(a,r),o)},n.isRangeEndMonth=function(r){var s=n.props,a=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:da(ei(a,r),l)},n.isRangeEndQuarter=function(r){var s=n.props,a=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Cb(Jf(a,r),l)},n.isInSelectingRangeMonth=function(r){var s,a=n.props,o=a.day,l=a.selectsStart,c=a.selectsEnd,d=a.selectsRange,u=a.startDate,f=a.endDate,p=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(l||c||d)||!p?!1:l&&f?D0(p,f,r,o):c&&u||d&&u&&!f?D0(u,p,r,o):!1},n.isSelectingMonthRangeStart=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var a=n.props,o=a.day,l=a.startDate,c=a.selectsStart,d=ei(o,r),u=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return c?da(d,u):da(d,l)},n.isSelectingMonthRangeEnd=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var a=n.props,o=a.day,l=a.endDate,c=a.selectsEnd,d=a.selectsRange,u=ei(o,r),f=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return c||d?da(u,f):da(u,l)},n.isInSelectingRangeQuarter=function(r){var s,a=n.props,o=a.day,l=a.selectsStart,c=a.selectsEnd,d=a.selectsRange,u=a.startDate,f=a.endDate,p=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(l||c||d)||!p?!1:l&&f?T0(p,f,r,o):c&&u||d&&u&&!f?T0(u,p,r,o):!1},n.isWeekInMonth=function(r){var s=n.props.day,a=fo(r,6);return da(r,s)||da(a,s)},n.isCurrentMonth=function(r,s){return hn(r)===hn(Nn())&&s===_a(Nn())},n.isCurrentQuarter=function(r,s){return hn(r)===hn(Nn())&&s===ld(Nn())},n.isSelectedMonth=function(r,s,a){return _a(a)===s&&hn(r)===hn(a)},n.isSelectMonthInList=function(r,s,a){return a.some(function(o){return n.isSelectedMonth(r,s,o)})},n.isSelectedQuarter=function(r,s,a){return ld(a)===s&&hn(r)===hn(a)},n.isSelectQuarterInList=function(r,s,a){return a.some(function(o){return n.isSelectedQuarter(r,s,o)})},n.isMonthSelected=function(){var r=n.props,s=r.day,a=r.selected,o=r.selectedDates,l=r.selectsMultiple,c=_a(s);return l?o==null?void 0:o.some(function(d){return n.isSelectedMonth(s,c,d)}):!!a&&n.isSelectedMonth(s,c,a)},n.isQuarterSelected=function(){var r=n.props,s=r.day,a=r.selected,o=r.selectedDates,l=r.selectsMultiple,c=ld(s);return l?o==null?void 0:o.some(function(d){return n.isSelectedQuarter(s,c,d)}):!!a&&n.isSelectedQuarter(s,c,a)},n.renderWeeks=function(){if(!Da(n.props.day))return[];for(var r=[],s=n.props.fixedHeight,a=0,o=!1,l=Sd(tc(n.props.day),n.props.locale,n.props.calendarStartDay),c=function(m){return n.props.showWeekPicker?Sd(m,n.props.locale,n.props.calendarStartDay):n.props.preSelection},d=function(m){return n.props.showWeekPicker?Sd(m,n.props.locale,n.props.calendarStartDay):n.props.selected},u=n.props.selected?d(n.props.selected):void 0,f=n.props.preSelection?c(n.props.preSelection):void 0;r.push(ge.createElement(BJ,an({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:a,day:l,month:_a(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:u,preSelection:f,showWeekNumber:n.props.showWeekNumbers}))),!o;){a++,l=xb(l,1);var p=s&&a>=HJ,h=!s&&!n.isWeekInMonth(l);if(p||h)if(n.props.peekNextMonth)o=!0;else break}return r},n.onMonthClick=function(r,s){var a=n.isMonthDisabledForLabelDate(s),o=a.isDisabled,l=a.labelDate;o||n.handleDayClick(tc(l),r)},n.onMonthMouseEnter=function(r){var s=n.isMonthDisabledForLabelDate(r),a=s.isDisabled,o=s.labelDate;a||n.handleDayMouseEnter(tc(o))},n.handleMonthNavigation=function(r,s){var a,o,l,c;(o=(a=n.props).setPreSelection)===null||o===void 0||o.call(a,s),(c=(l=n.MONTH_REFS[r])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},n.handleKeyboardNavigation=function(r,s,a){var o,l=n.props,c=l.selected,d=l.preSelection,u=l.setPreSelection,f=l.minDate,p=l.maxDate,h=l.showFourColumnMonthYearPicker,m=l.showTwoColumnMonthYearPicker;if(d){var g=BA(h,m),x=n.getVerticalOffset(g),y=(o=iw[g])===null||o===void 0?void 0:o.grid,v=function(A,S,E){var I,L,O=S,F=E;switch(A){case nt.ArrowRight:O=ho(S,L0),F=E===11?0:E+L0;break;case nt.ArrowLeft:O=Fu(S,L0),F=E===0?11:E-L0;break;case nt.ArrowUp:O=Fu(S,x),F=!((I=y==null?void 0:y[0])===null||I===void 0)&&I.includes(E)?E+12-x:E-x;break;case nt.ArrowDown:O=ho(S,x),F=!((L=y==null?void 0:y[y.length-1])===null||L===void 0)&&L.includes(E)?E-12+x:E+x;break}return{newCalculatedDate:O,newCalculatedMonth:F}},N=function(A,S,E){for(var I=40,L=A,O=!1,F=0,U=v(L,S,E),W=U.newCalculatedDate,X=U.newCalculatedMonth;!O;){if(F>=I){W=S,X=E;break}if(f&&W<f){L=nt.ArrowRight;var P=v(L,W,X);W=P.newCalculatedDate,X=P.newCalculatedMonth}if(p&&W>p){L=nt.ArrowLeft;var P=v(L,W,X);W=P.newCalculatedDate,X=P.newCalculatedMonth}if(DJ(W,n.props)){var P=v(L,W,X);W=P.newCalculatedDate,X=P.newCalculatedMonth}else O=!0;F++}return{newCalculatedDate:W,newCalculatedMonth:X}};if(s===nt.Enter){n.isMonthDisabled(a)||(n.onMonthClick(r,a),u==null||u(c));return}var j=N(s,d,a),D=j.newCalculatedDate,T=j.newCalculatedMonth;switch(s){case nt.ArrowRight:case nt.ArrowLeft:case nt.ArrowUp:case nt.ArrowDown:n.handleMonthNavigation(T,D);break}}},n.getVerticalOffset=function(r){var s,a;return(a=(s=iw[r])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&a!==void 0?a:0},n.onMonthKeyDown=function(r,s){var a=n.props,o=a.disabledKeyboardNavigation,l=a.handleOnMonthKeyDown,c=r.key;c!==nt.Tab&&r.preventDefault(),o||n.handleKeyboardNavigation(r,c,s),l&&l(r)},n.onQuarterClick=function(r,s){var a=Jf(n.props.day,s);E0(a,n.props)||n.handleDayClick(AA(a),r)},n.onQuarterMouseEnter=function(r){var s=Jf(n.props.day,r);E0(s,n.props)||n.handleDayMouseEnter(AA(s))},n.handleQuarterNavigation=function(r,s){var a,o,l,c;n.isDisabled(s)||n.isExcluded(s)||((o=(a=n.props).setPreSelection)===null||o===void 0||o.call(a,s),(c=(l=n.QUARTER_REFS[r-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},n.onQuarterKeyDown=function(r,s){var a,o,l=r.key;if(!n.props.disabledKeyboardNavigation)switch(l){case nt.Enter:n.onQuarterClick(r,s),(o=(a=n.props).setPreSelection)===null||o===void 0||o.call(a,n.props.selected);break;case nt.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===4?1:s+1,$S(n.props.preSelection,1));break;case nt.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===1?4:s-1,mR(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(r){var s,a=n.props,o=a.day,l=a.disabled,c=a.minDate,d=a.maxDate,u=a.excludeDates,f=a.includeDates,p=ei(o,r);return l?{isDisabled:!0,labelDate:ei(o,r)}:{isDisabled:(s=(c||d||u||f)&&_R(p,n.props))!==null&&s!==void 0?s:!1,labelDate:p}},n.isMonthDisabled=function(r){var s=n.isMonthDisabledForLabelDate(r).isDisabled;return s},n.getMonthClassNames=function(r){var s=n.props,a=s.day,o=s.startDate,l=s.endDate,c=s.preSelection,d=s.monthClassName,u=d?d(ei(a,r)):void 0,f=n.getSelection();return Er("react-datepicker__month-text","react-datepicker__month-".concat(r),u,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":f?n.isSelectMonthInList(a,r,f):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&c&&n.isSelectedMonth(a,r,c)&&!n.isMonthSelected()&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":o&&l?D0(o,l,r,a):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(a,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=_a(n.props.preSelection),a=n.isMonthDisabledForLabelDate(s).isDisabled,o=r===s&&!(a||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=ld(n.props.preSelection),a=E0(n.props.day,n.props),o=r===s&&!(a||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getAriaLabel=function(r){var s=n.props,a=s.chooseDayAriaLabelPrefix,o=a===void 0?"Choose":a,l=s.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,d=s.day,u=s.locale,f=ei(d,r),p=n.isDisabled(f)||n.isExcluded(f)?c:o;return"".concat(p," ").concat(dr(f,"MMMM yyyy",u))},n.getQuarterClassNames=function(r){var s=n.props,a=s.day,o=s.startDate,l=s.endDate,c=s.minDate,d=s.maxDate,u=s.excludeDates,f=s.includeDates,p=s.filterDate,h=s.preSelection,m=s.disabledKeyboardNavigation,g=s.disabled,x=(c||d||u||f||p||g)&&E0(Jf(a,r),n.props),y=n.getSelection();return Er("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":x,"react-datepicker__quarter-text--selected":y?n.isSelectQuarterInList(a,r,y):void 0,"react-datepicker__quarter-text--keyboard-selected":!m&&h&&n.isSelectedQuarter(a,r,h)&&!n.isQuarterSelected()&&!x,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":o&&l?T0(o,l,r,a):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":n.isCurrentQuarter(a,r)})},n.getMonthContent=function(r){var s=n.props,a=s.showFullMonthYearPicker,o=s.renderMonthContent,l=s.locale,c=s.day,d=ER(r,l),u=rk(r,l);return o?o(r,d,u,c):a?u:d},n.getQuarterContent=function(r){var s,a=n.props,o=a.renderQuarterContent,l=a.locale,c=MJ(r,l);return(s=o==null?void 0:o(r,c))!==null&&s!==void 0?s:c},n.renderMonths=function(){var r,s=n.props,a=s.showTwoColumnMonthYearPicker,o=s.showFourColumnMonthYearPicker,l=s.day,c=s.selected,d=(r=iw[BA(o,a)])===null||r===void 0?void 0:r.grid;return d==null?void 0:d.map(function(u,f){return ge.createElement("div",{className:"react-datepicker__month-wrapper",key:f},u.map(function(p,h){return ge.createElement("div",{ref:n.MONTH_REFS[p],key:h,onClick:function(m){n.onMonthClick(m,p)},onKeyDown:function(m){OR(m)&&(m.preventDefault(),m.key=nt.Enter),n.onMonthKeyDown(m,p)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(p)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(p)}:void 0,tabIndex:Number(n.getTabIndex(p)),className:n.getMonthClassNames(p),"aria-disabled":n.isMonthDisabled(p),role:"option","aria-label":n.getAriaLabel(p),"aria-current":n.isCurrentMonth(l,p)?"date":void 0,"aria-selected":c?n.isSelectedMonth(l,p,c):void 0},n.getMonthContent(p))}))})},n.renderQuarters=function(){var r=n.props,s=r.day,a=r.selected,o=[1,2,3,4];return ge.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(l,c){return ge.createElement("div",{key:c,ref:n.QUARTER_REFS[c],role:"option",onClick:function(d){n.onQuarterClick(d,l)},onKeyDown:function(d){n.onQuarterKeyDown(d,l)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(l)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(l)}:void 0,className:n.getQuarterClassNames(l),"aria-selected":a?n.isSelectedQuarter(s,l,a):void 0,tabIndex:Number(n.getQuarterTabIndex(l)),"aria-current":n.isCurrentQuarter(s,l)?"date":void 0},n.getQuarterContent(l))}))},n.getClassNames=function(){var r=n.props,s=r.selectingDate,a=r.selectsStart,o=r.selectsEnd,l=r.showMonthYearPicker,c=r.showQuarterYearPicker,d=r.showWeekPicker;return Er("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(a||o)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":d})},n}return t.prototype.getSelection=function(){var n=this.props,r=n.selected,s=n.selectedDates,a=n.selectsMultiple;if(a)return s;if(r)return[r]},t.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,s=n.showQuarterYearPicker,a=n.day,o=n.ariaLabelPrefix,l=o===void 0?"Month ":o,c=l?l.trim()+" ":"",d=Da(a)?"".concat(c).concat(dr(a,"MMMM, yyyy",this.props.locale)):"",u=r||s;return u?ge.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":d,role:"listbox"},r?this.renderMonths():this.renderQuarters()):ge.createElement("div",{role:"table"},this.props.dayNamesHeader&&ge.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),this.props.monthHeader&&ge.createElement("div",{role:"rowgroup"},this.props.monthHeader),ge.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":d,role:"rowgroup"},this.renderWeeks()),this.props.monthFooter&&ge.createElement("div",{role:"rowgroup"},this.props.monthFooter))},t}(C.Component),$J=function(e){qs(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.monthOptionButtonsRef={},n.isSelectedMonth=function(r){return n.props.month===r},n.handleOptionKeyDown=function(r,s){var a;switch(s.key){case"Enter":s.preventDefault(),n.onChange(r);break;case"Escape":s.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{s.preventDefault();var o=(r+(s.key==="ArrowUp"?-1:1)+n.props.monthNames.length)%n.props.monthNames.length;(a=n.monthOptionButtonsRef[o])===null||a===void 0||a.focus();break}}},n.renderOptions=function(){return n.monthOptionButtonsRef={},n.props.monthNames.map(function(r,s){return ge.createElement("div",{ref:function(a){n.monthOptionButtonsRef[s]=a,n.isSelectedMonth(s)&&(a==null||a.focus())},role:"button",tabIndex:0,className:n.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,s),onKeyDown:n.handleOptionKeyDown.bind(n,s),"aria-selected":n.isSelectedMonth(s)?"true":void 0},n.isSelectedMonth(s)?ge.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return t.prototype.render=function(){return ge.createElement(a1,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(C.Component),qJ=function(e){qs(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(s,a){return ge.createElement("option",{key:s,value:a},s)})},n.renderSelectMode=function(r){return ge.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(s){return n.onChange(parseInt(s.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,s){return ge.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},ge.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),ge.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[n.props.month]))},n.renderDropdown=function(r){return ge.createElement($J,an({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var s=n.state.dropdownVisible,a=[n.renderReadView(!s,r)];return s&&a.unshift(n.renderDropdown(r)),a},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(a){return ER(a,n.props.locale)}:function(a){return rk(a,n.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(r);break;case"select":s=this.renderSelectMode(r);break}return ge.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(C.Component);function VJ(e,t){for(var n=[],r=tc(e),s=tc(t);!ec(r,s);)n.push(Nn(r)),r=ho(r,1);return n}var YJ=function(e){qs(t,e);function t(n){var r=e.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(s){var a=N5(s),o=Ro(r.props.date,s)&&da(r.props.date,s);return ge.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:a,onClick:r.onChange.bind(r,a),"aria-selected":o?"true":void 0},o?ge.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",dr(s,r.props.dateFormat,r.props.locale))})},r.onChange=function(s){return r.props.onChange(s)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:VJ(r.props.minDate,r.props.maxDate)},r}return t.prototype.render=function(){var n=Er({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return ge.createElement(a1,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(C.Component),WJ=function(e){qs(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=tc(n.props.minDate),s=tc(n.props.maxDate),a=[];!ec(r,s);){var o=N5(r);a.push(ge.createElement("option",{key:o,value:o},dr(r,n.props.dateFormat,n.props.locale))),r=ho(r,1)}return a},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return ge.createElement("select",{value:N5(tc(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var s=dr(n.props.date,n.props.dateFormat,n.props.locale);return ge.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},ge.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),ge.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},n.renderDropdown=function(){return ge.createElement(YJ,an({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown();var s=Nn(r);Ro(n.props.date,s)&&da(n.props.date,s)||n.props.onChange(s)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return ge.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(C.Component),GJ=function(e){qs(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,s,a;n.list&&(n.list.scrollTop=(a=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((s=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&s!==void 0?s:0):n.list.clientHeight,n.centerLi))!==null&&a!==void 0?a:0)})},n.handleClick=function(r){var s,a;(n.props.minTime||n.props.maxTime)&&TA(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&_A(r,n.props)||(a=(s=n.props).onChange)===null||a===void 0||a.call(s,r)},n.isSelectedTime=function(r){return n.props.selected&&RR(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&TA(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&_A(r,n.props)},n.liClasses=function(r){var s,a=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&a.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&a.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(Zs(r)*3600+ea(r)*60+jd(r))%(((s=n.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&a.push("react-datepicker__time-list-item--injected"),a.join(" ")},n.handleOnKeyDown=function(r,s){var a,o;r.key===nt.Space&&(r.preventDefault(),r.key=nt.Enter),(r.key===nt.ArrowUp||r.key===nt.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===nt.ArrowDown||r.key===nt.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===nt.Enter&&n.handleClick(s),(o=(a=n.props).handleOnKeyDown)===null||o===void 0||o.call(a,r)},n.renderTimes=function(){for(var r,s=[],a=typeof n.props.format=="string"?n.props.format:"p",o=(r=n.props.intervals)!==null&&r!==void 0?r:t.defaultProps.intervals,l=n.props.selected||n.props.openToDate||Nn(),c=_m(l),d=n.props.injectTimes&&n.props.injectTimes.sort(function(x,y){return x.getTime()-y.getTime()}),u=60*IJ(l),f=u/o,p=0;p<f;p++){var h=Rg(c,p*o);if(s.push(h),d){var m=PJ(c,h,p,o,d);s=s.concat(m)}}var g=s.reduce(function(x,y){return y.getTime()<=l.getTime()?y:x},s[0]);return s.map(function(x){return ge.createElement("li",{key:x.valueOf(),onClick:n.handleClick.bind(n,x),className:n.liClasses(x),ref:function(y){x===g&&(n.centerLi=y)},onKeyDown:function(y){n.handleOnKeyDown(y,x)},tabIndex:x===g?0:-1,role:"option","aria-selected":n.isSelectedTime(x)?"true":void 0,"aria-disabled":n.isDisabledTime(x)?"true":void 0},dr(x,a,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?ge.createElement(ge.Fragment,null):ge.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},ge.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var n=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){n.updateContainerHeight()}),this.resizeObserver.observe(r))},t.prototype.updateContainerHeight=function(){if(this.props.monthRef&&this.header){var n=this.props.monthRef.clientHeight-this.header.clientHeight;this.state.height!==n&&this.setState({height:n})}},t.prototype.render=function(){var n=this,r,s=this.state.height;return ge.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),ge.createElement("div",{className:"react-datepicker__time"},ge.createElement("div",{className:"react-datepicker__time-box"},ge.createElement("ul",{className:"react-datepicker__time-list",ref:function(a){n.list=a},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},t}(C.Component),HA=3,KJ=function(e){qs(t,e);function t(n){var r=e.call(this,n)||this;return r.YEAR_REFS=Ho([],Array(r.props.yearItemNumber),!0).map(function(){return C.createRef()}),r.isDisabled=function(s){return Ri(s,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(s){return sk(s,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var s;return(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection},r.updateFocusOnPaginate=function(s){var a=function(){var o,l;(l=(o=r.YEAR_REFS[s])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(a)},r.handleYearClick=function(s,a){r.props.onDayClick&&r.props.onDayClick(s,a)},r.handleYearNavigation=function(s,a){var o,l,c,d,u=r.props,f=u.date,p=u.yearItemNumber;if(!(f===void 0||p===void 0)){var h=Ul(f,p).startPeriod;r.isDisabled(a)||r.isExcluded(a)||((l=(o=r.props).setPreSelection)===null||l===void 0||l.call(o,a),s-h<0?r.updateFocusOnPaginate(p-(h-s)):s-h>=p?r.updateFocusOnPaginate(Math.abs(p-(s-h))):(d=(c=r.YEAR_REFS[s-h])===null||c===void 0?void 0:c.current)===null||d===void 0||d.focus())}},r.isSameDay=function(s,a){return pn(s,a)},r.isCurrentYear=function(s){return s===hn(Nn())},r.isRangeStart=function(s){return r.props.startDate&&r.props.endDate&&Ro(Lo(Nn(),s),r.props.startDate)},r.isRangeEnd=function(s){return r.props.startDate&&r.props.endDate&&Ro(Lo(Nn(),s),r.props.endDate)},r.isInRange=function(s){return _0(s,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(s){var a=r.props,o=a.selectsStart,l=a.selectsEnd,c=a.selectsRange,d=a.startDate,u=a.endDate;return!(o||l||c)||!r.selectingDate()?!1:o&&u?_0(s,r.selectingDate(),u):l&&d||c&&d&&!u?_0(s,d,r.selectingDate()):!1},r.isSelectingRangeStart=function(s){var a;if(!r.isInSelectingRange(s))return!1;var o=r.props,l=o.startDate,c=o.selectsStart,d=Lo(Nn(),s);return c?Ro(d,(a=r.selectingDate())!==null&&a!==void 0?a:null):Ro(d,l??null)},r.isSelectingRangeEnd=function(s){var a;if(!r.isInSelectingRange(s))return!1;var o=r.props,l=o.endDate,c=o.selectsEnd,d=o.selectsRange,u=Lo(Nn(),s);return c||d?Ro(u,(a=r.selectingDate())!==null&&a!==void 0?a:null):Ro(u,l??null)},r.isKeyboardSelected=function(s){if(!(r.props.disabledKeyboardNavigation||r.props.date===void 0||r.props.preSelection==null)){var a=r.props,o=a.minDate,l=a.maxDate,c=a.excludeDates,d=a.includeDates,u=a.filterDate,f=a.selected,p=Tm(Lo(r.props.date,s)),h=(o||l||c||d||u)&&jy(s,r.props),m=!!f&&pn(p,Tm(f)),g=pn(p,Tm(r.props.preSelection));return!r.props.inline&&!m&&g&&!h}},r.isSelectedYear=function(s){var a=r.props,o=a.selectsMultiple,l=a.selected,c=a.selectedDates;return o?c==null?void 0:c.some(function(d){return s===hn(d)}):!!l&&s===hn(l)},r.onYearClick=function(s,a){var o=r.props.date;o!==void 0&&r.handleYearClick(Tm(Lo(o,a)),s)},r.onYearKeyDown=function(s,a){var o,l,c=s.key,d=r.props,u=d.date,f=d.yearItemNumber,p=d.handleOnKeyDown;if(c!==nt.Tab&&s.preventDefault(),!r.props.disabledKeyboardNavigation)switch(c){case nt.Enter:if(r.props.selected==null)break;r.onYearClick(s,a),(l=(o=r.props).setPreSelection)===null||l===void 0||l.call(o,r.props.selected);break;case nt.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(a+1,Ql(r.props.preSelection,1));break;case nt.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(a-1,ep(r.props.preSelection,1));break;case nt.ArrowUp:{if(u===void 0||f===void 0||r.props.preSelection==null)break;var h=Ul(u,f).startPeriod,m=HA,g=a-m;if(g<h){var x=f%m;a>=h&&a<h+x?m=x:m+=x,g=a-m}r.handleYearNavigation(g,ep(r.props.preSelection,m));break}case nt.ArrowDown:{if(u===void 0||f===void 0||r.props.preSelection==null)break;var y=Ul(u,f).endPeriod,m=HA,g=a+m;if(g>y){var x=f%m;a<=y&&a>y-x?m=x:m+=x,g=a+m}r.handleYearNavigation(g,Ql(r.props.preSelection,m));break}}p&&p(s)},r.getYearClassNames=function(s){var a=r.props,o=a.date,l=a.disabled,c=a.minDate,d=a.maxDate,u=a.excludeDates,f=a.includeDates,p=a.filterDate,h=a.yearClassName;return Er("react-datepicker__year-text","react-datepicker__year-".concat(s),o?h==null?void 0:h(Lo(o,s)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(s),"react-datepicker__year-text--disabled":(c||d||u||f||p||l)&&jy(s,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(s),"react-datepicker__year-text--range-start":r.isRangeStart(s),"react-datepicker__year-text--range-end":r.isRangeEnd(s),"react-datepicker__year-text--in-range":r.isInRange(s),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(s),"react-datepicker__year-text--today":r.isCurrentYear(s)})},r.getYearTabIndex=function(s){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var a=hn(r.props.preSelection),o=jy(s,r.props);return s===a&&!o?"0":"-1"},r.getYearContent=function(s){return r.props.renderYearContent?r.props.renderYearContent(s):s},r}return t.prototype.render=function(){var n=this,r=[],s=this.props,a=s.date,o=s.yearItemNumber,l=s.onYearMouseEnter,c=s.onYearMouseLeave;if(a===void 0)return null;for(var d=Ul(a,o),u=d.startPeriod,f=d.endPeriod,p=function(g){r.push(ge.createElement("div",{ref:h.YEAR_REFS[g-u],onClick:function(x){n.onYearClick(x,g)},onKeyDown:function(x){OR(x)&&(x.preventDefault(),x.key=nt.Enter),n.onYearKeyDown(x,g)},tabIndex:Number(h.getYearTabIndex(g)),className:h.getYearClassNames(g),onMouseEnter:h.props.usePointerEvent?void 0:function(x){return l(x,g)},onPointerEnter:h.props.usePointerEvent?function(x){return l(x,g)}:void 0,onMouseLeave:h.props.usePointerEvent?void 0:function(x){return c(x,g)},onPointerLeave:h.props.usePointerEvent?function(x){return c(x,g)}:void 0,key:g,"aria-current":h.isCurrentYear(g)?"date":void 0},h.getYearContent(g)))},h=this,m=u;m<=f;m++)p(m);return ge.createElement("div",{className:"react-datepicker__year"},ge.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},t}(C.Component);function JJ(e,t,n,r){for(var s=[],a=0;a<2*t+1;a++){var o=e+t-a,l=!0;n&&(l=hn(n)<=o),r&&l&&(l=hn(r)>=o),l&&s.push(o)}return s}var XJ=function(e){qs(t,e);function t(n){var r=e.call(this,n)||this;r.yearOptionButtonsRef={},r.handleOptionKeyDown=function(l,c){var d;switch(c.key){case"Enter":c.preventDefault(),r.onChange(l);break;case"Escape":c.preventDefault(),r.props.onCancel();break;case"ArrowUp":case"ArrowDown":{c.preventDefault();var u=l+(c.key==="ArrowUp"?1:-1);r.yearOptionButtonsRef[u]&&((d=r.yearOptionButtonsRef[u])===null||d===void 0||d.focus());break}}},r.renderOptions=function(){r.yearOptionButtonsRef={};var l=r.props.year,c=r.state.yearsList.map(function(f){return ge.createElement("div",{ref:function(p){r.yearOptionButtonsRef[f]=p,f===l&&(p==null||p.focus())},role:"button",tabIndex:0,className:l===f?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:f,onClick:r.onChange.bind(r,f),onKeyDown:r.handleOptionKeyDown.bind(r,f),"aria-selected":l===f?"true":void 0},l===f?ge.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",f)}),d=r.props.minDate?hn(r.props.minDate):null,u=r.props.maxDate?hn(r.props.maxDate):null;return(!u||!r.state.yearsList.find(function(f){return f===u}))&&c.unshift(ge.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},ge.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!d||!r.state.yearsList.find(function(f){return f===d}))&&c.push(ge.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},ge.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},r.onChange=function(l){r.props.onChange(l)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(l){var c=r.state.yearsList.map(function(d){return d+l});r.setState({yearsList:c})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var s=n.yearDropdownItemNumber,a=n.scrollableYearDropdown,o=s||(a?10:5);return r.state={yearsList:JJ(r.props.year,o,r.props.minDate,r.props.maxDate)},r.dropdownRef=C.createRef(),r}return t.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,s=r?r.find(function(a){return a.ariaSelected}):null;n.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},t.prototype.render=function(){var n=Er({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return ge.createElement(a1,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(C.Component),QJ=function(e){qs(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?hn(n.props.minDate):1900,s=n.props.maxDate?hn(n.props.maxDate):2100,a=[],o=r;o<=s;o++)a.push(ge.createElement("option",{key:o,value:o},o));return a},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return ge.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return ge.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:n.toggleDropdown},ge.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),ge.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return ge.createElement(XJ,an({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,s){var a;(a=n.onSelect)===null||a===void 0||a.call(n,r,s),n.setOpen()},n.onSelect=function(r,s){var a,o;(o=(a=n.props).onSelect)===null||o===void 0||o.call(a,r,s)},n.setOpen=function(){var r,s;(s=(r=n.props).setOpen)===null||s===void 0||s.call(r,!0)},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return ge.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(C.Component),ZJ=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],PR="react-datepicker-ignore-onclickoutside",eX=function(e){var t=(e.className||"").split(/\s+/);return ZJ.some(function(n){return t.indexOf(n)>=0})},tX=function(e){qs(t,e);function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(s){r.props.onClickOutside(s)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(s){var a,o;eX(s.target)&&((o=(a=r.props).onDropdownFocus)===null||o===void 0||o.call(a,s))},r.getDateInView=function(){var s=r.props,a=s.preSelection,o=s.selected,l=s.openToDate,c=TR(r.props),d=LR(r.props),u=Nn(),f=l||o||a;return f||(c&&Bo(u,c)?c:d&&ec(u,d)?d:u)},r.increaseMonth=function(){r.setState(function(s){var a=s.date;return{date:ho(a,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(s){var a=s.date;return{date:Fu(a,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(s,a,o){r.props.onSelect(s,a,o),r.props.setPreSelection&&r.props.setPreSelection(s)},r.handleDayMouseEnter=function(s){r.setState({selectingDate:s}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(s)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(s,a){r.setState({selectingDate:Lo(Nn(),a)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(s,a)},r.handleYearMouseLeave=function(s,a){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(s,a)},r.handleYearChange=function(s){var a,o,l,c;(o=(a=r.props).onYearChange)===null||o===void 0||o.call(a,s),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(s),(c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!0)),r.props.setPreSelection&&r.props.setPreSelection(s)},r.getEnabledPreSelectionDateForMonth=function(s){if(!Ri(s,r.props))return s;for(var a=tc(s),o=SJ(s),l=DY(o,a),c=null,d=0;d<=l;d++){var u=fo(a,d);if(!Ri(u,r.props)){c=u;break}}return c},r.handleMonthChange=function(s){var a,o,l,c=(a=r.getEnabledPreSelectionDateForMonth(s))!==null&&a!==void 0?a:s;r.handleCustomMonthChange(c),r.props.adjustDateOnChange&&(r.props.onSelect(c),(l=(o=r.props).setOpen)===null||l===void 0||l.call(o,!0)),r.props.setPreSelection&&r.props.setPreSelection(c)},r.handleCustomMonthChange=function(s){var a,o;(o=(a=r.props).onMonthChange)===null||o===void 0||o.call(a,s),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(s){r.handleYearChange(s),r.handleMonthChange(s)},r.changeYear=function(s){r.setState(function(a){var o=a.date;return{date:Lo(o,Number(s))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(s){r.setState(function(a){var o=a.date;return{date:ei(o,Number(s))}},function(){var a,o;r.handleMonthChange(r.state.date),(o=(a=r.props).onMonthSelectedInChange)===null||o===void 0||o.call(a,0)})},r.changeMonthYear=function(s){r.setState(function(a){var o=a.date;return{date:Lo(ei(o,_a(s)),hn(s))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(s,a){if(s===void 0&&(s=r.state.date),a===void 0&&(a=0),!Da(s))return[];var o=r.props.disabled,l=Sd(s,r.props.locale,r.props.calendarStartDay),c=[];return r.props.showWeekNumbers&&c.push(ge.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(o?"react-datepicker__day-name--disabled":""),role:"columnheader"},ge.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),ge.createElement("span",{"aria-hidden":"true"},r.props.weekLabel||"#"))),c.concat([0,1,2,3,4,5,6].map(function(d){var u=fo(l,d),f=r.formatWeekday(u,r.props.locale),p=dr(u,"EEEE",r.props.locale),h=r.props.weekDayClassName?r.props.weekDayClassName(u):void 0;if(r.props.renderCustomDayName){var m=r.props.renderCustomDayName({day:u,shortName:f,fullName:p,locale:r.props.locale,customDayNameCount:a});return ge.createElement("div",{key:d,role:"columnheader",className:Er("react-datepicker__day-name",h,o?"react-datepicker__day-name--disabled":"")},m)}return ge.createElement("div",{key:d,role:"columnheader",className:Er("react-datepicker__day-name",h,o?"react-datepicker__day-name--disabled":"")},ge.createElement("span",{className:"react-datepicker__sr-only"},p),ge.createElement("span",{"aria-hidden":"true"},f))}))},r.formatWeekday=function(s,a){return r.props.formatWeekDay?kJ(s,r.props.formatWeekDay,a):r.props.useWeekdaysShort?AJ(s,a):CJ(s,a)},r.decreaseYear=function(){r.setState(function(s){var a,o=s.date;return{date:ep(o,r.props.showYearPicker?(a=r.props.yearItemNumber)!==null&&a!==void 0?a:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var s,a,o;if(!r.props.renderCustomHeader){var l=(s=r.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=r.props.showPreviousMonths?l-1:0,d=(a=r.props.monthSelectedIn)!==null&&a!==void 0?a:c,u=Fu(r.state.date,d),f;switch(!0){case r.props.disabled:f=!0;break;case r.props.showMonthYearPicker:f=OA(r.state.date,r.props);break;case r.props.showYearPicker:f=TJ(r.state.date,r.props);break;case r.props.showQuarterYearPicker:f=EJ(r.state.date,r.props);break;default:f=LA(u,r.props);break}if(!(!((o=r.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&f||r.props.showTimeSelectOnly)){var p=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],h=["react-datepicker__navigation","react-datepicker__navigation--previous"],m=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(m=r.decreaseYear),f&&r.props.showDisabledMonthNavigation&&(h.push("react-datepicker__navigation--previous--disabled"),m=void 0);var g=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,x=r.props,y=x.previousMonthButtonLabel,v=y===void 0?t.defaultProps.previousMonthButtonLabel:y,N=x.previousYearButtonLabel,j=N===void 0?t.defaultProps.previousYearButtonLabel:N,D=r.props,T=D.previousMonthAriaLabel,A=T===void 0?typeof v=="string"?v:"Previous Month":T,S=D.previousYearAriaLabel,E=S===void 0?typeof j=="string"?j:"Previous Year":S;return ge.createElement("button",{type:"button",className:h.join(" "),onClick:m,onKeyDown:r.props.handleOnKeyDown,"aria-label":g?E:A},ge.createElement("span",{className:p.join(" ")},g?j:v))}}},r.increaseYear=function(){r.setState(function(s){var a,o=s.date;return{date:Ql(o,r.props.showYearPicker?(a=r.props.yearItemNumber)!==null&&a!==void 0?a:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var s;if(!r.props.renderCustomHeader){var a;switch(!0){case r.props.disabled:a=!0;break;case r.props.showMonthYearPicker:a=PA(r.state.date,r.props);break;case r.props.showYearPicker:a=LJ(r.state.date,r.props);break;case r.props.showQuarterYearPicker:a=_J(r.state.date,r.props);break;default:a=RA(r.state.date,r.props);break}if(!(!((s=r.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&a||r.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var c=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(c=r.increaseYear),a&&r.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),c=void 0);var d=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,u=r.props,f=u.nextMonthButtonLabel,p=f===void 0?t.defaultProps.nextMonthButtonLabel:f,h=u.nextYearButtonLabel,m=h===void 0?t.defaultProps.nextYearButtonLabel:h,g=r.props,x=g.nextMonthAriaLabel,y=x===void 0?typeof p=="string"?p:"Next Month":x,v=g.nextYearAriaLabel,N=v===void 0?typeof m=="string"?m:"Next Year":v;return ge.createElement("button",{type:"button",className:o.join(" "),onClick:c,onKeyDown:r.props.handleOnKeyDown,"aria-label":d?N:y},ge.createElement("span",{className:l.join(" ")},d?m:p))}}},r.renderCurrentMonth=function(s){s===void 0&&(s=r.state.date);var a=["react-datepicker__current-month"];return r.props.showYearDropdown&&a.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&a.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&a.push("react-datepicker__current-month--hasMonthYearDropdown"),ge.createElement("h2",{className:a.join(" ")},Da(s)?dr(s,r.props.dateFormat,r.props.locale):"")},r.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showYearDropdown||s))return ge.createElement(QJ,an({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:hn(r.state.date)}))},r.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthDropdown||s))return ge.createElement(qJ,an({},t.defaultProps,r.props,{month:_a(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthYearDropdown||s))return ge.createElement(WJ,an({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(s){r.props.onSelect(MA(),s),r.props.setPreSelection&&r.props.setPreSelection(MA())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return ge.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDayNamesHeader=function(s,a){return a===void 0&&(a=0),ge.createElement("div",{className:"react-datepicker__day-names",role:"row"},r.header(s,a))},r.renderDefaultHeader=function(s){var a=s.monthDate,o=s.i,l=ge.createElement("div",{className:Er("react-datepicker__header",{"react-datepicker__header--has-time-select":r.props.showTimeSelect,"react-datepicker__header--middle":r.props.monthHeaderPosition==="middle","react-datepicker__header--bottom":r.props.monthHeaderPosition==="bottom"})},r.renderCurrentMonth(a),ge.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(o!==0),r.renderMonthYearDropdown(o!==0),r.renderYearDropdown(o!==0)));return r.props.monthHeaderPosition==="top"?l:ge.createElement("div",{className:"react-datepicker__header-wrapper"},r.renderPreviousButton()||null,r.renderNextButton()||null,l)},r.renderCustomHeader=function(s){var a,o,l=s.monthDate,c=s.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var d=r.props,u=d.showYearPicker,f=d.yearItemNumber,p;if(u){var h=Ul(l,f),m=h.startPeriod,g=h.endPeriod;p={startYear:m,endYear:g}}var x=LA(r.state.date,r.props),y=RA(r.state.date,r.props),v=OA(r.state.date,r.props),N=PA(r.state.date,r.props);return ge.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(o=(a=r.props).renderCustomHeader)===null||o===void 0?void 0:o.call(a,an(an(an({},r.state),u&&{visibleYearsRange:p}),{customHeaderCount:c,monthDate:l,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:x,nextMonthButtonDisabled:y,prevYearButtonDisabled:v,nextYearButtonDisabled:N})))},r.renderYearHeader=function(s){var a=s.monthDate,o=r.props,l=o.showYearPicker,c=o.yearItemNumber,d=c===void 0?t.defaultProps.yearItemNumber:c,u=Ul(a,d),f=u.startPeriod,p=u.endPeriod;return ge.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(f," - ").concat(p):hn(a))},r.renderHeader=function(s){var a=s.monthDate,o=s.i,l=o===void 0?0:o,c={monthDate:a,i:l};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(c);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(c);default:return r.renderDefaultHeader(c)}},r.renderMonths=function(){var s,a;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var o=[],l=(s=r.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=r.props.showPreviousMonths?l-1:0,d=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Ql(r.state.date,c):Fu(r.state.date,c),u=(a=r.props.monthSelectedIn)!==null&&a!==void 0?a:c,f=0;f<l;++f){var p=f-u+c,h=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Ql(d,p):ho(d,p),m="month-".concat(f),g=f<l-1,x=f>0;o.push(ge.createElement("div",{key:m,ref:function(y){r.monthContainer=y??void 0},className:"react-datepicker__month-container"},r.props.monthHeaderPosition==="top"&&r.renderHeader({monthDate:h,i:f}),ge.createElement(UJ,an({},t.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:h,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:f,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:g,monthShowsDuplicateDaysStart:x,dayNamesHeader:r.renderDayNamesHeader(h,f),monthHeader:r.props.monthHeaderPosition==="middle"?r.renderHeader({monthDate:h,i:f}):void 0,monthFooter:r.props.monthHeaderPosition==="bottom"?r.renderHeader({monthDate:h,i:f}):void 0}))))}return o}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return ge.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),ge.createElement(KJ,an({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return ge.createElement(GJ,an({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var s,a;if(r.props.showTimeInput){if(r.props.selectsRange){var o=r.props,l=o.startDate,c=o.endDate,d=l?new Date(l):void 0,u=d&&Da(d)&&!!l,f=u?"".concat(Bf(d.getHours()),":").concat(Bf(d.getMinutes())):"",p=c?new Date(c):void 0,h=p&&Da(p)&&!!c,m=h?"".concat(Bf(p.getHours()),":").concat(Bf(p.getMinutes())):"";return ge.createElement(ge.Fragment,null,ge.createElement(aw,an({},t.defaultProps,r.props,{date:d,timeString:f,onChange:function(v){var N,j;(j=(N=r.props).onTimeChange)===null||j===void 0||j.call(N,v,"start")},timeInputLabel:((s=r.props.timeInputLabel)!==null&&s!==void 0?s:"Time")+" (Start)"})),ge.createElement(aw,an({},t.defaultProps,r.props,{date:p,timeString:m,onChange:function(v){var N,j;(j=(N=r.props).onTimeChange)===null||j===void 0||j.call(N,v,"end")},timeInputLabel:((a=r.props.timeInputLabel)!==null&&a!==void 0?a:"Time")+" (End)"})))}var g=r.props.selected?new Date(r.props.selected):void 0,x=g&&Da(g)&&!!r.props.selected,y=x?"".concat(Bf(g.getHours()),":").concat(Bf(g.getMinutes())):"";return ge.createElement(aw,an({},t.defaultProps,r.props,{date:g,timeString:y,onChange:function(v){var N,j;(j=(N=r.props).onTimeChange)===null||j===void 0||j.call(N,v)}}))}},r.renderAriaLiveRegion=function(){var s;if(!Da(r.state.date))return ge.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"});var a=Ul(r.state.date,(s=r.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),o=a.startPeriod,l=a.endPeriod,c;return r.props.showYearPicker?c="".concat(o," - ").concat(l):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?c=hn(r.state.date):c="".concat(rk(_a(r.state.date),r.props.locale)," ").concat(hn(r.state.date)),ge.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&c)},r.renderChildren=function(){if(r.props.children)return ge.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=C.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:PR,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:px,monthHeaderPosition:"top"}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){n.setState({monthContainer:n.monthContainer})}())},t.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&Da(this.props.preSelection)&&(!pn(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var s=!da(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!pn(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var n=this.props.container||gJ;return ge.createElement(a1,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},ge.createElement("div",{style:{display:"contents"},ref:this.containerRef},ge.createElement(n,{className:Er("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly,inline:this.props.inline},this.renderAriaLiveRegion(),this.props.monthHeaderPosition==="top"&&this.renderPreviousButton(),this.props.monthHeaderPosition==="top"&&this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(C.Component),nX=function(e){var t=e.icon,n=e.className,r=n===void 0?"":n,s=e.onClick,a="react-datepicker__calendar-icon";if(typeof t=="string")return ge.createElement("i",{className:"".concat(a," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:s});if(ge.isValidElement(t)){var o=t;return ge.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(a," ").concat(r),onClick:function(l){typeof o.props.onClick=="function"&&o.props.onClick(l),typeof s=="function"&&s(l)}})}return ge.createElement("svg",{className:"".concat(a," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},ge.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},IR=function(e){qs(t,e);function t(n){var r=e.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return Mj.createPortal(this.props.children,this.el)},t}(C.Component),rX="[tabindex], a, button, input, select, textarea",sX=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},FR=function(e){qs(t,e);function t(n){var r=e.call(this,n)||this;return r.getTabChildren=function(){var s;return Array.prototype.slice.call((s=r.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(rX),1,-1).filter(sX)},r.handleFocusStart=function(){var s=r.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},r.handleFocusEnd=function(){var s=r.getTabChildren();s&&s.length>1&&s[0].focus()},r.tabLoopRef=C.createRef(),r}return t.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:t.defaultProps.enableTabLoop)?ge.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},ge.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,ge.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(C.Component);function aX(e){function t(n){var r,s=typeof n.hidePopper=="boolean"?n.hidePopper:!0,a=C.useRef(null),o=mJ(an({open:!s,whileElementsMounted:WK,placement:n.popperPlacement,middleware:Ho([nJ({padding:15}),tJ(10),rJ({element:a})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),l=an(an({},n),{hidePopper:s,popperProps:an(an({},o),{arrowRef:a})});return ge.createElement(e,an({},l))}return t.displayName="withFloating(".concat(e.displayName||e.name||"Component",")"),t}var iX=function(e){var t=e.className,n=e.wrapperClassName,r=e.hidePopper,s=r===void 0?!0:r,a=e.popperComponent,o=e.targetComponent,l=e.enableTabLoop,c=e.popperOnKeyDown,d=e.portalId,u=e.portalHost,f=e.popperProps,p=e.showArrow,h=e.popperTargetRef,m=e.monthHeaderPosition;C.useEffect(function(){h!=null&&h.current&&f.refs.setPositionReference(h.current)},[h,f.refs]);var g=void 0;if(!s){var x=Er("react-datepicker-popper",!p&&"react-datepicker-popper-offset",m==="middle"&&"react-datepicker-popper--header-middle",m==="bottom"&&"react-datepicker-popper--header-bottom",t);g=ge.createElement(FR,{enableTabLoop:l},ge.createElement("div",{ref:f.refs.setFloating,style:f.floatingStyles,className:x,"data-placement":f.placement,onKeyDown:c},a,p&&ge.createElement(lJ,{ref:f.arrowRef,context:f.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}e.popperContainer&&(g=C.createElement(e.popperContainer,{},g)),d&&!s&&(g=ge.createElement(IR,{portalId:d,portalHost:u},g));var y=Er("react-datepicker-wrapper",n);return ge.createElement(ge.Fragment,null,ge.createElement("div",{ref:f.refs.setReference,className:y},o),g)},oX=aX(iX);function UA(e,t){return e&&t?_a(e)!==_a(t)||hn(e)!==hn(t):e!==t}var ow="Date input not valid.",lX=function(e){qs(t,e);function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){var s=r.props.timeZone,a=r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Nn();return s?CA(a,s):a},r.modifyHolidays=function(){var s;return(s=r.props.holidays)===null||s===void 0?void 0:s.reduce(function(a,o){var l=du(o.date,"yyyy-MM-dd",void 0,!1);return l?Ho(Ho([],a,!0),[an(an({},o),{date:l})],!1):a},[])},r.calcInitialState=function(){var s=r.props.timeZone,a=r.getPreSelection(),o=TR(r.props),l=LR(r.props),c=o&&Bo(a,_m(o))?o:l&&ec(a,DA(l))?l:a,d=r.props.selectsRange?r.props.startDate:r.props.selected;return d&&s&&(d=CA(d,s)),{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:d??c,highlightDates:IA(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.getInputValue=function(){var s,a=r.props,o=a.locale,l=a.startDate,c=a.endDate,d=a.rangeSeparator,u=a.selected,f=a.selectedDates,p=a.selectsMultiple,h=a.selectsRange,m=a.formatMultipleDates,g=a.value,x=(s=r.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=r.state.inputValue;if(typeof g=="string")return g;if(typeof y=="string")return y;if(h)return bJ(l,c,{dateFormat:x,locale:o,rangeSeparator:d});if(p){if(m){var v=function(N){return Ca(N,{dateFormat:x,locale:o})};return m(f??[],v)}return vJ(f??[],{dateFormat:x,locale:o})}return Ca(u,{dateFormat:x,locale:o})},r.resetHiddenStatus=function(){r.setState(an(an({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(an(an({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var s,a;(a=(s=r.input)===null||s===void 0?void 0:s.focus)===null||a===void 0||a.call(s,{preventScroll:!0})},r.setBlur=function(){var s,a;(a=(s=r.input)===null||s===void 0?void 0:s.blur)===null||a===void 0||a.call(s),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(s,a){a===void 0&&(a=!1),r.setState({open:s,preSelection:s&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:lw},function(){s||r.setState(function(o){return{focused:a?o.focused:!1}},function(){!a&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return Zl(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(s){var a,o,l=r.state.wasHidden,c=l?r.state.open:!0;l&&r.resetHiddenStatus(),r.state.preventFocus||((o=(a=r.props).onFocus)===null||o===void 0||o.call(a,s),c&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.resetInputValue=function(){r.setState(an(an({},r.state),{inputValue:null}))},r.handleBlur=function(s){var a,o;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((o=(a=r.props).onBlur)===null||o===void 0||o.call(a,s)),r.resetInputValue(),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(s){var a,o;r.props.inline||r.setOpen(!1),(o=(a=r.props).onClickOutside)===null||o===void 0||o.call(a,s),r.props.withPortal&&s.preventDefault()},r.handleChange=function(){for(var s,a,o,l,c,d,u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var p=u[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,u),!p||typeof p.isDefaultPrevented!="function"||p.isDefaultPrevented()))){r.setState({inputValue:(p==null?void 0:p.target)instanceof HTMLInputElement?p.target.value:null,lastPreSelectChange:cX});var h=r.props,m=h.selectsRange,g=h.startDate,x=h.endDate,y=(s=r.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,v=(a=r.props.strictParsing)!==null&&a!==void 0?a:t.defaultProps.strictParsing,N=(p==null?void 0:p.target)instanceof HTMLInputElement?p.target.value:"";if(m){var j=r.props.rangeSeparator,D=j.trim(),T=N.split(y.includes(D)?j:D,2).map(function(W){return W.trim()}),A=T[0],S=T[1],E=du(A??"",y,r.props.locale,v),I=E?du(S??"",y,r.props.locale,v):null,L=(g==null?void 0:g.getTime())!==(E==null?void 0:E.getTime()),O=(x==null?void 0:x.getTime())!==(I==null?void 0:I.getTime());if(!L&&!O||E&&Ri(E,r.props)||I&&Ri(I,r.props))return;E&&r.setState({preSelection:E}),(l=(o=r.props).onChange)===null||l===void 0||l.call(o,[E,I],p)}else{var F=du(N,y,r.props.locale,v,(c=r.props.selected)!==null&&c!==void 0?c:void 0);if(F||!N)r.setSelected(F,p,!0);else if(!r.props.inline){var U=yJ(N,(d=r.state.preSelection)!==null&&d!==void 0?d:void 0);U&&(!r.props.minDate||!Bo(U,r.props.minDate))&&(!r.props.maxDate||!ec(U,r.props.maxDate))&&r.setState({preSelection:U})}}}},r.handleSelect=function(s,a,o){var l;if(!r.props.readOnly){var c=r.props,d=c.selectsRange,u=c.startDate,f=c.endDate,p=c.locale,h=c.swapRange,m=(l=r.props.dateFormat)!==null&&l!==void 0?l:t.defaultProps.dateFormat,g=!d||u&&!f&&(h||!sw(s,u));if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&g&&r.sendFocusBackToInput(),r.props.onChangeRaw){var x=Ca(s,{dateFormat:m,locale:p});r.props.onChangeRaw(a,{date:s,formattedDate:x})}r.setSelected(s,a,!1,o),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect?r.setPreSelection(s):g&&r.setOpen(!1)}},r.setSelected=function(s,a,o,l){var c,d,u=r.props.timeZone,f=s;if(f&&u&&(f=jl(f,u)),r.props.showYearPicker){if(f!==null&&jy(hn(f),r.props))return}else if(r.props.showMonthYearPicker){if(f!==null&&_R(f,r.props))return}else if(f!==null&&Ri(f,r.props))return;var p=r.props,h=p.onChange,m=p.selectsRange,g=p.startDate,x=p.endDate,y=p.selectsMultiple,v=p.selectedDates,N=p.minTime,j=p.swapRange;if(!ku(r.props.selected,f)||r.props.allowSameDay||m||y)if(f!==null&&(r.props.selected&&(!o||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(f=Sl(f,{hour:Zs(r.props.selected),minute:ea(r.props.selected),second:jd(r.props.selected)})),!o&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&N&&(f=Sl(f,{hour:N.getHours(),minute:N.getMinutes(),second:N.getSeconds()})),r.props.inline||r.setState({preSelection:f}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:l})),m){var D=!g&&!x,T=g&&!x,A=!g&&!!x,S=g&&x;D?h==null||h([f,null],a):T?f===null?h==null||h([null,null],a):sw(f,g)?j?h==null||h([f,g],a):h==null||h([f,null],a):h==null||h([g,f],a):A&&(f&&sw(f,x)?h==null||h([f,x],a):h==null||h([f,null],a)),S&&(h==null||h([f,null],a))}else if(y){if(f!==null)if(!(v!=null&&v.length))h==null||h([f],a);else{var E=v.some(function(L){return pn(L,f)});if(E){var I=v.filter(function(L){return!pn(L,f)});h==null||h(I,a)}else h==null||h(Ho(Ho([],v,!0),[f],!1),a)}}else h==null||h(f,a);o||((d=(c=r.props).onSelect)===null||d===void 0||d.call(c,f,a),r.setState({inputValue:null}))},r.setPreSelection=function(s){if(!r.props.readOnly){var a=Zl(r.props.minDate),o=Zl(r.props.maxDate),l=!0;if(s){var c=_m(s);if(a&&o)l=xu(s,r.props.minDate,r.props.maxDate);else if(a){var d=_m(r.props.minDate);l=ec(s,d)||ku(c,d)}else if(o){var u=DA(r.props.maxDate);l=Bo(s,u)||ku(c,u)}}l&&r.setState({preSelection:s})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(s,a){var o,l;if(!r.props.selectsMultiple){var c=r.props,d=c.selectsRange,u=c.startDate,f=c.endDate,p=c.onChange,h=c.timeZone;if(d)if(a==="start"){if(u){var m=Sl(u,{hour:Zs(s),minute:ea(s)});r.setState({preSelection:m}),h&&(m=jl(m,h)),p==null||p([m,f?h?jl(f,h):f:null],void 0)}}else if(a==="end"){if(f){var g=Sl(f,{hour:Zs(s),minute:ea(s)});r.setState({preSelection:g}),h&&(g=jl(g,h)),p==null||p([u?h?jl(u,h):u:null,g],void 0)}}else{var x=u&&!f;if(x){var m=Sl(u,{hour:Zs(s),minute:ea(s)});r.setState({preSelection:m}),h&&(m=jl(m,h)),p==null||p([m,null],void 0)}else if(u&&f){var g=Sl(f,{hour:Zs(s),minute:ea(s)});r.setState({preSelection:g}),h&&(g=jl(g,h)),p==null||p([h?jl(u,h):u,g],void 0)}else{var y=Sl(r.getPreSelection(),{hour:Zs(s),minute:ea(s)});r.setState({preSelection:y})}}else{var v=r.props.selected?r.props.selected:r.getPreSelection(),y=r.props.selected?s:Sl(v,{hour:Zs(s),minute:ea(s)});r.setState({preSelection:y}),y&&h&&(y=jl(y,h)),(l=(o=r.props).onChange)===null||l===void 0||l.call(o,y)}r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var s,a;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(a=(s=r.props).onInputClick)===null||a===void 0||a.call(s)},r.handleTimeOnlyArrowKey=function(s){var a,o,l,c,d=r.props.selected||r.state.preSelection||Nn(),u=(a=r.props.timeIntervals)!==null&&a!==void 0?a:30,f=(o=r.props.dateFormat)!==null&&o!==void 0?o:t.defaultProps.dateFormat,p=Array.isArray(f)?f[0]:f,h=_m(d),m=Zs(d)*60+ea(d),g=23*60+60-u,x;if(s===nt.ArrowUp){var y=Math.max(0,m-u);x=Rg(h,y)}else{var y=Math.min(g,m+u);x=Rg(h,y)}var v=dr(x,p||t.defaultProps.dateFormat,r.props.locale);if(r.setState({preSelection:x,inputValue:v}),!(r.props.selectsRange||r.props.selectsMultiple)){var N=r.props.selected?r.props.selected:r.getPreSelection(),j=r.props.selected?x:Sl(N,{hour:Zs(x),minute:ea(x)});(c=(l=r.props).onChange)===null||c===void 0||c.call(l,j),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),requestAnimationFrame(function(){r.scrollToTimeOption(x)})}},r.handleTimeOnlyEnterKey=function(s){var a,o,l,c,d=s.target,u=d.value,f=(a=r.props.dateFormat)!==null&&a!==void 0?a:t.defaultProps.dateFormat,p=r.props.timeFormat||"p",h=r.state.preSelection||r.props.selected||Nn(),m=du(u,f,r.props.locale,(o=r.props.strictParsing)!==null&&o!==void 0?o:!1,h),g=h;if(m&&Da(m))g=m;else{var x=((l=r.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(".react-datepicker__time-list-item[tabindex='0']");if(x instanceof HTMLElement){var y=(c=x.textContent)===null||c===void 0?void 0:c.trim();if(y){var v=du(y,p,r.props.locale,!1,h);v&&Da(v)&&(g=v)}}}r.handleTimeChange(g),r.setOpen(!1),r.sendFocusBackToInput()},r.scrollToTimeOption=function(s){var a,o;if(!((a=r.calendar)===null||a===void 0)&&a.containerRef.current){for(var l=r.calendar.containerRef.current,c=Array.from(l.querySelectorAll(".react-datepicker__time-list-item")),d=null,u=1/0,f=r.props.timeFormat||"p",p=0,h=c;p<h.length;p++){var m=h[p],g=(o=m.textContent)===null||o===void 0?void 0:o.trim();if(g){var x=du(g,f,r.props.locale,!1,s);if(x&&Da(x)){if(RR(x,s)){d=m;break}var y=Math.abs(x.getTime()-s.getTime());y<u&&(u=y,d=m)}}}d&&(c.forEach(function(v){v.setAttribute("tabindex","-1")}),d.setAttribute("tabindex","0"),d.scrollIntoView({behavior:"smooth",block:"center"}))}},r.onInputKeyDown=function(s){var a,o,l,c,d,u;(o=(a=r.props).onKeyDown)===null||o===void 0||o.call(a,s);var f=s.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(f===nt.ArrowDown||f===nt.ArrowUp||f===nt.Enter)&&((l=r.onInputClick)===null||l===void 0||l.call(r));return}if(r.state.open&&r.props.showTimeSelectOnly){if(f===nt.ArrowDown||f===nt.ArrowUp){s.preventDefault(),r.handleTimeOnlyArrowKey(f);return}if(f===nt.Enter){s.preventDefault(),r.handleTimeOnlyEnterKey(s);return}}if(r.state.open){if(f===nt.ArrowDown||f===nt.ArrowUp){s.preventDefault();var p=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',h=((c=r.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(p);h instanceof HTMLElement&&h.focus({preventScroll:!0});return}var m=Nn(r.state.preSelection);f===nt.Enter?(s.preventDefault(),s.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===lw?(r.handleSelect(m,s),!r.props.shouldCloseOnSelect&&r.setPreSelection(m)):r.setOpen(!1)):f===nt.Escape?(s.preventDefault(),s.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):f===nt.Tab&&r.setOpen(!1),r.inputOk()||(u=(d=r.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:ow})}},r.onPortalKeyDown=function(s){var a=s.key;a===nt.Escape&&(s.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(s){var a,o,l,c,d,u,f=r.props,p=f.minDate,h=f.maxDate,m=f.disabledKeyboardNavigation,g=f.showWeekPicker,x=f.shouldCloseOnSelect,y=f.locale,v=f.calendarStartDay,N=f.adjustDateOnChange,j=f.inline;if((o=(a=r.props).onKeyDown)===null||o===void 0||o.call(a,s),!m){var D=s.key,T=s.shiftKey,A=Nn(r.state.preSelection),S=function(L,O){var F=O;switch(L){case nt.ArrowRight:F=g?xb(O,1):fo(O,1);break;case nt.ArrowLeft:F=g?hA(O):OG(O);break;case nt.ArrowUp:F=hA(O);break;case nt.ArrowDown:F=xb(O,1);break;case nt.PageUp:F=T?ep(O,1):Fu(O,1);break;case nt.PageDown:F=T?Ql(O,1):ho(O,1);break;case nt.Home:F=Sd(O,y,v);break;case nt.End:F=jJ(O);break}return F},E=function(L,O){for(var F=40,U=L,W=!1,X=0,P=S(L,O);!W;){if(X>=F){P=O;break}p&&P<p&&(U=nt.ArrowRight,P=Ri(p,r.props)?S(U,P):p),h&&P>h&&(U=nt.ArrowLeft,P=Ri(h,r.props)?S(U,P):h),Ri(P,r.props)?((U===nt.PageUp||U===nt.Home)&&(U=nt.ArrowRight),(U===nt.PageDown||U===nt.End)&&(U=nt.ArrowLeft),P=S(U,P)):W=!0,X++}return P};if(D===nt.Enter){s.preventDefault(),r.handleSelect(A,s),!x&&r.setPreSelection(A);return}else if(D===nt.Escape){s.preventDefault(),r.setOpen(!1),r.inputOk()||(c=(l=r.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:ow});return}var I=null;switch(D){case nt.ArrowLeft:case nt.ArrowRight:case nt.ArrowUp:case nt.ArrowDown:case nt.PageUp:case nt.PageDown:case nt.Home:case nt.End:I=E(D,A);break}if(!I){(u=(d=r.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:ow});return}s.preventDefault(),r.setState({lastPreSelectChange:lw}),N&&r.setSelected(I),r.setPreSelection(I),j&&r.setState({shouldFocusDayInline:!0})}},r.onPopperKeyDown=function(s){var a=s.key;a===nt.Escape&&(s.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),r.sendFocusBackToInput();var a=r.props,o=a.selectsRange,l=a.onChange;o?l==null||l([null,null],s):l==null||l(null,s),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(s){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(s)&&r.setOpen(!1)},r.handleMonthSelectedInChange=function(s){r.setState({monthSelectedIn:s})},r.renderCalendar=function(){var s,a;return!r.props.inline&&!r.isCalendarOpen()?null:ge.createElement(tX,an({showMonthYearDropdown:void 0,ref:function(o){r.calendar=o}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(s=r.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:OJ(r.modifyHolidays()),outsideClickIgnoreClass:r.props.outsideClickIgnoreClass,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(a=r.props.dropdownMode)!==null&&a!==void 0?a:t.defaultProps.dropdownMode,onMonthSelectedInChange:r.handleMonthSelectedInChange}),r.props.children)},r.renderAriaLiveRegion=function(){var s,a=r.props.locale,o=(s=r.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,l=r.props.showTimeInput||r.props.showTimeSelect,c=l?"PPPPp":"PPPP",d;return r.props.selectsRange?d="Selected start date: ".concat(Ca(r.props.startDate,{dateFormat:c,locale:a}),". ").concat(r.props.endDate?"End date: "+Ca(r.props.endDate,{dateFormat:c,locale:a}):""):r.props.showTimeSelectOnly?d="Selected time: ".concat(Ca(r.props.selected,{dateFormat:o,locale:a})):r.props.showYearPicker?d="Selected year: ".concat(Ca(r.props.selected,{dateFormat:"yyyy",locale:a})):r.props.showMonthYearPicker?d="Selected month: ".concat(Ca(r.props.selected,{dateFormat:"MMMM yyyy",locale:a})):r.props.showQuarterYearPicker?d="Selected quarter: ".concat(Ca(r.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):d="Selected date: ".concat(Ca(r.props.selected,{dateFormat:c,locale:a})),ge.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},d)},r.renderDateInput=function(){var s,a,o,l,c,d,u,f=Er(r.props.className,(s={},s[r.props.outsideClickIgnoreClass||t.defaultProps.outsideClickIgnoreClass]=r.state.open,s)),p=r.props.customInput||ge.createElement("input",{type:"text"}),h=r.props.customInputRef||"ref",m={},g=(o=r.props["aria-describedby"])!==null&&o!==void 0?o:r.props.ariaDescribedBy,x=(l=r.props["aria-invalid"])!==null&&l!==void 0?l:r.props.ariaInvalid,y=(c=r.props["aria-label"])!==null&&c!==void 0?c:r.props.ariaLabel,v=(d=r.props["aria-labelledby"])!==null&&d!==void 0?d:r.props.ariaLabelledBy,N=(u=r.props["aria-required"])!==null&&u!==void 0?u:r.props.ariaRequired;return g!=null&&(m["aria-describedby"]=g),x!=null&&(m["aria-invalid"]=x),y!=null&&(m["aria-label"]=y),v!=null&&(m["aria-labelledby"]=v),N!=null&&(m["aria-required"]=N),C.cloneElement(p,an((a={},a[h]=function(j){r.input=j},a.value=r.getInputValue(),a.onBlur=r.handleBlur,a.onChange=r.handleChange,a.onClick=r.onInputClick,a.onFocus=r.handleFocus,a.onKeyDown=r.onInputKeyDown,a.id=r.props.id,a.name=r.props.name,a.form=r.props.form,a.autoFocus=r.props.autoFocus,a.placeholder=r.props.placeholderText,a.disabled=r.props.disabled,a.autoComplete=r.props.autoComplete,a.className=Er(p.props.className,f),a.title=r.props.title,a.readOnly=r.props.readOnly,a.required=r.props.required,a.tabIndex=r.props.tabIndex,a),m))},r.renderClearButton=function(){var s=r.props,a=s.isClearable,o=s.disabled,l=s.selected,c=s.startDate,d=s.endDate,u=s.clearButtonTitle,f=s.clearButtonClassName,p=f===void 0?"":f,h=s.ariaLabelClose,m=h===void 0?"Close":h,g=s.selectedDates,x=s.readOnly;return a&&!x&&(l!=null||c!=null||d!=null||g!=null&&g.length)?ge.createElement("button",{type:"button",className:Er("react-datepicker__close-icon",p,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":m,onClick:r.onClearClick,title:u,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:PR,readOnly:!1,rangeSeparator:DR,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:px,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(n,r){var s,a,o,l;this.props.selectsRange&&UA(n.startDate,this.props.startDate)?this.setPreSelection(this.props.startDate):UA(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),this.props.selectsRange&&r.open===!1&&this.state.open===!0&&this.state.monthSelectedIn!==0&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:IA(this.props.highlightDates)}),!r.focused&&!ku(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((a=(s=this.props).onCalendarOpen)===null||a===void 0||a.call(s)),r.open===!0&&this.state.open===!1&&((l=(o=this.props).onCalendarClose)===null||l===void 0||l.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,s=n.icon,a=n.calendarIconClassname,o=n.calendarIconClassName,l=n.toggleCalendarOnIconClick,c=this.state.open;return a&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),ge.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&ge.createElement(nX,an({icon:s,className:Er(o,!o&&a,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?ge.createElement(FR,{enableTabLoop:this.props.enableTabLoop},ge.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=ge.createElement(IR,an({portalId:this.props.portalId},this.props),r)),ge.createElement("div",null,this.renderInputContainer(),r)}return ge.createElement(oX,an({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow,monthHeaderPosition:this.props.monthHeaderPosition}))},t}(C.Component),cX="input",lw="navigate";const qr=C.forwardRef(({label:e,error:t,helperText:n,className:r,id:s,value:a,onChange:o,name:l,disabled:c,required:d,...u},f)=>{const p=s||l||Math.random().toString(36).substr(2,9),h=a&&typeof a=="string"&&Og(j5(a))?j5(a):null,m=y=>{if(o){const v=y?qi(y,"yyyy-MM-dd"):"";o({target:{value:v,name:l,type:"date"},currentTarget:{value:v,name:l},preventDefault:()=>{},stopPropagation:()=>{}})}},g=({date:y,changeYear:v,changeMonth:N,decreaseMonth:j,increaseMonth:D,prevMonthButtonDisabled:T,nextMonthButtonDisabled:A})=>{const S=[],E=new Date().getFullYear();for(let L=1950;L<=E+10;L++)S.push(L);const I=["January","February","March","April","May","June","July","August","September","October","November","December"];return i.jsxs("div",{className:"flex items-center justify-between px-2 py-2",children:[i.jsx("button",{onClick:j,disabled:T,type:"button",className:"p-1 hover:bg-gray-100 rounded-full disabled:opacity-50 transition-colors",children:i.jsx(gc,{size:18,className:"text-gray-600"})}),i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("select",{value:I[y.getMonth()],onChange:({target:{value:L}})=>N(I.indexOf(L)),className:"text-sm font-bold text-gray-900 bg-transparent border-none focus:ring-0 focus:outline-none cursor-pointer py-1 pl-1 pr-6 hover:text-brand-primary transition-colors",children:I.map(L=>i.jsx("option",{value:L,children:L},L))}),i.jsx("select",{value:y.getFullYear(),onChange:({target:{value:L}})=>v(parseInt(L)),className:"text-sm font-bold text-gray-900 bg-transparent border-none focus:ring-0 focus:outline-none cursor-pointer py-1 pl-1 pr-6 hover:text-brand-primary transition-colors",children:S.map(L=>i.jsx("option",{value:L,children:L},L))})]}),i.jsx("button",{onClick:D,disabled:A,type:"button",className:"p-1 hover:bg-gray-100 rounded-full disabled:opacity-50 transition-colors",children:i.jsx(gf,{size:18,className:"text-gray-600"})})]})},x=C.forwardRef(({value:y,onClick:v,className:N,id:j,disabled:D,required:T,name:A,...S},E)=>i.jsx("button",{type:"button",onClick:v,ref:E,id:j,name:A,disabled:D,className:`${N} text-left flex items-center w-full`,...S,children:y?i.jsx("span",{className:"text-text-primary",children:y}):i.jsx("span",{className:"text-text-muted",children:"Select date"})}));return x.displayName="ButtonInput",i.jsxs("div",{className:"w-full",children:[e&&i.jsx("label",{htmlFor:p,className:"block text-sm font-medium text-text-secondary mb-1",children:e}),i.jsxs("div",{className:"relative",children:[i.jsx(lX,{...u,name:l,id:p,selected:h,onChange:m,dateFormat:"MMM d, yyyy",placeholderText:"Select date",disabled:c,required:d,customInput:i.jsx(x,{}),portalId:"root",className:`
              w-full rounded-lg border bg-bg-card
              ${t?"border-status-error focus:ring-status-error":"border-border focus:ring-brand-primary"}
              pl-3 pr-10
              py-2 text-sm text-text-primary
              focus:outline-none focus:ring-2 focus:border-transparent
              disabled:bg-bg-main disabled:text-text-muted disabled:cursor-not-allowed
              h-[38px]
              ${r||""}
            `,wrapperClassName:"w-full",renderCustomHeader:g,showPopperArrow:!1,popperProps:{strategy:"fixed"},formatWeekDay:y=>y.substr(0,3),dayClassName:()=>"text-sm text-gray-700 hover:bg-brand-primary hover:text-white rounded-full",calendarClassName:"!border-border !font-sans shadow-lg !rounded-lg !bg-white",...u}),i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-text-muted z-10",children:i.jsx(pa,{size:16})})]}),t&&i.jsx("p",{className:"mt-1 text-xs text-status-error",children:t}),!t&&n&&i.jsx("p",{className:"mt-1 text-xs text-text-muted",children:n}),i.jsx("style",{children:`
          .react-datepicker-wrapper {
            width: 100%;
          }
          .react-datepicker {
            font-family: inherit;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem !important;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            background-color: white;
            padding: 0.5rem;
          }
          .react-datepicker__header {
            background-color: white;
            border-bottom: none;
            padding-top: 0.5rem;
          }
          .react-datepicker__month-container {
            width: 100%;
          }
           .react-datepicker__month {
            margin: 0;
           }
          .react-datepicker__month-text {
            border-radius: 0.5rem !important;
            padding: 0.5rem !important;
            width: 5rem !important;
            margin: 0.2rem;
            font-weight: 500;
            color: #374151; /* text-gray-700 */
          }
          .react-datepicker__month-text:hover {
            background-color: #f3f4f6 !important;
            color: #1f2937 !important;
          }
          .react-datepicker__month-text--selected,
          .react-datepicker__month-text--keyboard-selected {
            background-color: #4f46e5 !important; /* brand-primary */
            color: white !important;
            font-weight: 600;
          }
          .react-datepicker__day-name {
            color: #6b7280;
            font-weight: 500;
            margin: 0.2rem;
            width: 2rem;
          }
          .react-datepicker__day {
            margin: 0.2rem;
            width: 2rem;
            line-height: 2rem;
            border-radius: 9999px;
          }
          .react-datepicker__day--selected {
            background-color: #4f46e5 !important;
            color: white !important;
          }
          .react-datepicker__day--keyboard-selected {
            background-color: #e0e7ff !important;
            color: #4f46e5 !important;
          }
          .react-datepicker__day--today {
            font-weight: bold;
            color: #4f46e5;
          }
          .react-datepicker__day:hover:not(.react-datepicker__day--disabled):not(.react-datepicker__day--selected) {
            background-color: #f3f4f6 !important;
            color: #1f2937 !important;
          }
          .react-datepicker-popper {
            z-index: 10050 !important;
          }
        `})]})});qr.displayName="DatePicker";const dX=({docType:e,document:t,onUpload:n,onView:r,readOnly:s=!1,isMandatory:a=!1})=>{const o=!!t,l=o&&t.expiryDate&&new Date(t.expiryDate)<new Date,c=o&&!l&&t.expiryDate&&new Date(t.expiryDate)<new Date(Date.now()+30*24*60*60*1e3),d=()=>o?l?"bg-red-50 border-red-200":c?"bg-amber-50 border-amber-200":"bg-green-50 border-green-200":a?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200",u=()=>o?l?i.jsx(bs,{size:16,className:"text-red-500"}):c?i.jsx(Es,{size:16,className:"text-amber-500"}):i.jsx(Yr,{size:16,className:"text-green-500"}):i.jsx(bs,{size:16,className:a?"text-red-500":"text-gray-400"}),f=()=>o?l?"Expired":c?"Expiring Soon":"Valid":a?"Missing":"Not Uploaded",p=h=>h.startsWith("http")?h:`${xs}/${h}`;return i.jsxs("div",{className:`border rounded-xl p-3 transition-all hover:shadow-sm ${d()}`,children:[i.jsx("div",{className:"flex justify-between items-start mb-2",children:i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"p-1.5 rounded-lg bg-white/60",children:i.jsx(yr,{size:18,className:"text-text-primary"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm text-text-primary",children:e.name}),i.jsxs("div",{className:"flex items-center gap-1 text-[10px] mt-0.5",children:[u(),i.jsx("span",{className:"font-medium text-text-secondary uppercase tracking-tight",children:f()})]})]})]})}),i.jsxs("div",{className:"space-y-2",children:[o&&i.jsxs("div",{className:"text-[10px] text-text-secondary pl-1",children:[i.jsxs("p",{children:["Uploaded:"," ",new Date(t.versions[t.versions.length-1].uploadedAt).toLocaleDateString()]}),t.expiryDate&&i.jsxs("p",{className:l?"text-red-600 font-medium":"",children:["Expires: ",new Date(t.expiryDate).toLocaleDateString()]})]}),i.jsx("div",{className:"pt-1 flex gap-2",children:o?i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",onClick:()=>r(t),className:"flex-1 py-1 px-2 bg-white border border-border rounded text-xs text-text-primary hover:bg-gray-50 transition-colors font-medium shadow-sm",children:"View"}),i.jsx("button",{type:"button",onClick:()=>window.open(p(t.versions[t.versions.length-1].fileUrl),"_blank"),className:"flex-none py-1 px-2 bg-white border border-border rounded text-xs text-text-primary hover:bg-gray-50 transition-colors shadow-sm flex items-center justify-center",title:"Download",children:i.jsx(xf,{size:14})}),!s&&i.jsx("button",{type:"button",onClick:()=>n(e._id),className:"flex-1 py-1 px-2 bg-white border border-border rounded text-xs text-text-primary hover:bg-gray-50 transition-colors font-medium shadow-sm",children:"Update"})]}):!s&&i.jsxs("button",{type:"button",onClick:()=>n(e._id),className:"w-full py-1.5 px-3 bg-white border border-border rounded-lg text-xs text-brand-primary hover:bg-brand-primary/5 transition-colors font-medium shadow-sm flex items-center justify-center gap-2",children:[i.jsx(yi,{size:14}),"Upload Document"]})})]})]})},zR=({employeeId:e,readOnly:t=!1,roleName:n})=>{var L;const[r,s]=C.useState([]),[a,o]=C.useState([]),[l,c]=C.useState([]),[d,u]=C.useState(!0),[f,p]=C.useState(null),[h,m]=C.useState(!1),[g,x]=C.useState(null),[y,v]=C.useState(!1),[N,j]=C.useState(null),D=async()=>{u(!0);try{const O=[xe.getAllDocumentTypes(),xe.getEmployeeDocuments(e)];n&&O.push(xe.getRoles());const[F,U,W]=await Promise.all(O);if(F.success&&s(F.data),U.success&&o(U.data),n&&W){const X=Array.isArray(W)?W:W.data,P=X==null?void 0:X.find(z=>z.name===n);P&&P.mandatoryDocuments&&c(P.mandatoryDocuments)}}catch(O){p("Failed to load documents"),console.error(O)}finally{u(!1)}};C.useEffect(()=>{e&&D()},[e,n]);const T=O=>{x(O),m(!0)},A=()=>{m(!1),D()},S=O=>{j(O),v(!0)},E=O=>O.startsWith("http")?O:`${xs}/${O}`,I=r.reduce((O,F)=>{const U=F.category||"Other";return O[U]||(O[U]=[]),O[U].push(F),O},{});return i.jsxs("div",{className:"space-y-6",children:[f&&i.jsx("div",{className:"text-red-500 mb-4",children:f}),d?i.jsx("div",{className:"flex justify-center p-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"})}):Object.entries(I).map(([O,F])=>i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary border-b border-border pb-2",children:O}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map(U=>{const W=a.find(P=>P.documentTypeId._id===U._id||P.documentTypeId===U._id),X=U.isRequired||l.some(P=>P===U._id||typeof P=="object"&&P._id===U._id);return i.jsx(dX,{docType:U,document:W,onUpload:T,onView:S,readOnly:t,isMandatory:X},U._id)})})]},O)),h&&g&&i.jsx(uX,{isOpen:h,onClose:()=>m(!1),onSuccess:A,employeeId:e,docTypeId:g,docType:r.find(O=>O._id===g)}),y&&N&&i.jsx(Hn,{isOpen:y,onClose:()=>v(!1),title:N.documentTypeId.name||"Document Details",maxWidth:"max-w-4xl",children:i.jsx("div",{className:"space-y-6",children:i.jsx("div",{className:"flex gap-4 h-[60vh]",children:i.jsx("div",{className:"flex-1 bg-gray-100 rounded-lg overflow-hidden border border-border flex items-center justify-center",children:(L=N.versions[N.versions.length-1].mimeType)!=null&&L.includes("image")?i.jsx("img",{src:E(N.versions[N.versions.length-1].fileUrl),className:"max-w-full max-h-full object-contain"}):N.versions[N.versions.length-1].mimeType==="application/pdf"?i.jsx("iframe",{src:E(N.versions[N.versions.length-1].fileUrl),className:"w-full h-full min-h-[70vh]",title:"Document Preview"}):i.jsxs("div",{className:"text-center p-4",children:[i.jsx(yr,{size:48,className:"mx-auto text-text-muted mb-2"}),i.jsx("p",{className:"text-text-secondary mb-4",children:"Preview not available for this file type."}),i.jsxs("a",{href:E(N.versions[N.versions.length-1].fileUrl),target:"_blank",rel:"noreferrer",className:"px-4 py-2 bg-brand-primary text-white rounded-lg inline-flex items-center gap-2",children:[i.jsx(xf,{size:16})," Download"]})]})})})})})]})},uX=({isOpen:e,onClose:t,onSuccess:n,employeeId:r,docTypeId:s,docType:a})=>{var g;const[o,l]=C.useState(null),[c,d]=C.useState(""),[u,f]=C.useState(!1),[p,h]=C.useState(!1),m=async x=>{if(x.preventDefault(),!!o){f(!0);try{const y=new FormData;y.append("file",o),y.append("employeeId",r),y.append("documentTypeId",s),c&&y.append("expiryDate",c),await xe.uploadEmployeeDocument(y),h(!0),setTimeout(()=>{n(),h(!1)},1500)}catch(y){console.error(y),alert("Upload failed. Please try again.")}finally{f(!1)}}};return i.jsx(Hn,{isOpen:e,onClose:p?()=>{}:t,title:`Upload ${(a==null?void 0:a.name)||"Document"}`,children:p?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center animate-in fade-in zoom-in duration-300",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-4",children:i.jsx(Yr,{size:32})}),i.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"Upload Successful!"}),i.jsx("p",{className:"text-text-secondary",children:"The document has been uploaded securely."})]}):i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["File ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"file",onChange:x=>{var y;return l(((y=x.target.files)==null?void 0:y[0])||null)},className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/10 file:text-brand-primary hover:file:bg-brand-primary/20",accept:(g=a==null?void 0:a.allowedFileTypes)==null?void 0:g.join(","),required:!0}),i.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Max size:"," ",a!=null&&a.maxFileSize?Math.round(a.maxFileSize/1024/1024):5,"MB"]})]}),a!=null&&a.expiryRequired?i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Expiry Date ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"date",value:c,onChange:x=>d(x.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20",required:!0})]}):i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Expiry Date (Optional)"}),i.jsx("input",{type:"date",value:c,onChange:x=>d(x.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx("button",{type:"button",onClick:t,disabled:u,className:"px-4 py-2 text-text-secondary hover:bg-gray-50 rounded-lg disabled:opacity-50",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:u||!o,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 flex items-center gap-2",children:u?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):"Upload"})]})]})})},fX=({employeeId:e,readOnly:t=!1})=>{const{showToast:n}=ux(),[r,s]=C.useState([]),[a,o]=C.useState(!0),[,l]=C.useState(null),[c,d]=C.useState(!1),[u,f]=C.useState(!1),[p,h]=C.useState(null),m=async()=>{o(!0);try{const v=await xe.getAssetAssignments({employeeId:e});Array.isArray(v)?s(v):v&&v.assignments?s(v.assignments):s([])}catch(v){l("Failed to load assets"),console.error(v)}finally{o(!1)}};C.useEffect(()=>{e&&m()},[e]);const g=()=>{d(!1),m(),n("Asset assigned successfully","success")},x=()=>{f(!1),m(),n("Asset returned successfully","success")},y=v=>{const N=v.toLowerCase();return N.includes("laptop")||N.includes("computer")?i.jsx(e$,{size:20}):N.includes("mobile")||N.includes("phone")?i.jsx(RS,{size:20}):i.jsx(Jh,{size:20})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Assigned Assets"}),!t&&i.jsx(at,{onClick:()=>d(!0),leftIcon:i.jsx(Wr,{size:16}),disabled:!e,type:"button",children:"Assign Asset"})]}),a?i.jsx("div",{className:"flex justify-center p-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"})}):r.length===0?i.jsxs("div",{className:"text-center py-12 bg-bg-card rounded-xl border border-border",children:[i.jsx(Jh,{size:48,className:"mx-auto text-text-muted mb-3"}),i.jsx("h3",{className:"text-lg font-medium text-text-primary",children:"No Assets Assigned"}),i.jsx("p",{className:"text-text-secondary",children:"This employee currently has no assets assigned."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(v=>{var N,j,D,T;return i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-primary/10 flex items-center justify-center text-brand-primary",children:y(((j=(N=v.assetId)==null?void 0:N.categoryId)==null?void 0:j.name)||"")}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-text-primary",children:((D=v.assetId)==null?void 0:D.name)||"Unknown Asset"}),i.jsx("p",{className:"text-xs text-text-secondary",children:((T=v.assetId)==null?void 0:T.assetCode)||"N/A"})]})]}),i.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${v.status==="Active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:v.status})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-text-secondary mb-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"block text-xs text-text-muted",children:"Issued"}),new Date(v.issueDate).toLocaleDateString()]}),v.status==="Returned"&&i.jsxs("div",{children:[i.jsx("span",{className:"block text-xs text-text-muted",children:"Returned"}),new Date(v.actualReturnDate).toLocaleDateString()]})]}),v.status==="Active"&&!t&&i.jsx("div",{className:"pt-3 border-t border-border flex justify-end",children:i.jsxs("button",{type:"button",onClick:()=>{h(v),f(!0)},className:"text-sm text-red-600 hover:text-red-700 font-medium flex items-center gap-1",children:[i.jsx(kH,{size:14})," Return Asset"]})})]},v._id)})}),c&&i.jsx(hX,{isOpen:c,onClose:()=>d(!1),onSuccess:g,employeeId:e}),u&&p&&i.jsx(pX,{isOpen:u,onClose:()=>f(!1),onSuccess:x,assignment:p})]})},hX=({isOpen:e,onClose:t,onSuccess:n,employeeId:r})=>{const[s,a]=C.useState(!1),[o,l]=C.useState([]),[c,d]=C.useState(""),[u,f]=C.useState({assetId:"",issueDate:new Date().toISOString().split("T")[0],expectedReturnDate:"",conditionAtIssue:"New",notes:""});C.useEffect(()=>{p()},[]);const p=async()=>{try{const g=await xe.getAssets({status:"Available"});g.assets&&l(g.assets)}catch(g){console.error("Failed to fetch assets",g)}},h=async g=>{g.preventDefault(),a(!0);try{await xe.assignAsset({...u,employeeId:r}),n()}catch(x){console.error(x),alert(x.message||"Failed to assign asset")}finally{a(!1)}},m=o.filter(g=>g.name.toLowerCase().includes(c.toLowerCase())||g.assetCode.toLowerCase().includes(c.toLowerCase()));return i.jsx(Hn,{isOpen:e,onClose:t,title:"Assign Asset",children:i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Search Asset"}),i.jsxs("div",{className:"relative",children:[i.jsx(bf,{className:"absolute left-3 top-2.5 text-text-muted",size:16}),i.jsx("input",{type:"text",placeholder:"Search by name or code...",value:c,onChange:g=>d(g.target.value),className:"w-full pl-9 pr-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Select Asset ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{value:u.assetId,onChange:g=>f({...u,assetId:g.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20",required:!0,size:5,children:[i.jsx("option",{value:"",children:"Select an asset..."}),m.map(g=>i.jsxs("option",{value:g._id,children:[g.name," (",g.assetCode,") - ",g.model]},g._id))]}),m.length===0&&i.jsx("p",{className:"text-xs text-text-muted mt-1",children:"No available assets found matching your search."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(Ze,{label:"Issue Date",type:"date",value:u.issueDate,onChange:g=>f({...u,issueDate:g.target.value}),required:!0}),i.jsx(Ze,{label:"Expected Return (Optional)",type:"date",value:u.expectedReturnDate,onChange:g=>f({...u,expectedReturnDate:g.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Condition at Issue"}),i.jsx(Gt,{value:u.conditionAtIssue,onChange:g=>f({...u,conditionAtIssue:g}),options:[{value:"New",label:"New"},{value:"Good",label:"Good"},{value:"Used",label:"Used"},{value:"Damaged",label:"Damaged"}]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes"}),i.jsx("textarea",{value:u.notes,onChange:g=>f({...u,notes:g.target.value}),rows:3,className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(at,{variant:"secondary",onClick:t,disabled:s,type:"button",children:"Cancel"}),i.jsx(at,{type:"submit",isLoading:s,disabled:!u.assetId,children:"Assign"})]})]})})},pX=({isOpen:e,onClose:t,onSuccess:n,assignment:r})=>{const[s,a]=C.useState(!1),[o,l]=C.useState({returnDate:new Date().toISOString().split("T")[0],conditionAtReturn:r.conditionAtIssue||"Good",notes:""}),c=async d=>{d.preventDefault(),a(!0);try{await xe.returnAsset(r._id,{returnDate:o.returnDate,conditionAtReturn:o.conditionAtReturn,notes:o.notes}),n()}catch(u){console.error(u),alert(u.message||"Failed to return asset")}finally{a(!1)}};return i.jsx(Hn,{isOpen:e,onClose:t,title:`Return ${r.assetId.name}`,children:i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg flex items-start gap-3",children:[i.jsx(bs,{className:"text-blue-500 shrink-0 mt-0.5",size:18}),i.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[i.jsxs("p",{className:"font-medium",children:["Passing Asset: ",r.assetId.assetCode]}),i.jsxs("p",{children:["Issued on: ",new Date(r.issueDate).toLocaleDateString()]})]})]}),i.jsx(Ze,{label:"Return Date",type:"date",value:o.returnDate,onChange:d=>l({...o,returnDate:d.target.value}),required:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Condition at Return"}),i.jsx(Gt,{value:o.conditionAtReturn,onChange:d=>l({...o,conditionAtReturn:d}),options:[{value:"New",label:"New"},{value:"Good",label:"Good"},{value:"Used",label:"Used"},{value:"Damaged",label:"Damaged"}]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes (Optional damage comments etc.)"}),i.jsx("textarea",{value:o.notes,onChange:d=>l({...o,notes:d.target.value}),rows:3,className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(at,{variant:"secondary",onClick:t,disabled:s,type:"button",children:"Cancel"}),i.jsx(at,{type:"submit",isLoading:s,children:"Confirm Return"})]})]})})},mX=["Basic Info","Work Info","Hierarchy","Personal","Identity","Contact","Bank Details","Documents","Assets","Separation","Additional"],gX={"Basic Info":hi,"Work Info":Zu,Hierarchy:LS,Personal:dU,Identity:LU,Contact:mb,"Bank Details":TS,Documents:yr,Assets:Jh,Separation:Tg,Additional:NL};function xX({isOpen:e,onClose:t,employee:n,viewMode:r=!1}){var F,U,W,X;const{user:s}=cn(),a=mX.filter(P=>{var z;return!(P==="Documents"&&!((z=s==null?void 0:s.accessibleModules)!=null&&z.includes("documents")))}),[o,l]=C.useState(a[0]),[c,d]=C.useState(!1),[u,f]=C.useState([]),[p,h]=C.useState([]),[m,g]=C.useState(null),[x,y]=C.useState(null),[v,N]=C.useState({employeeId:"",firstName:"",lastName:"",nickName:"",email:"",password:"",department:"",location:"",designation:"",role:"",employmentType:"",employeeStatus:"Active",sourceOfHire:"",dateOfJoining:"",totalExperience:"",reportingManager:"",dateOfBirth:"",gender:"",maritalStatus:"",aboutMe:"",expertise:"",uan:"",pan:"",aadhaar:"",workPhone:"",extension:"",seatingLocation:"",presentAddress:"",permanentAddress:"",personalMobile:"",personalEmail:"",dateOfExit:"",workExperience:[],education:[],dependents:[],bankDetails:{accountName:"",accountNumber:"",bankName:"",ifscCode:""}});C.useEffect(()=>{var P;e&&(j(),n?(N({...n,reportingManager:((P=n.reportingManager)==null?void 0:P._id)||n.reportingManager||"",dateOfJoining:n.dateOfJoining?n.dateOfJoining.split("T")[0]:"",dateOfBirth:n.dateOfBirth?n.dateOfBirth.split("T")[0]:"",dateOfExit:n.dateOfExit?n.dateOfExit.split("T")[0]:"",bankDetails:n.bankDetails||{accountName:"",accountNumber:"",bankName:"",ifscCode:""}}),n.profilePicture&&y(n.profilePicture.startsWith("http")?n.profilePicture:`${xs}/${n.profilePicture}`)):(N({employeeId:"",firstName:"",lastName:"",nickName:"",email:"",password:"",department:"",location:"",designation:"",role:"",employmentType:"",employeeStatus:"Active",sourceOfHire:"",dateOfJoining:"",totalExperience:"",reportingManager:"",dateOfBirth:"",gender:"",maritalStatus:"",aboutMe:"",expertise:"",uan:"",pan:"",aadhaar:"",workPhone:"",extension:"",seatingLocation:"",presentAddress:"",permanentAddress:"",personalMobile:"",personalEmail:"",dateOfExit:"",workExperience:[],education:[],dependents:[],bankDetails:{accountName:"",accountNumber:"",bankName:"",ifscCode:""}}),g(null),y(null)))},[e,n]);const j=async()=>{try{console.log("Fetching roles and employees...");const[P,z]=await Promise.all([xe.getRoles(),xe.getEmployees()]);console.log("Roles received:",P),console.log("Roles count:",P==null?void 0:P.length),f(P||[]),h(z)}catch(P){console.error("Failed to fetch dropdowns",P)}},D=P=>{const{name:z,value:oe}=P.target;N(Y=>({...Y,[z]:oe}))},T=P=>{var oe;const z=(oe=P.target.files)==null?void 0:oe[0];if(z){g(z);const Y=new FileReader;Y.onloadend=()=>{y(Y.result)},Y.readAsDataURL(z)}},A=()=>{g(null),y(null)},S=(P,z,oe,Y)=>{N(q=>{const _=[...q[P]];return _[z]={..._[z],[oe]:Y},{...q,[P]:_}})},E=(P,z)=>{N(oe=>({...oe,[P]:[...oe[P],z]}))},I=(P,z)=>{N(oe=>({...oe,[P]:oe[P].filter((Y,q)=>q!==z)}))},L=async P=>{P.preventDefault(),d(!0);try{const z=new FormData;Object.keys(v).forEach(oe=>{["user","_id","__v","addedTime","modifiedTime","addedBy","modifiedBy"].includes(oe)||(Array.isArray(v[oe])||oe==="bankDetails"?z.append(oe,JSON.stringify(v[oe])):v[oe]!==null&&v[oe]!==void 0&&z.append(oe,v[oe]))}),m&&z.append("profilePicture",m),n?await xe.updateEmployee(n._id,z):await xe.createEmployee(z),t()}catch(z){alert(z.message||"Failed to save employee")}finally{d(!1)}},O=(P,z,oe="text",Y=!1,q)=>i.jsx("div",{children:q?i.jsx(Gt,{label:P,required:Y,value:v[z],onChange:_=>D({target:{name:z,value:_}}),options:q.map(_=>({value:_,label:_})),disabled:r,className:"disabled:opacity-60"}):oe==="date"?i.jsx(qr,{label:P,name:z,value:v[z],onChange:D,disabled:r,required:Y}):i.jsx(Ze,{label:P,type:oe,name:z,value:v[z],onChange:D,disabled:r,required:Y,className:"disabled:opacity-60"})});return i.jsxs(Hn,{isOpen:e,onClose:t,title:r?"View Employee":n?"Edit Employee":"Add New Employee",maxWidth:"max-w-6xl",bodyClassName:"flex flex-col md:flex-row h-full overflow-hidden p-0",footer:r?void 0:i.jsxs("div",{className:"flex justify-end gap-3 w-full",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",disabled:c,children:"Cancel"}),i.jsx("button",{onClick:P=>L(P),className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors disabled:opacity-50",disabled:c,children:c?"Saving...":"Save Employee"})]}),children:[i.jsx("div",{className:"w-full md:w-64 bg-bg-main/30 border-b md:border-b-0 md:border-r border-border overflow-x-auto md:overflow-y-auto shrink-0 flex md:flex-col p-2 space-y-1",children:a.map(P=>{const z=gX[P]||hi;return i.jsxs("button",{onClick:()=>l(P),className:`px-4 py-3 text-sm font-medium text-left transition-colors flex items-center gap-3 whitespace-nowrap rounded-lg w-full ${o===P?"bg-brand-primary text-white shadow-sm":"text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[i.jsx(z,{size:18}),P]},P)})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.jsx("form",{onSubmit:L,children:i.jsxs("div",{className:"space-y-6",children:[o==="Basic Info"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"col-span-2 flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-24 h-24 rounded-full bg-bg-main border-2 border-dashed border-border flex items-center justify-center overflow-hidden relative group",children:x?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:x,alt:"Profile",className:"w-full h-full object-cover"}),!r&&i.jsx("button",{type:"button",onClick:A,className:"absolute inset-0 bg-black/50 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(br,{size:20})})]}):i.jsx(yi,{className:"text-gray-400",size:24})}),!r&&i.jsxs("div",{children:[i.jsx("input",{type:"file",id:"profileUpload",accept:"image/*",className:"hidden",onChange:T}),i.jsx("label",{htmlFor:"profileUpload",className:"cursor-pointer px-4 py-2 bg-bg-card border border-border rounded-lg hover:bg-bg-hover text-sm font-medium transition-colors text-text-primary",children:x?"Change Photo":"Upload Photo"}),i.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"PNG, JPG or GIF. Max 5MB."})]})]}),O("Employee ID","employeeId","text",!0),O("First Name","firstName","text",!0),O("Last Name","lastName","text",!0),O("Nick Name","nickName"),O("Email Address","email","email",!0),!n&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Password ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Iu,{name:"password",value:v.password,onChange:D,required:!n,placeholder:"Enter password for new user",className:"bg-bg-card"})]})]}),o==="Work Info"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O("Department","department","text",!1,["Engineering","HR","Sales","Marketing","Finance"]),O("Location","location","text",!1,["New York","London","Remote","Bangalore"]),O("Designation","designation"),i.jsx("div",{children:i.jsx(Gt,{label:"Role",value:v.role,onChange:P=>D({target:{name:"role",value:P}}),options:u.map(P=>({value:P.name,label:P.name})),disabled:r,className:"disabled:opacity-60"})}),O("Employment Type","employmentType","text",!1,["Permanent","Contract","Intern","Freelancer","Part-Time"]),O("Employee Status","employeeStatus","text",!1,["Active","Probation","On Leave","Notice Period","Terminated","Resigned"]),O("Source of Hire","sourceOfHire","text",!1,["Recruitment","Referral","Direct","Campus","Vendor"]),O("Date of Joining","dateOfJoining","date"),O("Total Experience","totalExperience")]}),o==="Hierarchy"&&i.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.jsx("div",{children:i.jsx(Gt,{label:"Reporting Manager",value:v.reportingManager,onChange:P=>D({target:{name:"reportingManager",value:P}}),options:p.map(P=>({value:P._id,label:`${P.firstName} ${P.lastName}`})),disabled:r,className:"disabled:opacity-60"})})}),o==="Personal"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O("Date of Birth","dateOfBirth","date"),O("Gender","gender","text",!1,["Male","Female","Other"]),O("Marital Status","maritalStatus","text",!1,["Single","Married","Divorced","Widowed"]),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"About Me"}),i.jsx("textarea",{name:"aboutMe",value:v.aboutMe,onChange:D,disabled:r,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 disabled:bg-bg-main bg-bg-card text-text-primary",rows:3})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Expertise / Ask Me"}),i.jsx("textarea",{name:"expertise",value:v.expertise,onChange:D,disabled:r,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 disabled:bg-bg-main bg-bg-card text-text-primary",rows:3})]})]}),o==="Identity"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O("UAN","uan"),O("PAN","pan"),O("Aadhaar","aadhaar")]}),o==="Contact"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O("Work Phone","workPhone"),O("Extension","extension"),O("Seating Location","seatingLocation"),O("Personal Mobile","personalMobile"),O("Personal Email","personalEmail","email"),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Present Address"}),i.jsx("textarea",{name:"presentAddress",value:v.presentAddress,onChange:D,disabled:r,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 disabled:bg-bg-main bg-bg-card text-text-primary",rows:2})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Permanent Address"}),i.jsx("textarea",{name:"permanentAddress",value:v.permanentAddress,onChange:D,disabled:r,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 disabled:bg-bg-main bg-bg-card text-text-primary",rows:2})]})]}),o==="Bank Details"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Account Holder Name"}),i.jsx(Ze,{value:((F=v.bankDetails)==null?void 0:F.accountName)||"",onChange:P=>N(z=>({...z,bankDetails:{...z.bankDetails,accountName:P.target.value}})),disabled:r,className:"disabled:opacity-60"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Account Number"}),i.jsx(Ze,{value:((U=v.bankDetails)==null?void 0:U.accountNumber)||"",onChange:P=>N(z=>({...z,bankDetails:{...z.bankDetails,accountNumber:P.target.value}})),disabled:r,className:"disabled:opacity-60"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Bank Name"}),i.jsx(Ze,{value:((W=v.bankDetails)==null?void 0:W.bankName)||"",onChange:P=>N(z=>({...z,bankDetails:{...z.bankDetails,bankName:P.target.value}})),disabled:r,className:"disabled:opacity-60"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"IFSC / SWIFT Code"}),i.jsx(Ze,{value:((X=v.bankDetails)==null?void 0:X.ifscCode)||"",onChange:P=>N(z=>({...z,bankDetails:{...z.bankDetails,ifscCode:P.target.value}})),disabled:r,className:"disabled:opacity-60"})]})]}),o==="Documents"&&(n?i.jsx(zR,{employeeId:n._id,readOnly:r,roleName:v.role}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-text-secondary",children:[i.jsx(yr,{size:48,className:"mb-4 text-text-muted"}),i.jsx("p",{className:"text-lg font-medium",children:"Please save the employee first"}),i.jsx("p",{className:"text-sm",children:"Documents can only be uploaded for existing employees."})]})),o==="Assets"&&(n?i.jsx(fX,{employeeId:n._id,readOnly:r}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-text-secondary",children:[i.jsx(Jh,{size:48,className:"mb-4 text-text-muted"}),i.jsx("p",{className:"text-lg font-medium",children:"Please save the employee first"}),i.jsx("p",{className:"text-sm",children:"Assets can only be assigned to existing employees."})]})),o==="Separation"&&i.jsx("div",{className:"grid grid-cols-2 gap-4",children:O("Date of Exit","dateOfExit","date")}),o==="Additional"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h3",{className:"font-medium",children:"Work Experience"}),!r&&i.jsxs("button",{type:"button",onClick:()=>E("workExperience",{companyName:"",jobTitle:"",fromDate:"",toDate:"",description:""}),className:"text-brand-primary text-sm flex items-center gap-1",children:[i.jsx(Wr,{size:16})," Add"]})]}),v.workExperience.map((P,z)=>i.jsxs("div",{className:"border p-3 rounded mb-2 relative",children:[!r&&i.jsx("button",{type:"button",onClick:()=>I("workExperience",z),className:"absolute top-2 right-2 text-red-500",children:i.jsx(br,{size:16})}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(Ze,{placeholder:"Company",value:P.companyName,onChange:oe=>S("workExperience",z,"companyName",oe.target.value),className:"w-full",disabled:r}),i.jsx(Ze,{placeholder:"Job Title",value:P.jobTitle,onChange:oe=>S("workExperience",z,"jobTitle",oe.target.value),className:"w-full",disabled:r}),i.jsx(qr,{placeholder:"From",value:P.fromDate?P.fromDate.split("T")[0]:"",onChange:oe=>S("workExperience",z,"fromDate",oe.target.value),disabled:r}),i.jsx(qr,{placeholder:"To",value:P.toDate?P.toDate.split("T")[0]:"",onChange:oe=>S("workExperience",z,"toDate",oe.target.value),disabled:r})]})]},z))]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h3",{className:"font-medium",children:"Education"}),!r&&i.jsxs("button",{type:"button",onClick:()=>E("education",{instituteName:"",degree:"",specialization:"",dateOfCompletion:""}),className:"text-brand-primary text-sm flex items-center gap-1",children:[i.jsx(Wr,{size:16})," Add"]})]}),v.education.map((P,z)=>i.jsxs("div",{className:"border p-3 rounded mb-2 relative",children:[!r&&i.jsx("button",{type:"button",onClick:()=>I("education",z),className:"absolute top-2 right-2 text-red-500",children:i.jsx(br,{size:16})}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(Ze,{placeholder:"Institute",value:P.instituteName,onChange:oe=>S("education",z,"instituteName",oe.target.value),className:"w-full",disabled:r}),i.jsx(Ze,{placeholder:"Degree",value:P.degree,onChange:oe=>S("education",z,"degree",oe.target.value),className:"w-full",disabled:r}),i.jsx(Ze,{placeholder:"Specialization",value:P.specialization,onChange:oe=>S("education",z,"specialization",oe.target.value),className:"w-full",disabled:r}),i.jsx(qr,{placeholder:"Completion Date",value:P.dateOfCompletion?P.dateOfCompletion.split("T")[0]:"",onChange:oe=>S("education",z,"dateOfCompletion",oe.target.value),disabled:r})]})]},z))]})]})]})})})]})}const yX=({isOpen:e,onClose:t})=>{const[n,r]=C.useState([]),[s,a]=C.useState([]),[o,l]=C.useState(!0),[c,d]=C.useState(""),[u,f]=C.useState(""),[p,h]=C.useState([]),[m,g]=C.useState({}),[x,y]=C.useState(!1),v=C.useRef(null);C.useEffect(()=>{e?N():(h([]),g({}),d(""),f(""),y(!1))},[e]);const N=async()=>{l(!0);try{const[E,I]=await Promise.all([xe.getAllDocumentTypes(),xe.getEmployees()]);E.success&&r(E.data),a(Array.isArray(I)?I:I.data||[])}catch(E){console.error("Failed to load config",E)}finally{l(!1)}},j=E=>{if(E.target.files){const I=Array.from(E.target.files);D(I)}},D=E=>{const I={...m};E.forEach(L=>{const O=L.name.split(".")[0];let F=O;O.includes("_")?F=O.split("_")[0]:O.includes("-")&&(F=O.split("-")[0]);const U=s.find(W=>W.employeeId===F);U?I[L.name]={status:"pending",employeeId:U._id,employeeName:`${U.firstName} ${U.lastName} (${U.employeeId})`}:I[L.name]={status:"error",message:`Employee ID '${F}' not found`}}),h(L=>[...L,...E]),g(I)},T=E=>{h(L=>L.filter(O=>O.name!==E));const I={...m};delete I[E],g(I)},A=async()=>{if(!c)return;y(!0);const E=p.filter(I=>{var L;return((L=m[I.name])==null?void 0:L.status)==="pending"});for(const I of E){const L=m[I.name];if(!(!L||!L.employeeId)){g(O=>({...O,[I.name]:{...O[I.name],status:"uploading"}}));try{const O=new FormData;O.append("file",I),O.append("employeeId",L.employeeId),O.append("documentTypeId",c),u&&O.append("expiryDate",u),await xe.uploadEmployeeDocument(O),g(F=>({...F,[I.name]:{...F[I.name],status:"success"}}))}catch(O){g(F=>({...F,[I.name]:{...F[I.name],status:"error",message:O.message||"Upload failed"}}))}}}y(!1)},S=n.find(E=>E._id===c);return i.jsx(Hn,{isOpen:e,onClose:x?()=>{}:t,title:"Bulk Document Upload",maxWidth:"max-w-4xl",children:i.jsx("div",{className:"space-y-6 min-h-[400px]",children:o?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Hr,{className:"animate-spin text-brand-primary",size:32})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Gt,{label:"Document Type",value:c,onChange:E=>d(E),options:n.map(E=>({value:E._id,label:E.name})),disabled:x||p.length>0}),(S==null?void 0:S.expiryRequired)&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Default Expiry"}),i.jsx("input",{type:"date",value:u,onChange:E=>f(E.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20",disabled:x}),i.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Applied to all uploaded documents"})]})]}),i.jsxs("div",{className:"border-2 border-dashed border-border rounded-xl p-8 text-center hover:bg-bg-hover transition-colors",children:[i.jsx("input",{ref:v,type:"file",multiple:!0,className:"hidden",onChange:j,disabled:!c||x}),i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx("div",{className:"p-3 bg-brand-primary/10 rounded-full text-brand-primary",children:i.jsx(yi,{size:24})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-text-primary",children:"Click to upload or drag and drop"}),i.jsx("p",{className:"text-sm text-text-secondary",children:"Supported: PDF, JPG, PNG. Filenames must start with Employee ID (e.g., EMP001_Offer.pdf)"})]}),i.jsx("button",{onClick:()=>{var E;return(E=v.current)==null?void 0:E.click()},disabled:!c||x,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 font-medium text-sm",children:"Select Files"})]})]}),p.length>0&&i.jsxs("div",{className:"border border-border rounded-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-bg-hover px-4 py-2 border-b border-border text-sm font-medium text-text-secondary flex justify-between",children:[i.jsxs("span",{children:["Selected Files (",p.length,")"]}),i.jsxs("span",{className:"text-xs",children:["Ready:"," ",p.filter(E=>{var I;return((I=m[E.name])==null?void 0:I.status)==="pending"}).length," ","| Success:"," ",p.filter(E=>{var I;return((I=m[E.name])==null?void 0:I.status)==="success"}).length," ","| Error:"," ",p.filter(E=>{var I;return((I=m[E.name])==null?void 0:I.status)==="error"}).length]})]}),i.jsx("div",{className:"max-h-64 overflow-y-auto divide-y divide-border",children:p.map((E,I)=>{const L=m[E.name];return i.jsxs("div",{className:"px-4 py-3 flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(yr,{size:16,className:"text-text-muted"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-text-primary truncate max-w-xs",title:E.name,children:E.name}),i.jsx("p",{className:"text-xs text-text-secondary",children:(L==null?void 0:L.employeeName)||(L==null?void 0:L.message)||"Processing..."})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[(L==null?void 0:L.status)==="pending"&&i.jsx("span",{className:"text-blue-500 bg-blue-50 px-2 py-0.5 rounded text-xs font-medium",children:"Ready"}),(L==null?void 0:L.status)==="uploading"&&i.jsx(Hr,{size:16,className:"text-brand-primary animate-spin"}),(L==null?void 0:L.status)==="success"&&i.jsx(Yr,{size:16,className:"text-green-500"}),(L==null?void 0:L.status)==="error"&&i.jsx(bs,{size:16,className:"text-red-500"}),!x&&(L==null?void 0:L.status)!=="success"&&i.jsx("button",{onClick:()=>T(E.name),className:"text-text-secondary hover:text-red-500",children:i.jsx(bi,{size:16})})]})]},I)})})]}),i.jsxs("div",{className:"flex justify-end pt-4 border-t border-border gap-3",children:[i.jsx("button",{onClick:t,disabled:x,className:"px-4 py-2 text-text-secondary hover:bg-bg-hover rounded-lg font-medium text-sm",children:"Close"}),i.jsxs("button",{onClick:A,disabled:x||p.filter(E=>{var I;return((I=m[E.name])==null?void 0:I.status)==="pending"}).length===0,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 font-medium text-sm flex items-center gap-2",children:[x&&i.jsx(Hr,{size:16,className:"animate-spin"}),x?"Uploading...":`Upload ${p.filter(E=>{var I;return((I=m[E.name])==null?void 0:I.status)==="pending"}).length} Files`]})]})]})})})};function bX(){const{user:e}=cn(),[t,n]=C.useState([]),[r,s]=C.useState(!0),[a,o]=C.useState(null),[l,c]=C.useState(!1),[d,u]=C.useState(!1),[f,p]=C.useState(null),[h,m]=C.useState(!1),[g,x]=C.useState(null),[y,v]=C.useState(null),[N,j]=C.useState(!1),D=async()=>{s(!0);try{const W=await xe.getEmployees();n(Array.isArray(W)?W:[]),o(null)}catch(W){o(W.message||"Failed to fetch employees")}finally{s(!1)}};C.useEffect(()=>{D()},[]);const T=()=>{p(null),m(!1),c(!0)},A=W=>{p(W),m(!1),c(!0)},S=W=>{p(W),m(!0),c(!0)},E=()=>{c(!1),p(null),m(!1),D()},I=async W=>{var X,P;try{const z=((X=W.user)==null?void 0:X._id)||W.user;if(!z){alert("User ID not found");return}const Y=(((P=W.user)==null?void 0:P.status)||"active")==="active"?"inactive":"active";await xe.updateUserStatus(z,Y),D()}catch(z){alert(z.message||"Failed to update status")}},L=W=>{var P;const X=((P=W.user)==null?void 0:P._id)||W.user;if(!X){alert("User ID not found");return}v(X)},O=async()=>{if(y){j(!0);try{await xe.resetUserPassword(y),alert("Password reset successfully. Default password sent to user.")}catch(W){alert(W.message||"Failed to reset password")}finally{j(!1),v(null)}}},F=W=>{var P;const X=((P=W.user)==null?void 0:P._id)||W.user;if(!X){alert("User ID not found");return}x(X)},U=async()=>{if(g){j(!0);try{await xe.deleteUser(g),D()}catch(W){alert(W.message||"Failed to delete user")}finally{j(!1),x(null)}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Employee Management"}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Manage detailed employee records"})]}),i.jsxs("div",{className:"flex gap-2",children:[(!(e!=null&&e.accessibleModules)||e.accessibleModules.includes("documents"))&&i.jsx(at,{onClick:()=>u(!0),variant:"outline",leftIcon:i.jsx(yi,{size:20}),children:"Bulk Upload"}),i.jsx(at,{onClick:T,leftIcon:i.jsx(Wr,{size:20}),children:"Add Employee"})]})]}),a&&i.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:a}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-border overflow-hidden",children:i.jsx(Qo,{columns:[{header:"Employee",accessorKey:"firstName",searchKey:"firstName",render:W=>{var X,P;return i.jsxs("div",{className:"flex items-center gap-3",children:[W.profilePicture?i.jsx("img",{src:W.profilePicture.startsWith("http")?W.profilePicture:`${xs}/${W.profilePicture}`,alt:`${W.firstName} ${W.lastName}`,className:"w-10 h-10 rounded-full object-cover border border-border"}):i.jsxs("div",{className:"w-10 h-10 rounded-full bg-brand-primary/10 flex items-center justify-center text-brand-primary font-medium",children:[((X=W.firstName)==null?void 0:X[0])||"?",((P=W.lastName)==null?void 0:P[0])||""]}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium text-text-primary",children:[W.firstName," ",W.lastName,W.isPlaceholder&&i.jsx("span",{className:"ml-2 text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:"No Details"})]}),i.jsx("div",{className:"text-xs text-text-secondary",children:W.employeeId})]})]})}},{header:"Role & Dept",accessorKey:"role",render:W=>i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-text-primary",children:W.role}),i.jsx("div",{className:"text-xs text-text-secondary",children:W.department})]})},{header:"Status",accessorKey:"user.status",enableSorting:!0,render:W=>{var P;const X=((P=W.user)==null?void 0:P.status)||"active";return i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${X==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:X==="active"?"Active":"Inactive"})}},{header:"Contact",render:W=>i.jsxs("div",{className:"text-sm text-text-secondary",children:[i.jsx("div",{children:W.email}),i.jsx("div",{children:W.workPhone})]})},{header:"Actions",className:"text-right",render:W=>{var P;const X=((P=W.user)==null?void 0:P.status)||"active";return i.jsxs("div",{className:"flex items-center justify-end gap-1",children:[i.jsx("button",{onClick:()=>S(W),className:"p-2 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-lg transition-colors",title:"View Details",children:i.jsx(Yv,{size:16})}),i.jsx("button",{onClick:()=>A(W),className:"p-2 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-lg transition-colors",title:"Edit Employee",children:i.jsx(Wv,{size:16})}),i.jsx("button",{onClick:()=>I(W),className:`p-2 rounded-lg transition-colors ${X==="active"?"text-amber-600 hover:bg-amber-50":"text-green-600 hover:bg-green-50"}`,title:X==="active"?"Deactivate User":"Activate User",children:X==="active"?i.jsx(DL,{size:16}):i.jsx(ML,{size:16})}),i.jsx("button",{onClick:()=>L(W),className:"p-2 text-text-secondary hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Reset Password",children:i.jsx(Xl,{size:16})}),i.jsx("button",{onClick:()=>F(W),className:"p-2 text-text-secondary hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete User",children:i.jsx(br,{size:16})})]})}}],data:t,isLoading:r,emptyMessage:"No employees found."})}),l&&i.jsx(xX,{isOpen:l,onClose:E,employee:f,viewMode:h}),d&&i.jsx(yX,{isOpen:d,onClose:()=>u(!1)}),i.jsx(ma,{isOpen:g!==null,onClose:()=>x(null),onConfirm:U,title:"Delete User",message:"Are you sure you want to delete this user? This action cannot be undone.",confirmText:"Delete",variant:"danger",isLoading:N}),i.jsx(ma,{isOpen:y!==null,onClose:()=>v(null),onConfirm:O,title:"Reset Password",message:"Are you sure you want to reset this user's password? A default password will be sent to them.",confirmText:"Reset Password",isLoading:N})]})}function En({children:e,allowedRoles:t}){const{user:n,isAuthenticated:r,isLoading:s}=cn(),a=Xo();return s?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-bg-main",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary"})}):!r||!n?i.jsx(Dg,{to:"/login",state:{from:a},replace:!0}):t.includes(n.role)?i.jsx(i.Fragment,{children:e}):i.jsx(Dg,{to:"/unauthorized",replace:!0})}function ws({children:e,module:t}){const{user:n,isAuthenticated:r,isLoading:s}=cn(),a=Xo();return s?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-bg-main",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary"})}):!r||!n?i.jsx(Dg,{to:"/login",state:{from:a},replace:!0}):n.role==="Super Admin"?i.jsx(i.Fragment,{children:e}):n.accessibleModules&&!n.accessibleModules.includes(t)?i.jsx(Dg,{to:"/unauthorized",replace:!0}):i.jsx(i.Fragment,{children:e})}function vX(){const[e,t]=C.useState("shameer@neointeraction.com"),[n,r]=C.useState("password"),[s,a]=C.useState(""),{login:o,isLoading:l}=cn(),c=Fa(),d=Xo(),u=async f=>{var p,h;f.preventDefault(),a("");try{let m;try{if(navigator.geolocation){const j=await new Promise((D,T)=>{navigator.geolocation.getCurrentPosition(D,T,{timeout:5e3})});m={lat:j.coords.latitude,lng:j.coords.longitude}}}catch(j){console.log("Location access denied or failed",j)}const g=await o(e,n,m),x=VL(g.role),y=uV(g.role),v=(h=(p=d.state)==null?void 0:p.from)==null?void 0:h.pathname,N=v&&x.some(j=>j.to===v);c(N?v:y,{replace:!0})}catch(m){a(m.message||"Invalid credentials. Please try again.")}};return i.jsxs("div",{className:"flex min-h-screen bg-bg-main overflow-hidden",children:[i.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative bg-brand-primary text-white flex-col justify-between p-12 overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:i.jsx("svg",{className:"h-full w-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:i.jsx("path",{d:"M0 100 C 20 0 50 0 100 100 Z",fill:"currentColor"})})}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl backdrop-blur-sm flex items-center justify-center",children:i.jsx(Kl,{size:24,className:"text-white"})}),i.jsx("span",{className:"text-2xl font-bold tracking-tight",children:"NeointeractionHR"})]}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold leading-tight mb-6",children:"Welcome back to your workspace."}),i.jsx("p",{className:"text-lg text-blue-100 max-w-md leading-relaxed",children:"Securely access your dashboard, manage your team, and stay on top of your HR tasks."})]}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("div",{className:"flex -space-x-3",children:[1,2,3,4].map(f=>i.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-brand-primary bg-gray-200"},f))}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-semibold",children:"Join thousands of users"}),i.jsx("p",{className:"text-blue-200",children:"Streamlining HR globally"})]})]}),i.jsxs("p",{className:"text-xs text-blue-200 opacity-60",children:[" ",new Date().getFullYear()," NeointeractionHR. All rights reserved."]})]})]}),i.jsx("div",{className:"w-full lg:w-1/2 flex flex-col h-screen overflow-y-auto bg-bg-main justify-center",children:i.jsxs("div",{className:"max-w-md mx-auto w-full p-6 md:p-12",children:[i.jsxs("div",{className:"lg:hidden flex items-center gap-2 mb-8",children:[i.jsx("div",{className:"w-8 h-8 bg-brand-primary rounded-lg flex items-center justify-center",children:i.jsx(Kl,{size:16,className:"text-white"})}),i.jsx("span",{className:"text-xl font-bold text-brand-primary",children:"NeointeractionHR"})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:"Log in"}),i.jsx("p",{className:"text-text-secondary",children:"Welcome back! Please enter your details."})]}),i.jsxs("form",{onSubmit:u,className:"space-y-5 animate-in fade-in slide-in-from-right-4 duration-300",children:[s&&i.jsxs("div",{className:"p-4 rounded-lg bg-status-error/10 border border-status-error/20 text-status-error text-sm flex items-center gap-2 animate-in fade-in slide-in-from-top-1",children:[i.jsx(bs,{size:16})," ",s]}),i.jsx(Ze,{label:"Email",leftIcon:i.jsx(Kh,{size:18}),type:"email",value:e,onChange:f=>t(f.target.value),placeholder:"name@company.com",required:!0,className:"bg-bg-card border-border"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-1.5 ml-1",children:[i.jsx("label",{className:"text-sm font-medium text-text-secondary",children:"Password"}),i.jsx("button",{type:"button",className:"text-xs font-semibold text-brand-primary hover:text-brand-primary/80",children:"Forgot password?"})]}),i.jsxs("div",{className:"relative group",children:[i.jsx(Xl,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-text-muted transition-colors group-focus-within:text-brand-primary",size:18}),i.jsx(Iu,{value:n,onChange:f=>r(f.target.value),className:"pl-10 bg-bg-card border-border",placeholder:"",required:!0})]})]}),i.jsx("button",{type:"submit",disabled:l,className:"w-full px-6 h-[38px] bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-all shadow-lg hover:shadow-brand-primary/30 disabled:opacity-70 disabled:cursor-not-allowed font-semibold text-sm flex items-center justify-center gap-2",children:l?i.jsx(Jv,{size:20,variant:"white"}):"Sign In"})]}),i.jsxs("p",{className:"mt-8 text-center text-sm text-text-secondary",children:["Don't have an account?"," ",i.jsx("a",{href:"/signup",className:"text-brand-primary hover:text-brand-primary/80 font-semibold hover:underline decoration-2 underline-offset-2 transition-all",children:"Sign up"})]}),i.jsxs("div",{className:"mt-10 pt-6 border-t border-border",children:[i.jsx("p",{className:"text-xs font-semibold text-text-muted text-center mb-4 uppercase tracking-wider",children:"Quick Login (Demo)"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{type:"button",onClick:()=>{t("admin@neointeraction.com"),r("Welcome@123")},className:"p-3 bg-bg-card border border-border rounded-lg hover:border-brand-primary/50 hover:bg-brand-primary/5 text-left transition-all group",children:[i.jsx("div",{className:"text-xs font-bold text-text-primary group-hover:text-brand-primary mb-0.5",children:"Admin"}),i.jsx("div",{className:"text-[10px] text-text-muted truncate",children:"admin@neointeraction.com"})]}),i.jsxs("button",{type:"button",onClick:()=>{t("hr@neointeraction.com"),r("Welcome@123")},className:"p-3 bg-bg-card border border-border rounded-lg hover:border-brand-primary/50 hover:bg-brand-primary/5 text-left transition-all group",children:[i.jsx("div",{className:"text-xs font-bold text-text-primary group-hover:text-brand-primary mb-0.5",children:"HR"}),i.jsx("div",{className:"text-[10px] text-text-muted truncate",children:"hr@neointeraction.com"})]}),i.jsxs("button",{type:"button",onClick:()=>{t("shameer@neointeraction.com"),r("Welcome@123")},className:"p-3 bg-bg-card border border-border rounded-lg hover:border-brand-primary/50 hover:bg-brand-primary/5 text-left transition-all group",children:[i.jsx("div",{className:"text-xs font-bold text-text-primary group-hover:text-brand-primary mb-0.5",children:"Manager"}),i.jsx("div",{className:"text-[10px] text-text-muted truncate",children:"shameer@neointeraction.com"})]}),i.jsxs("button",{type:"button",onClick:()=>{t("liya@neointeraction.com"),r("password")},className:"p-3 bg-bg-card border border-border rounded-lg hover:border-brand-primary/50 hover:bg-brand-primary/5 text-left transition-all group",children:[i.jsx("div",{className:"text-xs font-bold text-text-primary group-hover:text-brand-primary mb-0.5",children:"Employee"}),i.jsx("div",{className:"text-[10px] text-text-muted truncate",children:"liya@neointeraction.com"})]}),i.jsxs("button",{type:"button",onClick:()=>{t("superadmin@hrms.com"),r("SuperAdmin@123")},className:"col-span-2 p-3 bg-purple-50 dark:bg-purple-900/10 border border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/20 text-left transition-all group",children:[i.jsx("div",{className:"text-xs font-bold text-purple-700 dark:text-purple-300 mb-0.5",children:"Super Admin"}),i.jsx("div",{className:"text-[10px] text-purple-600/70 dark:text-purple-400/70 truncate",children:"superadmin@hrms.com"})]})]})]})]})})]})}const wX=()=>{const e=Fa(),[t,n]=C.useState(1),[r,s]=C.useState(!1),[a,o]=C.useState(""),[l,c]=C.useState(!1),[d,u]=C.useState({companyName:"",adminName:"",adminEmail:"",password:"",confirmPassword:"",subdomain:"",plan:"free"}),f=m=>{u({...d,[m.target.name]:m.target.value}),o("")},p=async m=>{if(m.preventDefault(),d.password!==d.confirmPassword){o("Passwords do not match");return}if(d.password.length<8){o("Password must be at least 8 characters");return}s(!0),o("");try{await xe.registerCompany({companyName:d.companyName,adminName:d.adminName,adminEmail:d.adminEmail,password:d.password,subdomain:d.subdomain||void 0,plan:d.plan}),c(!0)}catch(g){o(g.message||"Failed to register company")}finally{s(!1)}},h=[{id:"free",name:"Free",price:"$0",features:["Up to 10 employees","100 MB storage","Basic modules"]},{id:"basic",name:"Basic",price:"$29/mo",features:["Up to 50 employees","500 MB storage","All modules"]},{id:"pro",name:"Pro",price:"$99/mo",features:["Up to 200 employees","2 GB storage","Advanced features"]},{id:"enterprise",name:"Enterprise",price:"Custom",features:["Unlimited employees","10 GB storage","Premium support"]}];return i.jsxs("div",{className:"flex min-h-screen bg-bg-main overflow-hidden",children:[i.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative bg-brand-primary text-white flex-col justify-between p-12 overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:i.jsx("svg",{className:"h-full w-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:i.jsx("path",{d:"M0 100 C 20 0 50 0 100 100 Z",fill:"currentColor"})})}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl backdrop-blur-sm flex items-center justify-center",children:i.jsx(Kl,{size:24,className:"text-white"})}),i.jsx("span",{className:"text-2xl font-bold tracking-tight",children:"NeointeractionHR"})]}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold leading-tight mb-6",children:"Everything you need to manage your workforce."}),i.jsx("p",{className:"text-lg text-blue-100 max-w-md leading-relaxed",children:"Join thousands of forward-thinking companies that use our platform to streamline HR, payroll, and employee engagement."})]}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("div",{className:"flex -space-x-3",children:[1,2,3,4].map(m=>i.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-brand-primary bg-gray-200"},m))}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-semibold",children:"Trusted by industry leaders"}),i.jsx("p",{className:"text-blue-200",children:"Start your journey today"})]})]}),i.jsxs("p",{className:"text-xs text-blue-200 opacity-60",children:[" ",new Date().getFullYear()," NeointeractionHR. All rights reserved."]})]})]}),i.jsx("div",{className:"w-full lg:w-1/2 flex flex-col h-screen overflow-y-auto bg-bg-main",children:i.jsxs("div",{className:"flex-1 flex flex-col justify-center max-w-xl mx-auto w-full p-6 md:p-12 lg:p-16",children:[i.jsxs("div",{className:"lg:hidden flex items-center gap-2 mb-8",children:[i.jsx("div",{className:"w-8 h-8 bg-brand-primary rounded-lg flex items-center justify-center",children:i.jsx(Kl,{size:16,className:"text-white"})}),i.jsx("span",{className:"text-xl font-bold text-brand-primary",children:"NeointeractionHR"})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:"Create your workspace"}),i.jsx("p",{className:"text-text-secondary",children:"It only takes a few minutes to get started."})]}),i.jsx("div",{className:"mb-10",children:i.jsxs("div",{className:"flex items-center justify-between relative",children:[i.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-full h-1 bg-border -z-10 rounded-full"}),[1,2,3].map(m=>i.jsxs("div",{className:"relative flex flex-col items-center group",children:[i.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 transition-all duration-300 ${t>=m?"bg-brand-primary border-brand-primary text-white scale-110 shadow-md":"bg-bg-card border-border text-text-muted"}`,children:t>m?i.jsx(Jl,{size:14,strokeWidth:3}):i.jsx("span",{className:"text-xs font-bold",children:m})}),i.jsx("span",{className:`absolute top-10 text-xs font-medium transition-colors duration-300 ${t===m?"text-brand-primary":"text-text-muted"}`,children:m===1?"Company":m===2?"Admin":"Plan"})]},m))]})}),i.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a&&i.jsxs("div",{className:"p-4 rounded-lg bg-status-error/10 border border-status-error/20 text-status-error text-sm flex items-center gap-2 animate-in fade-in slide-in-from-top-1",children:[i.jsx("div",{className:"w-1 h-1 rounded-full bg-status-error"})," ",a]}),t===1&&i.jsxs("div",{className:"space-y-5 animate-in fade-in slide-in-from-right-4 duration-300",children:[i.jsx(Ze,{label:"Company Name *",leftIcon:i.jsx(Kl,{size:18}),type:"text",name:"companyName",value:d.companyName,onChange:f,required:!0,placeholder:"e.g. Acme Corp",className:"bg-bg-card border-border h-[38px]"}),i.jsxs("div",{children:[i.jsx(Ze,{label:"Subdomain",leftIcon:i.jsx(Sp,{size:18}),type:"text",name:"subdomain",value:d.subdomain,onChange:f,placeholder:"acme",className:"bg-bg-card border-border h-[38px]"}),i.jsxs("p",{className:"text-xs text-text-muted mt-2 pl-1 flex items-center gap-1",children:["Your URL:"," ",i.jsxs("span",{className:"font-mono text-brand-primary bg-brand-primary/10 px-1 rounded",children:[d.subdomain||"your-company",".yourhrms.com"]})]})]}),i.jsx("div",{className:"pt-4",children:i.jsx("button",{type:"button",onClick:()=>n(2),disabled:!d.companyName,className:"w-full px-6 h-[38px] bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-all shadow-lg hover:shadow-brand-primary/30 disabled:opacity-50 disabled:shadow-none font-semibold text-sm flex items-center justify-center",children:"Continue to Admin Setup"})})]}),t===2&&i.jsxs("div",{className:"space-y-5 animate-in fade-in slide-in-from-right-4 duration-300",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[i.jsx(Ze,{label:"Full Name *",leftIcon:i.jsx(hi,{size:18}),type:"text",name:"adminName",value:d.adminName,onChange:f,required:!0,placeholder:"John Doe",className:"bg-bg-card border-border h-[38px]"}),i.jsx(Ze,{label:"Work Email *",leftIcon:i.jsx(Kh,{size:18}),type:"email",name:"adminEmail",value:d.adminEmail,onChange:f,required:!0,placeholder:"john@company.com",className:"bg-bg-card border-border h-[38px]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5 ml-1",children:"Password *"}),i.jsxs("div",{className:"relative group",children:[i.jsx(Xl,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-text-muted transition-colors group-focus-within:text-brand-primary",size:18}),i.jsx(Iu,{value:d.password,onChange:f,name:"password",required:!0,className:"pl-10 bg-bg-card border-border h-[38px] rounded-lg",placeholder:"Create a strong password"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5 ml-1",children:"Confirm Password *"}),i.jsxs("div",{className:"relative group",children:[i.jsx(Xl,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-text-muted transition-colors group-focus-within:text-brand-primary",size:18}),i.jsx(Iu,{value:d.confirmPassword,onChange:f,name:"confirmPassword",required:!0,className:"pl-10 bg-bg-card border-border h-[38px] rounded-lg",placeholder:"Repeat password"})]})]}),i.jsxs("div",{className:"flex gap-4 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>n(1),className:"px-6 h-[38px] border border-border text-text-secondary rounded-lg hover:bg-bg-hover transition-colors font-semibold text-sm flex items-center justify-center",children:"Back"}),i.jsx("button",{type:"button",onClick:()=>n(3),disabled:!d.adminName||!d.adminEmail||!d.password||!d.confirmPassword,className:"flex-1 px-6 h-[38px] bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-all shadow-lg hover:shadow-brand-primary/30 disabled:opacity-50 disabled:shadow-none font-semibold text-sm flex items-center justify-center",children:"Continue to Plans"})]})]}),t===3&&i.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[i.jsx("div",{className:"grid grid-cols-1 gap-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:h.map(m=>i.jsxs("div",{onClick:()=>u({...d,plan:m.id}),className:`relative p-5 border-2 rounded-xl cursor-pointer transition-all duration-200 group ${d.plan===m.id?"border-brand-primary bg-brand-primary/5 shadow-md":"border-border bg-bg-card hover:border-brand-primary/50 hover:bg-bg-hover"}`,children:[d.plan===m.id&&i.jsx("div",{className:"absolute top-4 right-4 text-brand-primary bg-white dark:bg-black rounded-full p-1 shadow-sm",children:i.jsx(Jl,{size:16,strokeWidth:3})}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-bold text-lg text-text-primary",children:m.name}),i.jsx("span",{className:`text-sm font-semibold px-3 py-1 rounded-full ${d.plan===m.id?"bg-brand-primary text-white":"bg-bg-hover text-text-secondary"}`,children:m.price})]}),i.jsx("ul",{className:"space-y-2.5",children:m.features.slice(0,3).map((g,x)=>i.jsxs("li",{className:"flex items-center text-sm text-text-secondary",children:[i.jsx(Jl,{className:`mr-2.5 w-4 h-4 ${d.plan===m.id?"text-brand-primary":"text-text-muted group-hover:text-brand-primary"}`}),g]},x))})]},m.id))}),i.jsxs("div",{className:"flex gap-4 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>n(2),className:"px-6 h-[38px] border border-border text-text-secondary rounded-lg hover:bg-bg-hover transition-colors font-semibold text-sm flex items-center justify-center",children:"Back"}),i.jsx("button",{type:"submit",disabled:r,className:"flex-1 px-6 h-[38px] bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-all shadow-lg hover:shadow-brand-primary/30 disabled:opacity-50 disabled:shadow-none font-semibold text-sm flex items-center justify-center gap-2",children:r?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Setting up..."]}):"Create Company Workspace"})]})]})]}),i.jsxs("p",{className:"mt-8 text-center text-sm text-text-secondary",children:["Already have an account?"," ",i.jsx("a",{href:"/login",className:"text-brand-primary hover:text-brand-primary/80 font-semibold hover:underline decoration-2 underline-offset-2 transition-all",children:"Log in here"})]})]})}),i.jsx(ma,{isOpen:l,onClose:()=>e("/login"),onConfirm:()=>e("/login"),title:"Registration Successful",message:`Company registered successfully! Please login with: ${d.adminEmail}`,confirmText:"Proceed to Login",variant:"success",showCancel:!1})]})};function NX(){const e=Fa();return i.jsx("div",{className:"min-h-screen bg-bg-main flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx("div",{className:"w-20 h-20 bg-status-error/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(U$,{size:40,className:"text-status-error"})}),i.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-3",children:"Access Denied"}),i.jsx("p",{className:"text-text-secondary mb-8",children:"You do not have permission to view this page. Please contact your administrator if you believe this is an error."}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx("button",{onClick:()=>e(-1),className:"px-6 py-2 border border-border rounded-lg text-text-primary hover:bg-bg-hover transition-colors font-medium",children:"Go Back"}),i.jsx("button",{onClick:()=>e("/"),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary transition-colors font-medium shadow-lg shadow-brand-primary/20",children:"Go to Dashboard"})]})]})})}const jX="modulepreload",SX=function(e){return"/"+e},$A={},cw=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=SX(c),c in $A)return;$A[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":jX,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function zn(e){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(e)}var po=Uint8Array,li=Uint16Array,ak=Int32Array,ik=new po([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ok=new po([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qA=new po([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),BR=function(e,t){for(var n=new li(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var s=new ak(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return{b:n,r:s}},HR=BR(ik,2),kX=HR.b,A5=HR.r;kX[28]=258,A5[258]=28;var CX=BR(ok,0),VA=CX.r,M5=new li(32768);for(var lr=0;lr<32768;++lr){var Ic=(lr&43690)>>1|(lr&21845)<<1;Ic=(Ic&52428)>>2|(Ic&13107)<<2,Ic=(Ic&61680)>>4|(Ic&3855)<<4,M5[lr]=((Ic&65280)>>8|(Ic&255)<<8)>>1}var Qm=function(e,t,n){for(var r=e.length,s=0,a=new li(t);s<r;++s)e[s]&&++a[e[s]-1];var o=new li(t);for(s=1;s<t;++s)o[s]=o[s-1]+a[s-1]<<1;var l;if(n){l=new li(1<<t);var c=15-t;for(s=0;s<r;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],f=o[e[s]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)l[M5[f]>>c]=d}else for(l=new li(r),s=0;s<r;++s)e[s]&&(l[s]=M5[o[e[s]-1]++]>>15-e[s]);return l},rf=new po(288);for(var lr=0;lr<144;++lr)rf[lr]=8;for(var lr=144;lr<256;++lr)rf[lr]=9;for(var lr=256;lr<280;++lr)rf[lr]=7;for(var lr=280;lr<288;++lr)rf[lr]=8;var Ab=new po(32);for(var lr=0;lr<32;++lr)Ab[lr]=5;var AX=Qm(rf,9,0),MX=Qm(Ab,5,0),UR=function(e){return(e+7)/8|0},DX=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new po(e.subarray(t,n))},kl=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},bm=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},dw=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var s=n.length,a=n.slice();if(!s)return{t:qR,l:0};if(s==1){var o=new po(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(D,T){return D.f-T.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,u=1,f=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};u!=s-1;)l=n[n[d].f<n[f].f?d++:f++],c=n[d!=u&&n[d].f<n[f].f?d++:f++],n[u++]={s:-1,f:l.f+c.f,l,r:c};for(var p=a[0].s,r=1;r<s;++r)a[r].s>p&&(p=a[r].s);var h=new li(p+1),m=D5(n[u-1],h,0);if(m>t){var r=0,g=0,x=m-t,y=1<<x;for(a.sort(function(T,A){return h[A.s]-h[T.s]||T.f-A.f});r<s;++r){var v=a[r].s;if(h[v]>t)g+=y-(1<<m-h[v]),h[v]=t;else break}for(g>>=x;g>0;){var N=a[r].s;h[N]<t?g-=1<<t-h[N]++-1:++r}for(;r>=0&&g;--r){var j=a[r].s;h[j]==t&&(--h[j],++g)}m=t}return{t:new po(h),l:m}},D5=function(e,t,n){return e.s==-1?Math.max(D5(e.l,t,n+1),D5(e.r,t,n+1)):t[e.s]=n},YA=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new li(++t),r=0,s=e[0],a=1,o=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=e[l]}return{c:n.subarray(0,r),n:t}},vm=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},$R=function(e,t,n){var r=n.length,s=UR(t+2);e[s]=r&255,e[s+1]=r>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var a=0;a<r;++a)e[s+a+4]=n[a];return(s+4+r)*8},WA=function(e,t,n,r,s,a,o,l,c,d,u){kl(t,u++,n),++s[256];for(var f=dw(s,15),p=f.t,h=f.l,m=dw(a,15),g=m.t,x=m.l,y=YA(p),v=y.c,N=y.n,j=YA(g),D=j.c,T=j.n,A=new li(19),S=0;S<v.length;++S)++A[v[S]&31];for(var S=0;S<D.length;++S)++A[D[S]&31];for(var E=dw(A,7),I=E.t,L=E.l,O=19;O>4&&!I[qA[O-1]];--O);var F=d+5<<3,U=vm(s,rf)+vm(a,Ab)+o,W=vm(s,p)+vm(a,g)+o+14+3*O+vm(A,I)+2*A[16]+3*A[17]+7*A[18];if(c>=0&&F<=U&&F<=W)return $R(t,u,e.subarray(c,c+d));var X,P,z,oe;if(kl(t,u,1+(W<U)),u+=2,W<U){X=Qm(p,h,0),P=p,z=Qm(g,x,0),oe=g;var Y=Qm(I,L,0);kl(t,u,N-257),kl(t,u+5,T-1),kl(t,u+10,O-4),u+=14;for(var S=0;S<O;++S)kl(t,u+3*S,I[qA[S]]);u+=3*O;for(var q=[v,D],_=0;_<2;++_)for(var $=q[_],S=0;S<$.length;++S){var J=$[S]&31;kl(t,u,Y[J]),u+=I[J],J>15&&(kl(t,u,$[S]>>5&127),u+=$[S]>>12)}}else X=AX,P=rf,z=MX,oe=Ab;for(var S=0;S<l;++S){var te=r[S];if(te>255){var J=te>>18&31;bm(t,u,X[J+257]),u+=P[J+257],J>7&&(kl(t,u,te>>23&31),u+=ik[J]);var Z=te&31;bm(t,u,z[Z]),u+=oe[Z],Z>3&&(bm(t,u,te>>5&8191),u+=ok[Z])}else bm(t,u,X[te]),u+=P[te]}return bm(t,u,X[256]),u+P[256]},EX=new ak([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qR=new po(0),_X=function(e,t,n,r,s,a){var o=a.z||e.length,l=new po(r+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(r,l.length-s),d=a.l,u=(a.r||0)&7;if(t){u&&(c[0]=a.r>>3);for(var f=EX[t-1],p=f>>13,h=f&8191,m=(1<<n)-1,g=a.p||new li(32768),x=a.h||new li(m+1),y=Math.ceil(n/3),v=2*y,N=function(We){return(e[We]^e[We+1]<<y^e[We+2]<<v)&m},j=new ak(25e3),D=new li(288),T=new li(32),A=0,S=0,E=a.i||0,I=0,L=a.w||0,O=0;E+2<o;++E){var F=N(E),U=E&32767,W=x[F];if(g[U]=W,x[F]=U,L<=E){var X=o-E;if((A>7e3||I>24576)&&(X>423||!d)){u=WA(e,c,0,j,D,T,S,I,O,E-O,u),I=A=S=0,O=E;for(var P=0;P<286;++P)D[P]=0;for(var P=0;P<30;++P)T[P]=0}var z=2,oe=0,Y=h,q=U-W&32767;if(X>2&&F==N(E-q))for(var _=Math.min(p,X)-1,$=Math.min(32767,E),J=Math.min(258,X);q<=$&&--Y&&U!=W;){if(e[E+z]==e[E+z-q]){for(var te=0;te<J&&e[E+te]==e[E+te-q];++te);if(te>z){if(z=te,oe=q,te>_)break;for(var Z=Math.min(q,te-2),ie=0,P=0;P<Z;++P){var he=E-q+P&32767,ye=g[he],Se=he-ye&32767;Se>ie&&(ie=Se,W=he)}}}U=W,W=g[U],q+=U-W&32767}if(oe){j[I++]=268435456|A5[z]<<18|VA[oe];var Ee=A5[z]&31,Pe=VA[oe]&31;S+=ik[Ee]+ok[Pe],++D[257+Ee],++T[Pe],L=E+z,++A}else j[I++]=e[E],++D[e[E]]}}for(E=Math.max(E,L);E<o;++E)j[I++]=e[E],++D[e[E]];u=WA(e,c,d,j,D,T,S,I,O,E-O,u),d||(a.r=u&7|c[u/8|0]<<3,u-=7,a.h=x,a.p=g,a.i=E,a.w=L)}else{for(var E=a.w||0;E<o+d;E+=65535){var qe=E+65535;qe>=o&&(c[u/8|0]=d,qe=o),u=$R(c,u+1,e.subarray(E,qe))}a.i=o}return DX(l,0,r+UR(u)+s)},VR=function(){var e=1,t=0;return{p:function(n){for(var r=e,s=t,a=n.length|0,o=0;o!=a;){for(var l=Math.min(o+2655,a);o<l;++o)s+=r+=n[o];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}e=r,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},TX=function(e,t,n,r,s){if(!s&&(s={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new po(a.length+e.length);o.set(a),o.set(e,a.length),e=o,s.w=a.length}return _X(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,s)},YR=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},LX=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=VR();s.p(t.dictionary),YR(e,2,s.d())}};function E5(e,t){t||(t={});var n=VR();n.p(e);var r=TX(e,t,t.dictionary?6:2,4);return LX(r,t),YR(r,r.length-4,n.d()),r}var RX=typeof TextDecoder<"u"&&new TextDecoder,OX=0;try{RX.decode(qR,{stream:!0}),OX=1}catch{}function PX(e){if(Array.isArray(e))return e}function IX(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function GA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function FX(e,t){if(e){if(typeof e=="string")return GA(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GA(e,t):void 0}}function zX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KA(e,t){return PX(e)||IX(e,t)||FX(e,t)||zX()}function JA(e,t="utf8"){return new TextDecoder(t).decode(e)}const BX=new TextEncoder;function HX(e){return BX.encode(e)}const UX=1024*8,$X=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),uw={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class lk{constructor(t=UX,n={}){Ke(this,"buffer");Ke(this,"byteLength");Ke(this,"byteOffset");Ke(this,"length");Ke(this,"offset");Ke(this,"lastWrittenByte");Ke(this,"littleEndian");Ke(this,"_data");Ke(this,"_mark");Ke(this,"_marks");let r=!1;typeof t=="number"?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const s=n.offset?n.offset>>>0:0,a=t.byteLength-s;let o=s;(ArrayBuffer.isView(t)||t instanceof lk)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+s),t=t.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=(this.offset+t)*2,s=new Uint8Array(r);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const r=uw[n].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,a=this.buffer.slice(s,s+r);if(this.littleEndian===$X&&n!=="uint8"&&n!=="int8"){const l=new Uint8Array(this.buffer.slice(s,s+r));l.reverse();const c=new uw[n](l.buffer);return this.offset+=r,c.reverse(),c}const o=new uw[n](a);return this.offset+=r,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return JA(this.readBytes(t))}decodeText(t=1,n="utf8"){return JA(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(HX(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Mp(e){let t=e.length;for(;--t>=0;)e[t]=0}const qX=3,VX=258,WR=29,YX=256,WX=YX+1+WR,GR=30,GX=512,KX=new Array((WX+2)*2);Mp(KX);const JX=new Array(GR*2);Mp(JX);const XX=new Array(GX);Mp(XX);const QX=new Array(VX-qX+1);Mp(QX);const ZX=new Array(WR);Mp(ZX);const eQ=new Array(GR);Mp(eQ);const tQ=(e,t,n,r)=>{let s=e&65535|0,a=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do s=s+t[r++]|0,a=a+s|0;while(--o);s%=65521,a%=65521}return s|a<<16|0};var _5=tQ;const nQ=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},rQ=new Uint32Array(nQ()),sQ=(e,t,n,r)=>{const s=rQ,a=r+n;e^=-1;for(let o=r;o<a;o++)e=e>>>8^s[(e^t[o])&255];return e^-1};var Mo=sQ,T5={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},KR={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const aQ=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var iQ=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)aQ(n,r)&&(e[r]=n[r])}}return e},oQ=e=>{let t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,s=0,a=e.length;r<a;r++){let o=e[r];n.set(o,s),s+=o.length}return n},JR={assign:iQ,flattenChunks:oQ};let XR=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{XR=!1}const zg=new Uint8Array(256);for(let e=0;e<256;e++)zg[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;zg[254]=zg[254]=1;var lQ=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,s,a,o=e.length,l=0;for(s=0;s<o;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(l),a=0,s=0;a<l;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=e.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t};const cQ=(e,t)=>{if(t<65534&&e.subarray&&XR)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var dQ=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,s;const a=new Array(n*2);for(s=0,r=0;r<n;){let o=e[r++];if(o<128){a[s++]=o;continue}let l=zg[o];if(l>4){a[s++]=65533,r+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&r<n;)o=o<<6|e[r++]&63,l--;if(l>1){a[s++]=65533;continue}o<65536?a[s++]=o:(o-=65536,a[s++]=55296|o>>10&1023,a[s++]=56320|o&1023)}return cQ(a,s)},uQ=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+zg[e[n]]>t?n:t},L5={string2buf:lQ,buf2string:dQ,utf8border:uQ};function fQ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var hQ=fQ;const R0=16209,pQ=16191;var mQ=function(t,n){let r,s,a,o,l,c,d,u,f,p,h,m,g,x,y,v,N,j,D,T,A,S,E,I;const L=t.state;r=t.next_in,E=t.input,s=r+(t.avail_in-5),a=t.next_out,I=t.output,o=a-(n-t.avail_out),l=a+(t.avail_out-257),c=L.dmax,d=L.wsize,u=L.whave,f=L.wnext,p=L.window,h=L.hold,m=L.bits,g=L.lencode,x=L.distcode,y=(1<<L.lenbits)-1,v=(1<<L.distbits)-1;e:do{m<15&&(h+=E[r++]<<m,m+=8,h+=E[r++]<<m,m+=8),N=g[h&y];t:for(;;){if(j=N>>>24,h>>>=j,m-=j,j=N>>>16&255,j===0)I[a++]=N&65535;else if(j&16){D=N&65535,j&=15,j&&(m<j&&(h+=E[r++]<<m,m+=8),D+=h&(1<<j)-1,h>>>=j,m-=j),m<15&&(h+=E[r++]<<m,m+=8,h+=E[r++]<<m,m+=8),N=x[h&v];n:for(;;){if(j=N>>>24,h>>>=j,m-=j,j=N>>>16&255,j&16){if(T=N&65535,j&=15,m<j&&(h+=E[r++]<<m,m+=8,m<j&&(h+=E[r++]<<m,m+=8)),T+=h&(1<<j)-1,T>c){t.msg="invalid distance too far back",L.mode=R0;break e}if(h>>>=j,m-=j,j=a-o,T>j){if(j=T-j,j>u&&L.sane){t.msg="invalid distance too far back",L.mode=R0;break e}if(A=0,S=p,f===0){if(A+=d-j,j<D){D-=j;do I[a++]=p[A++];while(--j);A=a-T,S=I}}else if(f<j){if(A+=d+f-j,j-=f,j<D){D-=j;do I[a++]=p[A++];while(--j);if(A=0,f<D){j=f,D-=j;do I[a++]=p[A++];while(--j);A=a-T,S=I}}}else if(A+=f-j,j<D){D-=j;do I[a++]=p[A++];while(--j);A=a-T,S=I}for(;D>2;)I[a++]=S[A++],I[a++]=S[A++],I[a++]=S[A++],D-=3;D&&(I[a++]=S[A++],D>1&&(I[a++]=S[A++]))}else{A=a-T;do I[a++]=I[A++],I[a++]=I[A++],I[a++]=I[A++],D-=3;while(D>2);D&&(I[a++]=I[A++],D>1&&(I[a++]=I[A++]))}}else if(j&64){t.msg="invalid distance code",L.mode=R0;break e}else{N=x[(N&65535)+(h&(1<<j)-1)];continue n}break}}else if(j&64)if(j&32){L.mode=pQ;break e}else{t.msg="invalid literal/length code",L.mode=R0;break e}else{N=g[(N&65535)+(h&(1<<j)-1)];continue t}break}}while(r<s&&a<l);D=m>>3,r-=D,m-=D<<3,h&=(1<<m)-1,t.next_in=r,t.next_out=a,t.avail_in=r<s?5+(s-r):5-(r-s),t.avail_out=a<l?257+(l-a):257-(a-l),L.hold=h,L.bits=m};const Hf=15,XA=852,QA=592,ZA=0,fw=1,eM=2,gQ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),xQ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),yQ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),bQ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),vQ=(e,t,n,r,s,a,o,l)=>{const c=l.bits;let d=0,u=0,f=0,p=0,h=0,m=0,g=0,x=0,y=0,v=0,N,j,D,T,A,S=null,E;const I=new Uint16Array(Hf+1),L=new Uint16Array(Hf+1);let O=null,F,U,W;for(d=0;d<=Hf;d++)I[d]=0;for(u=0;u<r;u++)I[t[n+u]]++;for(h=c,p=Hf;p>=1&&I[p]===0;p--);if(h>p&&(h=p),p===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<p&&I[f]===0;f++);for(h<f&&(h=f),x=1,d=1;d<=Hf;d++)if(x<<=1,x-=I[d],x<0)return-1;if(x>0&&(e===ZA||p!==1))return-1;for(L[1]=0,d=1;d<Hf;d++)L[d+1]=L[d]+I[d];for(u=0;u<r;u++)t[n+u]!==0&&(o[L[t[n+u]]++]=u);if(e===ZA?(S=O=o,E=20):e===fw?(S=gQ,O=xQ,E=257):(S=yQ,O=bQ,E=0),v=0,u=0,d=f,A=a,m=h,g=0,D=-1,y=1<<h,T=y-1,e===fw&&y>XA||e===eM&&y>QA)return 1;for(;;){F=d-g,o[u]+1<E?(U=0,W=o[u]):o[u]>=E?(U=O[o[u]-E],W=S[o[u]-E]):(U=96,W=0),N=1<<d-g,j=1<<m,f=j;do j-=N,s[A+(v>>g)+j]=F<<24|U<<16|W|0;while(j!==0);for(N=1<<d-1;v&N;)N>>=1;if(N!==0?(v&=N-1,v+=N):v=0,u++,--I[d]===0){if(d===p)break;d=t[n+o[u]]}if(d>h&&(v&T)!==D){for(g===0&&(g=h),A+=f,m=d-g,x=1<<m;m+g<p&&(x-=I[m+g],!(x<=0));)m++,x<<=1;if(y+=1<<m,e===fw&&y>XA||e===eM&&y>QA)return 1;D=v&T,s[D]=h<<24|m<<16|A-a|0}}return v!==0&&(s[A+v]=d-g<<24|64<<16|0),l.bits=h,0};var Zm=vQ;const wQ=0,QR=1,ZR=2,{Z_FINISH:tM,Z_BLOCK:NQ,Z_TREES:O0,Z_OK:sf,Z_STREAM_END:jQ,Z_NEED_DICT:SQ,Z_STREAM_ERROR:Yi,Z_DATA_ERROR:e8,Z_MEM_ERROR:t8,Z_BUF_ERROR:kQ,Z_DEFLATED:nM}=KR,i1=16180,rM=16181,sM=16182,aM=16183,iM=16184,oM=16185,lM=16186,cM=16187,dM=16188,uM=16189,Mb=16190,Cl=16191,hw=16192,fM=16193,pw=16194,hM=16195,pM=16196,mM=16197,gM=16198,P0=16199,I0=16200,xM=16201,yM=16202,bM=16203,vM=16204,wM=16205,mw=16206,NM=16207,jM=16208,fr=16209,n8=16210,r8=16211,CQ=852,AQ=592,MQ=15,DQ=MQ,SM=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function EQ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const vf=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<i1||t.mode>r8?1:0},s8=e=>{if(vf(e))return Yi;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=i1,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(CQ),t.distcode=t.distdyn=new Int32Array(AQ),t.sane=1,t.back=-1,sf},a8=e=>{if(vf(e))return Yi;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,s8(e)},i8=(e,t)=>{let n;if(vf(e))return Yi;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Yi:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a8(e))},o8=(e,t)=>{if(!e)return Yi;const n=new EQ;e.state=n,n.strm=e,n.window=null,n.mode=i1;const r=i8(e,t);return r!==sf&&(e.state=null),r},_Q=e=>o8(e,DQ);let kM=!0,gw,xw;const TQ=e=>{if(kM){gw=new Int32Array(512),xw=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Zm(QR,e.lens,0,288,gw,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Zm(ZR,e.lens,0,32,xw,0,e.work,{bits:5}),kM=!1}e.lencode=gw,e.lenbits=9,e.distcode=xw,e.distbits=5},l8=(e,t,n,r)=>{let s;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>r&&(s=r),a.window.set(t.subarray(n-r,n-r+s),a.wnext),r-=s,r?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0},LQ=(e,t)=>{let n,r,s,a,o,l,c,d,u,f,p,h,m,g,x=0,y,v,N,j,D,T,A,S;const E=new Uint8Array(4);let I,L;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vf(e)||!e.output||!e.input&&e.avail_in!==0)return Yi;n=e.state,n.mode===Cl&&(n.mode=hw),o=e.next_out,s=e.output,c=e.avail_out,a=e.next_in,r=e.input,l=e.avail_in,d=n.hold,u=n.bits,f=l,p=c,S=sf;e:for(;;)switch(n.mode){case i1:if(n.wrap===0){n.mode=hw;break}for(;u<16;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}if(n.wrap&2&&d===35615){n.wbits===0&&(n.wbits=15),n.check=0,E[0]=d&255,E[1]=d>>>8&255,n.check=Mo(n.check,E,2,0),d=0,u=0,n.mode=rM;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=fr;break}if((d&15)!==nM){e.msg="unknown compression method",n.mode=fr;break}if(d>>>=4,u-=4,A=(d&15)+8,n.wbits===0&&(n.wbits=A),A>15||A>n.wbits){e.msg="invalid window size",n.mode=fr;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=d&512?uM:Cl,d=0,u=0;break;case rM:for(;u<16;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}if(n.flags=d,(n.flags&255)!==nM){e.msg="unknown compression method",n.mode=fr;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=fr;break}n.head&&(n.head.text=d>>8&1),n.flags&512&&n.wrap&4&&(E[0]=d&255,E[1]=d>>>8&255,n.check=Mo(n.check,E,2,0)),d=0,u=0,n.mode=sM;case sM:for(;u<32;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}n.head&&(n.head.time=d),n.flags&512&&n.wrap&4&&(E[0]=d&255,E[1]=d>>>8&255,E[2]=d>>>16&255,E[3]=d>>>24&255,n.check=Mo(n.check,E,4,0)),d=0,u=0,n.mode=aM;case aM:for(;u<16;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}n.head&&(n.head.xflags=d&255,n.head.os=d>>8),n.flags&512&&n.wrap&4&&(E[0]=d&255,E[1]=d>>>8&255,n.check=Mo(n.check,E,2,0)),d=0,u=0,n.mode=iM;case iM:if(n.flags&1024){for(;u<16;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}n.length=d,n.head&&(n.head.extra_len=d),n.flags&512&&n.wrap&4&&(E[0]=d&255,E[1]=d>>>8&255,n.check=Mo(n.check,E,2,0)),d=0,u=0}else n.head&&(n.head.extra=null);n.mode=oM;case oM:if(n.flags&1024&&(h=n.length,h>l&&(h=l),h&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+h),A)),n.flags&512&&n.wrap&4&&(n.check=Mo(n.check,r,h,a)),l-=h,a+=h,n.length-=h),n.length))break e;n.length=0,n.mode=lM;case lM:if(n.flags&2048){if(l===0)break e;h=0;do A=r[a+h++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A));while(A&&h<l);if(n.flags&512&&n.wrap&4&&(n.check=Mo(n.check,r,h,a)),l-=h,a+=h,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=cM;case cM:if(n.flags&4096){if(l===0)break e;h=0;do A=r[a+h++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A));while(A&&h<l);if(n.flags&512&&n.wrap&4&&(n.check=Mo(n.check,r,h,a)),l-=h,a+=h,A)break e}else n.head&&(n.head.comment=null);n.mode=dM;case dM:if(n.flags&512){for(;u<16;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}if(n.wrap&4&&d!==(n.check&65535)){e.msg="header crc mismatch",n.mode=fr;break}d=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Cl;break;case uM:for(;u<32;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}e.adler=n.check=SM(d),d=0,u=0,n.mode=Mb;case Mb:if(n.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=u,SQ;e.adler=n.check=1,n.mode=Cl;case Cl:if(t===NQ||t===O0)break e;case hw:if(n.last){d>>>=u&7,u-=u&7,n.mode=mw;break}for(;u<3;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}switch(n.last=d&1,d>>>=1,u-=1,d&3){case 0:n.mode=fM;break;case 1:if(TQ(n),n.mode=P0,t===O0){d>>>=2,u-=2;break e}break;case 2:n.mode=pM;break;case 3:e.msg="invalid block type",n.mode=fr}d>>>=2,u-=2;break;case fM:for(d>>>=u&7,u-=u&7;u<32;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=fr;break}if(n.length=d&65535,d=0,u=0,n.mode=pw,t===O0)break e;case pw:n.mode=hM;case hM:if(h=n.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;s.set(r.subarray(a,a+h),o),l-=h,a+=h,c-=h,o+=h,n.length-=h;break}n.mode=Cl;break;case pM:for(;u<14;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}if(n.nlen=(d&31)+257,d>>>=5,u-=5,n.ndist=(d&31)+1,d>>>=5,u-=5,n.ncode=(d&15)+4,d>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=fr;break}n.have=0,n.mode=mM;case mM:for(;n.have<n.ncode;){for(;u<3;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}n.lens[O[n.have++]]=d&7,d>>>=3,u-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},S=Zm(wQ,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,S){e.msg="invalid code lengths set",n.mode=fr;break}n.have=0,n.mode=gM;case gM:for(;n.have<n.nlen+n.ndist;){for(;x=n.lencode[d&(1<<n.lenbits)-1],y=x>>>24,v=x>>>16&255,N=x&65535,!(y<=u);){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}if(N<16)d>>>=y,u-=y,n.lens[n.have++]=N;else{if(N===16){for(L=y+2;u<L;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}if(d>>>=y,u-=y,n.have===0){e.msg="invalid bit length repeat",n.mode=fr;break}A=n.lens[n.have-1],h=3+(d&3),d>>>=2,u-=2}else if(N===17){for(L=y+3;u<L;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}d>>>=y,u-=y,A=0,h=3+(d&7),d>>>=3,u-=3}else{for(L=y+7;u<L;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}d>>>=y,u-=y,A=0,h=11+(d&127),d>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=fr;break}for(;h--;)n.lens[n.have++]=A}}if(n.mode===fr)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=fr;break}if(n.lenbits=9,I={bits:n.lenbits},S=Zm(QR,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,S){e.msg="invalid literal/lengths set",n.mode=fr;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},S=Zm(ZR,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,S){e.msg="invalid distances set",n.mode=fr;break}if(n.mode=P0,t===O0)break e;case P0:n.mode=I0;case I0:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=u,mQ(e,p),o=e.next_out,s=e.output,c=e.avail_out,a=e.next_in,r=e.input,l=e.avail_in,d=n.hold,u=n.bits,n.mode===Cl&&(n.back=-1);break}for(n.back=0;x=n.lencode[d&(1<<n.lenbits)-1],y=x>>>24,v=x>>>16&255,N=x&65535,!(y<=u);){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}if(v&&!(v&240)){for(j=y,D=v,T=N;x=n.lencode[T+((d&(1<<j+D)-1)>>j)],y=x>>>24,v=x>>>16&255,N=x&65535,!(j+y<=u);){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}d>>>=j,u-=j,n.back+=j}if(d>>>=y,u-=y,n.back+=y,n.length=N,v===0){n.mode=wM;break}if(v&32){n.back=-1,n.mode=Cl;break}if(v&64){e.msg="invalid literal/length code",n.mode=fr;break}n.extra=v&15,n.mode=xM;case xM:if(n.extra){for(L=n.extra;u<L;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=yM;case yM:for(;x=n.distcode[d&(1<<n.distbits)-1],y=x>>>24,v=x>>>16&255,N=x&65535,!(y<=u);){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}if(!(v&240)){for(j=y,D=v,T=N;x=n.distcode[T+((d&(1<<j+D)-1)>>j)],y=x>>>24,v=x>>>16&255,N=x&65535,!(j+y<=u);){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}d>>>=j,u-=j,n.back+=j}if(d>>>=y,u-=y,n.back+=y,v&64){e.msg="invalid distance code",n.mode=fr;break}n.offset=N,n.extra=v&15,n.mode=bM;case bM:if(n.extra){for(L=n.extra;u<L;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=fr;break}n.mode=vM;case vM:if(c===0)break e;if(h=p-c,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=fr;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),g=n.window}else g=s,m=o-n.offset,h=n.length;h>c&&(h=c),c-=h,n.length-=h;do s[o++]=g[m++];while(--h);n.length===0&&(n.mode=I0);break;case wM:if(c===0)break e;s[o++]=n.length,c--,n.mode=I0;break;case mw:if(n.wrap){for(;u<32;){if(l===0)break e;l--,d|=r[a++]<<u,u+=8}if(p-=c,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?Mo(n.check,s,p,o-p):_5(n.check,s,p,o-p)),p=c,n.wrap&4&&(n.flags?d:SM(d))!==n.check){e.msg="incorrect data check",n.mode=fr;break}d=0,u=0}n.mode=NM;case NM:if(n.wrap&&n.flags){for(;u<32;){if(l===0)break e;l--,d+=r[a++]<<u,u+=8}if(n.wrap&4&&d!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=fr;break}d=0,u=0}n.mode=jM;case jM:S=jQ;break e;case fr:S=e8;break e;case n8:return t8;case r8:default:return Yi}return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=u,(n.wsize||p!==e.avail_out&&n.mode<fr&&(n.mode<mw||t!==tM))&&l8(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?Mo(n.check,s,p,e.next_out-p):_5(n.check,s,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Cl?128:0)+(n.mode===P0||n.mode===pw?256:0),(f===0&&p===0||t===tM)&&S===sf&&(S=kQ),S},RQ=e=>{if(vf(e))return Yi;let t=e.state;return t.window&&(t.window=null),e.state=null,sf},OQ=(e,t)=>{if(vf(e))return Yi;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,sf):Yi},PQ=(e,t)=>{const n=t.length;let r,s,a;return vf(e)||(r=e.state,r.wrap!==0&&r.mode!==Mb)?Yi:r.mode===Mb&&(s=1,s=_5(s,t,n,0),s!==r.check)?e8:(a=l8(e,t,n,n),a?(r.mode=n8,t8):(r.havedict=1,sf))};var IQ=a8,FQ=i8,zQ=s8,BQ=_Q,HQ=o8,UQ=LQ,$Q=RQ,qQ=OQ,VQ=PQ,YQ="pako inflate (from Nodeca project)",Il={inflateReset:IQ,inflateReset2:FQ,inflateResetKeep:zQ,inflateInit:BQ,inflateInit2:HQ,inflate:UQ,inflateEnd:$Q,inflateGetHeader:qQ,inflateSetDictionary:VQ,inflateInfo:YQ};function WQ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var GQ=WQ;const c8=Object.prototype.toString,{Z_NO_FLUSH:KQ,Z_FINISH:JQ,Z_OK:Bg,Z_STREAM_END:yw,Z_NEED_DICT:bw,Z_STREAM_ERROR:XQ,Z_DATA_ERROR:CM,Z_MEM_ERROR:QQ}=KR;function gx(e){this.options=JR.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new hQ,this.strm.avail_out=0;let n=Il.inflateInit2(this.strm,t.windowBits);if(n!==Bg)throw new Error(T5[n]);if(this.header=new GQ,Il.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=L5.string2buf(t.dictionary):c8.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Il.inflateSetDictionary(this.strm,t.dictionary),n!==Bg)))throw new Error(T5[n])}gx.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let a,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?JQ:KQ,c8.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Il.inflate(n,o),a===bw&&s&&(a=Il.inflateSetDictionary(n,s),a===Bg?a=Il.inflate(n,o):a===CM&&(a=bw));n.avail_in>0&&a===yw&&n.state.wrap>0&&e[n.next_in]!==0;)Il.inflateReset(n),a=Il.inflate(n,o);switch(a){case XQ:case CM:case bw:case QQ:return this.onEnd(a),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||a===yw))if(this.options.to==="string"){let c=L5.utf8border(n.output,n.next_out),d=n.next_out-c,u=L5.buf2string(n.output,c);n.next_out=d,n.avail_out=r-d,d&&n.output.set(n.output.subarray(c,c+d),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===Bg&&l===0)){if(a===yw)return a=Il.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};gx.prototype.onData=function(e){this.chunks.push(e)};gx.prototype.onEnd=function(e){e===Bg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=JR.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ZQ(e,t){const n=new gx(t);if(n.push(e),n.err)throw n.msg||T5[n.err];return n.result}var eZ=gx,tZ=ZQ,nZ={Inflate:eZ,inflate:tZ};const{Inflate:rZ,inflate:sZ}=nZ;var AM=rZ,aZ=sZ;const d8=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;d8[e]=t}const MM=4294967295;function iZ(e,t,n){let r=e;for(let s=0;s<n;s++)r=d8[(r^t[s])&255]^r>>>8;return r}function oZ(e,t){return(iZ(MM,e,t)^MM)>>>0}function DM(e,t,n){const r=e.readUint32(),s=oZ(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${s}`)}function u8(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function f8(e,t,n,r){let s=0;for(;s<r;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-r]&255}function h8(e,t,n,r){let s=0;if(n.length===0)for(;s<r;s++)t[s]=e[s];else for(;s<r;s++)t[s]=e[s]+n[s]&255}function p8(e,t,n,r,s){let a=0;if(n.length===0){for(;a<s;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+(t[a-s]>>1)&255}else{for(;a<s;a++)t[a]=e[a]+(n[a]>>1)&255;for(;a<r;a++)t[a]=e[a]+(t[a-s]+n[a]>>1)&255}}function m8(e,t,n,r,s){let a=0;if(n.length===0){for(;a<s;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-s]&255}else{for(;a<s;a++)t[a]=e[a]+n[a]&255;for(;a<r;a++)t[a]=e[a]+lZ(t[a-s],n[a],n[a-s])&255}}function lZ(e,t,n){const r=e+t-n,s=Math.abs(r-e),a=Math.abs(r-t),o=Math.abs(r-n);return s<=a&&s<=o?e:a<=o?t:n}function cZ(e,t,n,r,s,a){switch(e){case 0:u8(t,n,s);break;case 1:f8(t,n,s,a);break;case 2:h8(t,n,r,s);break;case 3:p8(t,n,r,s,a);break;case 4:m8(t,n,r,s,a);break;default:throw new Error(`Unsupported filter: ${e}`)}}const dZ=new Uint16Array([255]),uZ=new Uint8Array(dZ.buffer),fZ=uZ[0]===255;function hZ(e){const{data:t,width:n,height:r,channels:s,depth:a}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(a/8)*s,c=new Uint8Array(r*n*l);let d=0;for(let u=0;u<7;u++){const f=o[u],p=Math.ceil((n-f.x)/f.xStep),h=Math.ceil((r-f.y)/f.yStep);if(p<=0||h<=0)continue;const m=p*l,g=new Uint8Array(m);for(let x=0;x<h;x++){const y=t[d++],v=t.subarray(d,d+m);d+=m;const N=new Uint8Array(m);cZ(y,v,N,g,m,l),g.set(N);for(let j=0;j<p;j++){const D=f.x+j*f.xStep,T=f.y+x*f.yStep;if(!(D>=n||T>=r))for(let A=0;A<l;A++)c[(T*n+D)*l+A]=N[j*l+A]}}}if(a===16){const u=new Uint16Array(c.buffer);if(fZ)for(let f=0;f<u.length;f++)u[f]=pZ(u[f]);return u}else return c}function pZ(e){return(e&255)<<8|e>>8&255}const mZ=new Uint16Array([255]),gZ=new Uint8Array(mZ.buffer),xZ=gZ[0]===255,yZ=new Uint8Array(0);function EM(e){const{data:t,width:n,height:r,channels:s,depth:a}=e,o=Math.ceil(a/8)*s,l=Math.ceil(a/8*s*n),c=new Uint8Array(r*l);let d=yZ,u=0,f,p;for(let h=0;h<r;h++){switch(f=t.subarray(u+1,u+1+l),p=c.subarray(h*l,(h+1)*l),t[u]){case 0:u8(f,p,l);break;case 1:f8(f,p,l,o);break;case 2:h8(f,p,d,l);break;case 3:p8(f,p,d,l,o);break;case 4:m8(f,p,d,l,o);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}d=p,u+=l+1}if(a===16){const h=new Uint16Array(c.buffer);if(xZ)for(let m=0;m<h.length;m++)h[m]=bZ(h[m]);return h}else return c}function bZ(e){return(e&255)<<8|e>>8&255}const Sy=Uint8Array.of(137,80,78,71,13,10,26,10);function _M(e){if(!vZ(e.readBytes(Sy.length)))throw new Error("wrong PNG signature")}function vZ(e){if(e.length<Sy.length)return!1;for(let t=0;t<Sy.length;t++)if(e[t]!==Sy[t])return!1;return!0}const wZ="tEXt",NZ=0,g8=new TextDecoder("latin1");function jZ(e){if(kZ(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const SZ=/^[\u0000-\u00FF]*$/;function kZ(e){if(!SZ.test(e))throw new Error("invalid latin1 text")}function CZ(e,t,n){const r=x8(t);e[r]=AZ(t,n-r.length-1)}function x8(e){for(e.mark();e.readByte()!==NZ;);const t=e.offset;e.reset();const n=g8.decode(e.readBytes(t-e.offset-1));return e.skip(1),jZ(n),n}function AZ(e,t){return g8.decode(e.readBytes(t))}const Qa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},vw={UNKNOWN:-1,DEFLATE:0},TM={UNKNOWN:-1,ADAPTIVE:0},ww={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},F0={NONE:0,BACKGROUND:1,PREVIOUS:2},Nw={SOURCE:0,OVER:1};class MZ extends lk{constructor(n,r={}){super(n);Ke(this,"_checkCrc");Ke(this,"_inflator");Ke(this,"_png");Ke(this,"_apng");Ke(this,"_end");Ke(this,"_hasPalette");Ke(this,"_palette");Ke(this,"_hasTransparency");Ke(this,"_transparency");Ke(this,"_compressionMethod");Ke(this,"_filterMethod");Ke(this,"_interlaceMethod");Ke(this,"_colorType");Ke(this,"_isAnimated");Ke(this,"_numberOfFrames");Ke(this,"_numberOfPlays");Ke(this,"_frames");Ke(this,"_writingDataChunks");const{checkCrc:s=!1}=r;this._checkCrc=s,this._inflator=new AM,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=vw.UNKNOWN,this._filterMethod=TM.UNKNOWN,this._interlaceMethod=ww.UNKNOWN,this._colorType=Qa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(_M(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(_M(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const s=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case wZ:CZ(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?DM(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const s=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=s+n;break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?DM(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=DZ(this.readUint8());const r=this.readUint8();this._colorType=r;let s;switch(r){case Qa.GREYSCALE:s=1;break;case Qa.TRUECOLOUR:s=3;break;case Qa.INDEXED_COLOUR:s=1;break;case Qa.GREYSCALE_ALPHA:s=2;break;case Qa.TRUECOLOUR_ALPHA:s=4;break;case Qa.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==vw.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<r;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,s=this.offset+this.byteOffset;if(s+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Qa.GREYSCALE:case Qa.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Qa.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const s=this.readByte();this._palette[r].push(s)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Qa.UNKNOWN:case Qa.GREYSCALE_ALPHA:case Qa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=x8(this),s=this.readUint8();if(s!==vw.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:aZ(a)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),s=this.readByte();this._png.resolution={x:n,y:r,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(n);if(s){if(s.data=EM({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)r.data=s.data;else{const a=this._apng.frames.at(n-1);this.disposeFrame(s,a,r),this.addFrameDataToCanvas(r,s)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,s){switch(n.disposeOp){case F0.NONE:break;case F0.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const l=(a*n.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)s.data[l+c]=0}break;case F0.PREVIOUS:s.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const s=1<<this._png.depth,a=(o,l)=>{const c=((o+r.yOffset)*this._png.width+r.xOffset+l)*this._png.channels,d=(o*r.width+l)*this._png.channels;return{index:c,frameIndex:d}};switch(r.blendOp){case Nw.SOURCE:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:c,frameIndex:d}=a(o,l);for(let u=0;u<this._png.channels;u++)n.data[c+u]=r.data[d+u]}break;case Nw.OVER:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:c,frameIndex:d}=a(o,l);for(let u=0;u<this._png.channels;u++){const f=r.data[d+this._png.channels-1]/s,p=u%(this._png.channels-1)===0?1:r.data[d+u],h=Math.floor(f*p+(1-f)*n.data[c+u]);n.data[c+u]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==TM.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===ww.NO_INTERLACE)this._png.data=EM({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===ww.ADAM7)this._png.data=hZ({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:F0.NONE,blendOp:Nw.SOURCE,data:n}),this._inflator=new AM,this._writingDataChunks=!1}}function DZ(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var LM;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(LM||(LM={}));function EZ(e,t){return new MZ(e,t).decode()}var zt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function jw(){zt.console&&typeof zt.console.log=="function"&&zt.console.log.apply(zt.console,arguments)}var Jn={log:jw,warn:function(e){zt.console&&(typeof zt.console.warn=="function"?zt.console.warn.apply(zt.console,arguments):jw.call(null,arguments))},error:function(e){zt.console&&(typeof zt.console.error=="function"?zt.console.error.apply(zt.console,arguments):jw(e))}};function Sw(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){yu(r.response,t,n)},r.onerror=function(){Jn.error("could not download file")},r.send()}function RM(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function z0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var yu=zt.saveAs||((typeof window>"u"?"undefined":zn(window))!=="object"||window!==zt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=zt.URL||zt.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?RM(s.href)?Sw(e,t,n):z0(s,s.target="_blank"):z0(s)):(s.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){z0(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(RM(e))Sw(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){z0(r)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:zn(a)!=="object"&&(Jn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return Sw(e,t,n);var s=e.type==="application/octet-stream",a=/constructor/i.test(zt.HTMLElement)||zt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&a)&&(typeof FileReader>"u"?"undefined":zn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},l.readAsDataURL(e)}else{var c=zt.URL||zt.webkitURL,d=c.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function y8(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,a=n[r].process,o=s.exec(e);o&&(t=a(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}var ky=zt.atob.bind(zt),OM=zt.btoa.bind(zt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function kw(e,t){var n=e[0],r=e[1],s=e[2],a=e[3];n=Gs(n,r,s,a,t[0],7,-680876936),a=Gs(a,n,r,s,t[1],12,-389564586),s=Gs(s,a,n,r,t[2],17,606105819),r=Gs(r,s,a,n,t[3],22,-1044525330),n=Gs(n,r,s,a,t[4],7,-176418897),a=Gs(a,n,r,s,t[5],12,1200080426),s=Gs(s,a,n,r,t[6],17,-1473231341),r=Gs(r,s,a,n,t[7],22,-45705983),n=Gs(n,r,s,a,t[8],7,1770035416),a=Gs(a,n,r,s,t[9],12,-1958414417),s=Gs(s,a,n,r,t[10],17,-42063),r=Gs(r,s,a,n,t[11],22,-1990404162),n=Gs(n,r,s,a,t[12],7,1804603682),a=Gs(a,n,r,s,t[13],12,-40341101),s=Gs(s,a,n,r,t[14],17,-1502002290),n=Ks(n,r=Gs(r,s,a,n,t[15],22,1236535329),s,a,t[1],5,-165796510),a=Ks(a,n,r,s,t[6],9,-1069501632),s=Ks(s,a,n,r,t[11],14,643717713),r=Ks(r,s,a,n,t[0],20,-373897302),n=Ks(n,r,s,a,t[5],5,-701558691),a=Ks(a,n,r,s,t[10],9,38016083),s=Ks(s,a,n,r,t[15],14,-660478335),r=Ks(r,s,a,n,t[4],20,-405537848),n=Ks(n,r,s,a,t[9],5,568446438),a=Ks(a,n,r,s,t[14],9,-1019803690),s=Ks(s,a,n,r,t[3],14,-187363961),r=Ks(r,s,a,n,t[8],20,1163531501),n=Ks(n,r,s,a,t[13],5,-1444681467),a=Ks(a,n,r,s,t[2],9,-51403784),s=Ks(s,a,n,r,t[7],14,1735328473),n=Js(n,r=Ks(r,s,a,n,t[12],20,-1926607734),s,a,t[5],4,-378558),a=Js(a,n,r,s,t[8],11,-2022574463),s=Js(s,a,n,r,t[11],16,1839030562),r=Js(r,s,a,n,t[14],23,-35309556),n=Js(n,r,s,a,t[1],4,-1530992060),a=Js(a,n,r,s,t[4],11,1272893353),s=Js(s,a,n,r,t[7],16,-155497632),r=Js(r,s,a,n,t[10],23,-1094730640),n=Js(n,r,s,a,t[13],4,681279174),a=Js(a,n,r,s,t[0],11,-358537222),s=Js(s,a,n,r,t[3],16,-722521979),r=Js(r,s,a,n,t[6],23,76029189),n=Js(n,r,s,a,t[9],4,-640364487),a=Js(a,n,r,s,t[12],11,-421815835),s=Js(s,a,n,r,t[15],16,530742520),n=Xs(n,r=Js(r,s,a,n,t[2],23,-995338651),s,a,t[0],6,-198630844),a=Xs(a,n,r,s,t[7],10,1126891415),s=Xs(s,a,n,r,t[14],15,-1416354905),r=Xs(r,s,a,n,t[5],21,-57434055),n=Xs(n,r,s,a,t[12],6,1700485571),a=Xs(a,n,r,s,t[3],10,-1894986606),s=Xs(s,a,n,r,t[10],15,-1051523),r=Xs(r,s,a,n,t[1],21,-2054922799),n=Xs(n,r,s,a,t[8],6,1873313359),a=Xs(a,n,r,s,t[15],10,-30611744),s=Xs(s,a,n,r,t[6],15,-1560198380),r=Xs(r,s,a,n,t[13],21,1309151649),n=Xs(n,r,s,a,t[4],6,-145523070),a=Xs(a,n,r,s,t[11],10,-1120210379),s=Xs(s,a,n,r,t[2],15,718787259),r=Xs(r,s,a,n,t[9],21,-343485551),e[0]=cd(n,e[0]),e[1]=cd(r,e[1]),e[2]=cd(s,e[2]),e[3]=cd(a,e[3])}function o1(e,t,n,r,s,a){return t=cd(cd(t,e),cd(r,a)),cd(t<<s|t>>>32-s,n)}function Gs(e,t,n,r,s,a,o){return o1(t&n|~t&r,e,t,s,a,o)}function Ks(e,t,n,r,s,a,o){return o1(t&r|n&~r,e,t,s,a,o)}function Js(e,t,n,r,s,a,o){return o1(t^n^r,e,t,s,a,o)}function Xs(e,t,n,r,s,a,o){return o1(n^(t|~r),e,t,s,a,o)}function b8(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)kw(r,_Z(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(kw(r,s),t=0;t<16;t++)s[t]=0;return s[14]=8*n,kw(r,s),r}function _Z(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var PM="0123456789abcdef".split("");function TZ(e){for(var t="",n=0;n<4;n++)t+=PM[e>>8*n+4&15]+PM[e>>8*n&15];return t}function LZ(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function R5(e){return b8(e).map(LZ).join("")}var RZ=function(e){for(var t=0;t<e.length;t++)e[t]=TZ(e[t]);return e.join("")}(b8("hello"))!="5d41402abc4b2a76b9719d911017c592";function cd(e,t){if(RZ){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function O5(e,t){var n,r,s,a;if(e!==n){for(var o=(s=e,a=1+(256/e.length|0),new Array(a+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}n=e,r=l}else l=r;var f=t.length,p=0,h=0,m="";for(c=0;c<f;c++)h=(h+(u=l[p=(p+1)%256]))%256,l[p]=l[h],l[h]=u,o=l[(l[p]+l[h])%256],m+=String.fromCharCode(t.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var IM={print:4,modify:8,copy:16,"annot-forms":32};function Xf(e,t,n,r){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(IM.perm!==void 0)throw new Error("Invalid permission: "+l);s+=IM[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^s)),this.encryptionKey=R5(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=O5(this.encryptionKey,this.padding)}function Qf(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var s=e.charCodeAt(r);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):e[r]}return t}function FM(e){if(zn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var a=Math.random().toString(35);return t[n][a]=[r,!!s],a},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var a in t[n]){var o=t[n][a];try{o[0].apply(e,r)}catch(l){zt.console&&Jn.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Db(e){if(!(this instanceof Db))return new Db(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function v8(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function wu(e,t,n,r,s){if(!(this instanceof wu))return new wu(e,t,n,r,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,v8.call(this,r,s)}function gh(e,t,n,r,s){if(!(this instanceof gh))return new gh(e,t,n,r,s);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,v8.call(this,r,s)}function St(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],a=arguments[3],o=[],l=1,c=16,d="S",u=null;zn(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,s=e.format||s,a=e.compress||e.compressPdf||a,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=FM;var m="1.3",g=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(k){m=k};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return x};var y=h.__private__.getPageFormat=function(k){return x[k]};s=s||"a4";var v="compat",N="advanced",j=v;function D(){this.saveGraphicsState(),V(new Lt(Et,0,0,-Et,0,Qd()*Et).toString()+" cm"),this.setFontSize(this.getFontSize()/Et),d="n",j=N}function T(){this.restoreGraphicsState(),d="S",j=v}var A=h.__private__.combineFontStyleAndFontWeight=function(k,B){if(k=="bold"&&B=="normal"||k=="bold"&&B==400||k=="normal"&&B=="italic"||k=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(k=B==400||B==="normal"?k==="italic"?"italic":"normal":B!=700&&B!=="bold"||k!=="normal"?(B==700?"bold":B)+""+k:"bold"),k};h.advancedAPI=function(k){var B=j===v;return B&&D.call(this),typeof k!="function"||(k(this),B&&T.call(this)),this},h.compatAPI=function(k){var B=j===N;return B&&T.call(this),typeof k!="function"||(k(this),B&&D.call(this)),this},h.isAdvancedAPI=function(){return j===N};var S,E=function(k){if(j!==N)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=h.roundToPrecision=h.__private__.roundToPrecision=function(k,B){var ae=t||B;if(isNaN(k)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(ae).replace(/0+$/,"")};S=h.hpf=h.__private__.hpf=typeof c=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return I(k,c)}:c==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return I(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return I(k,16)};var L=h.f2=h.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return I(k,2)},O=h.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return I(k,3)},F=h.scale=h.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return j===v?k*Et:j===N?k:void 0},U=function(k){return F(function(B){return j===v?Qd()-B:j===N?B:void 0}(k))};h.__private__.setPrecision=h.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(t=parseInt(k,10))};var W,X="00000000000000000000000000000000",P=h.__private__.getFileId=function(){return X},z=h.__private__.setFileId=function(k){return X=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(ls=new Xf(u.userPermissions,u.userPassword,u.ownerPassword,X)),X};h.setFileId=function(k){return z(k),this},h.getFileId=function(){return P()};var oe=h.__private__.convertDateToPDFDate=function(k){var B=k.getTimezoneOffset(),ae=B<0?"+":"-",fe=Math.floor(Math.abs(B/60)),ve=Math.abs(B%60),Ie=[ae,J(fe),"'",J(ve),"'"].join("");return["D:",k.getFullYear(),J(k.getMonth()+1),J(k.getDate()),J(k.getHours()),J(k.getMinutes()),J(k.getSeconds()),Ie].join("")},Y=h.__private__.convertPDFDateToDate=function(k){var B=parseInt(k.substr(2,4),10),ae=parseInt(k.substr(6,2),10)-1,fe=parseInt(k.substr(8,2),10),ve=parseInt(k.substr(10,2),10),Ie=parseInt(k.substr(12,2),10),Ue=parseInt(k.substr(14,2),10);return new Date(B,ae,fe,ve,Ie,Ue,0)},q=h.__private__.setCreationDate=function(k){var B;if(k===void 0&&(k=new Date),k instanceof Date)B=oe(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=k}return W=B},_=h.__private__.getCreationDate=function(k){var B=W;return k==="jsDate"&&(B=Y(W)),B};h.setCreationDate=function(k){return q(k),this},h.getCreationDate=function(k){return _(k)};var $,J=h.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},te=h.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},Z=0,ie=[],he=[],ye=0,Se=[],Ee=[],Pe=!1,qe=he;h.__private__.setCustomOutputDestination=function(k){Pe=!0,qe=k};var We=function(k){Pe||(qe=k)};h.__private__.resetCustomOutputDestination=function(){Pe=!1,qe=he};var V=h.__private__.out=function(k){return k=k.toString(),ye+=k.length+1,qe.push(k),qe},Ae=h.__private__.write=function(k){return V(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Ve=h.__private__.getArrayBuffer=function(k){for(var B=k.length,ae=new ArrayBuffer(B),fe=new Uint8Array(ae);B--;)fe[B]=k.charCodeAt(B);return ae},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return et};var _e=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(k){return _e=j===N?k/Et:k,this};var ne,de=h.__private__.getFontSize=h.getFontSize=function(){return j===v?_e:_e*Et},ce=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(k){return ce=k,this},h.__private__.getR2L=h.getR2L=function(){return ce};var De,Re=h.__private__.setZoomMode=function(k){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))ne=k;else if(isNaN(k)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');ne=k}else ne=parseInt(k,10)};h.__private__.getZoomMode=function(){return ne};var Me,He=h.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');De=k};h.__private__.getPageMode=function(){return De};var dt=h.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');Me=k};h.__private__.getLayoutMode=function(){return Me},h.__private__.setDisplayMode=h.setDisplayMode=function(k,B,ae){return Re(k),dt(B),He(ae),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(k){if(Object.keys(it).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[k]},h.__private__.getDocumentProperties=function(){return it},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(k){for(var B in it)it.hasOwnProperty(B)&&k[B]&&(it[B]=k[B]);return this},h.__private__.setDocumentProperty=function(k,B){if(Object.keys(it).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[k]=B};var Qe,Et,rt,Yn,Pt,Bt={},Vt={},Mn=[],kt={},jn={},At={},Ht={},Un=null,Jt=0,Tt=[],bn=new FM(h),tl=e.hotfixes||[],is={},ba={},ra=[],Lt=function k(B,ae,fe,ve,Ie,Ue){if(!(this instanceof k))return new k(B,ae,fe,ve,Ie,Ue);isNaN(B)&&(B=1),isNaN(ae)&&(ae=0),isNaN(fe)&&(fe=0),isNaN(ve)&&(ve=1),isNaN(Ie)&&(Ie=0),isNaN(Ue)&&(Ue=0),this._matrix=[B,ae,fe,ve,Ie,Ue]};Object.defineProperty(Lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Lt.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(k)},Lt.prototype.multiply=function(k){var B=k.sx*this.sx+k.shy*this.shx,ae=k.sx*this.shy+k.shy*this.sy,fe=k.shx*this.sx+k.sy*this.shx,ve=k.shx*this.shy+k.sy*this.sy,Ie=k.tx*this.sx+k.ty*this.shx+this.tx,Ue=k.tx*this.shy+k.ty*this.sy+this.ty;return new Lt(B,ae,fe,ve,Ie,Ue)},Lt.prototype.decompose=function(){var k=this.sx,B=this.shy,ae=this.shx,fe=this.sy,ve=this.tx,Ie=this.ty,Ue=Math.sqrt(k*k+B*B),bt=(k/=Ue)*ae+(B/=Ue)*fe;ae-=k*bt,fe-=B*bt;var Nt=Math.sqrt(ae*ae+fe*fe);return bt/=Nt,k*(fe/=Nt)<B*(ae/=Nt)&&(k=-k,B=-B,bt=-bt,Ue=-Ue),{scale:new Lt(Ue,0,0,Nt,0,0),translate:new Lt(1,0,0,1,ve,Ie),rotate:new Lt(k,B,-B,k,0,0),skew:new Lt(1,0,bt,1,0,0)}},Lt.prototype.toString=function(k){return this.join(" ")},Lt.prototype.inversed=function(){var k=this.sx,B=this.shy,ae=this.shx,fe=this.sy,ve=this.tx,Ie=this.ty,Ue=1/(k*fe-B*ae),bt=fe*Ue,Nt=-B*Ue,Ut=-ae*Ue,Xt=k*Ue;return new Lt(bt,Nt,Ut,Xt,-bt*ve-Ut*Ie,-Nt*ve-Xt*Ie)},Lt.prototype.applyToPoint=function(k){var B=k.x*this.sx+k.y*this.shx+this.tx,ae=k.x*this.shy+k.y*this.sy+this.ty;return new ol(B,ae)},Lt.prototype.applyToRectangle=function(k){var B=this.applyToPoint(k),ae=this.applyToPoint(new ol(k.x+k.w,k.y+k.h));return new Pp(B.x,B.y,ae.x-B.x,ae.y-B.y)},Lt.prototype.clone=function(){var k=this.sx,B=this.shy,ae=this.shx,fe=this.sy,ve=this.tx,Ie=this.ty;return new Lt(k,B,ae,fe,ve,Ie)},h.Matrix=Lt;var Wi=h.matrixMult=function(k,B){return B.multiply(k)},ue=new Lt(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=ue;var be=function(k,B){if(!jn[k]){var ae=(B instanceof wu?"Sh":"P")+(Object.keys(kt).length+1).toString(10);B.id=ae,jn[k]=ae,kt[ae]=B,bn.publish("addPattern",B)}};h.ShadingPattern=wu,h.TilingPattern=gh,h.addShadingPattern=function(k,B){return E("addShadingPattern()"),be(k,B),this},h.beginTilingPattern=function(k){E("beginTilingPattern()"),Ip(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},h.endTilingPattern=function(k,B){E("endTilingPattern()"),B.stream=Ee[$].join(`
`),be(k,B),bn.publish("endTilingPattern",B),ra.pop().restore()};var ke,Oe=h.__private__.newObject=function(){var k=Je();return lt(k,!0),k},Je=h.__private__.newObjectDeferred=function(){return Z++,ie[Z]=function(){return ye},Z},lt=function(k,B){return B=typeof B=="boolean"&&B,ie[k]=ye,B&&V(k+" 0 obj"),k},Mt=h.__private__.newAdditionalObject=function(){var k={objId:Je(),content:""};return Se.push(k),k},ut=Je(),ct=Je(),st=h.__private__.decodeColorString=function(k){var B=k.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length!==5||B[4]!=="k"&&B[4]!=="K"||(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var ae=parseFloat(B[0]);B=[ae,ae,ae,"r"]}for(var fe="#",ve=0;ve<3;ve++)fe+=("0"+Math.floor(255*parseFloat(B[ve])).toString(16)).slice(-2);return fe},ht=h.__private__.encodeColorString=function(k){var B;typeof k=="string"&&(k={ch1:k});var ae=k.ch1,fe=k.ch2,ve=k.ch3,Ie=k.ch4,Ue=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var bt=new y8(ae);if(bt.ok)ae=bt.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Nt=parseInt(ae.substr(1),16);ae=Nt>>16&255,fe=Nt>>8&255,ve=255&Nt}if(fe===void 0||Ie===void 0&&ae===fe&&fe===ve)B=typeof ae=="string"?ae+" "+Ue[0]:k.precision===2?L(ae/255)+" "+Ue[0]:O(ae/255)+" "+Ue[0];else if(Ie===void 0||zn(Ie)==="object"){if(Ie&&!isNaN(Ie.a)&&Ie.a===0)return["1.","1.","1.",Ue[1]].join(" ");B=typeof ae=="string"?[ae,fe,ve,Ue[1]].join(" "):k.precision===2?[L(ae/255),L(fe/255),L(ve/255),Ue[1]].join(" "):[O(ae/255),O(fe/255),O(ve/255),Ue[1]].join(" ")}else B=typeof ae=="string"?[ae,fe,ve,Ie,Ue[2]].join(" "):k.precision===2?[L(ae),L(fe),L(ve),L(Ie),Ue[2]].join(" "):[O(ae),O(fe),O(ve),O(Ie),Ue[2]].join(" ");return B},_t=h.__private__.getFilters=function(){return o},Ft=h.__private__.putStream=function(k){var B=(k=k||{}).data||"",ae=k.filters||_t(),fe=k.alreadyAppliedFilters||[],ve=k.addLength1||!1,Ie=B.length,Ue=k.objectId,bt=function(cs){return cs};if(u!==null&&Ue===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(bt=ls.encryptor(Ue,0));var Nt={};ae===!0&&(ae=["FlateEncode"]);var Ut=k.additionalKeyValues||[],Xt=(Nt=St.API.processDataByFilters!==void 0?St.API.processDataByFilters(B,ae):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(Nt.data.length!==0&&(Ut.push({key:"Length",value:Nt.data.length}),ve===!0&&Ut.push({key:"Length1",value:Ie})),Xt.length!=0)if(Xt.split("/").length-1==1)Ut.push({key:"Filter",value:Xt});else{Ut.push({key:"Filter",value:"["+Xt+"]"});for(var vn=0;vn<Ut.length;vn+=1)if(Ut[vn].key==="DecodeParms"){for(var mr=[],Kr=0;Kr<Nt.reverseChain.split("/").length-1;Kr+=1)mr.push("null");mr.push(Ut[vn].value),Ut[vn].value="["+mr.join(" ")+"]"}}V("<<");for(var Zn=0;Zn<Ut.length;Zn++)V("/"+Ut[Zn].key+" "+Ut[Zn].value);V(">>"),Nt.data.length!==0&&(V("stream"),V(bt(Nt.data)),V("endstream"))},rr=h.__private__.putPage=function(k){var B=k.number,ae=k.data,fe=k.objId,ve=k.contentsObjId;lt(fe,!0),V("<</Type /Page"),V("/Parent "+k.rootDictionaryObjId+" 0 R"),V("/Resources "+k.resourceDictionaryObjId+" 0 R"),V("/MediaBox ["+parseFloat(S(k.mediaBox.bottomLeftX))+" "+parseFloat(S(k.mediaBox.bottomLeftY))+" "+S(k.mediaBox.topRightX)+" "+S(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&V("/CropBox ["+S(k.cropBox.bottomLeftX)+" "+S(k.cropBox.bottomLeftY)+" "+S(k.cropBox.topRightX)+" "+S(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&V("/BleedBox ["+S(k.bleedBox.bottomLeftX)+" "+S(k.bleedBox.bottomLeftY)+" "+S(k.bleedBox.topRightX)+" "+S(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&V("/TrimBox ["+S(k.trimBox.bottomLeftX)+" "+S(k.trimBox.bottomLeftY)+" "+S(k.trimBox.topRightX)+" "+S(k.trimBox.topRightY)+"]"),k.artBox!==null&&V("/ArtBox ["+S(k.artBox.bottomLeftX)+" "+S(k.artBox.bottomLeftY)+" "+S(k.artBox.topRightX)+" "+S(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&V("/UserUnit "+k.userUnit),bn.publish("putPage",{objId:fe,pageContext:Tt[B],pageNumber:B,page:ae}),V("/Contents "+ve+" 0 R"),V(">>"),V("endobj");var Ie=ae.join(`
`);return j===N&&(Ie+=`
Q`),lt(ve,!0),Ft({data:Ie,filters:_t(),objectId:ve}),V("endobj"),fe},dn=h.__private__.putPages=function(){var k,B,ae=[];for(k=1;k<=Jt;k++)Tt[k].objId=Je(),Tt[k].contentsObjId=Je();for(k=1;k<=Jt;k++)ae.push(rr({number:k,data:Ee[k],objId:Tt[k].objId,contentsObjId:Tt[k].contentsObjId,mediaBox:Tt[k].mediaBox,cropBox:Tt[k].cropBox,bleedBox:Tt[k].bleedBox,trimBox:Tt[k].trimBox,artBox:Tt[k].artBox,userUnit:Tt[k].userUnit,rootDictionaryObjId:ut,resourceDictionaryObjId:ct}));lt(ut,!0),V("<</Type /Pages");var fe="/Kids [";for(B=0;B<Jt;B++)fe+=ae[B]+" 0 R ";V(fe+"]"),V("/Count "+Jt),V(">>"),V("endobj"),bn.publish("postPutPages")},rn=function(k){bn.publish("putFont",{font:k,out:V,newObject:Oe,putStream:Ft}),k.isAlreadyPutted!==!0&&(k.objectNumber=Oe(),V("<<"),V("/Type /Font"),V("/BaseFont /"+Qf(k.postScriptName)),V("/Subtype /Type1"),typeof k.encoding=="string"&&V("/Encoding /"+k.encoding),V("/FirstChar 32"),V("/LastChar 255"),V(">>"),V("endobj"))},Tn=function(k){k.objectNumber=Oe();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[S(k.x),S(k.y),S(k.x+k.width),S(k.y+k.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var ae=k.pages[1].join(`
`);Ft({data:ae,additionalKeyValues:B,objectId:k.objectNumber}),V("endobj")},Ha=function(k,B){B||(B=21);var ae=Oe(),fe=function(Ue,bt){var Nt,Ut=[],Xt=1/(bt-1);for(Nt=0;Nt<1;Nt+=Xt)Ut.push(Nt);if(Ut.push(1),Ue[0].offset!=0){var vn={offset:0,color:Ue[0].color};Ue.unshift(vn)}if(Ue[Ue.length-1].offset!=1){var mr={offset:1,color:Ue[Ue.length-1].color};Ue.push(mr)}for(var Kr="",Zn=0,cs=0;cs<Ut.length;cs++){for(Nt=Ut[cs];Nt>Ue[Zn+1].offset;)Zn++;var Jr=Ue[Zn].offset,_s=(Nt-Jr)/(Ue[Zn+1].offset-Jr),dl=Ue[Zn].color,Ji=Ue[Zn+1].color;Kr+=te(Math.round((1-_s)*dl[0]+_s*Ji[0]).toString(16))+te(Math.round((1-_s)*dl[1]+_s*Ji[1]).toString(16))+te(Math.round((1-_s)*dl[2]+_s*Ji[2]).toString(16))}return Kr.trim()}(k.colors,B),ve=[];ve.push({key:"FunctionType",value:"0"}),ve.push({key:"Domain",value:"[0.0 1.0]"}),ve.push({key:"Size",value:"["+B+"]"}),ve.push({key:"BitsPerSample",value:"8"}),ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ft({data:fe,additionalKeyValues:ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),V("endobj"),k.objectNumber=Oe(),V("<< /ShadingType "+k.type),V("/ColorSpace /DeviceRGB");var Ie="/Coords ["+S(parseFloat(k.coords[0]))+" "+S(parseFloat(k.coords[1]))+" ";k.type===2?Ie+=S(parseFloat(k.coords[2]))+" "+S(parseFloat(k.coords[3])):Ie+=S(parseFloat(k.coords[2]))+" "+S(parseFloat(k.coords[3]))+" "+S(parseFloat(k.coords[4]))+" "+S(parseFloat(k.coords[5])),V(Ie+="]"),k.matrix&&V("/Matrix ["+k.matrix.toString()+"]"),V("/Function "+ae+" 0 R"),V("/Extend [true true]"),V(">>"),V("endobj")},wi=function(k,B){var ae=Je(),fe=Oe();B.push({resourcesOid:ae,objectOid:fe}),k.objectNumber=fe;var ve=[];ve.push({key:"Type",value:"/Pattern"}),ve.push({key:"PatternType",value:"1"}),ve.push({key:"PaintType",value:"1"}),ve.push({key:"TilingType",value:"1"}),ve.push({key:"BBox",value:"["+k.boundingBox.map(S).join(" ")+"]"}),ve.push({key:"XStep",value:S(k.xStep)}),ve.push({key:"YStep",value:S(k.yStep)}),ve.push({key:"Resources",value:ae+" 0 R"}),k.matrix&&ve.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),Ft({data:k.stream,additionalKeyValues:ve,objectId:k.objectNumber}),V("endobj")},Ua=function(k){for(var B in k.objectNumber=Oe(),V("<<"),k)switch(B){case"opacity":V("/ca "+L(k[B]));break;case"stroke-opacity":V("/CA "+L(k[B]))}V(">>"),V("endobj")},Vs=function(k){lt(k.resourcesOid,!0),V("<<"),V("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var B in V("/Font <<"),Bt)Bt.hasOwnProperty(B)&&(f===!1||f===!0&&p.hasOwnProperty(B))&&V("/"+B+" "+Bt[B].objectNumber+" 0 R");V(">>")}(),function(){if(Object.keys(kt).length>0){for(var B in V("/Shading <<"),kt)kt.hasOwnProperty(B)&&kt[B]instanceof wu&&kt[B].objectNumber>=0&&V("/"+B+" "+kt[B].objectNumber+" 0 R");bn.publish("putShadingPatternDict"),V(">>")}}(),function(B){if(Object.keys(kt).length>0){for(var ae in V("/Pattern <<"),kt)kt.hasOwnProperty(ae)&&kt[ae]instanceof h.TilingPattern&&kt[ae].objectNumber>=0&&kt[ae].objectNumber<B&&V("/"+ae+" "+kt[ae].objectNumber+" 0 R");bn.publish("putTilingPatternDict"),V(">>")}}(k.objectOid),function(){if(Object.keys(At).length>0){var B;for(B in V("/ExtGState <<"),At)At.hasOwnProperty(B)&&At[B].objectNumber>=0&&V("/"+B+" "+At[B].objectNumber+" 0 R");bn.publish("putGStateDict"),V(">>")}}(),function(){for(var B in V("/XObject <<"),is)is.hasOwnProperty(B)&&is[B].objectNumber>=0&&V("/"+B+" "+is[B].objectNumber+" 0 R");bn.publish("putXobjectDict"),V(">>")}(),V(">>"),V("endobj")},yc=function(k){Vt[k.fontName]=Vt[k.fontName]||{},Vt[k.fontName][k.fontStyle]=k.id},vo=function(k,B,ae,fe,ve){var Ie={id:"F"+(Object.keys(Bt).length+1).toString(10),postScriptName:k,fontName:B,fontStyle:ae,encoding:fe,isStandardFont:ve||!1,metadata:{}};return bn.publish("addFont",{font:Ie,instance:this}),Bt[Ie.id]=Ie,yc(Ie),Ie.id},Gr=h.__private__.pdfEscape=h.pdfEscape=function(k,B){return function(ae,fe){var ve,Ie,Ue,bt,Nt,Ut,Xt,vn,mr;if(Ue=(fe=fe||{}).sourceEncoding||"Unicode",Nt=fe.outputEncoding,(fe.autoencode||Nt)&&Bt[Qe].metadata&&Bt[Qe].metadata[Ue]&&Bt[Qe].metadata[Ue].encoding&&(bt=Bt[Qe].metadata[Ue].encoding,!Nt&&Bt[Qe].encoding&&(Nt=Bt[Qe].encoding),!Nt&&bt.codePages&&(Nt=bt.codePages[0]),typeof Nt=="string"&&(Nt=bt[Nt]),Nt)){for(Xt=!1,Ut=[],ve=0,Ie=ae.length;ve<Ie;ve++)(vn=Nt[ae.charCodeAt(ve)])?Ut.push(String.fromCharCode(vn)):Ut.push(ae[ve]),Ut[ve].charCodeAt(0)>>8&&(Xt=!0);ae=Ut.join("")}for(ve=ae.length;Xt===void 0&&ve!==0;)ae.charCodeAt(ve-1)>>8&&(Xt=!0),ve--;if(!Xt)return ae;for(Ut=fe.noBOM?[]:[254,255],ve=0,Ie=ae.length;ve<Ie;ve++){if((mr=(vn=ae.charCodeAt(ve))>>8)>>8)throw new Error("Character at position "+ve+" of string '"+ae+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ut.push(mr),Ut.push(vn-(mr<<8))}return String.fromCharCode.apply(void 0,Ut)}(k,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wo=h.__private__.beginPage=function(k){Ee[++Jt]=[],Tt[Jt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},Wn(Jt),We(Ee[$])},nl=function(k,B){var ae,fe,ve;switch(n=B||n,typeof k=="string"&&(ae=y(k.toLowerCase()),Array.isArray(ae)&&(fe=ae[0],ve=ae[1])),Array.isArray(k)&&(fe=k[0]*Et,ve=k[1]*Et),isNaN(fe)&&(fe=s[0],ve=s[1]),(fe>14400||ve>14400)&&(Jn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),ve=Math.min(14400,ve)),s=[fe,ve],n.substr(0,1)){case"l":ve>fe&&(s=[ve,fe]);break;case"p":fe>ve&&(s=[ve,fe])}wo(s),qt(Tp),V(Mf),Rp!==0&&V(Rp+" J"),Op!==0&&V(Op+" j"),bn.publish("addPage",{pageNumber:Jt})},ln=function(k){k>0&&k<=Jt&&(Ee.splice(k,1),Tt.splice(k,1),Jt--,$>Jt&&($=Jt),this.setPage($))},Wn=function(k){k>0&&k<=Jt&&($=k)},Gi=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Ee.length-1},No=function(k,B,ae){var fe,ve=void 0;return ae=ae||{},k=k!==void 0?k:Bt[Qe].fontName,B=B!==void 0?B:Bt[Qe].fontStyle,fe=k.toLowerCase(),Vt[fe]!==void 0&&Vt[fe][B]!==void 0?ve=Vt[fe][B]:Vt[k]!==void 0&&Vt[k][B]!==void 0?ve=Vt[k][B]:ae.disableWarning===!1&&Jn.warn("Unable to look up font label for font '"+k+"', '"+B+"'. Refer to getFontList() for available fonts."),ve||ae.noFallback||(ve=Vt.times[B])==null&&(ve=Vt.times.normal),ve},Sn=h.__private__.putInfo=function(){var k=Oe(),B=function(fe){return fe};for(var ae in u!==null&&(B=ls.encryptor(k,0)),V("<<"),V("/Producer ("+Gr(B("jsPDF "+St.version))+")"),it)it.hasOwnProperty(ae)&&it[ae]&&V("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+Gr(B(it[ae]))+")");V("/CreationDate ("+Gr(B(W))+")"),V(">>"),V("endobj")},$a=h.__private__.putCatalog=function(k){var B=(k=k||{}).rootDictionaryObjId||ut;switch(Oe(),V("<<"),V("/Type /Catalog"),V("/Pages "+B+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":V("/OpenAction [3 0 R /FitH null]");break;case"fullheight":V("/OpenAction [3 0 R /FitV null]");break;case"fullpage":V("/OpenAction [3 0 R /Fit]");break;case"original":V("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+ne;ae.substr(ae.length-1)==="%"&&(ne=parseInt(ne)/100),typeof ne=="number"&&V("/OpenAction [3 0 R /XYZ null null "+L(ne)+"]")}switch(Me||(Me="continuous"),Me){case"continuous":V("/PageLayout /OneColumn");break;case"single":V("/PageLayout /SinglePage");break;case"two":case"twoleft":V("/PageLayout /TwoColumnLeft");break;case"tworight":V("/PageLayout /TwoColumnRight")}De&&V("/PageMode /"+De),bn.publish("putCatalog"),V(">>"),V("endobj")},kf=h.__private__.putTrailer=function(){V("trailer"),V("<<"),V("/Size "+(Z+1)),V("/Root "+Z+" 0 R"),V("/Info "+(Z-1)+" 0 R"),u!==null&&V("/Encrypt "+ls.oid+" 0 R"),V("/ID [ <"+X+"> <"+X+"> ]"),V(">>")},wr=h.__private__.putHeader=function(){V("%PDF-"+m),V("%")},Cx=h.__private__.putXRef=function(){var k="0000000000";V("xref"),V("0 "+(Z+1)),V("0000000000 65535 f ");for(var B=1;B<=Z;B++)typeof ie[B]=="function"?V((k+ie[B]()).slice(-10)+" 00000 n "):ie[B]!==void 0?V((k+ie[B]).slice(-10)+" 00000 n "):V("0000000000 00000 n ")},jo=h.__private__.buildDocument=function(){var k;Z=0,ye=0,he=[],ie=[],Se=[],ut=Je(),ct=Je(),We(he),bn.publish("buildDocument"),wr(),dn(),function(){bn.publish("putAdditionalObjects");for(var ae=0;ae<Se.length;ae++){var fe=Se[ae];lt(fe.objId,!0),V(fe.content),V("endobj")}bn.publish("postPutAdditionalObjects")}(),k=[],function(){for(var ae in Bt)Bt.hasOwnProperty(ae)&&(f===!1||f===!0&&p.hasOwnProperty(ae))&&rn(Bt[ae])}(),function(){var ae;for(ae in At)At.hasOwnProperty(ae)&&Ua(At[ae])}(),function(){for(var ae in is)is.hasOwnProperty(ae)&&Tn(is[ae])}(),function(ae){var fe;for(fe in kt)kt.hasOwnProperty(fe)&&(kt[fe]instanceof wu?Ha(kt[fe]):kt[fe]instanceof gh&&wi(kt[fe],ae))}(k),bn.publish("putResources"),k.forEach(Vs),Vs({resourcesOid:ct,objectOid:Number.MAX_SAFE_INTEGER}),bn.publish("postPutResources"),u!==null&&(ls.oid=Oe(),V("<<"),V("/Filter /Standard"),V("/V "+ls.v),V("/R "+ls.r),V("/U <"+ls.toHexString(ls.U)+">"),V("/O <"+ls.toHexString(ls.O)+">"),V("/P "+ls.P),V(">>"),V("endobj")),Sn(),$a();var B=ye;return Cx(),kf(),V("startxref"),V(""+B),V("%%EOF"),We(Ee[$]),he.join(`
`)},Cf=h.__private__.getBlob=function(k){return new Blob([Ve(k)],{type:"application/pdf"})},Ax=h.output=h.__private__.output=(ke=function(k,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",k){case void 0:return jo();case"save":h.save(B.filename);break;case"arraybuffer":return Ve(jo());case"blob":return Cf(jo());case"bloburi":case"bloburl":if(zt.URL!==void 0&&typeof zt.URL.createObjectURL=="function")return zt.URL&&zt.URL.createObjectURL(Cf(jo()))||void 0;Jn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",fe=jo();try{ae=OM(fe)}catch{ae=OM(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+B.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(zt)==="[object Window]"){var ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ie=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(ve=B.pdfObjectUrl,Ie="");var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ve+'"'+Ie+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",bt=zt.open();return bt!==null&&bt.document.write(Ue),bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(zt)==="[object Window]"){var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',Ut=zt.open();if(Ut!==null){Ut.document.write(Nt);var Xt=this;Ut.document.documentElement.querySelector("#pdfViewer").onload=function(){Ut.document.title=B.filename,Ut.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Xt.output("bloburl"))}}return Ut}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(zt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var vn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',mr=zt.open();if(mr!==null&&(mr.document.write(vn),mr.document.title=B.filename),mr||typeof safari>"u")return mr;break;case"datauri":case"dataurl":return zt.document.location.href=this.output("datauristring",B);default:return null}},ke.foo=function(){try{return ke.apply(this,arguments)}catch(ae){var k=ae.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var B="Error in function "+k.split(`
`)[0].split("<")[0]+": "+ae.message;if(!zt.console)throw new Error(B);zt.console.error(B,ae),zt.alert&&alert(B)}},ke.foo.bar=ke,ke.foo),Ni=function(k){return Array.isArray(tl)===!0&&tl.indexOf(k)>-1};switch(r){case"pt":Et=1;break;case"mm":Et=72/25.4;break;case"cm":Et=72/2.54;break;case"in":Et=72;break;case"px":Et=Ni("px_scaling")==1?.75:96/72;break;case"pc":case"em":Et=12;break;case"ex":Et=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Et=r}var ls=null;q(),z();var rl=h.__private__.getPageInfo=h.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[k].objId,pageNumber:k,pageContext:Tt[k]}},Mx=h.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in Tt)if(Tt[B].objId===k)break;return rl(B)},C1=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Tt[$].objId,pageNumber:$,pageContext:Tt[$]}};h.addPage=function(){return nl.apply(this,arguments),this},h.setPage=function(){return Wn.apply(this,arguments),We.call(this,Ee[$]),this},h.insertPage=function(k){return this.addPage(),this.movePage($,k),this},h.movePage=function(k,B){var ae,fe;if(k>B){ae=Ee[k],fe=Tt[k];for(var ve=k;ve>B;ve--)Ee[ve]=Ee[ve-1],Tt[ve]=Tt[ve-1];Ee[B]=ae,Tt[B]=fe,this.setPage(B)}else if(k<B){ae=Ee[k],fe=Tt[k];for(var Ie=k;Ie<B;Ie++)Ee[Ie]=Ee[Ie+1],Tt[Ie]=Tt[Ie+1];Ee[B]=ae,Tt[B]=fe,this.setPage(B)}return this},h.deletePage=function(){return ln.apply(this,arguments),this},h.__private__.text=h.text=function(k,B,ae,fe,ve){var Ie,Ue,bt,Nt,Ut,Xt,vn,mr,Kr,Zn=(fe=fe||{}).scope||this;if(typeof k=="number"&&typeof B=="number"&&(typeof ae=="string"||Array.isArray(ae))){var cs=ae;ae=B,B=k,k=cs}if(arguments[3]instanceof Lt==0?(bt=arguments[4],Nt=arguments[5],zn(vn=arguments[3])==="object"&&vn!==null||(typeof bt=="string"&&(Nt=bt,bt=null),typeof vn=="string"&&(Nt=vn,vn=null),typeof vn=="number"&&(bt=vn,vn=null),fe={flags:vn,angle:bt,align:Nt})):(E("The transform parameter of text() with a Matrix value"),Kr=ve),isNaN(B)||isNaN(ae)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Zn;var Jr,_s="",dl=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:Kd,Ji=Zn.internal.scaleFactor;function ul(Dn){return Dn=Dn.split("	").join(Array(fe.TabLen||9).join(" ")),Gr(Dn,vn)}function zp(Dn){for(var Gn,Rr=Dn.concat(),ds=[],pl=Rr.length;pl--;)typeof(Gn=Rr.shift())=="string"?ds.push(Gn):Array.isArray(Dn)&&(Gn.length===1||Gn[1]===void 0&&Gn[2]===void 0)?ds.push(Gn[0]):ds.push([Gn[0],Gn[1],Gn[2]]);return ds}function Ef(Dn,Gn){var Rr;if(typeof Dn=="string")Rr=Gn(Dn)[0];else if(Array.isArray(Dn)){for(var ds,pl,Kp=Dn.concat(),Lf=[],zx=Kp.length;zx--;)typeof(ds=Kp.shift())=="string"?Lf.push(Gn(ds)[0]):Array.isArray(ds)&&typeof ds[0]=="string"&&(pl=Gn(ds[0],ds[1],ds[2]),Lf.push([pl[0],pl[1],pl[2]]));Rr=Lf}return Rr}var bc=!1,Zd=!0;if(typeof k=="string")bc=!0;else if(Array.isArray(k)){var eu=k.concat();Ue=[];for(var vc,Ts=eu.length;Ts--;)(typeof(vc=eu.shift())!="string"||Array.isArray(vc)&&typeof vc[0]!="string")&&(Zd=!1);bc=Zd}if(bc===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var tu=_e/Zn.internal.scaleFactor,nu=tu*(dl-1);switch(fe.baseline){case"bottom":ae-=nu;break;case"top":ae+=tu-nu;break;case"hanging":ae+=tu-2*nu;break;case"middle":ae+=tu/2-nu}if((Xt=fe.maxWidth||0)>0&&(typeof k=="string"?k=Zn.splitTextToSize(k,Xt):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Dn,Gn){return Dn.concat(Zn.splitTextToSize(Gn,Xt))},[]))),Ie={text:k,x:B,y:ae,options:fe,mutex:{pdfEscape:Gr,activeFontKey:Qe,fonts:Bt,activeFontSize:_e}},bn.publish("preProcessText",Ie),k=Ie.text,bt=(fe=Ie.options).angle,Kr instanceof Lt==0&&bt&&typeof bt=="number"){bt*=Math.PI/180,fe.rotationDirection===0&&(bt=-bt),j===N&&(bt=-bt);var Bp=Math.cos(bt),Hp=Math.sin(bt);Kr=new Lt(Bp,Hp,-Hp,Bp,0,0)}else bt&&bt instanceof Lt&&(Kr=bt);j!==N||Kr||(Kr=ue),(Ut=fe.charSpace||il)!==void 0&&(_s+=S(F(Ut))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mr=fe.horizontalScale)!==void 0&&(_s+=S(100*mr)+` Tz
`),fe.lang;var sa=-1,fl=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,_f=Zn.internal.getCurrentPageInfo().pageContext;switch(fl){case 0:case!1:case"fill":sa=0;break;case 1:case!0:case"stroke":sa=1;break;case 2:case"fillThenStroke":sa=2;break;case 3:case"invisible":sa=3;break;case 4:case"fillAndAddForClipping":sa=4;break;case 5:case"strokeAndAddPathForClipping":sa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":sa=6;break;case 7:case"addToPathForClipping":sa=7}var Ix=_f.usedRenderingMode!==void 0?_f.usedRenderingMode:-1;sa!==-1?_s+=sa+` Tr
`:Ix!==-1&&(_s+=`0 Tr
`),sa!==-1&&(_f.usedRenderingMode=sa),Nt=fe.align||"left";var ji,ru=_e*dl,Up=Zn.internal.pageSize.getWidth(),$p=Bt[Qe];Ut=fe.charSpace||il,Xt=fe.maxWidth||0,vn=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var wc=[],su=function(Dn){return Zn.getStringUnitWidth(Dn,{font:$p,charSpace:Ut,fontSize:_e,doKerning:!1})*_e/Ji};if(Object.prototype.toString.call(k)==="[object Array]"){var qa;Ue=zp(k),Nt!=="left"&&(ji=Ue.map(su));var Va,Nc=0;if(Nt==="right"){B-=ji[0],k=[],Ts=Ue.length;for(var hl=0;hl<Ts;hl++)hl===0?(Va=sl(B),qa=al(ae)):(Va=F(Nc-ji[hl]),qa=-ru),k.push([Ue[hl],Va,qa]),Nc=ji[hl]}else if(Nt==="center"){B-=ji[0]/2,k=[],Ts=Ue.length;for(var jc=0;jc<Ts;jc++)jc===0?(Va=sl(B),qa=al(ae)):(Va=F((Nc-ji[jc])/2),qa=-ru),k.push([Ue[jc],Va,qa]),Nc=ji[jc]}else if(Nt==="left"){k=[],Ts=Ue.length;for(var qp=0;qp<Ts;qp++)k.push(Ue[qp])}else if(Nt==="justify"&&$p.encoding==="Identity-H"){k=[],Ts=Ue.length,Xt=Xt!==0?Xt:Up;for(var Tf=0,Lr=0;Lr<Ts;Lr++)if(qa=Lr===0?al(ae):-ru,Va=Lr===0?sl(B):Tf,Lr<Ts-1){var Fx=F((Xt-ji[Lr])/(Ue[Lr].split(" ").length-1)),ko=Ue[Lr].split(" ");k.push([ko[0]+" ",Va,qa]),Tf=0;for(var Co=1;Co<ko.length;Co++){var Vp=(su(ko[Co-1]+" "+ko[Co])-su(ko[Co]))*Ji+Fx;Co==ko.length-1?k.push([ko[Co],Vp,0]):k.push([ko[Co]+" ",Vp,0]),Tf-=Vp}}else k.push([Ue[Lr],Va,qa]);k.push(["",Tf,0])}else{if(Nt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],Ts=Ue.length,Xt=Xt!==0?Xt:Up,Lr=0;Lr<Ts;Lr++){qa=Lr===0?al(ae):-ru,Va=Lr===0?sl(B):0;var Yp=Ue[Lr].split(" ").length-1,Wp=Yp>0?(Xt-ji[Lr])/Yp:0;Lr<Ts-1?wc.push(S(F(Wp))):wc.push(0),k.push([Ue[Lr],Va,qa])}}}(typeof fe.R2L=="boolean"?fe.R2L:ce)===!0&&(k=Ef(k,function(Dn,Gn,Rr){return[Dn.split("").reverse().join(""),Gn,Rr]})),Ie={text:k,x:B,y:ae,options:fe,mutex:{pdfEscape:Gr,activeFontKey:Qe,fonts:Bt,activeFontSize:_e}},bn.publish("postProcessText",Ie),k=Ie.text,Jr=Ie.mutex.isHex||!1;var Gp=Bt[Qe].encoding;Gp!=="WinAnsiEncoding"&&Gp!=="StandardEncoding"||(k=Ef(k,function(Dn,Gn,Rr){return[ul(Dn),Gn,Rr]})),Ue=zp(k),k=[];for(var Sc,kc,Cc,au=Array.isArray(Ue[0])?1:0,Ac="",iu=function(Dn,Gn,Rr){var ds="";return Rr instanceof Lt?(Rr=typeof fe.angle=="number"?Wi(Rr,new Lt(1,0,0,1,Dn,Gn)):Wi(new Lt(1,0,0,1,Dn,Gn),Rr),j===N&&(Rr=Wi(new Lt(1,0,0,-1,0,0),Rr)),ds=Rr.join(" ")+` Tm
`):ds=S(Dn)+" "+S(Gn)+` Td
`,ds},Si=0;Si<Ue.length;Si++){switch(Ac="",au){case 1:Cc=(Jr?"<":"(")+Ue[Si][0]+(Jr?">":")"),Sc=parseFloat(Ue[Si][1]),kc=parseFloat(Ue[Si][2]);break;case 0:Cc=(Jr?"<":"(")+Ue[Si]+(Jr?">":")"),Sc=sl(B),kc=al(ae)}wc!==void 0&&wc[Si]!==void 0&&(Ac=wc[Si]+` Tw
`),Si===0?k.push(Ac+iu(Sc,kc,Kr)+Cc):au===0?k.push(Ac+Cc):au===1&&k.push(Ac+iu(Sc,kc,Kr)+Cc)}k=au===0?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var Ao=`BT
/`;return Ao+=Qe+" "+_e+` Tf
`,Ao+=S(_e*dl)+` TL
`,Ao+=Jd+`
`,Ao+=_s,Ao+=k,V(Ao+="ET"),p[Qe]=!0,Zn};var A1=h.__private__.clip=h.clip=function(k){return V(k==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return A1("evenodd")},h.__private__.discardPath=h.discardPath=function(){return V("n"),this};var So=h.__private__.isValidStyle=function(k){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(B=!0),B};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(k){return So(k)&&(d=k),this};var Dx=h.__private__.getStyle=h.getStyle=function(k){var B=d;switch(k){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=k}return B},Ex=h.close=function(){return V("h"),this};h.stroke=function(){return V("S"),this},h.fill=function(k){return Af("f",k),this},h.fillEvenOdd=function(k){return Af("f*",k),this},h.fillStroke=function(k){return Af("B",k),this},h.fillStrokeEvenOdd=function(k){return Af("B*",k),this};var Af=function(k,B){zn(B)==="object"?D1(B,k):V(k)},Gd=function(k){k===null||j===N&&k===void 0||(k=Dx(k),V(k))};function M1(k,B,ae,fe,ve){var Ie=new gh(B||this.boundingBox,ae||this.xStep,fe||this.yStep,this.gState,ve||this.matrix);Ie.stream=this.stream;var Ue=k+"$$"+this.cloneIndex+++"$$";return be(Ue,Ie),Ie}var D1=function(k,B){var ae=jn[k.key],fe=kt[ae];if(fe instanceof wu)V("q"),V(E1(B)),fe.gState&&h.setGState(fe.gState),V(k.matrix.toString()+" cm"),V("/"+ae+" sh"),V("Q");else if(fe instanceof gh){var ve=new Lt(1,0,0,-1,0,Qd());k.matrix&&(ve=ve.multiply(k.matrix||ue),ae=M1.call(fe,k.key,k.boundingBox,k.xStep,k.yStep,ve).id),V("q"),V("/Pattern cs"),V("/"+ae+" scn"),fe.gState&&h.setGState(fe.gState),V(B),V("Q")}},E1=function(k){switch(k){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},_p=h.moveTo=function(k,B){return V(S(F(k))+" "+S(U(B))+" m"),this},_x=h.lineTo=function(k,B){return V(S(F(k))+" "+S(U(B))+" l"),this},Ki=h.curveTo=function(k,B,ae,fe,ve,Ie){return V([S(F(k)),S(U(B)),S(F(ae)),S(U(fe)),S(F(ve)),S(U(Ie)),"c"].join(" ")),this};h.__private__.line=h.line=function(k,B,ae,fe,ve){if(isNaN(k)||isNaN(B)||isNaN(ae)||isNaN(fe)||!So(ve))throw new Error("Invalid arguments passed to jsPDF.line");return j===v?this.lines([[ae-k,fe-B]],k,B,[1,1],ve||"S"):this.lines([[ae-k,fe-B]],k,B,[1,1]).stroke()},h.__private__.lines=h.lines=function(k,B,ae,fe,ve,Ie){var Ue,bt,Nt,Ut,Xt,vn,mr,Kr,Zn,cs,Jr,_s;if(typeof k=="number"&&(_s=ae,ae=B,B=k,k=_s),fe=fe||[1,1],Ie=Ie||!1,isNaN(B)||isNaN(ae)||!Array.isArray(k)||!Array.isArray(fe)||!So(ve)||typeof Ie!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_p(B,ae),Ue=fe[0],bt=fe[1],Ut=k.length,cs=B,Jr=ae,Nt=0;Nt<Ut;Nt++)(Xt=k[Nt]).length===2?(cs=Xt[0]*Ue+cs,Jr=Xt[1]*bt+Jr,_x(cs,Jr)):(vn=Xt[0]*Ue+cs,mr=Xt[1]*bt+Jr,Kr=Xt[2]*Ue+cs,Zn=Xt[3]*bt+Jr,cs=Xt[4]*Ue+cs,Jr=Xt[5]*bt+Jr,Ki(vn,mr,Kr,Zn,cs,Jr));return Ie&&Ex(),Gd(ve),this},h.path=function(k){for(var B=0;B<k.length;B++){var ae=k[B],fe=ae.c;switch(ae.op){case"m":_p(fe[0],fe[1]);break;case"l":_x(fe[0],fe[1]);break;case"c":Ki.apply(this,fe);break;case"h":Ex()}}return this},h.__private__.rect=h.rect=function(k,B,ae,fe,ve){if(isNaN(k)||isNaN(B)||isNaN(ae)||isNaN(fe)||!So(ve))throw new Error("Invalid arguments passed to jsPDF.rect");return j===v&&(fe=-fe),V([S(F(k)),S(U(B)),S(F(ae)),S(F(fe)),"re"].join(" ")),Gd(ve),this},h.__private__.triangle=h.triangle=function(k,B,ae,fe,ve,Ie,Ue){if(isNaN(k)||isNaN(B)||isNaN(ae)||isNaN(fe)||isNaN(ve)||isNaN(Ie)||!So(Ue))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-k,fe-B],[ve-ae,Ie-fe],[k-ve,B-Ie]],k,B,[1,1],Ue,!0),this},h.__private__.roundedRect=h.roundedRect=function(k,B,ae,fe,ve,Ie,Ue){if(isNaN(k)||isNaN(B)||isNaN(ae)||isNaN(fe)||isNaN(ve)||isNaN(Ie)||!So(Ue))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var bt=4/3*(Math.SQRT2-1);return ve=Math.min(ve,.5*ae),Ie=Math.min(Ie,.5*fe),this.lines([[ae-2*ve,0],[ve*bt,0,ve,Ie-Ie*bt,ve,Ie],[0,fe-2*Ie],[0,Ie*bt,-ve*bt,Ie,-ve,Ie],[2*ve-ae,0],[-ve*bt,0,-ve,-Ie*bt,-ve,-Ie],[0,2*Ie-fe],[0,-Ie*bt,ve*bt,-Ie,ve,-Ie]],k+ve,B,[1,1],Ue,!0),this},h.__private__.ellipse=h.ellipse=function(k,B,ae,fe,ve){if(isNaN(k)||isNaN(B)||isNaN(ae)||isNaN(fe)||!So(ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ie=4/3*(Math.SQRT2-1)*ae,Ue=4/3*(Math.SQRT2-1)*fe;return _p(k+ae,B),Ki(k+ae,B-Ue,k+Ie,B-fe,k,B-fe),Ki(k-Ie,B-fe,k-ae,B-Ue,k-ae,B),Ki(k-ae,B+Ue,k-Ie,B+fe,k,B+fe),Ki(k+Ie,B+fe,k+ae,B+Ue,k+ae,B),Gd(ve),this},h.__private__.circle=h.circle=function(k,B,ae,fe){if(isNaN(k)||isNaN(B)||isNaN(ae)||!So(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,B,ae,ae,fe)},h.setFont=function(k,B,ae){return ae&&(B=A(B,ae)),Qe=No(k,B,{disableWarning:!1}),this};var _1=h.__private__.getFont=h.getFont=function(){return Bt[No.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var k,B,ae={};for(k in Vt)if(Vt.hasOwnProperty(k))for(B in ae[k]=[],Vt[k])Vt[k].hasOwnProperty(B)&&ae[k].push(B);return ae},h.addFont=function(k,B,ae,fe,ve){var Ie=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ie.indexOf(arguments[3])!==-1?ve=arguments[3]:arguments[3]&&Ie.indexOf(arguments[3])==-1&&(ae=A(ae,fe)),vo.call(this,k,B,ae,ve=ve||"Identity-H")};var Kd,Tp=e.lineWidth||.200025,T1=h.__private__.getLineWidth=h.getLineWidth=function(){return Tp},qt=h.__private__.setLineWidth=h.setLineWidth=function(k){return Tp=k,V(S(F(k))+" w"),this};h.__private__.setLineDash=St.API.setLineDash=St.API.setLineDashPattern=function(k,B){if(k=k||[],B=B||0,isNaN(B)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(ae){return S(F(ae))}).join(" "),B=S(F(B)),V("["+k+"] "+B+" d"),this};var L1=h.__private__.getLineHeight=h.getLineHeight=function(){return _e*Kd};h.__private__.getLineHeight=h.getLineHeight=function(){return _e*Kd};var R1=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(Kd=k),this},O1=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Kd};R1(e.lineHeight);var sl=h.__private__.getHorizontalCoordinate=function(k){return F(k)},al=h.__private__.getVerticalCoordinate=function(k){return j===N?k:Tt[$].mediaBox.topRightY-Tt[$].mediaBox.bottomLeftY-F(k)},P1=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(k){return S(sl(k))},I1=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(k){return S(al(k))},Mf=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return st(Mf)},h.__private__.setStrokeColor=h.setDrawColor=function(k,B,ae,fe){return Mf=ht({ch1:k,ch2:B,ch3:ae,ch4:fe,pdfColorType:"draw",precision:2}),V(Mf),this};var Lp=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return st(Lp)},h.__private__.setFillColor=h.setFillColor=function(k,B,ae,fe){return Lp=ht({ch1:k,ch2:B,ch3:ae,ch4:fe,pdfColorType:"fill",precision:2}),V(Lp),this};var Jd=e.textColor||"0 g",F1=h.__private__.getTextColor=h.getTextColor=function(){return st(Jd)};h.__private__.setTextColor=h.setTextColor=function(k,B,ae,fe){return Jd=ht({ch1:k,ch2:B,ch3:ae,ch4:fe,pdfColorType:"text",precision:3}),this};var il=e.charSpace,z1=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(il||0)};h.__private__.setCharSpace=h.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return il=k,this};var Rp=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(k){var B=h.CapJoinStyles[k];if(B===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Rp=B,V(B+" J"),this};var Op=0;h.__private__.setLineJoin=h.setLineJoin=function(k){var B=h.CapJoinStyles[k];if(B===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Op=B,V(B+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return V(S(F(k))+" M"),this},h.GState=Db,h.setGState=function(k){(k=typeof k=="string"?At[Ht[k]]:Tx(null,k)).equals(Un)||(V("/"+k.id+" gs"),Un=k)};var Tx=function(k,B){if(!k||!Ht[k]){var ae=!1;for(var fe in At)if(At.hasOwnProperty(fe)&&At[fe].equals(B)){ae=!0;break}if(ae)B=At[fe];else{var ve="GS"+(Object.keys(At).length+1).toString(10);At[ve]=B,B.id=ve}return k&&(Ht[k]=B.id),bn.publish("addGState",B),B}};h.addGState=function(k,B){return Tx(k,B),this},h.saveGraphicsState=function(){return V("q"),Mn.push({key:Qe,size:_e,color:Jd}),this},h.restoreGraphicsState=function(){V("Q");var k=Mn.pop();return Qe=k.key,_e=k.size,Jd=k.color,Un=null,this},h.setCurrentTransformationMatrix=function(k){return V(k.toString()+" cm"),this},h.comment=function(k){return V("#"+k),this};var ol=function(k,B){var ae=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Ie){isNaN(Ie)||(ae=parseFloat(Ie))}});var fe=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(Ie){isNaN(Ie)||(fe=parseFloat(Ie))}});var ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ve},set:function(Ie){ve=Ie.toString()}}),this},Pp=function(k,B,ae,fe){ol.call(this,k,B),this.type="rect";var ve=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ve},set:function(Ue){isNaN(Ue)||(ve=parseFloat(Ue))}});var Ie=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ie},set:function(Ue){isNaN(Ue)||(Ie=parseFloat(Ue))}}),this},Df=function(){this.page=Jt,this.currentPage=$,this.pages=Ee.slice(0),this.pagesContext=Tt.slice(0),this.x=rt,this.y=Yn,this.matrix=Pt,this.width=Fp($),this.height=Rx($),this.outputDestination=qe,this.id="",this.objectNumber=-1};Df.prototype.restore=function(){Jt=this.page,$=this.currentPage,Tt=this.pagesContext,Ee=this.pages,rt=this.x,Yn=this.y,Pt=this.matrix,Lx($,this.width),ll($,this.height),qe=this.outputDestination};var Ip=function(k,B,ae,fe,ve){ra.push(new Df),Jt=$=0,Ee=[],rt=k,Yn=B,Pt=ve,wo([ae,fe])};for(var Xd in h.beginFormObject=function(k,B,ae,fe,ve){return Ip(k,B,ae,fe,ve),this},h.endFormObject=function(k){return function(B){if(ba[B])ra.pop().restore();else{var ae=new Df,fe="Xo"+(Object.keys(is).length+1).toString(10);ae.id=fe,ba[B]=fe,is[fe]=ae,bn.publish("addFormObject",ae),ra.pop().restore()}}(k),this},h.doFormObject=function(k,B){var ae=is[ba[k]];return V("q"),V(B.toString()+" cm"),V("/"+ae.id+" Do"),V("Q"),this},h.getFormObject=function(k){var B=is[ba[k]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},h.save=function(k,B){return k=k||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(yu(Cf(jo()),k),typeof yu.unload=="function"&&zt.setTimeout&&setTimeout(yu.unload,911),this):new Promise(function(ae,fe){try{var ve=yu(Cf(jo()),k);typeof yu.unload=="function"&&zt.setTimeout&&setTimeout(yu.unload,911),ae(ve)}catch(Ie){fe(Ie.message)}})},St.API)St.API.hasOwnProperty(Xd)&&(Xd==="events"&&St.API.events.length?function(k,B){var ae,fe,ve;for(ve=B.length-1;ve!==-1;ve--)ae=B[ve][0],fe=B[ve][1],k.subscribe.apply(k,[ae].concat(typeof fe=="function"?[fe]:fe))}(bn,St.API.events):h[Xd]=St.API[Xd]);function Fp(k){return Tt[k].mediaBox.topRightX-Tt[k].mediaBox.bottomLeftX}function Lx(k,B){Tt[k].mediaBox.topRightX=B+Tt[k].mediaBox.bottomLeftX}function Rx(k){return Tt[k].mediaBox.topRightY-Tt[k].mediaBox.bottomLeftY}function ll(k,B){Tt[k].mediaBox.topRightY=B+Tt[k].mediaBox.bottomLeftY}var cl=h.getPageWidth=function(k){return Fp(k=k||$)/Et},Ox=h.setPageWidth=function(k,B){Lx(k,B*Et)},Qd=h.getPageHeight=function(k){return Rx(k=k||$)/Et},Px=h.setPageHeight=function(k,B){ll(k,B*Et)};return h.internal={pdfEscape:Gr,getStyle:Dx,getFont:_1,getFontSize:de,getCharSpace:z1,getTextColor:F1,getLineHeight:L1,getLineHeightFactor:O1,getLineWidth:T1,write:Ae,getHorizontalCoordinate:sl,getVerticalCoordinate:al,getCoordinateString:P1,getVerticalCoordinateString:I1,collections:{},newObject:Oe,newAdditionalObject:Mt,newObjectDeferred:Je,newObjectDeferredBegin:lt,getFilters:_t,putStream:Ft,events:bn,scaleFactor:Et,pageSize:{getWidth:function(){return cl($)},setWidth:function(k){Ox($,k)},getHeight:function(){return Qd($)},setHeight:function(k){Px($,k)}},encryptionOptions:u,encryption:ls,getEncryptor:function(k){return u!==null?ls.encryptor(k,0):function(B){return B}},output:Ax,getNumberOfPages:Gi,get pages(){return Ee},out:V,f2:L,f3:O,getPageInfo:rl,getPageInfoByObjId:Mx,getCurrentPageInfo:C1,getPDFVersion:g,Point:ol,Rectangle:Pp,Matrix:Lt,hasHotfix:Ni},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return cl($)},set:function(k){Ox($,k)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Qd($)},set:function(k){Px($,k)},enumerable:!0,configurable:!0}),(function(k){for(var B=0,ae=et.length;B<ae;B++){var fe=vo.call(this,k[B][0],k[B][1],k[B][2],et[B][3],!0);f===!1&&(p[fe]=!0);var ve=k[B][0].split("-");yc({id:fe,fontName:ve[0],fontStyle:ve[1]||""})}bn.publish("addFonts",{fonts:Bt,dictionary:Vt})}).call(h,et),Qe="F1",nl(s,n),bn.publish("initialized"),h}Xf.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Xf.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Xf.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Xf.prototype.processOwnerPassword=function(e,t){return O5(R5(t).substr(0,5),e)},Xf.prototype.encryptor=function(e,t){var n=R5(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return O5(n,r)}},Db.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||zn(e)!==zn(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},St.API={events:[]},St.version="3.0.4";var Cr=St.API,ck=1,wf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uf=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Yt=function(e){return e.toFixed(2)},Fc=function(e){return e.toFixed(5)};Cr.__acroform__={};var za=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},zM=function(e){return e*ck},Do=function(e){var t=new N8,n=yt.internal.getHeight(e)||0,r=yt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Yt(r)),Number(Yt(n))],t},OZ=Cr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},PZ=Cr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},IZ=Cr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ir=Cr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return IZ(e,t-1)},Fr=Cr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return OZ(e,t-1)},zr=Cr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return PZ(e,t-1)},FZ=Cr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,s=e[0],a=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=n(s)||0,c.lowerLeft_Y=r(a+l)||0,c.upperRight_X=n(s+o)||0,c.upperRight_Y=r(a)||0,[Number(Yt(c.lowerLeft_X)),Number(Yt(c.lowerLeft_Y)),Number(Yt(c.upperRight_X)),Number(Yt(c.upperRight_Y))]},zZ=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=P5(e,n),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Yt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=Do(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},P5=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(L){return L.split(`
`)}):s.map(function(L){return[L]});var a=n,o=yt.internal.getHeight(e)||0;o=o<0?-o:o;var l=yt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(L,O,F){if(L+1<s.length){var U=O+" "+s[L+1][0];return B0(U,e,F).width<=l-4}return!1};a++;e:for(;a>0;){t="",a--;var d,u,f=B0("3",e,a).height,p=e.multiline?o-a:(o-f)/2,h=p+=2,m=0,g=0,x=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+B0(t,e,a=12).width+", FieldWidth:"+l+`
`;break}for(var y="",v=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var j=!1;if(s[N].length!==1&&x!==s[N].length-1){if((f+2)*(v+2)+2>o)continue e;y+=s[N][x],j=!0,g=N,N--}else{y=(y+=s[N][x]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var D=parseInt(N),T=c(D,y,a),A=N>=s.length-1;if(T&&!A){y+=" ",x=0;continue}if(T||A){if(A)g=D;else if(e.multiline&&(f+2)*(v+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(v+2)+2>o)continue e;g=D}}for(var S="",E=m;E<=g;E++){var I=s[E];if(e.multiline){if(E===g){S+=I[x]+" ",x=(x+1)%I.length;continue}if(E===m){S+=I[I.length-1]+" ";continue}}S+=I[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,u=B0(S,e,a).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;default:d=2}t+=Yt(d)+" "+Yt(h)+` Td
`,t+="("+wf(S)+`) Tj
`,t+=-Yt(d)+` 0 Td
`,h=-(a+2),u=0,m=j?g:g+1,v++,y=""}break}return r.text=t,r.fontSize=a,r},B0=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},BZ={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},HZ=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},UZ=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(yo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(BZ)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ck=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new j8,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];a.objId=void 0,a.hasAnnotation&&HZ(a,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,s){var a=!r;for(var o in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=FZ(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=yt.createDefaultAppearanceStream(l),zn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=zZ(l);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var f="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var h=l.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(s,l)),f+="/"+o+" "+m+" ",s.internal.acroformPlugin.xForms.indexOf(m)>=0||s.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(s,l)),f+="/"+o+" "+m,s.internal.acroformPlugin.xForms.indexOf(m)>=0||s.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}a&&function(g,x){for(var y in g)if(g.hasOwnProperty(y)){var v=y,N=g[y];x.internal.newObjectDeferredBegin(N.objId,!0),zn(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete g[v]}}(s.internal.acroformPlugin.xForms,s)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},w8=Cr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var s="[",a=0;a<e.length;a++)switch(a!==0&&(s+=" "),zn(e[a])){case"boolean":case"number":case"object":s+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),s+="("+wf(r(e[a].toString()))+")"):s+=e[a].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Cw=function(e,t,n){var r=function(s){return s};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+wf(r(e))+")"},Uo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Uo.prototype.toString=function(){return this.objId+" 0 R"},Uo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Uo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],s=this[r];s&&(Array.isArray(s)?e.push({key:r,value:w8(s,this.objId,this.scope)}):s instanceof Uo?(s.scope=this.scope,e.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:r,value:s}))}return e};var N8=function(){Uo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};za(N8,Uo);var j8=function(){Uo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+wf(n(e))+")"}},set:function(n){e=n}})};za(j8,Uo);var yo=function e(){Uo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ir(t,3)},set:function(y){y?this.F=Fr(t,3):this.F=zr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Eb)return;a="FieldObject"+e.FieldNum++}var y=function(v){return v};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+wf(y(a))+")"},set:function(y){a=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(y){a=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/ck:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Eb||this instanceof Bu))return Cw(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof js==0?Cw(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof js==0?y.substr(0,1)==="("?Uf(y.substr(1,y.length-2)):Uf(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof js==1?Uf(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof js==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof js==0?Cw(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof js==0?y.substr(0,1)==="("?Uf(y.substr(1,y.length-2)):Uf(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof js==1?Uf(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof js==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(y){m=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,1)},set:function(y){y?this.Ff=Fr(this.Ff,1):this.Ff=zr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,2)},set:function(y){y?this.Ff=Fr(this.Ff,2):this.Ff=zr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,3)},set:function(y){y?this.Ff=Fr(this.Ff,3):this.Ff=zr(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');x=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(x){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};za(yo,Uo);var Dh=function(){yo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return w8(t,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(a,o,l){l||(l=1);for(var c,d=[];c=o.exec(a);)d.push(c[l]);return d}(r,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,18)},set:function(n){n?this.Ff=Fr(this.Ff,18):this.Ff=zr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Fr(this.Ff,19):this.Ff=zr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,20)},set:function(n){n?(this.Ff=Fr(this.Ff,20),t.sort()):this.Ff=zr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,22)},set:function(n){n?this.Ff=Fr(this.Ff,22):this.Ff=zr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,23)},set:function(n){n?this.Ff=Fr(this.Ff,23):this.Ff=zr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,27)},set:function(n){n?this.Ff=Fr(this.Ff,27):this.Ff=zr(this.Ff,27)}}),this.hasAppearanceStream=!1};za(Dh,yo);var Eh=function(){Dh.call(this),this.fontName="helvetica",this.combo=!1};za(Eh,Dh);var _h=function(){Eh.call(this),this.combo=!0};za(_h,Eh);var Cy=function(){_h.call(this),this.edit=!0};za(Cy,_h);var js=function(){yo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,15)},set:function(n){n?this.Ff=Fr(this.Ff,15):this.Ff=zr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,16)},set:function(n){n?this.Ff=Fr(this.Ff,16):this.Ff=zr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,17)},set:function(n){n?this.Ff=Fr(this.Ff,17):this.Ff=zr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,26)},set:function(n){n?this.Ff=Fr(this.Ff,26):this.Ff=zr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,s=[];for(r in s.push("<<"),t)s.push("/"+r+" ("+wf(n(t[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){zn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};za(js,yo);var Ay=function(){js.call(this),this.pushButton=!0};za(Ay,js);var Th=function(){js.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};za(Th,js);var Eb=function(){var e,t;yo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+wf(s(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(s){zn(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};za(Eb,yo),Th.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Th.prototype.createOption=function(e){var t=new Eb;return t.Parent=this,t.optionName=e,this.Kids.push(t),$Z.call(this.scope,t),t};var My=function(){js.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};za(My,js);var Bu=function(){yo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,13)},set:function(t){t?this.Ff=Fr(this.Ff,13):this.Ff=zr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,21)},set:function(t){t?this.Ff=Fr(this.Ff,21):this.Ff=zr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,23)},set:function(t){t?this.Ff=Fr(this.Ff,23):this.Ff=zr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,24)},set:function(t){t?this.Ff=Fr(this.Ff,24):this.Ff=zr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,25)},set:function(t){t?this.Ff=Fr(this.Ff,25):this.Ff=zr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,26)},set:function(t){t?this.Ff=Fr(this.Ff,26):this.Ff=zr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};za(Bu,yo);var Dy=function(){Bu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,14)},set:function(e){e?this.Ff=Fr(this.Ff,14):this.Ff=zr(this.Ff,14)}}),this.password=!0};za(Dy,Bu);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Do(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=P5(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Yt(yt.internal.getWidth(e))+" "+Yt(yt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Yt(a.fontSize)+" Tf "+s),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Do(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=[],a=yt.internal.getHeight(e),o=yt.internal.getWidth(e),l=P5(e,e.caption);return s.push("1 g"),s.push("0 0 "+Yt(o)+" "+Yt(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Yt(o-1)+" "+Yt(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+Yt(l.fontSize)+" Tf "+r),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Do(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Yt(yt.internal.getWidth(e))+" "+Yt(yt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=yt.RadioButton.Circle.YesNormal,t.D[e]=yt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Do(e);t.scope=e.scope;var n=[],r=yt.internal.getWidth(e)<=yt.internal.getHeight(e)?yt.internal.getWidth(e)/4:yt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=yt.internal.Bezier_C,a=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Fc(yt.internal.getWidth(e)/2)+" "+Fc(yt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Do(e);t.scope=e.scope;var n=[],r=yt.internal.getWidth(e)<=yt.internal.getHeight(e)?yt.internal.getWidth(e)/4:yt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*yt.internal.Bezier_C).toFixed(5)),o=Number((r*yt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Fc(yt.internal.getWidth(e)/2)+" "+Fc(yt.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Fc(yt.internal.getWidth(e)/2)+" "+Fc(yt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Do(e);t.scope=e.scope;var n=[],r=yt.internal.getWidth(e)<=yt.internal.getHeight(e)?yt.internal.getWidth(e)/4:yt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*yt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Fc(yt.internal.getWidth(e)/2)+" "+Fc(yt.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=yt.RadioButton.Cross.YesNormal,t.D[e]=yt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Do(e);t.scope=e.scope;var n=[],r=yt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Yt(yt.internal.getWidth(e)-2)+" "+Yt(yt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Yt(r.x1.x)+" "+Yt(r.x1.y)+" m"),n.push(Yt(r.x2.x)+" "+Yt(r.x2.y)+" l"),n.push(Yt(r.x4.x)+" "+Yt(r.x4.y)+" m"),n.push(Yt(r.x3.x)+" "+Yt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Do(e);t.scope=e.scope;var n=yt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Yt(yt.internal.getWidth(e))+" "+Yt(yt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Yt(yt.internal.getWidth(e)-2)+" "+Yt(yt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Yt(n.x1.x)+" "+Yt(n.x1.y)+" m"),r.push(Yt(n.x2.x)+" "+Yt(n.x2.y)+" l"),r.push(Yt(n.x4.x)+" "+Yt(n.x4.y)+" m"),r.push(Yt(n.x3.x)+" "+Yt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Do(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Yt(yt.internal.getWidth(e))+" "+Yt(yt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};yt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=yt.internal.getWidth(e),n=yt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},yt.internal.getWidth=function(e){var t=0;return zn(e)==="object"&&(t=zM(e.Rect[2])),t},yt.internal.getHeight=function(e){var t=0;return zn(e)==="object"&&(t=zM(e.Rect[3])),t};var $Z=Cr.addField=function(e){if(UZ(this,e),!(e instanceof yo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Cr.AcroFormChoiceField=Dh,Cr.AcroFormListBox=Eh,Cr.AcroFormComboBox=_h,Cr.AcroFormEditBox=Cy,Cr.AcroFormButton=js,Cr.AcroFormPushButton=Ay,Cr.AcroFormRadioButton=Th,Cr.AcroFormCheckBox=My,Cr.AcroFormTextField=Bu,Cr.AcroFormPasswordField=Dy,Cr.AcroFormAppearance=yt,Cr.AcroForm={ChoiceField:Dh,ListBox:Eh,ComboBox:_h,EditBox:Cy,Button:js,PushButton:Ay,RadioButton:Th,CheckBox:My,TextField:Bu,PasswordField:Dy,Appearance:yt},St.AcroForm={ChoiceField:Dh,ListBox:Eh,ComboBox:_h,EditBox:Cy,Button:js,PushButton:Ay,RadioButton:Th,CheckBox:My,TextField:Bu,PasswordField:Dy,Appearance:yt};St.AcroForm;function S8(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(L,O){var F,U,W,X,P,z=n;if((O=O||n)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(T(L))for(P in r)for(W=r[P],F=0;F<W.length;F+=1){for(X=!0,U=0;U<W[F].length;U+=1)if(W[F][U]!==void 0&&W[F][U]!==L[U]){X=!1;break}if(X===!0){z=P;break}}else for(P in r)for(W=r[P],F=0;F<W.length;F+=1){for(X=!0,U=0;U<W[F].length;U+=1)if(W[F][U]!==void 0&&W[F][U]!==L.charCodeAt(U)){X=!1;break}if(X===!0){z=P;break}}return z===n&&O!==n&&(z=O),z},a=function L(O){for(var F=this.internal.write,U=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:O.width}),X.push({key:"Height",value:O.height}),O.colorSpace===y.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===y.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)&&O.transparency.length>0){for(var P="",z=0,oe=O.transparency.length;z<oe;z++)P+=O.transparency[z]+" "+O.transparency[z]+" ";X.push({key:"Mask",value:"["+P+"]"})}O.sMask!==void 0&&X.push({key:"SMask",value:O.objectId+1+" 0 R"});var Y=O.filter!==void 0?["/"+O.filter]:void 0;if(U({data:O.data,additionalKeyValues:X,alreadyAppliedFilters:Y,objectId:O.objectId}),F("endobj"),"sMask"in O&&O.sMask!==void 0){var q,_=(q=O.sMaskBitsPerComponent)!==null&&q!==void 0?q:O.bitsPerComponent,$={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:_,data:O.sMask};"filter"in O&&($.decodeParameters="/Predictor ".concat(O.predictor," /Colors 1 /BitsPerComponent ").concat(_," /Columns ").concat(O.width),$.filter=O.filter),L.call(this,$)}if(O.colorSpace===y.INDEXED){var J=this.internal.newObject();U({data:S(new Uint8Array(O.palette)),objectId:J}),F("endobj")}},o=function(){var L=this.internal.collections[t+"images"];for(var O in L)a.call(this,L[O])},l=function(){var L,O=this.internal.collections[t+"images"],F=this.internal.write;for(var U in O)F("/I"+(L=O[U]).index,L.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var L=this.internal.collections[t+"images"];return c.call(this),L},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(L){return typeof e["process"+L.toUpperCase()]=="function"},p=function(L){return zn(L)==="object"&&L.nodeType===1},h=function(L,O){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var F=""+L.getAttribute("src");if(F.indexOf("data:image/")===0)return ky(unescape(F).split("base64,").pop());var U=e.loadFile(F,!0);if(U!==void 0)return U}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var W;switch(O){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;default:W="image/jpeg"}return ky(L.toDataURL(W,1).split("base64,").pop())}},m=function(L){var O=this.internal.collections[t+"images"];if(O){for(var F in O)if(L===O[F].alias)return O[F]}},g=function(L,O,F){return L||O||(L=-96,O=-96),L<0&&(L=-1*F.width*72/L/this.internal.scaleFactor),O<0&&(O=-1*F.height*72/O/this.internal.scaleFactor),L===0&&(L=O*F.width/F.height),O===0&&(O=L*F.height/F.width),[L,O]},x=function(L,O,F,U,W,X){var P=g.call(this,F,U,W),z=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,Y=d.call(this);if(F=P[0],U=P[1],Y[W.index]=W,X){X*=Math.PI/180;var q=Math.cos(X),_=Math.sin(X),$=function(te){return te.toFixed(4)},J=[$(q),$(_),$(-1*_),$(q),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,z(L),oe(O+U),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([z(F),"0","0",z(U),"0","0","cm"].join(" "))):this.internal.write([z(F),"0","0",z(U),z(L),oe(O+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(L){var O,F,U=0;if(typeof L=="string")for(F=L.length,O=0;O<F;O++)U=(U<<5)-U+L.charCodeAt(O),U|=0;else if(T(L))for(F=L.byteLength/2,O=0;O<F;O++)U=(U<<5)-U+L[O],U|=0;return U},j=e.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var O=!0;return L.length===0&&(O=!1),L.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(O=!1),O},D=e.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var O=L.indexOf(",");return O<0?null:L.substring(0,O).trim().endsWith("base64")?L.substring(O+1):null};e.__addimage__.isArrayBuffer=function(L){return L instanceof ArrayBuffer};var T=e.__addimage__.isArrayBufferView=function(L){return L instanceof Int8Array||L instanceof Uint8Array||L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array},A=e.__addimage__.binaryStringToUint8Array=function(L){for(var O=L.length,F=new Uint8Array(O),U=0;U<O;U++)F[U]=L.charCodeAt(U);return F},S=e.__addimage__.arrayBufferToBinaryString=function(L){for(var O="",F=T(L)?L:new Uint8Array(L),U=0;U<F.length;U+=8192)O+=String.fromCharCode.apply(null,F.subarray(U,U+8192));return O};e.addImage=function(){var L,O,F,U,W,X,P,z,oe;if(typeof arguments[1]=="number"?(O=n,F=arguments[1],U=arguments[2],W=arguments[3],X=arguments[4],P=arguments[5],z=arguments[6],oe=arguments[7]):(O=arguments[1],F=arguments[2],U=arguments[3],W=arguments[4],X=arguments[5],P=arguments[6],z=arguments[7],oe=arguments[8]),zn(L=arguments[0])==="object"&&!p(L)&&"imageData"in L){var Y=L;L=Y.imageData,O=Y.format||O||n,F=Y.x||F||0,U=Y.y||U||0,W=Y.w||Y.width||W,X=Y.h||Y.height||X,P=Y.alias||P,z=Y.compression||z,oe=Y.rotation||Y.angle||oe}var q=this.internal.getFilters();if(z===void 0&&q.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(F)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var _=E.call(this,L,O,P,z);return x.call(this,F,U,W,X,_,oe),this};var E=function(L,O,F,U){var W,X,P;if(typeof L=="string"&&s(L)===n){L=unescape(L);var z=I(L,!1);(z!==""||(z=e.loadFile(L,!0))!==void 0)&&(L=z)}if(p(L)&&(L=h(L,O)),O=s(L,O),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((P=F)==null||P.length===0)&&(F=function(oe){return typeof oe=="string"||T(oe)?N(oe):T(oe.data)?N(oe.data):null}(L)),(W=m.call(this,F))||(L instanceof Uint8Array||O==="RGBA"||(X=L,L=A(L)),W=this["process"+O.toUpperCase()](L,u.call(this),F,function(oe){return oe&&typeof oe=="string"&&(oe=oe.toUpperCase()),oe in e.image_compression?oe:v.NONE}(U),X)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},I=e.__addimage__.convertBase64ToBinaryString=function(L,O){O=typeof O!="boolean"||O;var F,U="";if(typeof L=="string"){var W;F=(W=D(L))!==null&&W!==void 0?W:L;try{U=ky(F)}catch(X){if(O)throw j(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};e.getImageProperties=function(L){var O,F,U="";if(p(L)&&(L=h(L)),typeof L=="string"&&s(L)===n&&((U=I(L,!1))===""&&(U=e.loadFile(L)||""),L=U),F=s(L),!f(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(L instanceof Uint8Array||(L=A(L)),!(O=this["process"+F.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=F,O}})(St.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};St.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,s,a,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,u=!1,f=0;f<d.length&&!u;f++)switch((r=d[f]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<d.length;p++){r=d[p];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),v=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+h(y(r.contents))+")",a+=" /Popup "+x.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+h(y(v))+") >>",g.content=a;var N=g.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+N,r.open&&(a+=" /Open true"),a+=" >>",x.content=a,this.internal.write(g.objId,"0 R",x.objId,"0 R");break;case"freetext":s="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var j=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+h(m(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var D=this.annotations._nameMap[r.options.name];r.options.pageNumber=D.page,r.options.top=D.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var T=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+T+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,s,a,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:d(r),w:c(n+s),h:d(r+a)},options:o,type:"link"})},e.textWithLink=function(n,r,s,a){var o,l,c=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var u=this.splitTextToSize(n,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(n,r,s,a),s+=.2*d,a.align==="center"&&(r-=c/2),a.align==="right"&&(r-=c),this.link(r,s-d,l,o,a),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(St.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(g){var x=0,y=n,v="",N=0;for(x=0;x<g.length;x+=1)y[g.charCodeAt(x)]!==void 0?(N++,typeof(y=y[g.charCodeAt(x)])=="number"&&(v+=String.fromCharCode(y),y=n,N=0),x===g.length-1&&(y=n,v+=g.charAt(x-(N-1)),x-=N-1,N=0)):(y=n,v+=g.charAt(x-N),x-=N,N=0);return v};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(g,x,y){return o(g)?a(g)===!1?-1:!d(g)||!o(x)&&!o(y)||!o(y)&&l(x)||l(g)&&!o(x)||l(g)&&c(x)||l(g)&&l(x)?0:u(g)&&o(x)&&!l(x)&&o(y)&&d(y)?3:l(g)||!o(y)?1:2:-1},h=function(g){var x=0,y=0,v=0,N="",j="",D="",T=(g=g||"").split("\\s+"),A=[];for(x=0;x<T.length;x+=1){for(A.push(""),y=0;y<T[x].length;y+=1)N=T[x][y],j=T[x][y-1],D=T[x][y+1],o(N)?(v=p(N,j,D),A[x]+=v!==-1?String.fromCharCode(t[N.charCodeAt(0)][v]):N):A[x]+=N;A[x]=f(A[x])}return A.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var g,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(x)){var v=0;for(y=[],v=0;v<x.length;v+=1)Array.isArray(x[v])?y.push([h(x[v][0]),x[v][1],x[v][2]]):y.push([h(x[v])]);g=y}else g=h(x);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",m])}(St.API),St.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(St.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(g){m=g}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){r.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),f=d.font||this.getFont(),p=d.scaleFactor||this.internal.scaleFactor,h=0,m=0,g=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,j){return N.concat(x.splitTextToSize(j,y))},[])):c=Array.isArray(c)?c:[c];for(var v=0;v<c.length;v++)h<(g=this.getStringUnitWidth(c[v],{font:f})*u)&&(h=g);return h!==0&&(m=c.length),{w:h/=p,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,f,p){if(r.call(this),!u)throw new Error("No data for PDF table.");var h,m,g,x,y=[],v=[],N=[],j={},D={},T=[],A=[],S=(p=p||{}).autoSize||!1,E=p.printHeaders!==!1,I=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,L=p.margins||Object.assign({width:this.getPageWidth()},t),O=typeof p.padding=="number"?p.padding:3,F=p.headerBackgroundColor||"#c8c8c8",U=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=I,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=U,this.setFontSize(I),f==null)v=y=Object.keys(u[0]),N=y.map(function(){return"left"});else if(Array.isArray(f)&&zn(f[0])==="object")for(y=f.map(function(Y){return Y.name}),v=f.map(function(Y){return Y.prompt||Y.name||""}),N=f.map(function(Y){return Y.align||"left"}),h=0;h<f.length;h+=1)D[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(v=y=f,N=y.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<y.length;h+=1){for(j[x=y[h]]=u.map(function(Y){return Y[x]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(v[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=j[x],this.setFont(void 0,"normal"),g=0;g<m.length;g+=1)T.push(this.getTextDimensions(m[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[x]=Math.max.apply(null,T)+O+O,T=[]}if(E){var W={};for(h=0;h<y.length;h+=1)W[y[h]]={},W[y[h]].text=v[h],W[y[h]].align=N[h];var X=l.call(this,W,D);A=y.map(function(Y){return new a(c,d,D[Y],X,W[Y].text,void 0,W[Y].align)}),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var P=f.reduce(function(Y,q){return Y[q.name]=q.align,Y},{});for(h=0;h<u.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:u[h]},this);var z=l.call(this,u[h],D);for(g=0;g<y.length;g+=1){var oe=u[h][y[g]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:g,data:oe},this),o.call(this,new a(c,d,D[y[g]],z,oe,h+2,P[y[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,d[h]-u-u)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/p+u+u},this).reduce(function(h,m){return Math.max(h,m)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){u=this.internal.__cell__.tableHeaderRow[h].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(m)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(St.API);var k8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},C8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],I5=S8(C8),A8=[100,200,300,400,500,600,700,800,900],qZ=S8(A8);function Aw(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return k8[a=a||"normal"]?a:"normal"}(e.style),r=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(e.weight),s=function(a){return typeof I5[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,n,r].join(" ")}}}function BM(e,t,n,r){var s;for(s=n;s>=0&&s<t.length;s+=r)if(e[t[s]])return e[t[s]];for(s=n;s>=0&&s<t.length;s-=r)if(e[t[s]])return e[t[s]]}var VZ={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},HM={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function UM(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function $M(e){return e.trimLeft()}function YZ(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function WZ(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var H0,qM,VM,$f,U0,YM,WM,GM,Mw=["times"];function KM(e,t,n,r,s){var a=4,o=XM;switch(s){case St.API.image_compression.FAST:a=1,o=JM;break;case St.API.image_compression.MEDIUM:a=6,o=QM;break;case St.API.image_compression.SLOW:a=9,o=ZM}e=function(c,d,u,f){for(var p,h=c.length/d,m=new Uint8Array(c.length+h),g=[GZ,JM,XM,QM,ZM],x=0;x<h;x+=1){var y=x*d,v=c.subarray(y,y+d);if(f)m.set(f(v,u,p),y+x);else{for(var N=g.length,j=[],D=0;D<N;D+=1)j[D]=g[D](v,u,p);var T=JZ(j.concat());m.set(j[T],y+x)}p=v}return m}(e,t,Math.ceil(n*r/8),o);var l=E5(e,{level:a});return St.API.__addimage__.arrayBufferToBinaryString(l)}function GZ(e){var t=Array.apply([],e);return t.unshift(0),t}function JM(e,t){var n=e.length,r=[];r[0]=1;for(var s=0;s<n;s+=1){var a=e[s-t]||0;r[s+1]=e[s]-a+256&255}return r}function XM(e,t,n){var r=e.length,s=[];s[0]=2;for(var a=0;a<r;a+=1){var o=n&&n[a]||0;s[a+1]=e[a]-o+256&255}return s}function QM(e,t,n){var r=e.length,s=[];s[0]=3;for(var a=0;a<r;a+=1){var o=e[a-t]||0,l=n&&n[a]||0;s[a+1]=e[a]+256-(o+l>>>1)&255}return s}function ZM(e,t,n){var r=e.length,s=[];s[0]=4;for(var a=0;a<r;a+=1){var o=KZ(e[a-t]||0,n&&n[a]||0,n&&n[a-t]||0);s[a+1]=e[a]-o+256&255}return s}function KZ(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),s=Math.abs(e-n),a=Math.abs(e+t-n-n);return r<=s&&r<=a?e:s<=a?t:n}function JZ(e){var t=e.map(function(n){return n.reduce(function(r,s){return r+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function Dw(e,t,n){var r=t*n,s=Math.floor(r/8),a=16-(r-8*s+n),o=(1<<n)-1;return M8(e,s)>>a&o}function eD(e,t,n,r){var s=n*r,a=Math.floor(s/8),o=16-(s-8*a+r),l=(1<<r)-1,c=(t&l)<<o;(function(d,u,f){if(u+1<d.byteLength)d.setUint16(u,f,!1);else{var p=f>>8&255;d.setUint8(u,p)}})(e,a,M8(e,a)&~(l<<o)&65535|c)}function M8(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function XZ(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,s=e[t++],a=s>>7,o=1<<1+(7&s);e[t++],e[t++];var l=null,c=null;a&&(l=t,c=o,t+=3*o);var d=!0,u=[],f=0,p=null,h=0,m=null;for(this.width=n,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];f=e[t++]|e[t++]<<8,p=e[t++],1&g||(p=null),h=g>>2&7,t++;break;case 254:for(;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,j=e[t++],D=j>>6&1,T=1<<1+(7&j),A=l,S=c,E=!1;j>>7&&(E=!0,A=t,S=T,t+=3*T);var I=t;for(t++;;){var L;if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}u.push({x,y,width:v,height:N,has_local_palette:E,palette_offset:A,palette_size:S,data_offset:I,data_length:t-I,transparent_index:p,interlaced:!!D,delay:f,disposal:h});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(O){if(O<0||O>=u.length)throw new Error("Frame index out of range.");return u[O]},this.decodeAndBlitFrameBGRA=function(O,F){var U=this.frameInfo(O),W=U.width*U.height,X=new Uint8Array(W);tD(e,U.data_offset,X,W);var P=U.palette_offset,z=U.transparent_index;z===null&&(z=256);var oe=U.width,Y=n-oe,q=oe,_=4*(U.y*n+U.x),$=4*((U.y+U.height)*n+U.x),J=_,te=4*Y;U.interlaced===!0&&(te+=4*n*7);for(var Z=8,ie=0,he=X.length;ie<he;++ie){var ye=X[ie];if(q===0&&(q=oe,(J+=te)>=$&&(te=4*Y+4*n*(Z-1),J=_+(oe+Y)*(Z<<1),Z>>=1)),ye===z)J+=4;else{var Se=e[P+3*ye],Ee=e[P+3*ye+1],Pe=e[P+3*ye+2];F[J++]=Pe,F[J++]=Ee,F[J++]=Se,F[J++]=255}--q}},this.decodeAndBlitFrameRGBA=function(O,F){var U=this.frameInfo(O),W=U.width*U.height,X=new Uint8Array(W);tD(e,U.data_offset,X,W);var P=U.palette_offset,z=U.transparent_index;z===null&&(z=256);var oe=U.width,Y=n-oe,q=oe,_=4*(U.y*n+U.x),$=4*((U.y+U.height)*n+U.x),J=_,te=4*Y;U.interlaced===!0&&(te+=4*n*7);for(var Z=8,ie=0,he=X.length;ie<he;++ie){var ye=X[ie];if(q===0&&(q=oe,(J+=te)>=$&&(te=4*Y+4*n*(Z-1),J=_+(oe+Y)*(Z<<1),Z>>=1)),ye===z)J+=4;else{var Se=e[P+3*ye],Ee=e[P+3*ye+1],Pe=e[P+3*ye+2];F[J++]=Se,F[J++]=Ee,F[J++]=Pe,F[J++]=255}--q}}}function tD(e,t,n,r){for(var s=e[t++],a=1<<s,o=a+1,l=o+1,c=s+1,d=(1<<c)-1,u=0,f=0,p=0,h=e[t++],m=new Int32Array(4096),g=null;;){for(;u<16&&h!==0;)f|=e[t++]<<u,u+=8,h===1?h=e[t++]:--h;if(u<c)break;var x=f&d;if(f>>=c,u-=c,x!==a){if(x===o)break;for(var y=x<l?x:g,v=0,N=y;N>a;)N=m[N]>>8,++v;var j=N;if(p+v+(y!==x?1:0)>r)return void Jn.log("Warning, gif stream longer than expected.");n[p++]=j;var D=p+=v;for(y!==x&&(n[p++]=j),N=y;v--;)N=m[N],n[--D]=255&N,N>>=8;g!==null&&l<4096&&(m[l++]=g<<8|j,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=x}else l=o+1,d=(1<<(c=s+1))-1,g=null}return p!==r&&Jn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ew(e){var t,n,r,s,a,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),f=new Array(65535),p=new Array(65535),h=new Array(64),m=new Array(64),g=[],x=0,y=7,v=new Array(64),N=new Array(64),j=new Array(64),D=new Array(256),T=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(_,$){for(var J=0,te=0,Z=new Array,ie=1;ie<=16;ie++){for(var he=1;he<=_[ie];he++)Z[$[te]]=[],Z[$[te]][0]=J,Z[$[te]][1]=ie,te++,J++;J*=2}return Z}function P(_){for(var $=_[0],J=_[1]-1;J>=0;)$&1<<J&&(x|=1<<y),J--,--y<0&&(x==255?(z(255),z(0)):z(x),y=7,x=0)}function z(_){g.push(_)}function oe(_){z(_>>8&255),z(255&_)}function Y(_,$,J,te,Z){for(var ie,he=Z[0],ye=Z[240],Se=function(_e,ne){var de,ce,De,Re,Me,He,dt,it,Qe,Et,rt=0;for(Qe=0;Qe<8;++Qe){de=_e[rt],ce=_e[rt+1],De=_e[rt+2],Re=_e[rt+3],Me=_e[rt+4],He=_e[rt+5],dt=_e[rt+6];var Yn=de+(it=_e[rt+7]),Pt=de-it,Bt=ce+dt,Vt=ce-dt,Mn=De+He,kt=De-He,jn=Re+Me,At=Re-Me,Ht=Yn+jn,Un=Yn-jn,Jt=Bt+Mn,Tt=Bt-Mn;_e[rt]=Ht+Jt,_e[rt+4]=Ht-Jt;var bn=.707106781*(Tt+Un);_e[rt+2]=Un+bn,_e[rt+6]=Un-bn;var tl=.382683433*((Ht=At+kt)-(Tt=Vt+Pt)),is=.5411961*Ht+tl,ba=1.306562965*Tt+tl,ra=.707106781*(Jt=kt+Vt),Lt=Pt+ra,Wi=Pt-ra;_e[rt+5]=Wi+is,_e[rt+3]=Wi-is,_e[rt+1]=Lt+ba,_e[rt+7]=Lt-ba,rt+=8}for(rt=0,Qe=0;Qe<8;++Qe){de=_e[rt],ce=_e[rt+8],De=_e[rt+16],Re=_e[rt+24],Me=_e[rt+32],He=_e[rt+40],dt=_e[rt+48];var ue=de+(it=_e[rt+56]),be=de-it,ke=ce+dt,Oe=ce-dt,Je=De+He,lt=De-He,Mt=Re+Me,ut=Re-Me,ct=ue+Mt,st=ue-Mt,ht=ke+Je,_t=ke-Je;_e[rt]=ct+ht,_e[rt+32]=ct-ht;var Ft=.707106781*(_t+st);_e[rt+16]=st+Ft,_e[rt+48]=st-Ft;var rr=.382683433*((ct=ut+lt)-(_t=Oe+be)),dn=.5411961*ct+rr,rn=1.306562965*_t+rr,Tn=.707106781*(ht=lt+Oe),Ha=be+Tn,wi=be-Tn;_e[rt+40]=wi+dn,_e[rt+24]=wi-dn,_e[rt+8]=Ha+rn,_e[rt+56]=Ha-rn,rt++}for(Qe=0;Qe<64;++Qe)Et=_e[Qe]*ne[Qe],h[Qe]=Et>0?Et+.5|0:Et-.5|0;return h}(_,$),Ee=0;Ee<64;++Ee)m[A[Ee]]=Se[Ee];var Pe=m[0]-J;J=m[0],Pe==0?P(te[0]):(P(te[p[ie=32767+Pe]]),P(f[ie]));for(var qe=63;qe>0&&m[qe]==0;)qe--;if(qe==0)return P(he),J;for(var We,V=1;V<=qe;){for(var Ae=V;m[V]==0&&V<=qe;)++V;var Ve=V-Ae;if(Ve>=16){We=Ve>>4;for(var et=1;et<=We;++et)P(ye);Ve&=15}ie=32767+m[V],P(Z[(Ve<<4)+p[ie]]),P(f[ie]),V++}return qe!=63&&P(he),J}function q(_){_=Math.min(Math.max(_,1),100),a!=_&&(function($){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var Z=o((J[te]*$+50)/100);Z=Math.min(Math.max(Z,1),255),l[A[te]]=Z}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var ye=o((ie[he]*$+50)/100);ye=Math.min(Math.max(ye,1),255),c[A[he]]=ye}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ee=0,Pe=0;Pe<8;Pe++)for(var qe=0;qe<8;qe++)d[Ee]=1/(l[A[Ee]]*Se[Pe]*Se[qe]*8),u[Ee]=1/(c[A[Ee]]*Se[Pe]*Se[qe]*8),Ee++}(_<50?Math.floor(5e3/_):Math.floor(200-2*_)),a=_)}this.encode=function(_,$){$&&q($),g=new Array,x=0,y=7,oe(65496),oe(65504),oe(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),oe(1),oe(1),z(0),z(0),function(){oe(65499),oe(132),z(0);for(var ce=0;ce<64;ce++)z(l[ce]);z(1);for(var De=0;De<64;De++)z(c[De])}(),function(ce,De){oe(65472),oe(17),z(8),oe(De),oe(ce),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(_.width,_.height),function(){oe(65476),oe(418),z(0);for(var ce=0;ce<16;ce++)z(S[ce+1]);for(var De=0;De<=11;De++)z(E[De]);z(16);for(var Re=0;Re<16;Re++)z(I[Re+1]);for(var Me=0;Me<=161;Me++)z(L[Me]);z(1);for(var He=0;He<16;He++)z(O[He+1]);for(var dt=0;dt<=11;dt++)z(F[dt]);z(17);for(var it=0;it<16;it++)z(U[it+1]);for(var Qe=0;Qe<=161;Qe++)z(W[Qe])}(),oe(65498),oe(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var J=0,te=0,Z=0;x=0,y=7,this.encode.displayName="_encode_";for(var ie,he,ye,Se,Ee,Pe,qe,We,V,Ae=_.data,Ve=_.width,et=_.height,_e=4*Ve,ne=0;ne<et;){for(ie=0;ie<_e;){for(Ee=_e*ne+ie,qe=-1,We=0,V=0;V<64;V++)Pe=Ee+(We=V>>3)*_e+(qe=4*(7&V)),ne+We>=et&&(Pe-=_e*(ne+1+We-et)),ie+qe>=_e&&(Pe-=ie+qe-_e+4),he=Ae[Pe++],ye=Ae[Pe++],Se=Ae[Pe++],v[V]=(T[he]+T[ye+256|0]+T[Se+512|0]>>16)-128,N[V]=(T[he+768|0]+T[ye+1024|0]+T[Se+1280|0]>>16)-128,j[V]=(T[he+1280|0]+T[ye+1536|0]+T[Se+1792|0]>>16)-128;J=Y(v,d,J,t,r),te=Y(N,u,te,n,s),Z=Y(j,u,Z,n,s),ie+=32}ne+=8}if(y>=0){var de=[];de[1]=y+1,de[0]=(1<<y+1)-1,P(de)}return oe(65497),new Uint8Array(g)},e=e||50,function(){for(var _=String.fromCharCode,$=0;$<256;$++)D[$]=_($)}(),t=X(S,E),n=X(O,F),r=X(I,L),s=X(U,W),function(){for(var _=1,$=2,J=1;J<=15;J++){for(var te=_;te<$;te++)p[32767+te]=J,f[32767+te]=[],f[32767+te][1]=J,f[32767+te][0]=te;for(var Z=-($-1);Z<=-_;Z++)p[32767+Z]=J,f[32767+Z]=[],f[32767+Z][1]=J,f[32767+Z][0]=$-1+Z;_<<=1,$<<=1}}(),function(){for(var _=0;_<256;_++)T[_]=19595*_,T[_+256|0]=38470*_,T[_+512|0]=7471*_+32768,T[_+768|0]=-11059*_,T[_+1024|0]=-21709*_,T[_+1280|0]=32768*_+8421375,T[_+1536|0]=-27439*_,T[_+1792|0]=-5329*_}(),q(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function to(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function nD(e){function t(E){if(!E)throw Error("assert :P")}function n(E,I,L){for(var O=0;4>O;O++)if(E[I+O]!=L.charCodeAt(O))return!0;return!1}function r(E,I,L,O,F){for(var U=0;U<F;U++)E[I+U]=L[O+U]}function s(E,I,L,O){for(var F=0;F<O;F++)E[I+F]=L}function a(E){return new Int32Array(E)}function o(E,I){for(var L=[],O=0;O<E;O++)L.push(new I);return L}function l(E,I){var L=[];return function O(F,U,W){for(var X=W[U],P=0;P<X&&(F.push(W.length>U+1?[]:new I),!(W.length<U+1));P++)O(F[P],U+1,W)}(L,0,E),L}var c=function(){var E=this;function I(b,w){for(var M=1<<w-1>>>0;b&M;)M>>>=1;return M?(b&M-1)+M:b}function L(b,w,M,R,H){t(!(R%M));do b[w+(R-=M)]=H;while(0<R)}function O(b,w,M,R,H){if(t(2328>=H),512>=H)var G=a(512);else if((G=a(H))==null)return 0;return function(K,Q,ee,re,pe,je){var se,me,we=Q,Te=1<<ee,Ne=a(16),Le=a(16);for(t(pe!=0),t(re!=null),t(K!=null),t(0<ee),me=0;me<pe;++me){if(15<re[me])return 0;++Ne[re[me]]}if(Ne[0]==pe)return 0;for(Le[1]=0,se=1;15>se;++se){if(Ne[se]>1<<se)return 0;Le[se+1]=Le[se]+Ne[se]}for(me=0;me<pe;++me)se=re[me],0<re[me]&&(je[Le[se]++]=me);if(Le[15]==1)return(re=new F).g=0,re.value=je[0],L(K,we,1,Te,re),Te;var Fe,Ge=-1,$e=Te-1,jt=0,pt=1,Zt=1,vt=1<<ee;for(me=0,se=1,pe=2;se<=ee;++se,pe<<=1){if(pt+=Zt<<=1,0>(Zt-=Ne[se]))return 0;for(;0<Ne[se];--Ne[se])(re=new F).g=se,re.value=je[me++],L(K,we+jt,pe,vt,re),jt=I(jt,se)}for(se=ee+1,pe=2;15>=se;++se,pe<<=1){if(pt+=Zt<<=1,0>(Zt-=Ne[se]))return 0;for(;0<Ne[se];--Ne[se]){if(re=new F,(jt&$e)!=Ge){for(we+=vt,Fe=1<<(Ge=se)-ee;15>Ge&&!(0>=(Fe-=Ne[Ge]));)++Ge,Fe<<=1;Te+=vt=1<<(Fe=Ge-ee),K[Q+(Ge=jt&$e)].g=Fe+ee,K[Q+Ge].value=we-Q-Ge}re.g=se-ee,re.value=je[me++],L(K,we+(jt>>ee),pe,vt,re),jt=I(jt,se)}}return pt!=2*Le[15]-1?0:Te}(b,w,M,R,H,G)}function F(){this.value=this.g=0}function U(){this.value=this.g=0}function W(){this.G=o(5,F),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(su,U)}function X(b,w,M,R){t(b!=null),t(w!=null),t(2147483648>R),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=w,b.pa=M,b.Jd=w,b.Yc=M+R,b.Zc=4<=R?M+R-4+1:M,he(b)}function P(b,w){for(var M=0;0<w--;)M|=Se(b,128)<<w;return M}function z(b,w){var M=P(b,w);return ye(b)?-M:M}function oe(b,w,M,R){var H,G=0;for(t(b!=null),t(w!=null),t(4294967288>R),b.Sb=R,b.Ra=0,b.u=0,b.h=0,4<R&&(R=4),H=0;H<R;++H)G+=w[M+H]<<8*H;b.Ra=G,b.bb=R,b.oa=w,b.pa=M}function Y(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<Nc-8>>>0,++b.bb,b.u-=8;te(b)&&(b.h=1,b.u=0)}function q(b,w){if(t(0<=w),!b.h&&w<=Va){var M=J(b)&qa[w];return b.u+=w,Y(b),M}return b.h=1,b.u=0}function _(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(b){return b.Ra>>>(b.u&Nc-1)>>>0}function te(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>Nc}function Z(b,w){b.u=w,b.h=te(b)}function ie(b){b.u>=hl&&(t(b.u>=hl),Y(b))}function he(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function ye(b){return P(b,1)}function Se(b,w){var M=b.Ca;0>b.b&&he(b);var R=b.b,H=M*w>>>8,G=(b.I>>>R>H)+0;for(G?(M-=H,b.I-=H+1<<R>>>0):M=H+1,R=M,H=0;256<=R;)H+=8,R>>=8;return R=7^H+jc[R],b.b-=R,b.Ca=(M<<R)-1,G}function Ee(b,w,M){b[w+0]=M>>24&255,b[w+1]=M>>16&255,b[w+2]=M>>8&255,b[w+3]=255&M}function Pe(b,w){return b[w+0]|b[w+1]<<8}function qe(b,w){return Pe(b,w)|b[w+2]<<16}function We(b,w){return Pe(b,w)|Pe(b,w+2)<<16}function V(b,w){var M=1<<w;return t(b!=null),t(0<w),b.X=a(M),b.X==null?0:(b.Mb=32-w,b.Xa=w,1)}function Ae(b,w){t(b!=null),t(w!=null),t(b.Xa==w.Xa),r(w.X,0,b.X,0,1<<w.Xa)}function Ve(){this.X=[],this.Xa=this.Mb=0}function et(b,w,M,R){t(M!=null),t(R!=null);var H=M[0],G=R[0];return H==0&&(H=(b*G+w/2)/w),G==0&&(G=(w*H+b/2)/b),0>=H||0>=G?0:(M[0]=H,R[0]=G,1)}function _e(b,w){return b+(1<<w)-1>>>w}function ne(b,w){return((4278255360&b)+(4278255360&w)>>>0&4278255360)+((16711935&b)+(16711935&w)>>>0&16711935)>>>0}function de(b,w){E[w]=function(M,R,H,G,K,Q,ee){var re;for(re=0;re<K;++re){var pe=E[b](Q[ee+re-1],H,G+re);Q[ee+re]=ne(M[R+re],pe)}}}function ce(){this.ud=this.hd=this.jd=0}function De(b,w){return((4278124286&(b^w))>>>1)+(b&w)>>>0}function Re(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Me(b,w){return Re(b+(b-w+.5>>1))}function He(b,w,M){return Math.abs(w-M)-Math.abs(b-M)}function dt(b,w,M,R,H,G,K){for(R=G[K-1],M=0;M<H;++M)G[K+M]=R=ne(b[w+M],R)}function it(b,w,M,R,H){var G;for(G=0;G<M;++G){var K=b[w+G],Q=K>>8&255,ee=16711935&(ee=(ee=16711935&K)+((Q<<16)+Q));R[H+G]=(4278255360&K)+ee>>>0}}function Qe(b,w){w.jd=255&b,w.hd=b>>8&255,w.ud=b>>16&255}function Et(b,w,M,R,H,G){var K;for(K=0;K<R;++K){var Q=w[M+K],ee=Q>>>8,re=Q,pe=255&(pe=(pe=Q>>>16)+((b.jd<<24>>24)*(ee<<24>>24)>>>5));re=255&(re=(re+=(b.hd<<24>>24)*(ee<<24>>24)>>>5)+((b.ud<<24>>24)*(pe<<24>>24)>>>5)),H[G+K]=(4278255360&Q)+(pe<<16)+re}}function rt(b,w,M,R,H){E[w]=function(G,K,Q,ee,re,pe,je,se,me){for(ee=je;ee<se;++ee)for(je=0;je<me;++je)re[pe++]=H(Q[R(G[K++])])},E[b]=function(G,K,Q,ee,re,pe,je){var se=8>>G.b,me=G.Ea,we=G.K[0],Te=G.w;if(8>se)for(G=(1<<G.b)-1,Te=(1<<se)-1;K<Q;++K){var Ne,Le=0;for(Ne=0;Ne<me;++Ne)Ne&G||(Le=R(ee[re++])),pe[je++]=H(we[Le&Te]),Le>>=se}else E["VP8LMapColor"+M](ee,re,we,Te,pe,je,K,Q,me)}}function Yn(b,w,M,R,H){for(M=w+M;w<M;){var G=b[w++];R[H++]=G>>16&255,R[H++]=G>>8&255,R[H++]=255&G}}function Pt(b,w,M,R,H){for(M=w+M;w<M;){var G=b[w++];R[H++]=G>>16&255,R[H++]=G>>8&255,R[H++]=255&G,R[H++]=G>>24&255}}function Bt(b,w,M,R,H){for(M=w+M;w<M;){var G=(K=b[w++])>>16&240|K>>12&15,K=240&K|K>>28&15;R[H++]=G,R[H++]=K}}function Vt(b,w,M,R,H){for(M=w+M;w<M;){var G=(K=b[w++])>>16&248|K>>13&7,K=K>>5&224|K>>3&31;R[H++]=G,R[H++]=K}}function Mn(b,w,M,R,H){for(M=w+M;w<M;){var G=b[w++];R[H++]=255&G,R[H++]=G>>8&255,R[H++]=G>>16&255}}function kt(b,w,M,R,H,G){if(G==0)for(M=w+M;w<M;)Ee(R,((G=b[w++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),H+=32;else r(R,H,b,w,M)}function jn(b,w){E[w][0]=E[b+"0"],E[w][1]=E[b+"1"],E[w][2]=E[b+"2"],E[w][3]=E[b+"3"],E[w][4]=E[b+"4"],E[w][5]=E[b+"5"],E[w][6]=E[b+"6"],E[w][7]=E[b+"7"],E[w][8]=E[b+"8"],E[w][9]=E[b+"9"],E[w][10]=E[b+"10"],E[w][11]=E[b+"11"],E[w][12]=E[b+"12"],E[w][13]=E[b+"13"],E[w][14]=E[b+"0"],E[w][15]=E[b+"0"]}function At(b){return b==U1||b==$1||b==Vx||b==q1}function Ht(){this.eb=[],this.size=this.A=this.fb=0}function Un(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Jt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ht,this.f.kb=new Un,this.sd=null}function Tt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function bn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function tl(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function is(b,w){var M=b.T,R=w.ba.f.RGBA,H=R.eb,G=R.fb+b.ka*R.A,K=Ci[w.ba.S],Q=b.y,ee=b.O,re=b.f,pe=b.N,je=b.ea,se=b.W,me=w.cc,we=w.dc,Te=w.Mc,Ne=w.Nc,Le=b.ka,Fe=b.ka+b.T,Ge=b.U,$e=Ge+1>>1;for(Le==0?K(Q,ee,null,null,re,pe,je,se,re,pe,je,se,H,G,null,null,Ge):(K(w.ec,w.fc,Q,ee,me,we,Te,Ne,re,pe,je,se,H,G-R.A,H,G,Ge),++M);Le+2<Fe;Le+=2)me=re,we=pe,Te=je,Ne=se,pe+=b.Rc,se+=b.Rc,G+=2*R.A,K(Q,(ee+=2*b.fa)-b.fa,Q,ee,me,we,Te,Ne,re,pe,je,se,H,G-R.A,H,G,Ge);return ee+=b.fa,b.j+Fe<b.o?(r(w.ec,w.fc,Q,ee,Ge),r(w.cc,w.dc,re,pe,$e),r(w.Mc,w.Nc,je,se,$e),M--):1&Fe||K(Q,ee,null,null,re,pe,je,se,re,pe,je,se,H,G+R.A,null,null,Ge),M}function ba(b,w,M){var R=b.F,H=[b.J];if(R!=null){var G=b.U,K=w.ba.S,Q=K==qx||K==Vx;w=w.ba.f.RGBA;var ee=[0],re=b.ka;ee[0]=b.T,b.Kb&&(re==0?--ee[0]:(--re,H[0]-=b.width),b.j+b.ka+b.T==b.o&&(ee[0]=b.o-b.j-re));var pe=w.eb;re=w.fb+re*w.A,b=p4(R,H[0],b.width,G,ee,pe,re+(Q?0:3),w.A),t(M==ee),b&&At(K)&&Jp(pe,re,Q,G,ee,w.A)}return 0}function ra(b){var w=b.ma,M=w.ba.S,R=11>M,H=M==Ux||M==$x||M==qx||M==H1||M==12||At(M);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!Up(w.Oa,b,H?11:12))return 0;if(H&&At(M)&&zp(),b.da)alert("todo:use_scaling");else{if(R){if(w.Ib=tl,b.Kb){if(M=b.U+1>>1,w.memory=a(b.U+2*M),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+b.U,w.Mc=w.cc,w.Nc=w.dc+M,w.Ib=is,zp()}}else alert("todo:EmitYUV");H&&(w.Jb=ba,R&&Ji())}if(R&&!E4){for(b=0;256>b;++b)uI[b]=89858*(b-128)+Wx>>Yx,pI[b]=-22014*(b-128)+Wx,hI[b]=-45773*(b-128),fI[b]=113618*(b-128)+Wx>>Yx;for(b=Qp;b<W1;++b)w=76283*(b-16)+Wx>>Yx,mI[b-Qp]=Sn(w,255),gI[b-Qp]=Sn(w+8>>4,15);E4=1}return 1}function Lt(b){var w=b.ma,M=b.U,R=b.T;return t(!(1&b.ka)),0>=M||0>=R?0:(M=w.Ib(b,w),w.Jb!=null&&w.Jb(b,w,M),w.Dc+=M,1)}function Wi(b){b.ma.memory=null}function ue(b,w,M,R){return q(b,8)!=47?0:(w[0]=q(b,14)+1,M[0]=q(b,14)+1,R[0]=q(b,1),q(b,3)!=0?0:!b.h)}function be(b,w){if(4>b)return b+1;var M=b-2>>1;return(2+(1&b)<<M)+q(w,M)+1}function ke(b,w){return 120<w?w-120:1<=(M=((M=X7[w-1])>>4)*b+(8-(15&M)))?M:1;var M}function Oe(b,w,M){var R=J(M),H=b[w+=255&R].g-8;return 0<H&&(Z(M,M.u+8),R=J(M),w+=b[w].value,w+=R&(1<<H)-1),Z(M,M.u+b[w].g),b[w].value}function Je(b,w,M){return M.g+=b.g,M.value+=b.value<<w>>>0,t(8>=M.g),b.g}function lt(b,w,M){var R=b.xc;return t((w=R==0?0:b.vc[b.md*(M>>R)+(w>>R)])<b.Wb),b.Ya[w]}function Mt(b,w,M,R){var H=b.ab,G=b.c*w,K=b.C;w=K+w;var Q=M,ee=R;for(R=b.Ta,M=b.Ua;0<H--;){var re=b.gc[H],pe=K,je=w,se=Q,me=ee,we=(ee=R,Q=M,re.Ea);switch(t(pe<je),t(je<=re.nc),re.hc){case 2:Lr(se,me,(je-pe)*we,ee,Q);break;case 0:var Te=pe,Ne=je,Le=ee,Fe=Q,Ge=(vt=re).Ea;Te==0&&(qp(se,me,null,null,1,Le,Fe),dt(se,me+1,0,0,Ge-1,Le,Fe+1),me+=Ge,Fe+=Ge,++Te);for(var $e=1<<vt.b,jt=$e-1,pt=_e(Ge,vt.b),Zt=vt.K,vt=vt.w+(Te>>vt.b)*pt;Te<Ne;){var gn=Zt,us=vt,en=1;for(Tf(se,me,Le,Fe-Ge,1,Le,Fe);en<Ge;){var wt=(en&~jt)+$e;wt>Ge&&(wt=Ge),(0,Yp[gn[us++]>>8&15])(se,me+ +en,Le,Fe+en-Ge,wt-en,Le,Fe+en),en=wt}me+=Ge,Fe+=Ge,++Te&jt||(vt+=pt)}je!=re.nc&&r(ee,Q-we,ee,Q+(je-pe-1)*we,we);break;case 1:for(we=se,Ne=me,Ge=(se=re.Ea)-(Fe=se&~(Le=(me=1<<re.b)-1)),Te=_e(se,re.b),$e=re.K,re=re.w+(pe>>re.b)*Te;pe<je;){for(jt=$e,pt=re,Zt=new ce,vt=Ne+Fe,gn=Ne+se;Ne<vt;)Qe(jt[pt++],Zt),Wp(Zt,we,Ne,me,ee,Q),Ne+=me,Q+=me;Ne<gn&&(Qe(jt[pt++],Zt),Wp(Zt,we,Ne,Ge,ee,Q),Ne+=Ge,Q+=Ge),++pe&Le||(re+=Te)}break;case 3:if(se==ee&&me==Q&&0<re.b){for(Ne=ee,se=we=Q+(je-pe)*we-(Fe=(je-pe)*_e(re.Ea,re.b)),me=ee,Le=Q,Te=[],Fe=(Ge=Fe)-1;0<=Fe;--Fe)Te[Fe]=me[Le+Fe];for(Fe=Ge-1;0<=Fe;--Fe)Ne[se+Fe]=Te[Fe];Fx(re,pe,je,ee,we,ee,Q)}else Fx(re,pe,je,se,me,ee,Q)}Q=R,ee=M}ee!=M&&r(R,M,Q,ee,G)}function ut(b,w){var M=b.V,R=b.Ba+b.c*b.C,H=w-b.C;if(t(w<=b.l.o),t(16>=H),0<H){var G=b.l,K=b.Ta,Q=b.Ua,ee=G.width;if(Mt(b,H,M,R),H=Q=[Q],t((M=b.C)<(R=w)),t(G.v<G.va),R>G.o&&(R=G.o),M<G.j){var re=G.j-M;M=G.j,H[0]+=re*ee}if(M>=R?M=0:(H[0]+=4*G.v,G.ka=M-G.j,G.U=G.va-G.v,G.T=R-M,M=1),M){if(Q=Q[0],11>(M=b.ca).S){var pe=M.f.RGBA,je=(R=M.S,H=G.U,G=G.T,re=pe.eb,pe.A),se=G;for(pe=pe.fb+b.Ma*pe.A;0<se--;){var me=K,we=Q,Te=H,Ne=re,Le=pe;switch(R){case Hx:Gp(me,we,Te,Ne,Le);break;case Ux:Sc(me,we,Te,Ne,Le);break;case U1:Sc(me,we,Te,Ne,Le),Jp(Ne,Le,0,Te,1,0);break;case w4:au(me,we,Te,Ne,Le);break;case $x:kt(me,we,Te,Ne,Le,1);break;case $1:kt(me,we,Te,Ne,Le,1),Jp(Ne,Le,0,Te,1,0);break;case qx:kt(me,we,Te,Ne,Le,0);break;case Vx:kt(me,we,Te,Ne,Le,0),Jp(Ne,Le,1,Te,1,0);break;case H1:kc(me,we,Te,Ne,Le);break;case q1:kc(me,we,Te,Ne,Le),h4(Ne,Le,Te,1,0);break;case N4:Cc(me,we,Te,Ne,Le);break;default:t(0)}Q+=ee,pe+=je}b.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=M.height)}}b.C=w,t(b.C<=b.i)}function ct(b){var w;if(0<b.ua)return 0;for(w=0;w<b.Wb;++w){var M=b.Ya[w].G,R=b.Ya[w].H;if(0<M[1][R[1]+0].g||0<M[2][R[2]+0].g||0<M[3][R[3]+0].g)return 0}return 1}function st(b,w,M,R,H,G){if(b.Z!=0){var K=b.qd,Q=b.rd;for(t(Dc[b.Z]!=null);w<M;++w)Dc[b.Z](K,Q,R,H,R,H,G),K=R,Q=H,H+=G;b.qd=K,b.rd=Q}}function ht(b,w){var M=b.l.ma,R=M.Z==0||M.Z==1?b.l.j:b.C;if(R=b.C<R?R:b.C,t(w<=b.l.o),w>R){var H=b.l.width,G=M.ca,K=M.tb+H*R,Q=b.V,ee=b.Ba+b.c*R,re=b.gc;t(b.ab==1),t(re[0].hc==3),Co(re[0],R,w,Q,ee,G,K),st(M,R,w,G,K,H)}b.C=b.Ma=w}function _t(b,w,M,R,H,G,K){var Q=b.$/R,ee=b.$%R,re=b.m,pe=b.s,je=M+b.$,se=je;H=M+R*H;var me=M+R*G,we=280+pe.ua,Te=b.Pb?Q:16777216,Ne=0<pe.ua?pe.Wa:null,Le=pe.wc,Fe=je<me?lt(pe,ee,Q):null;t(b.C<G),t(me<=H);var Ge=!1;e:for(;;){for(;Ge||je<me;){var $e=0;if(Q>=Te){var jt=je-M;t((Te=b).Pb),Te.wd=Te.m,Te.xd=jt,0<Te.s.ua&&Ae(Te.s.Wa,Te.s.vb),Te=Q+Z7}if(ee&Le||(Fe=lt(pe,ee,Q)),t(Fe!=null),Fe.Qb&&(w[je]=Fe.qb,Ge=!0),!Ge)if(ie(re),Fe.jc){$e=re,jt=w;var pt=je,Zt=Fe.pd[J($e)&su-1];t(Fe.jc),256>Zt.g?(Z($e,$e.u+Zt.g),jt[pt]=Zt.value,$e=0):(Z($e,$e.u+Zt.g-256),t(256<=Zt.value),$e=Zt.value),$e==0&&(Ge=!0)}else $e=Oe(Fe.G[0],Fe.H[0],re);if(re.h)break;if(Ge||256>$e){if(!Ge)if(Fe.nd)w[je]=(Fe.qb|$e<<8)>>>0;else{if(ie(re),Ge=Oe(Fe.G[1],Fe.H[1],re),ie(re),jt=Oe(Fe.G[2],Fe.H[2],re),pt=Oe(Fe.G[3],Fe.H[3],re),re.h)break;w[je]=(pt<<24|Ge<<16|$e<<8|jt)>>>0}if(Ge=!1,++je,++ee>=R&&(ee=0,++Q,K!=null&&Q<=G&&!(Q%16)&&K(b,Q),Ne!=null))for(;se<je;)$e=w[se++],Ne.X[(506832829*$e&4294967295)>>>Ne.Mb]=$e}else if(280>$e){if($e=be($e-256,re),jt=Oe(Fe.G[4],Fe.H[4],re),ie(re),jt=ke(R,jt=be(jt,re)),re.h)break;if(je-M<jt||H-je<$e)break e;for(pt=0;pt<$e;++pt)w[je+pt]=w[je+pt-jt];for(je+=$e,ee+=$e;ee>=R;)ee-=R,++Q,K!=null&&Q<=G&&!(Q%16)&&K(b,Q);if(t(je<=H),ee&Le&&(Fe=lt(pe,ee,Q)),Ne!=null)for(;se<je;)$e=w[se++],Ne.X[(506832829*$e&4294967295)>>>Ne.Mb]=$e}else{if(!($e<we))break e;for(Ge=$e-280,t(Ne!=null);se<je;)$e=w[se++],Ne.X[(506832829*$e&4294967295)>>>Ne.Mb]=$e;$e=je,t(!(Ge>>>(jt=Ne).Xa)),w[$e]=jt.X[Ge],Ge=!0}Ge||t(re.h==te(re))}if(b.Pb&&re.h&&je<H)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&Ae(b.s.vb,b.s.Wa);else{if(re.h)break e;K!=null&&K(b,Q>G?G:Q),b.a=0,b.$=je-M}return 1}return b.a=3,0}function Ft(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var w=b.Wa;w!=null&&(w.X=null),b.vb=null,t(b!=null)}function rr(){var b=new Ut;return b==null?null:(b.a=0,b.xb=k4,jn("Predictor","VP8LPredictors"),jn("Predictor","VP8LPredictors_C"),jn("PredictorAdd","VP8LPredictorsAdd"),jn("PredictorAdd","VP8LPredictorsAdd_C"),Lr=it,Wp=Et,Gp=Yn,Sc=Pt,kc=Bt,Cc=Vt,au=Mn,E.VP8LMapColor32b=ko,E.VP8LMapColor8b=Vp,b)}function dn(b,w,M,R,H){var G=1,K=[b],Q=[w],ee=R.m,re=R.s,pe=null,je=0;e:for(;;){if(M)for(;G&&q(ee,1);){var se=K,me=Q,we=R,Te=1,Ne=we.m,Le=we.gc[we.ab],Fe=q(Ne,2);if(we.Oc&1<<Fe)G=0;else{switch(we.Oc|=1<<Fe,Le.hc=Fe,Le.Ea=se[0],Le.nc=me[0],Le.K=[null],++we.ab,t(4>=we.ab),Fe){case 0:case 1:Le.b=q(Ne,3)+2,Te=dn(_e(Le.Ea,Le.b),_e(Le.nc,Le.b),0,we,Le.K),Le.K=Le.K[0];break;case 3:var Ge,$e=q(Ne,8)+1,jt=16<$e?0:4<$e?1:2<$e?2:3;if(se[0]=_e(Le.Ea,jt),Le.b=jt,Ge=Te=dn($e,1,0,we,Le.K)){var pt,Zt=$e,vt=Le,gn=1<<(8>>vt.b),us=a(gn);if(us==null)Ge=0;else{var en=vt.K[0],wt=vt.w;for(us[0]=vt.K[0][0],pt=1;pt<1*Zt;++pt)us[pt]=ne(en[wt+pt],us[pt-1]);for(;pt<4*gn;++pt)us[pt]=0;vt.K[0]=null,vt.K[0]=us,Ge=1}}Te=Ge;break;case 2:break;default:t(0)}G=Te}}if(K=K[0],Q=Q[0],G&&q(ee,1)&&!(G=1<=(je=q(ee,4))&&11>=je)){R.a=3;break e}var tt;if(tt=G)t:{var Or,Wt,yn,sr=R,Ls=K,aa=Q,Nr=je,Ys=M,ia=sr.m,fs=sr.s,wn=[null],Ln=1,jr=0,Rn=Q7[Nr];n:for(;;){if(Ys&&q(ia,1)){var Rs=q(ia,3)+2,Qi=_e(Ls,Rs),Pr=_e(aa,Rs),va=Qi*Pr;if(!dn(Qi,Pr,0,sr,wn))break n;for(wn=wn[0],fs.xc=Rs,Or=0;Or<va;++Or){var Kn=wn[Or]>>8&65535;wn[Or]=Kn,Kn>=Ln&&(Ln=Kn+1)}}if(ia.h)break n;for(Wt=0;5>Wt;++Wt){var hs=j4[Wt];!Wt&&0<Nr&&(hs+=1<<Nr),jr<hs&&(jr=hs)}var Wa=o(Ln*Rn,F),oa=Ln,Ga=o(oa,W);if(Ga==null)var Ka=null;else t(65536>=oa),Ka=Ga;var wa=a(jr);if(Ka==null||wa==null||Wa==null){sr.a=1;break n}var Ja=Wa;for(Or=yn=0;Or<Ln;++Or){var er=Ka[Or],Xa=er.G,Zi=er.H,ou=0,gl=1,Os=0;for(Wt=0;5>Wt;++Wt){hs=j4[Wt],Xa[Wt]=Ja,Zi[Wt]=yn,!Wt&&0<Nr&&(hs+=1<<Nr);s:{var Kx,G1=hs,Jx=sr,Zp=wa,bI=Ja,vI=yn,K1=0,Ec=Jx.m,wI=q(Ec,1);if(s(Zp,0,0,G1),wI){var NI=q(Ec,1)+1,jI=q(Ec,1),L4=q(Ec,jI==0?1:8);Zp[L4]=1,NI==2&&(Zp[L4=q(Ec,8)]=1);var Xx=1}else{var R4=a(19),O4=q(Ec,4)+4;if(19<O4){Jx.a=3;var Qx=0;break s}for(Kx=0;Kx<O4;++Kx)R4[J7[Kx]]=q(Ec,3);var J1=void 0,em=void 0,P4=Jx,SI=R4,Zx=G1,I4=Zp,X1=0,_c=P4.m,F4=8,z4=o(128,F);r:for(;O(z4,0,7,SI,19);){if(q(_c,1)){var kI=2+2*q(_c,3);if((J1=2+q(_c,kI))>Zx)break r}else J1=Zx;for(em=0;em<Zx&&J1--;){ie(_c);var B4=z4[0+(127&J(_c))];Z(_c,_c.u+B4.g);var Rf=B4.value;if(16>Rf)I4[em++]=Rf,Rf!=0&&(F4=Rf);else{var CI=Rf==16,H4=Rf-16,AI=G7[H4],U4=q(_c,W7[H4])+AI;if(em+U4>Zx)break r;for(var MI=CI?F4:0;0<U4--;)I4[em++]=MI}}X1=1;break r}X1||(P4.a=3),Xx=X1}(Xx=Xx&&!Ec.h)&&(K1=O(bI,vI,8,Zp,G1)),Xx&&K1!=0?Qx=K1:(Jx.a=3,Qx=0)}if(Qx==0)break n;if(gl&&K7[Wt]==1&&(gl=Ja[yn].g==0),ou+=Ja[yn].g,yn+=Qx,3>=Wt){var tm,Q1=wa[0];for(tm=1;tm<hs;++tm)wa[tm]>Q1&&(Q1=wa[tm]);Os+=Q1}}if(er.nd=gl,er.Qb=0,gl&&(er.qb=(Xa[3][Zi[3]+0].value<<24|Xa[1][Zi[1]+0].value<<16|Xa[2][Zi[2]+0].value)>>>0,ou==0&&256>Xa[0][Zi[0]+0].value&&(er.Qb=1,er.qb+=Xa[0][Zi[0]+0].value<<8)),er.jc=!er.Qb&&6>Os,er.jc){var e0,xl=er;for(e0=0;e0<su;++e0){var Tc=e0,Lc=xl.pd[Tc],t0=xl.G[0][xl.H[0]+Tc];256<=t0.value?(Lc.g=t0.g+256,Lc.value=t0.value):(Lc.g=0,Lc.value=0,Tc>>=Je(t0,8,Lc),Tc>>=Je(xl.G[1][xl.H[1]+Tc],16,Lc),Tc>>=Je(xl.G[2][xl.H[2]+Tc],0,Lc),Je(xl.G[3][xl.H[3]+Tc],24,Lc))}}}fs.vc=wn,fs.Wb=Ln,fs.Ya=Ka,fs.yc=Wa,tt=1;break t}tt=0}if(!(G=tt)){R.a=3;break e}if(0<je){if(re.ua=1<<je,!V(re.Wa,je)){R.a=1,G=0;break e}}else re.ua=0;var Z1=R,$4=K,DI=Q,e2=Z1.s,t2=e2.xc;if(Z1.c=$4,Z1.i=DI,e2.md=_e($4,t2),e2.wc=t2==0?-1:(1<<t2)-1,M){R.xb=iI;break e}if((pe=a(K*Q))==null){R.a=1,G=0;break e}G=(G=_t(R,pe,0,K,Q,Q,null))&&!ee.h;break e}return G?(H!=null?H[0]=pe:(t(pe==null),t(M)),R.$=0,M||Ft(re)):Ft(re),G}function rn(b,w){var M=b.c*b.i,R=M+w+16*w;return t(b.c<=w),b.V=a(R),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+M+w,1)}function Tn(b,w){var M=b.C,R=w-M,H=b.V,G=b.Ba+b.c*M;for(t(w<=b.l.o);0<R;){var K=16<R?16:R,Q=b.l.ma,ee=b.l.width,re=ee*K,pe=Q.ca,je=Q.tb+ee*M,se=b.Ta,me=b.Ua;Mt(b,K,H,G),m4(se,me,pe,je,re),st(Q,M,M+K,pe,je,ee),R-=K,H+=K*b.c,M+=K}t(M==w),b.C=b.Ma=w}function Ha(){this.ub=this.yd=this.td=this.Rb=0}function wi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ua(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Vs(){this.Yb=function(){var b=[];return function w(M,R,H){for(var G=H[R],K=0;K<G&&(M.push(H.length>R+1?[]:0),!(H.length<R+1));K++)w(M[K],R+1,H)}(b,0,[3,11]),b}()}function yc(){this.jb=a(3),this.Wc=l([4,8],Vs),this.Xc=l([4,17],Vs)}function vo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Gr(){this.ld=this.La=this.dd=this.tc=0}function wo(){this.Na=this.la=0}function nl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ln(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Wn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Gr),this.Y=0,this.ya=Array(new ln),this.aa=0,this.l=new $a}function Gi(){this.y=a(16),this.f=a(8),this.ea=a(8)}function No(){this.cb=this.a=0,this.sc="",this.m=new _,this.Od=new Ha,this.Kc=new wi,this.ed=new vo,this.Qa=new Ua,this.Ic=this.$c=this.Aa=0,this.D=new Wn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,_),this.ia=0,this.pb=o(4,nl),this.Pa=new yc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Gi),this.Hd=0,this.rb=Array(new wo),this.sb=0,this.wa=Array(new Gr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ln),this.L=this.aa=0,this.gd=l([4,2],Gr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Sn(b,w){return 0>b?0:b>w?w:b}function $a(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function kf(){var b=new No;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Xp||(Xp=Cf)),b}function wr(b,w,M){return b.a==0&&(b.a=w,b.sc=M,b.cb=0),0}function Cx(b,w,M){return 3<=M&&b[w+0]==157&&b[w+1]==1&&b[w+2]==42}function jo(b,w){if(b==null)return 0;if(b.a=0,b.sc="OK",w==null)return wr(b,2,"null VP8Io passed to VP8GetHeaders()");var M=w.data,R=w.w,H=w.ha;if(4>H)return wr(b,7,"Truncated header.");var G=M[R+0]|M[R+1]<<8|M[R+2]<<16,K=b.Od;if(K.Rb=!(1&G),K.td=G>>1&7,K.yd=G>>4&1,K.ub=G>>5,3<K.td)return wr(b,3,"Incorrect keyframe parameters.");if(!K.yd)return wr(b,4,"Frame not displayable.");R+=3,H-=3;var Q=b.Kc;if(K.Rb){if(7>H)return wr(b,7,"cannot parse picture header");if(!Cx(M,R,H))return wr(b,3,"Bad code word");Q.c=16383&(M[R+4]<<8|M[R+3]),Q.Td=M[R+4]>>6,Q.i=16383&(M[R+6]<<8|M[R+5]),Q.Ud=M[R+6]>>6,R+=7,H-=7,b.za=Q.c+15>>4,b.Ub=Q.i+15>>4,w.width=Q.c,w.height=Q.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,s((G=b.Pa).jb,0,255,G.jb.length),t((G=b.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,s(G.Zb,0,0,G.Zb.length),s(G.Lb,0,0,G.Lb)}if(K.ub>H)return wr(b,7,"bad partition length");X(G=b.m,M,R,K.ub),R+=K.ub,H-=K.ub,K.Rb&&(Q.Ld=ye(G),Q.Kd=ye(G)),Q=b.Qa;var ee,re=b.Pa;if(t(G!=null),t(Q!=null),Q.Cb=ye(G),Q.Cb){if(Q.Bb=ye(G),ye(G)){for(Q.Fb=ye(G),ee=0;4>ee;++ee)Q.Zb[ee]=ye(G)?z(G,7):0;for(ee=0;4>ee;++ee)Q.Lb[ee]=ye(G)?z(G,6):0}if(Q.Bb)for(ee=0;3>ee;++ee)re.jb[ee]=ye(G)?P(G,8):255}else Q.Bb=0;if(G.Ka)return wr(b,3,"cannot parse segment header");if((Q=b.ed).zd=ye(G),Q.Tb=P(G,6),Q.wb=P(G,3),Q.Pc=ye(G),Q.Pc&&ye(G)){for(re=0;4>re;++re)ye(G)&&(Q.vd[re]=z(G,6));for(re=0;4>re;++re)ye(G)&&(Q.od[re]=z(G,6))}if(b.L=Q.Tb==0?0:Q.zd?1:2,G.Ka)return wr(b,3,"cannot parse filter header");var pe=H;if(H=ee=R,R=ee+pe,Q=pe,b.Xb=(1<<P(b.m,2))-1,pe<3*(re=b.Xb))M=7;else{for(ee+=3*re,Q-=3*re,pe=0;pe<re;++pe){var je=M[H+0]|M[H+1]<<8|M[H+2]<<16;je>Q&&(je=Q),X(b.Jc[+pe],M,ee,je),ee+=je,Q-=je,H+=3}X(b.Jc[+re],M,ee,Q),M=ee<R?0:5}if(M!=0)return wr(b,M,"cannot parse partitions");for(M=P(ee=b.m,7),H=ye(ee)?z(ee,4):0,R=ye(ee)?z(ee,4):0,Q=ye(ee)?z(ee,4):0,re=ye(ee)?z(ee,4):0,ee=ye(ee)?z(ee,4):0,pe=b.Qa,je=0;4>je;++je){if(pe.Cb){var se=pe.Zb[je];pe.Fb||(se+=M)}else{if(0<je){b.pb[je]=b.pb[0];continue}se=M}var me=b.pb[je];me.Sc[0]=V1[Sn(se+H,127)],me.Sc[1]=Y1[Sn(se+0,127)],me.Eb[0]=2*V1[Sn(se+R,127)],me.Eb[1]=101581*Y1[Sn(se+Q,127)]>>16,8>me.Eb[1]&&(me.Eb[1]=8),me.Qc[0]=V1[Sn(se+re,117)],me.Qc[1]=Y1[Sn(se+ee,127)],me.lc=se+ee}if(!K.Rb)return wr(b,4,"Not a key frame.");for(ye(G),K=b.Pa,M=0;4>M;++M){for(H=0;8>H;++H)for(R=0;3>R;++R)for(Q=0;11>Q;++Q)re=Se(G,sI[M][H][R][Q])?P(G,8):nI[M][H][R][Q],K.Wc[M][H].Yb[R][Q]=re;for(H=0;17>H;++H)K.Xc[M][H]=K.Wc[M][aI[H]]}return b.kc=ye(G),b.kc&&(b.Bd=P(G,8)),b.cb=1}function Cf(b,w,M,R,H,G,K){var Q=w[H].Yb[M];for(M=0;16>H;++H){if(!Se(b,Q[M+0]))return H;for(;!Se(b,Q[M+1]);)if(Q=w[++H].Yb[0],M=0,H==16)return 16;var ee=w[H+1].Yb;if(Se(b,Q[M+2])){var re=b,pe=0;if(Se(re,(se=Q)[(je=M)+3]))if(Se(re,se[je+6])){for(Q=0,je=2*(pe=Se(re,se[je+8]))+(se=Se(re,se[je+9+pe])),pe=0,se=eI[je];se[Q];++Q)pe+=pe+Se(re,se[Q]);pe+=3+(8<<je)}else Se(re,se[je+7])?(pe=7+2*Se(re,165),pe+=Se(re,145)):pe=5+Se(re,159);else pe=Se(re,se[je+4])?3+Se(re,se[je+5]):2;Q=ee[2]}else pe=1,Q=ee[1];ee=K+tI[H],0>(re=b).b&&he(re);var je,se=re.b,me=(je=re.Ca>>1)-(re.I>>se)>>31;--re.b,re.Ca+=me,re.Ca|=1,re.I-=(je+1&me)<<se,G[ee]=((pe^me)-me)*R[(0<H)+0]}return 16}function Ax(b){var w=b.rb[b.sb-1];w.la=0,w.Na=0,s(b.zc,0,0,b.zc.length),b.ja=0}function Ni(b,w,M,R,H){H=b[w+M+32*R]+(H>>3),b[w+M+32*R]=-256&H?0>H?0:255:H}function ls(b,w,M,R,H,G){Ni(b,w,0,M,R+H),Ni(b,w,1,M,R+G),Ni(b,w,2,M,R-G),Ni(b,w,3,M,R-H)}function rl(b){return(20091*b>>16)+b}function Mx(b,w,M,R){var H,G=0,K=a(16);for(H=0;4>H;++H){var Q=b[w+0]+b[w+8],ee=b[w+0]-b[w+8],re=(35468*b[w+4]>>16)-rl(b[w+12]),pe=rl(b[w+4])+(35468*b[w+12]>>16);K[G+0]=Q+pe,K[G+1]=ee+re,K[G+2]=ee-re,K[G+3]=Q-pe,G+=4,w++}for(H=G=0;4>H;++H)Q=(b=K[G+0]+4)+K[G+8],ee=b-K[G+8],re=(35468*K[G+4]>>16)-rl(K[G+12]),Ni(M,R,0,0,Q+(pe=rl(K[G+4])+(35468*K[G+12]>>16))),Ni(M,R,1,0,ee+re),Ni(M,R,2,0,ee-re),Ni(M,R,3,0,Q-pe),G++,R+=32}function C1(b,w,M,R){var H=b[w+0]+4,G=35468*b[w+4]>>16,K=rl(b[w+4]),Q=35468*b[w+1]>>16;ls(M,R,0,H+K,b=rl(b[w+1]),Q),ls(M,R,1,H+G,b,Q),ls(M,R,2,H-G,b,Q),ls(M,R,3,H-K,b,Q)}function A1(b,w,M,R,H){Mx(b,w,M,R),H&&Mx(b,w+16,M,R+4)}function So(b,w,M,R){iu(b,w+0,M,R,1),iu(b,w+32,M,R+128,1)}function Dx(b,w,M,R){var H;for(b=b[w+0]+4,H=0;4>H;++H)for(w=0;4>w;++w)Ni(M,R,w,H,b)}function Ex(b,w,M,R){b[w+0]&&Dn(b,w+0,M,R),b[w+16]&&Dn(b,w+16,M,R+4),b[w+32]&&Dn(b,w+32,M,R+128),b[w+48]&&Dn(b,w+48,M,R+128+4)}function Af(b,w,M,R){var H,G=a(16);for(H=0;4>H;++H){var K=b[w+0+H]+b[w+12+H],Q=b[w+4+H]+b[w+8+H],ee=b[w+4+H]-b[w+8+H],re=b[w+0+H]-b[w+12+H];G[0+H]=K+Q,G[8+H]=K-Q,G[4+H]=re+ee,G[12+H]=re-ee}for(H=0;4>H;++H)K=(b=G[0+4*H]+3)+G[3+4*H],Q=G[1+4*H]+G[2+4*H],ee=G[1+4*H]-G[2+4*H],re=b-G[3+4*H],M[R+0]=K+Q>>3,M[R+16]=re+ee>>3,M[R+32]=K-Q>>3,M[R+48]=re-ee>>3,R+=64}function Gd(b,w,M){var R,H=w-32,G=Ya,K=255-b[H-1];for(R=0;R<M;++R){var Q,ee=G,re=K+b[w-1];for(Q=0;Q<M;++Q)b[w+Q]=ee[re+b[H+Q]];w+=32}}function M1(b,w){Gd(b,w,4)}function D1(b,w){Gd(b,w,8)}function E1(b,w){Gd(b,w,16)}function _p(b,w){var M;for(M=0;16>M;++M)r(b,w+32*M,b,w-32,16)}function _x(b,w){var M;for(M=16;0<M;--M)s(b,w,b[w-1],16),w+=32}function Ki(b,w,M){var R;for(R=0;16>R;++R)s(w,M+32*R,b,16)}function _1(b,w){var M,R=16;for(M=0;16>M;++M)R+=b[w-1+32*M]+b[w+M-32];Ki(R>>5,b,w)}function Kd(b,w){var M,R=8;for(M=0;16>M;++M)R+=b[w-1+32*M];Ki(R>>4,b,w)}function Tp(b,w){var M,R=8;for(M=0;16>M;++M)R+=b[w+M-32];Ki(R>>4,b,w)}function T1(b,w){Ki(128,b,w)}function qt(b,w,M){return b+2*w+M+2>>2}function L1(b,w){var M,R=w-32;for(R=new Uint8Array([qt(b[R-1],b[R+0],b[R+1]),qt(b[R+0],b[R+1],b[R+2]),qt(b[R+1],b[R+2],b[R+3]),qt(b[R+2],b[R+3],b[R+4])]),M=0;4>M;++M)r(b,w+32*M,R,0,R.length)}function R1(b,w){var M=b[w-1],R=b[w-1+32],H=b[w-1+64],G=b[w-1+96];Ee(b,w+0,16843009*qt(b[w-1-32],M,R)),Ee(b,w+32,16843009*qt(M,R,H)),Ee(b,w+64,16843009*qt(R,H,G)),Ee(b,w+96,16843009*qt(H,G,G))}function O1(b,w){var M,R=4;for(M=0;4>M;++M)R+=b[w+M-32]+b[w-1+32*M];for(R>>=3,M=0;4>M;++M)s(b,w+32*M,R,4)}function sl(b,w){var M=b[w-1+0],R=b[w-1+32],H=b[w-1+64],G=b[w-1-32],K=b[w+0-32],Q=b[w+1-32],ee=b[w+2-32],re=b[w+3-32];b[w+0+96]=qt(R,H,b[w-1+96]),b[w+1+96]=b[w+0+64]=qt(M,R,H),b[w+2+96]=b[w+1+64]=b[w+0+32]=qt(G,M,R),b[w+3+96]=b[w+2+64]=b[w+1+32]=b[w+0+0]=qt(K,G,M),b[w+3+64]=b[w+2+32]=b[w+1+0]=qt(Q,K,G),b[w+3+32]=b[w+2+0]=qt(ee,Q,K),b[w+3+0]=qt(re,ee,Q)}function al(b,w){var M=b[w+1-32],R=b[w+2-32],H=b[w+3-32],G=b[w+4-32],K=b[w+5-32],Q=b[w+6-32],ee=b[w+7-32];b[w+0+0]=qt(b[w+0-32],M,R),b[w+1+0]=b[w+0+32]=qt(M,R,H),b[w+2+0]=b[w+1+32]=b[w+0+64]=qt(R,H,G),b[w+3+0]=b[w+2+32]=b[w+1+64]=b[w+0+96]=qt(H,G,K),b[w+3+32]=b[w+2+64]=b[w+1+96]=qt(G,K,Q),b[w+3+64]=b[w+2+96]=qt(K,Q,ee),b[w+3+96]=qt(Q,ee,ee)}function P1(b,w){var M=b[w-1+0],R=b[w-1+32],H=b[w-1+64],G=b[w-1-32],K=b[w+0-32],Q=b[w+1-32],ee=b[w+2-32],re=b[w+3-32];b[w+0+0]=b[w+1+64]=G+K+1>>1,b[w+1+0]=b[w+2+64]=K+Q+1>>1,b[w+2+0]=b[w+3+64]=Q+ee+1>>1,b[w+3+0]=ee+re+1>>1,b[w+0+96]=qt(H,R,M),b[w+0+64]=qt(R,M,G),b[w+0+32]=b[w+1+96]=qt(M,G,K),b[w+1+32]=b[w+2+96]=qt(G,K,Q),b[w+2+32]=b[w+3+96]=qt(K,Q,ee),b[w+3+32]=qt(Q,ee,re)}function I1(b,w){var M=b[w+0-32],R=b[w+1-32],H=b[w+2-32],G=b[w+3-32],K=b[w+4-32],Q=b[w+5-32],ee=b[w+6-32],re=b[w+7-32];b[w+0+0]=M+R+1>>1,b[w+1+0]=b[w+0+64]=R+H+1>>1,b[w+2+0]=b[w+1+64]=H+G+1>>1,b[w+3+0]=b[w+2+64]=G+K+1>>1,b[w+0+32]=qt(M,R,H),b[w+1+32]=b[w+0+96]=qt(R,H,G),b[w+2+32]=b[w+1+96]=qt(H,G,K),b[w+3+32]=b[w+2+96]=qt(G,K,Q),b[w+3+64]=qt(K,Q,ee),b[w+3+96]=qt(Q,ee,re)}function Mf(b,w){var M=b[w-1+0],R=b[w-1+32],H=b[w-1+64],G=b[w-1+96];b[w+0+0]=M+R+1>>1,b[w+2+0]=b[w+0+32]=R+H+1>>1,b[w+2+32]=b[w+0+64]=H+G+1>>1,b[w+1+0]=qt(M,R,H),b[w+3+0]=b[w+1+32]=qt(R,H,G),b[w+3+32]=b[w+1+64]=qt(H,G,G),b[w+3+64]=b[w+2+64]=b[w+0+96]=b[w+1+96]=b[w+2+96]=b[w+3+96]=G}function Lp(b,w){var M=b[w-1+0],R=b[w-1+32],H=b[w-1+64],G=b[w-1+96],K=b[w-1-32],Q=b[w+0-32],ee=b[w+1-32],re=b[w+2-32];b[w+0+0]=b[w+2+32]=M+K+1>>1,b[w+0+32]=b[w+2+64]=R+M+1>>1,b[w+0+64]=b[w+2+96]=H+R+1>>1,b[w+0+96]=G+H+1>>1,b[w+3+0]=qt(Q,ee,re),b[w+2+0]=qt(K,Q,ee),b[w+1+0]=b[w+3+32]=qt(M,K,Q),b[w+1+32]=b[w+3+64]=qt(R,M,K),b[w+1+64]=b[w+3+96]=qt(H,R,M),b[w+1+96]=qt(G,H,R)}function Jd(b,w){var M;for(M=0;8>M;++M)r(b,w+32*M,b,w-32,8)}function F1(b,w){var M;for(M=0;8>M;++M)s(b,w,b[w-1],8),w+=32}function il(b,w,M){var R;for(R=0;8>R;++R)s(w,M+32*R,b,8)}function z1(b,w){var M,R=8;for(M=0;8>M;++M)R+=b[w+M-32]+b[w-1+32*M];il(R>>4,b,w)}function Rp(b,w){var M,R=4;for(M=0;8>M;++M)R+=b[w+M-32];il(R>>3,b,w)}function Op(b,w){var M,R=4;for(M=0;8>M;++M)R+=b[w-1+32*M];il(R>>3,b,w)}function Tx(b,w){il(128,b,w)}function ol(b,w,M){var R=b[w-M],H=b[w+0],G=3*(H-R)+B1[1020+b[w-2*M]-b[w+M]],K=Bx[112+(G+4>>3)];b[w-M]=Ya[255+R+Bx[112+(G+3>>3)]],b[w+0]=Ya[255+H-K]}function Pp(b,w,M,R){var H=b[w+0],G=b[w+M];return ki[255+b[w-2*M]-b[w-M]]>R||ki[255+G-H]>R}function Df(b,w,M,R){return 4*ki[255+b[w-M]-b[w+0]]+ki[255+b[w-2*M]-b[w+M]]<=R}function Ip(b,w,M,R,H){var G=b[w-3*M],K=b[w-2*M],Q=b[w-M],ee=b[w+0],re=b[w+M],pe=b[w+2*M],je=b[w+3*M];return 4*ki[255+Q-ee]+ki[255+K-re]>R?0:ki[255+b[w-4*M]-G]<=H&&ki[255+G-K]<=H&&ki[255+K-Q]<=H&&ki[255+je-pe]<=H&&ki[255+pe-re]<=H&&ki[255+re-ee]<=H}function Xd(b,w,M,R){var H=2*R+1;for(R=0;16>R;++R)Df(b,w+R,M,H)&&ol(b,w+R,M)}function Fp(b,w,M,R){var H=2*R+1;for(R=0;16>R;++R)Df(b,w+R*M,1,H)&&ol(b,w+R*M,1)}function Lx(b,w,M,R){var H;for(H=3;0<H;--H)Xd(b,w+=4*M,M,R)}function Rx(b,w,M,R){var H;for(H=3;0<H;--H)Fp(b,w+=4,M,R)}function ll(b,w,M,R,H,G,K,Q){for(G=2*G+1;0<H--;){if(Ip(b,w,M,G,K))if(Pp(b,w,M,Q))ol(b,w,M);else{var ee=b,re=w,pe=M,je=ee[re-2*pe],se=ee[re-pe],me=ee[re+0],we=ee[re+pe],Te=ee[re+2*pe],Ne=27*(Fe=B1[1020+3*(me-se)+B1[1020+je-we]])+63>>7,Le=18*Fe+63>>7,Fe=9*Fe+63>>7;ee[re-3*pe]=Ya[255+ee[re-3*pe]+Fe],ee[re-2*pe]=Ya[255+je+Le],ee[re-pe]=Ya[255+se+Ne],ee[re+0]=Ya[255+me-Ne],ee[re+pe]=Ya[255+we-Le],ee[re+2*pe]=Ya[255+Te-Fe]}w+=R}}function cl(b,w,M,R,H,G,K,Q){for(G=2*G+1;0<H--;){if(Ip(b,w,M,G,K))if(Pp(b,w,M,Q))ol(b,w,M);else{var ee=b,re=w,pe=M,je=ee[re-pe],se=ee[re+0],me=ee[re+pe],we=Bx[112+(4+(Te=3*(se-je))>>3)],Te=Bx[112+(Te+3>>3)],Ne=we+1>>1;ee[re-2*pe]=Ya[255+ee[re-2*pe]+Ne],ee[re-pe]=Ya[255+je+Te],ee[re+0]=Ya[255+se-we],ee[re+pe]=Ya[255+me-Ne]}w+=R}}function Ox(b,w,M,R,H,G){ll(b,w,M,1,16,R,H,G)}function Qd(b,w,M,R,H,G){ll(b,w,1,M,16,R,H,G)}function Px(b,w,M,R,H,G){var K;for(K=3;0<K;--K)cl(b,w+=4*M,M,1,16,R,H,G)}function k(b,w,M,R,H,G){var K;for(K=3;0<K;--K)cl(b,w+=4,1,M,16,R,H,G)}function B(b,w,M,R,H,G,K,Q){ll(b,w,H,1,8,G,K,Q),ll(M,R,H,1,8,G,K,Q)}function ae(b,w,M,R,H,G,K,Q){ll(b,w,1,H,8,G,K,Q),ll(M,R,1,H,8,G,K,Q)}function fe(b,w,M,R,H,G,K,Q){cl(b,w+4*H,H,1,8,G,K,Q),cl(M,R+4*H,H,1,8,G,K,Q)}function ve(b,w,M,R,H,G,K,Q){cl(b,w+4,1,H,8,G,K,Q),cl(M,R+4,1,H,8,G,K,Q)}function Ie(){this.ba=new Jt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new bn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ue(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function bt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Nt(){this.ua=0,this.Wa=new Ve,this.vb=new Ve,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new W,this.yc=new F}function Ut(){this.xb=this.a=0,this.l=new $a,this.ca=new Jt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $,this.Pb=0,this.wd=new $,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Nt,this.ab=0,this.gc=o(4,bt),this.Oc=0}function Xt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new $a,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vn(b,w,M,R,H,G,K){for(b=b==null?0:b[w+0],w=0;w<K;++w)H[G+w]=b+M[R+w]&255,b=H[G+w]}function mr(b,w,M,R,H,G,K){var Q;if(b==null)vn(null,null,M,R,H,G,K);else for(Q=0;Q<K;++Q)H[G+Q]=b[w+Q]+M[R+Q]&255}function Kr(b,w,M,R,H,G,K){if(b==null)vn(null,null,M,R,H,G,K);else{var Q,ee=b[w+0],re=ee,pe=ee;for(Q=0;Q<K;++Q)re=pe+(ee=b[w+Q])-re,pe=M[R+Q]+(-256&re?0>re?0:255:re)&255,re=ee,H[G+Q]=pe}}function Zn(b,w,M,R){var H=w.width,G=w.o;if(t(b!=null&&w!=null),0>M||0>=R||M+R>G)return null;if(!b.Cc){if(b.ga==null){var K;if(b.ga=new Xt,(K=b.ga==null)||(K=w.width*w.o,t(b.Gb.length==0),b.Gb=a(K),b.Uc=0,b.Gb==null?K=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,K=1),K=!K),!K){K=b.ga;var Q=b.Fa,ee=b.P,re=b.qc,pe=b.mb,je=b.nb,se=ee+1,me=re-1,we=K.l;if(t(Q!=null&&pe!=null&&w!=null),Dc[0]=null,Dc[1]=vn,Dc[2]=mr,Dc[3]=Kr,K.ca=pe,K.tb=je,K.c=w.width,K.i=w.height,t(0<K.c&&0<K.i),1>=re)w=0;else if(K.$a=3&Q[ee+0],K.Z=Q[ee+0]>>2&3,K.Lc=Q[ee+0]>>4&3,ee=Q[ee+0]>>6&3,0>K.$a||1<K.$a||4<=K.Z||1<K.Lc||ee)w=0;else if(we.put=Lt,we.ac=ra,we.bc=Wi,we.ma=K,we.width=w.width,we.height=w.height,we.Da=w.Da,we.v=w.v,we.va=w.va,we.j=w.j,we.o=w.o,K.$a)e:{t(K.$a==1),w=rr();t:for(;;){if(w==null){w=0;break e}if(t(K!=null),K.mc=w,w.c=K.c,w.i=K.i,w.l=K.l,w.l.ma=K,w.l.width=K.c,w.l.height=K.i,w.a=0,oe(w.m,Q,se,me),!dn(K.c,K.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&ct(w.s)?(K.ic=1,Q=w.c*w.i,w.Ta=null,w.Ua=0,w.V=a(Q),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(K.ic=0,w=rn(w,K.c)),!w))break t;w=1;break e}K.mc=null,w=0}else w=me>=K.c*K.i;K=!w}if(K)return null;b.ga.Lc!=1?b.Ga=0:R=G-M}t(b.ga!=null),t(M+R<=G);e:{if(w=(Q=b.ga).c,G=Q.l.o,Q.$a==0){if(se=b.rc,me=b.Vc,we=b.Fa,ee=b.P+1+M*w,re=b.mb,pe=b.nb+M*w,t(ee<=b.P+b.qc),Q.Z!=0)for(t(Dc[Q.Z]!=null),K=0;K<R;++K)Dc[Q.Z](se,me,we,ee,re,pe,w),se=re,me=pe,pe+=w,ee+=w;else for(K=0;K<R;++K)r(re,pe,we,ee,w),se=re,me=pe,pe+=w,ee+=w;b.rc=se,b.Vc=me}else{if(t(Q.mc!=null),w=M+R,t((K=Q.mc)!=null),t(w<=K.i),K.C>=w)w=1;else if(Q.ic||Ji(),Q.ic){Q=K.V,se=K.Ba,me=K.c;var Te=K.i,Ne=(we=1,ee=K.$/me,re=K.$%me,pe=K.m,je=K.s,K.$),Le=me*Te,Fe=me*w,Ge=je.wc,$e=Ne<Fe?lt(je,re,ee):null;t(Ne<=Le),t(w<=Te),t(ct(je));t:for(;;){for(;!pe.h&&Ne<Fe;){if(re&Ge||($e=lt(je,re,ee)),t($e!=null),ie(pe),256>(Te=Oe($e.G[0],$e.H[0],pe)))Q[se+Ne]=Te,++Ne,++re>=me&&(re=0,++ee<=w&&!(ee%16)&&ht(K,ee));else{if(!(280>Te)){we=0;break t}Te=be(Te-256,pe);var jt,pt=Oe($e.G[4],$e.H[4],pe);if(ie(pe),!(Ne>=(pt=ke(me,pt=be(pt,pe)))&&Le-Ne>=Te)){we=0;break t}for(jt=0;jt<Te;++jt)Q[se+Ne+jt]=Q[se+Ne+jt-pt];for(Ne+=Te,re+=Te;re>=me;)re-=me,++ee<=w&&!(ee%16)&&ht(K,ee);Ne<Fe&&re&Ge&&($e=lt(je,re,ee))}t(pe.h==te(pe))}ht(K,ee>w?w:ee);break t}!we||pe.h&&Ne<Le?(we=0,K.a=pe.h?5:3):K.$=Ne,w=we}else w=_t(K,K.V,K.Ba,K.c,K.i,w,Tn);if(!w){R=0;break e}}M+R>=G&&(b.Cc=1),R=1}if(!R)return null;if(b.Cc&&((R=b.ga)!=null&&(R.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+M*H}function cs(b,w,M,R,H,G){for(;0<H--;){var K,Q=b,ee=w+(M?1:0),re=b,pe=w+(M?0:3);for(K=0;K<R;++K){var je=re[pe+4*K];je!=255&&(je*=32897,Q[ee+4*K+0]=Q[ee+4*K+0]*je>>23,Q[ee+4*K+1]=Q[ee+4*K+1]*je>>23,Q[ee+4*K+2]=Q[ee+4*K+2]*je>>23)}w+=G}}function Jr(b,w,M,R,H){for(;0<R--;){var G;for(G=0;G<M;++G){var K=b[w+2*G+0],Q=15&(re=b[w+2*G+1]),ee=4369*Q,re=(240&re|re>>4)*ee>>16;b[w+2*G+0]=(240&K|K>>4)*ee>>16&240|(15&K|K<<4)*ee>>16>>4&15,b[w+2*G+1]=240&re|Q}w+=H}}function _s(b,w,M,R,H,G,K,Q){var ee,re,pe=255;for(re=0;re<H;++re){for(ee=0;ee<R;++ee){var je=b[w+ee];G[K+4*ee]=je,pe&=je}w+=M,K+=Q}return pe!=255}function dl(b,w,M,R,H){var G;for(G=0;G<H;++G)M[R+G]=b[w+G]>>8}function Ji(){Jp=cs,h4=Jr,p4=_s,m4=dl}function ul(b,w,M){E[b]=function(R,H,G,K,Q,ee,re,pe,je,se,me,we,Te,Ne,Le,Fe,Ge){var $e,jt=Ge-1>>1,pt=Q[ee+0]|re[pe+0]<<16,Zt=je[se+0]|me[we+0]<<16;t(R!=null);var vt=3*pt+Zt+131074>>2;for(w(R[H+0],255&vt,vt>>16,Te,Ne),G!=null&&(vt=3*Zt+pt+131074>>2,w(G[K+0],255&vt,vt>>16,Le,Fe)),$e=1;$e<=jt;++$e){var gn=Q[ee+$e]|re[pe+$e]<<16,us=je[se+$e]|me[we+$e]<<16,en=pt+gn+Zt+us+524296,wt=en+2*(gn+Zt)>>3;vt=wt+pt>>1,pt=(en=en+2*(pt+us)>>3)+gn>>1,w(R[H+2*$e-1],255&vt,vt>>16,Te,Ne+(2*$e-1)*M),w(R[H+2*$e-0],255&pt,pt>>16,Te,Ne+(2*$e-0)*M),G!=null&&(vt=en+Zt>>1,pt=wt+us>>1,w(G[K+2*$e-1],255&vt,vt>>16,Le,Fe+(2*$e-1)*M),w(G[K+2*$e+0],255&pt,pt>>16,Le,Fe+(2*$e+0)*M)),pt=gn,Zt=us}1&Ge||(vt=3*pt+Zt+131074>>2,w(R[H+Ge-1],255&vt,vt>>16,Te,Ne+(Ge-1)*M),G!=null&&(vt=3*Zt+pt+131074>>2,w(G[K+Ge-1],255&vt,vt>>16,Le,Fe+(Ge-1)*M)))}}function zp(){Ci[Hx]=oI,Ci[Ux]=C4,Ci[w4]=lI,Ci[$x]=A4,Ci[qx]=M4,Ci[H1]=D4,Ci[N4]=cI,Ci[U1]=C4,Ci[$1]=A4,Ci[Vx]=M4,Ci[q1]=D4}function Ef(b){return b&-16384?0>b?0:255:b>>dI}function bc(b,w){return Ef((19077*b>>8)+(26149*w>>8)-14234)}function Zd(b,w,M){return Ef((19077*b>>8)-(6419*w>>8)-(13320*M>>8)+8708)}function eu(b,w){return Ef((19077*b>>8)+(33050*w>>8)-17685)}function vc(b,w,M,R,H){R[H+0]=bc(b,M),R[H+1]=Zd(b,w,M),R[H+2]=eu(b,w)}function Ts(b,w,M,R,H){R[H+0]=eu(b,w),R[H+1]=Zd(b,w,M),R[H+2]=bc(b,M)}function tu(b,w,M,R,H){var G=Zd(b,w,M);w=G<<3&224|eu(b,w)>>3,R[H+0]=248&bc(b,M)|G>>5,R[H+1]=w}function nu(b,w,M,R,H){var G=240&eu(b,w)|15;R[H+0]=240&bc(b,M)|Zd(b,w,M)>>4,R[H+1]=G}function Bp(b,w,M,R,H){R[H+0]=255,vc(b,w,M,R,H+1)}function Hp(b,w,M,R,H){Ts(b,w,M,R,H),R[H+3]=255}function sa(b,w,M,R,H){vc(b,w,M,R,H),R[H+3]=255}function fl(b,w,M){E[b]=function(R,H,G,K,Q,ee,re,pe,je){for(var se=pe+(-2&je)*M;pe!=se;)w(R[H+0],G[K+0],Q[ee+0],re,pe),w(R[H+1],G[K+0],Q[ee+0],re,pe+M),H+=2,++K,++ee,pe+=2*M;1&je&&w(R[H+0],G[K+0],Q[ee+0],re,pe)}}function _f(b,w,M){return M==0?b==0?w==0?6:5:w==0?4:0:M}function Ix(b,w,M,R,H){switch(b>>>30){case 3:iu(w,M,R,H,0);break;case 2:Si(w,M,R,H);break;case 1:Dn(w,M,R,H)}}function ji(b,w){var M,R,H=w.M,G=w.Nb,K=b.oc,Q=b.pc+40,ee=b.oc,re=b.pc+584,pe=b.oc,je=b.pc+600;for(M=0;16>M;++M)K[Q+32*M-1]=129;for(M=0;8>M;++M)ee[re+32*M-1]=129,pe[je+32*M-1]=129;for(0<H?K[Q-1-32]=ee[re-1-32]=pe[je-1-32]=129:(s(K,Q-32-1,127,21),s(ee,re-32-1,127,9),s(pe,je-32-1,127,9)),R=0;R<b.za;++R){var se=w.ya[w.aa+R];if(0<R){for(M=-1;16>M;++M)r(K,Q+32*M-4,K,Q+32*M+12,4);for(M=-1;8>M;++M)r(ee,re+32*M-4,ee,re+32*M+4,4),r(pe,je+32*M-4,pe,je+32*M+4,4)}var me=b.Gd,we=b.Hd+R,Te=se.ad,Ne=se.Hc;if(0<H&&(r(K,Q-32,me[we].y,0,16),r(ee,re-32,me[we].f,0,8),r(pe,je-32,me[we].ea,0,8)),se.Za){var Le=K,Fe=Q-32+16;for(0<H&&(R>=b.za-1?s(Le,Fe,me[we].y[15],4):r(Le,Fe,me[we+1].y,0,4)),M=0;4>M;M++)Le[Fe+128+M]=Le[Fe+256+M]=Le[Fe+384+M]=Le[Fe+0+M];for(M=0;16>M;++M,Ne<<=2)Le=K,Fe=Q+_4[M],Xi[se.Ob[M]](Le,Fe),Ix(Ne,Te,16*+M,Le,Fe)}else if(Le=_f(R,H,se.Ob[0]),Mc[Le](K,Q),Ne!=0)for(M=0;16>M;++M,Ne<<=2)Ix(Ne,Te,16*+M,K,Q+_4[M]);for(M=se.Gc,Le=_f(R,H,se.Dd),ml[Le](ee,re),ml[Le](pe,je),Ne=Te,Le=ee,Fe=re,255&(se=0|M)&&(170&se?Ao(Ne,256,Le,Fe):Gn(Ne,256,Le,Fe)),se=pe,Ne=je,255&(M>>=8)&&(170&M?Ao(Te,320,se,Ne):Gn(Te,320,se,Ne)),H<b.Ub-1&&(r(me[we].y,0,K,Q+480,16),r(me[we].f,0,ee,re+224,8),r(me[we].ea,0,pe,je+224,8)),M=8*G*b.B,me=b.sa,we=b.ta+16*R+16*G*b.R,Te=b.qa,se=b.ra+8*R+M,Ne=b.Ha,Le=b.Ia+8*R+M,M=0;16>M;++M)r(me,we+M*b.R,K,Q+32*M,16);for(M=0;8>M;++M)r(Te,se+M*b.B,ee,re+32*M,8),r(Ne,Le+M*b.B,pe,je+32*M,8)}}function ru(b,w,M,R,H,G,K,Q,ee){var re=[0],pe=[0],je=0,se=ee!=null?ee.kd:0,me=ee??new Ue;if(b==null||12>M)return 7;me.data=b,me.w=w,me.ha=M,w=[w],M=[M],me.gb=[me.gb];e:{var we=w,Te=M,Ne=me.gb;if(t(b!=null),t(Te!=null),t(Ne!=null),Ne[0]=0,12<=Te[0]&&!n(b,we[0],"RIFF")){if(n(b,we[0]+8,"WEBP")){Ne=3;break e}var Le=We(b,we[0]+4);if(12>Le||4294967286<Le){Ne=3;break e}if(se&&Le>Te[0]-8){Ne=7;break e}Ne[0]=Le,we[0]+=12,Te[0]-=12}Ne=0}if(Ne!=0)return Ne;for(Le=0<me.gb[0],M=M[0];;){e:{var Fe=b;Te=w,Ne=M;var Ge=re,$e=pe,jt=we=[0];if((vt=je=[je])[0]=0,8>Ne[0])Ne=7;else{if(!n(Fe,Te[0],"VP8X")){if(We(Fe,Te[0]+4)!=10){Ne=3;break e}if(18>Ne[0]){Ne=7;break e}var pt=We(Fe,Te[0]+8),Zt=1+qe(Fe,Te[0]+12);if(2147483648<=Zt*(Fe=1+qe(Fe,Te[0]+15))){Ne=3;break e}jt!=null&&(jt[0]=pt),Ge!=null&&(Ge[0]=Zt),$e!=null&&($e[0]=Fe),Te[0]+=18,Ne[0]-=18,vt[0]=1}Ne=0}}if(je=je[0],we=we[0],Ne!=0)return Ne;if(Te=!!(2&we),!Le&&je)return 3;if(G!=null&&(G[0]=!!(16&we)),K!=null&&(K[0]=Te),Q!=null&&(Q[0]=0),K=re[0],we=pe[0],je&&Te&&ee==null){Ne=0;break}if(4>M){Ne=7;break}if(Le&&je||!Le&&!je&&!n(b,w[0],"ALPH")){M=[M],me.na=[me.na],me.P=[me.P],me.Sa=[me.Sa];e:{pt=b,Ne=w,Le=M;var vt=me.gb;Ge=me.na,$e=me.P,jt=me.Sa,Zt=22,t(pt!=null),t(Le!=null),Fe=Ne[0];var gn=Le[0];for(t(Ge!=null),t(jt!=null),Ge[0]=null,$e[0]=null,jt[0]=0;;){if(Ne[0]=Fe,Le[0]=gn,8>gn){Ne=7;break e}var us=We(pt,Fe+4);if(4294967286<us){Ne=3;break e}var en=8+us+1&-2;if(Zt+=en,0<vt&&Zt>vt){Ne=3;break e}if(!n(pt,Fe,"VP8 ")||!n(pt,Fe,"VP8L")){Ne=0;break e}if(gn[0]<en){Ne=7;break e}n(pt,Fe,"ALPH")||(Ge[0]=pt,$e[0]=Fe+8,jt[0]=us),Fe+=en,gn-=en}}if(M=M[0],me.na=me.na[0],me.P=me.P[0],me.Sa=me.Sa[0],Ne!=0)break}M=[M],me.Ja=[me.Ja],me.xa=[me.xa];e:if(vt=b,Ne=w,Le=M,Ge=me.gb[0],$e=me.Ja,jt=me.xa,pt=Ne[0],Fe=!n(vt,pt,"VP8 "),Zt=!n(vt,pt,"VP8L"),t(vt!=null),t(Le!=null),t($e!=null),t(jt!=null),8>Le[0])Ne=7;else{if(Fe||Zt){if(vt=We(vt,pt+4),12<=Ge&&vt>Ge-12){Ne=3;break e}if(se&&vt>Le[0]-8){Ne=7;break e}$e[0]=vt,Ne[0]+=8,Le[0]-=8,jt[0]=Zt}else jt[0]=5<=Le[0]&&vt[pt+0]==47&&!(vt[pt+4]>>5),$e[0]=Le[0];Ne=0}if(M=M[0],me.Ja=me.Ja[0],me.xa=me.xa[0],w=w[0],Ne!=0)break;if(4294967286<me.Ja)return 3;if(Q==null||Te||(Q[0]=me.xa?2:1),K=[K],we=[we],me.xa){if(5>M){Ne=7;break}Q=K,se=we,Te=G,b==null||5>M?b=0:5<=M&&b[w+0]==47&&!(b[w+4]>>5)?(Le=[0],vt=[0],Ge=[0],oe($e=new $,b,w,M),ue($e,Le,vt,Ge)?(Q!=null&&(Q[0]=Le[0]),se!=null&&(se[0]=vt[0]),Te!=null&&(Te[0]=Ge[0]),b=1):b=0):b=0}else{if(10>M){Ne=7;break}Q=we,b==null||10>M||!Cx(b,w+3,M-3)?b=0:(se=b[w+0]|b[w+1]<<8|b[w+2]<<16,Te=16383&(b[w+7]<<8|b[w+6]),b=16383&(b[w+9]<<8|b[w+8]),1&se||3<(se>>1&7)||!(se>>4&1)||se>>5>=me.Ja||!Te||!b?b=0:(K&&(K[0]=Te),Q&&(Q[0]=b),b=1))}if(!b||(K=K[0],we=we[0],je&&(re[0]!=K||pe[0]!=we)))return 3;ee!=null&&(ee[0]=me,ee.offset=w-ee.w,t(4294967286>w-ee.w),t(ee.offset==ee.ha-M));break}return Ne==0||Ne==7&&je&&ee==null?(G!=null&&(G[0]|=me.na!=null&&0<me.na.length),R!=null&&(R[0]=K),H!=null&&(H[0]=we),0):Ne}function Up(b,w,M){var R=w.width,H=w.height,G=0,K=0,Q=R,ee=H;if(w.Da=b!=null&&0<b.Da,w.Da&&(Q=b.cd,ee=b.bd,G=b.v,K=b.j,11>M||(G&=-2,K&=-2),0>G||0>K||0>=Q||0>=ee||G+Q>R||K+ee>H))return 0;if(w.v=G,w.j=K,w.va=G+Q,w.o=K+ee,w.U=Q,w.T=ee,w.da=b!=null&&0<b.da,w.da){if(!et(Q,ee,M=[b.ib],G=[b.hb]))return 0;w.ib=M[0],w.hb=G[0]}return w.ob=b!=null&&b.ob,w.Kb=b==null||!b.Sd,w.da&&(w.ob=w.ib<3*R/4&&w.hb<3*H/4,w.Kb=0),1}function $p(b){if(b==null)return 2;if(11>b.S){var w=b.f.RGBA;w.fb+=(b.height-1)*w.A,w.A=-w.A}else w=b.f.kb,b=b.height,w.O+=(b-1)*w.fa,w.fa=-w.fa,w.N+=(b-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(b-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(b-1)*w.lb,w.lb=-w.lb);return 0}function wc(b,w,M,R){if(R==null||0>=b||0>=w)return 2;if(M!=null){if(M.Da){var H=M.cd,G=M.bd,K=-2&M.v,Q=-2&M.j;if(0>K||0>Q||0>=H||0>=G||K+H>b||Q+G>w)return 2;b=H,w=G}if(M.da){if(!et(b,w,H=[M.ib],G=[M.hb]))return 2;b=H[0],w=G[0]}}R.width=b,R.height=w;e:{var ee=R.width,re=R.height;if(b=R.S,0>=ee||0>=re||!(b>=Hx&&13>b))b=2;else{if(0>=R.Rd&&R.sd==null){K=G=H=w=0;var pe=(Q=ee*T4[b])*re;if(11>b||(G=(re+1)/2*(w=(ee+1)/2),b==12&&(K=(H=ee)*re)),(re=a(pe+2*G+K))==null){b=1;break e}R.sd=re,11>b?((ee=R.f.RGBA).eb=re,ee.fb=0,ee.A=Q,ee.size=pe):((ee=R.f.kb).y=re,ee.O=0,ee.fa=Q,ee.Fd=pe,ee.f=re,ee.N=0+pe,ee.Ab=w,ee.Cd=G,ee.ea=re,ee.W=0+pe+G,ee.Db=w,ee.Ed=G,b==12&&(ee.F=re,ee.J=0+pe+2*G),ee.Tc=K,ee.lb=H)}if(w=1,H=R.S,G=R.width,K=R.height,H>=Hx&&13>H)if(11>H)b=R.f.RGBA,w&=(Q=Math.abs(b.A))*(K-1)+G<=b.size,w&=Q>=G*T4[H],w&=b.eb!=null;else{b=R.f.kb,Q=(G+1)/2,pe=(K+1)/2,ee=Math.abs(b.fa),re=Math.abs(b.Ab);var je=Math.abs(b.Db),se=Math.abs(b.lb),me=se*(K-1)+G;w&=ee*(K-1)+G<=b.Fd,w&=re*(pe-1)+Q<=b.Cd,w=(w&=je*(pe-1)+Q<=b.Ed)&ee>=G&re>=Q&je>=Q,w&=b.y!=null,w&=b.f!=null,w&=b.ea!=null,H==12&&(w&=se>=G,w&=me<=b.Tc,w&=b.F!=null)}else w=0;b=w?0:2}}return b!=0||M!=null&&M.fd&&(b=$p(R)),b}var su=64,qa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Va=24,Nc=32,hl=8,jc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];de("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(b){return b},E.Predictor2=function(b,w,M){return w[M+0]},E.Predictor3=function(b,w,M){return w[M+1]},E.Predictor4=function(b,w,M){return w[M-1]},E.Predictor5=function(b,w,M){return De(De(b,w[M+1]),w[M+0])},E.Predictor6=function(b,w,M){return De(b,w[M-1])},E.Predictor7=function(b,w,M){return De(b,w[M+0])},E.Predictor8=function(b,w,M){return De(w[M-1],w[M+0])},E.Predictor9=function(b,w,M){return De(w[M+0],w[M+1])},E.Predictor10=function(b,w,M){return De(De(b,w[M-1]),De(w[M+0],w[M+1]))},E.Predictor11=function(b,w,M){var R=w[M+0];return 0>=He(R>>24&255,b>>24&255,(w=w[M-1])>>24&255)+He(R>>16&255,b>>16&255,w>>16&255)+He(R>>8&255,b>>8&255,w>>8&255)+He(255&R,255&b,255&w)?R:b},E.Predictor12=function(b,w,M){var R=w[M+0];return(Re((b>>24&255)+(R>>24&255)-((w=w[M-1])>>24&255))<<24|Re((b>>16&255)+(R>>16&255)-(w>>16&255))<<16|Re((b>>8&255)+(R>>8&255)-(w>>8&255))<<8|Re((255&b)+(255&R)-(255&w)))>>>0},E.Predictor13=function(b,w,M){var R=w[M-1];return(Me((b=De(b,w[M+0]))>>24&255,R>>24&255)<<24|Me(b>>16&255,R>>16&255)<<16|Me(b>>8&255,R>>8&255)<<8|Me(255&b,255&R))>>>0};var qp=E.PredictorAdd0;E.PredictorAdd1=dt,de("Predictor2","PredictorAdd2"),de("Predictor3","PredictorAdd3"),de("Predictor4","PredictorAdd4"),de("Predictor5","PredictorAdd5"),de("Predictor6","PredictorAdd6"),de("Predictor7","PredictorAdd7"),de("Predictor8","PredictorAdd8"),de("Predictor9","PredictorAdd9"),de("Predictor10","PredictorAdd10"),de("Predictor11","PredictorAdd11"),de("Predictor12","PredictorAdd12"),de("Predictor13","PredictorAdd13");var Tf=E.PredictorAdd2;rt("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Lr,Fx=E.ColorIndexInverseTransform,ko=E.MapARGB,Co=E.VP8LColorIndexInverseTransformAlpha,Vp=E.MapAlpha,Yp=E.VP8LPredictorsAdd=[];Yp.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Wp,Gp,Sc,kc,Cc,au,Ac,iu,Si,Ao,Dn,Gn,Rr,ds,pl,Kp,Lf,zx,o4,l4,c4,d4,u4,f4,Jp,h4,p4,m4,g4=a(511),x4=a(2041),y4=a(225),b4=a(767),v4=0,B1=x4,Bx=y4,Ya=b4,ki=g4,Hx=0,Ux=1,w4=2,$x=3,qx=4,H1=5,N4=6,U1=7,$1=8,Vx=9,q1=10,W7=[2,3,7],G7=[3,3,11],j4=[280,256,256,256,40],K7=[0,1,1,1,0],J7=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],X7=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Q7=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Z7=8,V1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Y1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xp=null,eI=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],tI=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],S4=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],nI=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],rI=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],sI=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],aI=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Mc=[],Xi=[],ml=[],iI=1,k4=2,Dc=[],Ci=[];ul("UpsampleRgbLinePair",vc,3),ul("UpsampleBgrLinePair",Ts,3),ul("UpsampleRgbaLinePair",sa,4),ul("UpsampleBgraLinePair",Hp,4),ul("UpsampleArgbLinePair",Bp,4),ul("UpsampleRgba4444LinePair",nu,2),ul("UpsampleRgb565LinePair",tu,2);var oI=E.UpsampleRgbLinePair,lI=E.UpsampleBgrLinePair,C4=E.UpsampleRgbaLinePair,A4=E.UpsampleBgraLinePair,M4=E.UpsampleArgbLinePair,D4=E.UpsampleRgba4444LinePair,cI=E.UpsampleRgb565LinePair,Yx=16,Wx=1<<Yx-1,Qp=-227,W1=482,dI=6,E4=0,uI=a(256),fI=a(256),hI=a(256),pI=a(256),mI=a(W1-Qp),gI=a(W1-Qp);fl("YuvToRgbRow",vc,3),fl("YuvToBgrRow",Ts,3),fl("YuvToRgbaRow",sa,4),fl("YuvToBgraRow",Hp,4),fl("YuvToArgbRow",Bp,4),fl("YuvToRgba4444Row",nu,2),fl("YuvToRgb565Row",tu,2);var _4=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Gx=[0,2,8],xI=[8,7,6,4,4,2,2,2,1,1,1,1],yI=1;this.WebPDecodeRGBA=function(b,w,M,R,H){var G=Ux,K=new Ie,Q=new Jt;K.ba=Q,Q.S=G,Q.width=[Q.width],Q.height=[Q.height];var ee=Q.width,re=Q.height,pe=new Tt;if(pe==null||b==null)var je=2;else t(pe!=null),je=ru(b,w,M,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(je!=0?ee=0:(ee!=null&&(ee[0]=pe.width[0]),re!=null&&(re[0]=pe.height[0]),ee=1),ee){Q.width=Q.width[0],Q.height=Q.height[0],R!=null&&(R[0]=Q.width),H!=null&&(H[0]=Q.height);e:{if(R=new $a,(H=new Ue).data=b,H.w=w,H.ha=M,H.kd=1,w=[0],t(H!=null),((b=ru(H.data,H.w,H.ha,null,null,null,w,null,H))==0||b==7)&&w[0]&&(b=4),(w=b)==0){if(t(K!=null),R.data=H.data,R.w=H.w+H.offset,R.ha=H.ha-H.offset,R.put=Lt,R.ac=ra,R.bc=Wi,R.ma=K,H.xa){if((b=rr())==null){K=1;break e}if(function(se,me){var we=[0],Te=[0],Ne=[0];t:for(;;){if(se==null)return 0;if(me==null)return se.a=2,0;if(se.l=me,se.a=0,oe(se.m,me.data,me.w,me.ha),!ue(se.m,we,Te,Ne)){se.a=3;break t}if(se.xb=k4,me.width=we[0],me.height=Te[0],!dn(we[0],Te[0],1,se,null))break t;return 1}return t(se.a!=0),0}(b,R)){if(R=(w=wc(R.width,R.height,K.Oa,K.ba))==0){t:{R=b;n:for(;;){if(R==null){R=0;break t}if(t(R.s.yc!=null),t(R.s.Ya!=null),t(0<R.s.Wb),t((M=R.l)!=null),t((H=M.ma)!=null),R.xb!=0){if(R.ca=H.ba,R.tb=H.tb,t(R.ca!=null),!Up(H.Oa,M,$x)){R.a=2;break n}if(!rn(R,M.width)||M.da)break n;if((M.da||At(R.ca.S))&&Ji(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&Ji()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!V(R.s.vb,R.s.Wa.Xa)){R.a=1;break n}R.xb=0}if(!_t(R,R.V,R.Ba,R.c,R.i,M.o,ut))break n;H.Dc=R.Ma,R=1;break t}t(R.a!=0),R=0}R=!R}R&&(w=b.a)}else w=b.a}else{if((b=new kf)==null){K=1;break e}if(b.Fa=H.na,b.P=H.P,b.qc=H.Sa,jo(b,R)){if((w=wc(R.width,R.height,K.Oa,K.ba))==0){if(b.Aa=0,M=K.Oa,t((H=b)!=null),M!=null){if(0<(ee=0>(ee=M.Md)?0:100<ee?255:255*ee/100)){for(re=pe=0;4>re;++re)12>(je=H.pb[re]).lc&&(je.ia=ee*xI[0>je.lc?0:je.lc]>>3),pe|=je.ia;pe&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=M.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(se,me){if(se==null)return 0;if(me==null)return wr(se,2,"NULL VP8Io parameter in VP8Decode().");if(!se.cb&&!jo(se,me))return 0;if(t(se.cb),me.ac==null||me.ac(me)){me.ob&&(se.L=0);var we=Gx[se.L];if(se.L==2?(se.yb=0,se.zb=0):(se.yb=me.v-we>>4,se.zb=me.j-we>>4,0>se.yb&&(se.yb=0),0>se.zb&&(se.zb=0)),se.Va=me.o+15+we>>4,se.Hb=me.va+15+we>>4,se.Hb>se.za&&(se.Hb=se.za),se.Va>se.Ub&&(se.Va=se.Ub),0<se.L){var Te=se.ed;for(we=0;4>we;++we){var Ne;if(se.Qa.Cb){var Le=se.Qa.Lb[we];se.Qa.Fb||(Le+=Te.Tb)}else Le=Te.Tb;for(Ne=0;1>=Ne;++Ne){var Fe=se.gd[we][Ne],Ge=Le;if(Te.Pc&&(Ge+=Te.vd[0],Ne&&(Ge+=Te.od[0])),0<(Ge=0>Ge?0:63<Ge?63:Ge)){var $e=Ge;0<Te.wb&&($e=4<Te.wb?$e>>2:$e>>1)>9-Te.wb&&($e=9-Te.wb),1>$e&&($e=1),Fe.dd=$e,Fe.tc=2*Ge+$e,Fe.ld=40<=Ge?2:15<=Ge?1:0}else Fe.tc=0;Fe.La=Ne}}}we=0}else wr(se,6,"Frame setup failed"),we=se.a;if(we=we==0){if(we){se.$c=0,0<se.Aa||(se.Ic=yI);t:{we=se.Ic,Te=4*($e=se.za);var jt=32*$e,pt=$e+1,Zt=0<se.L?$e*(0<se.Aa?2:1):0,vt=(se.Aa==2?2:1)*$e;if((Fe=Te+832+(Ne=3*(16*we+Gx[se.L])/2*jt)+(Le=se.Fa!=null&&0<se.Fa.length?se.Kc.c*se.Kc.i:0))!=Fe)we=0;else{if(Fe>se.Vb){if(se.Vb=0,se.Ec=a(Fe),se.Fc=0,se.Ec==null){we=wr(se,1,"no memory during frame initialization.");break t}se.Vb=Fe}Fe=se.Ec,Ge=se.Fc,se.Ac=Fe,se.Bc=Ge,Ge+=Te,se.Gd=o(jt,Gi),se.Hd=0,se.rb=o(pt+1,wo),se.sb=1,se.wa=Zt?o(Zt,Gr):null,se.Y=0,se.D.Nb=0,se.D.wa=se.wa,se.D.Y=se.Y,0<se.Aa&&(se.D.Y+=$e),t(!0),se.oc=Fe,se.pc=Ge,Ge+=832,se.ya=o(vt,ln),se.aa=0,se.D.ya=se.ya,se.D.aa=se.aa,se.Aa==2&&(se.D.aa+=$e),se.R=16*$e,se.B=8*$e,$e=(jt=Gx[se.L])*se.R,jt=jt/2*se.B,se.sa=Fe,se.ta=Ge+$e,se.qa=se.sa,se.ra=se.ta+16*we*se.R+jt,se.Ha=se.qa,se.Ia=se.ra+8*we*se.B+jt,se.$c=0,Ge+=Ne,se.mb=Le?Fe:null,se.nb=Le?Ge:null,t(Ge+Le<=se.Fc+se.Vb),Ax(se),s(se.Ac,se.Bc,0,Te),we=1}}if(we){if(me.ka=0,me.y=se.sa,me.O=se.ta,me.f=se.qa,me.N=se.ra,me.ea=se.Ha,me.Vd=se.Ia,me.fa=se.R,me.Rc=se.B,me.F=null,me.J=0,!v4){for(we=-255;255>=we;++we)g4[255+we]=0>we?-we:we;for(we=-1020;1020>=we;++we)x4[1020+we]=-128>we?-128:127<we?127:we;for(we=-112;112>=we;++we)y4[112+we]=-16>we?-16:15<we?15:we;for(we=-255;510>=we;++we)b4[255+we]=0>we?0:255<we?255:we;v4=1}Ac=Af,iu=A1,Ao=So,Dn=Dx,Gn=Ex,Si=C1,Rr=Ox,ds=Qd,pl=B,Kp=ae,Lf=Px,zx=k,o4=fe,l4=ve,c4=Xd,d4=Fp,u4=Lx,f4=Rx,Xi[0]=O1,Xi[1]=M1,Xi[2]=L1,Xi[3]=R1,Xi[4]=sl,Xi[5]=P1,Xi[6]=al,Xi[7]=I1,Xi[8]=Lp,Xi[9]=Mf,Mc[0]=_1,Mc[1]=E1,Mc[2]=_p,Mc[3]=_x,Mc[4]=Kd,Mc[5]=Tp,Mc[6]=T1,ml[0]=z1,ml[1]=D1,ml[2]=Jd,ml[3]=F1,ml[4]=Op,ml[5]=Rp,ml[6]=Tx,we=1}else we=0}we&&(we=function(gn,us){for(gn.M=0;gn.M<gn.Va;++gn.M){var en,wt=gn.Jc[gn.M&gn.Xb],tt=gn.m,Or=gn;for(en=0;en<Or.za;++en){var Wt=tt,yn=Or,sr=yn.Ac,Ls=yn.Bc+4*en,aa=yn.zc,Nr=yn.ya[yn.aa+en];if(yn.Qa.Bb?Nr.$b=Se(Wt,yn.Pa.jb[0])?2+Se(Wt,yn.Pa.jb[2]):Se(Wt,yn.Pa.jb[1]):Nr.$b=0,yn.kc&&(Nr.Ad=Se(Wt,yn.Bd)),Nr.Za=!Se(Wt,145)+0,Nr.Za){var Ys=Nr.Ob,ia=0;for(yn=0;4>yn;++yn){var fs,wn=aa[0+yn];for(fs=0;4>fs;++fs){wn=rI[sr[Ls+fs]][wn];for(var Ln=S4[Se(Wt,wn[0])];0<Ln;)Ln=S4[2*Ln+Se(Wt,wn[Ln])];wn=-Ln,sr[Ls+fs]=wn}r(Ys,ia,sr,Ls,4),ia+=4,aa[0+yn]=wn}}else wn=Se(Wt,156)?Se(Wt,128)?1:3:Se(Wt,163)?2:0,Nr.Ob[0]=wn,s(sr,Ls,wn,4),s(aa,0,wn,4);Nr.Dd=Se(Wt,142)?Se(Wt,114)?Se(Wt,183)?1:3:2:0}if(Or.m.Ka)return wr(gn,7,"Premature end-of-partition0 encountered.");for(;gn.ja<gn.za;++gn.ja){if(Or=wt,Wt=(tt=gn).rb[tt.sb-1],sr=tt.rb[tt.sb+tt.ja],en=tt.ya[tt.aa+tt.ja],Ls=tt.kc?en.Ad:0)Wt.la=sr.la=0,en.Za||(Wt.Na=sr.Na=0),en.Hc=0,en.Gc=0,en.ia=0;else{var jr,Rn;if(Wt=sr,sr=Or,Ls=tt.Pa.Xc,aa=tt.ya[tt.aa+tt.ja],Nr=tt.pb[aa.$b],yn=aa.ad,Ys=0,ia=tt.rb[tt.sb-1],wn=fs=0,s(yn,Ys,0,384),aa.Za)var Rs=0,Qi=Ls[3];else{Ln=a(16);var Pr=Wt.Na+ia.Na;if(Pr=Xp(sr,Ls[1],Pr,Nr.Eb,0,Ln,0),Wt.Na=ia.Na=(0<Pr)+0,1<Pr)Ac(Ln,0,yn,Ys);else{var va=Ln[0]+3>>3;for(Ln=0;256>Ln;Ln+=16)yn[Ys+Ln]=va}Rs=1,Qi=Ls[0]}var Kn=15&Wt.la,hs=15&ia.la;for(Ln=0;4>Ln;++Ln){var Wa=1&hs;for(va=Rn=0;4>va;++va)Kn=Kn>>1|(Wa=(Pr=Xp(sr,Qi,Pr=Wa+(1&Kn),Nr.Sc,Rs,yn,Ys))>Rs)<<7,Rn=Rn<<2|(3<Pr?3:1<Pr?2:yn[Ys+0]!=0),Ys+=16;Kn>>=4,hs=hs>>1|Wa<<7,fs=(fs<<8|Rn)>>>0}for(Qi=Kn,Rs=hs>>4,jr=0;4>jr;jr+=2){for(Rn=0,Kn=Wt.la>>4+jr,hs=ia.la>>4+jr,Ln=0;2>Ln;++Ln){for(Wa=1&hs,va=0;2>va;++va)Pr=Wa+(1&Kn),Kn=Kn>>1|(Wa=0<(Pr=Xp(sr,Ls[2],Pr,Nr.Qc,0,yn,Ys)))<<3,Rn=Rn<<2|(3<Pr?3:1<Pr?2:yn[Ys+0]!=0),Ys+=16;Kn>>=2,hs=hs>>1|Wa<<5}wn|=Rn<<4*jr,Qi|=Kn<<4<<jr,Rs|=(240&hs)<<jr}Wt.la=Qi,ia.la=Rs,aa.Hc=fs,aa.Gc=wn,aa.ia=43690&wn?0:Nr.ia,Ls=!(fs|wn)}if(0<tt.L&&(tt.wa[tt.Y+tt.ja]=tt.gd[en.$b][en.Za],tt.wa[tt.Y+tt.ja].La|=!Ls),Or.Ka)return wr(gn,7,"Premature end-of-file encountered.")}if(Ax(gn),tt=us,Or=1,en=(wt=gn).D,Wt=0<wt.L&&wt.M>=wt.zb&&wt.M<=wt.Va,wt.Aa==0)t:{if(en.M=wt.M,en.uc=Wt,ji(wt,en),Or=1,en=(Rn=wt.D).Nb,Wt=(wn=Gx[wt.L])*wt.R,sr=wn/2*wt.B,Ln=16*en*wt.R,va=8*en*wt.B,Ls=wt.sa,aa=wt.ta-Wt+Ln,Nr=wt.qa,yn=wt.ra-sr+va,Ys=wt.Ha,ia=wt.Ia-sr+va,hs=(Kn=Rn.M)==0,fs=Kn>=wt.Va-1,wt.Aa==2&&ji(wt,Rn),Rn.uc)for(Wa=(Pr=wt).D.M,t(Pr.D.uc),Rn=Pr.yb;Rn<Pr.Hb;++Rn){Rs=Rn,Qi=Wa;var oa=(Ga=(Os=Pr).D).Nb;jr=Os.R;var Ga=Ga.wa[Ga.Y+Rs],Ka=Os.sa,wa=Os.ta+16*oa*jr+16*Rs,Ja=Ga.dd,er=Ga.tc;if(er!=0)if(t(3<=er),Os.L==1)0<Rs&&d4(Ka,wa,jr,er+4),Ga.La&&f4(Ka,wa,jr,er),0<Qi&&c4(Ka,wa,jr,er+4),Ga.La&&u4(Ka,wa,jr,er);else{var Xa=Os.B,Zi=Os.qa,ou=Os.ra+8*oa*Xa+8*Rs,gl=Os.Ha,Os=Os.Ia+8*oa*Xa+8*Rs;oa=Ga.ld,0<Rs&&(ds(Ka,wa,jr,er+4,Ja,oa),Kp(Zi,ou,gl,Os,Xa,er+4,Ja,oa)),Ga.La&&(zx(Ka,wa,jr,er,Ja,oa),l4(Zi,ou,gl,Os,Xa,er,Ja,oa)),0<Qi&&(Rr(Ka,wa,jr,er+4,Ja,oa),pl(Zi,ou,gl,Os,Xa,er+4,Ja,oa)),Ga.La&&(Lf(Ka,wa,jr,er,Ja,oa),o4(Zi,ou,gl,Os,Xa,er,Ja,oa))}}if(wt.ia&&alert("todo:DitherRow"),tt.put!=null){if(Rn=16*Kn,Kn=16*(Kn+1),hs?(tt.y=wt.sa,tt.O=wt.ta+Ln,tt.f=wt.qa,tt.N=wt.ra+va,tt.ea=wt.Ha,tt.W=wt.Ia+va):(Rn-=wn,tt.y=Ls,tt.O=aa,tt.f=Nr,tt.N=yn,tt.ea=Ys,tt.W=ia),fs||(Kn-=wn),Kn>tt.o&&(Kn=tt.o),tt.F=null,tt.J=null,wt.Fa!=null&&0<wt.Fa.length&&Rn<Kn&&(tt.J=Zn(wt,tt,Rn,Kn-Rn),tt.F=wt.mb,tt.F==null&&tt.F.length==0)){Or=wr(wt,3,"Could not decode alpha data.");break t}Rn<tt.j&&(wn=tt.j-Rn,Rn=tt.j,t(!(1&wn)),tt.O+=wt.R*wn,tt.N+=wt.B*(wn>>1),tt.W+=wt.B*(wn>>1),tt.F!=null&&(tt.J+=tt.width*wn)),Rn<Kn&&(tt.O+=tt.v,tt.N+=tt.v>>1,tt.W+=tt.v>>1,tt.F!=null&&(tt.J+=tt.v),tt.ka=Rn-tt.j,tt.U=tt.va-tt.v,tt.T=Kn-Rn,Or=tt.put(tt))}en+1!=wt.Ic||fs||(r(wt.sa,wt.ta-Wt,Ls,aa+16*wt.R,Wt),r(wt.qa,wt.ra-sr,Nr,yn+8*wt.B,sr),r(wt.Ha,wt.Ia-sr,Ys,ia+8*wt.B,sr))}if(!Or)return wr(gn,6,"Output aborted.")}return 1}(se,me)),me.bc!=null&&me.bc(me),we&=1}return we?(se.cb=0,we):0})(b,R)||(w=b.a)}}else w=b.a}w==0&&K.Oa!=null&&K.Oa.fd&&(w=$p(K.ba))}K=w}G=K!=0?null:11>G?Q.f.RGBA.eb:Q.f.kb.y}else G=null;return G};var T4=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(E,I){for(var L="",O=0;O<4;O++)L+=String.fromCharCode(E[I++]);return L}function u(E,I){return E[I+0]|E[I+1]<<8}function f(E,I){return(E[I+0]|E[I+1]<<8|E[I+2]<<16)>>>0}function p(E,I){return(E[I+0]|E[I+1]<<8|E[I+2]<<16|E[I+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],x=new c,y=e,v=function(E,I){var L={},O=0,F=!1,U=0,W=0;if(L.frames=[],!function(_,$){for(var J=0;J<4;J++)if(_[$+J]!="RIFF".charCodeAt(J))return!0;return!1}(E,I)){for(p(E,I+=4),I+=8;I<E.length;){var X=d(E,I),P=p(E,I+=4);I+=4;var z=P+(1&P);switch(X){case"VP8 ":case"VP8L":L.frames[O]===void 0&&(L.frames[O]={}),(q=L.frames[O]).src_off=F?W:I-8,q.src_size=U+P+8,O++,F&&(F=!1,U=0,W=0);break;case"VP8X":(q=L.header={}).feature_flags=E[I];var oe=I+4;q.canvas_width=1+f(E,oe),oe+=3,q.canvas_height=1+f(E,oe),oe+=3;break;case"ALPH":F=!0,U=z+8,W=I-8;break;case"ANIM":(q=L.header).bgcolor=p(E,I),oe=I+4,q.loop_count=u(E,oe),oe+=2;break;case"ANMF":var Y,q;(q=L.frames[O]={}).offset_x=2*f(E,I),I+=3,q.offset_y=2*f(E,I),I+=3,q.width=1+f(E,I),I+=3,q.height=1+f(E,I),I+=3,q.duration=f(E,I),I+=3,Y=E[I++],q.dispose=1&Y,q.blend=Y>>1&1}X!="ANMF"&&(I+=z)}return L}}(y,0);v.response=y,v.rgbaoutput=!0,v.dataurl=!1;var N=v.header?v.header:null,j=v.frames?v.frames:null;if(N){N.loop_counter=N.loop_count,h=[N.canvas_height],m=[N.canvas_width];for(var D=0;D<j.length&&j[D].blend!=0;D++);}var T=j[0],A=x.WebPDecodeRGBA(y,T.src_off,T.src_size,m,h);T.rgba=A,T.imgwidth=m[0],T.imgheight=h[0];for(var S=0;S<m[0]*h[0]*4;S++)g[S]=A[S];return this.width=m,this.height=h,this.data=g,this}(function(e){var t,n,r,s,a,o,l,c,d,u=function(_){return _=_||{},this.isStrokeTransparent=_.isStrokeTransparent||!1,this.strokeOpacity=_.strokeOpacity||1,this.strokeStyle=_.strokeStyle||"#000000",this.fillStyle=_.fillStyle||"#000000",this.isFillTransparent=_.isFillTransparent||!1,this.fillOpacity=_.fillOpacity||1,this.font=_.font||"10px sans-serif",this.textBaseline=_.textBaseline||"alphabetic",this.textAlign=_.textAlign||"left",this.lineWidth=_.lineWidth||1,this.lineJoin=_.lineJoin||"miter",this.lineCap=_.lineCap||"butt",this.path=_.path||[],this.transform=_.transform!==void 0?_.transform.clone():new c,this.globalCompositeOperation=_.globalCompositeOperation||"normal",this.globalAlpha=_.globalAlpha||1,this.clip_path=_.clip_path||[],this.currentPoint=_.currentPoint||new o,this.miterLimit=_.miterLimit||10,this.lastPoint=_.lastPoint||new o,this.lineDashOffset=_.lineDashOffset||0,this.lineDash=_.lineDash||[],this.margin=_.margin||[0,0,0,0],this.prevPageLastElemOffset=_.prevPageLastElemOffset||0,this.ignoreClearRect=typeof _.ignoreClearRect!="boolean"||_.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var f=function(_){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=_;Object.defineProperty(this,"pdf",{get:function(){return $}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(V){J=!!V}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(V){te=!!V}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(V){isNaN(V)||(Z=V)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(V){isNaN(V)||(ie=V)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(V){var Ae;typeof V=="number"?Ae=[V,V,V,V]:((Ae=new Array(4))[0]=V[0],Ae[1]=V.length>=2?V[1]:Ae[0],Ae[2]=V.length>=3?V[2]:Ae[0],Ae[3]=V.length>=4?V[3]:Ae[1]),d.margin=Ae}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(V){he=V}});var ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return ye},set:function(V){ye=V}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(V){Se=V}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(V){V instanceof u&&(d=V)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(V){d.path=V}});var Ee=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ee},set:function(V){Ee=V}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(V){var Ae;Ae=p(V),this.ctx.fillStyle=Ae.style,this.ctx.isFillTransparent=Ae.a===0,this.ctx.fillOpacity=Ae.a,this.pdf.setFillColor(Ae.r,Ae.g,Ae.b,{a:Ae.a}),this.pdf.setTextColor(Ae.r,Ae.g,Ae.b,{a:Ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(V){var Ae=p(V);this.ctx.strokeStyle=Ae.style,this.ctx.isStrokeTransparent=Ae.a===0,this.ctx.strokeOpacity=Ae.a,Ae.a===0?this.pdf.setDrawColor(255,255,255):(Ae.a,this.pdf.setDrawColor(Ae.r,Ae.g,Ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(V){["butt","round","square"].indexOf(V)!==-1&&(this.ctx.lineCap=V,this.pdf.setLineCap(V))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(V){isNaN(V)||(this.ctx.lineWidth=V,this.pdf.setLineWidth(V))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(V){["bevel","round","miter"].indexOf(V)!==-1&&(this.ctx.lineJoin=V,this.pdf.setLineJoin(V))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(V){isNaN(V)||(this.ctx.miterLimit=V,this.pdf.setMiterLimit(V))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(V){this.ctx.textBaseline=V}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(V){["right","end","center","left","start"].indexOf(V)!==-1&&(this.ctx.textAlign=V)}});var Pe=null,qe=null,We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(V){Pe=null,qe=null,We=V}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(V){var Ae;if(this.ctx.font=V,(Ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(V))!==null){var Ve=Ae[1];Ae[2];var et=Ae[3],_e=Ae[4];Ae[5];var ne=Ae[6],de=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(_e)[2];_e=Math.floor(de==="px"?parseFloat(_e)*this.pdf.internal.scaleFactor:de==="em"?parseFloat(_e)*this.pdf.getFontSize():parseFloat(_e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(_e);var ce=function(rt){var Yn,Pt,Bt=[],Vt=rt.trim();if(Vt==="")return Mw;if(Vt in HM)return[HM[Vt]];for(;Vt!=="";){switch(Pt=null,Yn=(Vt=$M(Vt)).charAt(0)){case'"':case"'":Pt=YZ(Vt.substring(1),Yn);break;default:Pt=WZ(Vt)}if(Pt===null||(Bt.push(Pt[0]),(Vt=$M(Pt[1]))!==""&&Vt.charAt(0)!==","))return Mw;Vt=Vt.replace(/^,/,"")}return Bt}(ne);if(this.fontFaces){var De=function(rt,Yn){var Pt=rt.getFontList(),Bt=JSON.stringify(Pt);if(Pe===null||qe!==Bt){var Vt=function(Mn){var kt=[];return Object.keys(Mn).forEach(function(jn){Mn[jn].forEach(function(At){var Ht=null;switch(At){case"bold":Ht={family:jn,weight:"bold"};break;case"italic":Ht={family:jn,style:"italic"};break;case"bolditalic":Ht={family:jn,weight:"bold",style:"italic"};break;case"":case"normal":Ht={family:jn}}Ht!==null&&(Ht.ref={name:jn,style:At},kt.push(Ht))})}),kt}(Pt);Pe=function(Mn){for(var kt={},jn=0;jn<Mn.length;++jn){var At=Aw(Mn[jn]),Ht=At.family,Un=At.stretch,Jt=At.style,Tt=At.weight;kt[Ht]=kt[Ht]||{},kt[Ht][Un]=kt[Ht][Un]||{},kt[Ht][Un][Jt]=kt[Ht][Un][Jt]||{},kt[Ht][Un][Jt][Tt]=At}return kt}(Vt.concat(Yn)),qe=Bt}return Pe}(this.pdf,this.fontFaces),Re=ce.map(function(rt){return{family:rt,stretch:"normal",weight:et,style:Ve}}),Me=function(rt,Yn,Pt){for(var Bt=(Pt=Pt||{}).defaultFontFamily||"times",Vt=Object.assign({},VZ,Pt.genericFontFamilies||{}),Mn=null,kt=null,jn=0;jn<Yn.length;++jn)if(Vt[(Mn=Aw(Yn[jn])).family]&&(Mn.family=Vt[Mn.family]),rt.hasOwnProperty(Mn.family)){kt=rt[Mn.family];break}if(!(kt=kt||rt[Bt]))throw new Error("Could not find a font-family for the rule '"+UM(Mn)+"' and default family '"+Bt+"'.");if(kt=function(At,Ht){if(Ht[At])return Ht[At];var Un=I5[At],Jt=Un<=I5.normal?-1:1,Tt=BM(Ht,C8,Un,Jt);if(!Tt)throw new Error("Could not find a matching font-stretch value for "+At);return Tt}(Mn.stretch,kt),kt=function(At,Ht){if(Ht[At])return Ht[At];for(var Un=k8[At],Jt=0;Jt<Un.length;++Jt)if(Ht[Un[Jt]])return Ht[Un[Jt]];throw new Error("Could not find a matching font-style for "+At)}(Mn.style,kt),!(kt=function(At,Ht){if(Ht[At])return Ht[At];if(At===400&&Ht[500])return Ht[500];if(At===500&&Ht[400])return Ht[400];var Un=qZ[At],Jt=BM(Ht,A8,Un,At<400?-1:1);if(!Jt)throw new Error("Could not find a matching font-weight for value "+At);return Jt}(Mn.weight,kt)))throw new Error("Failed to resolve a font for the rule '"+UM(Mn)+"'.");return kt}(De,Re);this.pdf.setFont(Me.ref.name,Me.ref.style)}else{var He="";(et==="bold"||parseInt(et,10)>=700||Ve==="bold")&&(He="bold"),Ve==="italic"&&(He+="italic"),He.length===0&&(He="normal");for(var dt="",it={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Qe=0;Qe<ce.length;Qe++){if(this.pdf.internal.getFont(ce[Qe],He,{noFallback:!0,disableWarning:!0})!==void 0){dt=ce[Qe];break}if(He==="bolditalic"&&this.pdf.internal.getFont(ce[Qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)dt=ce[Qe],He="bold";else if(this.pdf.internal.getFont(ce[Qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){dt=ce[Qe],He="normal";break}}if(dt===""){for(var Et=0;Et<ce.length;Et++)if(it[ce[Et]]){dt=it[ce[Et]];break}}dt=dt===""?"Times":dt,this.pdf.setFont(dt,He)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(V){this.ctx.globalCompositeOperation=V}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(V){this.ctx.globalAlpha=V}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(V){this.ctx.lineDashOffset=V,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(V){this.ctx.lineDash=V,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(V){this.ctx.ignoreClearRect=!!V}})};f.prototype.setLineDash=function(_){this.lineDash=_},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){j.call(this,"fill",!1)},f.prototype.stroke=function(){j.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(_,$){if(isNaN(_)||isNaN($))throw Jn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(_,$));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(_,$)},f.prototype.closePath=function(){var _=new o(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&zn(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){_=new o(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(_.x,_.y)},f.prototype.lineTo=function(_,$){if(isNaN(_)||isNaN($))throw Jn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(_,$));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},f.prototype.quadraticCurveTo=function(_,$,J,te){if(isNaN(J)||isNaN(te)||isNaN(_)||isNaN($))throw Jn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new o(J,te)),ie=this.ctx.transform.applyToPoint(new o(_,$));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},f.prototype.bezierCurveTo=function(_,$,J,te,Z,ie){if(isNaN(Z)||isNaN(ie)||isNaN(_)||isNaN($)||isNaN(J)||isNaN(te))throw Jn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new o(Z,ie)),ye=this.ctx.transform.applyToPoint(new o(_,$)),Se=this.ctx.transform.applyToPoint(new o(J,te));this.path.push({type:"bct",x1:ye.x,y1:ye.y,x2:Se.x,y2:Se.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},f.prototype.arc=function(_,$,J,te,Z,ie){if(isNaN(_)||isNaN($)||isNaN(J)||isNaN(te)||isNaN(Z))throw Jn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new o(_,$));_=he.x,$=he.y;var ye=this.ctx.transform.applyToPoint(new o(0,J)),Se=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(ye.x-Se.x,2)+Math.pow(ye.y-Se.y,2))}Math.abs(Z-te)>=2*Math.PI&&(te=0,Z=2*Math.PI),this.path.push({type:"arc",x:_,y:$,radius:J,startAngle:te,endAngle:Z,counterclockwise:ie})},f.prototype.arcTo=function(_,$,J,te,Z){throw new Error("arcTo not implemented.")},f.prototype.rect=function(_,$,J,te){if(isNaN(_)||isNaN($)||isNaN(J)||isNaN(te))throw Jn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(_,$),this.lineTo(_+J,$),this.lineTo(_+J,$+te),this.lineTo(_,$+te),this.lineTo(_,$),this.lineTo(_+J,$),this.lineTo(_,$)},f.prototype.fillRect=function(_,$,J,te){if(isNaN(_)||isNaN($)||isNaN(J)||isNaN(te))throw Jn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(_,$,J,te),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},f.prototype.strokeRect=function(_,$,J,te){if(isNaN(_)||isNaN($)||isNaN(J)||isNaN(te))throw Jn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(_,$,J,te),this.stroke())},f.prototype.clearRect=function(_,$,J,te){if(isNaN(_)||isNaN($)||isNaN(J)||isNaN(te))throw Jn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(_,$,J,te))},f.prototype.save=function(_){_=typeof _!="boolean"||_;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage($),_){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(_){_=typeof _!="boolean"||_;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage($),_&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(_){var $,J,te,Z;if(_.isCanvasGradient===!0&&(_=_.getColor()),!_)return{r:0,g:0,b:0,a:0,style:_};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(_))$=0,J=0,te=0,Z=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(_);if(ie!==null)$=parseInt(ie[1]),J=parseInt(ie[2]),te=parseInt(ie[3]),Z=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(_))!==null)$=parseInt(ie[1]),J=parseInt(ie[2]),te=parseInt(ie[3]),Z=parseFloat(ie[4]);else{if(Z=1,typeof _=="string"&&_.charAt(0)!=="#"){var he=new y8(_);_=he.ok?he.toHex():"#000000"}_.length===4?($=_.substring(1,2),$+=$,J=_.substring(2,3),J+=J,te=_.substring(3,4),te+=te):($=_.substring(1,3),J=_.substring(3,5),te=_.substring(5,7)),$=parseInt($,16),J=parseInt(J,16),te=parseInt(te,16)}}return{r:$,g:J,b:te,a:Z,style:_}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(_,$,J,te){if(isNaN($)||isNaN(J)||typeof _!="string")throw Jn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!h.call(this)){var Z=z(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;O.call(this,{text:_,x:$,y:J,scale:ie,angle:Z,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(_,$,J,te){if(isNaN($)||isNaN(J)||typeof _!="string")throw Jn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){te=isNaN(te)?void 0:te;var Z=z(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;O.call(this,{text:_,x:$,y:J,scale:ie,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(_){if(typeof _!="string")throw Jn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,J=this.pdf.internal.scaleFactor,te=$.internal.getFontSize(),Z=$.getStringUnitWidth(_)*te/$.internal.scaleFactor;return new function(ie){var he=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:Z*=Math.round(96*J/72*1e4)/1e4})},f.prototype.scale=function(_,$){if(isNaN(_)||isNaN($))throw Jn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(_,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.rotate=function(_){if(isNaN(_))throw Jn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new c(Math.cos(_),Math.sin(_),-Math.sin(_),Math.cos(_),0,0);this.ctx.transform=this.ctx.transform.multiply($)},f.prototype.translate=function(_,$){if(isNaN(_)||isNaN($))throw Jn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,_,$);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.transform=function(_,$,J,te,Z,ie){if(isNaN(_)||isNaN($)||isNaN(J)||isNaN(te)||isNaN(Z)||isNaN(ie))throw Jn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new c(_,$,J,te,Z,ie);this.ctx.transform=this.ctx.transform.multiply(he)},f.prototype.setTransform=function(_,$,J,te,Z,ie){_=isNaN(_)?1:_,$=isNaN($)?0:$,J=isNaN(J)?0:J,te=isNaN(te)?1:te,Z=isNaN(Z)?0:Z,ie=isNaN(ie)?0:ie,this.ctx.transform=new c(_,$,J,te,Z,ie)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(_,$,J,te,Z,ie,he,ye,Se){var Ee=this.pdf.getImageProperties(_),Pe=1,qe=1,We=1,V=1;te!==void 0&&ye!==void 0&&(We=ye/te,V=Se/Z,Pe=Ee.width/te*ye/te,qe=Ee.height/Z*Se/Z),ie===void 0&&(ie=$,he=J,$=0,J=0),te!==void 0&&ye===void 0&&(ye=te,Se=Z),te===void 0&&ye===void 0&&(ye=Ee.width,Se=Ee.height);var Ae=this.ctx.transform.decompose(),Ve=z(Ae.rotate.shx),et=new c,_e=(et=(et=(et=et.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale)).applyToRectangle(new l(ie-$*We,he-J*V,te*Pe,Z*qe));if(this.autoPaging){for(var ne,de=x.call(this,_e),ce=[],De=0;De<de.length;De+=1)ce.indexOf(de[De])===-1&&ce.push(de[De]);N(ce);for(var Re=ce[0],Me=ce[ce.length-1],He=Re;He<Me+1;He++){this.pdf.setPage(He);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=He===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=He===1?0:Qe+(He-2)*Et;if(this.ctx.clip_path.length!==0){var Yn=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(ne,this.posX+this.margin[3],-rt+it+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=Yn}var Pt=JSON.parse(JSON.stringify(_e));Pt=v([Pt],this.posX+this.margin[3],-rt+it+this.ctx.prevPageLastElemOffset)[0];var Bt=(He>Re||He<Me)&&g.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,Et,null).clip().discardPath()),this.pdf.addImage(_,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,Ve),Bt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(_,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,Ve)};var x=function(_,$,J){var te=[];$=$||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(_.type){default:case"mt":case"lt":te.push(Math.floor((_.y+Z)/J)+1);break;case"arc":te.push(Math.floor((_.y+Z-_.radius)/J)+1),te.push(Math.floor((_.y+Z+_.radius)/J)+1);break;case"qct":var ie=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,_.x1,_.y1,_.x,_.y);te.push(Math.floor((ie.y+Z)/J)+1),te.push(Math.floor((ie.y+ie.h+Z)/J)+1);break;case"bct":var he=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,_.x1,_.y1,_.x2,_.y2,_.x,_.y);te.push(Math.floor((he.y+Z)/J)+1),te.push(Math.floor((he.y+he.h+Z)/J)+1);break;case"rect":te.push(Math.floor((_.y+Z)/J)+1),te.push(Math.floor((_.y+_.h+Z)/J)+1)}for(var ye=0;ye<te.length;ye+=1)for(;this.pdf.internal.getNumberOfPages()<te[ye];)y.call(this);return te},y=function(){var _=this.fillStyle,$=this.strokeStyle,J=this.font,te=this.lineCap,Z=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=_,this.strokeStyle=$,this.font=J,this.lineCap=te,this.lineWidth=Z,this.lineJoin=ie},v=function(_,$,J){for(var te=0;te<_.length;te++)switch(_[te].type){case"bct":_[te].x2+=$,_[te].y2+=J;case"qct":_[te].x1+=$,_[te].y1+=J;default:_[te].x+=$,_[te].y+=J}return _},N=function(_){return _.sort(function($,J){return $-J})},j=function(_,$){var J=this.fillStyle,te=this.strokeStyle,Z=this.lineCap,ie=this.lineWidth,he=Math.abs(ie*this.ctx.transform.scaleX),ye=this.lineJoin;if(this.autoPaging){for(var Se,Ee,Pe=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),We=[],V=0;V<qe.length;V++)if(qe[V].x!==void 0)for(var Ae=x.call(this,qe[V]),Ve=0;Ve<Ae.length;Ve+=1)We.indexOf(Ae[Ve])===-1&&We.push(Ae[Ve]);for(var et=0;et<We.length;et++)for(;this.pdf.internal.getNumberOfPages()<We[et];)y.call(this);N(We);for(var _e=We[0],ne=We[We.length-1],de=_e;de<ne+1;de++){this.pdf.setPage(de),this.fillStyle=J,this.strokeStyle=te,this.lineCap=Z,this.lineWidth=he,this.lineJoin=ye;var ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],De=de===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],He=de===1?0:Re+(de-2)*Me;if(this.ctx.clip_path.length!==0){var dt=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(Se,this.posX+this.margin[3],-He+De+this.ctx.prevPageLastElemOffset),D.call(this,_,!0),this.path=dt}if(Ee=JSON.parse(JSON.stringify(Pe)),this.path=v(Ee,this.posX+this.margin[3],-He+De+this.ctx.prevPageLastElemOffset),$===!1||de===0){var it=(de>_e||de<ne)&&g.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ce,Me,null).clip().discardPath()),D.call(this,_,$),it&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}this.path=Pe}else this.lineWidth=he,D.call(this,_,$),this.lineWidth=ie},D=function(_,$){if((_!=="stroke"||$||!m.call(this))&&(_==="stroke"||$||!h.call(this))){for(var J,te,Z=[],ie=this.path,he=0;he<ie.length;he++){var ye=ie[he];switch(ye.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:ye,deltas:[],abs:[]});break;case"lt":var Se=Z.length;if(ie[he-1]&&!isNaN(ie[he-1].x)&&(J=[ye.x-ie[he-1].x,ye.y-ie[he-1].y],Se>0)){for(;Se>=0;Se--)if(Z[Se-1].close!==!0&&Z[Se-1].begin!==!0){Z[Se-1].deltas.push(J),Z[Se-1].abs.push(ye);break}}break;case"bct":J=[ye.x1-ie[he-1].x,ye.y1-ie[he-1].y,ye.x2-ie[he-1].x,ye.y2-ie[he-1].y,ye.x-ie[he-1].x,ye.y-ie[he-1].y],Z[Z.length-1].deltas.push(J);break;case"qct":var Ee=ie[he-1].x+2/3*(ye.x1-ie[he-1].x),Pe=ie[he-1].y+2/3*(ye.y1-ie[he-1].y),qe=ye.x+2/3*(ye.x1-ye.x),We=ye.y+2/3*(ye.y1-ye.y),V=ye.x,Ae=ye.y;J=[Ee-ie[he-1].x,Pe-ie[he-1].y,qe-ie[he-1].x,We-ie[he-1].y,V-ie[he-1].x,Ae-ie[he-1].y],Z[Z.length-1].deltas.push(J);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(ye)}}te=$?null:_==="stroke"?"stroke":"fill";for(var Ve=!1,et=0;et<Z.length;et++)if(Z[et].arc)for(var _e=Z[et].abs,ne=0;ne<_e.length;ne++){var de=_e[ne];de.type==="arc"?S.call(this,de.x,de.y,de.radius,de.startAngle,de.endAngle,de.counterclockwise,void 0,$,!Ve):F.call(this,de.x,de.y),Ve=!0}else if(Z[et].close===!0)this.pdf.internal.out("h"),Ve=!1;else if(Z[et].begin!==!0){var ce=Z[et].start.x,De=Z[et].start.y;U.call(this,Z[et].deltas,ce,De),Ve=!0}te&&E.call(this,te),$&&I.call(this)}},T=function(_){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return _-J;case"top":return _+$-J;case"hanging":return _+$-2*J;case"middle":return _+$/2-J;default:return _}},A=function(_){return _+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var _=function(){};return _.colorStops=[],_.addColorStop=function($,J){this.colorStops.push([$,J])},_.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},_.isCanvasGradient=!0,_},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(_,$,J,te,Z,ie,he,ye,Se){for(var Ee=X.call(this,J,te,Z,ie),Pe=0;Pe<Ee.length;Pe++){var qe=Ee[Pe];Pe===0&&(Se?L.call(this,qe.x1+_,qe.y1+$):F.call(this,qe.x1+_,qe.y1+$)),W.call(this,_,$,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}ye?I.call(this):E.call(this,he)},E=function(_){switch(_){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},I=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(_,$){this.pdf.internal.out(n(_)+" "+r($)+" m")},O=function(_){var $;switch(_.align){case"right":case"end":$="right";break;case"center":$="center";break;default:$="left"}var J,te,Z,ie=this.pdf.getTextDimensions(_.text),he=T.call(this,_.y),ye=A.call(this,he)-ie.h,Se=this.ctx.transform.applyToPoint(new o(_.x,he));if(this.autoPaging){var Ee=this.ctx.transform.decompose(),Pe=new c;Pe=(Pe=(Pe=Pe.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale);for(var qe=this.ctx.transform.applyToRectangle(new l(_.x,he,ie.w,ie.h)),We=Pe.applyToRectangle(new l(_.x,ye,ie.w,ie.h)),V=x.call(this,We),Ae=[],Ve=0;Ve<V.length;Ve+=1)Ae.indexOf(V[Ve])===-1&&Ae.push(V[Ve]);N(Ae);for(var et=Ae[0],_e=Ae[Ae.length-1],ne=et;ne<_e+1;ne++){this.pdf.setPage(ne);var de=ne===1?this.posY+this.margin[0]:this.margin[0],ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],De=this.pdf.internal.pageSize.height-this.margin[2],Re=De-this.margin[0],Me=this.pdf.internal.pageSize.width-this.margin[1],He=Me-this.margin[3],dt=ne===1?0:ce+(ne-2)*Re;if(this.ctx.clip_path.length!==0){var it=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(J,this.posX+this.margin[3],-1*dt+de),D.call(this,"fill",!0),this.path=it}var Qe=v([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-dt+de+this.ctx.prevPageLastElemOffset)[0];_.scale>=.01&&(te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(te*_.scale),Z=this.lineWidth,this.lineWidth=Z*_.scale);var Et=this.autoPaging!=="text";if(Et||Qe.y+Qe.h<=De){if(Et||Qe.y>=de&&Qe.x<=Me){var rt=Et?_.text:this.pdf.splitTextToSize(_.text,_.maxWidth||Me-Qe.x)[0],Yn=v([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-dt+de+this.ctx.prevPageLastElemOffset)[0],Pt=Et&&(ne>et||ne<_e)&&g.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],He,Re,null).clip().discardPath()),this.pdf.text(rt,Yn.x,Yn.y,{angle:_.angle,align:$,renderingMode:_.renderingMode}),Pt&&this.pdf.restoreGraphicsState()}}else Qe.y<De&&(this.ctx.prevPageLastElemOffset+=De-Qe.y);_.scale>=.01&&(this.pdf.setFontSize(te),this.lineWidth=Z)}}else _.scale>=.01&&(te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(te*_.scale),Z=this.lineWidth,this.lineWidth=Z*_.scale),this.pdf.text(_.text,Se.x+this.posX,Se.y+this.posY,{angle:_.angle,align:$,renderingMode:_.renderingMode,maxWidth:_.maxWidth}),_.scale>=.01&&(this.pdf.setFontSize(te),this.lineWidth=Z)},F=function(_,$,J,te){J=J||0,te=te||0,this.pdf.internal.out(n(_+J)+" "+r($+te)+" l")},U=function(_,$,J){return this.pdf.lines(_,$,J,null,null)},W=function(_,$,J,te,Z,ie,he,ye){this.pdf.internal.out([t(s(J+_)),t(a(te+$)),t(s(Z+_)),t(a(ie+$)),t(s(he+_)),t(a(ye+$)),"c"].join(" "))},X=function(_,$,J,te){for(var Z=2*Math.PI,ie=Math.PI/2;$>J;)$-=Z;var he=Math.abs(J-$);he<Z&&te&&(he=Z-he);for(var ye=[],Se=te?-1:1,Ee=$;he>1e-5;){var Pe=Ee+Se*Math.min(he,ie);ye.push(P.call(this,_,Ee,Pe)),he-=Math.abs(Pe-Ee),Ee=Pe}return ye},P=function(_,$,J){var te=(J-$)/2,Z=_*Math.cos(te),ie=_*Math.sin(te),he=Z,ye=-ie,Se=he*he+ye*ye,Ee=Se+he*Z+ye*ie,Pe=4/3*(Math.sqrt(2*Se*Ee)-Ee)/(he*ie-ye*Z),qe=he-Pe*ye,We=ye+Pe*he,V=qe,Ae=-We,Ve=te+$,et=Math.cos(Ve),_e=Math.sin(Ve);return{x1:_*Math.cos($),y1:_*Math.sin($),x2:qe*et-We*_e,y2:qe*_e+We*et,x3:V*et-Ae*_e,y3:V*_e+Ae*et,x4:_*Math.cos(J),y4:_*Math.sin(J)}},z=function(_){return 180*_/Math.PI},oe=function(_,$,J,te,Z,ie){var he=_+.5*(J-_),ye=$+.5*(te-$),Se=Z+.5*(J-Z),Ee=ie+.5*(te-ie),Pe=Math.min(_,Z,he,Se),qe=Math.max(_,Z,he,Se),We=Math.min($,ie,ye,Ee),V=Math.max($,ie,ye,Ee);return new l(Pe,We,qe-Pe,V-We)},Y=function(_,$,J,te,Z,ie,he,ye){var Se,Ee,Pe,qe,We,V,Ae,Ve,et,_e,ne,de,ce,De,Re=J-_,Me=te-$,He=Z-J,dt=ie-te,it=he-Z,Qe=ye-ie;for(Ee=0;Ee<41;Ee++)et=(Ae=(Pe=_+(Se=Ee/40)*Re)+Se*((We=J+Se*He)-Pe))+Se*(We+Se*(Z+Se*it-We)-Ae),_e=(Ve=(qe=$+Se*Me)+Se*((V=te+Se*dt)-qe))+Se*(V+Se*(ie+Se*Qe-V)-Ve),Ee==0?(ne=et,de=_e,ce=et,De=_e):(ne=Math.min(ne,et),de=Math.min(de,_e),ce=Math.max(ce,et),De=Math.max(De,_e));return new l(Math.round(ne),Math.round(de),Math.round(ce-ne),Math.round(De-de))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var _,$,J=(_=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:_,lineDashOffset:$}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(St.API),function(e){var t=function(o){var l,c,d,u,f,p,h,m,g,x;for(c=[],d=0,u=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;u>d;d+=4)(f=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(p=(f=((f=((f=((f=(f-(x=f%85))/85)-(g=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,c.push(p+33,h+33,m+33,g+33,x+33)):c.push(122);return function(y,v){for(var N=v;N>0;N--)y.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(o){var l,c,d,u,f,p=String,h="length",m=255,g="charCodeAt",x="slice",y="replace";for(o[x](-2),o=o[x](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),d=[],u=0,f=(o+=l="uuuuu"[x](o[h]%5||5))[h];f>u;u+=5)c=52200625*(o[g](u)-33)+614125*(o[g](u+1)-33)+7225*(o[g](u+2)-33)+85*(o[g](u+3)-33)+(o[g](u+4)-33),d.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(v,N){for(var j=N;j>0;j--)v.pop()}(d,l[h]),p.fromCharCode.apply(p,d)},r=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},a=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=E5(l)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};e.processDataByFilters=function(o,l){var c=0,d=o||"",u=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=r(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=a(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}}(St.API),function(e){e.loadFile=function(t,n,r){return function(s,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var f=new XMLHttpRequest,p=0,h=function(m){var g=m.length,x=[],y=String.fromCharCode;for(p=0;p<g;p+=1)x.push(y(255&m.charCodeAt(p)));return x.join("")};if(f.open("GET",c,!d),f.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(f.onload=function(){f.status===200?u(h(this.responseText)):u(void 0)}),f.send(null),d&&f.status===200)return h(f.responseText)}(s,a,o)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(St.API),function(e){function t(){return(zt.html2canvas?Promise.resolve(zt.html2canvas):cw(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(zt.DOMPurify?Promise.resolve(zt.DOMPurify):cw(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var r=function(l){var c=zn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},s=function(l,c){var d=document.createElement(l);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},a=function l(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)d!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||u.appendChild(l(f,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),u=l.convert(Promise.resolve(),d);return(u=u.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(d){switch(r(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(n).then(function(d){return this.set({src:s("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],g=m.src.find(function(x){return x.format==="truetype"});g&&d.addFont(g.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,d.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(r(l)!=="object")return this;var c=Object.keys(l||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d})},o.prototype.setMargin=function(l){return this.then(function(){switch(r(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(l=l||St.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,d,u){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,u){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,function(u,f){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return d.updateProgress(null,u),p}).then(u,f).then(function(p){return d.updateProgress(1),p})})},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then;var u=this;l&&(l=l.bind(u)),c&&(c=c.bind(u));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),p=d.call(f,l,c);return o.convert(p,u.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(d){c=c.thenCore(d)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,St.getPageSize=function(l,c,d){if(zn(l)==="object"){var u=l;l=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var f,p=(""+d).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,g=0,x=0;if(h.hasOwnProperty(p))g=h[p][1]/f,x=h[p][0]/f;else try{g=d[1],x=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",x>g&&(m=x,x=g,g=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:c,k:f,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Aw):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}}(St.API),St.API.addJS=function(e){return VM=e,this.internal.events.subscribe("postPutResources",function(){H0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(H0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),qM=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+VM+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){H0!==void 0&&qM!==void 0&&this.internal.out("/Names <</JavaScript "+H0+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),a=0;a<s.length;a++){var o=s[a],l=r.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(a=0;a<d;a++){var f=n.internal.newObject();u.push(f);var p=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<u.length;a++)n.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+h+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,a){var o={title:s,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var a=0;a<s.children.length;a++)r.count++,this.count_r(r,s.children[a]);return r.count}}])}(St.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,s,a,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,c=function(f){for(var p,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,g={width:0,height:0,numcomponents:1},x=4;x<m;x+=2){if(x+=h,t.indexOf(f.charCodeAt(x+1))!==-1){p=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),g={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:p,numcomponents:f.charCodeAt(x+9)};break}h=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:s}}return u}}(St.API),St.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,a=EZ(e,{checkCrc:!0}),o=a.width,l=a.height,c=a.channels,d=a.palette,u=a.depth;s=d&&c===1?function(S){for(var E=S.width,I=S.height,L=S.data,O=S.palette,F=S.depth,U=!1,W=[],X=[],P=void 0,z=!1,oe=0,Y=0;Y<O.length;Y++){var q=KA(O[Y],4),_=q[0],$=q[1],J=q[2],te=q[3];W.push(_,$,J),te!=null&&(te===0?(oe++,X.length<1&&X.push(Y)):te<255&&(z=!0))}if(z||oe>1){U=!0,X=void 0;var Z=E*I;P=new Uint8Array(Z);for(var ie=new DataView(L.buffer),he=0;he<Z;he++){var ye=Dw(ie,he,F),Se=KA(O[ye],4)[3];P[he]=Se}}else oe===0&&(X=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:U?8:void 0,colorBytes:L,alphaBytes:P,needSMask:U,palette:W,mask:X}}(a):c===2||c===4?function(S){for(var E=S.data,I=S.width,L=S.height,O=S.channels,F=S.depth,U=O===2?"DeviceGray":"DeviceRGB",W=O-1,X=I*L,P=W,z=X*P,oe=1*X,Y=Math.ceil(z*F/8),q=Math.ceil(oe*F/8),_=new Uint8Array(Y),$=new Uint8Array(q),J=new DataView(E.buffer),te=new DataView(_.buffer),Z=new DataView($.buffer),ie=!1,he=0;he<X;he++){for(var ye=he*O,Se=0;Se<P;Se++)eD(te,Dw(J,ye+Se,F),he*P+Se,F);var Ee=Dw(J,ye+P,F);Ee<(1<<F)-1&&(ie=!0),eD(Z,Ee,1*he,F)}return{colorSpace:U,colorsPerPixel:W,sMaskBitsPerComponent:ie?F:void 0,colorBytes:_,alphaBytes:$,needSMask:ie}}(a):function(S){var E=S.data,I=S.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:I,colorsPerPixel:I==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?function(L){for(var O=L.length,F=new Uint8Array(2*O),U=new DataView(F.buffer,F.byteOffset,F.byteLength),W=0;W<O;W++)U.setUint16(2*W,L[W],!1);return F}(E):E,needSMask:!1}}(a);var f,p,h,m=s,g=m.colorSpace,x=m.colorsPerPixel,y=m.sMaskBitsPerComponent,v=m.colorBytes,N=m.alphaBytes,j=m.needSMask,D=m.palette,T=m.mask,A=null;return r!==St.API.image_compression.NONE&&typeof E5=="function"?(A=function(S){var E;switch(S){case St.API.image_compression.FAST:E=11;break;case St.API.image_compression.MEDIUM:E=13;break;case St.API.image_compression.SLOW:E=14;break;default:E=12}return E}(r),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(A," /Colors ").concat(x," /BitsPerComponent ").concat(u," /Columns ").concat(o),e=KM(v,Math.ceil(o*x*u/8),x,u,r),j&&(h=KM(N,Math.ceil(o*y/8),1,y,r))):(f=void 0,p=void 0,e=v,j&&(h=N)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:e,index:t,filter:f,decodeParameters:p,transparency:T,palette:D,sMask:h,predictor:A,width:o,height:l,bitsPerComponent:u,sMaskBitsPerComponent:y,colorSpace:g}}},function(e){e.processGIF89A=function(t,n,r,s){var a=new XZ(t),o=a.width,l=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new Ew(100).encode(d,100);return e.processJPEG.call(this,u,n,r,s)},e.processGIF87A=e.processGIF89A}(St.API),to.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},to.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Jn.log("bit decode error:"+n)}},to.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[a>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},to.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*s*4,l=a>>4,c=15&a,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},to.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(s<this.palette.length){var o=this.palette[s];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},to.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&t)/t*255|0,c=(a>>10&t)/t*255|0,d=a>>15?255:0,u=r*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},to.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*a;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},to.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},to.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=a,this.data[l+1]=s,this.data[l+2]=r,this.data[l+3]=o}},to.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,s){var a=new to(t,!1),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new Ew(100).encode(c,100);return e.processJPEG.call(this,d,n,r,s)}}(St.API),nD.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,s){var a=new nD(t),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new Ew(100).encode(c,100);return e.processJPEG.call(this,d,n,r,s)}}(St.API),St.API.processRGBA=function(e,t,n){for(var r=e.data,s=r.length,a=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var u=r[d],f=r[d+1],p=r[d+2],h=r[d+3];a[l++]=u,a[l++]=f,a[l++]=p,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},St.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$f=St.API,U0=$f.getCharWidthsArray=function(e,t){var n,r,s=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,f=t.doKerning!==!1,p=0,h=e.length,m=0,g=l[0]||c,x=[];for(n=0;n<h;n++)r=e.charCodeAt(n),typeof s.metadata.widthOfString=="function"?x.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(p=f&&zn(d[r])==="object"&&!isNaN(parseInt(d[r][m],10))?d[r][m]/u:0,x.push((l[r]||g)/c+p)),m=r;return x},YM=$f.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return $f.processArabic&&(e=$f.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,s)/n:U0.apply(this,arguments).reduce(function(a,o){return a+o},0)},WM=function(e,t,n,r){for(var s=[],a=0,o=e.length,l=0;a!==o&&l+t[a]<n;)l+=t[a],a++;s.push(e.slice(0,a));var c=a;for(l=0;a!==o;)l+t[a]>r&&(s.push(e.slice(c,a)),l=0,c=a),l+=t[a],a++;return c!==a&&s.push(e.slice(c,a)),s},GM=function(e,t,n){n||(n={});var r,s,a,o,l,c,d,u=[],f=[u],p=n.textIndent||0,h=0,m=0,g=e.split(" "),x=U0.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var y=Array(c).join(" "),v=[];g.map(function(j){(j=j.split(/\s*\n/)).length>1?v=v.concat(j.map(function(D,T){return(T&&D.length?`
`:"")+D})):v.push(j[0])}),g=v,c=YM.apply(this,[y,n])}for(a=0,o=g.length;a<o;a++){var N=0;if(r=g[a],c&&r[0]==`
`&&(r=r.substr(1),N=1),p+h+(m=(s=U0.apply(this,[r,n])).reduce(function(j,D){return j+D},0))>t||N){if(m>t){for(l=WM.apply(this,[r,s,t-(p+h),t]),u.push(l.shift()),u=[l.pop()];l.length;)f.push([l.shift()]);m=s.slice(r.length-(u[0]?u[0].length:0)).reduce(function(j,D){return j+D},0)}else u=[r];f.push(u),p=m+c,h=x}else u.push(r),p+=h+m,h=x}return d=c?function(j,D){return(D?y:"")+j.join(" ")}:function(j){return j.join(" ")},f.map(d)},$f.splitTextToSize=function(e,t,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=n.lineIndent;var l,c,d=[];for(l=0,c=r.length;l<c;l++)d=d.concat(GM.apply(this,[r[l],o,a]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},s={},a=0;a<16;a++)r[n[a]]=t[a],s[t[a]]=n[a];var o=function(p){return"0x"+parseInt(p,10).toString(16)},l=e.__fontmetrics__.compress=function(p){var h,m,g,x,y=["{"];for(var v in p){if(h=p[v],isNaN(parseInt(v,10))?m="'"+v+"'":(v=parseInt(v,10),m=(m=o(v).slice(2)).slice(0,-1)+s[m.slice(-1)]),typeof h=="number")h<0?(g=o(h).slice(3),x="-"):(g=o(h).slice(2),x=""),g=x+g.slice(0,-1)+s[g.slice(-1)];else{if(zn(h)!=="object")throw new Error("Don't know what to do with value type "+zn(h)+".");g=l(h)}y.push(m+g)}return y.push("}"),y.join("")},c=e.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,x,y={},v=1,N=y,j=[],D="",T="",A=p.length-1,S=1;S<A;S+=1)(x=p[S])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(j.push([N,g]),N={},g=void 0):x=="}"?((m=j.pop())[0][m[1]]=N,g=void 0,N=m[0]):x=="-"?v=-1:g===void 0?r.hasOwnProperty(x)?(D+=r[x],g=parseInt(D,16)*v,v=1,D=""):D+=x:r.hasOwnProperty(x)?(T+=r[x],N[g]=parseInt(T,16)*v,v=1,g=void 0,T=""):T+=x;return y},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(p){var h=p.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(St.API),function(e){var t=function(n){for(var r=n.length,s=new Uint8Array(r),a=0;a<r;a++)s[a]=n.charCodeAt(a);return s};e.API.events.push(["addFont",function(n){var r=void 0,s=n.font,a=n.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(ky(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,r)}}])}(St),St.API.addSvgAsImage=function(e,t,n,r,s,a,o,l){if(isNaN(t)||isNaN(n))throw Jn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw Jn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=s;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(zt.canvg?Promise.resolve(zt.canvg):cw(()=>import("./index.es-B5SelIj2.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(d,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(u)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),t,n,r,s,o,l)})},St.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(t,n);return this},St.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,s,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,f=0;function p(m,g){var x,y=!1;for(x=0;x<m.length;x+=1)m[x]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=l.length;for(f=0;f<h;f+=1)n[l[f]].value=n[l[f]].defaultValue,n[l[f]].explicitSet=!1}if(zn(e)==="object"){for(s in e)if(a=e[s],p(l,s)&&a!==void 0){if(n[s].type==="boolean"&&typeof a=="boolean")n[s].value=a;else if(n[s].type==="name"&&p(n[s].valueSet,a))n[s].value=a;else if(n[s].type==="integer"&&Number.isInteger(a))n[s].value=a;else if(n[s].type==="array"){for(d=0;d<a.length;d+=1)if(r=!0,a[d].length===1&&typeof a[d][0]=="number")c.push(String(a[d]-1));else if(a[d].length>1){for(u=0;u<a[d].length;u+=1)typeof a[d][u]!="number"&&(r=!1);r===!0&&c.push([a[d][0]-1,a[d][1]-1].join(" "))}n[s].value="["+c.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,g=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?g.push("/"+m+" /"+n[m].value):g.push("/"+m+" "+n[m].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=a.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+a+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(St.API),function(e){var t=e.API,n=t.pdfEscape16=function(a,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],f=0,p=a.length;f<p;++f){if(l=o.metadata.characterToGlyph(a.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=a.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},r=function(a){var o,l,c,d,u,f,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(l=Object.keys(a).sort(function(h,m){return h-m})).length;f<p;f++)o=l[f],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(d=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<p.length;m++)h+=String.fromCharCode(p[m]);var g=d();u({data:h,addLength1:!0,objectId:g}),c("endobj");var x=d();u({data:r(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Qf(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var v=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Qf(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+Qf(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+v+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,p="",h=0;h<f.length;h++)p+=String.fromCharCode(f[h]);var m=d();u({data:p,addLength1:!0,objectId:m}),c("endobj");var g=d();u({data:r(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Qf(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Qf(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]);var s=function(a){var o,l=a.text||"",c=a.x,d=a.y,u=a.options||{},f=a.mutex||{},p=f.pdfEscape,h=f.activeFontKey,m=f.fonts,g=h,x="",y=0,v="",N=m[g].encoding;if(m[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:f};for(v=l,g=h,Array.isArray(l)&&(v=l[0]),y=0;y<v.length;y+=1)m[g].metadata.hasOwnProperty("cmap")&&(o=m[g].metadata.cmap.unicode.codeMap[v[y].charCodeAt(0)]),o||v[y].charCodeAt(0)<256&&m[g].metadata.hasOwnProperty("Unicode")?x+=v[y]:x+="";var j="";return parseInt(g.slice(1))<14||N==="WinAnsiEncoding"?j=p(x,g).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(j=n(x,m[g])),f.isHex=!0,{text:j,x:c,y:d,options:u,mutex:f}};t.events.push(["postProcessText",function(a){var o=a.text||"",l=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);a.text=l}else a.text=s(Object.assign({},c,{text:o})).text}])}(St),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(St.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var s,a,o,l,c,d,u,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,N=0;this.__bidiEngine__={};var j=function(L){var O=L.charCodeAt(),F=O>>8,U=g[F];return U!==void 0?f[256*U+(255&O)]:F===252||F===253?"AL":y.test(F)?"L":F===8?"R":"N"},D=function(L){for(var O,F=0;F<L.length;F++){if((O=j(L.charAt(F)))==="L")return!1;if(O==="R")return!0}return!1},T=function(L,O,F,U){var W,X,P,z,oe=O[U];switch(oe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"N":case"AN":break;case"EN":v&&(oe="AN");break;case"AL":v=!0,oe="R";break;case"WS":case"BN":oe="N";break;case"CS":U<1||U+1>=O.length||(W=F[U-1])!=="EN"&&W!=="AN"||(X=O[U+1])!=="EN"&&X!=="AN"?oe="N":v&&(X="AN"),oe=X===W?X:"N";break;case"ES":oe=(W=U>0?F[U-1]:"B")==="EN"&&U+1<O.length&&O[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&F[U-1]==="EN"){oe="EN";break}if(v){oe="N";break}for(P=U+1,z=O.length;P<z&&O[P]==="ET";)P++;oe=P<z&&O[P]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(z=O.length,P=U+1;P<z&&O[P]==="NSM";)P++;if(P<z){var Y=L[U],q=Y>=1425&&Y<=2303||Y===64286;if(W=O[P],q&&(W==="R"||W==="AL")){oe="R";break}}}oe=U<1||(W=O[U-1])==="B"?"N":F[U-1];break;case"B":v=!1,s=!0,oe=N;break;case"S":a=!0,oe="N"}return oe},A=function(L,O,F){var U=L.split("");return F&&S(U,F,{hiLevel:N}),U.reverse(),O&&O.reverse(),U.join("")},S=function(L,O,F){var U,W,X,P,z,oe=-1,Y=L.length,q=0,_=[],$=N?h:p,J=[];for(v=!1,s=!1,a=!1,W=0;W<Y;W++)J[W]=j(L[W]);for(X=0;X<Y;X++){if(z=q,_[X]=T(L,J,_,X),U=240&(q=$[z][m[_[X]]]),q&=15,O[X]=P=$[q][5],U>0)if(U===16){for(W=oe;W<X;W++)O[W]=1;oe=-1}else oe=-1;if($[q][6])oe===-1&&(oe=X);else if(oe>-1){for(W=oe;W<X;W++)O[W]=P;oe=-1}J[X]==="B"&&(O[X]=0),F.hiLevel|=P}a&&function(te,Z,ie){for(var he=0;he<ie;he++)if(te[he]==="S"){Z[he]=N;for(var ye=he-1;ye>=0&&te[ye]==="WS";ye--)Z[ye]=N}}(J,O,Y)},E=function(L,O,F,U,W){if(!(W.hiLevel<L)){if(L===1&&N===1&&!s)return O.reverse(),void(F&&F.reverse());for(var X,P,z,oe,Y=O.length,q=0;q<Y;){if(U[q]>=L){for(z=q+1;z<Y&&U[z]>=L;)z++;for(oe=q,P=z-1;oe<P;oe++,P--)X=O[oe],O[oe]=O[P],O[P]=X,F&&(X=F[oe],F[oe]=F[P],F[P]=X);q=z}q++}}},I=function(L,O,F){var U=L.split(""),W={hiLevel:N};return F||(F=[]),S(U,F,W),function(X,P,z){if(z.hiLevel!==0&&u)for(var oe,Y=0;Y<X.length;Y++)P[Y]===1&&(oe=x.indexOf(X[Y]))>=0&&(X[Y]=x[oe+1])}(U,F,W),E(2,U,O,F,W),E(1,U,O,F,W),U.join("")};return this.__bidiEngine__.doBidiReorder=function(L,O,F){if(function(W,X){if(X)for(var P=0;P<W.length;P++)X[P]=P;l===void 0&&(l=D(W)),d===void 0&&(d=D(W))}(L,O),o||!c||d)if(o&&c&&l^d)N=l?1:0,L=A(L,O,F);else if(!o&&c&&d)N=l?1:0,L=I(L,O,F),L=A(L,O);else if(!o||l||c||d){if(o&&!c&&l^d)L=A(L,O),l?(N=0,L=I(L,O,F)):(N=1,L=I(L,O,F),L=A(L,O));else if(o&&l&&!c&&d)N=1,L=I(L,O,F),L=A(L,O);else if(!o&&!c&&l^d){var U=u;l?(N=1,L=I(L,O,F),N=0,u=!1,L=I(L,O,F),u=U):(N=0,L=I(L,O,F),L=A(L,O),N=1,u=!1,L=I(L,O,F),u=U,L=A(L,O))}}else N=0,L=I(L,O,F);else N=l?1:0,L=I(L,O,F);return L},this.__bidiEngine__.setOptions=function(L){L&&(o=L.isInputVisual,c=L.isOutputVisual,l=L.isInputRtl,d=L.isOutputRtl,u=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([n.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([n.doBidiReorder(s[l])]);r.text=o}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(St),St.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Pd(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new fee(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new QZ(this.contents),this.head=new eee(this),this.name=new aee(this),this.cmap=new D8(this),this.toUnicode={},this.hhea=new tee(this),this.maxp=new iee(this),this.hmtx=new oee(this),this.post=new ree(this),this.os2=new nee(this),this.loca=new uee(this),this.glyf=new lee(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var s,a,o,l;for(o=0,a=0,l=(t=""+t).length;0<=l?a<l:a>l;a=0<=l?++a:--a)s=t.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var bo,Pd=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,s;for(s=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(t.charCodeAt(n)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,s,a,o,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^a)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*s+16777216*a+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,s,a;for(a=[],r=0,s=t.length;r<s;r++)n=t[r],a.push(this.writeByte(n));return a},e}(),QZ=function(){var e;function t(n){var r,s,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,s,a,o,l,c,d,u,f,p,h,m,g;for(g in h=Object.keys(n).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),o=Math.floor(f/c),u=16*h-f,(s=new Pd).writeInt(this.scalarType),s.writeShort(h),s.writeShort(f),s.writeShort(o),s.writeShort(u),a=16*h,d=s.pos+a,l=null,m=[],n)for(p=n[g],s.writeString(g),s.writeInt(e(p)),s.writeInt(d),s.writeInt(p.length),m=m.concat(p),g==="head"&&(l=d),d+=p.length;d%4;)m.push(0),d++;return s.write(m),r=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(r),s.data},e=function(n){var r,s,a,o;for(n=E8.call(n);n.length%4;)n.push(0);for(a=new Pd(n),s=0,r=0,o=n.length;r<o;r=r+=4)s+=a.readUInt32();return 4294967295&s},t}(),ZZ={}.hasOwnProperty,el=function(e,t){for(var n in t)ZZ.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};bo=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var eee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return el(e,bo),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Pd).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),rD=function(){function e(t,n){var r,s,a,o,l,c,d,u,f,p,h,m,g,x,y,v,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),p=h/2,t.pos+=6,a=function(){var j,D;for(D=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)D.push(t.readUInt16());return D}(),t.pos+=2,g=function(){var j,D;for(D=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)D.push(t.readUInt16());return D}(),d=function(){var j,D;for(D=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)D.push(t.readUInt16());return D}(),u=function(){var j,D;for(D=[],c=j=0;0<=p?j<p:j>p;c=0<=p?++j:--j)D.push(t.readUInt16());return D}(),s=(this.length-t.pos+this.offset)/2,l=function(){var j,D;for(D=[],c=j=0;0<=s?j<s:j>s;c=0<=s?++j:--j)D.push(t.readUInt16());return D}(),c=y=0,N=a.length;y<N;c=++y)for(x=a[c],r=v=m=g[c];m<=x?v<=x:v>=x;r=m<=x?++v:--v)u[c]===0?o=r+d[c]:(o=l[u[c]/2+(r-m)-(p-c)]||0)!==0&&(o+=d[c]),this.codeMap[r]=65535&o}t.pos=f}return e.encode=function(t,n){var r,s,a,o,l,c,d,u,f,p,h,m,g,x,y,v,N,j,D,T,A,S,E,I,L,O,F,U,W,X,P,z,oe,Y,q,_,$,J,te,Z,ie,he,ye,Se,Ee,Pe;switch(U=new Pd,o=Object.keys(t).sort(function(qe,We){return qe-We}),n){case"macroman":for(g=0,x=function(){var qe=[];for(m=0;m<256;++m)qe.push(0);return qe}(),v={0:0},a={},W=0,oe=o.length;W<oe;W++)v[ye=t[s=o[W]]]==null&&(v[ye]=++g),a[s]={old:t[s],new:v[t[s]]},x[s]=v[t[s]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(x),{charMap:a,subtable:U.data,maxGlyphID:g+1};case"unicode":for(O=[],f=[],N=0,v={},r={},y=d=null,X=0,Y=o.length;X<Y;X++)v[D=t[s=o[X]]]==null&&(v[D]=++N),r[s]={old:D,new:v[D]},l=v[D]-s,y!=null&&l===d||(y&&f.push(y),O.push(s),d=l),y=s;for(y&&f.push(y),f.push(65535),O.push(65535),I=2*(E=O.length),S=2*Math.pow(Math.log(E)/Math.LN2,2),p=Math.log(S/2)/Math.LN2,A=2*E-S,c=[],T=[],h=[],m=P=0,q=O.length;P<q;m=++P){if(L=O[m],u=f[m],L===65535){c.push(0),T.push(0);break}if(L-(F=r[L].new)>=32768)for(c.push(0),T.push(2*(h.length+E-m)),s=z=L;L<=u?z<=u:z>=u;s=L<=u?++z:--z)h.push(r[s].new);else c.push(F-L),T.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*E+2*h.length),U.writeUInt16(0),U.writeUInt16(I),U.writeUInt16(S),U.writeUInt16(p),U.writeUInt16(A),ie=0,_=f.length;ie<_;ie++)s=f[ie],U.writeUInt16(s);for(U.writeUInt16(0),he=0,$=O.length;he<$;he++)s=O[he],U.writeUInt16(s);for(Se=0,J=c.length;Se<J;Se++)l=c[Se],U.writeUInt16(l);for(Ee=0,te=T.length;Ee<te;Ee++)j=T[Ee],U.writeUInt16(j);for(Pe=0,Z=h.length;Pe<Z;Pe++)g=h[Pe],U.writeUInt16(g);return{charMap:r,subtable:U.data,maxGlyphID:N+1}}},e}(),D8=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return el(e,bo),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n=new rD(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,s;return n==null&&(n="macroman"),r=rD.encode(t,n),(s=new Pd).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},e}(),tee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return el(e,bo),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),nee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return el(e,bo),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),ree=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return el(e,bo),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)n=t.readByte(),s.push(this.names.push(t.readString(n)));return s;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),see=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},aee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return el(e,bo),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,s,a,o,l,c,d,u,f,p;for(t.pos=this.offset,t.readShort(),n=t.readShort(),l=t.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},a=u=0,f=r.length;u<f;a=++u)s=r[a],t.pos=s.offset,d=t.readString(s.length),o=new see(d,s),c[p=s.nameID]==null&&(c[p]=[]),c[s.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),iee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return el(e,bo),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),oee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return el(e,bo),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,s,a,o,l,c;for(t.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,u;for(u=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)u.push(t.readInt16());return u}(),this.widths=(function(){var d,u,f,p;for(p=[],d=0,u=(f=this.metrics).length;d<u;d++)a=f[d],p.push(a.advance);return p}).call(this),r=this.widths[this.widths.length-1],c=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)c.push(this.widths.push(r));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),E8=[].slice,lee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return el(e,bo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,s,a,o,l,c,d,u,f;return t in this.cache?this.cache[t]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,o=(l=new Pd(n.read(s))).readShort(),d=l.readShort(),f=l.readShort(),c=l.readShort(),u=l.readShort(),this.cache[t]=o===-1?new dee(l,d,f,c,u):new cee(l,o,d,f,c,u),this.cache[t]))},e.prototype.encode=function(t,n,r){var s,a,o,l,c;for(o=[],a=[],l=0,c=n.length;l<c;l++)s=t[n[l]],a.push(o.length),s&&(o=o.concat(s.encode(r)));return a.push(o.length),{table:o,offsets:a}},e}(),cee=function(){function e(t,n,r,s,a,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),dee=function(){function e(t,n,r,s,a){var o,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Pd(E8.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),uee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return el(e,bo),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<r.length;++o)if(r[o]=s,a<n.length&&n[a]==o){++a,r[o]=s;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(s+=c)}for(var d=new Array(4*r.length),u=0;u<r.length;++u)d[4*u+3]=255&r[u],d[4*u+2]=(65280&r[u])>>8,d[4*u+1]=(16711680&r[u])>>16,d[4*u]=(4278190080&r[u])>>24;return d},e}(),fee=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,s,a;for(n in s=this.font.cmap.tables[0].codeMap,t={},a=this.subset)r=a[n],t[n]=s[r];return t},e.prototype.glyphsFor=function(t){var n,r,s,a,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[a=t[o]]=this.font.glyf.glyphFor(a);for(a in n=[],s)(r=s[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in c=this.glyphsFor(n))r=c[a],s[a]=r;return s},e.prototype.encode=function(t,n){var r,s,a,o,l,c,d,u,f,p,h,m,g,x,y;for(s in r=D8.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),h={0:0},y=r.charMap)h[(c=y[s]).old]=c.new;for(m in p=r.maxGlyphID,o)m in h||(h[m]=p++);return u=function(v){var N,j;for(N in j={},v)j[v[N]]=N;return j}(h),f=Object.keys(u).sort(function(v,N){return v-N}),g=function(){var v,N,j;for(j=[],v=0,N=f.length;v<N;v++)l=f[v],j.push(u[l]);return j}(),a=this.font.glyf.encode(o,g,h),d=this.font.loca.encode(a.offsets,g),x={cmap:this.font.cmap.raw(),glyf:a.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},e}();St.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,s,a,o;if(Array.isArray(n))return"["+function(){var l,c,d;for(d=[],l=0,c=n.length;l<c;l++)r=n[l],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in a=["<<"],n)o=n[s],a.push("/"+s+" "+t.convert(o));return a.push(">>"),a.join(`
`)}return""+n},t}();function _8(e,t,n,r,s){r=r||{};var a=1.15,o=s.internal.scaleFactor,l=s.internal.getFontSize()/o,c=s.getLineHeightFactor?s.getLineHeightFactor():a,d=l*c,u=/\r\n|\r|\n/g,f="",p=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(f=typeof e=="string"?e.split(u):e,p=f.length||1),n+=l*(2-a),r.valign==="middle"?n-=p/2*d:r.valign==="bottom"&&(n-=p*d),r.halign==="center"||r.halign==="right"){var h=l;if(r.halign==="center"&&(h*=.5),f&&p>=1){for(var m=0;m<f.length;m++)s.text(f[m],t-s.getStringUnitWidth(f[m])*h,n),n+=d;return s}t-=s.getStringUnitWidth(e)*h}return r.halign==="justify"?s.text(e,t,n,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(e,t,n),s}var sD={},Lh=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=t:sD=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,n){var r,s,a;n===void 0&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var u=e.unifyColor(t.fillColor);u&&(r=this.jsPDFDocument).setFillColor.apply(r,u),u=e.unifyColor(t.textColor),u&&(s=this.jsPDFDocument).setTextColor.apply(s,u),u=e.unifyColor(t.lineColor),u&&(a=this.jsPDFDocument).setDrawColor.apply(a,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,n,r){return this.jsPDFDocument.splitTextToSize(t,n,r)},e.prototype.rect=function(t,n,r,s,a){return this.jsPDFDocument.rect(t,n,r,s,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return sD||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),F5=function(e,t){return F5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},F5(e,t)};function T8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");F5(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var L8=function(e){T8(t,e);function t(n){var r=e.call(this)||this;return r._element=n,r}return t}(Array);function hee(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function pee(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function _b(e,t,n){n.applyStyles(t,!0);var r=Array.isArray(e)?e:[e],s=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return s}function R8(e,t,n,r){var s=t.settings.tableLineWidth,a=t.settings.tableLineColor;e.applyStyles({lineWidth:s,lineColor:a});var o=O8(s,!1);o&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),r.y-n.y,o)}function O8(e,t){var n=e>0,r=t||t===0;return n&&r?"DF":n?"S":r?"F":null}function l1(e,t){var n,r,s,a;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(n=e.left)!==null&&n!==void 0?n:t,top:(r=e.top)!==null&&r!==void 0?r:t,right:(s=e.right)!==null&&s!==void 0?s:t,bottom:(a=e.bottom)!==null&&a!==void 0?a:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function P8(e,t){var n=l1(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function mee(e,t,n,r,s){var a={},o=1.3333333333333333,l=_w(t,function(N){return s.getComputedStyle(N).backgroundColor});l!=null&&(a.fillColor=l);var c=_w(t,function(N){return s.getComputedStyle(N).color});c!=null&&(a.textColor=c);var d=xee(r,n);d&&(a.cellPadding=d);var u="borderTopColor",f=o*n,p=r.borderTopWidth;if(r.borderBottomWidth===p&&r.borderRightWidth===p&&r.borderLeftWidth===p){var h=(parseFloat(p)||0)/f;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/f,right:(parseFloat(r.borderRightWidth)||0)/f,bottom:(parseFloat(r.borderBottomWidth)||0)/f,left:(parseFloat(r.borderLeftWidth)||0)/f},a.lineWidth.top||(a.lineWidth.right?u="borderRightColor":a.lineWidth.bottom?u="borderBottomColor":a.lineWidth.left&&(u="borderLeftColor"));var m=_w(t,function(N){return s.getComputedStyle(N)[u]});m!=null&&(a.lineColor=m);var g=["left","right","center","justify"];g.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),g=["middle","bottom","top"],g.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var x=parseInt(r.fontSize||"");isNaN(x)||(a.fontSize=x/o);var y=gee(r);y&&(a.fontStyle=y);var v=(r.fontFamily||"").toLowerCase();return e.indexOf(v)!==-1&&(a.font=v),a}function gee(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function _w(e,t){var n=I8(e,t);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function I8(e,t){var n=t(e);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?e.parentElement==null?null:I8(e.parentElement,t):n}function xee(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],r=96/(72/t),s=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,a=n.map(function(l){return parseInt(l||"0")/r}),o=l1(a,0);return s>o.top&&(o.top=s),s>o.bottom&&(o.bottom=s),o}function F8(e,t,n,r,s){var a,o;r===void 0&&(r=!1),s===void 0&&(s=!1);var l;typeof t=="string"?l=n.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],f=[],p=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:f,foot:p};for(var h=0;h<l.rows.length;h++){var m=l.rows[h],g=(o=(a=m==null?void 0:m.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),x=yee(c,d,n,m,r,s);x&&(g==="thead"?u.push(x):g==="tfoot"?p.push(x):f.push(x))}return{head:u,body:f,foot:p}}function yee(e,t,n,r,s,a){for(var o=new L8(r),l=0;l<r.cells.length;l++){var c=r.cells[l],d=n.getComputedStyle(c);if(s||d.display!=="none"){var u=void 0;a&&(u=mee(e,c,t,d,n)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:bee(c)})}}var f=n.getComputedStyle(r);if(o.length>0&&(s||f.display!=="none"))return o}function bee(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),t.innerText||t.textContent||""}function vee(e,t,n){for(var r=0,s=[e,t,n];r<s.length;r++){var a=s[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function $l(e,t,n,r,s){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(a[c]=l[c])}return a}function z8(e,t){var n=new Lh(e),r=n.getDocumentOptions(),s=n.getGlobalOptions();vee(s,r,t);var a=$l({},s,r,t),o;typeof window<"u"&&(o=window);var l=wee(s,r,t),c=Nee(s,r,t),d=jee(n,a),u=kee(n,a,o);return{id:t.tableId,content:u,hooks:c,styles:l,settings:d}}function wee(e,t,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(c){if(c==="columnStyles"){var d=e[c],u=t[c],f=n[c];r.columnStyles=$l({},d,u,f)}else{var p=[e,t,n],h=p.map(function(m){return m[c]||{}});r[c]=$l({},h[0],h[1],h[2])}},a=0,o=Object.keys(r);a<o.length;a++){var l=o[a];s(l)}return r}function Nee(e,t,n){for(var r=[e,t,n],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=r;a<o.length;a++){var l=o[a];l.didParseCell&&s.didParseCell.push(l.didParseCell),l.willDrawCell&&s.willDrawCell.push(l.willDrawCell),l.didDrawCell&&s.didDrawCell.push(l.didDrawCell),l.willDrawPage&&s.willDrawPage.push(l.willDrawPage),l.didDrawPage&&s.didDrawPage.push(l.didDrawPage)}return s}function jee(e,t){var n,r,s,a,o,l,c,d,u,f,p,h,m=l1(t.margin,40/e.scaleFactor()),g=(n=See(e,t.startY))!==null&&n!==void 0?n:m.top,x;t.showFoot===!0?x="everyPage":t.showFoot===!1?x="never":x=(r=t.showFoot)!==null&&r!==void 0?r:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(s=t.showHead)!==null&&s!==void 0?s:"everyPage";var v=(a=t.useCss)!==null&&a!==void 0?a:!1,N=t.theme||(v?"plain":"striped"),j=!!t.horizontalPageBreak,D=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:v,theme:N,startY:g,margin:m,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:y,showFoot:x,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(p=t.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:j,horizontalPageBreakRepeat:D,horizontalPageBreakBehaviour:(h=t.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function See(e,t){var n=e.getLastAutoTable(),r=e.scaleFactor(),s=e.pageNumber(),a=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;a=o===s}return typeof t=="number"?t:(t==null||t===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function kee(e,t,n){var r=t.head||[],s=t.body||[],a=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(n){var l=F8(e,t.html,n,o,t.useCss)||{};r=l.head||r,s=l.body||r,a=l.foot||r}else console.error("Cannot parse html in non browser environment")}var c=t.columns||Cee(r,s,a);return{columns:c,head:r,body:s,foot:a}}function Cee(e,t,n){var r=e[0]||t[0]||n[0]||[],s=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,l;Array.isArray(r)?l=r[parseInt(a)]:l=r[a],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(r)?d=s.length:d=a+(c>0?"_".concat(c):"");var u={dataKey:d};s.push(u)}}),s}var z5=function(){function e(t,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=t.getDocument()}return e}(),Aee=function(e){T8(t,e);function t(n,r,s,a,o,l){var c=e.call(this,n,r,l)||this;return c.cell=s,c.row=a,c.column=o,c.section=a.section,c}return t}(z5),Mee=function(){function e(t,n){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,n,r,s,a,o){for(var l=0,c=n;l<c.length;l++){var d=c[l],u=new Aee(t,this,r,s,a,o),f=d(u)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,n){t.applyStyles(t.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var a=s[r];a(new z5(t,this,n))}},e.prototype.callWillDrawPageHooks=function(t,n){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var a=s[r];a(new z5(t,this,n))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return t-r.left-r.right}},e}(),B8=function(){function e(t,n,r,s,a){a===void 0&&(a=!1),this.height=0,this.raw=t,t instanceof L8&&(this.raw=t._element,this.element=t._element),this.index=n,this.section=r,this.cells=s,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(t){var n=this;return t.reduce(function(r,s){var a;return Math.max(r,((a=n.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},e.prototype.hasRowSpan=function(t){var n=this;return t.filter(function(r){var s=n.cells[r.index];return s?s.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,n){return this.getMaxCellHeight(n)<=t},e.prototype.getMinimumRowHeight=function(t,n){var r=this;return t.reduce(function(s,a){var o=r.cells[a.index];if(!o)return 0;var l=n.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>s?d:s},0)},e}(),H8=function(){function e(t,n,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=t;var a=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,a=(s=t.content)!==null&&s!==void 0?s:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");t=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:t}},e.prototype.getContentHeight=function(t,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/t*n,a=r*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},e.prototype.padding=function(t){var n=l1(this.styles.cellPadding,0);return t==="vertical"?n.top+n.bottom:t==="horizontal"?n.left+n.right:n[t]},e}(),Dee=function(){function e(t,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=n,this.index=r}return e.prototype.getMaxCustomCellWidth=function(t){for(var n=0,r=0,s=t.allRows();r<s.length;r++){var a=s[r],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},e}();function Eee(e,t){_ee(e,t);var n=[],r=0;t.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(t);o?a.width=o:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var s=t.getWidth(e.pageSize().width)-r;s&&(s=B5(n,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=B5(n,s,function(a){return a.minWidth})),s=Math.abs(s),!t.settings.horizontalPageBreak&&s>.1/e.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),Lee(t),Ree(t,e),Tee(t)}function _ee(e,t){var n=e.scaleFactor(),r=t.settings.horizontalPageBreak,s=P8(e,t);t.allRows().forEach(function(a){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=a.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,a,c,null);var f=d.padding("horizontal");d.contentWidth=_b(d.text,d.styles,e)+f;var p=_b(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=p+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||r===!0)d.contentWidth>s?(d.minWidth=s,d.wrappedWidth=s):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var h=10/n;d.minWidth=d.styles.minCellWidth||h,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(a){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=a.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=u.cellWidth||u.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function B5(e,t,n){for(var r=t,s=e.reduce(function(h,m){return h+m.wrappedWidth},0),a=0;a<e.length;a++){var o=e[a],l=o.wrappedWidth/s,c=r*l,d=o.width+c,u=n(o),f=d<u?u:d;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var p=e.filter(function(h){return t<0?h.width>n(h):!0});p.length&&(t=B5(p,t,n))}return t}function Tee(e){for(var t={},n=1,r=e.allRows(),s=0;s<r.length;s++)for(var a=r[s],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(n>1)n--,delete a.cells[c.index];else if(d)d.cell.height+=a.height,n=d.cell.colSpan,delete a.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var u=a.cells[c.index];if(!u)continue;if(u.height=a.height,u.rowSpan>1){var f=r.length-s,p=u.rowSpan>f?f:u.rowSpan;t[c.index]={cell:u,left:p,row:a}}}}}function Lee(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var r=t[n],s=null,a=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])a+=c.width,delete r.cells[c.index];else if(s){var d=s;delete r.cells[c.index],s=null,d.width=c.width+a}else{var d=r.cells[c.index];if(!d)continue;if(o=d.colSpan,a=0,d.colSpan>1){s=d,a+=c.width;continue}d.width=c.width+a}}}function Ree(e,t){for(var n={count:0,height:0},r=0,s=e.allRows();r<s.length;r++){for(var a=s[r],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=a.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=aD(d.text,u,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=aD(d.text,u,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var f=d.styles.overflow(d.text,u);typeof f=="string"?d.text=[f]:d.text=f}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var p=d.contentHeight/d.rowSpan;d.rowSpan>1&&n.count*n.height<p*d.rowSpan?n={height:p,count:d.rowSpan}:n&&n.count>0&&n.height>p&&(p=n.height),p>a.height&&(a.height=p)}}n.count--}}function aD(e,t,n,r,s){return e.map(function(a){return Oee(a,t,n,r,s)})}function Oee(e,t,n,r,s){var a=1e4*r.scaleFactor();if(t=Math.ceil(t*a)/a,t>=_b(e,n,r))return e;for(;t<_b(e+s,n,r)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+s}function U8(e,t){var n=new Lh(e),r=Pee(t,n.scaleFactor()),s=new Mee(t,r);return Eee(n,s),n.applyStyles(n.userStyles),s}function Pee(e,t){var n=e.content,r=Fee(n.columns);if(n.head.length===0){var s=iD(r,"head");s&&n.head.push(s)}if(n.foot.length===0){var s=iD(r,"foot");s&&n.foot.push(s)}var a=e.settings.theme,o=e.styles;return{columns:r,head:Tw("head",n.head,r,o,a,t),body:Tw("body",n.body,r,o,a,t),foot:Tw("foot",n.foot,r,o,a,t)}}function Tw(e,t,n,r,s,a){var o={},l=t.map(function(c,d){for(var u=0,f={},p=0,h=0,m=0,g=n;m<g.length;m++){var x=g[m];if(o[x.index]==null||o[x.index].left===0)if(h===0){var y=void 0;Array.isArray(c)?y=c[x.index-p-u]:y=c[x.dataKey];var v={};typeof y=="object"&&!Array.isArray(y)&&(v=(y==null?void 0:y.styles)||{});var N=zee(e,x,d,s,r,a,v),j=new H8(y,N,e);f[x.dataKey]=j,f[x.index]=j,h=j.colSpan-1,o[x.index]={left:j.rowSpan-1,times:h}}else h--,p++;else o[x.index].left--,h=o[x.index].times,u++}return new B8(c,d,e,f)});return l}function iD(e,t){var n={};return e.forEach(function(r){if(r.raw!=null){var s=Iee(t,r.raw);s!=null&&(n[r.dataKey]=s)}}),Object.keys(n).length>0?n:null}function Iee(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Fee(e){return e.map(function(t,n){var r,s;return typeof t=="object"?s=(r=t.dataKey)!==null&&r!==void 0?r:n:s=n,new Dee(s,t,n)})}function zee(e,t,n,r,s,a,o){var l=pee(r),c;e==="head"?c=s.headStyles:e==="body"?c=s.bodyStyles:e==="foot"&&(c=s.footStyles);var d=$l({},l.table,l[e],s.styles,c),u=s.columnStyles[t.dataKey]||s.columnStyles[t.index]||{},f=e==="body"?u:{},p=e==="body"&&n%2===0?$l({},l.alternateRow,s.alternateRowStyles):{},h=hee(a),m=$l({},h,d,p,f);return $l(m,o)}function Bee(e,t,n){var r;n===void 0&&(n={});var s=P8(e,t),a=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var h=t.columns.find(function(m){return m.dataKey===p||m.index===p});h&&!a.has(h.index)&&(a.set(h.index,!0),o.push(h.index),l.push(t.columns[h.index]),s-=h.wrappedWidth)});for(var d=!0,u=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;u<t.columns.length;){if(a.has(u)){u++;continue}var f=t.columns[u].wrappedWidth;if(d||s>=f)d=!1,o.push(u),l.push(t.columns[u]),s-=f;else break;u++}return{colIndexes:o,columns:l,lastIndex:u-1}}function Hee(e,t){for(var n=[],r=0;r<t.columns.length;r++){var s=Bee(e,t,{start:r});s.columns.length&&(n.push(s),r=s.lastIndex)}return n}function $8(e,t){var n=t.settings,r=n.startY,s=n.margin,a={x:s.left,y:r},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=r+s.bottom+o;if(n.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(p,h){return p+h.height},0);l+=d}var u=new Lh(e);(n.pageBreak==="always"||n.startY!=null&&l>u.pageSize().height)&&(V8(u),a.y=s.top),t.callWillDrawPageHooks(u,a);var f=$l({},a);t.startPageNumber=u.pageNumber(),n.horizontalPageBreak?Uee(u,t,f,a):(u.applyStyles(u.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(p){return hc(u,t,p,a,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(p,h){var m=h===t.body.length-1;Tb(u,t,p,m,f,a,t.columns)}),u.applyStyles(u.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(p){return hc(u,t,p,a,t.columns)})),R8(u,t,f,a),t.callEndPageHooks(u,a),t.finalY=a.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function Uee(e,t,n,r){var s=Hee(e,t),a=t.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(d,u){e.applyStyles(e.userStyles),u>0?eg(e,t,n,r,d.columns,!0):oD(e,t,r,d.columns),$ee(e,t,n,r,d.columns),Lw(e,t,r,d.columns)});else for(var o=-1,l=s[0],c=function(){var d=o;if(l){e.applyStyles(e.userStyles);var u=l.columns;o>=0?eg(e,t,n,r,u,!0):oD(e,t,r,u),d=lD(e,t,o+1,r,u),Lw(e,t,r,u)}var f=d-o;s.slice(1).forEach(function(p){e.applyStyles(e.userStyles),eg(e,t,n,r,p.columns,!0),lD(e,t,o+1,r,p.columns,f),Lw(e,t,r,p.columns)}),o=d};o<t.body.length-1;)c()}function oD(e,t,n,r){var s=t.settings;e.applyStyles(e.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&t.head.forEach(function(a){return hc(e,t,a,n,r)})}function $ee(e,t,n,r,s){e.applyStyles(e.userStyles),t.body.forEach(function(a,o){var l=o===t.body.length-1;Tb(e,t,a,l,n,r,s)})}function lD(e,t,n,r,s,a){e.applyStyles(e.userStyles),a=a??t.body.length;var o=Math.min(n+a,t.body.length),l=-1;return t.body.slice(n,o).forEach(function(c,d){var u=n+d===t.body.length-1,f=q8(e,t,u,r);c.canEntireRowFit(f,s)&&(hc(e,t,c,r,s),l=n+d)}),l}function Lw(e,t,n,r){var s=t.settings;e.applyStyles(e.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&t.foot.forEach(function(a){return hc(e,t,a,n,r)})}function qee(e,t,n){var r=n.getLineHeight(e.styles.fontSize),s=e.padding("vertical"),a=Math.floor((t-s)/r);return Math.max(0,a)}function Vee(e,t,n,r){var s={};e.spansMultiplePages=!0,e.height=0;for(var a=0,o=0,l=n.columns;o<l.length;o++){var c=l[o],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new H8(d.raw,d.styles,d.section);u=$l(u,d),u.text=[];var f=qee(d,t,r);d.text.length>f&&(u.text=d.text.splice(f,d.text.length));var p=r.scaleFactor(),h=r.getLineHeightFactor();d.contentHeight=d.getContentHeight(p,h),d.contentHeight>=t&&(d.contentHeight=t,u.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),u.contentHeight=u.getContentHeight(p,h),u.contentHeight>a&&(a=u.contentHeight),s[c.index]=u}}var m=new B8(e.raw,-1,e.section,s,!0);m.height=a;for(var g=0,x=n.columns;g<x.length;g++){var c=x[g],u=m.cells[c.index];u&&(u.height=m.height);var d=e.cells[c.index];d&&(d.height=e.height)}return m}function Yee(e,t,n,r){var s=e.pageSize().height,a=r.settings.margin,o=a.top+a.bottom,l=s-o;t.section==="body"&&(l-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=t.getMinimumRowHeight(r.columns,e),d=c<n;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=t.hasRowSpan(r.columns),f=t.getMaxCellHeight(r.columns)>l;return f?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||r.settings.rowPageBreak==="avoid")}function Tb(e,t,n,r,s,a,o){var l=q8(e,t,r,a);if(n.canEntireRowFit(l,o))hc(e,t,n,a,o);else if(Yee(e,n,l,t)){var c=Vee(n,l,t,e);hc(e,t,n,a,o),eg(e,t,s,a,o),Tb(e,t,c,r,s,a,o)}else eg(e,t,s,a,o),Tb(e,t,n,r,s,a,o)}function hc(e,t,n,r,s){r.x=t.settings.margin.left;for(var a=0,o=s;a<o.length;a++){var l=o[a],c=n.cells[l.index];if(!c){r.x+=l.width;continue}e.applyStyles(c.styles),c.x=r.x,c.y=r.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,n,l,r);if(d===!1){r.x+=l.width;continue}Wee(e,c,r);var u=c.getTextPos();_8(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,n,l,r),r.x+=l.width}r.y+=n.height}function Wee(e,t,n){var r=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=O8(r.lineWidth,r.fillColor);s&&e.rect(t.x,n.y,t.width,t.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),Gee(e,t,n,r.lineWidth))}function Gee(e,t,n,r){var s,a,o,l;r.top&&(s=n.x,a=n.y,o=n.x+t.width,l=n.y,r.right&&(o+=.5*r.right),r.left&&(s-=.5*r.left),c(r.top,s,a,o,l)),r.bottom&&(s=n.x,a=n.y+t.height,o=n.x+t.width,l=n.y+t.height,r.right&&(o+=.5*r.right),r.left&&(s-=.5*r.left),c(r.bottom,s,a,o,l)),r.left&&(s=n.x,a=n.y,o=n.x,l=n.y+t.height,r.top&&(a-=.5*r.top),r.bottom&&(l+=.5*r.bottom),c(r.left,s,a,o,l)),r.right&&(s=n.x+t.width,a=n.y,o=n.x+t.width,l=n.y+t.height,r.top&&(a-=.5*r.top),r.bottom&&(l+=.5*r.bottom),c(r.right,s,a,o,l));function c(d,u,f,p,h){e.getDocument().setLineWidth(d),e.getDocument().line(u,f,p,h,"S")}}function q8(e,t,n,r){var s=t.settings.margin.bottom,a=t.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(s+=t.getFootHeight(t.columns)),e.pageSize().height-r.y-s}function eg(e,t,n,r,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!a&&t.foot.forEach(function(l){return hc(e,t,l,r,s)}),t.callEndPageHooks(e,r);var o=t.settings.margin;R8(e,t,n,r),V8(e),t.pageNumber++,r.x=o.left,r.y=o.top,n.y=o.top,t.callWillDrawPageHooks(e,r),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return hc(e,t,l,r,s)}),e.applyStyles(e.userStyles))}function V8(e){var t=e.pageNumber();e.setPage(t+1);var n=e.pageNumber();return n===t?(e.addPage(),!0):!1}function Kee(e){e.API.autoTable=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],s=z8(this,r),a=U8(this,s);return $8(this,a),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,n,r,s){_8(t,n,r,s,this)},e.API.autoTableSetDefaults=function(t){return Lh.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,n){Lh.setDefaults(t,n)},e.API.autoTableHtmlToJson=function(t,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Lh(this),a=F8(s,t,window,n,!1),o=a.head,l=a.body,c=((r=o[0])===null||r===void 0?void 0:r.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var Rw;function Ow(e,t){var n=z8(e,t),r=U8(e,n);$8(e,r)}try{if(typeof window<"u"&&window){var cD=window,dD=cD.jsPDF||((Rw=cD.jspdf)===null||Rw===void 0?void 0:Rw.jsPDF);dD&&Kee(dD)}}catch(e){console.error("Could not apply autoTable plugin",e)}const Jee="/assets/payslip-logo-BamWBjEO.png",Xee=e=>new Promise((t,n)=>{const r=new Image;r.setAttribute("crossOrigin","anonymous"),r.onload=()=>{const s=document.createElement("canvas");s.width=r.width,s.height=r.height;const a=s.getContext("2d");a==null||a.drawImage(r,0,0);const o=s.toDataURL("image/png");t(o)},r.onerror=s=>n(s),r.src=e}),Qee=e=>"Rupees "+e.toLocaleString()+" Only",Y8=async(e,t)=>{var m;const n=new St,r=n.internal.pageSize.width;try{const g=await Xee(Jee);n.addImage(g,"PNG",15,15,60,15)}catch(g){console.error("Error loading logo",g),n.setFontSize(20),n.setFont("helvetica","bold"),n.text("neointeraction",23,20)}n.setFontSize(10),n.setFont("helvetica","bold"),n.text("Neointeraction Design",15,35),n.setFont("helvetica","normal"),n.setTextColor(80,80,80),n.text("# M-98, 2nd Floor, LIC Housing",15,40),n.text("Colony, HAL 3rd Stage, Jeevan Bima",15,44),n.text("Nagar, Bengaluru, Karnataka 560075",15,48),n.setTextColor(41,128,185),n.text("Phone: +91- 9513338744",15,56),n.text("Email: info@neointeraction.com",15,61),n.setFontSize(14),n.setTextColor(192,57,43),n.setFont("helvetica","bold"),n.text("PAYSLIP",r/2,35,{align:"center"});const s=70;n.setFillColor(100,100,100),n.rect(85,s,r-100,15,"F"),n.setTextColor(255,255,255),n.setFontSize(8),n.setFont("helvetica","bold"),n.text("PAY DATE",95,s+5),n.text("PERIOD",135,s+5),n.text("ISSUED ON",175,s+5),n.setFillColor(230,230,230),n.rect(85,s+7,r-100,8,"F"),n.setTextColor(0,0,0),n.setFontSize(8),n.text("Dec 01, 2025",95,s+12),n.text(`${e.month} ${e.year}`,135,s+12),n.text(new Date().toLocaleDateString(),175,s+12),n.setFillColor(100,100,100),n.rect(15,s+20,r-30,7,"F"),n.setTextColor(255,255,255),n.setFontSize(9),n.text("EMPLOYEE INFORMATION",r/2,s+25,{align:"center"}),n.setTextColor(0,0,0),n.setFontSize(9);const a=s+35,o=15,l=60,c=110,d=150,u=6;n.setFont("helvetica","normal"),n.text("Employee Name",o,a),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.name)||"N/A",l,a),n.setFont("helvetica","normal"),n.text("Employee ID",o,a+u),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.employeeId)||"N/A",l,a+u),n.setFont("helvetica","normal"),n.text("Designation",o,a+u*2),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.designation)||"N/A",l,a+u*2),n.setFont("helvetica","normal"),n.text("Department",o,a+u*3),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.department)||"N/A",l,a+u*3),n.setFont("helvetica","normal"),n.text("Project Location",o,a+u*4),n.setFont("helvetica","bold"),n.text("Bangalore",l,a+u*4),n.setFont("helvetica","normal"),n.text("Email",c,a),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.email)||"N/A",d,a),n.setFont("helvetica","normal"),n.text("DOJ",c,a+u),n.setFont("helvetica","bold");const f=t!=null&&t.doj?new Date(t.doj).toLocaleDateString():"N/A";n.text(f,d,a+u),n.setFont("helvetica","normal"),n.text("PAN",c,a+u*2),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.pan)||"N/A",d,a+u*2),n.setFont("helvetica","normal"),n.text("Bank Name",c,a+u*3),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.bankName)||"N/A",d,a+u*3),n.setFont("helvetica","normal"),n.text("Bank Account No",c,a+u*4),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.bankAccountNo)||"N/A",d,a+u*4);let p=a+u*6;Ow(n,{startY:p,head:[["Earnings","Amount INR"]],body:[["Basic Pay",e.basicPay.toFixed(2)],["House Rent Allowance",e.hra.toFixed(2)],["Transport and Conveyance","1,500.00"],["Special Allowance",(e.grossSalary-e.basicPay-e.hra-1500).toFixed(2)],[{content:"Gross Earnings",styles:{fontStyle:"bold"}},{content:e.grossSalary.toFixed(2),styles:{fontStyle:"bold"}}]],theme:"plain",headStyles:{fillColor:[220,220,220],textColor:0,fontStyle:"bold"},styles:{fontSize:9,cellPadding:2,lineColor:[200,200,200],lineWidth:.1},columnStyles:{0:{cellWidth:130},1:{cellWidth:50,halign:"right"}},margin:{left:15,right:15}}),p=n.lastAutoTable.finalY+5;const h=(e.deductions||[]).map(g=>[g.name,g.amount.toFixed(2),"0.00"]);h.push([{content:"TOTAL DEDUCTIONS",styles:{fontStyle:"bold"}},{content:e.totalDeductions.toFixed(2),styles:{fontStyle:"bold"}},{content:"0.00",styles:{fontStyle:"bold"}}]),Ow(n,{startY:p,head:[["DEDUCTIONS","CURRENT","YTD"]],body:h,theme:"plain",headStyles:{fillColor:[200,200,200],textColor:0,fontStyle:"bold"},styles:{fontSize:9,cellPadding:2,lineColor:[200,200,200],lineWidth:.1},columnStyles:{0:{cellWidth:90},1:{cellWidth:45,halign:"right"},2:{cellWidth:45,halign:"right"}},margin:{left:15,right:15}}),p=n.lastAutoTable.finalY+5,Ow(n,{startY:p,body:[[{content:"Net Pay",styles:{halign:"right",fontStyle:"bold"}},{content:`Rs ${e.netSalary.toFixed(2)}`,styles:{halign:"left",fontStyle:"bold"}}],[{content:Qee(e.netSalary),colSpan:2,styles:{halign:"center",fontStyle:"italic",fontSize:9}}]],theme:"plain",styles:{cellPadding:3,lineColor:[200,200,200],lineWidth:.1,fillColor:[245,245,245]},columnStyles:{0:{cellWidth:130},1:{cellWidth:50}},margin:{left:15,right:15}}),n.save(`Payslip_${e.month}_${e.year}_${(m=t==null?void 0:t.name)==null?void 0:m.split(" ")[0]}.pdf`)};function xx(){const{user:e}=cn(),[t,n]=C.useState(null),[r,s]=C.useState(!0);C.useEffect(()=>{(async()=>{try{s(!0);const c=await xe.getMyPayslips();if(c.payslips&&c.payslips.length>0){const d=c.payslips.sort((u,f)=>new Date(f.createdAt).getTime()-new Date(u.createdAt).getTime());n(d[0])}}catch{}finally{s(!1)}})()},[]);const a=async()=>{t&&e&&await Y8(t,e)},o=()=>{const l=new Date;return new Date(l.getFullYear(),l.getMonth()+1,1).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})};return r?i.jsx("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border p-6 h-full min-h-[180px] flex items-center justify-center",children:i.jsx("p",{className:"text-text-secondary",children:"Loading payroll info..."})}):t?i.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border p-6 h-full flex flex-col justify-between transition-all hover:shadow-md",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:i.jsx(Gh,{className:"text-green-600",size:20})}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Payroll & Salary"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("p",{className:"text-sm text-text-secondary mb-1",children:["Last Paid Salary (",t.month,")"]}),i.jsxs("h3",{className:"text-2xl font-bold text-text-primary",children:["",t.netSalary.toLocaleString()]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary mb-6",children:[i.jsx(pa,{size:14}),i.jsxs("span",{children:["Next Pay Date:"," ",i.jsx("span",{className:"font-medium text-text-primary",children:o()})]})]})]}),i.jsxs("button",{onClick:a,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-brand-primary/10 hover:bg-brand-primary/20 text-brand-primary rounded-lg transition-colors text-sm font-medium",children:[i.jsx(xf,{size:16})," Download Payslip"]})]}):i.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border p-6 h-full min-h-[180px] flex flex-col items-center justify-center text-center",children:[i.jsx("div",{className:"p-3 bg-brand-primary/10 rounded-full mb-3",children:i.jsx(Gh,{className:"text-brand-primary",size:24})}),i.jsx("p",{className:"text-text-secondary text-sm",children:"No payslip data available yet."})]})}function Dp(){const[e,t]=C.useState("holiday"),{widgetAnimationPlayed:n,setWidgetAnimationPlayed:r}=FS(),[s,a]=C.useState(null),[o,l]=C.useState("birthdays"),[c,d]=C.useState({birthdays:[],anniversaries:[]}),[u,f]=C.useState(!0);C.useEffect(()=>{if((async()=>{try{f(!0);const[m,g]=await Promise.all([xe.getHolidays(new Date().getFullYear()),xe.getUpcomingEvents()]),x=new Date;x.setHours(0,0,0,0);const y=m.filter(j=>new Date(j.date)>=x).sort((j,D)=>new Date(j.date).getTime()-new Date(D.date).getTime())[0];a(y);const v=new Date().getMonth(),N={birthdays:(g.birthdays||[]).filter(j=>new Date(j.date).getMonth()===v),anniversaries:(g.anniversaries||[]).filter(j=>new Date(j.date).getMonth()===v)};d(N)}catch(m){console.error("Failed to fetch widget data",m)}finally{f(!1)}})(),!n){const m=setTimeout(()=>{t("celebrations")},5e3),g=setTimeout(()=>{t("holiday"),r()},1e4);return()=>{clearTimeout(m),clearTimeout(g)}}},[]);const p=o==="birthdays"?c.birthdays:c.anniversaries;return e==="holiday"?i.jsxs("div",{className:"bg-gradient-to-br from-brand-primary to-brand-secondary p-6 rounded-lg shadow-lg text-white relative overflow-hidden h-full min-h-[200px] transition-all duration-300",children:[i.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 transform translate-x-1/3 -translate-y-1/3",children:i.jsx(pa,{size:200})}),i.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:i.jsx(pa,{className:"text-white",size:24})}),i.jsx("h2",{className:"text-lg font-semibold",children:"Upcoming Holiday"})]}),i.jsx("button",{onClick:()=>t("celebrations"),className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors text-white/80 hover:text-white",title:"View Celebrations",children:i.jsx(qC,{size:20})})]}),u?i.jsx("div",{className:"text-center py-8 opacity-80",children:"Loading..."}):s?i.jsxs("div",{className:"text-center mt-2",children:[i.jsx("p",{className:"text-white/80 font-medium mb-2 uppercase tracking-wider text-xs",children:"Next Holiday"}),i.jsx("h3",{className:"text-3xl font-bold mb-2 truncate",title:s.name,children:s.name}),i.jsx("p",{className:"text-white/90 font-medium text-lg",children:qi(new Date(s.date),"MMMM do, yyyy")}),i.jsxs("div",{className:"mt-6 inline-flex items-center px-4 py-2 rounded-full bg-white/20 backdrop-blur-sm text-sm font-medium",children:[i.jsx(Es,{size:16,className:"mr-2"}),i.jsxs("span",{children:[Math.ceil((new Date(s.date).getTime()-new Date().setHours(0,0,0,0))/(1e3*60*60*24))," ","days to go"]})]})]}):i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"opacity-80",children:"No upcoming holidays found."})})]})]}):i.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border h-full flex flex-col min-h-[200px] max-h-[280px] transition-all duration-300",children:[i.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-pink-50 rounded-lg",children:i.jsx(qC,{className:"text-pink-500",size:24})}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Celebrations"})]}),i.jsx("button",{onClick:()=>t("holiday"),className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-gray-500 hover:text-brand-primary",title:"View Holidays",children:i.jsx(pa,{size:20})})]}),i.jsxs("div",{className:"flex border-b border-border",children:[i.jsxs("button",{onClick:()=>l("birthdays"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors ${o==="birthdays"?"text-pink-600 border-b-2 border-pink-500 bg-pink-50/50":"text-text-secondary hover:bg-gray-50"}`,children:[i.jsx(q2,{size:16,className:o==="birthdays"?"text-pink-500":"text-gray-400"}),"Birthdays (",c.birthdays.length,")"]}),i.jsxs("button",{onClick:()=>l("anniversaries"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors ${o==="anniversaries"?"text-amber-600 border-b-2 border-amber-500 bg-amber-50/50":"text-text-secondary hover:bg-gray-50"}`,children:[i.jsx(id,{size:16,className:o==="anniversaries"?"text-amber-500":"text-gray-400"}),"Anniversaries (",c.anniversaries.length,")"]})]}),i.jsx("div",{className:"p-4 flex-1 overflow-y-auto custom-scrollbar",children:u?i.jsx("div",{className:"text-center py-8 text-sm text-text-secondary",children:"Loading..."}):p.length===0?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-8",children:[i.jsx("div",{className:`p-4 rounded-full mb-3 ${o==="birthdays"?"bg-pink-50":"bg-amber-50"}`,children:o==="birthdays"?i.jsx(q2,{size:32,className:"text-pink-300"}):i.jsx(id,{size:32,className:"text-amber-300"})}),i.jsxs("p",{className:"text-text-secondary text-sm",children:["No upcoming ",o," this month"]})]}):i.jsx("div",{className:"space-y-3",children:p.map(h=>i.jsxs("div",{className:"flex items-center justify-between group p-2 hover:bg-bg-main rounded-lg transition-colors border border-transparent hover:border-border",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[h.profilePicture?i.jsx("img",{src:`http://localhost:5001/${h.profilePicture}`,alt:h.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"}):i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-sm ${o==="birthdays"?"bg-gradient-to-br from-pink-400 to-rose-500":"bg-gradient-to-br from-amber-400 to-orange-500"}`,children:h.name.charAt(0)}),i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-0.5 shadow-sm",children:o==="birthdays"?i.jsx(q2,{size:10,className:"text-pink-500"}):i.jsx(id,{size:10,className:"text-amber-500"})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-text-primary",children:h.name}),i.jsx("p",{className:"text-xs text-text-secondary",children:h.designation})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-full ${o==="birthdays"?"bg-pink-100 text-pink-700":"bg-amber-100 text-amber-700"}`,children:new Date(h.date).toLocaleDateString("en-US",{day:"numeric",month:"short"})}),o==="anniversaries"&&i.jsxs("p",{className:"text-[10px] text-text-secondary mt-1",children:[h.years," Year",h.years>1?"s":""]})]})]},h.id))})})]})}function yx(){const[e,t]=C.useState("clocked-out"),[n,r]=C.useState(null),[s,a]=C.useState(!0),[o,l]=C.useState(!1),[c,d]=C.useState("00:00:00"),[u,f]=C.useState("00:00"),[p,h]=C.useState(!1),[m,g]=C.useState(""),x=async()=>{try{const S=await xe.getAttendanceStatus();t(S.status),r(S.timeEntry);const E=new Date,I=new Date(E.setHours(0,0,0,0)).toISOString(),L=new Date(E.setHours(23,59,59,999)).toISOString(),O=await xe.getAttendanceHistory({startDate:I,endDate:L}),F=Array.isArray(O)?O:O.entries||O.history||[];y(F,S.status,S.timeEntry)}catch(S){console.error("Failed to fetch attendance widget data:",S)}finally{a(!1)}};C.useEffect(()=>{x();const S=setInterval(x,6e4);return()=>clearInterval(S)},[]),C.useEffect(()=>{let S;return e==="clocked-in"&&(n!=null&&n.clockIn)?S=setInterval(()=>{const E=new Date(n.clockIn).getTime(),L=new Date().getTime()-E,O=Math.floor(L/(1e3*60*60)),F=Math.floor(L%(1e3*60*60)/(1e3*60)),U=Math.floor(L%(1e3*60)/1e3);d(`${O.toString().padStart(2,"0")}:${F.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}`)},1e3):d("00:00:00"),()=>clearInterval(S)},[e,n]);const y=(S,E,I)=>{let L=0;if(S.forEach(U=>{if(U.clockIn&&U.clockOut){const W=new Date(U.clockIn).getTime(),X=new Date(U.clockOut).getTime();L+=X-W}}),E==="clocked-in"&&(I!=null&&I.clockIn)){const U=new Date(I.clockIn).getTime(),W=new Date().getTime();L+=W-U}const O=Math.floor(L/(1e3*60*60)),F=Math.floor(L%(1e3*60*60)/(1e3*60));f(`${O.toString().padStart(2,"0")}:${F.toString().padStart(2,"0")}`)},v=async()=>{l(!0);try{const S=await xe.clockIn();t("clocked-in"),r(S.timeEntry),x()}catch(S){alert(S.message)}finally{l(!1)}},N=async()=>{l(!0);try{const S=await xe.startBreak();t("on-break"),r(S.timeEntry)}catch(S){alert(S.message)}finally{l(!1)}},j=async()=>{l(!0);try{const S=await xe.endBreak();t("clocked-in"),r(S.timeEntry)}catch(S){alert(S.message)}finally{l(!1)}},D=async()=>{l(!0);try{await xe.clockOut(m),t("clocked-out"),r(null),d("00:00:00"),h(!1),g(""),x()}catch(S){alert(S.message)}finally{l(!1)}};if(s)return i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsx(le,{className:"h-6 w-1/3 rounded mb-4"}),i.jsx(le,{className:"h-20 w-full rounded"})]});const T=e==="clocked-in",A=e==="on-break";return i.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border overflow-hidden relative",children:[i.jsx("div",{className:`absolute top-0 left-0 w-full h-1 bg-gradient-to-r ${T?"from-indigo-500 to-purple-500":A?"from-yellow-400 to-orange-400":"from-gray-400 to-gray-300"}`}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:`p-2 rounded-lg ${T?"bg-indigo-100 text-indigo-600":A?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-500"}`,children:i.jsx(Es,{size:24})}),i.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Time Tracking"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{className:`relative overflow-hidden rounded-xl p-5 border transition-all duration-300 ${T?"bg-gradient-to-br from-indigo-50 to-purple-50 border-indigo-200":A?"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-200":"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200"}`,children:[i.jsxs("div",{className:"relative z-10 flex flex-row justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-text-secondary mb-1",children:A?"On Break":"Current Session"}),i.jsx("h3",{className:`text-3xl font-mono font-bold tracking-tight ${T?"text-indigo-700":A?"text-yellow-700":"text-gray-400"}`,children:c})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[T&&i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"flex h-2 w-2",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-indigo-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-indigo-500"})]}),i.jsx("span",{className:"text-xs font-semibold text-indigo-700 uppercase tracking-wide",children:"Live"})]}),A&&i.jsx("span",{className:"text-xs font-semibold text-yellow-700 uppercase tracking-wide",children:"Paused"})]})]}),i.jsx("div",{className:`absolute -bottom-6 -right-6 w-32 h-32 rounded-full opacity-[0.05] ${T?"bg-indigo-500":A?"bg-yellow-500":"bg-gray-500"}`})]}),i.jsxs("div",{className:"flex gap-2",children:[e==="clocked-out"&&i.jsxs("button",{onClick:v,disabled:o,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold text-sm transition-colors shadow-sm",children:[o?i.jsx(Hr,{className:"animate-spin",size:16}):i.jsx(f5,{size:16}),"Clock In"]}),e==="clocked-in"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:N,disabled:o,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-semibold text-sm transition-colors shadow-sm",children:[o?i.jsx(Hr,{className:"animate-spin",size:16}):i.jsx(_g,{size:16}),"Break"]}),i.jsxs("button",{onClick:()=>h(!0),disabled:o,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold text-sm transition-colors shadow-sm",children:[o?i.jsx(Hr,{className:"animate-spin",size:16}):i.jsx(Tg,{size:16}),"Clock Out"]})]}),e==="on-break"&&i.jsxs("button",{onClick:j,disabled:o,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold text-sm transition-colors shadow-sm",children:[o?i.jsx(Hr,{className:"animate-spin",size:16}):i.jsx(f5,{size:16}),"Resume Work"]})]}),i.jsxs("div",{className:"flex justify-between items-center px-1",children:[i.jsx("p",{className:"text-xs text-text-secondary",children:"Total Today"}),i.jsxs("p",{className:"text-sm font-bold text-text-primary",children:[u," hrs"]})]})]})]}),p&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-bg-card rounded-lg shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200 border border-border",children:[i.jsx("div",{className:"p-4 border-b border-border bg-bg-main",children:i.jsx("h3",{className:"font-semibold text-text-primary",children:"Clock Out"})}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Today's Completed Tasks"}),i.jsx("textarea",{value:m,onChange:S=>g(S.target.value),placeholder:"Summary of what you worked on today...",className:"w-full p-2 border border-border rounded-lg bg-bg-card focus:outline-none focus:border-brand-primary min-h-[100px] text-sm text-text-primary resize-none",autoFocus:!0})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[i.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium",children:"Cancel"}),i.jsxs("button",{onClick:D,disabled:o,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium flex items-center gap-2",children:[o&&i.jsx(Hr,{className:"animate-spin",size:16}),"Confirm Clock Out"]})]})]})]})})]})}function bx(){const e=Fa(),[t,n]=C.useState("my-leaves"),[r,s]=C.useState([]),[a,o]=C.useState([]),[l,c]=C.useState(!0),{widgetAnimationPlayed:d}=FS();C.useEffect(()=>{if((async()=>{try{const[m,g]=await Promise.all([xe.getLeaveStats(),xe.getEmployeesOnLeave()]);s(m.stats||[]),o(g||[])}catch(m){console.error("Failed to fetch leave widget data:",m)}finally{c(!1)}})(),!d){const m=setTimeout(()=>{n("colleagues")},5e3),g=setTimeout(()=>{n("my-leaves")},1e4);return()=>{clearTimeout(m),clearTimeout(g)}}},[]);const u=a.slice(0,4),f=a.length-u.length,p=h=>{const m=h.toLowerCase();return m.includes("casual")?i.jsx(AL,{className:"text-blue-600",size:14}):m.includes("sick")||m.includes("medical")?i.jsx(CL,{className:"text-red-600",size:14}):m.includes("floating")?i.jsx(Pu,{className:"text-purple-600",size:14}):m.includes("maternity")||m.includes("paternity")?i.jsx(Pa,{className:"text-pink-600",size:14}):i.jsx(Pu,{className:"text-gray-600",size:14})};return i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border flex flex-col h-full min-h-[200px] transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-status-warning/10 rounded-lg",children:i.jsx(Pu,{className:"text-status-warning",size:24})}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Leave Status"})]}),i.jsx("button",{onClick:()=>n(t==="my-leaves"?"colleagues":"my-leaves"),className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-gray-500 hover:text-brand-primary",title:t==="my-leaves"?"View Colleagues on Leave":"View My Leave Balance",children:t==="my-leaves"?i.jsx(Pa,{size:20}):i.jsx(hi,{size:20})})]}),t==="my-leaves"?i.jsxs("div",{className:"animate-slide-in-right",children:[i.jsx("p",{className:"text-xs font-medium text-text-secondary mb-3",children:"Your Pending Leaves:"}),i.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:l?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col items-center justify-center p-3 pb-0 bg-bg-main rounded-lg text-center h-[72px]",children:[i.jsx(le,{className:"h-4 w-4 rounded mb-2"}),i.jsx(le,{className:"h-3 w-12 mb-1"}),i.jsx(le,{className:"h-5 w-8"})]}),i.jsxs("div",{className:"flex flex-col items-center justify-center p-3 pb-0 bg-bg-main rounded-lg text-center h-[72px]",children:[i.jsx(le,{className:"h-4 w-4 rounded mb-2"}),i.jsx(le,{className:"h-3 w-12 mb-1"}),i.jsx(le,{className:"h-5 w-8"})]}),i.jsxs("div",{className:"flex flex-col items-center justify-center p-3 pb-0 bg-bg-main rounded-lg text-center h-[72px]",children:[i.jsx(le,{className:"h-4 w-4 rounded mb-2"}),i.jsx(le,{className:"h-3 w-12 mb-1"}),i.jsx(le,{className:"h-5 w-8"})]})]}):r.length>0?r.map(h=>i.jsxs("div",{className:"flex flex-col items-center justify-center p-3 pb-0 bg-bg-main rounded-lg text-center",children:[i.jsx("div",{className:"mb-2",children:p(h.type)}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-text-secondary truncate w-full",children:h.type}),i.jsx("p",{className:"text-xl font-bold text-text-primary",children:h.pending})]})]},h.type)):i.jsx("div",{className:"col-span-3 text-sm text-text-secondary",children:"No stats"})}),i.jsxs("div",{className:"p-3 bg-bg-main rounded-lg flex items-center justify-between",children:[i.jsx("p",{className:"text-xs font-medium text-text-secondary",children:"Total leaves taken this year:"}),i.jsx("p",{className:"text-xl font-bold text-text-primary",children:r.reduce((h,m)=>h+(m.used||0),0)})]})]},"my-leaves"):i.jsxs("div",{className:"animate-slide-in-left h-full flex flex-col ",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("p",{className:"text-xs font-medium text-text-secondary",children:"Colleague's On Leave Today:"}),a.length===0&&i.jsx("span",{className:"text-xs text-text-muted",children:"No one"})]}),a.length>0?i.jsx("div",{className:"flex items-center  py-2",children:i.jsxs("div",{className:"flex -space-x-3",children:[u.map(h=>i.jsxs("div",{className:"relative group cursor-pointer",title:`${h.employee.firstName} ${h.employee.lastName} (${h.type})`,children:[i.jsx(uc,{src:h.employee.profilePicture?`${xs}${h.employee.profilePicture}`:void 0,name:`${h.employee.firstName} ${h.employee.lastName}`,alt:h.employee.firstName,className:"w-10 h-10 border-2 border-white hover:z-10 relative transition-transform hover:scale-110",size:"md"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-20",children:[h.employee.firstName," ",h.employee.lastName]})]},h._id)),f>0&&i.jsxs("div",{className:"w-10 h-10 rounded-full border-2 border-white bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-500 hover:bg-gray-200 cursor-pointer z-0",title:`${f} more on leave`,onClick:()=>e("/admin/dashboard"),children:["+",f]})]})}):i.jsx("div",{className:"text-center py-4 text-sm text-text-secondary",children:"Everyone is present today!"})]},"colleagues")]})}function dk(){const[e,t]=C.useState("Good Morning");return C.useEffect(()=>{const n=()=>{const s=new Date().getHours();s<12?t("Good Morning"):s<17?t("Good Afternoon"):t("Good Evening")};n();const r=setInterval(n,6e4);return()=>clearInterval(r)},[]),e}function vx(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(0);C.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await xe.getMyFeedbacks();t(d)}catch(d){console.error("Failed to fetch feedbacks",d)}finally{r(!1)}},l=()=>{a(d=>(d+1)%e.length)},c=()=>{a(d=>(d-1+e.length)%e.length)};return n?i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 shadow-sm h-full animate-pulse ",children:[i.jsx("div",{className:"h-6 w-1/3 bg-bg-hover rounded mb-4"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"h-16 bg-bg-hover rounded"}),i.jsx("div",{className:"h-16 bg-bg-hover rounded"})]})]}):i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 shadow-sm h-full md:col-span-2 lg:col-span-2 flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-brand-primary/10 rounded-lg",children:i.jsx(pb,{className:"text-brand-primary",size:20})}),i.jsx("h3",{className:"font-semibold text-lg text-text-primary",children:"Recent Feedback"})]}),e.length>1&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(at,{variant:"ghost",size:"sm",onClick:c,className:"h-8 w-8 p-0 rounded-full",children:i.jsx(gc,{size:16})}),i.jsxs("span",{className:"text-xs text-text-secondary font-medium",children:[s+1," / ",e.length]}),i.jsx(at,{variant:"ghost",size:"sm",onClick:l,className:"h-8 w-8 p-0 rounded-full",children:i.jsx(gf,{size:16})})]})]}),i.jsx("div",{className:"flex-1 flex flex-col justify-center min-h-[120px]",children:e.length===0?i.jsx("div",{className:"flex flex-col items-center justify-center text-text-muted text-sm border-2 border-dashed border-border rounded-lg p-8",children:i.jsx("p",{children:"No feedback received yet."})}):i.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300 w-full",children:i.jsxs("div",{className:"bg-bg-main p-6 rounded-lg border border-border relative",children:[i.jsx(pb,{className:"absolute top-4 left-4 text-brand-primary/10 rotate-180",size:40}),i.jsxs("p",{className:"text-text-primary text-base italic mb-6 relative z-10 text-center px-4",children:['"',e[s].message,'"']}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-text-muted relative z-10 border-t border-border/50 pt-4 w-full",children:[i.jsx("span",{className:"font-semibold text-brand-primary",children:e[s].sender.name}),i.jsx("span",{children:""}),i.jsx("span",{children:new Date(e[s].createdAt).toLocaleDateString()})]})]})})})]})}var uk={};(function e(t,n,r,s){var a=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!t.OffscreenCanvas)return!1;try{var Y=new OffscreenCanvas(1,1),q=Y.getContext("2d");q.fillRect(0,0,1,1);var _=Y.transferToImageBitmap();q.createPattern(_,"no-repeat")}catch{return!1}return!0}();function c(){}function d(Y){var q=n.exports.Promise,_=q!==void 0?q:t.Promise;return typeof _=="function"?new _(Y):(Y(c,c),null)}var u=function(Y,q){return{transform:function(_){if(Y)return _;if(q.has(_))return q.get(_);var $=new OffscreenCanvas(_.width,_.height),J=$.getContext("2d");return J.drawImage(_,0,0),q.set(_,$),$},clear:function(){q.clear()}}}(l,new Map),f=function(){var Y=Math.floor(16.666666666666668),q,_,$={},J=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(q=function(te){var Z=Math.random();return $[Z]=requestAnimationFrame(function ie(he){J===he||J+Y-1<he?(J=he,delete $[Z],te()):$[Z]=requestAnimationFrame(ie)}),Z},_=function(te){$[te]&&cancelAnimationFrame($[te])}):(q=function(te){return setTimeout(te,Y)},_=function(te){return clearTimeout(te)}),{frame:q,cancel:_}}(),p=function(){var Y,q,_={};function $(J){function te(Z,ie){J.postMessage({options:Z||{},callback:ie})}J.init=function(ie){var he=ie.transferControlToOffscreen();J.postMessage({canvas:he},[he])},J.fire=function(ie,he,ye){if(q)return te(ie,null),q;var Se=Math.random().toString(36).slice(2);return q=d(function(Ee){function Pe(qe){qe.data.callback===Se&&(delete _[Se],J.removeEventListener("message",Pe),q=null,u.clear(),ye(),Ee())}J.addEventListener("message",Pe),te(ie,Se),_[Se]=Pe.bind(null,{data:{callback:Se}})}),q},J.reset=function(){J.postMessage({reset:!0});for(var ie in _)_[ie](),delete _[ie]}}return function(){if(Y)return Y;if(!r&&a){var J=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{Y=new Worker(URL.createObjectURL(new Blob([J])))}catch(te){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",te),null}$(Y)}return Y}}(),h={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function m(Y,q){return q?q(Y):Y}function g(Y){return Y!=null}function x(Y,q,_){return m(Y&&g(Y[q])?Y[q]:h[q],_)}function y(Y){return Y<0?0:Math.floor(Y)}function v(Y,q){return Math.floor(Math.random()*(q-Y))+Y}function N(Y){return parseInt(Y,16)}function j(Y){return Y.map(D)}function D(Y){var q=String(Y).replace(/[^0-9a-f]/gi,"");return q.length<6&&(q=q[0]+q[0]+q[1]+q[1]+q[2]+q[2]),{r:N(q.substring(0,2)),g:N(q.substring(2,4)),b:N(q.substring(4,6))}}function T(Y){var q=x(Y,"origin",Object);return q.x=x(q,"x",Number),q.y=x(q,"y",Number),q}function A(Y){Y.width=document.documentElement.clientWidth,Y.height=document.documentElement.clientHeight}function S(Y){var q=Y.getBoundingClientRect();Y.width=q.width,Y.height=q.height}function E(Y){var q=document.createElement("canvas");return q.style.position="fixed",q.style.top="0px",q.style.left="0px",q.style.pointerEvents="none",q.style.zIndex=Y,q}function I(Y,q,_,$,J,te,Z,ie,he){Y.save(),Y.translate(q,_),Y.rotate(te),Y.scale($,J),Y.arc(0,0,1,Z,ie,he),Y.restore()}function L(Y){var q=Y.angle*(Math.PI/180),_=Y.spread*(Math.PI/180);return{x:Y.x,y:Y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:Y.startVelocity*.5+Math.random()*Y.startVelocity,angle2D:-q+(.5*_-Math.random()*_),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:Y.color,shape:Y.shape,tick:0,totalTicks:Y.ticks,decay:Y.decay,drift:Y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:Y.gravity*3,ovalScalar:.6,scalar:Y.scalar,flat:Y.flat}}function O(Y,q){q.x+=Math.cos(q.angle2D)*q.velocity+q.drift,q.y+=Math.sin(q.angle2D)*q.velocity+q.gravity,q.velocity*=q.decay,q.flat?(q.wobble=0,q.wobbleX=q.x+10*q.scalar,q.wobbleY=q.y+10*q.scalar,q.tiltSin=0,q.tiltCos=0,q.random=1):(q.wobble+=q.wobbleSpeed,q.wobbleX=q.x+10*q.scalar*Math.cos(q.wobble),q.wobbleY=q.y+10*q.scalar*Math.sin(q.wobble),q.tiltAngle+=.1,q.tiltSin=Math.sin(q.tiltAngle),q.tiltCos=Math.cos(q.tiltAngle),q.random=Math.random()+2);var _=q.tick++/q.totalTicks,$=q.x+q.random*q.tiltCos,J=q.y+q.random*q.tiltSin,te=q.wobbleX+q.random*q.tiltCos,Z=q.wobbleY+q.random*q.tiltSin;if(Y.fillStyle="rgba("+q.color.r+", "+q.color.g+", "+q.color.b+", "+(1-_)+")",Y.beginPath(),o&&q.shape.type==="path"&&typeof q.shape.path=="string"&&Array.isArray(q.shape.matrix))Y.fill(P(q.shape.path,q.shape.matrix,q.x,q.y,Math.abs(te-$)*.1,Math.abs(Z-J)*.1,Math.PI/10*q.wobble));else if(q.shape.type==="bitmap"){var ie=Math.PI/10*q.wobble,he=Math.abs(te-$)*.1,ye=Math.abs(Z-J)*.1,Se=q.shape.bitmap.width*q.scalar,Ee=q.shape.bitmap.height*q.scalar,Pe=new DOMMatrix([Math.cos(ie)*he,Math.sin(ie)*he,-Math.sin(ie)*ye,Math.cos(ie)*ye,q.x,q.y]);Pe.multiplySelf(new DOMMatrix(q.shape.matrix));var qe=Y.createPattern(u.transform(q.shape.bitmap),"no-repeat");qe.setTransform(Pe),Y.globalAlpha=1-_,Y.fillStyle=qe,Y.fillRect(q.x-Se/2,q.y-Ee/2,Se,Ee),Y.globalAlpha=1}else if(q.shape==="circle")Y.ellipse?Y.ellipse(q.x,q.y,Math.abs(te-$)*q.ovalScalar,Math.abs(Z-J)*q.ovalScalar,Math.PI/10*q.wobble,0,2*Math.PI):I(Y,q.x,q.y,Math.abs(te-$)*q.ovalScalar,Math.abs(Z-J)*q.ovalScalar,Math.PI/10*q.wobble,0,2*Math.PI);else if(q.shape==="star")for(var We=Math.PI/2*3,V=4*q.scalar,Ae=8*q.scalar,Ve=q.x,et=q.y,_e=5,ne=Math.PI/_e;_e--;)Ve=q.x+Math.cos(We)*Ae,et=q.y+Math.sin(We)*Ae,Y.lineTo(Ve,et),We+=ne,Ve=q.x+Math.cos(We)*V,et=q.y+Math.sin(We)*V,Y.lineTo(Ve,et),We+=ne;else Y.moveTo(Math.floor(q.x),Math.floor(q.y)),Y.lineTo(Math.floor(q.wobbleX),Math.floor(J)),Y.lineTo(Math.floor(te),Math.floor(Z)),Y.lineTo(Math.floor($),Math.floor(q.wobbleY));return Y.closePath(),Y.fill(),q.tick<q.totalTicks}function F(Y,q,_,$,J){var te=q.slice(),Z=Y.getContext("2d"),ie,he,ye=d(function(Se){function Ee(){ie=he=null,Z.clearRect(0,0,$.width,$.height),u.clear(),J(),Se()}function Pe(){r&&!($.width===s.width&&$.height===s.height)&&($.width=Y.width=s.width,$.height=Y.height=s.height),!$.width&&!$.height&&(_(Y),$.width=Y.width,$.height=Y.height),Z.clearRect(0,0,$.width,$.height),te=te.filter(function(qe){return O(Z,qe)}),te.length?ie=f.frame(Pe):Ee()}ie=f.frame(Pe),he=Ee});return{addFettis:function(Se){return te=te.concat(Se),ye},canvas:Y,promise:ye,reset:function(){ie&&f.cancel(ie),he&&he()}}}function U(Y,q){var _=!Y,$=!!x(q||{},"resize"),J=!1,te=x(q,"disableForReducedMotion",Boolean),Z=a&&!!x(q||{},"useWorker"),ie=Z?p():null,he=_?A:S,ye=Y&&ie?!!Y.__confetti_initialized:!1,Se=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Ee;function Pe(We,V,Ae){for(var Ve=x(We,"particleCount",y),et=x(We,"angle",Number),_e=x(We,"spread",Number),ne=x(We,"startVelocity",Number),de=x(We,"decay",Number),ce=x(We,"gravity",Number),De=x(We,"drift",Number),Re=x(We,"colors",j),Me=x(We,"ticks",Number),He=x(We,"shapes"),dt=x(We,"scalar"),it=!!x(We,"flat"),Qe=T(We),Et=Ve,rt=[],Yn=Y.width*Qe.x,Pt=Y.height*Qe.y;Et--;)rt.push(L({x:Yn,y:Pt,angle:et,spread:_e,startVelocity:ne,color:Re[Et%Re.length],shape:He[v(0,He.length)],ticks:Me,decay:de,gravity:ce,drift:De,scalar:dt,flat:it}));return Ee?Ee.addFettis(rt):(Ee=F(Y,rt,he,V,Ae),Ee.promise)}function qe(We){var V=te||x(We,"disableForReducedMotion",Boolean),Ae=x(We,"zIndex",Number);if(V&&Se)return d(function(ne){ne()});_&&Ee?Y=Ee.canvas:_&&!Y&&(Y=E(Ae),document.body.appendChild(Y)),$&&!ye&&he(Y);var Ve={width:Y.width,height:Y.height};ie&&!ye&&ie.init(Y),ye=!0,ie&&(Y.__confetti_initialized=!0);function et(){if(ie){var ne={getBoundingClientRect:function(){if(!_)return Y.getBoundingClientRect()}};he(ne),ie.postMessage({resize:{width:ne.width,height:ne.height}});return}Ve.width=Ve.height=null}function _e(){Ee=null,$&&(J=!1,t.removeEventListener("resize",et)),_&&Y&&(document.body.contains(Y)&&document.body.removeChild(Y),Y=null,ye=!1)}return $&&!J&&(J=!0,t.addEventListener("resize",et,!1)),ie?ie.fire(We,Ve,_e):Pe(We,Ve,_e)}return qe.reset=function(){ie&&ie.reset(),Ee&&Ee.reset()},qe}var W;function X(){return W||(W=U(null,{useWorker:!0,resize:!0})),W}function P(Y,q,_,$,J,te,Z){var ie=new Path2D(Y),he=new Path2D;he.addPath(ie,new DOMMatrix(q));var ye=new Path2D;return ye.addPath(he,new DOMMatrix([Math.cos(Z)*J,Math.sin(Z)*J,-Math.sin(Z)*te,Math.cos(Z)*te,_,$])),ye}function z(Y){if(!o)throw new Error("path confetti are not supported in this browser");var q,_;typeof Y=="string"?q=Y:(q=Y.path,_=Y.matrix);var $=new Path2D(q),J=document.createElement("canvas"),te=J.getContext("2d");if(!_){for(var Z=1e3,ie=Z,he=Z,ye=0,Se=0,Ee,Pe,qe=0;qe<Z;qe+=2)for(var We=0;We<Z;We+=2)te.isPointInPath($,qe,We,"nonzero")&&(ie=Math.min(ie,qe),he=Math.min(he,We),ye=Math.max(ye,qe),Se=Math.max(Se,We));Ee=ye-ie,Pe=Se-he;var V=10,Ae=Math.min(V/Ee,V/Pe);_=[Ae,0,0,Ae,-Math.round(Ee/2+ie)*Ae,-Math.round(Pe/2+he)*Ae]}return{type:"path",path:q,matrix:_}}function oe(Y){var q,_=1,$="#000000",J='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof Y=="string"?q=Y:(q=Y.text,_="scalar"in Y?Y.scalar:_,J="fontFamily"in Y?Y.fontFamily:J,$="color"in Y?Y.color:$);var te=10*_,Z=""+te+"px "+J,ie=new OffscreenCanvas(te,te),he=ie.getContext("2d");he.font=Z;var ye=he.measureText(q),Se=Math.ceil(ye.actualBoundingBoxRight+ye.actualBoundingBoxLeft),Ee=Math.ceil(ye.actualBoundingBoxAscent+ye.actualBoundingBoxDescent),Pe=2,qe=ye.actualBoundingBoxLeft+Pe,We=ye.actualBoundingBoxAscent+Pe;Se+=Pe+Pe,Ee+=Pe+Pe,ie=new OffscreenCanvas(Se,Ee),he=ie.getContext("2d"),he.font=Z,he.fillStyle=$,he.fillText(q,qe,We);var V=1/_;return{type:"bitmap",bitmap:ie.transferToImageBitmap(),matrix:[V,0,0,V,-Se*V/2,-Ee*V/2]}}n.exports=function(){return X().apply(this,arguments)},n.exports.reset=function(){X().reset()},n.exports.create=U,n.exports.shapeFromPath=z,n.exports.shapeFromText=oe})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),uk,!1);const Zee=uk.exports;uk.exports.create;function Nf(){const{user:e}=cn(),[t,n]=C.useState([]),[r,s]=C.useState(!0),[a,o]=C.useState(0),l=C.useRef(!1);C.useEffect(()=>{e&&u()},[e]);const c=y=>{const v=(y.left+y.width/2)/window.innerWidth,N=(y.top+y.height/2)/window.innerHeight;Zee({particleCount:100,spread:100,origin:{x:v,y:N},colors:["#FFD700","#FF69B4","#00BFFF","#32CD32","#FF4500","#9370DB"],gravity:1,scalar:1.2,startVelocity:30,ticks:200,zIndex:1e4})},d=(y,v)=>{if(!((e==null?void 0:e.id)||(e==null?void 0:e._id)))return y;const j=v.filter(T=>!T.isSeen),D=j.map(T=>T.badge._id);return D.length>0&&(y=y.map(T=>({...T,isNew:D.includes(T.badge._id)})),setTimeout(()=>{Array.from(new Set(D)).forEach(S=>{const E=document.getElementById(`badge-${S}`);if(E){const I=E.getBoundingClientRect();c(I)}});const A=j.map(S=>S._id);A.length>0&&xe.markAppreciationsAsSeen(A).catch(S=>{console.error("Failed to mark appreciations as seen",S)})},500)),y},u=async()=>{try{const y=(e==null?void 0:e.id)||(e==null?void 0:e._id);if(!y)return;const v=await xe.getAppreciations({recipientId:y}),N=new Map;v.forEach(D=>{if(D.badge){const T=N.get(D.badge._id);T?T.count+=1:N.set(D.badge._id,{badge:D.badge,count:1})}});let j=Array.from(N.values());l.current||(j=d(j,v),l.current=!0),n(j)}catch(y){console.error("Failed to fetch appreciations",y)}finally{s(!1)}},f=y=>{const v=y.currentTarget.getBoundingClientRect();c(v)},p=()=>{a>0&&o(y=>Math.max(0,y-1))},h=()=>{a+5<t.length&&o(y=>Math.min(t.length-5,y+1))};if(r)return i.jsx("div",{className:"flex gap-2 animate-pulse",children:[1,2,3].map(y=>i.jsx("div",{className:"h-10 w-10 bg-bg-hover rounded-full"},y))});if(t.length===0)return null;const m=t.slice(a,a+5),g=a>0,x=a+5<t.length;return i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/40 dark:bg-black/20 backdrop-blur-md border border-white/20 dark:border-white/10 shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden max-w-full",children:[g&&i.jsx("button",{onClick:p,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 text-text-secondary transition-colors",children:i.jsx(gc,{size:16})}),i.jsx("div",{className:"flex items-center gap-3",children:m.map(y=>i.jsx(Nd,{content:`${y.badge.title} (x${y.count})`,children:i.jsxs("div",{id:`badge-${y.badge._id}`,onClick:f,className:`flex-shrink-0 relative group cursor-pointer transition-all duration-300 hover:-translate-y-0.5 ${y.isNew?"animate-bounce":""}`,children:[i.jsx("div",{className:"absolute inset-0 bg-brand-primary/20 blur-lg rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),y.count>1&&i.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-brand-primary to-purple-500 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full z-10 border border-white dark:border-gray-800 shadow-sm leading-none ring-1 ring-black/5",children:y.count}),i.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-white/50 dark:bg-black/20 rounded-full border border-white/30 dark:border-white/10 shadow-sm group-hover:border-brand-primary/30 transition-colors",children:i.jsx("img",{src:y.badge.icon.startsWith("http")?y.badge.icon:`${xs}${y.badge.icon}`,alt:y.badge.title,className:"w-7 h-7 object-contain drop-shadow-sm group-hover:scale-125 transition-transform duration-300"})})]})},y.badge._id))}),x&&i.jsx("button",{onClick:h,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 text-text-secondary transition-colors",children:i.jsx(gf,{size:16})})]})}function ete(){var n,r,s,a;const{user:e}=cn(),t=dk();return i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-text-primary",children:[t,", ",e==null?void 0:e.name.split(" ")[0],"! "]}),i.jsxs("p",{className:"text-text-secondary mt-1",children:["Here's your dashboard for today,"," ",new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),i.jsx(Nf,{})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mb-8",children:[(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("attendance")&&((n=e.accessibleModules)==null?void 0:n.includes("attendance")))&&i.jsx(yx,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave")&&((r=e.accessibleModules)==null?void 0:r.includes("leave")))&&i.jsx(bx,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave")&&((s=e.accessibleModules)==null?void 0:s.includes("leave")))&&i.jsx(Dp,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("payroll")&&((a=e.accessibleModules)==null?void 0:a.includes("payroll")))&&i.jsx(xx,{}),i.jsx(vx,{})]})]})}function tte(){var D,T,A,S,E,I,L,O;const{user:e}=cn(),t=dk(),[n,r]=C.useState([]),[s,a]=C.useState(!0),[o,l]=C.useState(0),[c,d]=C.useState(0),[u,f]=C.useState([]),[p,h]=C.useState(0);C.useEffect(()=>{m(),g(),x();const F=setInterval(()=>{m(),g(),x()},3e4);return()=>clearInterval(F)},[]);const m=async()=>{try{const F=await xe.getTeamStatus();r(F.teamStatus||[])}catch{}finally{a(!1)}},g=async()=>{var F,U;try{const[W,X]=await Promise.all([xe.getPendingTimesheetApprovals().catch(()=>({timesheets:[]})),xe.getPendingLeaveApprovals().catch(()=>({leaveRequests:[]}))]);l(((F=W.timesheets)==null?void 0:F.length)||0),d(((U=X.leaveRequests)==null?void 0:U.length)||0)}catch{}},x=async()=>{try{const F=await xe.getProjects();f(F.projects||[])}catch{}},y=()=>{const F=n.filter(X=>X.status==="clocked-in").length,U=n.filter(X=>X.status==="on-break").length,W=n.filter(X=>X.status==="clocked-out").length;return{clockedIn:F,onBreak:U,clockedOut:W,total:n.length}},v=F=>{switch(F){case"clocked-in":return i.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-green-700 bg-green-100 px-2 py-1 rounded-full",children:[i.jsx(Es,{size:12}),"Working"]});case"on-break":return i.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-yellow-700 bg-yellow-100 px-2 py-1 rounded-full",children:[i.jsx(_g,{size:12}),"Break"]});default:return i.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:"Off"})}},N=y(),j=o+c;return i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-text-primary",children:[t,", ",e==null?void 0:e.name.split(" ")[0],"! "]}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Project status and team overview for today"})]}),i.jsx(Nf,{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("attendance")&&((D=e.accessibleModules)==null?void 0:D.includes("attendance")))&&i.jsx(yx,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave")&&((T=e.accessibleModules)==null?void 0:T.includes("leave")))&&i.jsx(bx,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave")&&((A=e.accessibleModules)==null?void 0:A.includes("leave")))&&i.jsx(Dp,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("attendance")&&((S=e.accessibleModules)==null?void 0:S.includes("attendance")))&&i.jsxs("div",{className:"bg-bg-card p-6 rounded-xl shadow-sm border border-border md:col-span-2 lg:col-span-2",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-brand-primary/10 rounded-lg text-brand-primary",children:i.jsx(Pa,{size:24})}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Live Team Status"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex gap-2 text-xs sm:text-sm hidden xl:flex",children:[i.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-bg-main rounded-full border border-border",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-status-success"}),i.jsx("span",{className:"text-text-primary font-bold",children:N.clockedIn})]}),i.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-bg-main rounded-full border border-border",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-status-warning"}),i.jsx("span",{className:"text-text-primary font-bold",children:N.onBreak})]}),i.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-bg-main rounded-full border border-border",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),i.jsx("span",{className:"text-text-primary font-bold",children:N.clockedOut})]})]}),n.length>3&&i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>h(F=>Math.max(0,F-1)),disabled:p===0,className:"p-1 rounded-full hover:bg-bg-hover disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:i.jsx(gc,{size:20,className:"text-text-secondary"})}),i.jsx("button",{onClick:()=>h(F=>Math.min(Math.ceil(n.length/3)-1,F+1)),disabled:p>=Math.ceil(n.length/3)-1,className:"p-1 rounded-full hover:bg-bg-hover disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:i.jsx(gf,{size:20,className:"text-text-secondary"})})]})]})]}),s?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 min-h-[90px]",children:[1,2,3].map(F=>i.jsxs("div",{className:"bg-bg-main p-3 rounded-lg border border-border h-[90px]",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx(le,{className:"w-8 h-8 rounded-full"}),i.jsx(le,{className:"w-16 h-5 rounded-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"w-24 h-3"}),i.jsx(le,{className:"w-16 h-3"})]})]},F))}):i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 min-h-[90px]",children:[n.slice(p*3,(p+1)*3).map(F=>i.jsxs("div",{className:"bg-bg-main p-3 rounded-lg border border-border hover:border-brand-primary/30 transition-all group animate-in fade-in duration-300",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-secondary/10 text-brand-secondary flex items-center justify-center font-bold text-xs",children:F.name.split(" ").map(U=>U[0]).join("").substring(0,2)}),v(F.status)]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-text-primary truncate text-xs",children:F.name}),i.jsx("p",{className:"text-xs text-text-secondary truncate",children:F.role||"Member"})]})]},F.employeeId)),n.length===0&&i.jsx("div",{className:"col-span-full text-center py-8 text-xs text-text-secondary border border-border border-dashed rounded-lg bg-bg-main/50",children:"No team members found."})]})]}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("payroll")&&((E=e.accessibleModules)==null?void 0:E.includes("payroll")))&&i.jsx(xx,{}),i.jsx(vx,{})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-bg-card p-6 rounded-xl shadow-sm border border-border h-full",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx("div",{className:"p-2 bg-yellow-100 text-yellow-700 rounded-lg",children:i.jsx(kh,{size:20})}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Pending Approvals"}),j>0&&i.jsxs("span",{className:"ml-auto px-2.5 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-bold",children:[j," New"]})]}),i.jsxs("div",{className:"space-y-4",children:[o>0&&(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("attendance")&&((I=e.accessibleModules)!=null&&I.includes("attendance")))?i.jsxs("div",{onClick:()=>window.location.href="/attendance",className:"p-4 bg-bg-main hover:bg-bg-hover border border-border rounded-xl flex justify-between items-center cursor-pointer transition-colors group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:i.jsx(Es,{size:18})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-text-primary group-hover:text-brand-primary transition-colors",children:"Timesheets"}),i.jsxs("p",{className:"text-xs text-text-secondary",children:[o," submission",o!==1?"s":""]})]})]}),i.jsx(at,{size:"sm",variant:"outline",className:"text-xs",children:"Review"})]}):null,c>0&&(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave")&&((L=e.accessibleModules)!=null&&L.includes("leave")))?i.jsxs("div",{onClick:()=>window.location.href="/leave",className:"p-4 bg-bg-main hover:bg-bg-hover border border-border rounded-xl flex justify-between items-center cursor-pointer transition-colors group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center",children:i.jsx(_g,{size:18})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-text-primary group-hover:text-brand-primary transition-colors",children:"Leave Requests"}),i.jsxs("p",{className:"text-xs text-text-secondary",children:[c," request",c!==1?"s":""]})]})]}),i.jsx(at,{size:"sm",variant:"outline",className:"text-xs",children:"Review"})]}):null,j===0&&i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-green-50 text-green-500 rounded-full flex items-center justify-center mb-3",children:i.jsx(kh,{size:24})}),i.jsx("p",{className:"text-text-primary font-medium",children:"All caught up!"}),i.jsx("p",{className:"text-sm text-text-secondary",children:"No pending approvals at the moment."})]})]})]}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("projects")&&((O=e.accessibleModules)==null?void 0:O.includes("projects")))&&i.jsxs("div",{className:"bg-bg-card p-6 rounded-xl shadow-sm border border-border h-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-blue-100 text-blue-700 rounded-lg",children:i.jsx(Zu,{size:20})}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Active Projects"})]}),i.jsx(at,{variant:"ghost",size:"sm",onClick:()=>window.location.href="/projects",className:"text-brand-primary hover:bg-brand-primary/10",children:"View All"})]}),i.jsx("div",{className:"space-y-4",children:s?[1,2].map(F=>i.jsxs("div",{className:"p-4 bg-bg-main rounded-xl border border-border h-[100px]",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(le,{className:"w-32 h-4"}),i.jsx(le,{className:"w-20 h-3"})]}),i.jsx(le,{className:"w-16 h-5 rounded-full"})]}),i.jsx(le,{className:"w-full h-8"})]},F)):u.filter(F=>F.status==="Active").length>0?u.filter(F=>F.status==="Active").slice(0,3).map(F=>i.jsxs("div",{className:"p-4 bg-bg-main rounded-xl border border-border hover:border-brand-primary/30 transition-colors",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-text-primary text-sm",children:F.name}),i.jsx("p",{className:"text-xs text-text-secondary mt-0.5",children:F.client})]}),i.jsx("span",{className:"px-2 py-0.5 bg-status-success/10 text-status-success text-[10px] font-bold uppercase rounded-full tracking-wider",children:F.status})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-brand-primary w-2/3 rounded-full"})}),i.jsx("span",{className:"text-xs font-medium text-text-primary",children:"66%"})]}),i.jsxs("div",{className:"flex justify-between mt-3 text-xs text-text-muted",children:[i.jsxs("span",{children:["Due ",new Date(F.endDate).toLocaleDateString()]}),i.jsx("span",{children:"Team: 4"})]})]},F._id)):i.jsx("div",{className:"text-center py-8 text-text-secondary text-sm",children:"No active projects found."})})]})]})]})}function nte(){const{user:e}=cn(),t=dk();return i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-text-primary",children:[t,", ",e==null?void 0:e.name.split(" ")[0],"! "]}),i.jsx("p",{className:"text-text-secondary mt-1",children:"HR Operations Overview"})]}),i.jsx(Nf,{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("attendance"))&&i.jsx(yx,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave"))&&i.jsx(bx,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave"))&&i.jsx(Dp,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("payroll"))&&i.jsx(xx,{}),i.jsx(vx,{})]})]})}function rte(){const{user:e}=cn();return i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-text-primary",children:["Welcome, ",e==null?void 0:e.name.split(" ")[0],"! "]}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Financial Overview & Payroll Status"})]}),i.jsx(Nf,{})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave"))&&i.jsx(Dp,{})}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("payroll"))&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Gh,{className:"text-brand-primary",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Payroll Summary"})]}),i.jsx("p",{className:"text-3xl font-bold text-text-primary",children:"$142,500"}),i.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Total payout for June"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-status-warning animate-pulse"}),i.jsx("span",{className:"text-status-warning font-medium",children:"Processing"})]})]}),i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(vU,{className:"text-status-success",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Salary Status"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-text-secondary",children:"Disbursed"}),i.jsx("span",{className:"font-bold text-status-success",children:"85%"})]}),i.jsx("div",{className:"w-full bg-bg-main rounded-full h-2",children:i.jsx("div",{className:"bg-status-success h-2 rounded-full w-[85%]"})}),i.jsx("p",{className:"text-xs text-text-secondary text-right",children:"Remaining: 22 employees"})]})]}),i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(ZH,{className:"text-status-info",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Expenses"})]}),i.jsx("p",{className:"text-3xl font-bold text-text-primary",children:"$12,450"}),i.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Reimbursements pending"}),i.jsx("button",{className:"text-sm text-brand-primary font-medium hover:underline",children:"View Details"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yr,{className:"text-brand-secondary",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Billing Overview"})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-bg-main rounded-lg",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"font-medium text-text-primary",children:"Unbilled Hours (T&M)"}),i.jsx("span",{className:"text-brand-primary font-bold",children:"450 hrs"})]}),i.jsx("p",{className:"text-xs text-text-secondary",children:"~ $22,500 potential revenue"})]}),i.jsxs("div",{className:"p-4 bg-bg-main rounded-lg",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"font-medium text-text-primary",children:"Retainer Utilization"}),i.jsx("span",{className:"text-status-success font-bold",children:"92%"})]}),i.jsx("p",{className:"text-xs text-text-secondary",children:"Client: Acme Corp"})]})]})]}),i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(Ch,{className:"text-status-success",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Profitability"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"font-medium text-text-primary",children:"Fixed Bid Projects"}),i.jsx("span",{className:"text-status-success text-sm",children:"+15% Margin"})]}),i.jsx("div",{className:"h-2 bg-bg-main rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-status-success w-[65%] rounded-full"})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"font-medium text-text-primary",children:"Resource Utilization"}),i.jsx("span",{className:"text-brand-primary text-sm",children:"88%"})]}),i.jsx("div",{className:"h-2 bg-bg-main rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-brand-primary w-[88%] rounded-full"})})]})]})]})]}),i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(xf,{className:"text-text-secondary",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Quick Exports"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-border rounded-lg hover:bg-bg-hover transition-colors",children:[i.jsx(yr,{size:16,className:"text-status-success"}),i.jsx("span",{className:"text-sm font-medium",children:"Payroll Report (CSV)"})]}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-border rounded-lg hover:bg-bg-hover transition-colors",children:[i.jsx(yr,{size:16,className:"text-status-info"}),i.jsx("span",{className:"text-sm font-medium",children:"Tax Deductions (Excel)"})]}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-border rounded-lg hover:bg-bg-hover transition-colors",children:[i.jsx(yr,{size:16,className:"text-status-warning"}),i.jsx("span",{className:"text-sm font-medium",children:"Expense Sheet (PDF)"})]})]})]})]})}function ste(){const{user:e}=cn();return i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-text-primary",children:["Hi ",e==null?void 0:e.name.split(" ")[0],"! "]}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Contractor Portal"})]}),i.jsx(Nf,{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(yx,{}),i.jsx(bx,{}),i.jsx(Dp,{}),i.jsx(xx,{}),i.jsx(vx,{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(Zu,{className:"text-brand-primary",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Current Assignment"})]}),i.jsxs("div",{className:"p-4 bg-bg-main rounded-lg mb-4",children:[i.jsx("h3",{className:"font-bold text-text-primary text-lg mb-1",children:"Project Phoenix"}),i.jsx("p",{className:"text-sm text-text-secondary",children:"Frontend Development  React/TypeScript"}),i.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs text-text-muted",children:[i.jsx(Es,{size:14}),i.jsx("span",{children:"Contract ends: Dec 31, 2025"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"px-3 py-1 bg-brand-primary/10 text-brand-primary rounded-full text-xs font-medium",children:"Active"}),i.jsx("span",{className:"px-3 py-1 bg-bg-main text-text-secondary rounded-full text-xs font-medium",children:"Remote"})]})]}),i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(Es,{className:"text-status-info",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Timesheet Entry"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-main rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-text-primary",children:"Today's Log"}),i.jsx("p",{className:"text-xs text-text-secondary",children:"6h 30m recorded"})]}),i.jsx("button",{className:"text-xs bg-brand-primary text-white px-3 py-1 rounded-lg",children:"Add Time"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-main rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-text-primary",children:"Submission Status"}),i.jsxs("p",{className:"text-xs text-status-success flex items-center gap-1",children:[i.jsx(Yr,{size:12})," Last week approved"]})]}),i.jsx("button",{className:"text-xs text-text-secondary hover:underline",children:"View History"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border flex items-center gap-4 cursor-pointer hover:bg-bg-hover transition-colors",children:[i.jsx("div",{className:"p-3 bg-status-success/10 rounded-lg text-status-success",children:i.jsx(yr,{size:24})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-text-primary",children:"Invoices"}),i.jsx("p",{className:"text-xs text-text-secondary",children:"Upload or download"})]})]}),i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border flex items-center gap-4 cursor-pointer hover:bg-bg-hover transition-colors",children:[i.jsx("div",{className:"p-3 bg-brand-secondary/10 rounded-lg text-brand-secondary",children:i.jsx(yr,{size:24})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-text-primary",children:"Payslips"}),i.jsx("p",{className:"text-xs text-text-secondary",children:"View generated slips"})]})]}),i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-text-muted/10 rounded-lg text-text-muted",children:i.jsx(Jh,{size:24})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-text-primary",children:"Asset Status"}),i.jsx("p",{className:"text-xs text-text-secondary",children:"MacBook Pro (Assigned)"})]})]})]})]})}function ate(){const{user:e}=cn();return i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-text-primary",children:["Welcome, ",e==null?void 0:e.name.split(" ")[0],"! "]}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Learning & Development Track"})]}),i.jsx(Nf,{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(yx,{}),i.jsx(bx,{}),i.jsx(Dp,{}),i.jsx(xx,{}),i.jsx(vx,{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(kh,{className:"text-brand-primary",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Onboarding Checklist"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-status-success",children:i.jsx(kh,{size:18})}),i.jsx("span",{className:"text-text-primary line-through text-text-muted",children:"Setup Development Environment"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-status-success",children:i.jsx(kh,{size:18})}),i.jsx("span",{className:"text-text-primary line-through text-text-muted",children:"Company Policy Review"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-brand-primary rounded-sm"}),i.jsx("span",{className:"text-text-primary",children:"Complete React Fundamentals"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-text-muted rounded-sm"}),i.jsx("span",{className:"text-text-secondary",children:"Submit First Pull Request"})]})]})]}),i.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(PH,{className:"text-status-info",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Training Modules"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"font-medium text-text-primary",children:"Frontend Basics"}),i.jsx("span",{className:"text-status-success text-sm",children:"Completed"})]}),i.jsx("div",{className:"h-2 bg-bg-main rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-status-success w-full rounded-full"})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"font-medium text-text-primary",children:"Advanced React"}),i.jsx("span",{className:"text-brand-primary text-sm",children:"45%"})]}),i.jsx("div",{className:"h-2 bg-bg-main rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-brand-primary w-[45%] rounded-full"})})]}),i.jsx("button",{className:"text-sm text-brand-primary font-medium hover:underline mt-2",children:"View All Modules"})]})]})]})]})}function ite(){const{user:e}=cn(),t=Fa(),[n,r]=C.useState(!0),[s,a]=C.useState({users:0,roles:0,assets:0,departments:0}),[o,l]=C.useState([]);C.useEffect(()=>{(async()=>{try{const[f,p,h,m]=await Promise.all([xe.getAllEmployees().catch(()=>[]),xe.getRoles().catch(()=>[]),xe.getAssetStats().catch(()=>({totalAssets:0})),xe.getAuditLogs({limit:5}).catch(()=>({logs:[]}))]),g=Array.isArray(f)?f:f.employees||[],x=g.length,y=new Set(g.map(N=>N.department).filter(N=>N)).size;a({users:x,roles:p.length||0,assets:h.totalAssets||0,departments:y});const v=(m.logs||[]).map(N=>{var E;const j=new Date(N.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),D=new Date,T=new Date(N.createdAt),A=Math.floor((D.getTime()-T.getTime())/1e3);let S=j;return A<60?S="Just now":A<3600?S=`${Math.floor(A/60)} mins ago`:A<86400?S=`${Math.floor(A/3600)} hours ago`:S=`${Math.floor(A/86400)} days ago`,{id:N._id,user:N.performedBy?N.performedBy.name:"System",action:c(N.action),target:`${N.entityType}${(E=N.metadata)!=null&&E.name?`: ${N.metadata.name}`:""}`,time:S,isAlert:N.action==="delete"||N.action==="reject"}});l(v)}catch(f){console.error("Failed to fetch admin stats:",f)}finally{r(!1)}})()},[]);const c=u=>u.charAt(0).toUpperCase()+u.slice(1).replace(/_/g," "),d=[{label:"Total Employees",value:s.users.toString(),change:"Active employees",icon:Pa,color:"text-blue-600",bg:"bg-blue-100"},{label:"Active Roles",value:s.roles.toString(),change:"Configured roles",icon:Gv,color:"text-purple-600",bg:"bg-purple-100"},{label:"Total Assets",value:s.assets.toString(),change:"Tracked inventory",icon:zH,color:"text-amber-600",bg:"bg-amber-100"},{label:"Departments",value:s.departments.toString(),change:"Active departments",icon:Eg,color:"text-green-600",bg:"bg-green-100"}];return i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Admin Console"}),i.jsxs("p",{className:"text-text-secondary mt-1",children:["Welcome back, ",e==null?void 0:e.name,".",(e==null?void 0:e.tenantId)&&typeof e.tenantId=="object"&&i.jsxs("span",{className:"ml-1 text-brand-primary font-medium",children:["@ ",e.tenantId.companyName]})]})]}),i.jsx(Nf,{})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map((u,f)=>i.jsxs("div",{className:"bg-bg-card p-6 rounded-xl border border-border shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-text-secondary text-sm font-medium",children:u.label}),i.jsx("div",{className:"mt-2",children:n?i.jsx(le,{className:"h-8 w-16"}):i.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:u.value})})]}),i.jsx("div",{className:`p-3 rounded-lg ${u.bg.replace("bg-","bg-")}/10 ${u.color}`,children:i.jsx(u.icon,{size:20})})]}),i.jsx("div",{className:"mt-4",children:n?i.jsx(le,{className:"h-4 w-24"}):i.jsx("p",{className:"text-xs text-text-secondary font-medium",children:u.change})})]},f))}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:i.jsx("div",{className:"lg:col-span-3 space-y-8",children:i.jsxs("section",{className:"bg-bg-card rounded-xl border border-border shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-border flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Recent System Activity"}),i.jsx("button",{onClick:()=>t("/audit"),className:"text-sm text-brand-primary hover:underline",children:"View All Logs"})]}),i.jsx("div",{className:"divide-y divide-border",children:n?[...Array(5)].map((u,f)=>i.jsxs("div",{className:"p-4 flex items-start gap-4",children:[i.jsx(le,{className:"mt-1 w-2 h-2 rounded-full"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(le,{className:"h-4 w-3/4"}),i.jsx(le,{className:"h-3 w-1/2"})]})]},f)):o.length>0?o.map(u=>i.jsxs("div",{className:"p-4 flex items-start gap-4 hover:bg-bg-hover transition-colors",children:[i.jsx("div",{className:`mt-1 w-2 h-2 rounded-full ${u.isAlert?"bg-status-error":"bg-brand-primary"}`}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-text-primary",children:[i.jsx("span",{className:"font-medium",children:u.user})," ",u.action]}),i.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:["Target: ",u.target,"  ",u.time]})]})]},u.id)):i.jsx("div",{className:"p-8 text-center text-text-secondary",children:"No recent activity found"})})]})})})]})}function ote(){const{user:e}=cn();if(!e)return null;switch(e.role){case"Admin":return i.jsx(ite,{});case"HR":return i.jsx(nte,{});case"Project Manager":return i.jsx(tte,{});case"Accountant":return i.jsx(rte,{});case"Consultant":return i.jsx(ste,{});case"Intern":return i.jsx(ate,{});case"Employee":default:return i.jsx(ete,{})}}const lte=({isOpen:e,onClose:t,onSubmit:n})=>{const[r,s]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[a,o]=C.useState(!1),[l,c]=C.useState(""),d=f=>{s({...r,[f.target.name]:f.target.value}),c("")},u=async f=>{if(f.preventDefault(),c(""),r.newPassword!==r.confirmPassword){c("New passwords do not match");return}if(r.newPassword.length<6){c("Password must be at least 6 characters long");return}o(!0);try{await n({currentPassword:r.currentPassword,newPassword:r.newPassword}),t()}catch(p){c(p.message||"Failed to change password")}finally{o(!1)}};return i.jsx(Hn,{isOpen:e,onClose:t,title:"Change Password",maxWidth:"max-w-md",children:i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[l&&i.jsx("div",{className:"bg-status-error/10 text-status-error p-3 rounded-lg text-sm",children:l}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Current Password"}),i.jsx(Ze,{type:"password",name:"currentPassword",value:r.currentPassword,onChange:d,required:!0,leftIcon:i.jsx(Xl,{size:16}),placeholder:"Enter current password"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"New Password"}),i.jsx(Ze,{type:"password",name:"newPassword",value:r.newPassword,onChange:d,required:!0,leftIcon:i.jsx(Xl,{size:16}),placeholder:"Enter new password"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Confirm New Password"}),i.jsx(Ze,{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:d,required:!0,leftIcon:i.jsx(Xl,{size:16}),placeholder:"Confirm new password"})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-text-secondary bg-bg-main border border-border rounded-lg hover:bg-bg-hover transition-colors",disabled:a,children:"Cancel"}),i.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 text-sm font-medium text-white bg-brand-primary rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 transition-colors",children:a?"Changing...":"Change Password"})]})]})})},cte=["Basic Info","Work Info","Personal","Contact","Identity","Bank Details","Documents","Additional"];function dte(){var $,J,te,Z,ie,he,ye,Se,Ee,Pe,qe,We;const{user:e,refreshUser:t}=cn(),n=cte.filter(V=>{var Ae;return!(V==="Documents"&&!((Ae=e==null?void 0:e.accessibleModules)!=null&&Ae.includes("documents")))}),[r,s]=C.useState(n[0]),[a,o]=C.useState(!1),[l,c]=C.useState(!0),[d,u]=C.useState(!1),[f,p]=C.useState(null),[h,m]=C.useState(null),[g]=C.useState([]),[x,y]=C.useState({employeeId:(e==null?void 0:e.id)||"",firstName:(($=e==null?void 0:e.name)==null?void 0:$.split(" ")[0])||"",lastName:((J=e==null?void 0:e.name)==null?void 0:J.split(" ").slice(1).join(" "))||"",nickName:"",email:(e==null?void 0:e.email)||"",department:(e==null?void 0:e.department)||"",location:"",designation:(e==null?void 0:e.designation)||"",role:(e==null?void 0:e.role)||"",employmentType:"",employeeStatus:"Active",sourceOfHire:"",dateOfJoining:"",totalExperience:"",reportingManager:"",reportingManagerName:"",dateOfBirth:"",gender:"",maritalStatus:"",aboutMe:"",expertise:"",uan:"",pan:"",aadhaar:"",workPhone:"",extension:"",seatingLocation:"",presentAddress:"",permanentAddress:"",personalMobile:"",personalEmail:"",workExperience:[],education:[],bankDetails:{accountName:"",accountNumber:"",bankName:"",ifscCode:""}}),[v,N]=C.useState(null),[j,D]=C.useState(null),[T,A]=C.useState(!1),[S,E]=C.useState(!1),[I,L]=C.useState(!1);C.useEffect(()=>{(async()=>{var Ae,Ve;c(!0),p(null);try{const et=await xe.getCurrentUser(),_e=et.user.id||et.user._id;console.log("Profile: Current User ID:",_e);const ne=await xe.getEmployees(),de=Array.isArray(ne)?ne:ne.employees||[];console.log("Profile: Total Employees:",de.length);const ce=de.find(De=>{var Re,Me,He;return(((Re=De.user)==null?void 0:Re._id)||De.user)===_e||((He=((Me=De.user)==null?void 0:Me._id)||De.user)==null?void 0:He.toString())===(_e==null?void 0:_e.toString())});console.log("Profile: Found Employee Record:",ce?"Yes":"No"),ce&&(m(ce._id),y({employeeId:ce.employeeId||"",firstName:ce.firstName||"",lastName:ce.lastName||"",nickName:ce.nickName||"",email:ce.email||"",department:ce.department||"",location:ce.location||"",designation:ce.designation||"",role:ce.role||"",employmentType:ce.employmentType||"",employeeStatus:ce.employeeStatus||"Active",sourceOfHire:ce.sourceOfHire||"",dateOfJoining:ce.dateOfJoining?new Date(ce.dateOfJoining).toISOString().split("T")[0]:"",totalExperience:ce.totalExperience||"",reportingManager:((Ae=ce.reportingManager)==null?void 0:Ae._id)||ce.reportingManager||"",reportingManagerName:(Ve=ce.reportingManager)!=null&&Ve.firstName?`${ce.reportingManager.firstName} ${ce.reportingManager.lastName||""}`:"",dateOfBirth:ce.dateOfBirth?new Date(ce.dateOfBirth).toISOString().split("T")[0]:"",gender:ce.gender||"",maritalStatus:ce.maritalStatus||"",aboutMe:ce.aboutMe||"",expertise:ce.expertise||"",uan:ce.uan||"",pan:ce.pan||"",aadhaar:ce.aadhaar||"",workPhone:ce.workPhone||"",extension:ce.extension||"",seatingLocation:ce.seatingLocation||"",presentAddress:ce.presentAddress||"",permanentAddress:ce.permanentAddress||"",personalMobile:ce.personalMobile||"",personalEmail:ce.personalEmail||"",workExperience:ce.workExperience||[],education:ce.education||[],bankDetails:ce.bankDetails||{accountName:"",accountNumber:"",bankName:"",ifscCode:""}}),ce.profilePicture&&D(ce.profilePicture.startsWith("http")?ce.profilePicture:`${xs}/${ce.profilePicture}`))}catch(et){console.error("Failed to fetch employee data:",et),p(et.message||"Failed to load profile data")}finally{c(!1)}})()},[]);const O=V=>{y({...x,[V.target.name]:V.target.value})},F=V=>{var Ve;const Ae=(Ve=V.target.files)==null?void 0:Ve[0];if(Ae){N(Ae);const et=new FileReader;et.onloadend=()=>{D(et.result)},et.readAsDataURL(Ae)}},U=async()=>{if(!h){alert("Employee ID not found. Cannot update profile.");return}u(!0);try{const V=new FormData;Object.keys(x).forEach(Ae=>{const Ve=x[Ae];Array.isArray(Ve)||Ae==="bankDetails"?V.append(Ae,JSON.stringify(Ve)):Ve!=null&&V.append(Ae,Ve)}),v&&V.append("profilePicture",v),await xe.updateEmployee(h,V),o(!1),await t(),A(!0)}catch(V){console.error("Failed to update profile:",V),alert(V.message||"Failed to update profile. Please try again.")}finally{u(!1)}},W=async V=>{try{await xe.updateCurrentUser(V),E(!0)}catch(Ae){throw Ae}},X=()=>{o(!1),N(null)},P=(V,Ae,Ve,et)=>{y(_e=>{const ne=[..._e[V]];return ne[Ae]={...ne[Ae],[Ve]:et},{..._e,[V]:ne}})},z=(V,Ae)=>{y(Ve=>({...Ve,[V]:[...Ve[V],Ae]}))},oe=(V,Ae)=>{y(Ve=>({...Ve,[V]:Ve[V].filter((et,_e)=>_e!==Ae)}))},Y=V=>{y(Ae=>({...Ae,bankDetails:{...Ae.bankDetails,[V.target.name]:V.target.value}}))},q=(V,Ae,Ve,et,_e="text")=>{const ne=et;return i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[ne&&i.jsx(ne,{size:16}),V]}),a?_e==="date"?i.jsx(qr,{name:Ae,value:Ve,onChange:O}):i.jsx(Ze,{type:_e,name:Ae,value:Ve,onChange:O}):i.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:Ve||"N/A"})]})},_=(V,Ae,Ve)=>i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:V}),a?i.jsx("textarea",{name:Ae,value:Ve,onChange:O,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20",rows:3}):i.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg whitespace-pre-wrap",children:Ve||"N/A"})]});return i.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[l&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-8 w-48"}),i.jsx(le,{className:"h-4 w-64"})]}),i.jsx(le,{className:"h-10 w-32 rounded-lg"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border lg:col-span-1 h-fit",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx(le,{className:"w-32 h-32 rounded-full"}),i.jsxs("div",{className:"space-y-2 w-full flex flex-col items-center",children:[i.jsx(le,{className:"h-6 w-3/4"}),i.jsx(le,{className:"h-4 w-1/2"})]}),i.jsx("div",{className:"w-full space-y-3 mt-4",children:[1,2,3].map(V=>i.jsxs("div",{className:"flex justify-between",children:[i.jsx(le,{className:"h-4 w-24"}),i.jsx(le,{className:"h-4 w-20"})]},V))})]})}),i.jsxs("div",{className:"lg:col-span-3 bg-bg-card rounded-lg shadow-sm border border-border",children:[i.jsx("div",{className:"flex border-b border-border p-1",children:[1,2,3,4].map(V=>i.jsx(le,{className:"h-10 w-24 mr-4 rounded-t-lg"},V))}),i.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4,5,6].map(V=>i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-4 w-32"}),i.jsx(le,{className:"h-10 w-full rounded-lg"})]},V))})]})]})]}),f&&!l&&i.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[i.jsx("p",{className:"font-medium",children:"Failed to load profile"}),i.jsx("p",{className:"text-sm",children:f})]}),!l&&!f&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"My Profile"}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Manage your personal information"})]}),a?i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{variant:"secondary",onClick:X,disabled:d,leftIcon:i.jsx(bi,{size:16}),children:"Cancel"}),i.jsx(at,{onClick:U,disabled:d,isLoading:d,leftIcon:!d&&i.jsx(yf,{size:16}),children:"Save Changes"})]}):i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{variant:"secondary",leftIcon:i.jsx(Xl,{size:16}),onClick:()=>L(!0),children:"Change Password"}),i.jsx(at,{onClick:()=>o(!0),children:"Edit Profile"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border lg:col-span-1",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"w-32 h-32 rounded-full bg-brand-secondary flex items-center justify-center text-white text-4xl font-bold overflow-hidden mb-4 relative group",children:[j?i.jsx("img",{src:j,alt:"Profile",className:"w-full h-full object-cover"}):i.jsxs("span",{children:[(te=x.firstName)==null?void 0:te[0],(Z=x.lastName)==null?void 0:Z[0]]}),a&&i.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:F}),i.jsx("span",{className:"text-white text-xs font-medium",children:"Change Photo"})]})]}),i.jsxs("h3",{className:"text-lg font-semibold text-text-primary text-center",children:[x.firstName," ",x.lastName]}),i.jsx("p",{className:"text-sm text-text-secondary capitalize",children:x.designation||(e==null?void 0:e.role)}),i.jsxs("div",{className:"mt-4 w-full space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:"Employee ID"}),i.jsx("span",{className:"font-medium text-text-primary",children:x.employeeId})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:"Status"}),i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:x.employeeStatus})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:"Role"}),i.jsx("span",{className:"font-medium text-text-primary capitalize",children:x.role})]})]})]})}),i.jsxs("div",{className:"lg:col-span-3 bg-bg-card rounded-lg shadow-sm border border-border",children:[i.jsx("div",{className:"flex overflow-x-auto border-b border-border",children:n.map(V=>i.jsx("button",{onClick:()=>s(V),className:`px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${r===V?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:V},V))}),i.jsxs("div",{className:"p-6",children:[r==="Basic Info"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[q("First Name","firstName",x.firstName,hi),q("Last Name","lastName",x.lastName,hi),q("Nick Name","nickName",x.nickName),q("Email Address","email",x.email,Kh,"email")]}),r==="Work Info"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[q("Department","department",x.department,Eg),q("Location","location",x.location,u5),q("Designation","designation",x.designation,Zu),q("Employment Type","employmentType",x.employmentType),q("Source of Hire","sourceOfHire",x.sourceOfHire),q("Date of Joining","dateOfJoining",x.dateOfJoining,pa,"date"),q("Total Experience","totalExperience",x.totalExperience),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[i.jsx(yq,{size:16}),"Reporting Manager"]}),a?i.jsxs("select",{name:"reportingManager",value:x.reportingManager||"",onChange:O,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20",children:[i.jsx("option",{value:"",children:"Select Manager"}),g.filter(V=>V._id!==h).map(V=>i.jsxs("option",{value:V._id,children:[V.firstName," ",V.lastName," (",V.employeeId,")"]},V._id))]}):i.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:x.reportingManagerName||"N/A"})]})]}),r==="Personal"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[q("Date of Birth","dateOfBirth",x.dateOfBirth,pa,"date"),q("Gender","gender",x.gender),q("Marital Status","maritalStatus",x.maritalStatus,jL),_("About Me","aboutMe",x.aboutMe),_("Expertise / Ask Me","expertise",x.expertise)]}),r==="Contact"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[q("Work Phone","workPhone",x.workPhone,mb),q("Extension","extension",x.extension),q("Seating Location","seatingLocation",x.seatingLocation,u5),q("Personal Mobile","personalMobile",x.personalMobile,mb),q("Personal Email","personalEmail",x.personalEmail,Kh,"email"),_("Present Address","presentAddress",x.presentAddress),_("Permanent Address","permanentAddress",x.permanentAddress)]}),r==="Identity"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[q("UAN","uan",x.uan,b0),q("PAN","pan",x.pan,b0),q("Aadhaar","aadhaar",x.aadhaar,b0)]}),r==="Bank Details"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[i.jsx(hi,{size:16}),"Account Name"]}),a?i.jsx(Ze,{type:"text",name:"accountName",value:((ie=x.bankDetails)==null?void 0:ie.accountName)||"",onChange:Y}):i.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:((he=x.bankDetails)==null?void 0:he.accountName)||"N/A"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[i.jsx(b0,{size:16}),"Account Number"]}),a?i.jsx(Ze,{type:"text",name:"accountNumber",value:((ye=x.bankDetails)==null?void 0:ye.accountNumber)||"",onChange:Y}):i.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:((Se=x.bankDetails)==null?void 0:Se.accountNumber)||"N/A"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[i.jsx(TS,{size:16}),"Bank Name"]}),a?i.jsx(Ze,{type:"text",name:"bankName",value:((Ee=x.bankDetails)==null?void 0:Ee.bankName)||"",onChange:Y}):i.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:((Pe=x.bankDetails)==null?void 0:Pe.bankName)||"N/A"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[i.jsx(Eg,{size:16}),"IFSC Code"]}),a?i.jsx(Ze,{type:"text",name:"ifscCode",value:((qe=x.bankDetails)==null?void 0:qe.ifscCode)||"",onChange:Y}):i.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:((We=x.bankDetails)==null?void 0:We.ifscCode)||"N/A"})]})]}),r==="Documents"&&h&&i.jsx(zR,{employeeId:h,roleName:x.role}),r==="Additional"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-text-primary",children:[i.jsx(Zu,{size:18}),"Work Experience"]}),a&&i.jsxs("button",{type:"button",onClick:()=>z("workExperience",{companyName:"",jobTitle:"",fromDate:"",toDate:"",description:""}),className:"text-brand-primary text-sm flex items-center gap-1 hover:text-brand-secondary",children:[i.jsx(Wr,{size:16})," Add Experience"]})]}),x.workExperience.length===0?i.jsx("p",{className:"text-text-secondary text-sm",children:"No work experience added yet."}):i.jsx("div",{className:"space-y-3",children:x.workExperience.map((V,Ae)=>a?i.jsxs("div",{className:"border border-border rounded-lg p-4 relative",children:[i.jsx("button",{type:"button",onClick:()=>oe("workExperience",Ae),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:i.jsx(br,{size:16})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("input",{type:"text",placeholder:"Company Name",value:V.companyName||"",onChange:Ve=>P("workExperience",Ae,"companyName",Ve.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"}),i.jsx("input",{type:"text",placeholder:"Job Title",value:V.jobTitle||"",onChange:Ve=>P("workExperience",Ae,"jobTitle",Ve.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"}),i.jsx(qr,{placeholder:"From Date",value:V.fromDate?new Date(V.fromDate).toISOString().split("T")[0]:"",onChange:Ve=>P("workExperience",Ae,"fromDate",Ve.target.value)}),i.jsx(qr,{placeholder:"To Date",value:V.toDate?new Date(V.toDate).toISOString().split("T")[0]:"",onChange:Ve=>P("workExperience",Ae,"toDate",Ve.target.value)}),i.jsx("textarea",{placeholder:"Description",value:V.description||"",onChange:Ve=>P("workExperience",Ae,"description",Ve.target.value),className:"col-span-2 px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20",rows:2})]})]},Ae):i.jsxs("div",{className:"border border-border rounded-lg p-4 bg-bg-main",children:[i.jsx("div",{className:"font-medium text-text-primary",children:V.jobTitle||"N/A"}),i.jsx("div",{className:"text-sm text-text-secondary",children:V.companyName||"N/A"}),i.jsxs("div",{className:"text-xs text-text-muted mt-1",children:[V.fromDate?new Date(V.fromDate).toLocaleDateString():"N/A"," ","-"," ",V.toDate?new Date(V.toDate).toLocaleDateString():"Present"]}),V.description&&i.jsx("div",{className:"text-sm text-text-secondary mt-2",children:V.description})]},Ae))})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-text-primary",children:[i.jsx(zU,{size:18}),"Education"]}),a&&i.jsxs("button",{type:"button",onClick:()=>z("education",{instituteName:"",degree:"",specialization:"",dateOfCompletion:""}),className:"text-brand-primary text-sm flex items-center gap-1 hover:text-brand-secondary",children:[i.jsx(Wr,{size:16})," Add Education"]})]}),x.education.length===0?i.jsx("p",{className:"text-text-secondary text-sm",children:"No education records added yet."}):i.jsx("div",{className:"space-y-3",children:x.education.map((V,Ae)=>a?i.jsxs("div",{className:"border border-border rounded-lg p-4 relative",children:[i.jsx("button",{type:"button",onClick:()=>oe("education",Ae),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:i.jsx(br,{size:16})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("input",{type:"text",placeholder:"Institute Name",value:V.instituteName||"",onChange:Ve=>P("education",Ae,"instituteName",Ve.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"}),i.jsx("input",{type:"text",placeholder:"Degree",value:V.degree||"",onChange:Ve=>P("education",Ae,"degree",Ve.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"}),i.jsx("input",{type:"text",placeholder:"Specialization",value:V.specialization||"",onChange:Ve=>P("education",Ae,"specialization",Ve.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"}),i.jsx("input",{type:"date",placeholder:"Date of Completion",value:V.dateOfCompletion?new Date(V.dateOfCompletion).toISOString().split("T")[0]:"",onChange:Ve=>P("education",Ae,"dateOfCompletion",Ve.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]})]},Ae):i.jsxs("div",{className:"border border-border rounded-lg p-4 bg-bg-main",children:[i.jsx("div",{className:"font-medium text-text-primary",children:V.degree||"N/A"}),i.jsx("div",{className:"text-sm text-text-secondary",children:V.instituteName||"N/A"}),i.jsxs("div",{className:"text-xs text-text-muted mt-1",children:[V.specialization||"N/A"," -"," ",V.dateOfCompletion?new Date(V.dateOfCompletion).toLocaleDateString():"N/A"]})]},Ae))})]})]})]})]})]}),i.jsx(ma,{isOpen:T,onClose:()=>A(!1),onConfirm:()=>A(!1),title:"Success",message:"Profile updated successfully!",confirmText:"OK",variant:"info",showCancel:!1}),i.jsx(ma,{isOpen:S,onClose:()=>E(!1),onConfirm:()=>E(!1),title:"Success",message:"Password changed successfully",variant:"success",confirmText:"OK",showCancel:!1})]}),i.jsx(lte,{isOpen:I,onClose:()=>L(!1),onSubmit:W})]})}function ute(){var D;const[e,t]=C.useState("clocked-out"),[n,r]=C.useState(null),[s,a]=C.useState(!0),[o,l]=C.useState(!1),[c,d]=C.useState(0),[u,f]=C.useState(!1),[p,h]=C.useState("");C.useEffect(()=>{m()},[]),C.useEffect(()=>{if(e!=="clocked-out"&&(n!=null&&n.clockIn)){const T=setInterval(()=>{const A=new Date(n.clockIn).getTime(),S=Date.now();d(Math.floor((S-A)/1e3))},1e3);return()=>clearInterval(T)}},[e,n]);const m=async()=>{try{const T=await xe.getAttendanceStatus();t(T.status),r(T.timeEntry)}catch(T){console.error("Failed to fetch status:",T)}finally{a(!1)}},g=async()=>{l(!0);try{const T=await xe.clockIn();t("clocked-in"),r(T.timeEntry)}catch(T){alert(T.message)}finally{l(!1)}},x=()=>{f(!0)},y=async()=>{l(!0);try{await xe.clockOut(p),t("clocked-out"),r(null),d(0),f(!1),h("")}catch(T){alert(T.message)}finally{l(!1)}},v=async()=>{l(!0);try{const T=await xe.startBreak();t("on-break"),r(T.timeEntry)}catch(T){alert(T.message)}finally{l(!1)}},N=async()=>{l(!0);try{const T=await xe.endBreak();t("clocked-in"),r(T.timeEntry)}catch(T){alert(T.message)}finally{l(!1)}},j=T=>{const A=Math.floor(T/3600),S=Math.floor(T%3600/60),E=T%60;return`${A.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}:${E.toString().padStart(2,"0")}`};return s?i.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[i.jsx(le,{className:"h-[200px] w-full rounded-lg"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.jsx(le,{className:"h-14 w-full rounded-lg col-span-2"})})]}):i.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-brand-primary to-brand-secondary text-white rounded-lg p-8 text-center shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[i.jsx(Es,{size:32}),i.jsxs("h2",{className:"text-2xl font-bold",children:[e==="clocked-out"&&"Not Clocked In",e==="clocked-in"&&"Currently Working",e==="on-break"&&"On Break"]})]}),e!=="clocked-out"&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-white/90 text-sm",children:["Clocked in at"," ",n!=null&&n.clockIn?new Date(n.clockIn).toLocaleTimeString():"N/A"]}),i.jsx("div",{className:"text-5xl font-mono font-bold tracking-wider",children:j(c)}),i.jsx("p",{className:"text-white/80 text-sm",children:"Hours worked today"})]}),e==="clocked-out"&&i.jsx("p",{className:"text-white/90 mt-2",children:"Click below to start your workday"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e==="clocked-out"&&i.jsxs("button",{onClick:g,disabled:o,className:"col-span-2 flex items-center justify-center gap-2 px-6 py-4 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[o?i.jsx(Hr,{className:"animate-spin",size:20}):i.jsx(f5,{size:20}),"Clock In"]}),e==="clocked-in"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:v,disabled:o,className:"flex items-center justify-center gap-2 px-6 py-4 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:[o?i.jsx(Hr,{className:"animate-spin",size:20}):i.jsx(_g,{size:20}),"Start Break"]}),i.jsxs("button",{onClick:x,disabled:o,className:"flex items-center justify-center gap-2 px-6 py-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:[o?i.jsx(Hr,{className:"animate-spin",size:20}):i.jsx(Tg,{size:20}),"Clock Out"]})]}),e==="on-break"&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:N,disabled:o,className:"col-span-2 flex items-center justify-center gap-2 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:[o?i.jsx(Hr,{className:"animate-spin",size:20}):i.jsx(_g,{size:20}),"End Break"]})})]}),n&&i.jsxs("div",{className:"bg-bg-main rounded-lg p-4 border border-border",children:[i.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Today's Summary"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-text-secondary",children:"Clock In"}),i.jsx("p",{className:"font-medium text-text-primary",children:new Date(n.clockIn).toLocaleTimeString()})]}),n.clockOut&&i.jsxs("div",{children:[i.jsx("p",{className:"text-text-secondary",children:"Clock Out"}),i.jsx("p",{className:"font-medium text-text-primary",children:new Date(n.clockOut).toLocaleTimeString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-text-secondary",children:"Total Breaks"}),i.jsx("p",{className:"font-medium text-text-primary",children:((D=n.breaks)==null?void 0:D.length)||0})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-text-secondary",children:"Break Time"}),i.jsxs("p",{className:"font-medium text-text-primary",children:[n.totalBreakMinutes||0," min"]})]})]})]}),u&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-bg-card rounded-lg shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200 border border-border",children:[i.jsx("div",{className:"p-4 border-b border-border bg-bg-main",children:i.jsx("h3",{className:"font-semibold text-text-primary",children:"Clock Out"})}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Today's Completed Tasks"}),i.jsx("textarea",{value:p,onChange:T=>h(T.target.value),placeholder:"Summary of what you worked on today...",className:"w-full p-2 border border-border rounded-lg bg-bg-card focus:outline-none focus:border-brand-primary min-h-[100px] text-sm text-text-primary resize-none",autoFocus:!0})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[i.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium",children:"Cancel"}),i.jsxs("button",{onClick:y,disabled:o,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium flex items-center gap-2",children:[o&&i.jsx(Hr,{className:"animate-spin",size:16}),"Confirm Clock Out"]})]})]})]})})]})}const mo=C.forwardRef(({label:e,error:t,helperText:n,className:r="",id:s,rows:a=3,...o},l)=>{const c=s||o.name||Math.random().toString(36).substr(2,9);return i.jsxs("div",{className:"w-full",children:[e&&i.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-text-secondary mb-1",children:e}),i.jsx("textarea",{ref:l,id:c,rows:a,className:`
          w-full rounded-lg border bg-bg-card px-3 py-2 text-sm text-text-primary placeholder-text-muted
          ${t?"border-status-error focus:ring-status-error":"border-border focus:ring-brand-primary"}
          focus:outline-none focus:ring-2 focus:border-transparent
          disabled:bg-bg-main disabled:text-text-muted
          ${r}
        `,...o}),t&&i.jsx("p",{className:"mt-1 text-xs text-status-error",children:t}),!t&&n&&i.jsx("p",{className:"mt-1 text-xs text-text-muted",children:n})]})});mo.displayName="Textarea";function fte({isOpen:e,onClose:t,onConfirm:n,weekStartDate:r,totalHours:s}){return i.jsx(Hn,{isOpen:e,onClose:t,title:"Confirm Submission",maxWidth:"max-w-md",footer:i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),i.jsx("button",{onClick:n,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors",children:"Confirm Submit"})]}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-brand-primary/10 rounded-lg text-brand-primary",children:[i.jsx(bs,{className:"shrink-0 mt-0.5",size:20}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-semibold mb-1",children:"Attention Required"}),i.jsx("p",{children:"Once submitted, you will not be able to edit these timesheet entries without manager approval."})]})]}),i.jsxs("div",{className:"bg-bg-main p-4 rounded-lg space-y-2 border border-border-dim",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:"Week Starting:"}),i.jsx("span",{className:"font-medium text-text-primary",children:r?qi(r,"MMM d, yyyy"):"-"})]}),i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:"Total Hours:"}),i.jsxs("span",{className:"font-bold text-text-primary",children:[s," hrs"]})]})]}),i.jsx("p",{className:"text-text-secondary text-sm",children:"Are you sure you want to submit your timesheet for this week?"})]})})}function hte(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(!1),[o,l]=C.useState(!1),[c,d]=C.useState(!1),[u,f]=C.useState(!1),[p,h]=C.useState(""),[m,g]=C.useState({date:new Date().toISOString().split("T")[0],project:"",task:"",startTime:"",endTime:"",description:""}),[x,y]=C.useState([]),[v,N]=C.useState([]),[j,D]=C.useState(void 0);C.useEffect(()=>{S(),T()},[]),C.useEffect(()=>{if(m.project&&x.length>0){const P=x.find(z=>z._id===m.project||z.name===m.project);P?A(P._id):N([])}else N([])},[m.project,x]);const T=async()=>{try{const P=await xe.getProjects();y(P.projects||[])}catch{console.error("Failed to fetch projects")}},A=async P=>{try{const z=await xe.getTasks({projectId:P});N(z.tasks||[])}catch{console.error("Failed to fetch tasks")}},S=async()=>{try{const P=new Date;P.setDate(P.getDate()-30);const z=await xe.getTimesheetEntries({startDate:P.toISOString().split("T")[0]});t(z.entries||[])}catch(P){console.error("Failed to fetch entries:",P)}finally{r(!1)}},E=async P=>{P.preventDefault();try{const z=x.find(q=>q._id===m.project),oe=v.find(q=>q._id===m.task),Y={...m,project:z?z.name:m.project,projectId:z?z._id:void 0,task:oe?oe.title:m.task,taskId:oe?oe._id:void 0};await xe.createTimesheetEntry(Y),a(!1),g({date:new Date().toISOString().split("T")[0],project:"",task:"",startTime:"",endTime:"",description:""}),S()}catch(z){alert(z.message)}},I=async P=>{if(confirm("Delete this timesheet entry?"))try{await xe.deleteTimesheetEntry(P),S()}catch(z){alert(z.message)}},L=async()=>{const P=new Date,z=P.getDay(),oe=z===0?0:7-z,Y=new Date(P);Y.setDate(P.getDate()+oe);const q=new Date(Y);q.setDate(Y.getDate()-6),D(q),d(!0)},O=async()=>{if(j){l(!0);try{const P=new Date(j);P.setDate(j.getDate()+6);const z=await xe.submitTimesheets(P.toISOString().split("T")[0]);h(z.message),f(!0),S(),d(!1)}catch(P){alert(P.message)}finally{l(!1)}}},F=()=>{if(e.length===0){alert("No entries to export");return}const P=["Date","Project","Task","Description","Start Time","End Time","Hours","Status","Review Comments"],z=e.map($=>[new Date($.date).toLocaleDateString(),$.project,$.task,`"${($.description||"").replace(/"/g,'""')}"`,$.startTime,$.endTime,$.hours,$.status,`"${($.reviewComments||"").replace(/"/g,'""')}"`]),oe=[P.join(","),...z.map($=>$.join(","))].join(`
`),Y=new Blob([oe],{type:"text/csv;charset=utf-8;"}),q=URL.createObjectURL(Y),_=document.createElement("a");_.setAttribute("href",q),_.setAttribute("download",`timesheet_export_${new Date().toISOString().split("T")[0]}.csv`),_.style.visibility="hidden",document.body.appendChild(_),_.click(),document.body.removeChild(_)},U=P=>{switch(P){case"draft":return i.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-gray-600 bg-gray-100 px-2 py-1 rounded-full",children:[i.jsx(bs,{size:12}),"Draft"]});case"submitted":return i.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-blue-700 bg-blue-100 px-2 py-1 rounded-full",children:[i.jsx(Lg,{size:12}),"Submitted"]});case"approved":return i.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-green-700 bg-green-100 px-2 py-1 rounded-full",children:[i.jsx(Yr,{size:12}),"Approved"]});case"rejected":return i.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-red-700 bg-red-100 px-2 py-1 rounded-full",children:[i.jsx(jp,{size:12}),"Rejected"]});default:return null}},W=()=>e.reduce((P,z)=>P+(z.hours||0),0).toFixed(2),X=e.some(P=>P.status==="draft");return n?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-7 w-48"}),i.jsx(le,{className:"h-4 w-64"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(le,{className:"h-10 w-32"}),i.jsx(le,{className:"h-10 w-32"})]})]}),i.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:i.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4,5].map(P=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(le,{className:"h-5 w-24"}),i.jsx(le,{className:"h-5 w-32"}),i.jsx(le,{className:"h-5 w-48"}),i.jsx(le,{className:"h-5 w-24"}),i.jsx(le,{className:"h-5 w-16"})]},P))})})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Timesheet Entries"}),i.jsx("p",{className:"text-sm text-text-secondary",children:"Track time spent on projects and tasks"})]}),i.jsxs("div",{className:"flex gap-2",children:[e.length>0&&i.jsx(at,{variant:"secondary",onClick:F,leftIcon:i.jsx(xf,{size:18}),children:"Export CSV"}),X&&i.jsx(at,{className:"bg-green-600 hover:bg-green-700",onClick:L,disabled:o,isLoading:o,leftIcon:!o&&i.jsx(Lg,{size:18}),children:"Submit for Approval"}),i.jsx(at,{onClick:()=>a(!s),leftIcon:i.jsx(Wr,{size:20}),children:"Add Entry"})]})]}),s&&i.jsxs("form",{onSubmit:E,className:"bg-bg-main border border-border rounded-lg p-4 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{children:i.jsx(qr,{label:"Date",value:m.date,onChange:P=>g({...m,date:P.target.value}),required:!0})}),i.jsx("div",{children:x.length>0?i.jsx(Gt,{label:"Project",value:m.project,onChange:P=>g({...m,project:P,task:""}),required:!0,options:x.map(P=>({value:P._id,label:P.name})),placeholder:"Select Project"}):i.jsx(Ze,{label:"Project",type:"text",value:m.project,onChange:P=>g({...m,project:P.target.value}),required:!0,placeholder:"Project name"})}),i.jsx("div",{children:v.length>0?i.jsx(Gt,{label:"Task",value:m.task,onChange:P=>g({...m,task:P}),required:!0,options:v.map(P=>({value:P._id,label:P.title})),placeholder:"Select Task"}):i.jsx(Ze,{label:"Task",type:"text",value:m.task,onChange:P=>g({...m,task:P.target.value}),required:!0,placeholder:"Task description"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("div",{children:i.jsx(Ze,{label:"Start Time",type:"time",value:m.startTime,onChange:P=>g({...m,startTime:P.target.value}),required:!0})}),i.jsx("div",{children:i.jsx(Ze,{label:"End Time",type:"time",value:m.endTime,onChange:P=>g({...m,endTime:P.target.value}),required:!0})})]}),i.jsx("div",{className:"col-span-2",children:i.jsx(mo,{label:"Description (Optional)",value:m.description,onChange:P=>g({...m,description:P.target.value}),rows:2,placeholder:"Additional details..."})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{type:"submit",leftIcon:i.jsx(yf,{size:16}),children:"Save Entry"}),i.jsx(at,{type:"button",variant:"secondary",onClick:()=>a(!1),children:"Cancel"})]})]}),i.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:i.jsx(Qo,{columns:[{header:"Date",accessorKey:"date",render:P=>i.jsx("span",{className:"text-sm",children:new Date(P.date).toLocaleDateString()})},{header:"Project",accessorKey:"project",render:P=>i.jsx("span",{className:"font-medium",children:P.project})},{header:"Task",accessorKey:"task",render:P=>i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{children:P.task}),P.description&&i.jsx("span",{className:"text-xs text-text-muted truncate max-w-xs",children:P.description}),P.reviewComments&&i.jsxs("span",{className:"text-xs text-yellow-700 mt-1",children:["Review: ",P.reviewComments]})]})},{header:"Time",render:P=>i.jsxs("span",{className:"text-sm",children:[P.startTime," - ",P.endTime]})},{header:"Hours",accessorKey:"hours",render:P=>i.jsxs("span",{className:"font-medium text-brand-primary",children:[P.hours,"h"]})},{header:"Status",accessorKey:"status",render:P=>U(P.status)},{header:"Actions",render:P=>P.status==="draft"||P.status==="rejected"?i.jsx("button",{onClick:()=>I(P._id),className:"text-text-muted hover:text-red-500 transition-colors p-1",title:"Delete Entry",children:i.jsx(br,{size:16})}):null}],data:e,isLoading:n,emptyMessage:"No timesheet entries found"})}),e.length>0&&i.jsxs("div",{className:"bg-brand-primary/10 border border-brand-primary/20 rounded-lg p-4 flex justify-between items-center",children:[i.jsx("span",{className:"font-semibold text-text-primary",children:"Total Hours (Last 30 Days)"}),i.jsxs("span",{className:"text-2xl font-bold text-brand-primary",children:[W(),"h"]})]}),i.jsx(fte,{isOpen:c,onClose:()=>d(!1),onConfirm:O,weekStartDate:j,totalHours:e.filter(P=>P.status==="draft").reduce((P,z)=>P+(z.hours||0),0)}),i.jsx(ma,{isOpen:u,onClose:()=>f(!1),onConfirm:()=>f(!1),title:"Success",message:p,confirmText:"OK",variant:"success",showCancel:!1})]})}function pte(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState({startDate:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],endDate:new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0]});C.useEffect(()=>{o()},[s]);const o=async()=>{r(!0);try{console.log("Fetching history with date range:",s);const c=await xe.getAttendanceHistory(s);console.log("Received attendance history:",c),t(c.entries||[])}catch(c){console.error("Failed to fetch history:",c)}finally{r(!1)}},l=c=>{const d=Math.floor(c),u=Math.round((c-d)*60);return`${d}h ${u}m`};return n?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-bg-main border border-border rounded-lg p-4",children:[i.jsx(le,{className:"h-6 w-24 mb-3"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(le,{className:"h-10 w-full"}),i.jsx(le,{className:"h-10 w-full"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(le,{className:"h-[200px] w-full rounded-lg"}),i.jsx(le,{className:"h-[200px] w-full rounded-lg"})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-bg-main border border-border rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Date Range"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{children:i.jsx(qr,{label:"From",value:s.startDate,onChange:c=>a({...s,startDate:c.target.value})})}),i.jsx("div",{children:i.jsx(qr,{label:"To",value:s.endDate,onChange:c=>a({...s,endDate:c.target.value})})})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[i.jsx(pa,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No attendance records found for this period"})]}):i.jsx("div",{className:"space-y-3",children:e.map(c=>i.jsxs("div",{className:"bg-bg-main border border-border rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pa,{size:18,className:"text-brand-primary"}),i.jsx("span",{className:"font-semibold text-text-primary",children:new Date(c.clockIn).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${c.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:c.status==="completed"?"Completed":"Active"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-text-secondary mb-1",children:"Clock In"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Es,{size:14,className:"text-green-600"}),i.jsx("span",{className:"font-medium text-text-primary",children:new Date(c.clockIn).toLocaleTimeString()})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-text-secondary mb-1",children:"Clock Out"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Es,{size:14,className:"text-red-600"}),i.jsx("span",{className:"font-medium text-text-primary",children:c.clockOut?new Date(c.clockOut).toLocaleTimeString():"In Progress"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-text-secondary mb-1",children:"Total Hours"}),i.jsx("span",{className:"font-bold text-brand-primary",children:c.totalHours?l(c.totalHours):"0h 0m"})]})]}),c.breaks&&c.breaks.length>0&&i.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:i.jsxs("p",{className:"text-xs text-text-secondary mb-2",children:["Breaks: ",c.breaks.length," (",c.totalBreakMinutes," min total)"]})}),c.completedTasks&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[i.jsx("p",{className:"text-xs font-semibold text-text-secondary mb-1",children:"Completed Tasks:"}),i.jsx("p",{className:"text-sm text-text-primary whitespace-pre-wrap",children:c.completedTasks})]})]},c._id))})]})}function mte(){const{user:e}=cn(),[t,n]=C.useState([]),[r,s]=C.useState([]),[a,o]=C.useState(!0),[l,c]=C.useState(!1),[d,u]=C.useState({correctionType:"add",requestedDate:new Date().toISOString().split("T")[0],requestedClockIn:"",requestedClockOut:"",reason:""}),f=["HR","Project Manager"].includes((e==null?void 0:e.role)||"");C.useEffect(()=>{p()},[]);const p=async()=>{o(!0);try{const x=await xe.getMyCorrections();if(n(x.corrections||[]),f){const y=await xe.getPendingCorrections();s(y.corrections||[])}}catch(x){console.error("Failed to fetch corrections:",x)}finally{o(!1)}},h=async x=>{x.preventDefault();try{await xe.requestTimeCorrection(d),c(!1),u({correctionType:"add",requestedDate:new Date().toISOString().split("T")[0],requestedClockIn:"",requestedClockOut:"",reason:""}),p()}catch(y){alert(y.message)}},m=async x=>{try{await xe.approveCorrection(x,""),p()}catch(y){alert(y.message)}},g=async x=>{const y=prompt("Reason for rejection:");if(y)try{await xe.rejectCorrection(x,y),p()}catch(v){alert(v.message)}};return a?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-6 w-48"}),i.jsx(le,{className:"h-4 w-64"})]}),i.jsx(le,{className:"h-10 w-32 rounded-lg"})]}),i.jsx("div",{className:"space-y-3",children:[1,2].map(x=>i.jsxs("div",{className:"bg-bg-main border border-border rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx(le,{className:"h-5 w-32"}),i.jsx(le,{className:"h-5 w-24 rounded-full"})]}),i.jsx(le,{className:"h-4 w-48 mb-2"}),i.jsx(le,{className:"h-4 w-full"})]},x))})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"My Correction Requests"}),i.jsx("p",{className:"text-sm text-text-secondary",children:"Request corrections for missed clock in/out"})]}),i.jsx(at,{onClick:()=>c(!l),leftIcon:i.jsx(Wr,{size:20}),children:"New Request"})]}),l&&i.jsxs("form",{onSubmit:h,className:"bg-bg-main border border-border rounded-lg p-4 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{children:i.jsx(Gt,{label:"Type",value:d.correctionType,onChange:x=>u({...d,correctionType:x}),options:[{value:"add",label:"Add Missing Entry"},{value:"edit",label:"Edit Existing Entry"}]})}),i.jsx("div",{children:i.jsx(qr,{label:"Date",value:d.requestedDate,onChange:x=>u({...d,requestedDate:x.target.value}),required:!0,max:new Date().toISOString().split("T")[0]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Clock In Time"}),i.jsx("input",{type:"time",value:d.requestedClockIn,onChange:x=>u({...d,requestedClockIn:x.target.value}),required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Clock Out Time"}),i.jsx("input",{type:"time",value:d.requestedClockOut,onChange:x=>u({...d,requestedClockOut:x.target.value}),required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Reason *"}),i.jsx("textarea",{value:d.reason,onChange:x=>u({...d,reason:x.target.value}),required:!0,rows:3,placeholder:"Explain why this correction is needed...",className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary transition-colors",children:"Submit Request"}),i.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]}),i.jsx("div",{className:"space-y-3",children:t.length===0?i.jsxs("div",{className:"text-center py-8 text-text-secondary border border-border rounded-lg",children:[i.jsx(Es,{size:32,className:"mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No correction requests yet"})]}):t.map(x=>i.jsxs("div",{className:"bg-bg-main border border-border rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-text-primary",children:new Date(x.requestedDate).toLocaleDateString()}),i.jsxs("span",{className:"text-sm text-text-secondary ml-2",children:["(",x.correctionType,")"]})]}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${x.status==="pending"?"bg-yellow-100 text-yellow-700":x.status==="approved"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:x.status})]}),i.jsxs("p",{className:"text-sm text-text-secondary mb-2",children:[x.requestedClockIn," - ",x.requestedClockOut]}),i.jsxs("p",{className:"text-sm text-text-primary italic",children:['"',x.reason,'"']}),x.managerComments&&i.jsxs("p",{className:"text-sm text-text-secondary mt-2 pt-2 border-t border-border",children:["Manager: ",x.managerComments]})]},x._id))}),f&&i.jsxs("div",{className:"pt-6 border-t border-border",children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Pending Approvals"}),r.length===0?i.jsxs("div",{className:"text-center py-8 text-text-secondary border border-border rounded-lg",children:[i.jsx(Yr,{size:32,className:"mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No pending approvals"})]}):i.jsx("div",{className:"space-y-3",children:r.map(x=>{var y,v,N;return i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"font-semibold text-text-primary",children:[(y=x.employee)==null?void 0:y.firstName," ",(v=x.employee)==null?void 0:v.lastName]}),i.jsxs("span",{className:"text-sm text-text-secondary ml-2",children:["(",(N=x.employee)==null?void 0:N.employeeId,")"]})]}),i.jsx("span",{className:"text-sm text-text-secondary",children:new Date(x.requestedDate).toLocaleDateString()})]}),i.jsxs("p",{className:"text-sm mb-2",children:[x.requestedClockIn," - ",x.requestedClockOut]}),i.jsxs("p",{className:"text-sm text-text-primary italic mb-3",children:['Reason: "',x.reason,'"']}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>m(x._id),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[i.jsx(Yr,{size:14}),"Approve"]}),i.jsxs("button",{onClick:()=>g(x._id),className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:[i.jsx(jp,{size:14}),"Reject"]})]})]},x._id)})})]})]})}function gte(){const{user:e}=cn(),[t,n]=C.useState([]),[r,s]=C.useState(!0),[a,o]=C.useState(null),l=["HR","Project Manager"].includes((e==null?void 0:e.role)||"");C.useEffect(()=>{if(l){c();const f=setInterval(c,6e4);return()=>clearInterval(f)}},[l]);const c=async()=>{try{const f=await xe.getPendingTimesheetApprovals();n(f.timesheets||[])}catch(f){console.error("Failed to fetch pending approvals:",f)}finally{s(!1)}},d=async f=>{o(f);try{await xe.approveTimesheet(f,""),c()}catch(p){alert(p.message)}finally{o(null)}};if(!l)return null;if(r)return i.jsx("div",{className:"space-y-4",children:[1,2].map(f=>i.jsxs("div",{className:"border border-border rounded-lg p-4 bg-bg-card",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-5 w-48"}),i.jsx(le,{className:"h-3 w-32"})]}),i.jsx(le,{className:"h-4 w-24"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-16 w-full rounded"}),i.jsx(le,{className:"h-16 w-full rounded"})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(le,{className:"h-9 w-24 rounded"}),i.jsx(le,{className:"h-9 w-24 rounded"})]})]},f))});const u=t.reduce((f,p)=>{const h=p.employee._id;return f[h]||(f[h]={employee:p.employee,timesheets:[]}),f[h].timesheets.push(p),f},{});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Pending Approvals"}),i.jsx("p",{className:"text-sm text-text-secondary",children:"Review and approve timesheet submissions from your team"})]}),t.length>0&&i.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:[t.length," pending"]})]}),Object.keys(u).length===0?i.jsxs("div",{className:"text-center py-12 text-text-secondary border border-border rounded-lg",children:[i.jsx(Yr,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No pending approvals"}),i.jsx("p",{className:"text-sm mt-1",children:"All timesheets are up to date"})]}):i.jsx("div",{className:"space-y-4",children:Object.values(u).map(f=>{const p=f.timesheets.reduce((h,m)=>h+(m.hours||0),0).toFixed(2);return i.jsxs("div",{className:"border border-border rounded-lg p-4 bg-yellow-50",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 pb-3 border-b border-yellow-200",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-text-primary",children:[f.employee.firstName," ",f.employee.lastName]}),i.jsxs("p",{className:"text-sm text-text-secondary",children:[f.employee.employeeId,"  ",f.timesheets.length," ","entries  ",p,"h total"]})]}),i.jsxs("span",{className:"text-xs text-text-secondary flex items-center gap-1",children:[i.jsx(Es,{size:12}),"Submitted"," ",new Date(f.timesheets[0].submittedAt).toLocaleDateString()]})]}),i.jsx("div",{className:"space-y-2 mb-4",children:f.timesheets.map(h=>i.jsx("div",{className:"bg-white border border-yellow-200 rounded p-3 text-sm",children:i.jsx("div",{className:"flex justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"font-medium text-text-primary",children:h.project}),i.jsx("span",{className:"text-text-secondary",children:""}),i.jsx("span",{className:"text-text-secondary",children:h.task})]}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-text-secondary",children:[i.jsx("span",{children:new Date(h.date).toLocaleDateString()}),i.jsxs("span",{children:[h.startTime," - ",h.endTime]}),i.jsxs("span",{className:"font-medium text-brand-primary",children:[h.hours,"h"]})]}),h.description&&i.jsx("p",{className:"text-xs text-text-secondary mt-1 italic",children:h.description})]})})},h._id))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>{f.timesheets.forEach(h=>d(h._id))},disabled:a!==null,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 text-sm font-medium",children:[a?i.jsx(Hr,{className:"animate-spin",size:16}):i.jsx(Yr,{size:16}),"Approve All"]}),i.jsxs("button",{onClick:()=>{const h=prompt("Reason for rejecting all entries:");h&&(f.timesheets.forEach(m=>xe.rejectTimesheet(m._id,h)),c())},disabled:a!==null,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 text-sm font-medium",children:[i.jsx(jp,{size:16}),"Reject All"]})]})]},f.employee._id)})})]})}const xte=["Clock In/Out","Timesheets","History","Corrections"];function yte(){const{user:e}=cn(),n=["HR","Project Manager"].includes((e==null?void 0:e.role)||"")?["Clock In/Out","Timesheets","Pending Approvals","History","Corrections"]:xte,[r,s]=C.useState(n[0]),a=o=>{switch(o){case"Clock In/Out":return i.jsx(Es,{size:18});case"Timesheets":return i.jsx(yr,{size:18});case"Pending Approvals":return i.jsx($C,{size:18});case"History":return i.jsx(qU,{size:18});case"Corrections":return i.jsx($C,{size:18});default:return null}};return i.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Attendance & Time Tracking"}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Track your time, manage timesheets, and request corrections"})]}),i.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border",children:[i.jsx("div",{className:"flex overflow-x-auto border-b border-border",children:n.map(o=>i.jsxs("button",{onClick:()=>s(o),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${r===o?"border-brand-primary text-brand-primary bg-brand-primary/5":"border-transparent text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[a(o),o]},o))}),i.jsxs("div",{className:"p-6",children:[r==="Clock In/Out"&&i.jsx(ute,{}),r==="Timesheets"&&i.jsx(hte,{}),r==="Pending Approvals"&&i.jsx(gte,{}),r==="History"&&i.jsx(pte,{}),r==="Corrections"&&i.jsx(mte,{})]})]})]})}function bte(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState({entityType:"",action:"",startDate:"",endDate:""}),[o,l]=C.useState(!1),[c,d]=C.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}});C.useEffect(()=>{p()},[]);const u=()=>{d({isOpen:!0,title:"Clear Audit Trail",message:"Are you sure you want to delete ALL audit logs? This action cannot be undone.",onConfirm:async()=>{l(!0);try{await xe.clearAuditLogs(),t([]),d(x=>({...x,isOpen:!1}))}catch(x){console.error("Failed to clear logs",x),alert("Failed to clear logs")}finally{l(!1)}}})},f=x=>{d({isOpen:!0,title:"Delete Audit Log",message:"Are you sure you want to delete this log entry?",onConfirm:async()=>{l(!0);try{await xe.deleteAuditLog(x),t(y=>y.filter(v=>v._id!==x)),d(y=>({...y,isOpen:!1}))}catch(y){console.error("Failed to delete log",y),alert("Failed to delete log")}finally{l(!1)}}})},p=async()=>{r(!0);try{const x=await xe.getAuditLogs({...s,limit:100});t(x.logs||[])}catch(x){console.error("Failed to fetch audit logs:",x)}finally{r(!1)}},h=()=>{p()},m=x=>{const y={create:"bg-status-success/10 text-status-success",update:"bg-brand-primary/10 text-brand-primary",delete:"bg-status-error/10 text-status-error",approve:"bg-status-success/10 text-status-success",reject:"bg-status-error/10 text-status-error",submit:"bg-status-warning/10 text-status-warning",login:"bg-blue-100 text-blue-700",logout:"bg-gray-100 text-gray-700"};return i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y[x]||"bg-bg-main text-text-secondary"}`,children:x.toUpperCase()})},g=x=>{switch(x){case"TimeEntry":return i.jsx(Es,{size:16,className:"text-blue-600"});case"Timesheet":return i.jsx(yr,{size:16,className:"text-green-600"});case"TimeCorrection":return i.jsx(hi,{size:16,className:"text-purple-600"});case"User":return i.jsx(hi,{size:16,className:"text-indigo-600"});default:return null}};return n?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(le,{className:"h-8 w-48 mb-2"}),i.jsx(le,{className:"h-4 w-64"}),i.jsx("div",{className:"flex justify-end",children:i.jsx(le,{className:"h-9 w-32 rounded-lg"})})]}),i.jsxs("div",{className:"bg-bg-card p-4 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(le,{className:"h-5 w-5"}),i.jsx(le,{className:"h-5 w-20"})]}),i.jsx("div",{className:"grid grid-cols-4 gap-4",children:[1,2,3,4].map(x=>i.jsxs("div",{children:[i.jsx(le,{className:"h-4 w-20 mb-1"}),i.jsx(le,{className:"h-10 w-full rounded-lg"})]},x))}),i.jsx(le,{className:"h-10 w-32 mt-4 rounded-lg"})]}),i.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(x=>i.jsx("div",{className:"bg-bg-card p-4 rounded-lg shadow-sm border border-border",children:i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(le,{className:"w-5 h-5 rounded-full"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(le,{className:"h-4 w-24"}),i.jsx(le,{className:"h-5 w-16 rounded-full"})]}),i.jsx(le,{className:"h-3 w-48 mt-1"})]})]}),i.jsx(le,{className:"h-3 w-32"})]})},x))})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Audit Trail"}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Complete history of all time-related changes"}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:u,disabled:o||e.length===0,className:"text-red-600 hover:text-red-700 hover:bg-red-50 px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i.jsx(br,{size:16}),"Clear Audit Trail"]})})]}),i.jsxs("div",{className:"bg-bg-card p-4 rounded-lg shadow-sm border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(OU,{size:18,className:"text-brand-primary"}),i.jsx("h3",{className:"font-semibold text-text-primary",children:"Filters"})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsx("div",{children:i.jsx(Gt,{label:"Entity Type",value:s.entityType,onChange:x=>a({...s,entityType:x}),options:[{value:"",label:"All"},{value:"TimeEntry",label:"Time Entry"},{value:"Timesheet",label:"Timesheet"},{value:"TimeCorrection",label:"Time Correction"},{value:"User",label:"User"}]})}),i.jsx("div",{children:i.jsx(Gt,{label:"Action",value:s.action,onChange:x=>a({...s,action:x}),options:[{value:"",label:"All"},{value:"create",label:"Create"},{value:"update",label:"Update"},{value:"delete",label:"Delete"},{value:"submit",label:"Submit"},{value:"approve",label:"Approve"},{value:"reject",label:"Reject"},{value:"login",label:"Login"},{value:"logout",label:"Logout"}]})}),i.jsx("div",{children:i.jsx(qr,{label:"Start Date",value:s.startDate,onChange:x=>a({...s,startDate:x.target.value})})}),i.jsx("div",{children:i.jsx(qr,{label:"End Date",value:s.endDate,onChange:x=>a({...s,endDate:x.target.value})})})]}),i.jsx("button",{onClick:h,className:"mt-4 px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary transition-colors",children:"Apply Filters"})]}),e.length===0?i.jsx("div",{className:"text-center py-12 text-text-secondary border border-border rounded-lg",children:i.jsx("p",{children:"No audit logs found"})}):i.jsx("div",{className:"space-y-3",children:e.map(x=>{var y;return i.jsxs("div",{className:"bg-bg-card p-4 rounded-lg shadow-sm border border-border hover:border-brand-primary transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[g(x.entityType),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-text-primary",children:x.entityType}),m(x.action)]}),i.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["by ",((y=x.performedBy)==null?void 0:y.name)||"Unknown",x.employee&&`  ${x.employee.firstName} ${x.employee.lastName}`]})]})]}),i.jsx("span",{className:"text-xs text-text-secondary",children:new Date(x.createdAt).toLocaleString()}),i.jsx("button",{onClick:v=>{v.stopPropagation(),f(x._id)},className:"p-1 text-text-muted hover:text-red-600 hover:bg-red-50 rounded transition-colors ml-2",title:"Delete Log",children:i.jsx(br,{size:14})})]}),x.changes&&i.jsxs("div",{className:"mt-3 p-3 bg-bg-main rounded border border-border",children:[i.jsx("p",{className:"text-xs font-medium text-text-secondary mb-2",children:"Changes:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[x.changes.old&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Old:"}),i.jsx("pre",{className:"text-xs bg-status-error/5 p-2 rounded overflow-auto text-text-primary",children:JSON.stringify(x.changes.old,null,2)})]}),x.changes.new&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"New:"}),i.jsx("pre",{className:"text-xs bg-status-success/5 p-2 rounded overflow-auto text-text-primary",children:JSON.stringify(x.changes.new,null,2)})]})]})]}),x.metadata&&Object.keys(x.metadata).length>0&&i.jsxs("div",{className:"mt-2 text-xs text-text-secondary",children:[i.jsx("strong",{children:"Details:"})," ",i.jsxs("div",{className:"mt-2 flex flex-col gap-1.5",children:[(x.metadata.ip||x.metadata.device)&&i.jsxs("div",{className:"flex flex-wrap gap-4",children:[x.metadata.ip&&i.jsxs("div",{className:"flex items-center gap-1.5 text-xs bg-bg-main px-2 py-1 rounded border border-border",children:[i.jsx(Sp,{size:12,className:"text-brand-primary"}),i.jsx("span",{className:"font-mono text-text-primary",children:x.metadata.ip})]}),x.metadata.device&&i.jsxs("div",{className:"flex items-center gap-1.5 text-xs bg-bg-main px-2 py-1 rounded border border-border",children:[x.metadata.device.toLowerCase().includes("mobile")?i.jsx(RS,{size:12,className:"text-brand-primary"}):i.jsx(Jh,{size:12,className:"text-brand-primary"}),i.jsx("span",{className:"truncate max-w-[200px]",title:x.metadata.device,children:x.metadata.device.includes("Mozilla")?x.metadata.device.includes("Mac")?"Mac OS":x.metadata.device.includes("Windows")?"Windows":"Web Browser":x.metadata.device})]})]}),x.metadata.location&&i.jsx("div",{className:"flex",children:i.jsxs("a",{href:`https://www.google.com/maps?q=${x.metadata.location.lat},${x.metadata.location.lng}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-brand-primary hover:underline font-medium text-xs bg-brand-primary/5 px-2 py-1 rounded border border-brand-primary/20 hover:bg-brand-primary/10 transition-colors",children:[i.jsx(u5,{size:12}),"View Location"]})}),Object.keys(x.metadata).filter(v=>!["ip","device","location"].includes(v)).length>0&&i.jsx("pre",{className:"text-[10px] bg-bg-main p-2 rounded overflow-auto mt-1 border border-border",children:JSON.stringify(Object.fromEntries(Object.entries(x.metadata).filter(([v])=>!["ip","device","location"].includes(v))),null,2)})]})]})]},x._id)})}),i.jsx(ma,{isOpen:c.isOpen,onClose:()=>d({...c,isOpen:!1}),onConfirm:c.onConfirm,title:c.title,message:c.message,confirmText:"Delete",isLoading:o,variant:"danger"})]})}function vte(){const[e,t]=C.useState([]),[n,r]=C.useState(!0);C.useEffect(()=>{s()},[]);const s=async()=>{try{const o=await xe.getLeaveStats();t(o.stats)}catch(o){console.error("Failed to fetch leave stats:",o)}finally{r(!1)}},a=o=>{const c=(d=>d.toLowerCase())(o);return c.includes("casual")?{icon:i.jsx(AL,{size:24,className:"text-blue-600"}),color:"bg-blue-50/50 border-blue-100 dark:bg-blue-900/10 dark:border-blue-800"}:c.includes("sick")||c.includes("medical")?{icon:i.jsx(CL,{size:24,className:"text-red-600"}),color:"bg-red-50/50 border-red-100 dark:bg-red-900/10 dark:border-red-800"}:c.includes("annual")||c.includes("earned")||c.includes("privilege")?{icon:i.jsx(Pu,{size:24,className:"text-purple-600"}),color:"bg-purple-50/50 border-purple-100 dark:bg-purple-900/10 dark:border-purple-800"}:c.includes("maternity")||c.includes("paternity")||c.includes("parental")?{icon:i.jsx(Pa,{size:24,className:"text-pink-600"}),color:"bg-pink-50/50 border-pink-100 dark:bg-pink-900/10 dark:border-pink-800"}:c.includes("unpaid")||c.includes("lop")?{icon:i.jsx(Pu,{size:24,className:"text-orange-600"}),color:"bg-orange-50/50 border-orange-100 dark:bg-orange-900/10 dark:border-orange-800"}:{icon:i.jsx(Pu,{size:24,className:"text-teal-600"}),color:"bg-teal-50/50 border-teal-100 dark:bg-teal-900/10 dark:border-teal-800"}};return n?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[1,2,3].map(o=>i.jsxs("div",{className:"p-4 rounded-xl border border-border bg-bg-card",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx(le,{className:"h-10 w-10 rounded-lg"}),i.jsx(le,{className:"h-6 w-24 rounded-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-8 w-16"}),i.jsx(le,{className:"h-4 w-32"})]}),i.jsxs("div",{className:"mt-4 pt-3 border-t border-border flex justify-between",children:[i.jsx(le,{className:"h-3 w-16"}),i.jsx(le,{className:"h-3 w-16"})]})]},o))}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:e.map(o=>{const l=a(o.type);return i.jsxs("div",{className:`p-4 rounded-xl border transition-colors ${l.color}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("div",{className:"p-2 bg-white dark:bg-bg-card rounded-lg shadow-sm border border-border",children:l.icon}),i.jsxs("span",{className:"text-xs font-semibold px-2 py-1 bg-white/50 dark:bg-white/10 rounded-full text-text-primary",children:[o.type," Leave"]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("h3",{className:"text-2xl font-bold text-text-primary",children:[o.pending,"/",o.total]}),i.jsx("p",{className:"text-sm text-text-secondary font-medium",children:"Available Balance"})]}),i.jsxs("div",{className:"mt-4 pt-3 border-t border-black/5 dark:border-white/5 flex justify-between text-xs text-text-muted",children:[i.jsxs("span",{children:["Used: ",o.used]}),i.jsxs("span",{children:["Total: ",o.total]})]})]},o.type)})})}function wte(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),s=async()=>{try{const o=await xe.getMyLeaves();t(o.leaves||[])}catch(o){console.error("Failed to fetch leaves:",o)}finally{r(!1)}};C.useEffect(()=>{s()},[]);const a=o=>{switch(o.toLowerCase()){case"approved":return"bg-status-success/10 text-status-success";case"rejected":return"bg-status-error/10 text-status-error";case"pending":default:return"bg-status-warning/10 text-status-warning"}};return i.jsx("div",{className:"bg-bg-card rounded-lg border border-border overflow-hidden",children:i.jsx(Qo,{isLoading:n,data:e,emptyMessage:"No leave history found.",columns:[{header:"Type",accessorKey:"type",render:o=>i.jsx("span",{className:"font-medium text-text-primary",children:o.type})},{header:"Duration",accessorKey:"totalDays",render:o=>i.jsxs("span",{className:"text-sm text-text-secondary",children:[o.totalDays," day",o.totalDays>1?"s":""]})},{header:"Dates",accessorKey:"startDate",render:o=>i.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[i.jsx(pa,{size:14}),i.jsxs("span",{children:[qi(new Date(o.startDate),"MMM d, yyyy")," -"," ",qi(new Date(o.endDate),"MMM d, yyyy")]})]})},{header:"Reason",accessorKey:"reason",render:o=>i.jsx("span",{className:"text-sm text-text-secondary max-w-xs truncate block",title:o.reason,children:o.reason})},{header:"Status",accessorKey:"status",render:o=>i.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${a(o.status)}`,children:o.status})},{header:"Workflow",accessorKey:"workflowStatus",render:o=>i.jsxs("div",{className:"flex items-center gap-1 text-sm text-text-secondary",children:[i.jsx(Es,{size:14}),o.workflowStatus]})}]})})}function Nte(){var x,y;const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(null),[o,l]=C.useState(null),[c,d]=C.useState(""),[u,f]=C.useState(!1),p=async()=>{try{const v=await xe.getPendingLeaveApprovals();t(v.leaves||[])}catch(v){console.error("Failed to fetch approvals:",v)}finally{r(!1)}};C.useEffect(()=>{p()},[]);const h=(v,N)=>{a(v),l(N),d("")},m=()=>{a(null),l(null),d("")},g=async()=>{if(!(!s||!o)){if(o==="reject"&&!c.trim()){alert("Please provide a reason for rejection.");return}f(!0);try{o==="approve"?await xe.approveLeave(s._id,c):await xe.rejectLeave(s._id,c),p(),m()}catch(v){console.error(`Failed to ${o} leave:`,v),alert(`Failed to ${o} leave`)}finally{f(!1)}}};return n?i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(v=>i.jsxs("div",{className:"bg-white rounded-lg border border-border p-4 shadow-sm flex flex-col h-[280px]",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(le,{className:"w-10 h-10 rounded-full"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(le,{className:"h-4 w-32"}),i.jsx(le,{className:"h-3 w-24"})]})]}),i.jsx(le,{className:"h-5 w-16 rounded"})]}),i.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(le,{className:"h-3 w-12"}),i.jsx(le,{className:"h-4 w-20"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(le,{className:"h-3 w-12"}),i.jsx(le,{className:"h-4 w-24"})]}),i.jsx(le,{className:"h-20 w-full rounded"})]}),i.jsxs("div",{className:"flex gap-3 mt-auto",children:[i.jsx(le,{className:"h-10 flex-1 rounded-lg"}),i.jsx(le,{className:"h-10 flex-1 rounded-lg"})]})]},v))}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length===0?i.jsx("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:i.jsxs("div",{className:"flex flex-col items-center justify-center text-text-muted",children:[i.jsx(Jl,{className:"w-12 h-12 mb-2 opacity-20"}),i.jsx("p",{children:"No pending approvals found."})]})}):e.map(v=>{var N,j,D;return i.jsxs("div",{className:"bg-white rounded-lg border border-border p-4 shadow-sm hover:shadow-md transition-shadow flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-secondary/10 flex items-center justify-center text-brand-secondary",children:i.jsx(hi,{size:20})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-medium text-text-primary",children:[(N=v.employee)==null?void 0:N.firstName," ",(j=v.employee)==null?void 0:j.lastName]}),i.jsx("p",{className:"text-xs text-text-muted",children:(D=v.employee)==null?void 0:D.designation})]})]}),i.jsx("span",{className:"px-2 py-1 bg-brand-primary/5 text-brand-primary text-xs font-medium rounded",children:v.type})]}),i.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:"Duration"}),i.jsxs("span",{className:"font-medium text-text-primary",children:[v.totalDays," Day",v.totalDays>1?"s":""]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:"Dates"}),i.jsxs("span",{className:"font-medium text-text-primary",children:[qi(new Date(v.startDate),"MMM d")," -"," ",qi(new Date(v.endDate),"MMM d, yyyy")]})]}),i.jsxs("div",{className:"bg-bg-main p-3 rounded text-sm text-text-secondary",children:[i.jsx("p",{className:"text-xs uppercase text-text-muted font-semibold mb-1",children:"Reason"}),i.jsxs("p",{className:"line-clamp-3 italic",title:v.reason,children:['"',v.reason,'"']})]})]}),i.jsxs("div",{className:"flex gap-3 mt-auto",children:[i.jsx(at,{variant:"danger",className:"flex-1",onClick:()=>h(v,"reject"),leftIcon:i.jsx(bi,{size:16}),children:"Reject"}),i.jsx(at,{variant:"primary",className:"flex-1",onClick:()=>h(v,"approve"),leftIcon:i.jsx(Jl,{size:16}),children:"Approve"})]})]},v._id)})}),s&&o&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200",children:[i.jsxs("div",{className:`p-4 border-b ${o==="approve"?"bg-green-50 border-green-100":"bg-red-50 border-red-100"} flex items-center justify-between`,children:[i.jsxs("h3",{className:`font-semibold ${o==="approve"?"text-green-800":"text-red-800"} flex items-center gap-2`,children:[o==="approve"?i.jsx(Jl,{size:18}):i.jsx(bs,{size:18}),o==="approve"?"Approve Request":"Reject Request"]}),i.jsx("button",{onClick:m,className:"text-gray-500 hover:text-gray-700 transition-colors",children:i.jsx(bi,{size:20})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["You are about to ",i.jsx("strong",{children:o})," the leave request for",i.jsxs("span",{className:"font-semibold text-gray-900",children:[" ",(x=s.employee)==null?void 0:x.firstName," ",(y=s.employee)==null?void 0:y.lastName]}),"."]}),i.jsx(mo,{label:o==="reject"?"Reason for Rejection *":"Comments (Optional)",placeholder:o==="reject"?"Please explain why this request is being rejected...":"Add any comments...",value:c,onChange:v=>d(v.target.value),rows:3,autoFocus:!0}),o==="reject"&&!c.trim()&&i.jsxs("p",{className:"text-xs text-amber-600 flex items-center gap-1",children:[i.jsx(bs,{size:12})," Reason is required for rejection."]})]}),i.jsxs("div",{className:"p-4 border-t border-gray-100 flex justify-end gap-3 bg-gray-50",children:[i.jsx(at,{variant:"ghost",onClick:m,disabled:u,children:"Cancel"}),i.jsxs(at,{variant:o==="approve"?"primary":"danger",onClick:g,isLoading:u,disabled:o==="reject"&&!c.trim(),children:["Confirm ",o==="approve"?"Approval":"Rejection"]})]})]})})]})}const La=C.forwardRef(({label:e,error:t,className:n="",id:r,...s},a)=>{const o=r||s.name||Math.random().toString(36).substr(2,9);return i.jsxs("div",{className:dc("flex items-start group",n),children:[i.jsxs("label",{htmlFor:o,className:"flex items-center h-5 relative cursor-pointer",children:[i.jsx("input",{ref:a,id:o,type:"checkbox",className:"peer sr-only",...s}),i.jsx("div",{className:dc("w-5 h-5 rounded-md border border-border bg-bg-card transition-all duration-200 ease-in-out","peer-focus:ring-2 peer-focus:ring-brand-primary peer-focus:ring-offset-1 peer-focus:ring-offset-bg-main","peer-checked:bg-brand-primary peer-checked:border-brand-primary peer-checked:text-white","peer-checked:[&_svg]:opacity-100 peer-checked:[&_svg]:scale-100","peer-disabled:opacity-50 peer-disabled:cursor-not-allowed","flex items-center justify-center shadow-sm"),children:i.jsx(Jl,{size:12,strokeWidth:3,className:"opacity-0 scale-50 transition-all duration-200"})})]}),e&&i.jsxs("div",{className:"ml-2.5 text-sm select-none",children:[i.jsx("label",{htmlFor:o,className:"font-medium text-text-primary cursor-pointer group-hover:text-brand-primary transition-colors",children:e}),t&&i.jsx("p",{className:"text-xs text-status-error mt-1",children:t})]})]})});La.displayName="Checkbox";function jte({isOpen:e,onClose:t}){const[n,r]=C.useState({type:"",startDate:"",endDate:"",reason:"",isHalfDay:!1}),[s,a]=C.useState([]),[o,l]=C.useState(!1),[c,d]=C.useState(""),u=p=>{const{name:h,value:m,type:g}=p.target;if(g==="checkbox"){const x=p.target.checked;r(y=>({...y,[h]:x,endDate:h==="isHalfDay"&&x?y.startDate:y.endDate}))}else r(x=>{const y={...x,[h]:m};return x.isHalfDay&&h==="startDate"&&(y.endDate=m),y})};C.useEffect(()=>{e&&(console.log("DEBUG: Fetching leave stats..."),xe.getLeaveStats().then(p=>{if(console.log("DEBUG: getLeaveStats response:",p),p&&p.stats){const h=p.stats.map(m=>m.type);console.log("DEBUG: Extracted Leave Types:",h),a(h),h.length>0&&!h.includes(n.type)&&r(m=>({...m,type:h[0]}))}else if(p&&p.leavePolicy){const h=Object.keys(p.leavePolicy);a(h),h.length>0&&!h.includes(n.type)&&r(m=>({...m,type:h[0]}))}else console.log("DEBUG: No stats or leavePolicy in data",p)}))},[e]);const f=async p=>{p.preventDefault(),l(!0),d("");try{await xe.applyLeave(n),t(),window.location.reload()}catch(h){d(h.message||"Failed to submit leave request")}finally{l(!1)}};return i.jsx(Hn,{isOpen:e,onClose:t,title:"Apply for Leave",maxWidth:"max-w-md",footer:i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(at,{variant:"outline",onClick:t,children:"Cancel"}),i.jsx(at,{onClick:()=>f({preventDefault:()=>{}}),disabled:o,isLoading:o,children:"Submit Application"})]}),children:i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[c&&i.jsxs("div",{className:"p-3 bg-status-error/10 text-status-error text-sm rounded-lg flex items-center gap-2",children:[i.jsx(bi,{size:14})," ",c]}),i.jsx("div",{className:"space-y-1",children:i.jsx(Gt,{label:"Leave Type",value:n.type,onChange:p=>r({...n,type:p}),options:s.map(p=>({value:p,label:p}))})}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(La,{id:"isHalfDay",name:"isHalfDay",checked:n.isHalfDay,onChange:u,label:"Half Day Leave"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{className:"space-y-1",children:i.jsx(qr,{label:"Start Date",name:"startDate",value:n.startDate,onChange:u,required:!0})}),i.jsx("div",{className:"space-y-1",children:i.jsx(qr,{label:"End Date",name:"endDate",value:n.endDate,onChange:u,required:!0,disabled:n.isHalfDay,className:n.isHalfDay?"opacity-50 cursor-not-allowed":""})})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-text-secondary uppercase",children:"Reason"}),i.jsx(mo,{name:"reason",value:n.reason,onChange:u,required:!0,rows:3,placeholder:"Please provide a reason for your leave...",className:"bg-bg-card"})]})]})})}var wx=e=>e.type==="checkbox",Cu=e=>e instanceof Date,Ma=e=>e==null;const W8=e=>typeof e=="object";var ss=e=>!Ma(e)&&!Array.isArray(e)&&W8(e)&&!Cu(e),G8=e=>ss(e)&&e.target?wx(e.target)?e.target.checked:e.target.value:e,Ste=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,K8=(e,t)=>e.has(Ste(t)),kte=e=>{const t=e.constructor&&e.constructor.prototype;return ss(t)&&t.hasOwnProperty("isPrototypeOf")},fk=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ms(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(fk&&(e instanceof Blob||r))&&(n||ss(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!kte(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=ms(e[s]));else return e;return t}var c1=e=>/^\w*$/.test(e),Ar=e=>e===void 0,hk=e=>Array.isArray(e)?e.filter(Boolean):[],pk=e=>hk(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ot=(e,t,n)=>{if(!t||!ss(e))return n;const r=(c1(t)?[t]:pk(t)).reduce((s,a)=>Ma(s)?s:s[a],e);return Ar(r)||r===e?Ar(e[t])?n:e[t]:r},ni=e=>typeof e=="boolean",tr=(e,t,n)=>{let r=-1;const s=c1(t)?[t]:pk(t),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let c=n;if(r!==o){const d=e[l];c=ss(d)||Array.isArray(d)?d:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Lb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},so={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Al={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},J8=ge.createContext(null);J8.displayName="HookFormContext";const mk=()=>ge.useContext(J8);var X8=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const o=a;return t._proxyFormState[o]!==so.all&&(t._proxyFormState[o]=!r||so.all),n&&(n[o]=!0),e[o]}});return s};const gk=typeof window<"u"?ge.useLayoutEffect:ge.useEffect;function Cte(e){const t=mk(),{control:n=t.control,disabled:r,name:s,exact:a}=e||{},[o,l]=ge.useState(n._formState),c=ge.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return gk(()=>n._subscribe({name:s,formState:c.current,exact:a,callback:d=>{!r&&l({...n._formState,...d})}}),[s,r,a]),ge.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),ge.useMemo(()=>X8(o,n,c.current,!1),[o,n])}var ai=e=>typeof e=="string",H5=(e,t,n,r,s)=>ai(e)?(r&&t.watch.add(e),ot(n,e,s)):Array.isArray(e)?e.map(a=>(r&&t.watch.add(a),ot(n,a))):(r&&(t.watchAll=!0),n),U5=e=>Ma(e)||!W8(e);function ao(e,t,n=new WeakSet){if(U5(e)||U5(t))return Object.is(e,t);if(Cu(e)&&Cu(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const a of r){const o=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const l=t[a];if(Cu(o)&&Cu(l)||ss(o)&&ss(l)||Array.isArray(o)&&Array.isArray(l)?!ao(o,l,n):!Object.is(o,l))return!1}}return!0}function Ate(e){const t=mk(),{control:n=t.control,name:r,defaultValue:s,disabled:a,exact:o,compute:l}=e||{},c=ge.useRef(s),d=ge.useRef(l),u=ge.useRef(void 0),f=ge.useRef(n),p=ge.useRef(r);d.current=l;const[h,m]=ge.useState(()=>{const j=n._getWatch(r,c.current);return d.current?d.current(j):j}),g=ge.useCallback(j=>{const D=H5(r,n._names,j||n._formValues,!1,c.current);return d.current?d.current(D):D},[n._formValues,n._names,r]),x=ge.useCallback(j=>{if(!a){const D=H5(r,n._names,j||n._formValues,!1,c.current);if(d.current){const T=d.current(D);ao(T,u.current)||(m(T),u.current=T)}else m(D)}},[n._formValues,n._names,a,r]);gk(()=>((f.current!==n||!ao(p.current,r))&&(f.current=n,p.current=r,x()),n._subscribe({name:r,formState:{values:!0},exact:o,callback:j=>{x(j.values)}})),[n,o,r,x]),ge.useEffect(()=>n._removeUnmounted());const y=f.current!==n,v=p.current,N=ge.useMemo(()=>{if(a)return null;const j=!y&&!ao(v,r);return y||j?g():null},[a,y,r,v,g]);return N!==null?N:h}function Mte(e){const t=mk(),{name:n,disabled:r,control:s=t.control,shouldUnregister:a,defaultValue:o,exact:l=!0}=e,c=K8(s._names.array,n),d=ge.useMemo(()=>ot(s._formValues,n,ot(s._defaultValues,n,o)),[s,n,o]),u=Ate({control:s,name:n,defaultValue:d,exact:l}),f=Cte({control:s,name:n,exact:l}),p=ge.useRef(e),h=ge.useRef(void 0),m=ge.useRef(s.register(n,{...e.rules,value:u,...ni(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const g=ge.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ot(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!ot(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ot(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ot(f.validatingFields,n)},error:{enumerable:!0,get:()=>ot(f.errors,n)}}),[f,n]),x=ge.useCallback(j=>m.current.onChange({target:{value:G8(j),name:n},type:Lb.CHANGE}),[n]),y=ge.useCallback(()=>m.current.onBlur({target:{value:ot(s._formValues,n),name:n},type:Lb.BLUR}),[n,s._formValues]),v=ge.useCallback(j=>{const D=ot(s._fields,n);D&&j&&(D._f.ref={focus:()=>j.focus&&j.focus(),select:()=>j.select&&j.select(),setCustomValidity:T=>j.setCustomValidity(T),reportValidity:()=>j.reportValidity()})},[s._fields,n]),N=ge.useMemo(()=>({name:n,value:u,...ni(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:x,onBlur:y,ref:v}),[n,r,f.disabled,x,y,v,u]);return ge.useEffect(()=>{const j=s._options.shouldUnregister||a,D=h.current;D&&D!==n&&!c&&s.unregister(D),s.register(n,{...p.current.rules,...ni(p.current.disabled)?{disabled:p.current.disabled}:{}});const T=(A,S)=>{const E=ot(s._fields,A);E&&E._f&&(E._f.mount=S)};if(T(n,!0),j){const A=ms(ot(s._options.defaultValues,n,p.current.defaultValue));tr(s._defaultValues,n,A),Ar(ot(s._formValues,n))&&tr(s._formValues,n,A)}return!c&&s.register(n),h.current=n,()=>{(c?j&&!s._state.action:j)?s.unregister(n):T(n,!1)}},[n,s,c,a]),ge.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),ge.useMemo(()=>({field:N,formState:f,fieldState:g}),[N,f,g])}const Ml=e=>e.render(Mte(e));var Dte=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},tg=e=>Array.isArray(e)?e:[e],uD=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}};function Q8(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const s=e[r],a=t[r];if(s&&ss(s)&&a){const o=Q8(s,a);ss(o)&&(n[r]=o)}else e[r]&&(n[r]=a)}return n}var ca=e=>ss(e)&&!Object.keys(e).length,xk=e=>e.type==="file",io=e=>typeof e=="function",Rb=e=>{if(!fk)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Z8=e=>e.type==="select-multiple",yk=e=>e.type==="radio",Ete=e=>yk(e)||wx(e),Pw=e=>Rb(e)&&e.isConnected;function _te(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Ar(e)?r++:e[t[r++]];return e}function Tte(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ar(e[t]))return!1;return!0}function Xr(e,t){const n=Array.isArray(t)?t:c1(t)?[t]:pk(t),r=n.length===1?e:_te(e,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(ss(r)&&ca(r)||Array.isArray(r)&&Tte(r))&&Xr(e,n.slice(0,-1)),e}var Lte=e=>{for(const t in e)if(io(e[t]))return!0;return!1};function eO(e){return Array.isArray(e)||ss(e)&&!Lte(e)}function $5(e,t={}){for(const n in e){const r=e[n];eO(r)?(t[n]=Array.isArray(r)?[]:{},$5(r,t[n])):Ar(r)||(t[n]=!0)}return t}function Zf(e,t,n){n||(n=$5(t));for(const r in e){const s=e[r];if(eO(s))Ar(t)||U5(n[r])?n[r]=$5(s,Array.isArray(s)?[]:{}):Zf(s,Ma(t)?{}:t[r],n[r]);else{const a=t[r];n[r]=!ao(s,a)}}return n}const fD={value:!1,isValid:!1},hD={value:!0,isValid:!0};var tO=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ar(e[0].attributes.value)?Ar(e[0].value)||e[0].value===""?hD:{value:e[0].value,isValid:!0}:hD:fD}return fD},nO=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Ar(e)?e:t?e===""?NaN:e&&+e:n&&ai(e)?new Date(e):r?r(e):e;const pD={isValid:!1,value:null};var rO=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,pD):pD;function mD(e){const t=e.ref;return xk(t)?t.files:yk(t)?rO(e.refs).value:Z8(t)?[...t.selectedOptions].map(({value:n})=>n):wx(t)?tO(e.refs).value:nO(Ar(t.value)?e.ref.value:t.value,e)}var Rte=(e,t,n,r)=>{const s={};for(const a of e){const o=ot(t,a);o&&tr(s,a,o._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},Ob=e=>e instanceof RegExp,wm=e=>Ar(e)?e:Ob(e)?e.source:ss(e)?Ob(e.value)?e.value.source:e.value:e,gD=e=>({isOnSubmit:!e||e===so.onSubmit,isOnBlur:e===so.onBlur,isOnChange:e===so.onChange,isOnAll:e===so.all,isOnTouch:e===so.onTouched});const xD="AsyncFunction";var Ote=e=>!!e&&!!e.validate&&!!(io(e.validate)&&e.validate.constructor.name===xD||ss(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===xD)),Pte=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),yD=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const ng=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const a=ot(e,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(ng(l,t))break}else if(ss(l)&&ng(l,t))break}}};function bD(e,t,n){const r=ot(e,n);if(r||c1(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=ot(t,a),l=ot(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};s.pop()}return{name:n}}var Ite=(e,t,n,r)=>{n(e);const{name:s,...a}=e;return ca(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!r||so.all))},Fte=(e,t,n)=>!e||!t||e===t||tg(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),zte=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,Bte=(e,t)=>!hk(ot(e,t)).length&&Xr(e,t),Hte=(e,t,n)=>{const r=tg(ot(e,n));return tr(r,"root",t[n]),tr(e,n,r),e};function vD(e,t,n="validate"){if(ai(e)||Array.isArray(e)&&e.every(ai)||ni(e)&&!e)return{type:n,message:ai(e)?e:"",ref:t}}var qf=e=>ss(e)&&!Ob(e)?e:{value:e,message:""},wD=async(e,t,n,r,s,a)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:f,max:p,pattern:h,validate:m,name:g,valueAsNumber:x,mount:y}=e._f,v=ot(n,g);if(!y||t.has(g))return{};const N=l?l[0]:o,j=O=>{s&&N.reportValidity&&(N.setCustomValidity(ni(O)?"":O||""),N.reportValidity())},D={},T=yk(o),A=wx(o),S=T||A,E=(x||xk(o))&&Ar(o.value)&&Ar(v)||Rb(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,I=Dte.bind(null,g,r,D),L=(O,F,U,W=Al.maxLength,X=Al.minLength)=>{const P=O?F:U;D[g]={type:O?W:X,message:P,ref:o,...I(O?W:X,P)}};if(a?!Array.isArray(v)||!v.length:c&&(!S&&(E||Ma(v))||ni(v)&&!v||A&&!tO(l).isValid||T&&!rO(l).isValid)){const{value:O,message:F}=ai(c)?{value:!!c,message:c}:qf(c);if(O&&(D[g]={type:Al.required,message:F,ref:N,...I(Al.required,F)},!r))return j(F),D}if(!E&&(!Ma(f)||!Ma(p))){let O,F;const U=qf(p),W=qf(f);if(!Ma(v)&&!isNaN(v)){const X=o.valueAsNumber||v&&+v;Ma(U.value)||(O=X>U.value),Ma(W.value)||(F=X<W.value)}else{const X=o.valueAsDate||new Date(v),P=Y=>new Date(new Date().toDateString()+" "+Y),z=o.type=="time",oe=o.type=="week";ai(U.value)&&v&&(O=z?P(v)>P(U.value):oe?v>U.value:X>new Date(U.value)),ai(W.value)&&v&&(F=z?P(v)<P(W.value):oe?v<W.value:X<new Date(W.value))}if((O||F)&&(L(!!O,U.message,W.message,Al.max,Al.min),!r))return j(D[g].message),D}if((d||u)&&!E&&(ai(v)||a&&Array.isArray(v))){const O=qf(d),F=qf(u),U=!Ma(O.value)&&v.length>+O.value,W=!Ma(F.value)&&v.length<+F.value;if((U||W)&&(L(U,O.message,F.message),!r))return j(D[g].message),D}if(h&&!E&&ai(v)){const{value:O,message:F}=qf(h);if(Ob(O)&&!v.match(O)&&(D[g]={type:Al.pattern,message:F,ref:o,...I(Al.pattern,F)},!r))return j(F),D}if(m){if(io(m)){const O=await m(v,n),F=vD(O,N);if(F&&(D[g]={...F,...I(Al.validate,F.message)},!r))return j(F.message),D}else if(ss(m)){let O={};for(const F in m){if(!ca(O)&&!r)break;const U=vD(await m[F](v,n),N,F);U&&(O={...U,...I(F,U.message)},j(U.message),r&&(D[g]=O))}if(!ca(O)&&(D[g]={ref:N,...O},!r))return D}}return j(!0),D};const Ute={mode:so.onSubmit,reValidateMode:so.onChange,shouldFocusError:!0};function $te(e={}){let t={...Ute,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:io(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=ss(t.defaultValues)||ss(t.values)?ms(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:ms(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const p={array:uD(),state:uD()},h=t.criteriaMode===so.all,m=ne=>de=>{clearTimeout(d),d=setTimeout(ne,de)},g=async ne=>{if(!t.disabled&&(u.isValid||f.isValid||ne)){const de=t.resolver?ca((await A()).errors):await E(r,!0);de!==n.isValid&&p.state.next({isValid:de})}},x=(ne,de)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((ne||Array.from(l.mount)).forEach(ce=>{ce&&(de?tr(n.validatingFields,ce,de):Xr(n.validatingFields,ce))}),p.state.next({validatingFields:n.validatingFields,isValidating:!ca(n.validatingFields)}))},y=(ne,de=[],ce,De,Re=!0,Me=!0)=>{if(De&&ce&&!t.disabled){if(o.action=!0,Me&&Array.isArray(ot(r,ne))){const He=ce(ot(r,ne),De.argA,De.argB);Re&&tr(r,ne,He)}if(Me&&Array.isArray(ot(n.errors,ne))){const He=ce(ot(n.errors,ne),De.argA,De.argB);Re&&tr(n.errors,ne,He),Bte(n.errors,ne)}if((u.touchedFields||f.touchedFields)&&Me&&Array.isArray(ot(n.touchedFields,ne))){const He=ce(ot(n.touchedFields,ne),De.argA,De.argB);Re&&tr(n.touchedFields,ne,He)}(u.dirtyFields||f.dirtyFields)&&(n.dirtyFields=Zf(s,a)),p.state.next({name:ne,isDirty:L(ne,de),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else tr(a,ne,de)},v=(ne,de)=>{tr(n.errors,ne,de),p.state.next({errors:n.errors})},N=ne=>{n.errors=ne,p.state.next({errors:n.errors,isValid:!1})},j=(ne,de,ce,De)=>{const Re=ot(r,ne);if(Re){const Me=ot(a,ne,Ar(ce)?ot(s,ne):ce);Ar(Me)||De&&De.defaultChecked||de?tr(a,ne,de?Me:mD(Re._f)):U(ne,Me),o.mount&&!o.action&&g()}},D=(ne,de,ce,De,Re)=>{let Me=!1,He=!1;const dt={name:ne};if(!t.disabled){if(!ce||De){(u.isDirty||f.isDirty)&&(He=n.isDirty,n.isDirty=dt.isDirty=L(),Me=He!==dt.isDirty);const it=ao(ot(s,ne),de);He=!!ot(n.dirtyFields,ne),it?Xr(n.dirtyFields,ne):tr(n.dirtyFields,ne,!0),dt.dirtyFields=n.dirtyFields,Me=Me||(u.dirtyFields||f.dirtyFields)&&He!==!it}if(ce){const it=ot(n.touchedFields,ne);it||(tr(n.touchedFields,ne,ce),dt.touchedFields=n.touchedFields,Me=Me||(u.touchedFields||f.touchedFields)&&it!==ce)}Me&&Re&&p.state.next(dt)}return Me?dt:{}},T=(ne,de,ce,De)=>{const Re=ot(n.errors,ne),Me=(u.isValid||f.isValid)&&ni(de)&&n.isValid!==de;if(t.delayError&&ce?(c=m(()=>v(ne,ce)),c(t.delayError)):(clearTimeout(d),c=null,ce?tr(n.errors,ne,ce):Xr(n.errors,ne)),(ce?!ao(Re,ce):Re)||!ca(De)||Me){const He={...De,...Me&&ni(de)?{isValid:de}:{},errors:n.errors,name:ne};n={...n,...He},p.state.next(He)}},A=async ne=>{x(ne,!0);const de=await t.resolver(a,t.context,Rte(ne||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return x(ne),de},S=async ne=>{const{errors:de}=await A(ne);if(ne)for(const ce of ne){const De=ot(de,ce);De?tr(n.errors,ce,De):Xr(n.errors,ce)}else n.errors=de;return de},E=async(ne,de,ce={valid:!0})=>{for(const De in ne){const Re=ne[De];if(Re){const{_f:Me,...He}=Re;if(Me){const dt=l.array.has(Me.name),it=Re._f&&Ote(Re._f);it&&u.validatingFields&&x([Me.name],!0);const Qe=await wD(Re,l.disabled,a,h,t.shouldUseNativeValidation&&!de,dt);if(it&&u.validatingFields&&x([Me.name]),Qe[Me.name]&&(ce.valid=!1,de))break;!de&&(ot(Qe,Me.name)?dt?Hte(n.errors,Qe,Me.name):tr(n.errors,Me.name,Qe[Me.name]):Xr(n.errors,Me.name))}!ca(He)&&await E(He,de,ce)}}return ce.valid},I=()=>{for(const ne of l.unMount){const de=ot(r,ne);de&&(de._f.refs?de._f.refs.every(ce=>!Pw(ce)):!Pw(de._f.ref))&&ie(ne)}l.unMount=new Set},L=(ne,de)=>!t.disabled&&(ne&&de&&tr(a,ne,de),!ao(Y(),s)),O=(ne,de,ce)=>H5(ne,l,{...o.mount?a:Ar(de)?s:ai(ne)?{[ne]:de}:de},ce,de),F=ne=>hk(ot(o.mount?a:s,ne,t.shouldUnregister?ot(s,ne,[]):[])),U=(ne,de,ce={})=>{const De=ot(r,ne);let Re=de;if(De){const Me=De._f;Me&&(!Me.disabled&&tr(a,ne,nO(de,Me)),Re=Rb(Me.ref)&&Ma(de)?"":de,Z8(Me.ref)?[...Me.ref.options].forEach(He=>He.selected=Re.includes(He.value)):Me.refs?wx(Me.ref)?Me.refs.forEach(He=>{(!He.defaultChecked||!He.disabled)&&(Array.isArray(Re)?He.checked=!!Re.find(dt=>dt===He.value):He.checked=Re===He.value||!!Re)}):Me.refs.forEach(He=>He.checked=He.value===Re):xk(Me.ref)?Me.ref.value="":(Me.ref.value=Re,Me.ref.type||p.state.next({name:ne,values:ms(a)})))}(ce.shouldDirty||ce.shouldTouch)&&D(ne,Re,ce.shouldTouch,ce.shouldDirty,!0),ce.shouldValidate&&oe(ne)},W=(ne,de,ce)=>{for(const De in de){if(!de.hasOwnProperty(De))return;const Re=de[De],Me=ne+"."+De,He=ot(r,Me);(l.array.has(ne)||ss(Re)||He&&!He._f)&&!Cu(Re)?W(Me,Re,ce):U(Me,Re,ce)}},X=(ne,de,ce={})=>{const De=ot(r,ne),Re=l.array.has(ne),Me=ms(de);tr(a,ne,Me),Re?(p.array.next({name:ne,values:ms(a)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&ce.shouldDirty&&p.state.next({name:ne,dirtyFields:Zf(s,a),isDirty:L(ne,Me)})):De&&!De._f&&!Ma(Me)?W(ne,Me,ce):U(ne,Me,ce),yD(ne,l)&&p.state.next({...n,name:ne}),p.state.next({name:o.mount?ne:void 0,values:ms(a)})},P=async ne=>{o.mount=!0;const de=ne.target;let ce=de.name,De=!0;const Re=ot(r,ce),Me=it=>{De=Number.isNaN(it)||Cu(it)&&isNaN(it.getTime())||ao(it,ot(a,ce,it))},He=gD(t.mode),dt=gD(t.reValidateMode);if(Re){let it,Qe;const Et=de.type?mD(Re._f):G8(ne),rt=ne.type===Lb.BLUR||ne.type===Lb.FOCUS_OUT,Yn=!Pte(Re._f)&&!t.resolver&&!ot(n.errors,ce)&&!Re._f.deps||zte(rt,ot(n.touchedFields,ce),n.isSubmitted,dt,He),Pt=yD(ce,l,rt);tr(a,ce,Et),rt?(!de||!de.readOnly)&&(Re._f.onBlur&&Re._f.onBlur(ne),c&&c(0)):Re._f.onChange&&Re._f.onChange(ne);const Bt=D(ce,Et,rt),Vt=!ca(Bt)||Pt;if(!rt&&p.state.next({name:ce,type:ne.type,values:ms(a)}),Yn)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?rt&&g():rt||g()),Vt&&p.state.next({name:ce,...Pt?{}:Bt});if(!rt&&Pt&&p.state.next({...n}),t.resolver){const{errors:Mn}=await A([ce]);if(Me(Et),De){const kt=bD(n.errors,r,ce),jn=bD(Mn,r,kt.name||ce);it=jn.error,ce=jn.name,Qe=ca(Mn)}}else x([ce],!0),it=(await wD(Re,l.disabled,a,h,t.shouldUseNativeValidation))[ce],x([ce]),Me(Et),De&&(it?Qe=!1:(u.isValid||f.isValid)&&(Qe=await E(r,!0)));De&&(Re._f.deps&&(!Array.isArray(Re._f.deps)||Re._f.deps.length>0)&&oe(Re._f.deps),T(ce,Qe,it,Bt))}},z=(ne,de)=>{if(ot(n.errors,de)&&ne.focus)return ne.focus(),1},oe=async(ne,de={})=>{let ce,De;const Re=tg(ne);if(t.resolver){const Me=await S(Ar(ne)?ne:Re);ce=ca(Me),De=ne?!Re.some(He=>ot(Me,He)):ce}else ne?(De=(await Promise.all(Re.map(async Me=>{const He=ot(r,Me);return await E(He&&He._f?{[Me]:He}:He)}))).every(Boolean),!(!De&&!n.isValid)&&g()):De=ce=await E(r);return p.state.next({...!ai(ne)||(u.isValid||f.isValid)&&ce!==n.isValid?{}:{name:ne},...t.resolver||!ne?{isValid:ce}:{},errors:n.errors}),de.shouldFocus&&!De&&ng(r,z,ne?Re:l.mount),De},Y=(ne,de)=>{let ce={...o.mount?a:s};return de&&(ce=Q8(de.dirtyFields?n.dirtyFields:n.touchedFields,ce)),Ar(ne)?ce:ai(ne)?ot(ce,ne):ne.map(De=>ot(ce,De))},q=(ne,de)=>({invalid:!!ot((de||n).errors,ne),isDirty:!!ot((de||n).dirtyFields,ne),error:ot((de||n).errors,ne),isValidating:!!ot(n.validatingFields,ne),isTouched:!!ot((de||n).touchedFields,ne)}),_=ne=>{ne&&tg(ne).forEach(de=>Xr(n.errors,de)),p.state.next({errors:ne?n.errors:{}})},$=(ne,de,ce)=>{const De=(ot(r,ne,{_f:{}})._f||{}).ref,Re=ot(n.errors,ne)||{},{ref:Me,message:He,type:dt,...it}=Re;tr(n.errors,ne,{...it,...de,ref:De}),p.state.next({name:ne,errors:n.errors,isValid:!1}),ce&&ce.shouldFocus&&De&&De.focus&&De.focus()},J=(ne,de)=>io(ne)?p.state.subscribe({next:ce=>"values"in ce&&ne(O(void 0,de),ce)}):O(ne,de,!0),te=ne=>p.state.subscribe({next:de=>{Fte(ne.name,de.name,ne.exact)&&Ite(de,ne.formState||u,Ve,ne.reRenderRoot)&&ne.callback({values:{...a},...n,...de,defaultValues:s})}}).unsubscribe,Z=ne=>(o.mount=!0,f={...f,...ne.formState},te({...ne,formState:f})),ie=(ne,de={})=>{for(const ce of ne?tg(ne):l.mount)l.mount.delete(ce),l.array.delete(ce),de.keepValue||(Xr(r,ce),Xr(a,ce)),!de.keepError&&Xr(n.errors,ce),!de.keepDirty&&Xr(n.dirtyFields,ce),!de.keepTouched&&Xr(n.touchedFields,ce),!de.keepIsValidating&&Xr(n.validatingFields,ce),!t.shouldUnregister&&!de.keepDefaultValue&&Xr(s,ce);p.state.next({values:ms(a)}),p.state.next({...n,...de.keepDirty?{isDirty:L()}:{}}),!de.keepIsValid&&g()},he=({disabled:ne,name:de})=>{(ni(ne)&&o.mount||ne||l.disabled.has(de))&&(ne?l.disabled.add(de):l.disabled.delete(de))},ye=(ne,de={})=>{let ce=ot(r,ne);const De=ni(de.disabled)||ni(t.disabled);return tr(r,ne,{...ce||{},_f:{...ce&&ce._f?ce._f:{ref:{name:ne}},name:ne,mount:!0,...de}}),l.mount.add(ne),ce?he({disabled:ni(de.disabled)?de.disabled:t.disabled,name:ne}):j(ne,!0,de.value),{...De?{disabled:de.disabled||t.disabled}:{},...t.progressive?{required:!!de.required,min:wm(de.min),max:wm(de.max),minLength:wm(de.minLength),maxLength:wm(de.maxLength),pattern:wm(de.pattern)}:{},name:ne,onChange:P,onBlur:P,ref:Re=>{if(Re){ye(ne,de),ce=ot(r,ne);const Me=Ar(Re.value)&&Re.querySelectorAll&&Re.querySelectorAll("input,select,textarea")[0]||Re,He=Ete(Me),dt=ce._f.refs||[];if(He?dt.find(it=>it===Me):Me===ce._f.ref)return;tr(r,ne,{_f:{...ce._f,...He?{refs:[...dt.filter(Pw),Me,...Array.isArray(ot(s,ne))?[{}]:[]],ref:{type:Me.type,name:ne}}:{ref:Me}}}),j(ne,!1,void 0,Me)}else ce=ot(r,ne,{}),ce._f&&(ce._f.mount=!1),(t.shouldUnregister||de.shouldUnregister)&&!(K8(l.array,ne)&&o.action)&&l.unMount.add(ne)}}},Se=()=>t.shouldFocusError&&ng(r,z,l.mount),Ee=ne=>{ni(ne)&&(p.state.next({disabled:ne}),ng(r,(de,ce)=>{const De=ot(r,ce);De&&(de.disabled=De._f.disabled||ne,Array.isArray(De._f.refs)&&De._f.refs.forEach(Re=>{Re.disabled=De._f.disabled||ne}))},0,!1))},Pe=(ne,de)=>async ce=>{let De;ce&&(ce.preventDefault&&ce.preventDefault(),ce.persist&&ce.persist());let Re=ms(a);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:Me,values:He}=await A();n.errors=Me,Re=ms(He)}else await E(r);if(l.disabled.size)for(const Me of l.disabled)Xr(Re,Me);if(Xr(n.errors,"root"),ca(n.errors)){p.state.next({errors:{}});try{await ne(Re,ce)}catch(Me){De=Me}}else de&&await de({...n.errors},ce),Se(),setTimeout(Se);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ca(n.errors)&&!De,submitCount:n.submitCount+1,errors:n.errors}),De)throw De},qe=(ne,de={})=>{ot(r,ne)&&(Ar(de.defaultValue)?X(ne,ms(ot(s,ne))):(X(ne,de.defaultValue),tr(s,ne,ms(de.defaultValue))),de.keepTouched||Xr(n.touchedFields,ne),de.keepDirty||(Xr(n.dirtyFields,ne),n.isDirty=de.defaultValue?L(ne,ms(ot(s,ne))):L()),de.keepError||(Xr(n.errors,ne),u.isValid&&g()),p.state.next({...n}))},We=(ne,de={})=>{const ce=ne?ms(ne):s,De=ms(ce),Re=ca(ne),Me=Re?s:De;if(de.keepDefaultValues||(s=ce),!de.keepValues){if(de.keepDirtyValues){const He=new Set([...l.mount,...Object.keys(Zf(s,a))]);for(const dt of Array.from(He))ot(n.dirtyFields,dt)?tr(Me,dt,ot(a,dt)):X(dt,ot(Me,dt))}else{if(fk&&Ar(ne))for(const He of l.mount){const dt=ot(r,He);if(dt&&dt._f){const it=Array.isArray(dt._f.refs)?dt._f.refs[0]:dt._f.ref;if(Rb(it)){const Qe=it.closest("form");if(Qe){Qe.reset();break}}}}if(de.keepFieldsRef)for(const He of l.mount)X(He,ot(Me,He));else r={}}a=t.shouldUnregister?de.keepDefaultValues?ms(s):{}:ms(Me),p.array.next({values:{...Me}}),p.state.next({values:{...Me}})}l={mount:de.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!de.keepIsValid||!!de.keepDirtyValues||!t.shouldUnregister&&!ca(Me),o.watch=!!t.shouldUnregister,p.state.next({submitCount:de.keepSubmitCount?n.submitCount:0,isDirty:Re?!1:de.keepDirty?n.isDirty:!!(de.keepDefaultValues&&!ao(ne,s)),isSubmitted:de.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Re?{}:de.keepDirtyValues?de.keepDefaultValues&&a?Zf(s,a):n.dirtyFields:de.keepDefaultValues&&ne?Zf(s,ne):de.keepDirty?n.dirtyFields:{},touchedFields:de.keepTouched?n.touchedFields:{},errors:de.keepErrors?n.errors:{},isSubmitSuccessful:de.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},V=(ne,de)=>We(io(ne)?ne(a):ne,de),Ae=(ne,de={})=>{const ce=ot(r,ne),De=ce&&ce._f;if(De){const Re=De.refs?De.refs[0]:De.ref;Re.focus&&(Re.focus(),de.shouldSelect&&io(Re.select)&&Re.select())}},Ve=ne=>{n={...n,...ne}},_e={control:{register:ye,unregister:ie,getFieldState:q,handleSubmit:Pe,setError:$,_subscribe:te,_runSchema:A,_focusError:Se,_getWatch:O,_getDirty:L,_setValid:g,_setFieldArray:y,_setDisabledField:he,_setErrors:N,_getFieldArray:F,_reset:We,_resetDefaultValues:()=>io(t.defaultValues)&&t.defaultValues().then(ne=>{V(ne,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:I,_disableForm:Ee,_subjects:p,_proxyFormState:u,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(ne){o=ne},get _defaultValues(){return s},get _names(){return l},set _names(ne){l=ne},get _formState(){return n},get _options(){return t},set _options(ne){t={...t,...ne}}},subscribe:Z,trigger:oe,register:ye,handleSubmit:Pe,watch:J,setValue:X,getValues:Y,reset:V,resetField:qe,clearErrors:_,unregister:ie,setError:$,setFocus:Ae,getFieldState:q};return{..._e,formControl:_e}}function sO(e={}){const t=ge.useRef(void 0),n=ge.useRef(void 0),[r,s]=ge.useState({isDirty:!1,isValidating:!1,isLoading:io(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:io(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!io(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=$te(e);t.current={...l,formState:r}}const a=t.current.control;return a._options=e,gk(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),ge.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),ge.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),ge.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),ge.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),ge.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),ge.useEffect(()=>{var o;e.values&&!ao(e.values,n.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),!((o=a._options.resetOptions)===null||o===void 0)&&o.keepIsValid||a._setValid(),n.current=e.values,s(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),ge.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=X8(r,a),t.current}const zc=({label:e,checked:t,onChange:n,helpText:r,className:s=""})=>i.jsxs("div",{className:`flex items-center justify-between ${s}`,children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-sm font-medium text-text-primary",children:e}),r&&i.jsx("span",{className:"text-xs text-text-secondary mt-0.5",children:r})]}),i.jsx("button",{type:"button",onClick:()=>n(!t),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${t?"bg-brand-primary":"bg-gray-200"}`,role:"switch","aria-checked":t,children:i.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t?"translate-x-5":"translate-x-0"}`})})]}),qte=({options:e,values:t,onChange:n})=>{const r=s=>{t.includes(s)?n(t.filter(a=>a!==s)):n([...t,s])};return i.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.map(s=>i.jsx(La,{label:s,checked:t.includes(s),onChange:()=>r(s)},s))})};function Vte({policyId:e,isOpen:t,onClose:n}){var m;const{register:r,control:s,handleSubmit:a,reset:o,watch:l,formState:{errors:c,isSubmitting:d},setValue:u}=sO({defaultValues:{name:"",shortCode:"",description:"",status:"Active",totalLeaves:12,accrualType:"Monthly",allowCarryForward:!1,maxCarryForward:0,allowHalfDay:!1,allowNegative:!1,isPaid:!0,employeeTypes:["Permanent"],requiresApproval:!0,minNotice:0,docRequired:!1,docRequiredAfter:3,visibleToEmployees:!0}}),f=l();C.useEffect(()=>{e&&t?xe.getLeavePolicy(e).then(g=>{var x,y,v,N,j,D,T,A,S,E,I,L,O;if(g.policy){const F=g.policy;o({name:F.name,shortCode:F.shortCode||"",description:F.description||"",status:F.status,totalLeaves:((x=F.allocation)==null?void 0:x.cycle)==="Monthly"?F.allocation.count*12:((y=F.allocation)==null?void 0:y.count)||0,accrualType:(v=F.allocation)!=null&&v.proRata?"Pro-rata":((N=F.allocation)==null?void 0:N.cycle)||"Yearly",allowCarryForward:((j=F.allocation)==null?void 0:j.carryForward)||!1,maxCarryForward:((D=F.allocation)==null?void 0:D.maxCarryForward)||0,allowHalfDay:((T=F.rules)==null?void 0:T.allowHalfDay)||!1,allowNegative:((A=F.rules)==null?void 0:A.allowNegative)||!1,isPaid:F.category==="Paid",employeeTypes:((S=F.eligibility)==null?void 0:S.employeeTypes)||[],requiresApproval:((E=F.rules)==null?void 0:E.requiresApproval)||!1,minNotice:((I=F.rules)==null?void 0:I.minNotice)||0,docRequired:((L=F.docs)==null?void 0:L.mandatory)||!1,docRequiredAfter:((O=F.docs)==null?void 0:O.requiredAfter)||0,visibleToEmployees:F.visibleToEmployees??!0})}}):!e&&t&&o({name:"",shortCode:"",description:"",status:"Active",totalLeaves:12,accrualType:"Monthly",allowCarryForward:!1,maxCarryForward:0,allowHalfDay:!1,allowNegative:!1,isPaid:!0,employeeTypes:["Permanent"],requiresApproval:!0,minNotice:0,docRequired:!1,docRequiredAfter:3,visibleToEmployees:!0})},[e,t,o]);const p=async g=>{var x;try{const y={name:g.name,shortCode:g.shortCode,description:g.description,status:g.status,visibleToEmployees:g.visibleToEmployees,type:"Custom",category:g.isPaid?"Paid":"Unpaid",allocation:{cycle:g.accrualType==="Monthly"?"Monthly":"Yearly",count:g.accrualType==="Monthly"?g.totalLeaves/12:g.totalLeaves,proRata:g.accrualType==="Pro-rata",carryForward:g.allowCarryForward,maxCarryForward:g.allowCarryForward?g.maxCarryForward:0,encashment:!1,maxEncashment:0},eligibility:{employeeTypes:g.employeeTypes,gender:"All",minTenure:0},rules:{minNotice:g.minNotice,maxConsecutive:30,requiresApproval:g.requiresApproval,allowHalfDay:g.allowHalfDay,allowNegative:g.allowNegative},docs:{mandatory:g.docRequired,requiredAfter:g.docRequired?g.docRequiredAfter:0}},v=document.querySelector('input[name="document"]'),N=(x=v==null?void 0:v.files)==null?void 0:x[0];let j=y;if(N){const D=new FormData;D.append("document",N),D.append("data",JSON.stringify(y)),j=D}e?await xe.updateLeavePolicy(e,j):await xe.createLeavePolicy(j),n()}catch(y){alert("Failed to save policy: "+y.message)}},h=()=>{const g=[];return g.push(`${f.totalLeaves} leaves/year`),f.accrualType==="Monthly"?g.push("credited monthly"):f.accrualType==="Pro-rata"?g.push("pro-rata accrual"):g.push("credited yearly"),f.allowHalfDay&&g.push("half-day"),f.requiresApproval&&g.push("approval req."),g.join(", ")};return i.jsx(Hn,{isOpen:t,onClose:n,title:e?"Edit Leave Policy":"Create Leave Policy",maxWidth:"max-w-2xl",footer:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center w-full",children:[i.jsxs("div",{className:"flex flex-col text-left w-full sm:w-auto",children:[i.jsx("span",{className:"text-xs uppercase tracking-wider text-text-secondary font-semibold",children:"Summary"}),i.jsx("span",{className:"text-sm font-medium text-text-primary",children:h().charAt(0).toUpperCase()+h().slice(1)})]}),i.jsxs("div",{className:"flex gap-3 w-full sm:w-auto justify-end",children:[i.jsx(at,{variant:"ghost",onClick:n,children:"Cancel"}),i.jsx(at,{onClick:a(p),isLoading:d,leftIcon:i.jsx(yf,{size:16}),children:"Save"})]})]}),children:i.jsxs("form",{onSubmit:a(p),className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 border-b border-border pb-2",children:[i.jsx("div",{className:"h-5 w-1 bg-brand-primary rounded-full"}),i.jsx("h3",{className:"font-semibold text-base text-text-primary",children:"Leave Details"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(Ze,{label:"Leave Name",placeholder:"e.g. Casual Leave",...r("name",{required:"Name is required"}),error:(m=c.name)==null?void 0:m.message}),i.jsx(Ze,{label:"Short Code",placeholder:"e.g. CL",...r("shortCode")})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Description"}),i.jsx(mo,{placeholder:"Brief description visible to employees...",rows:2,...r("description")})]}),i.jsx(Ml,{name:"status",control:s,render:({field:g})=>i.jsx(zc,{label:"Is it Active?",checked:g.value==="Active",onChange:x=>g.onChange(x?"Active":"Inactive")})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 border-b border-border pb-2",children:[i.jsx("div",{className:"h-5 w-1 bg-brand-primary rounded-full"}),i.jsx("h3",{className:"font-semibold text-base text-text-primary",children:"Accrual & Usage"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[i.jsx(Ze,{label:"Total Leaves / Year",type:"number",...r("totalLeaves",{valueAsNumber:!0,min:0})}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Accrual Type"}),i.jsx("div",{className:"flex bg-bg-main p-1 rounded-md border border-border",children:["Yearly","Monthly","Pro-rata"].map(g=>i.jsx("button",{type:"button",onClick:()=>u("accrualType",g),className:`flex-1 text-xs py-1.5 rounded-sm transition-all ${l("accrualType")===g?"bg-white shadow text-brand-primary font-medium":"text-text-secondary hover:text-text-primary"}`,children:g},g))})]})]}),l("accrualType")==="Monthly"&&i.jsxs("div",{className:"bg-blue-50 text-blue-700 px-3 py-2 rounded text-xs flex items-center gap-2",children:[i.jsx(_S,{size:14}),i.jsxs("span",{children:[(l("totalLeaves")/12).toFixed(1)," days credited per month"]})]}),i.jsxs("div",{className:"bg-bg-main rounded-md p-4 space-y-3 border border-border",children:[i.jsxs("div",{className:"flex justify-between items-center gap-4",children:[i.jsx(Ml,{name:"allowCarryForward",control:s,render:({field:g})=>i.jsx(zc,{label:"Carry Forward",checked:g.value||!1,onChange:g.onChange,className:"flex-1"})}),l("allowCarryForward")&&i.jsx("div",{className:"w-24",children:i.jsx(Ze,{placeholder:"Max Days",type:"number",className:"h-8 text-sm",...r("maxCarryForward",{valueAsNumber:!0})})})]}),i.jsx("hr",{className:"border-border/50"}),i.jsx(Ml,{name:"allowHalfDay",control:s,render:({field:g})=>i.jsx(zc,{label:"Allow Half Day",checked:g.value||!1,onChange:g.onChange})}),i.jsx(Ml,{name:"allowNegative",control:s,render:({field:g})=>i.jsx(zc,{label:"Allow Negative Balance",checked:g.value||!1,onChange:g.onChange})}),i.jsx(Ml,{name:"isPaid",control:s,render:({field:g})=>i.jsx(zc,{label:"Paid Leave",checked:g.value||!1,onChange:g.onChange,helpText:g.value?"Salary is paid":"Loss of Pay"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 border-b border-border pb-2",children:[i.jsx("div",{className:"h-5 w-1 bg-brand-primary rounded-full"}),i.jsx("h3",{className:"font-semibold text-base text-text-primary",children:"Applicability & Approval"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Applicable Employee Types"}),i.jsx(Ml,{name:"employeeTypes",control:s,render:({field:g})=>i.jsx(qte,{options:["Permanent","Contract","Intern","Freelancer","Part-Time"],values:g.value||[],onChange:g.onChange})})]}),i.jsxs("div",{className:"bg-bg-main rounded-md p-4 space-y-3 border border-border",children:[i.jsx(Ml,{name:"requiresApproval",control:s,render:({field:g})=>i.jsx(zc,{label:"Approval Required",checked:g.value||!1,onChange:g.onChange})}),i.jsx(Ze,{label:"Min Notice Period (Days)",type:"number",...r("minNotice",{valueAsNumber:!0})}),i.jsx("hr",{className:"border-border/50"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Policy Document (PDF/Image)"}),i.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:g=>{g.target.files&&g.target.files[0]},name:"document",className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/10 file:text-brand-primary hover:file:bg-brand-primary/20"}),i.jsx("p",{className:"text-xs text-text-secondary",children:"Upload a policy document for employees to view."})]}),i.jsx("hr",{className:"border-border/50"}),i.jsxs("div",{className:"flex justify-between items-center gap-4",children:[i.jsx(Ml,{name:"docRequired",control:s,render:({field:g})=>i.jsx(zc,{label:"Document Required",checked:g.value||!1,onChange:g.onChange,className:"flex-1"})}),l("docRequired")&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-text-secondary whitespace-nowrap",children:"After days:"}),i.jsx("div",{className:"w-20",children:i.jsx(Ze,{type:"number",className:"h-8 text-sm",...r("docRequiredAfter",{valueAsNumber:!0})})})]})]}),i.jsx("hr",{className:"border-border/50"}),i.jsx(Ml,{name:"visibleToEmployees",control:s,render:({field:g})=>i.jsx(zc,{label:"Visible to Employees",checked:g.value||!1,onChange:g.onChange,helpText:g.value?"":"Hidden from employee dashboard"})})]})]})]})})}function Yte({isOpen:e,onClose:t}){var u;const{register:n,handleSubmit:r,reset:s,formState:{errors:a,isSubmitting:o}}=sO({defaultValues:{name:"",description:""}}),[l,c]=C.useState(null),d=async f=>{if(!l){alert("Please select a document to upload.");return}try{const p={name:f.name,description:f.description,status:"Active",type:"Custom",category:"Unpaid",visibleToEmployees:!0,allocation:{cycle:"Yearly",count:0,proRata:!1,carryForward:!1,maxCarryForward:0,encashment:!1,maxEncashment:0},eligibility:{employeeTypes:["Permanent","Contract","Intern","Induction"],gender:"All",minTenure:0},rules:{minNotice:0,maxConsecutive:365,requiresApproval:!1,allowHalfDay:!1,allowNegative:!1},docs:{mandatory:!1,requiredAfter:0}},h=new FormData;h.append("document",l),h.append("data",JSON.stringify(p)),await xe.createLeavePolicy(h),s(),c(null),t()}catch(p){alert("Failed to upload policy: "+p.message)}};return i.jsx(Hn,{isOpen:e,onClose:t,title:"Upload Policy Document",maxWidth:"max-w-lg",footer:i.jsxs("div",{className:"flex gap-3 justify-end w-full",children:[i.jsx(at,{variant:"ghost",onClick:t,children:"Cancel"}),i.jsx(at,{onClick:r(d),isLoading:o,leftIcon:i.jsx(UC,{size:16}),children:"Upload"})]}),children:i.jsxs("form",{onSubmit:r(d),className:"space-y-4",children:[i.jsx(Ze,{label:"Policy Name",placeholder:"e.g. Employee Handbook 2024",...n("name",{required:"Name is required"}),error:(u=a.name)==null?void 0:u.message}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Description"}),i.jsx(mo,{placeholder:"Brief description...",rows:3,...n("description")})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-text-primary",children:["Document (PDF/Image) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 flex flex-col items-center justify-center bg-bg-main hover:bg-bg-hover transition-colors",children:[i.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:f=>{f.target.files&&f.target.files[0]&&c(f.target.files[0])},className:"hidden",id:"policy-doc-upload"}),i.jsxs("label",{htmlFor:"policy-doc-upload",className:"cursor-pointer flex flex-col items-center gap-2 text-center",children:[i.jsx(UC,{size:32,className:"text-brand-primary/50"}),l?i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-text-primary",children:l.name}),i.jsx("p",{className:"text-xs text-text-secondary",children:"Click to change file"})]}):i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-brand-primary",children:"Click to upload"}),i.jsx("p",{className:"text-xs text-text-secondary",children:"PDF, JPG, PNG up to 10MB"})]})]})]})]})]})})}function Wte(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(""),[o,l]=C.useState(!1),[c,d]=C.useState(!1),[u,f]=C.useState(null);C.useEffect(()=>{p()},[]);const p=async()=>{try{r(!0);const j=await xe.getLeavePolicies();t(j.policies||[])}catch(j){console.error("Failed to fetch policies:",j)}finally{r(!1)}},h=async j=>{if(confirm("Are you sure you want to delete this policy?"))try{await xe.deleteLeavePolicy(j),p()}catch{alert("Failed to delete policy")}},{user:m}=cn(),g=(m==null?void 0:m.role)==="Admin"||(m==null?void 0:m.role)==="HR",x=e.filter(j=>!(j.type==="Custom"&&j.allocation.count===0)),y=e.filter(j=>j.type==="Custom"&&j.allocation.count===0),v=x.filter(j=>j.name.toLowerCase().includes(s.toLowerCase())||j.type.toLowerCase().includes(s.toLowerCase())),N=y.filter(j=>j.name.toLowerCase().includes(s.toLowerCase())||j.description&&j.description.toLowerCase().includes(s.toLowerCase()));return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Leave Policies"}),i.jsx("p",{className:"text-text-secondary",children:"Manage leave types and allocation rules"})]}),g&&i.jsxs("div",{className:"flex gap-3",children:[i.jsx(at,{variant:"outline",onClick:()=>d(!0),leftIcon:i.jsx(yi,{size:20}),children:"Upload Policy Document"}),i.jsx(at,{onClick:()=>l(!0),leftIcon:i.jsx(Wr,{size:20}),children:"Create New Policy"})]})]}),i.jsxs("div",{className:"flex gap-4 items-center bg-bg-panel border border-border rounded-lg p-3",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(bf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-secondary",size:18}),i.jsx(Ze,{className:"pl-10",placeholder:"Search policies & documents...",value:s,onChange:j=>a(j.target.value)})]}),i.jsx(at,{variant:"secondary",leftIcon:i.jsx(V$,{size:18}),children:"Filters"})]}),i.jsx("div",{className:"border border-border rounded-lg overflow-hidden bg-bg-panel",children:i.jsx(Qo,{columns:[{header:"Policy Name",accessorKey:"name",render:j=>i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-text-primary",children:j.name}),i.jsx("div",{className:"text-xs text-text-secondary",children:j.category})]})},{header:"Leave Type",accessorKey:"type"},{header:"Cycle",accessorKey:"allocation.cycle",render:j=>j.allocation.cycle},{header:"Count",render:j=>i.jsxs("span",{className:"font-semibold text-brand-primary",children:[j.allocation.count," days"]})},{header:"Apply To",render:j=>i.jsx("div",{className:"flex flex-wrap gap-1",children:j.eligibility.applyTo.length>0?j.eligibility.applyTo.map(D=>i.jsx("span",{className:"bg-bg-main text-xs px-2 py-0.5 rounded-full border border-border",children:D},D)):i.jsx("span",{className:"text-xs text-text-secondary",children:"All"})})},{header:"Status",render:j=>i.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${j.status==="Active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:j.status})},{header:"Actions",render:j=>i.jsx(Gte,{policy:j,onDelete:h,onEdit:D=>{f(D),l(!0)}})}],data:v,isLoading:n,emptyMessage:"No leave policies found"})})]}),N.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"Reference Documents"}),i.jsx("p",{className:"text-text-secondary",children:"Company handbooks, guidelines, and general policies"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(j=>{var D;return i.jsxs("div",{className:"bg-bg-panel border border-border rounded-lg p-5 hover:border-brand-primary/50 transition-colors flex items-start gap-3",children:[i.jsx("div",{className:"p-3 bg-brand-primary/10 text-brand-primary rounded-lg",children:i.jsx(yr,{size:24})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-text-primary truncate",title:j.name,children:j.name}),i.jsx("p",{className:"text-sm text-text-secondary line-clamp-2 mt-1",children:j.description||"No description provided"}),i.jsxs("div",{className:"flex gap-3 mt-4",children:[((D=j.docs)==null?void 0:D.documentUrl)&&i.jsxs("a",{href:j.docs.documentUrl.startsWith("http")?j.docs.documentUrl:`${xs}${j.docs.documentUrl}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-medium text-brand-primary hover:underline flex items-center gap-1",children:[i.jsx(Yv,{size:14})," View Document"]}),g&&i.jsxs("button",{onClick:()=>h(j._id),className:"text-xs font-medium text-red-500 hover:text-red-600 hover:underline flex items-center gap-1 ml-auto",children:[i.jsx(br,{size:14})," Delete"]})]})]})]},j._id)})})]}),i.jsx(Vte,{isOpen:o,policyId:u,onClose:()=>{l(!1),f(null),p()}}),i.jsx(Yte,{isOpen:c,onClose:()=>{d(!1),p()}})]})}const Gte=({policy:e,onDelete:t,onEdit:n})=>{const{user:r}=cn();return(r==null?void 0:r.role)==="Admin"||(r==null?void 0:r.role)==="HR"?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>n(e._id),className:"p-1 text-text-secondary hover:text-brand-primary transition-colors",title:"Edit",children:i.jsx(Yv,{size:16})}),i.jsx("button",{onClick:()=>t(e._id),className:"p-1 text-text-secondary hover:text-red-500 transition-colors",title:"Delete",children:i.jsx(br,{size:16})})]}):null},Kte=[{value:"Public",label:"Public Holiday"},{value:"Optional",label:"Optional"},{value:"Weekend",label:"Weekend"}];function Jte({isModal:e=!1}){const{user:t}=cn(),n=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="HR",[r,s]=C.useState([]),[a,o]=C.useState(!0),[l,c]=C.useState(""),[d,u]=C.useState(!1),[f,p]=C.useState({name:"",date:"",type:"Public"}),h=async()=>{try{o(!0);const y=await xe.getHolidays(2025);s(y),c("")}catch(y){c("Failed to load holidays"),console.error(y)}finally{o(!1)}};C.useEffect(()=>{h()},[]);const m=async y=>{y.preventDefault();try{await xe.addHoliday(f),p({name:"",date:"",type:"Public"}),u(!1),h()}catch(v){alert(v.message)}},g=async y=>{if(window.confirm("Are you sure you want to delete this holiday?"))try{await xe.deleteHoliday(y),h()}catch(v){alert(v.message)}},x=C.useMemo(()=>[{header:"Date",accessorKey:"date",render:y=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pa,{size:16,className:"text-brand-primary opacity-70"}),i.jsx("span",{children:qi(new Date(y.date),"do MMM yyyy")})]})},{header:"Day",accessorKey:"day"},{header:"Holiday Name",accessorKey:"name",render:y=>{const v=y.name.toLowerCase().includes("no holiday");return i.jsxs("span",{className:"font-medium",children:[y.name,v&&i.jsx("span",{className:"ml-2 text-xs bg-status-warning/20 text-status-warning px-2 py-0.5 rounded-full",children:"Not Observed"})]})}},{header:"Type",accessorKey:"type",render:y=>i.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${y.type==="Public"?"bg-status-success/10 text-status-success border-status-success/20":"bg-bg-main text-text-secondary border-border"}`,children:y.type})},...n?[{header:"Actions",className:"text-right",render:y=>i.jsx("div",{className:"text-right",children:i.jsx("button",{onClick:v=>{v.stopPropagation(),g(y._id)},className:"text-text-muted hover:text-status-error p-2 rounded-full hover:bg-status-error/10 transition-colors",title:"Delete Holiday",children:i.jsx(br,{size:16})})})}]:[]],[n]);return i.jsxs("div",{className:"space-y-6",children:[!e&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Holiday List"}),i.jsx("p",{className:"text-text-secondary",children:"Official holidays for the current year"}),l&&i.jsx("p",{className:"text-status-error text-sm mt-1",children:l})]}),n&&i.jsx(at,{onClick:()=>u(!d),leftIcon:i.jsx(Wr,{size:20}),children:"Add Holiday"})]}),e&&n&&i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l&&i.jsx("p",{className:"text-status-error text-sm",children:l}),!l&&i.jsx("span",{})," ",i.jsxs("button",{onClick:()=>u(!d),className:"flex items-center gap-2 bg-brand-primary text-white px-3 py-1.5 text-sm rounded-lg hover:bg-brand-primary/90 transition-colors",children:[i.jsx(Wr,{size:16}),"Add Holiday"]})]}),d&&n&&i.jsxs("form",{onSubmit:m,className:"bg-bg-card p-4 rounded-lg border border-border shadow-sm flex flex-wrap gap-4 items-end animate-in slide-in-from-top-2",children:[i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsx(Ze,{label:"Holiday Name",required:!0,value:f.name,onChange:y=>p({...f,name:y.target.value}),placeholder:"e.g. Independence Day"})}),i.jsxs("div",{className:"flex-1 min-w-[150px]",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),i.jsx(qr,{required:!0,className:"w-full p-2 rounded border border-border bg-bg-main",value:f.date,onChange:y=>p({...f,date:y.target.value})})]}),i.jsx("div",{className:"flex-1 min-w-[150px]",children:i.jsx(Gt,{label:"Type",value:f.type,onChange:y=>p({...f,type:y}),options:Kte})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors",children:"Save"})]})]}),i.jsx(Qo,{columns:x,data:r,isLoading:a})]})}function Xte({isOpen:e,onClose:t}){return i.jsx(Hn,{isOpen:e,onClose:t,title:"Holiday Calendar",maxWidth:"max-w-4xl",children:i.jsx(Jte,{isModal:!0})})}function Id({children:e,variant:t="default",className:n,size:r="md"}){const s={default:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 border-transparent",primary:"bg-brand-primary/10 text-brand-primary dark:bg-brand-primary/20 border-transparent",secondary:"bg-brand-secondary/10 text-brand-secondary dark:bg-brand-secondary/20 border-transparent",success:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border-transparent",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 border-transparent",error:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 border-transparent",info:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 border-transparent",outline:"bg-transparent border-gray-200 text-gray-600 dark:border-gray-700 dark:text-gray-400"},a={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-sm"};return i.jsx("span",{className:dc("inline-flex items-center font-medium rounded-full border",s[t],a[r],n),children:e})}function Qte(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(new Date().getMonth()+1),[o,l]=C.useState(new Date().getFullYear()),[c,d]=C.useState("All"),[u,f]=C.useState("All"),[p,h]=C.useState("All"),[m,g]=C.useState("All"),[x,y]=C.useState([]),v=[{value:"All",label:"All Departments"},{value:"Engineering",label:"Engineering"},{value:"Design",label:"Design"},{value:"Product",label:"Product"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"},{value:"HR",label:"Human Resources"},{value:"Finance",label:"Finance"}],N=[{value:"All",label:"All Types"},{value:"Sick",label:"Sick"},{value:"Casual",label:"Casual"},{value:"Paid",label:"Paid"},{value:"Unpaid",label:"Unpaid"},{value:"Floating",label:"Floating"}],j=[{value:"All",label:"All Status"},{value:"Approved",label:"Approved"},{value:"Pending",label:"Pending"},{value:"Rejected",label:"Rejected"}];C.useEffect(()=>{D()},[]),C.useEffect(()=>{T()},[s,o,c,u,p,m]);const D=async()=>{try{const E=(await xe.getEmployees()).map(I=>{var L;return{value:((L=I.user)==null?void 0:L._id)||I._id,label:`${I.firstName} ${I.lastName} (${I.employeeId||"N/A"})`}});y([{value:"All",label:"All Employees"},...E])}catch(S){console.error("Failed to fetch employees",S)}},T=async()=>{try{r(!0);const S={month:s,year:o,department:c,employee:u,status:p,type:m},E=await xe.getHRLeaveOverview(S);t(E)}catch(S){console.error("Failed to fetch leave overview",S)}finally{r(!1)}},A=[{header:"Employee",accessorKey:"employeeName",render:S=>i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-text-primary",children:S.employeeName}),i.jsx("div",{className:"text-xs text-text-secondary",children:S.employeeId})]})},{header:"Details",accessorKey:"department",render:S=>i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-text-primary",children:S.department}),i.jsx("div",{className:"text-xs text-text-secondary",children:S.designation})]})},{header:"Leave Type",accessorKey:"type",render:S=>i.jsx("span",{className:"font-medium",children:S.type})},{header:"Duration",accessorKey:"startDate",render:S=>i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{children:[qi(new Date(S.startDate),"MMM dd")," -"," ",qi(new Date(S.endDate),"MMM dd")]}),i.jsxs("div",{className:"text-xs text-text-muted",children:[S.totalDays," day",S.totalDays>1?"s":""]})]})},{header:"Total (Month)",accessorKey:"totalLeavesTakenMonth",render:S=>i.jsx("div",{className:"font-bold text-center text-brand-primary",children:S.totalLeavesTakenMonth})},{header:"Status",accessorKey:"status",render:S=>{const E={Approved:"success",Pending:"warning",Rejected:"error"};return i.jsx(Id,{variant:E[S.status]||"default",children:S.status})}}];return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-bg-card border border-border rounded-xl p-4 shadow-sm",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[i.jsx("div",{className:"flex flex-col gap-1.5",children:i.jsx(qr,{label:"Month & Year",showMonthYearPicker:!0,dateFormat:"MMMM yyyy",value:`${o}-${String(s).padStart(2,"0")}-01`,onChange:S=>{const E=S.target.value;if(E){const I=new Date(E);isNaN(I.getTime())||(l(I.getFullYear()),a(I.getMonth()+1))}},renderCustomHeader:void 0})}),i.jsx(Gt,{label:"Department",value:c,onChange:S=>d(String(S)),options:v}),i.jsx(Gt,{label:"Employee",value:u,onChange:S=>f(String(S)),options:x}),i.jsx(Gt,{label:"Type",value:m,onChange:S=>g(String(S)),options:N}),i.jsx(Gt,{label:"Status",value:p,onChange:S=>h(String(S)),options:j})]})}),i.jsx("div",{className:"bg-bg-card border border-border rounded-xl overflow-hidden shadow-sm",children:i.jsx(Qo,{data:e,columns:A,isLoading:n,emptyMessage:"No leave records found for selected criteria."})})]})}function Zte(){const{user:e}=cn(),[t,n]=C.useState("my-leaves"),[r,s]=C.useState(!1),[a,o]=C.useState(!1),l=(e==null?void 0:e.role)==="Admin"||(e==null?void 0:e.role)==="HR"||(e==null?void 0:e.role)==="Project Manager",c=((e==null?void 0:e.role)==="Admin"||(e==null?void 0:e.role)==="HR")&&(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("policies")),d=(e==null?void 0:e.role)==="Admin"||(e==null?void 0:e.role)==="HR";return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Leave Management"}),i.jsx("p",{className:"text-text-secondary",children:"Manage your leaves and approvals"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(at,{variant:"outline",onClick:()=>o(!0),leftIcon:i.jsx(pa,{size:20}),children:"View Holidays"}),i.jsx(at,{onClick:()=>s(!0),leftIcon:i.jsx(Wr,{size:20}),children:"Apply for Leave"})]})]}),t==="my-leaves"||!c&&t!=="policies"?i.jsx(vte,{}):null,i.jsxs("div",{className:"flex border-b border-border overflow-x-auto",children:[i.jsxs("button",{onClick:()=>n("my-leaves"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${t==="my-leaves"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[i.jsx(SL,{size:18}),"My Leaves"]}),l&&i.jsxs("button",{onClick:()=>n("approvals"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${t==="approvals"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[i.jsx(kh,{size:18}),"Approvals"]}),i.jsxs("button",{onClick:()=>n("policies"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${t==="policies"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[i.jsx(yr,{size:18}),"Policies"]}),d&&i.jsxs("button",{onClick:()=>n("overview"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${t==="overview"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[i.jsx(yr,{size:18}),"Overview"]})]}),i.jsxs("div",{className:"mt-4",children:[t==="my-leaves"&&i.jsx(wte,{}),t==="approvals"&&i.jsx(Nte,{}),t==="policies"&&i.jsx(Wte,{}),t==="overview"&&i.jsx(Qte,{})]})]}),r&&i.jsx(jte,{isOpen:r,onClose:()=>s(!1)}),a&&i.jsx(Xte,{isOpen:a,onClose:()=>o(!1)})]})}function ene(){const[e,t]=C.useState([]),[n,r]=C.useState(""),[s,a]=C.useState(!1),[o,l]=C.useState(!1),[c,d]=C.useState(!1),[u,f]=C.useState({baseSalary:0,hra:0,allowances:[],deductions:[]});C.useEffect(()=>{p()},[]),C.useEffect(()=>{n&&h(n)},[n]);const p=async()=>{try{const T=await xe.getEmployees();t(Array.isArray(T)?T:T.employees||[])}catch{console.error("Failed to load employees")}},h=async T=>{try{l(!0);const A=await xe.getSalaryStructure(T);A.structure?f(A.structure):f({baseSalary:0,hra:0,allowances:[],deductions:[]})}catch{console.error("Failed to load structure")}finally{l(!1)}},m=async()=>{if(n)try{a(!0),await xe.upsertSalaryStructure({employeeId:n,...u}),d(!0)}catch{alert("Failed to save structure")}finally{a(!1)}},g=(T,A)=>{f(S=>({...S,[T]:A}))},x=()=>{f(T=>({...T,allowances:[...T.allowances,{name:"",amount:0}]}))},y=T=>{const A=[...u.allowances];A.splice(T,1),g("allowances",A)},v=(T,A,S)=>{const E=[...u.allowances];E[T]={...E[T],[A]:S},g("allowances",E)},N=()=>{f(T=>({...T,deductions:[...T.deductions,{name:"",amount:0}]}))},j=T=>{const A=[...u.deductions];A.splice(T,1),g("deductions",A)},D=(T,A,S)=>{const E=[...u.deductions];E[T]={...E[T],[A]:S},g("deductions",E)};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-bg-card rounded-lg border border-border p-4 h-fit",children:[i.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[i.jsx(bf,{size:18})," Select Employee"]}),i.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:e.map(T=>i.jsxs("button",{onClick:()=>r(T._id),className:`w-full text-left p-3 rounded-lg text-sm transition-colors ${n===T._id?"bg-brand-primary text-white":"hover:bg-bg-hover text-text-secondary"}`,children:[i.jsxs("div",{className:"font-medium",children:[T.firstName," ",T.lastName]}),i.jsxs("div",{className:`text-xs ${n===T._id?"text-white/80":"text-text-muted"}`,children:[T.employeeId,"  ",T.designation]})]},T._id))})]}),i.jsx("div",{className:"md:col-span-2 space-y-6",children:n?o?i.jsxs("div",{className:"bg-bg-card rounded-lg border border-border p-6 space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-border pb-4",children:[i.jsx(le,{className:"h-6 w-32"}),i.jsx(le,{className:"h-9 w-32 rounded-lg"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(le,{className:"h-3 w-20"}),i.jsx(le,{className:"h-10 w-full rounded"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(le,{className:"h-3 w-20"}),i.jsx(le,{className:"h-10 w-full rounded"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(le,{className:"h-4 w-24"}),i.jsx(le,{className:"h-4 w-12"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(le,{className:"h-9 flex-1"}),i.jsx(le,{className:"h-9 w-32"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(le,{className:"h-9 flex-1"}),i.jsx(le,{className:"h-9 w-32"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(le,{className:"h-4 w-24"}),i.jsx(le,{className:"h-4 w-12"})]}),i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(le,{className:"h-9 flex-1"}),i.jsx(le,{className:"h-9 w-32"})]})})]}),i.jsx(le,{className:"h-16 w-full rounded-lg"})]}):i.jsxs("div",{className:"bg-bg-card rounded-lg border border-border p-6 space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-border pb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Salary Structure"}),i.jsx(at,{onClick:m,disabled:s,leftIcon:i.jsx(yf,{size:20}),children:"Save Changes"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-text-secondary uppercase",children:"Basic Salary"}),i.jsx(Ze,{type:"number",value:u.baseSalary,onChange:T=>g("baseSalary",Number(T.target.value)),className:"bg-bg-card"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-text-secondary uppercase",children:"HRA"}),i.jsx(Ze,{type:"number",value:u.hra,onChange:T=>g("hra",Number(T.target.value)),className:"bg-bg-card"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Allowances"}),i.jsxs("button",{onClick:x,className:"text-brand-primary text-sm flex items-center gap-1 hover:underline",children:[i.jsx(Wr,{size:14})," Add"]})]}),i.jsxs("div",{className:"space-y-2 bg-bg-main p-3 rounded-lg",children:[u.allowances.map((T,A)=>i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx(Ze,{type:"text",placeholder:"Name",value:T.name,onChange:S=>v(A,"name",S.target.value),className:"flex-1 bg-bg-card"}),i.jsx(Ze,{type:"number",placeholder:"Amount",value:T.amount,onChange:S=>v(A,"amount",Number(S.target.value)),className:"w-32 bg-bg-card"}),i.jsx("button",{onClick:()=>y(A),className:"text-status-error hover:bg-status-error/10 p-1 rounded",children:i.jsx(br,{size:16})})]},A)),u.allowances.length===0&&i.jsx("p",{className:"text-xs text-text-muted text-center py-2",children:"No allowances defined"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Deductions"}),i.jsxs("button",{onClick:N,className:"text-brand-primary text-sm flex items-center gap-1 hover:underline",children:[i.jsx(Wr,{size:14})," Add"]})]}),i.jsxs("div",{className:"space-y-2 bg-bg-main p-3 rounded-lg",children:[u.deductions.map((T,A)=>i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx(Ze,{type:"text",placeholder:"Name",value:T.name,onChange:S=>D(A,"name",S.target.value),className:"flex-1 bg-bg-card"}),i.jsx(Ze,{type:"number",placeholder:"Amount",value:T.amount,onChange:S=>D(A,"amount",Number(S.target.value)),className:"w-32 bg-bg-card"}),i.jsx("button",{onClick:()=>j(A),className:"text-status-error hover:bg-status-error/10 p-1 rounded",children:i.jsx(br,{size:16})})]},A)),u.deductions.length===0&&i.jsx("p",{className:"text-xs text-text-muted text-center py-2",children:"No deductions defined"})]})]}),i.jsxs("div",{className:"bg-brand-primary/5 p-4 rounded-lg flex justify-between items-center",children:[i.jsx("span",{className:"font-semibold text-text-primary",children:"Estimated Net Salary"}),i.jsxs("span",{className:"text-xl font-bold text-brand-primary",children:[""," ",(Number(u.baseSalary)+Number(u.hra)+u.allowances.reduce((T,A)=>T+Number(A.amount),0)-u.deductions.reduce((T,A)=>T+Number(A.amount),0)).toLocaleString()]})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-bg-card rounded-lg border border-border p-12 text-text-secondary",children:[i.jsx(Pa,{size:48,className:"mb-4 text-text-muted opacity-50"}),i.jsx("p",{children:"Select an employee to manage their salary structure."})]})})]}),i.jsx(Hn,{isOpen:c,onClose:()=>d(!1),title:"Success",children:i.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-status-success/10 rounded-full flex items-center justify-center text-status-success mb-4",children:i.jsx(Yr,{size:24})}),i.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Salary Structure Saved!"}),i.jsx("p",{className:"text-text-secondary mb-6",children:"The salary details for the selected employee have been successfully updated."}),i.jsx("button",{onClick:()=>d(!1),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-colors",children:"Close"})]})})]})}function tne(){const[e,t]=C.useState([]),[n,r]=C.useState([]),[s,a]=C.useState(new Date().toLocaleString("default",{month:"long"})),[o,l]=C.useState(new Date().getFullYear()),[c,d]=C.useState(!1),[u,f]=C.useState(!0),[p,h]=C.useState(!1),[m,g]=C.useState("");C.useEffect(()=>{(async()=>{f(!0),await Promise.all([x(),y()]),f(!1)})()},[s,o]);const x=async()=>{try{const D=await xe.getPayrollList({month:s,year:o});r(D.payrolls||[])}catch{console.error("Failed to load payroll list")}},y=async()=>{try{const D=await xe.getEmployees();t(Array.isArray(D)?D:D.employees||[])}catch{console.error("failed to load employees")}},v=async D=>{try{d(!0),await xe.calculatePayroll({employeeId:D,month:s,year:o}),x()}catch(T){g(T.message||"Failed to calculate payroll. Ensure salary structure is defined."),h(!0)}finally{d(!1)}},N=async(D,T)=>{try{await xe.updatePayrollStatus(D,T),x()}catch{alert("Failed to update status")}},j=C.useMemo(()=>[{header:"Employee",searchKey:"firstName",render:D=>i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium text-text-primary",children:[D.firstName," ",D.lastName]}),i.jsx("div",{className:"text-xs text-text-muted",children:D.employeeId})]}),D.bankDetails&&i.jsx(Nd,{trigger:"click",position:"right",content:i.jsxs("div",{className:"p-1 space-y-1",children:[i.jsx("div",{className:"font-semibold text-xs border-b border-border pb-1 mb-1",children:"Bank Details"}),i.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 text-xs",children:[i.jsx("span",{className:"text-text-secondary",children:"Bank:"}),i.jsx("span",{className:"font-medium",children:D.bankDetails.bankName||"N/A"}),i.jsx("span",{className:"text-text-secondary",children:"A/C:"}),i.jsx("span",{className:"font-medium font-mono",children:D.bankDetails.accountNumber||"N/A"}),i.jsx("span",{className:"text-text-secondary",children:"IFSC:"}),i.jsx("span",{className:"font-medium font-mono",children:D.bankDetails.ifscCode||"N/A"})]})]}),children:i.jsx("div",{className:"p-1.5 pt-0 rounded-full hover:bg-bg-active text-text-muted hover:text-brand-primary cursor-pointer transition-colors",children:i.jsx(TS,{size:18})})})]})},{header:"Status",render:D=>{const T=n.find(S=>S.employee._id===D._id),A=T?T.status:"Not Processed";return i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border
              ${A==="Paid"?"bg-status-success/10 text-status-success border-status-success/20":A==="Approved"?"bg-brand-primary/10 text-brand-primary border-brand-primary/20":A==="Draft"?"bg-status-warning/10 text-status-warning border-status-warning/20":"bg-bg-secondary text-text-secondary border-border"}`,children:A})}},{header:"Gross Salary",render:D=>{const T=n.find(A=>A.employee._id===D._id);return i.jsx("span",{className:"font-medium text-text-primary",children:T?`${T.grossSalary.toLocaleString()}`:"-"})}},{header:"Net Payable",render:D=>{const T=n.find(A=>A.employee._id===D._id);return i.jsx("span",{className:"font-medium text-text-primary",children:T?`${T.netSalary.toLocaleString()}`:"-"})}},{header:"Actions",className:"text-right",render:D=>{const T=n.find(A=>A.employee._id===D._id);return i.jsxs("div",{className:"flex justify-end gap-2",children:[!T&&i.jsx("button",{onClick:A=>{A.stopPropagation(),v(D._id)},disabled:c,className:"px-3 py-1.5 bg-brand-primary text-white hover:bg-brand-secondary rounded-md text-xs font-medium transition-colors shadow-sm",children:"Calculate"}),T&&T.status==="Draft"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:A=>{A.stopPropagation(),N(T._id,"Approved")},className:"px-3 py-1.5 bg-status-success text-white hover:bg-status-success/90 rounded-md text-xs font-medium transition-colors shadow-sm",children:"Approve"}),i.jsx("button",{onClick:A=>{A.stopPropagation(),v(D._id)},disabled:c,className:"px-3 py-1.5 border border-border text-text-secondary hover:bg-bg-active hover:text-text-primary rounded-md text-xs font-medium transition-all",children:"Recalculate"})]}),T&&T.status==="Approved"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:A=>{A.stopPropagation(),N(T._id,"Paid")},className:"px-3 py-1.5 bg-brand-primary text-white hover:bg-brand-secondary rounded-md text-xs font-medium transition-colors shadow-sm",children:"Mark as Paid"}),i.jsx("button",{onClick:A=>{A.stopPropagation(),v(D._id)},disabled:c,className:"px-3 py-1.5 border border-border text-text-secondary hover:bg-bg-active hover:text-text-primary rounded-md text-xs font-medium transition-all",children:"Recalculate"})]}),T&&T.status==="Paid"&&i.jsx("button",{onClick:A=>{A.stopPropagation(),v(D._id)},disabled:c,className:"px-3 py-1.5 border border-border text-text-secondary hover:bg-bg-active hover:text-text-primary rounded-md text-xs font-medium transition-all",children:"Recalculate"})]})}}],[n,c]);return i.jsxs("div",{className:"bg-bg-card rounded-lg border border-border p-6",children:[i.jsxs("div",{className:"flex gap-4 mb-6 items-center bg-bg-main p-4 rounded-lg",children:[i.jsx("div",{className:"w-40",children:i.jsx(Gt,{value:s,onChange:D=>a(D),options:["January","February","March","April","May","June","July","August","September","October","November","December"].map(D=>({value:D,label:D}))})}),i.jsx("div",{className:"w-28",children:i.jsx(Gt,{value:o,onChange:D=>l(Number(D)),options:(()=>{const D=new Date().getFullYear();return Array.from({length:100},(T,A)=>{const S=D-50+A;return{value:S,label:String(S)}})})()})}),i.jsxs("div",{className:"ml-auto text-sm text-text-secondary",children:["Process payroll for ",s," ",o]})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-lg overflow-hidden",children:[i.jsx("div",{className:"p-4 border-b border-border bg-bg-secondary/30",children:i.jsxs("h3",{className:"font-semibold text-text-primary",children:["Payroll Processing (",e.length," Employees)"]})}),i.jsx(Qo,{columns:j,data:e,isLoading:u,emptyMessage:"No employees found to process."})]}),i.jsx(ma,{isOpen:p,onClose:()=>h(!1),onConfirm:()=>h(!1),title:"Processing Error",message:m,confirmText:"OK",variant:"danger",isLoading:!1})]})}function nne(){const{user:e}=cn(),[t,n]=C.useState([]),[r,s]=C.useState(!0);C.useEffect(()=>{a()},[]);const a=async()=>{try{const l=await xe.getMyPayslips();n(l.payslips||[])}catch{console.error("Failed to load payslips")}finally{s(!1)}},o=async l=>{await Y8(l,e)};return r?i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(l=>i.jsxs("div",{className:"bg-bg-card border border-border rounded-lg p-6 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-6 w-32"}),i.jsx(le,{className:"h-4 w-16"})]}),i.jsx(le,{className:"h-10 w-10 rounded-full"})]}),i.jsxs("div",{className:"space-y-3 border-b border-border pb-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(le,{className:"h-4 w-20"}),i.jsx(le,{className:"h-4 w-24"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(le,{className:"h-4 w-24"}),i.jsx(le,{className:"h-4 w-24"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(le,{className:"h-4 w-20"}),i.jsx(le,{className:"h-4 w-24"})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(le,{className:"h-4 w-16"}),i.jsx(le,{className:"h-6 w-32"})]}),i.jsx(le,{className:"h-9 w-full rounded-lg"})]},l))}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.length===0?i.jsxs("div",{className:"col-span-full text-center py-12 text-text-muted bg-bg-card border border-border rounded-lg",children:[i.jsx(yr,{size:48,className:"mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"No payslips available yet."})]}):t.map(l=>i.jsxs("div",{className:"bg-bg-card border border-border rounded-lg p-6 hover:shadow-md transition-all",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-bold text-lg text-text-primary",children:[l.month," ",l.year]}),i.jsx("p",{className:"text-sm text-text-secondary",children:"Payslip"})]}),i.jsx("div",{className:"bg-brand-primary/5 p-2 rounded-full text-brand-primary",children:i.jsx(yr,{size:24})})]}),i.jsxs("div",{className:"space-y-2 mb-6 border-b border-border pb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:"Basic Pay"}),i.jsxs("span",{className:"font-medium",children:["",l.basicPay.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:"Total Allowances"}),i.jsxs("span",{className:"font-medium text-status-success",children:["+ ",(l.grossSalary-l.basicPay-l.hra).toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:"Deductions"}),i.jsxs("span",{className:"font-medium text-status-error",children:["- ",l.totalDeductions.toLocaleString()]})]})]}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Net Pay"}),i.jsxs("span",{className:"text-xl font-bold text-brand-primary",children:["",l.netSalary.toLocaleString()]})]}),i.jsxs("button",{onClick:()=>o(l),className:"w-full flex items-center justify-center gap-2 px-4 py-2 border border-border rounded-lg hover:bg-bg-hover transition-colors text-sm font-medium text-text-primary",children:[i.jsx(xf,{size:16})," Download PDF"]})]},l._id))})}function rne(){const{user:e}=cn(),t=()=>(e==null?void 0:e.role)==="Employee"||(e==null?void 0:e.role)==="Intern"||(e==null?void 0:e.role)==="Consultant"||(e==null?void 0:e.role)==="Project Manager"?"payslips":(e==null?void 0:e.role)==="Accountant"?"processing":(e==null?void 0:e.role)==="HR"?"structure":"processing",[n,r]=C.useState(t()),s=(e==null?void 0:e.role)==="HR"||(e==null?void 0:e.role)==="Admin",a=(e==null?void 0:e.role)==="Accountant"||(e==null?void 0:e.role)==="Admin";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Payroll & Finance"}),i.jsx("p",{className:"text-text-secondary",children:"Manage salaries, process payrolls, and view payslips."})]}),i.jsxs("div",{className:"flex border-b border-border overflow-x-auto",children:[a&&i.jsxs("button",{onClick:()=>r("processing"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${n==="processing"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[i.jsx(GU,{size:18}),"Payroll Processing"]}),s&&i.jsxs("button",{onClick:()=>r("structure"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${n==="structure"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[i.jsx(h5,{size:18}),"Salary Structures"]}),i.jsxs("button",{onClick:()=>r("payslips"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${n==="payslips"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[i.jsx(yr,{size:18}),"My Payslips"]})]}),i.jsxs("div",{className:"pt-4",children:[n==="processing"&&a&&i.jsx(tne,{}),n==="structure"&&s&&i.jsx(ene,{}),n==="payslips"&&i.jsx(nne,{})]})]})}function sne({onClose:e,onSuccess:t}){const[n,r]=C.useState({name:"",client:"",description:"",manager:"",startDate:"",endDate:"",members:[]}),[s,a]=C.useState([]),[o,l]=C.useState(!1);C.useEffect(()=>{c()},[]);const c=async()=>{try{const f=await xe.getEmployees();a(Array.isArray(f)?f:f.employees||[])}catch{console.error("Failed to load users")}},d=f=>{r(p=>p.members.includes(f)?{...p,members:p.members.filter(m=>m!==f)}:{...p,members:[...p.members,f]})},u=async f=>{f.preventDefault();try{l(!0),await xe.createProject(n),t()}catch{alert("Failed to create project")}finally{l(!1)}};return i.jsx(Hn,{isOpen:!0,onClose:e,title:"Create New Project",maxWidth:"max-w-lg",footer:i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),i.jsx("button",{onClick:()=>u({preventDefault:()=>{}}),className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors disabled:opacity-50 flex items-center gap-2",disabled:o,children:o?"Creating...":"Create Project"})]}),children:i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsx("div",{children:i.jsx(Ze,{label:"Project Name *",type:"text",required:!0,value:n.name,onChange:f=>r({...n,name:f.target.value})})}),i.jsx("div",{children:i.jsx(Ze,{label:"Client Name",type:"text",value:n.client,onChange:f=>r({...n,client:f.target.value})})}),i.jsx("div",{children:i.jsx(Gt,{label:"Project Manager *",required:!0,value:n.manager,onChange:f=>r({...n,manager:f}),options:s.map(f=>{var p;return{value:((p=f.user)==null?void 0:p._id)||f._id,label:`${f.firstName} ${f.lastName}`}}),helperText:"Select the person responsible for this project."})}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Team Members (",n.members.length,")"]}),i.jsx("div",{className:"border border-border rounded-lg p-2 max-h-40 overflow-y-auto space-y-2",children:s.length===0?i.jsx("p",{className:"text-xs text-text-secondary text-center py-2",children:"No employees found."}):s.map(f=>{var h;const p=((h=f.user)==null?void 0:h._id)||f._id;return i.jsx("div",{className:"flex items-center gap-2 p-2 hover:bg-bg-hover rounded cursor-pointer",children:i.jsx(La,{checked:n.members.includes(p),onChange:()=>d(p),label:i.jsxs("span",{className:"text-sm text-text-primary",children:[f.firstName," ",f.lastName," ",i.jsxs("span",{className:"text-text-secondary text-xs",children:["(",f.designation,")"]})]})})},p)})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Select employees to assign to this project."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{children:i.jsx(qr,{label:"Start Date *",name:"startDate",required:!0,value:n.startDate,onChange:f=>r({...n,startDate:f.target.value})})}),i.jsx("div",{children:i.jsx(qr,{label:"End Date",name:"endDate",value:n.endDate,onChange:f=>r({...n,endDate:f.target.value})})})]}),i.jsx("div",{children:i.jsx(mo,{label:"Description",rows:3,value:n.description,onChange:f=>r({...n,description:f.target.value})})})]})})}function ane(){const{user:e}=cn(),[t,n]=C.useState([]),[r,s]=C.useState(!0),[a,o]=C.useState(!1);C.useEffect(()=>{l()},[]);const l=async()=>{try{s(!0);const d=await xe.getProjects();n(d.projects||[])}catch{console.error("Failed to load projects")}finally{s(!1)}},c=(e==null?void 0:e.role)==="Project Manager"||(e==null?void 0:e.role)==="Admin";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Projects"}),i.jsx("p",{className:"text-text-secondary",children:"Manage and track your projects and tasks."})]}),c&&i.jsx(at,{onClick:()=>o(!0),leftIcon:i.jsx(Wr,{size:20}),children:"New Project"})]}),r?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(d=>i.jsxs("div",{className:"bg-bg-card border border-border rounded-lg p-5 flex flex-col h-[180px]",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"space-y-2 flex-1",children:[i.jsx(le,{className:"h-6 w-3/4"}),i.jsx(le,{className:"h-4 w-1/3"})]}),i.jsx(le,{className:"h-6 w-16 rounded ml-4"})]}),i.jsxs("div",{className:"space-y-2 mb-4 flex-1",children:[i.jsx(le,{className:"h-4 w-full"}),i.jsx(le,{className:"h-4 w-5/6"})]}),i.jsxs("div",{className:"flex items-center gap-4 border-t border-border pt-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(le,{className:"w-4 h-4 rounded-full"}),i.jsx(le,{className:"h-3 w-20"})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[i.jsx(le,{className:"w-4 h-4 rounded-full"}),i.jsx(le,{className:"h-3 w-16"})]})]})]},d))}):t.length===0?i.jsxs("div",{className:"text-center py-12 bg-bg-card border border-border rounded-lg",children:[i.jsx(Zu,{size:48,className:"mx-auto mb-4 text-text-muted opacity-50"}),i.jsx("h3",{className:"text-lg font-medium text-text-primary",children:"No Projects Found"}),i.jsx("p",{className:"text-text-secondary mb-4",children:"Get started by creating a new project."}),c&&i.jsx(at,{onClick:()=>o(!0),children:"Create Project"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(d=>{var u;return i.jsxs(bL,{to:`/projects/${d._id}`,className:"bg-bg-card border border-border rounded-lg p-5 hover:shadow-md transition-shadow group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg text-text-primary group-hover:text-brand-primary transition-colors",children:d.name}),i.jsx("p",{className:"text-sm text-text-secondary",children:d.client})]}),i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${d.status==="Active"?"bg-status-success/10 text-status-success":"bg-text-muted/10 text-text-muted"}`,children:d.status})]}),i.jsx("p",{className:"text-sm text-text-secondary line-clamp-2 mb-4 h-10",children:d.description}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-secondary border-t border-border pt-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(pa,{size:14}),i.jsx("span",{children:d.endDate?new Date(d.endDate).toLocaleDateString():"No deadline"})]}),i.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[i.jsx(Pa,{size:14}),i.jsxs("span",{children:[((u=d.members)==null?void 0:u.length)||0," Members"]})]})]})]},d._id)})}),a&&i.jsx(sne,{onClose:()=>o(!1),onSuccess:()=>{o(!1),l()}})]})}function ine({projectId:e}){const[t,n]=C.useState([]),[r,s]=C.useState(!0);C.useEffect(()=>{e&&a()},[e]);const a=async()=>{try{const c=await xe.getTasks({projectId:e});n(c.tasks||[])}catch{console.error("Failed to load tasks")}finally{s(!1)}},o=async(c,d)=>{try{const u=t.map(f=>f._id===c?{...f,status:d}:f);n(u),await xe.updateTask(c,{status:d})}catch{console.error("Failed to update status"),a()}},l=["To Do","In Progress","Review","Done"];return r?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Jv,{size:32})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 h-full overflow-x-auto",children:l.map(c=>i.jsxs("div",{className:"bg-bg-main rounded-lg p-4 min-w-[250px]",children:[i.jsxs("h3",{className:"font-semibold text-text-secondary text-sm mb-3 flex justify-between",children:[c,i.jsx("span",{className:"bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:t.filter(d=>d.status===c).length})]}),i.jsxs("div",{className:"space-y-3",children:[t.filter(d=>d.status===c).map(d=>{var u;return i.jsxs("div",{className:"bg-white border border-border rounded p-3 shadow-sm hover:shadow-md transition-all cursor-pointer",children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("h4",{className:"font-medium text-sm text-text-primary mb-1",children:d.title}),i.jsx("div",{className:`w-2 h-2 rounded-full ${d.priority==="High"||d.priority==="Urgent"?"bg-status-error":d.priority==="Low"?"bg-status-success":"bg-status-warning"}`,title:d.priority})]}),d.assignee&&i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-brand-primary/10 flex items-center justify-center text-[10px] text-brand-primary font-bold",children:((u=d.assignee.name)==null?void 0:u.charAt(0))||"U"}),i.jsx("span",{className:"text-xs text-text-secondary truncate",children:d.assignee.name})]}),i.jsxs("div",{className:"flex justify-end gap-1 mt-3 pt-2 border-t border-gray-100",children:[c!=="To Do"&&i.jsx("button",{onClick:()=>o(d._id,l[l.indexOf(c)-1]),className:"text-[10px] px-1 bg-gray-100 rounded hover:bg-gray-200",children:"< Back"}),c!=="Done"&&i.jsx("button",{onClick:()=>o(d._id,l[l.indexOf(c)+1]),className:"text-[10px] px-1 bg-gray-100 rounded hover:bg-gray-200",children:"Next >"})]})]},d._id)}),t.filter(d=>d.status===c).length===0&&i.jsx("div",{className:"text-center py-4 text-xs text-gray-400 border border-dashed border-gray-200 rounded",children:"No tasks"})]})]},c))})}function one({projectId:e,onClose:t,onSuccess:n}){const[r,s]=C.useState({title:"",description:"",assignee:"",priority:"Medium",dueDate:""}),[a,o]=C.useState([]),[l,c]=C.useState(!1);C.useEffect(()=>{d()},[]);const d=async()=>{try{const f=await xe.getEmployees();o(Array.isArray(f)?f:f.employees||[])}catch{console.error("Failed to load users")}},u=async f=>{f.preventDefault();try{c(!0),await xe.createTask({...r,project:e}),n()}catch{alert("Failed to create task")}finally{c(!1)}};return i.jsx(Hn,{isOpen:!0,onClose:t,title:"New Task",maxWidth:"max-w-md",footer:i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),i.jsx("button",{onClick:()=>u({preventDefault:()=>{}}),className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors disabled:opacity-50 flex items-center gap-2",disabled:l,children:l?"Creating...":"Create Task"})]}),children:i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsx("div",{children:i.jsx(Ze,{label:"Title *",type:"text",required:!0,value:r.title,onChange:f=>s({...r,title:f.target.value})})}),i.jsx("div",{children:i.jsx(Gt,{label:"Assignee",value:r.assignee,onChange:f=>s({...r,assignee:f}),options:a.map(f=>{var p;return{value:((p=f.user)==null?void 0:p._id)||f._id,label:`${f.firstName} ${f.lastName}`}}),placeholder:"Unassigned"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{children:i.jsx(Gt,{label:"Priority",value:r.priority,onChange:f=>s({...r,priority:f}),options:[{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"},{value:"Urgent",label:"Urgent"}]})}),i.jsx("div",{children:i.jsx(qr,{label:"Due Date",value:r.dueDate,onChange:f=>s({...r,dueDate:f.target.value})})})]}),i.jsx("div",{children:i.jsx(mo,{label:"Description",rows:2,value:r.description,onChange:f=>s({...r,description:f.target.value})})})]})})}function lne(){var h;const{id:e}=EB(),t=Fa(),{user:n}=cn(),[r,s]=C.useState(null),[a,o]=C.useState(!0),[l,c]=C.useState(!1);C.useEffect(()=>{e&&d(e)},[e]);const d=async m=>{try{o(!0);const g=await xe.getProjectById(m);s(g.project)}catch{console.error("Failed to load project")}finally{o(!1)}};if(a)return i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Jv,{size:32})});if(!r)return i.jsx("div",{children:"Project not found"});const u=(n==null?void 0:n.role)==="Project Manager"||(n==null?void 0:n.role)==="Admin",f=n!=null&&n.tenantId&&typeof n.tenantId=="object"&&"limits"in n.tenantId?n.tenantId.limits:null,p=!f||!f.enabledModules||f.enabledModules.includes("tasks");return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("button",{onClick:()=>t("/projects"),className:"flex items-center gap-1 text-sm text-text-secondary hover:text-brand-primary",children:[i.jsx(jH,{size:16})," Back to Projects"]}),i.jsxs("div",{className:"bg-white border border-border rounded-lg p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:r.name}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold border ${r.status==="Active"?"bg-status-success/10 text-status-success border-status-success/20":"bg-gray-100 text-gray-500 border-gray-200"}`,children:r.status})]}),i.jsx("p",{className:"text-text-secondary text-lg",children:r.client})]}),u&&p&&i.jsx(at,{onClick:()=>c(!0),leftIcon:i.jsx(Wr,{size:20}),children:"Add Task"})]}),i.jsx("p",{className:"text-text-primary mb-6 max-w-3xl",children:r.description}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 py-4 border-t border-border",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"text-xs text-text-secondary uppercase font-semibold flex items-center gap-1 mb-1",children:[i.jsx(pa,{size:14})," Start Date"]}),i.jsx("span",{className:"text-sm font-medium",children:r.startDate?new Date(r.startDate).toLocaleDateString():"N/A"})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-xs text-text-secondary uppercase font-semibold flex items-center gap-1 mb-1",children:[i.jsx(pa,{size:14})," Deadline"]}),i.jsx("span",{className:"text-sm font-medium",children:r.endDate?new Date(r.endDate).toLocaleDateString():"N/A"})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-xs text-text-secondary uppercase font-semibold flex items-center gap-1 mb-1",children:[i.jsx(Pa,{size:14})," Manager"]}),i.jsx("span",{className:"text-sm font-medium text-brand-primary",children:((h=r.manager)==null?void 0:h.name)||"Unassigned"})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-xs text-text-secondary uppercase font-semibold flex items-center gap-1 mb-1",children:[i.jsx(Gh,{size:14})," Budget"]}),i.jsx("span",{className:"text-sm font-medium",children:r.budget?`$${r.budget.toLocaleString()}`:"N/A"})]})]})]}),p&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-text-primary mb-4",children:"Tasks"}),i.jsx(ine,{projectId:r._id})]}),l&&i.jsx(one,{projectId:r._id,onClose:()=>c(!1),onSuccess:()=>{c(!1),window.location.reload()}})]})}function cne(){const[e,t]=C.useState(null),[n,r]=C.useState(!1),[s,a]=C.useState(null),[o,l]=C.useState([]);C.useEffect(()=>{c()},[]);const c=async()=>{try{const p=await xe.getPolicyStatus();p.policies&&l(p.policies)}catch(p){console.error("Failed to fetch policy status",p)}},d=p=>{if(p.target.files&&p.target.files.length>0){const h=p.target.files;for(let m=0;m<h.length;m++)if(h[m].type!=="application/pdf"){a({type:"error",text:"Only PDF files are allowed"});return}t(h),a(null)}},u=async()=>{if(!(!e||e.length===0)){r(!0),a(null);try{await xe.uploadPolicy(e),a({type:"success",text:"Policies uploaded successfully!"}),t(null),c()}catch(p){a({type:"error",text:p.message||"Upload failed"})}finally{r(!1)}}},f=async p=>{if(window.confirm("Are you sure you want to remove this document?"))try{await xe.deletePolicy(p),c(),a({type:"success",text:"Document removed successfully"})}catch(h){a({type:"error",text:h.message||"Failed to delete document"})}};return i.jsxs("div",{className:"bg-bg-card rounded-xl shadow-sm border border-border p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-brand-primary/10 rounded-lg text-brand-primary",children:i.jsx(yr,{size:24})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"AI Chatbot Configuration"}),i.jsx("p",{className:"text-text-secondary text-sm",children:"Manage Knowledge Base Documents"})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-bg-main rounded-lg p-4 border border-border",children:[i.jsxs("h3",{className:"text-sm font-semibold text-text-secondary mb-3 uppercase tracking-wider",children:["Active Documents (",o.length,")"]}),o.length>0?i.jsx("div",{className:"space-y-3",children:o.map(p=>{var h;return i.jsxs("div",{className:"flex items-center justify-between bg-bg-card p-3 rounded-lg border border-border",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Yr,{className:"text-status-success shrink-0 mt-0.5",size:18}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-text-primary",children:p.originalName}),i.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Uploaded by ",(h=p.uploadedBy)==null?void 0:h.name," on"," ",new Date(p.createdAt).toLocaleDateString()]})]})]}),i.jsx("button",{onClick:()=>f(p._id),className:"p-2 text-text-muted hover:text-status-error hover:bg-status-error/10 rounded-lg transition-colors",title:"Remove Document",children:i.jsx(br,{size:16})})]},p._id)})}):i.jsxs("div",{className:"flex items-center gap-2 text-text-muted italic",children:[i.jsx(bs,{size:16}),i.jsx("p",{children:"No active documents found."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2 text-text-primary",children:"Upload New Documents (PDF Only)"}),i.jsxs("div",{className:"flex gap-4 items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("input",{type:"file",multiple:!0,accept:"application/pdf",onChange:d,className:`w-full text-sm text-text-secondary
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-lg file:border-0
                  file:text-sm file:font-semibold
                  file:bg-brand-primary/10 file:text-brand-primary
                  hover:file:bg-brand-primary/20
                  cursor-pointer bg-bg-main rounded-lg border border-border`}),i.jsx("p",{className:"text-xs text-text-muted mt-2",children:"You can upload multiple documents. New uploads will be added to the knowledge base."})]}),i.jsxs("button",{onClick:u,disabled:!e||n,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[n?i.jsx(Hr,{className:"animate-spin",size:18}):i.jsx(yi,{size:18}),"Upload"]})]})]}),s&&i.jsxs("div",{className:`p-3 rounded-lg text-sm flex items-center gap-2 ${s.type==="success"?"bg-status-success/10 text-status-success":"bg-status-error/10 text-status-error"}`,children:[s.type==="success"?i.jsx(Yr,{size:16}):i.jsx(bs,{size:16}),s.text]})]})]})}const aO=({node:e})=>{const[t,n]=C.useState(!0),r=e.children&&e.children.length>0;return i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:`
          flex flex-col items-center p-3 rounded-lg border bg-white shadow-sm hover:shadow-md transition-all
          ${r?"cursor-pointer":""}
          w-48 relative z-10
        `,onClick:()=>r&&n(!t),children:[i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden mb-2 border-2 border-brand-primary/20",children:i.jsx(uc,{src:e.profilePicture?e.profilePicture.startsWith("http")?e.profilePicture:`${xs}${e.profilePicture}`.replace("//uploads","/uploads"):void 0,name:`${e.firstName} ${e.lastName}`,alt:e.firstName,className:"w-full h-full",size:"md"})}),i.jsxs("div",{className:"text-center",children:[i.jsxs("h3",{className:"font-semibold text-text-primary text-sm truncate w-full",children:[e.firstName," ",e.lastName]}),i.jsx("p",{className:"text-xs text-text-secondary truncate w-full",children:e.designation||"N/A"})]}),r&&i.jsx("div",{className:"absolute -bottom-3 bg-white rounded-full p-0.5 border border-border",children:t?i.jsx(wL,{size:14}):i.jsx(gf,{size:14})})]}),r&&t&&i.jsxs("div",{className:"flex flex-col items-center mt-4 relative",children:[i.jsx("div",{className:"w-px h-4 bg-border absolute -top-4"}),i.jsxs("div",{className:"flex gap-4 pt-4 relative",children:[e.children.length>1&&i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 h-px bg-border w-[calc(100%-12rem)]"}),e.children.map(s=>i.jsxs("div",{className:"flex flex-col items-center relative",children:[i.jsx("div",{className:"w-px h-4 bg-border absolute -top-4"}),i.jsx(aO,{node:s})]},s._id))]})]})]})};function dne(){const{showToast:e}=ux(),[t,n]=C.useState("hierarchy"),[r,s]=C.useState([]),[a,o]=C.useState([]),[l,c]=C.useState(!0),[d,u]=C.useState(null),[f,p]=C.useState("");C.useEffect(()=>{h()},[]);const h=async()=>{try{c(!0);const[x,y]=await Promise.all([xe.getHierarchy(),xe.getEmployees()]),v=m(x);s(v),o(y)}catch(x){console.error(x),u(x.message||"Failed to load data")}finally{c(!1)}},m=x=>{const y=new Map,v=[];return x.forEach(N=>{y.set(N._id,{...N,children:[]})}),x.forEach(N=>{const j=y.get(N._id);if(N.reportingManager&&typeof N.reportingManager=="object"&&"_id"in N.reportingManager&&y.has(N.reportingManager._id)){const D=N.reportingManager._id;y.get(D).children.push(j)}else v.push(j)}),v},g=a.filter(x=>{const y=f.toLowerCase();return x.firstName.toLowerCase().includes(y)||x.lastName.toLowerCase().includes(y)||x.designation.toLowerCase().includes(y)||x.department&&x.department.toLowerCase().includes(y)});return l?i.jsxs("div",{className:"flex flex-col items-center justify-center h-[600px] bg-bg-card rounded-lg border border-border p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8 relative",children:[i.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border border-border bg-bg-main w-48 shadow-sm",children:[i.jsx(le,{className:"w-12 h-12 rounded-full mb-2"}),i.jsx(le,{className:"w-32 h-4 mb-2"}),i.jsx(le,{className:"w-24 h-3"})]}),i.jsx("div",{className:"w-px h-8 bg-border absolute -bottom-8"})]}),i.jsxs("div",{className:"flex gap-8 relative",children:[i.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 w-[calc(100%-12rem)] h-px bg-border"}),[1,2].map(x=>i.jsxs("div",{className:"flex flex-col items-center relative",children:[i.jsx("div",{className:"w-px h-4 bg-border absolute -top-4"}),i.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border border-border bg-bg-main w-48 shadow-sm",children:[i.jsx(le,{className:"w-12 h-12 rounded-full mb-2"}),i.jsx(le,{className:"w-32 h-4 mb-2"}),i.jsx(le,{className:"w-24 h-3"})]})]},x))]})]}):d?i.jsx("div",{className:"text-center text-red-500 p-8 bg-red-50 rounded-lg",children:d}):i.jsx("div",{className:"flex flex-col h-full gap-6",children:i.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border flex flex-col h-full min-h-[600px] overflow-hidden",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between border-b border-border",children:[i.jsxs("div",{className:"flex overflow-x-auto",children:[i.jsxs("button",{onClick:()=>n("hierarchy"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap border-b-2 ${t==="hierarchy"?"border-brand-primary text-brand-primary bg-brand-primary/5":"border-transparent text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[i.jsx(LS,{size:16}),"Org Chart"]}),i.jsxs("button",{onClick:()=>n("directory"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap border-b-2 ${t==="directory"?"border-brand-primary text-brand-primary bg-brand-primary/5":"border-transparent text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[i.jsx(i$,{size:16}),"Directory"]})]}),t==="directory"&&i.jsx("div",{className:"pr-2 w-full md:w-auto",children:i.jsx("div",{className:"relative w-full md:w-64",children:i.jsx(Ze,{placeholder:"Search employees...",value:f,onChange:x=>p(x.target.value),leftIcon:i.jsx(bf,{className:"text-text-muted",size:16}),className:"bg-bg-secondary w-full"})})})]}),i.jsx("div",{className:"flex-1 relative",children:t==="hierarchy"?i.jsx("div",{className:"absolute inset-0 overflow-auto p-8 flex justify-center bg-bg-secondary/20",children:i.jsx("div",{className:"min-w-max flex justify-center gap-12",children:r.length>0?r.map(x=>i.jsx(aO,{node:x},x._id)):i.jsx("div",{className:"text-center text-text-secondary mt-12",children:"No hierarchy data available."})})}):i.jsx("div",{className:"absolute inset-0 overflow-auto p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[g.map(x=>i.jsxs("div",{className:"group relative bg-bg-card border border-border rounded-xl hover:shadow-lg transition-all duration-300 hover:-translate-y-1 overflow-hidden flex flex-col items-center text-center p-4",children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-brand-primary to-brand-secondary opacity-80"}),i.jsxs("div",{className:"mt-2 mb-3 relative",children:[i.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-white dark:border-gray-800 shadow-md ring-1 ring-black/5 dark:ring-white/10 overflow-hidden",children:i.jsx(uc,{src:x.profilePicture?x.profilePicture.startsWith("http")?x.profilePicture:`${xs}${x.profilePicture}`.replace("//uploads","/uploads"):void 0,name:`${x.firstName} ${x.lastName}`,alt:x.firstName,className:"w-full h-full",size:"md"})}),i.jsx("div",{className:"absolute bottom-0 right-0 p-0.5 bg-bg-card rounded-full",children:i.jsx("div",{className:`w-3 h-3 rounded-full border-2 border-bg-card ${x.isOnline?"bg-status-success":"bg-gray-300"}`,title:x.isOnline?"Online":"Offline"})})]}),i.jsxs("div",{className:"w-full mb-3",children:[i.jsxs("h3",{className:"font-bold text-text-primary text-sm truncate px-1",children:[x.firstName," ",x.lastName]}),i.jsx("p",{className:"text-brand-primary text-xs font-medium truncate px-1 mb-1",children:x.designation}),i.jsx("span",{className:"inline-block px-2 py-0.5 bg-bg-secondary text-text-secondary text-xs rounded-full truncate max-w-full",children:x.department||"General"})]}),i.jsxs("div",{className:"w-full flex items-center justify-center gap-2 mt-auto pt-3 border-t border-border/50",children:[x.workPhone&&i.jsx(Nd,{content:`Work: ${x.workPhone} (Click to copy)`,children:i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(x.workPhone),e("Work phone copied to clipboard","success")},className:"p-2 rounded-full bg-bg-hover text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 transition-colors",children:i.jsx(mb,{size:14})})}),x.personalMobile&&i.jsx(Nd,{content:`Mobile: ${x.personalMobile} (Click to copy)`,children:i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(x.personalMobile),e("Mobile number copied to clipboard","success")},className:"p-2 rounded-full bg-bg-hover text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 transition-colors",children:i.jsx(RS,{size:14})})}),i.jsx(Nd,{content:`Email: ${x.email} (Click to copy)`,children:i.jsx("button",{onClick:()=>{x.email&&(navigator.clipboard.writeText(x.email),e("Email copied to clipboard","success"))},className:"p-2 rounded-full bg-bg-hover text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 transition-colors",children:i.jsx(Kh,{size:14})})})]})]},x._id)),g.length===0&&i.jsx("div",{className:"col-span-full text-center py-12 text-text-secondary",children:"No employees found matching your search."})]})})})]})})}function une(){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Organization Structure"}),i.jsx("p",{className:"text-text-secondary",children:"View the reporting hierarchy of the organization."})]}),i.jsx(dne,{})]})}const Hg=[{key:"employees",label:"Employee Management",shortLabel:"Employees"},{key:"roles",label:"Role Management",shortLabel:"Roles"},{key:"assets",label:"Asset Management",shortLabel:"Assets"},{key:"ai_chatbot",label:"AI Chatbot Configuration",shortLabel:"AI Chatbot"},{key:"audit",label:"Audit Trail",shortLabel:"Audit"},{key:"leave",label:"Leave Management",shortLabel:"Leave"},{key:"attendance",label:"Attendance",shortLabel:"Attendance"},{key:"payroll",label:"Payroll & Finance",shortLabel:"Payroll"},{key:"projects",label:"Project Management",shortLabel:"Projects"},{key:"organization",label:"Organization Structure",shortLabel:"Org Structure"},{key:"feedback",label:"Feedback",shortLabel:"Feedback"},{key:"social",label:"Social Wall",shortLabel:"Social Wall"},{key:"appreciation",label:"Appreciation",shortLabel:"Appreciation"},{key:"email_automation",label:"Email Automation",shortLabel:"Email Auto"},{key:"tasks",label:"Task",shortLabel:"Tasks"},{key:"timesheet",label:"Timesheet Management",shortLabel:"Timesheets"},{key:"timesheet",label:"Timesheet Management",shortLabel:"Timesheets"},{key:"policies",label:"Policy Management",shortLabel:"Policies"},{key:"documents",label:"Document Management",shortLabel:"Documents"}],q5=Hg.map(e=>e.key),fne=({onClose:e,onCreate:t})=>{const[n,r]=C.useState({companyName:"",ownerEmail:"",plan:"free",subdomain:"",limits:{enabledModules:q5}}),[s,a]=C.useState(!1),[o,l]=C.useState(""),[c,d]=C.useState(null),[u,f]=C.useState(null),[p,h]=C.useState(null),[m,g]=C.useState(null),[x,y]=C.useState(null),v=(D,T)=>{if(D.target.files&&D.target.files[0]){const A=D.target.files[0];T==="logo"?f(A):h(A);const S=new FileReader;S.onloadend=()=>{T==="logo"?g(S.result):y(S.result)},S.readAsDataURL(A)}},N=async D=>{D.preventDefault(),l(""),a(!0);try{const T=new FormData;T.append("companyName",n.companyName),T.append("ownerEmail",n.ownerEmail),T.append("plan",n.plan),T.append("subdomain",n.subdomain),T.append("limits",JSON.stringify(n.limits)),u&&T.append("logo",u),p&&T.append("favicon",p);const A=await xe.createTenant(T);d({email:A.admin.email,password:A.admin.tempPassword}),t()}catch(T){l(T.message||"Failed to create tenant")}finally{a(!1)}},j=D=>{r({...n,[D.target.name]:D.target.value})};return c?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:i.jsx("svg",{className:"h-6 w-6 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Tenant Created Successfully!"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"The company admin account has been created. Please save these credentials:"}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-left mb-4",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.email})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Temporary Password"}),i.jsx("p",{className:"text-sm font-mono font-medium text-gray-900 dark:text-white bg-white dark:bg-gray-800 px-2 py-1 rounded",children:c.password})]})]}),i.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mb-4",children:" The admin should change this password on first login"}),i.jsx("button",{onClick:e,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})})}):i.jsx(Hn,{isOpen:!0,onClose:e,title:"Create Tenant",maxWidth:"max-w-4xl",children:i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[o&&i.jsxs("div",{className:"bg-status-error/10 text-status-error p-4 rounded-lg flex items-center gap-2 text-sm",children:[i.jsx(bi,{size:16}),o]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Company Name ",i.jsx("span",{className:"text-status-error",children:"*"})]}),i.jsx(Ze,{name:"companyName",value:n.companyName,onChange:j,className:"bg-bg-main",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Owner Email ",i.jsx("span",{className:"text-status-error",children:"*"})]}),i.jsx(Ze,{type:"email",name:"ownerEmail",value:n.ownerEmail,onChange:j,className:"bg-bg-main",required:!0,placeholder:"admin@company.com"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Plan"}),i.jsx(Gt,{name:"plan",value:n.plan,onChange:D=>r({...n,plan:D}),options:[{value:"free",label:"Free"},{value:"basic",label:"Basic"},{value:"pro",label:"Pro"},{value:"enterprise",label:"Enterprise"}],className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subdomain (Optional)"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-1",children:i.jsx(Ze,{name:"subdomain",value:n.subdomain,onChange:j,className:"bg-bg-main rounded-r-none",placeholder:"company"})}),i.jsx("span",{className:"px-3 py-2 bg-bg-secondary border-y border-r border-border rounded-r-lg text-text-secondary text-sm",children:".hrms.com"})]}),i.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"e.g., acme.yourhrms.com"})]})]})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(ef,{className:"text-brand-primary",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Branding"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Company Logo"}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"w-24 h-24 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[m?i.jsx("img",{src:m,alt:"Logo preview",className:"w-full h-full object-contain"}):i.jsx("span",{className:"text-text-muted text-[10px]",children:"No Logo"}),i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx("p",{className:"text-white text-[10px] font-medium",children:"Change"})}),i.jsx("input",{type:"file",accept:"image/*",onChange:D=>v(D,"logo"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),i.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[i.jsx("p",{className:"text-xs",children:"Upload company logo."}),i.jsx("div",{className:"mt-2",children:i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[i.jsx(yi,{size:14}),"Choose File",i.jsx("input",{type:"file",accept:"image/*",onChange:D=>v(D,"logo"),className:"hidden"})]})})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Favicon"}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"w-16 h-16 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[x?i.jsx("img",{src:x,alt:"Favicon preview",className:"w-8 h-8 object-contain"}):i.jsx(Sp,{className:"text-text-muted",size:24}),i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx("p",{className:"text-white text-[10px] font-medium",children:"Change"})}),i.jsx("input",{type:"file",accept:"image/*",onChange:D=>v(D,"favicon"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),i.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[i.jsx("p",{className:"text-xs",children:"Upload favicon."}),i.jsx("div",{className:"mt-2",children:i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[i.jsx(yi,{size:14}),"Choose File",i.jsx("input",{type:"file",accept:"image/*",onChange:D=>v(D,"favicon"),className:"hidden"})]})})]})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("label",{className:"block text-base font-semibold text-text-primary",children:"Enabled Modules"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>r({...n,limits:{...n.limits,enabledModules:q5}}),className:"text-xs font-medium text-brand-primary hover:text-brand-primary/80 transition-colors",children:"Select All"}),i.jsx("button",{type:"button",onClick:()=>r({...n,limits:{...n.limits,enabledModules:[]}}),className:"text-xs font-medium text-text-secondary hover:text-text-primary transition-colors",children:"Deselect All"})]})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 bg-bg-secondary/50 rounded-lg border border-border",children:Hg.map(D=>i.jsx(La,{label:D.shortLabel||D.label,checked:n.limits.enabledModules.includes(D.key),onChange:T=>{const A=T.target.checked,S=n.limits.enabledModules;r({...n,limits:{...n.limits,enabledModules:A?[...S,D.key]:S.filter(E=>E!==D.key)}})}},D.key))})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-text-secondary bg-bg-main border border-border rounded-lg hover:bg-bg-hover transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 text-sm font-medium text-white bg-brand-primary rounded-lg hover:bg-brand-primary/90 focus:ring-4 focus:ring-brand-primary/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:s?"Creating...":"Create Tenant"})]})]})})},hne=({tenant:e,onClose:t,onUpdate:n})=>{const[r,s]=C.useState({companyName:"",ownerEmail:"",plan:"free",subdomain:"",limits:{enabledModules:[]}}),[a,o]=C.useState(!1),[l,c]=C.useState(""),[d,u]=C.useState(null),[f,p]=C.useState(null),[h,m]=C.useState(null),[g,x]=C.useState(null),y=(j,D)=>{if(j.target.files&&j.target.files[0]){const T=j.target.files[0];D==="logo"?u(T):p(T);const A=new FileReader;A.onloadend=()=>{D==="logo"?m(A.result):x(A.result)},A.readAsDataURL(T)}};C.useEffect(()=>{var j,D;if(e){s({companyName:e.companyName||"",ownerEmail:e.ownerEmail||"",plan:e.plan||"free",subdomain:e.subdomain||"",limits:e.limits||{enabledModules:[]}});const T=((j=e.settings)==null?void 0:j.logo)||e.logo,A=((D=e.settings)==null?void 0:D.favicon)||e.favicon;T&&m(T),A&&x(A)}},[e]);const v=async j=>{j.preventDefault(),c(""),o(!0);try{const D=new FormData;D.append("companyName",r.companyName),D.append("plan",r.plan),D.append("subdomain",r.subdomain),D.append("limits",JSON.stringify(r.limits)),d&&D.append("logo",d),f&&D.append("favicon",f),await xe.updateTenant(e._id,D),n(),t()}catch(D){c(D.message||"Failed to update tenant")}finally{o(!1)}},N=j=>{s({...r,[j.target.name]:j.target.value})};return i.jsx(Hn,{isOpen:!0,onClose:t,title:"Edit Tenant",maxWidth:"max-w-4xl",children:i.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l&&i.jsxs("div",{className:"bg-status-error/10 text-status-error p-4 rounded-lg flex items-center gap-2 text-sm",children:[i.jsx(bi,{size:16}),l]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Company Name"}),i.jsx(Ze,{name:"companyName",value:r.companyName,onChange:N,className:"bg-bg-main",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Owner Email"}),i.jsx(Ze,{type:"email",name:"ownerEmail",value:r.ownerEmail,onChange:N,className:"bg-bg-main opacity-70 cursor-not-allowed",required:!0,disabled:!0}),i.jsx("p",{className:"mt-1 text-xs text-text-secondary",children:"Cannot be changed after creation"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Plan"}),i.jsx(Gt,{name:"plan",value:r.plan,onChange:j=>s({...r,plan:j}),options:[{value:"free",label:"Free"},{value:"basic",label:"Basic"},{value:"pro",label:"Pro"},{value:"enterprise",label:"Enterprise"}],className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subdomain (Optional)"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-1",children:i.jsx(Ze,{name:"subdomain",value:r.subdomain,onChange:N,className:"bg-bg-main rounded-r-none",placeholder:"company"})}),i.jsx("span",{className:"px-3 py-2 bg-bg-secondary border-y border-r border-border rounded-r-lg text-text-secondary text-sm",children:".hrms.com"})]})]})]})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(ef,{className:"text-brand-primary",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Branding"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Company Logo"}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"w-24 h-24 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[h?i.jsx("img",{src:h,alt:"Logo preview",className:"w-full h-full object-contain"}):i.jsx("span",{className:"text-text-muted text-[10px]",children:"No Logo"}),i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx("p",{className:"text-white text-[10px] font-medium",children:"Change"})}),i.jsx("input",{type:"file",accept:"image/*",onChange:j=>y(j,"logo"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),i.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[i.jsx("p",{className:"text-xs",children:"Upload company logo."}),i.jsx("div",{className:"mt-2",children:i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[i.jsx(yi,{size:14}),"Choose File",i.jsx("input",{type:"file",accept:"image/*",onChange:j=>y(j,"logo"),className:"hidden"})]})})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Favicon"}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"w-16 h-16 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[g?i.jsx("img",{src:g,alt:"Favicon preview",className:"w-8 h-8 object-contain"}):i.jsx(Sp,{className:"text-text-muted",size:24}),i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx("p",{className:"text-white text-[10px] font-medium",children:"Change"})}),i.jsx("input",{type:"file",accept:"image/*",onChange:j=>y(j,"favicon"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),i.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[i.jsx("p",{className:"text-xs",children:"Upload favicon."}),i.jsx("div",{className:"mt-2",children:i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[i.jsx(yi,{size:14}),"Choose File",i.jsx("input",{type:"file",accept:"image/*",onChange:j=>y(j,"favicon"),className:"hidden"})]})})]})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("label",{className:"block text-base font-semibold text-text-primary",children:"Enabled Modules"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>s({...r,limits:{...r.limits,enabledModules:q5}}),className:"text-xs font-medium text-brand-primary hover:text-brand-primary/80 transition-colors",children:"Select All"}),i.jsx("button",{type:"button",onClick:()=>s({...r,limits:{...r.limits,enabledModules:[]}}),className:"text-xs font-medium text-text-secondary hover:text-text-primary transition-colors",children:"Deselect All"})]})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 bg-bg-secondary/50 rounded-lg border border-border",children:Hg.map(j=>{var D,T;return i.jsx(La,{label:j.shortLabel||j.label,checked:((T=(D=r.limits)==null?void 0:D.enabledModules)==null?void 0:T.includes(j.key))||!1,onChange:A=>{var I;const S=A.target.checked,E=((I=r.limits)==null?void 0:I.enabledModules)||[];s({...r,limits:{...r.limits,enabledModules:S?[...E,j.key]:E.filter(L=>L!==j.key)}})}},j.key)})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-text-secondary bg-bg-main border border-border rounded-lg hover:bg-bg-hover transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 text-sm font-medium text-white bg-brand-primary rounded-lg hover:bg-brand-primary/90 focus:ring-4 focus:ring-brand-primary/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:a?"Saving...":"Save Changes"})]})]})})},pne=()=>{const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(""),[o,l]=C.useState("all"),[c,d]=C.useState("all"),[u,f]=C.useState(!1),[p,h]=C.useState(null),[m,g]=C.useState(null),[x,y]=C.useState(!1);C.useEffect(()=>{v()},[o,c]);const v=async()=>{try{r(!0);const S={};o!=="all"&&(S.status=o),c!=="all"&&(S.plan=c),s&&(S.search=s);const E=await xe.getAllTenants(S);t(E.tenants||[])}catch(S){console.error("Failed to load tenants:",S)}finally{r(!1)}},N=()=>{v()},j=S=>{const E={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",suspended:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",trial:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",expired:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return E[S]||E.active},D=S=>{const E={free:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",basic:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",pro:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",enterprise:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300"};return E[S]||E.free},T=async()=>{if(m){y(!0);try{await xe.deleteTenant(m),await v(),g(null)}catch(S){console.error("Failed to delete tenant:",S),alert("Failed to delete tenant. Please try again.")}finally{y(!1)}}},A=async(S,E)=>{const I=E==="active"?"suspended":"active";try{await xe.updateTenantStatus(S,I),await v()}catch(L){console.error("Failed to update tenant status:",L),alert("Failed to update tenant status. Please try again.")}};return i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Tenant Management"}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Manage all companies and their subscriptions"})]}),i.jsx(at,{onClick:()=>f(!0),leftIcon:i.jsx(Wr,{size:20}),children:"Create Tenant"})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 mb-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"relative",children:i.jsx(Ze,{placeholder:"Search by company name or email...",value:s,onChange:S=>a(S.target.value),onKeyPress:S=>S.key==="Enter"&&N(),leftIcon:i.jsx(bf,{className:"text-gray-400",size:20}),className:"bg-white dark:bg-gray-700"})})}),i.jsx(Gt,{value:o,onChange:S=>l(S),options:[{value:"all",label:"All Statuses"},{value:"active",label:"Active"},{value:"trial",label:"Trial"},{value:"suspended",label:"Suspended"},{value:"expired",label:"Expired"}],className:"bg-white dark:bg-gray-700"}),i.jsx(Gt,{value:c,onChange:S=>d(S),options:[{value:"all",label:"All Plans"},{value:"free",label:"Free"},{value:"basic",label:"Basic"},{value:"pro",label:"Pro"},{value:"enterprise",label:"Enterprise"}],className:"bg-white dark:bg-gray-700"})]})}),n?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(S=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsx("div",{className:"flex items-start justify-between mb-4",children:i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(le,{className:"h-6 w-3/4"}),i.jsx(le,{className:"h-4 w-1/2"})]})}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx(le,{className:"h-6 w-16 rounded-full"}),i.jsx(le,{className:"h-6 w-16 rounded-full"})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(le,{className:"h-4 w-24"}),i.jsx(le,{className:"h-4 w-16"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(le,{className:"h-4 w-24"}),i.jsx(le,{className:"h-4 w-16"})]})]}),i.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-2",children:[i.jsx(le,{className:"h-9 flex-1 rounded-lg"}),i.jsx(le,{className:"h-9 flex-1 rounded-lg"}),i.jsx(le,{className:"h-9 w-10 rounded-lg"})]})]},S))}):e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Kl,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"No tenants found"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(S=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[i.jsx("div",{className:"flex items-start justify-between mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg truncate",children:S.companyName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:S.ownerEmail})]})}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j(S.status)}`,children:S.status}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D(S.plan)}`,children:S.plan.toUpperCase()})]}),S.stats&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[i.jsx(Pa,{size:16}),"Employees"]}),i.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[S.stats.employeeCount,"/",S.limits.maxEmployees]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[i.jsx(ES,{size:16}),"Storage"]}),i.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[S.stats.storageUsed.toFixed(1),"/",S.limits.maxStorage," MB"]})]})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:["Created ",new Date(S.createdAt).toLocaleDateString()]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:E=>{E.stopPropagation(),h(S)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-blue-600 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 rounded-lg transition-colors text-sm",title:"Edit Tenant",children:[i.jsx(OS,{size:16}),"Edit"]}),S.status==="active"?i.jsxs("button",{onClick:E=>{E.stopPropagation(),A(S._id,S.status)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-amber-600 bg-amber-50 hover:bg-amber-100 dark:bg-amber-900/20 dark:hover:bg-amber-900/30 rounded-lg transition-colors text-sm",title:"Suspend Tenant",children:[i.jsx(DH,{size:16}),"Suspend"]}):i.jsxs("button",{onClick:E=>{E.stopPropagation(),A(S._id,S.status)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-green-600 bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30 rounded-lg transition-colors text-sm",title:"Activate Tenant",children:[i.jsx(Yr,{size:16}),"Activate"]}),i.jsx("button",{onClick:E=>{E.stopPropagation(),g(S._id)},className:"px-3 py-2 text-red-600 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete Tenant",children:i.jsx(br,{size:16})})]})]})]},S._id))}),u&&i.jsx(fne,{onClose:()=>f(!1),onCreate:v}),p&&i.jsx(hne,{tenant:p,onClose:()=>h(null),onUpdate:v}),i.jsx(ma,{isOpen:m!==null,onClose:()=>g(null),onConfirm:T,title:"Delete Tenant",message:"Are you sure you want to delete this tenant? This will permanently delete all data including employees, projects, and records. This action cannot be undone.",confirmText:"Delete Tenant",variant:"danger",isLoading:x})]})},mne=()=>{const[e,t]=C.useState(null),[n,r]=C.useState(!0);C.useEffect(()=>{s()},[]);const s=async()=>{try{r(!0);const o=await xe.getPlatformAnalytics();t(o)}catch(o){console.error("Failed to load analytics:",o)}finally{r(!1)}};if(n||!e)return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx(le,{className:"h-8 w-48 mb-2"}),i.jsx(le,{className:"h-4 w-64"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[1,2,3,4].map(o=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(le,{className:"h-4 w-24 mb-2"}),i.jsx(le,{className:"h-8 w-16"})]}),i.jsx(le,{className:"h-12 w-12 rounded-lg"})]})},o))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsx(le,{className:"h-6 w-32 mb-4"}),i.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(o=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx(le,{className:"h-4 w-20"}),i.jsx(le,{className:"h-4 w-12"})]}),i.jsx(le,{className:"h-2 w-full rounded-full"})]},o))})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsx(le,{className:"h-6 w-32 mb-4"}),i.jsx("div",{className:"space-y-3",children:[1,2,3].map(o=>i.jsx(le,{className:"h-12 w-full rounded-lg"},o))})]})]})]});const a={free:"bg-gray-500",basic:"bg-blue-500",pro:"bg-purple-500",enterprise:"bg-amber-500"};return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Platform Analytics"}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Overview of platform usage and metrics"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Tenants"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.overview.totalTenants})]}),i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:i.jsx(Kl,{className:"h-6 w-6 text-blue-600 dark:text-blue-300"})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Active Tenants"}),i.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:e.overview.activeTenants})]}),i.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:i.jsx(Ch,{className:"h-6 w-6 text-green-600 dark:text-green-300"})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Users"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.overview.totalUsers})]}),i.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-lg",children:i.jsx(Pa,{className:"h-6 w-6 text-purple-600 dark:text-purple-300"})})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Trial Tenants"}),i.jsx("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400",children:e.overview.trialTenants})]}),i.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900 rounded-lg",children:i.jsx(Gh,{className:"h-6 w-6 text-orange-600 dark:text-orange-300"})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Plan Distribution"}),i.jsx("div",{className:"space-y-4",children:e.planDistribution.map(o=>{const l=(o.count/e.overview.totalTenants*100).toFixed(1);return i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:o._id}),i.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.count," (",l,"%)"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full ${a[o._id]||"bg-gray-500"}`,style:{width:`${l}%`}})})]},o._id)})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Status Breakdown"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Active"}),i.jsx("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:e.overview.activeTenants})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Trial"}),i.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:e.overview.trialTenants})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Suspended"}),i.jsx("span",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:e.overview.suspendedTenants})]})]})]})]})]})};function gne(){const[e,t]=C.useState([]),[n,r]=C.useState([]),[s,a]=C.useState([]),{user:o}=cn(),[l,c]=C.useState(!0),[d,u]=C.useState(null),[f,p]=C.useState(!1),[h,m]=C.useState(null),[g,x]=C.useState(""),[y,v]=C.useState([]),[N,j]=C.useState([]),[D,T]=C.useState([]),[A,S]=C.useState(!1),E=Hg.filter(Y=>{if(!(o!=null&&o.tenantId)||typeof o.tenantId!="object"||!("limits"in o.tenantId))return!0;const q=o.tenantId;return q.limits&&q.limits.enabledModules&&q.limits.enabledModules.includes(Y.key)}),[I,L]=C.useState(null),[O,F]=C.useState(!1),U=async()=>{c(!0);try{const[Y,q,_]=await Promise.all([xe.getRoles(),xe.getPermissions(),xe.getAllDocumentTypes()]);t(Y),r(q),_.success&&a(_.data),u(null)}catch(Y){u("Failed to fetch data"),console.error(Y)}finally{c(!1)}};C.useEffect(()=>{U()},[]);const W=Y=>{Y?(m(Y),x(Y.name),v(Y.permissions.map(q=>q._id)),j(Y.accessibleModules||[]),T(Y.mandatoryDocuments||[])):(m(null),x(""),v([]),j([]),T([])),p(!0)},X=Y=>{v(q=>q.includes(Y)?q.filter(_=>_!==Y):[...q,Y])},P=Y=>{T(q=>q.includes(Y)?q.filter(_=>_!==Y):[...q,Y])},z=async Y=>{if(Y.preventDefault(),!!g.trim()){S(!0);try{const q={name:g,permissions:y,accessibleModules:N,mandatoryDocuments:D};h?await xe.updateRole(h._id,q):await xe.createRole(q),U(),p(!1)}catch(q){console.error(q),alert(q.message||"Failed to save role")}finally{S(!1)}}},oe=async()=>{if(I){F(!0);try{await xe.deleteRole(I),t(e.filter(Y=>Y._id!==I)),L(null)}catch(Y){console.error(Y),alert("Failed to delete role")}finally{F(!1)}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Role Management"}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Manage system roles and permissions"})]}),i.jsx(at,{onClick:()=>W(),leftIcon:i.jsx(Wr,{size:20}),children:"Add Role"})]}),d&&i.jsxs("div",{className:"bg-status-error/10 text-status-error p-4 rounded-lg flex items-center gap-2",children:[i.jsx(bs,{size:20}),i.jsx("span",{children:d})]}),i.jsx(Qo,{columns:[{header:"Role Name",accessorKey:"name",searchKey:"name",render:Y=>i.jsxs("div",{className:"flex items-center gap-2 font-medium text-text-primary",children:[i.jsx(Gv,{size:16,className:"text-brand-primary"}),Y.name]})},{header:"Mandatory Documents",render:Y=>i.jsx("div",{className:"flex flex-wrap gap-1",children:Y.mandatoryDocuments&&Y.mandatoryDocuments.length>0?i.jsxs("span",{className:"px-2 py-0.5 bg-purple-50 text-purple-700 text-xs rounded-full border border-purple-100",children:[Y.mandatoryDocuments.length," Documents Required"]}):i.jsx("span",{className:"text-xs text-text-secondary",children:"None"})})},{header:"Permissions",render:Y=>i.jsxs("div",{className:"flex flex-wrap gap-1",children:[Y.permissions.length>0?Y.permissions.slice(0,3).map(q=>i.jsx("span",{className:"px-2 py-0.5 bg-brand-primary/10 text-brand-primary text-xs rounded-full",children:q.name.split(":")[1]||q.name},q._id)):i.jsx("span",{className:"text-sm text-text-secondary",children:"No permissions"}),Y.permissions.length>3&&i.jsxs("span",{className:"text-xs text-text-secondary",children:["+",Y.permissions.length-3," more"]})]})},{header:"Accessible Modules",render:Y=>i.jsxs("div",{className:"flex flex-wrap gap-1",children:[Y.accessibleModules&&Y.accessibleModules.length>0?Y.accessibleModules.slice(0,3).map(q=>{var $;const _=(($=Hg.find(J=>J.key===q))==null?void 0:$.label)||q;return i.jsx("span",{className:"px-2 py-0.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-xs rounded-full border border-blue-100 dark:border-blue-800",children:_},q)}):i.jsx("span",{className:"text-sm text-text-secondary",children:"No modules"}),Y.accessibleModules&&Y.accessibleModules.length>3&&i.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 text-xs rounded-full border border-gray-200 dark:border-gray-700",children:["+",Y.accessibleModules.length-3," more"]})]})},{header:"Actions",className:"text-right",render:Y=>i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>W(Y),className:"p-2 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-lg transition-colors",title:"Edit Role",children:i.jsx(Wv,{size:18})}),i.jsx("button",{onClick:()=>L(Y._id),className:"p-2 text-text-secondary hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Role",children:i.jsx(br,{size:18})})]})}],data:e,isLoading:l,emptyMessage:"No roles found."}),i.jsx(Hn,{isOpen:f,onClose:()=>p(!1),title:h?"Edit Role":"Add New Role",maxWidth:"max-w-4xl",children:i.jsxs("form",{onSubmit:z,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:["Role Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ze,{value:g,onChange:Y=>x(Y.target.value),placeholder:"e.g. HR Manager",className:"bg-bg-main",required:!0})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-text-secondary mb-2",children:"Mandatory Documents Checklist"}),i.jsx("div",{className:"border border-border rounded-lg p-4 bg-bg-main/50 max-h-48 overflow-y-auto grid grid-cols-2 gap-3",children:s.length>0?s.map(Y=>i.jsx(La,{label:Y.name,checked:D.includes(Y._id),onChange:()=>P(Y._id)},Y._id)):i.jsx("p",{className:"col-span-2 text-sm text-text-secondary text-center",children:"No document types available. Configure them in Settings."})}),i.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Select documents that employees with this role MUST upload."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Accessible Modules"}),i.jsxs("div",{className:"flex gap-2 text-sm",children:[i.jsx("button",{type:"button",onClick:()=>j(E.map(Y=>Y.key)),className:"text-brand-primary hover:text-brand-primary/80 font-medium",children:"Select All"}),i.jsx("span",{className:"text-border",children:"|"}),i.jsx("button",{type:"button",onClick:()=>j([]),className:"text-text-secondary hover:text-text-primary",children:"Deselect All"})]})]}),i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 border border-border rounded-lg p-4 bg-bg-main/50",children:E.map(Y=>i.jsx(La,{label:Y.shortLabel||Y.label,checked:N.includes(Y.key),onChange:q=>{q.target.checked?j([...N,Y.key]):j(N.filter(_=>_!==Y.key))}},Y.key))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Permissions"}),i.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto border border-border rounded-lg p-4",children:n.length>0?Object.entries(n.reduce((Y,q)=>{const[_]=q.name.split(":"),$=_||"Other";return Y[$]||(Y[$]=[]),Y[$].push(q),Y},{})).map(([Y,q])=>i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-semibold text-text-primary capitalize border-b border-border pb-1",children:Y.replace("_"," ")}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.map(_=>i.jsx("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:i.jsx(La,{checked:y.includes(_._id),onChange:()=>X(_._id),label:_.name.split(":")[1]||_.name})},_._id))})]},Y)):i.jsx("p",{className:"text-sm text-text-secondary text-center py-2",children:"No permissions available."})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-gray-50 font-medium transition-colors",disabled:A,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary font-medium transition-colors disabled:opacity-50",disabled:A,children:A?"Saving...":"Save Role"})]})]})}),i.jsx(ma,{isOpen:!!I,onClose:()=>L(null),onConfirm:oe,title:"Delete Role",message:"Are you sure you want to delete this role? This action cannot be undone.",confirmText:"Delete",variant:"danger",isLoading:O})]})}function xne(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(!1),[o,l]=C.useState(null);C.useEffect(()=>{c()},[]);const c=async()=>{try{r(!0);const g=(await xe.getAllGlobalUsers({})).filter(x=>!x.isSuperAdmin&&!x.roles.some(y=>y.name==="Super Admin"));t(g)}catch(m){console.error("Failed to fetch users",m)}finally{r(!1)}},d=async m=>{try{const g=m.status==="active"?"inactive":"active";await xe.updateGlobalUserStatus(m._id,g),c()}catch(g){console.error("Failed to update status",g),alert("Failed to update user status")}},u=m=>{l(m._id)},f=async()=>{if(o){a(!0);try{await xe.deleteGlobalUser(o),c()}catch(m){console.error("Failed to delete user",m),alert(m.message||"Failed to delete user")}finally{a(!1),l(null)}}},p=m=>{switch(m){case"active":return"success";case"inactive":return"warning";case"suspended":return"error";default:return"default"}},h=[{header:"User",accessorKey:"name",render:m=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary/10 flex items-center justify-center text-brand-primary font-medium",children:m.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-text-primary",children:m.name}),i.jsx("div",{className:"text-xs text-text-secondary",children:m.email})]})]})},{header:"Tenant (Company)",accessorKey:"tenantId",render:m=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kl,{size:14,className:"text-text-muted"}),i.jsx("span",{className:"text-sm text-text-primary",children:m.tenantId?m.tenantId.companyName:"N/A (Super Admin)"})]})},{header:"Role",accessorKey:"roles",render:m=>i.jsxs("div",{className:"flex flex-wrap gap-1",children:[m.roles.map(g=>i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",children:g.name},g._id)),m.isSuperAdmin&&i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:"Super Admin"})]})},{header:"Status",accessorKey:"status",render:m=>i.jsx(Id,{variant:p(m.status),children:m.status})},{header:"Actions",accessorKey:"actions",render:m=>i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>d(m),className:`p-1 rounded transition-colors ${m.status==="active"?"text-amber-600 hover:bg-amber-50":"text-green-600 hover:bg-green-50"}`,title:m.status==="active"?"Deactivate User":"Activate User",children:m.status==="active"?i.jsx(DL,{size:16}):i.jsx(ML,{size:16})}),i.jsx("button",{onClick:()=>u(m),className:"p-1 hover:bg-red-50 text-text-muted hover:text-red-600 rounded transition-colors",title:"Delete User",children:i.jsx(br,{size:16})})]})}];return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"User Management"}),i.jsx("p",{className:"text-text-secondary mt-1",children:"View and manage all users across all tenants"})]})}),n?i.jsx("div",{className:"bg-bg-card rounded-xl border border-border shadow-sm overflow-hidden",children:i.jsxs("div",{className:"min-w-full divide-y divide-border",children:[i.jsx("div",{className:"bg-bg-secondary/50 px-6 py-3 border-b border-border flex justify-between",children:[1,2,3,4,5].map(m=>i.jsx(le,{className:"h-4 w-24"},m))}),[1,2,3,4,5].map(m=>i.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(le,{className:"h-8 w-8 rounded-full"}),i.jsxs("div",{children:[i.jsx(le,{className:"h-4 w-32 mb-1"}),i.jsx(le,{className:"h-3 w-48"})]})]}),i.jsx(le,{className:"h-4 w-32"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(le,{className:"h-5 w-16"}),i.jsx(le,{className:"h-5 w-16"})]}),i.jsx(le,{className:"h-5 w-16 rounded-full"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(le,{className:"h-6 w-6"}),i.jsx(le,{className:"h-6 w-6"})]})]},m))]})}):i.jsx("div",{className:"bg-bg-card rounded-xl border border-border shadow-sm overflow-hidden",children:i.jsx(Qo,{data:e,columns:h})}),i.jsx(ma,{isOpen:o!==null,onClose:()=>l(null),onConfirm:f,title:"Delete User",message:"Are you sure you want to delete this user? This will also remove their employee record if it exists. This action cannot be undone.",confirmText:"Delete",variant:"danger",isLoading:s})]})}function yne(){const[e,t]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[n,r]=C.useState(!1),[s,a]=C.useState(""),[o,l]=C.useState(""),c=u=>{t({...e,[u.target.name]:u.target.value}),l("")},d=async u=>{if(u.preventDefault(),l(""),a(""),e.newPassword!==e.confirmPassword){l("New passwords do not match");return}if(e.newPassword.length<8){l("Password must be at least 8 characters long");return}r(!0);try{await xe.updateProfile({currentPassword:e.currentPassword,newPassword:e.newPassword}),a("Password updated successfully"),t({currentPassword:"",newPassword:"",confirmPassword:""})}catch(f){l(f.message||"Failed to update password")}finally{r(!1)}};return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Settings"}),i.jsx("p",{className:"text-text-secondary mt-1",children:"Manage your account settings and security"})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-bg-card rounded-xl shadow-sm border border-border p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-brand-primary/10 rounded-lg",children:i.jsx(Gv,{className:"text-brand-primary",size:24})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Security Settings"}),i.jsx("p",{className:"text-sm text-text-secondary",children:"Update your password and security preferences"})]})]}),i.jsxs("form",{onSubmit:d,className:"space-y-4 max-w-md",children:[o&&i.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400 text-sm",children:[i.jsx(bs,{size:16}),o]}),s&&i.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2 text-green-700 dark:text-green-400 text-sm",children:[i.jsx(Yr,{size:16}),s]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Current Password"}),i.jsx(Iu,{name:"currentPassword",value:e.currentPassword,onChange:c,required:!0,placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"New Password"}),i.jsx(Iu,{name:"newPassword",value:e.newPassword,onChange:c,required:!0,placeholder:""}),i.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Must be at least 8 characters long"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Confirm New Password"}),i.jsx(Iu,{name:"confirmPassword",value:e.confirmPassword,onChange:c,required:!0,placeholder:""})]}),i.jsx("div",{className:"pt-4",children:i.jsx(at,{type:"submit",disabled:n,isLoading:n,className:"px-6 py-2 shadow-lg shadow-brand-primary/20",children:"Update Password"})})]})]})})})]})}const bne=()=>{const[e,t]=C.useState(null),[n,r]=C.useState(!0),[s,a]=C.useState(!1),[o,l]=C.useState(""),[c,d]=C.useState(!1),[u,f]=C.useState({companyName:"",timezone:"America/New_York",currency:"USD",workHours:{start:"09:00",end:"18:00"},dateFormat:"MM/DD/YYYY"});C.useEffect(()=>{p()},[]);const p=async()=>{try{r(!0);const g=await xe.getCompanySettings();t(g.company),f({companyName:g.company.name,timezone:g.company.timezone,currency:g.company.currency,workHours:g.company.workHours,dateFormat:g.company.dateFormat})}catch(g){l(g.message||"Failed to load settings")}finally{r(!1)}},h=async g=>{g.preventDefault(),l(""),d(!1),a(!0);try{await xe.updateCompanySettings(u),d(!0),p(),setTimeout(()=>d(!1),3e3)}catch(x){l(x.message||"Failed to save settings")}finally{a(!1)}},m=g=>{const{name:x,value:y}=g.target;if(x.startsWith("workHours.")){const v=x.split(".")[1];f({...u,workHours:{...u.workHours,[v]:y}})}else f({...u,[x]:y})};return n?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Loading settings..."})]})}):i.jsxs("div",{className:"p-6 max-w-4xl",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Company Settings"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your organization's configuration"})]}),i.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o&&i.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400",children:o}),c&&i.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400",children:"Settings saved successfully!"}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Kl,{className:"text-blue-600",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Company Information"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Name"}),i.jsx(Ze,{name:"companyName",value:u.companyName,onChange:m,required:!0,className:"bg-white dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subdomain"}),i.jsx(Ze,{value:(e==null?void 0:e.subdomain)||"",disabled:!0,className:"bg-gray-100 dark:bg-gray-900 cursor-not-allowed"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Subdomain cannot be changed"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Sp,{className:"text-blue-600",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Regional Settings"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Timezone"}),i.jsx(Gt,{value:u.timezone,onChange:g=>f(x=>({...x,timezone:g})),options:[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"Europe/London",label:"London (GMT)"},{value:"Asia/Kolkata",label:"India (IST)"},{value:"Asia/Singapore",label:"Singapore (SGT)"}],className:"bg-white dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[i.jsx(Gh,{className:"inline mr-1",size:16}),"Currency"]}),i.jsx(Gt,{value:u.currency,onChange:g=>f(x=>({...x,currency:g})),options:[{value:"USD",label:"USD - US Dollar"},{value:"EUR",label:"EUR - Euro"},{value:"GBP",label:"GBP - British Pound"},{value:"INR",label:"INR - Indian Rupee"},{value:"SGD",label:"SGD - Singapore Dollar"}],className:"bg-white dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Format"}),i.jsx(Gt,{value:u.dateFormat,onChange:g=>f(x=>({...x,dateFormat:g})),options:[{value:"MM/DD/YYYY",label:"MM/DD/YYYY (12/31/2024)"},{value:"DD/MM/YYYY",label:"DD/MM/YYYY (31/12/2024)"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD (2024-12-31)"}],className:"bg-white dark:bg-gray-700"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Es,{className:"text-blue-600",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Work Hours"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Time"}),i.jsx(Ze,{type:"time",name:"workHours.start",value:u.workHours.start,onChange:m,className:"bg-white dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Time"}),i.jsx(Ze,{type:"time",name:"workHours.end",value:u.workHours.end,onChange:m,className:"bg-white dark:bg-gray-700"})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{type:"submit",disabled:s,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(yf,{size:20}),s?"Saving...":"Save Settings"]})})]})]})},vne=()=>{const[e,t]=C.useState(null),[n,r]=C.useState(!0);C.useEffect(()=>{s()},[]);const s=async()=>{try{r(!0);const p=await xe.getSubscriptionDetails();t(p.subscription)}catch(p){console.error("Failed to load subscription:",p)}finally{r(!1)}},a=p=>{const h={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",trial:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",suspended:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",expired:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return h[p]||h.active},o=p=>{const h={free:{name:"Free",price:"$0/mo",color:"gray"},basic:{name:"Basic",price:"$29/mo",color:"blue"},pro:{name:"Pro",price:"$99/mo",color:"purple"},enterprise:{name:"Enterprise",price:"Custom",color:"amber"}};return h[p]||h.free},l=(p,h)=>(p/h*100).toFixed(1),c=[{id:"free",name:"Free",price:"$0",period:"/month",features:["Up to 10 employees","100 MB storage","Basic modules (3)"],maxEmployees:10},{id:"basic",name:"Basic",price:"$29",period:"/month",features:["Up to 50 employees","500 MB storage","Standard modules (5)"],maxEmployees:50},{id:"pro",name:"Pro",price:"$99",period:"/month",features:["Up to 200 employees","2 GB storage","Advanced modules (7)","Priority support"],maxEmployees:200},{id:"enterprise",name:"Enterprise",price:"Custom",period:"",features:["Unlimited employees","10 GB storage","All modules (8)","24/7 support","Custom integrations"],maxEmployees:9999}];if(n||!e)return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Loading subscription..."})]})});const d=o(e.plan),u=l(e.usage.employeeCount,e.limits.maxEmployees),f=l(e.usage.storageUsed,e.limits.maxStorage);return i.jsxs("div",{className:"p-6 max-w-6xl",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Subscription & Billing"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your subscription plan and usage"})]}),i.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg p-6 text-white mb-6",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("h2",{className:"text-2xl font-bold",children:[d.name," Plan"]}),i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a(e.status)}`,children:e.status})]}),i.jsx("p",{className:"text-blue-100 mb-4",children:e.subscriptionEnd?`Renews on ${new Date(e.subscriptionEnd).toLocaleDateString()}`:"Current plan"}),i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("span",{className:"text-4xl font-bold",children:d.price}),e.plan!=="free"&&i.jsx("span",{className:"text-blue-100",children:"/month"})]})]}),i.jsx(lo,{className:"h-16 w-16 opacity-50"})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pa,{className:"text-blue-600",size:20}),i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Employee Usage"})]}),i.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.usage.employeeCount," /"," ",e.limits.maxEmployees]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 mb-2",children:i.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${Math.min(Number(u),100)}%`}})}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[u,"% used"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ES,{className:"text-purple-600",size:20}),i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Storage Usage"})]}),i.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.usage.storageUsed.toFixed(1)," /"," ",e.limits.maxStorage," MB"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 mb-2",children:i.jsx("div",{className:"bg-purple-600 h-3 rounded-full transition-all",style:{width:`${Math.min(Number(f),100)}%`}})}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f,"% used"]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"All Plans"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(p=>i.jsxs("div",{className:`rounded-lg border-2 p-6 ${e.plan===p.id?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:p.name}),i.jsxs("div",{className:"mb-4",children:[i.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:p.price}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:p.period})]}),i.jsx("ul",{className:"space-y-2 mb-6",children:p.features.map((h,m)=>i.jsxs("li",{className:"flex items-start text-sm text-gray-600 dark:text-gray-400",children:[i.jsx(Ch,{className:"mr-2 text-green-500 flex-shrink-0",size:16}),h]},m))}),e.plan===p.id?i.jsx("button",{disabled:!0,className:"w-full px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-400 rounded-lg cursor-not-allowed",children:"Current Plan"}):i.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",onClick:()=>alert("Stripe integration will be available in Week 5"),children:"Upgrade"})]},p.id))})]})]})},wne=()=>{const[e,t]=C.useState(null),[n,r]=C.useState(!0);C.useEffect(()=>{s()},[]);const s=async()=>{try{r(!0);const o=await xe.getUsageAnalytics();t(o)}catch(o){console.error("Failed to load usage:",o)}finally{r(!1)}};if(n||!e)return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Loading usage data..."})]})});const a=[{id:"attendance",name:"Attendance"},{id:"leave",name:"Leave Management"},{id:"employees",name:"Employee Management"},{id:"payroll",name:"Payroll"},{id:"projects",name:"Projects"},{id:"tasks",name:"Tasks"},{id:"timesheet",name:"Timesheet"},{id:"policies",name:"Policies"}];return i.jsxs("div",{className:"p-6 max-w-6xl",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Usage & Analytics"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Monitor your organization's usage and limits"})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Pa,{className:"text-blue-600",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Employee Usage"})]}),i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.employees.current," / ",e.employees.limit]}),i.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["(",e.employees.percentage,"%)"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:i.jsx("div",{className:`h-4 rounded-full transition-all ${Number(e.employees.percentage)>80?"bg-orange-500":"bg-blue-600"}`,style:{width:`${Math.min(Number(e.employees.percentage),100)}%`}})}),Number(e.employees.percentage)>80&&i.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400 mt-2",children:" You're approaching your employee limit. Consider upgrading your plan."})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(ES,{className:"text-purple-600",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Storage Usage"})]}),i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.storage.used.toFixed(1)," MB / ",e.storage.limit," MB"]}),i.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["(",e.storage.percentage,"%)"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 mb-4",children:i.jsx("div",{className:`h-4 rounded-full transition-all ${Number(e.storage.percentage)>80?"bg-orange-500":"bg-purple-600"}`,style:{width:`${Math.min(Number(e.storage.percentage),100)}%`}})}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[i.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Documents"}),i.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[e.storage.breakdown.documents," MB"]})]}),i.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Profile Pictures"}),i.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[e.storage.breakdown.profilePictures," MB"]})]}),i.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Payslips"}),i.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[e.storage.breakdown.payslips," MB"]})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(lo,{className:"text-green-600",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Module Access"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.map(o=>{const l=e.modules.enabled.includes(o.id);return i.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${l?"bg-green-50 dark:bg-green-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[l?i.jsx(Yr,{className:"text-green-600 dark:text-green-400",size:20}):i.jsx(jp,{className:"text-gray-400",size:20}),i.jsx("span",{className:`font-medium ${l?"text-green-900 dark:text-green-300":"text-gray-500 dark:text-gray-400"}`,children:o.name})]},o.id)})}),e.modules.disabled.length>0&&i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4",children:["Upgrade your plan to access all ",a.length," modules"]})]})]})},Nne=({isOpen:e,onClose:t,onSuccess:n,initialData:r})=>{const[s,a]=C.useState({name:"",category:"Employment",description:"",isRequired:!1,expiryRequired:!1,maxFileSize:5}),[o,l]=C.useState(!1),[c,d]=C.useState(""),u=[{value:"Employment",label:"Employment"},{value:"Identity",label:"Identity"},{value:"Legal",label:"Legal"},{value:"Education",label:"Education"},{value:"Other",label:"Other"}];C.useEffect(()=>{a(r?{name:r.name,category:r.category,description:r.description||"",isRequired:r.isRequired,expiryRequired:r.expiryRequired,maxFileSize:r.maxFileSize?r.maxFileSize/(1024*1024):5}:{name:"",category:"Employment",description:"",isRequired:!1,expiryRequired:!1,maxFileSize:5})},[r]);const f=m=>{const{name:g,value:x,type:y}=m.target;a(v=>({...v,[g]:y==="checkbox"?m.target.checked:x}))},p=m=>{a(g=>({...g,category:m}))},h=async m=>{m.preventDefault(),l(!0),d("");try{const g={...s,maxFileSize:Number(s.maxFileSize)*1024*1024};r?await xe.updateDocumentType(r._id,g):await xe.createDocumentType(g),n(),t()}catch(g){d(g.message||"Failed to save document type")}finally{l(!1)}};return i.jsx(Hn,{isOpen:e,onClose:t,title:r?"Edit Document Type":"Add Document Type",maxWidth:"max-w-xl",children:i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c&&i.jsx("div",{className:"p-3 bg-status-error/10 border border-status-error/20 rounded-lg text-status-error text-sm",children:c}),i.jsx(Ze,{label:"Document Name",name:"name",value:s.name,onChange:f,required:!0,placeholder:"e.g. Offer Letter"}),i.jsx("div",{children:i.jsx(Gt,{label:"Category",options:u,value:s.category,onChange:p})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Description (Optional)"}),i.jsx("textarea",{name:"description",value:s.description,onChange:f,rows:3,className:"w-full px-4 py-2 bg-bg-card border border-border rounded-lg text-text-primary focus:ring-2 focus:ring-brand-primary/20 focus:outline-none resize-none",placeholder:"Briefly describe this document purpose..."})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.jsx(Ze,{label:"Max File Size (MB)",name:"maxFileSize",type:"number",value:s.maxFileSize,onChange:f,min:"1",max:"50",required:!0})}),i.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[i.jsxs("label",{className:"flex items-center gap-3 p-3 border border-border rounded-lg cursor-pointer hover:bg-bg-hover transition-colors",children:[i.jsx("input",{type:"checkbox",name:"isRequired",checked:s.isRequired,onChange:f,className:"w-4 h-4 text-brand-primary rounded border-gray-300 focus:ring-brand-primary"}),i.jsxs("div",{children:[i.jsx("span",{className:"block text-sm font-medium text-text-primary",children:"Mark as Mandatory"}),i.jsx("span",{className:"block text-xs text-text-secondary",children:"Employees must upload this document"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-3 border border-border rounded-lg cursor-pointer hover:bg-bg-hover transition-colors",children:[i.jsx("input",{type:"checkbox",name:"expiryRequired",checked:s.expiryRequired,onChange:f,className:"w-4 h-4 text-brand-primary rounded border-gray-300 focus:ring-brand-primary"}),i.jsxs("div",{children:[i.jsx("span",{className:"block text-sm font-medium text-text-primary",children:"Requires Expiry Date"}),i.jsx("span",{className:"block text-xs text-text-secondary",children:"User must select expiration date when uploading"})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border mt-6",children:[i.jsx(at,{type:"button",onClick:t,variant:"ghost",className:"text-text-secondary hover:bg-bg-hover",children:"Cancel"}),i.jsx(at,{type:"submit",isLoading:o,children:o?"Saving...":"Save Document Type"})]})]})})},jne=()=>{const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(!1),[o,l]=C.useState(null),[c,d]=C.useState(""),u=async()=>{try{r(!0);const g=await xe.getAllDocumentTypes();g.success&&t(g.data)}catch(g){console.error("Failed to fetch document types:",g)}finally{r(!1)}};C.useEffect(()=>{u()},[]);const f=g=>{l(g),a(!0)},p=async g=>{if(window.confirm("Are you sure you want to delete this document type? This action cannot be undone."))try{await xe.deleteDocumentType(g),u()}catch(x){console.error("Failed to delete document type:",x),alert("Failed to delete document type")}},h=()=>{a(!1),l(null)},m=e.filter(g=>g.name.toLowerCase().includes(c.toLowerCase()));return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Document Management"}),i.jsx("p",{className:"text-text-secondary text-sm",children:"Configure the types of documents employees can upload"})]}),i.jsx(at,{onClick:()=>a(!0),leftIcon:i.jsx(Wr,{size:18}),children:"Add Document Type"})]}),i.jsx("div",{className:"flex gap-4 mb-6",children:i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(bf,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",size:18}),i.jsx("input",{type:"text",placeholder:"Search document types...",value:c,onChange:g=>d(g.target.value),className:"w-full pl-10 pr-4 py-2 bg-bg-card border border-border rounded-lg text-text-primary focus:ring-2 focus:ring-brand-primary/20 focus:outline-none"})]})}),n?i.jsx("div",{className:"flex justify-center py-10",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"})}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.map(g=>i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-5 hover:border-brand-primary/30 transition-all shadow-sm group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("div",{className:"p-2.5 bg-brand-primary/10 text-brand-primary rounded-lg",children:i.jsx(yr,{size:24})}),i.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>f(g),className:"p-1.5 text-text-secondary hover:text-brand-primary hover:bg-bg-hover rounded-lg transition-colors",children:i.jsx(Wv,{size:16})}),i.jsx("button",{onClick:()=>p(g._id),className:"p-1.5 text-text-secondary hover:text-status-error hover:bg-status-error/10 rounded-lg transition-colors",children:i.jsx(br,{size:16})})]})]}),i.jsx("h3",{className:"font-semibold text-text-primary text-lg mb-1",children:g.name}),i.jsx("p",{className:"text-text-secondary text-sm mb-4 line-clamp-2 min-h-[40px]",children:g.description||"No description provided"}),i.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[i.jsx("span",{className:"px-2.5 py-1 bg-bg-main rounded-md text-text-secondary border border-border",children:g.category}),g.isRequired&&i.jsx("span",{className:"px-2.5 py-1 bg-status-error/10 text-status-error rounded-md border border-status-error/20 font-medium",children:"Required"}),g.expiryRequired&&i.jsx("span",{className:"px-2.5 py-1 bg-status-warning/10 text-status-warning rounded-md border border-status-warning/20 font-medium",children:"Expiry Tracking"})]})]},g._id)),m.length===0&&i.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center border-2 border-dashed border-border rounded-xl",children:[i.jsx("div",{className:"bg-bg-main p-4 rounded-full mb-3",children:i.jsx(yr,{size:32,className:"text-text-muted"})}),i.jsx("h3",{className:"text-lg font-medium text-text-primary mb-1",children:"No document types found"}),i.jsx("p",{className:"text-text-secondary max-w-sm mx-auto",children:"Create a new document type to start managing employee documents."})]})]}),s&&i.jsx(Nne,{isOpen:s,onClose:h,onSuccess:u,initialData:o})]})};function Sne(){const e=Fa(),{user:t}=cn();return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Miscellaneous"}),i.jsx("p",{className:"text-text-secondary",children:"Additional tools and features."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(!(t!=null&&t.tenantId)||typeof t.tenantId=="string"||!t.tenantId.limits||t.tenantId.limits.enabledModules.includes("feedback"))&&i.jsxs("div",{onClick:()=>e("/miscellaneous/feedback"),className:"bg-bg-card p-6 rounded-xl border border-border shadow-sm hover:shadow-md transition-shadow cursor-pointer group",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"p-3 bg-brand-primary/10 rounded-lg group-hover:bg-brand-primary/20 transition-colors",children:i.jsx(kL,{className:"text-brand-primary",size:24})}),i.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Feedback"})]}),i.jsx("p",{className:"text-text-secondary text-sm",children:"Send constructive feedback or appreciation to your colleagues."})]}),(!(t!=null&&t.tenantId)||typeof t.tenantId=="string"||!t.tenantId.limits||t.tenantId.limits.enabledModules.includes("appreciation"))&&(!(t!=null&&t.accessibleModules)||t.accessibleModules.includes("appreciation"))&&i.jsxs("div",{onClick:()=>e("/miscellaneous/appreciation"),className:"bg-bg-card p-6 rounded-xl border border-border shadow-sm hover:shadow-md transition-shadow cursor-pointer group",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"p-3 bg-brand-primary/10 rounded-lg group-hover:bg-brand-primary/20 transition-colors",children:i.jsx(id,{className:"text-brand-primary",size:24})}),i.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Appreciation Center"})]}),i.jsx("p",{className:"text-text-secondary text-sm",children:"Recognize and celebrate your colleagues with virtual badges."})]}),((t==null?void 0:t.role)==="HR"||(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.isSuperAdmin))&&(!(t!=null&&t.tenantId)||typeof t.tenantId=="string"||!t.tenantId.limits||t.tenantId.limits.enabledModules.includes("email_automation"))&&i.jsxs("div",{onClick:()=>e("/miscellaneous/email-automation"),className:"bg-bg-card p-6 rounded-xl border border-border shadow-sm hover:shadow-md transition-shadow cursor-pointer group",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"p-3 bg-brand-primary/10 rounded-lg group-hover:bg-brand-primary/20 transition-colors",children:i.jsx(Kh,{className:"text-brand-primary",size:24})}),i.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Email Automation"})]}),i.jsx("p",{className:"text-text-secondary text-sm",children:"Configure automated Birthday and Anniversary emails."})]})]})]})}function kne(){const e=Fa(),{user:t}=cn(),[n,r]=C.useState([]),[s,a]=C.useState([]),[o,l]=C.useState(!0),[c,d]=C.useState(""),[u,f]=C.useState(""),[p,h]=C.useState(!1),[m,g]=C.useState(!1),[x,y]=C.useState("");C.useEffect(()=>{v()},[]);const v=async()=>{try{l(!0);const[j,D]=await Promise.all([xe.getEmployees(),xe.getMyFeedbacks()]),T=j.filter(A=>A.user&&A.user._id!==(t==null?void 0:t.id));r(T),a(D)}catch(j){console.error("Failed to fetch feedback data",j)}finally{l(!1)}},N=async j=>{if(j.preventDefault(),!(!c||!u.trim())){h(!0),y("");try{await xe.createFeedback({recipientId:c,message:u.trim()}),g(!0),f(""),d("")}catch(D){y(D.message||"Failed to send feedback")}finally{h(!1)}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{className:"flex items-center gap-0",children:[i.jsx(at,{variant:"ghost",onClick:()=>e("/miscellaneous"),leftIcon:i.jsx(gc,{size:20}),style:{paddingRight:"0",paddingLeft:"0"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Feedback"}),i.jsx("p",{className:"text-text-secondary",children:"Send constructive feedback or appreciation"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-1 space-y-6",children:i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 shadow-sm sticky top-6",children:[i.jsxs("h2",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[i.jsx(kL,{className:"text-brand-primary",size:20}),"Send Feedback"]}),x&&i.jsx("div",{className:"bg-status-error/10 text-status-error p-3 rounded-lg text-sm mb-4",children:x}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsx("div",{children:i.jsx(Gt,{label:"Recipient",value:c,onChange:j=>d(j),options:n.map(j=>({value:j.user._id,label:`${j.firstName} ${j.lastName}`})),placeholder:"Select a colleague...",required:!0})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Message"}),i.jsx("textarea",{value:u,onChange:j=>f(j.target.value),placeholder:"Write your feedback here...",className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 resize-none h-32",required:!0})]}),i.jsx(at,{type:"submit",className:"w-full",disabled:p||!c||!u.trim(),isLoading:p,leftIcon:i.jsx(Lg,{size:16}),children:"Send Feedback"})]})]})}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"My Feedback History"}),i.jsxs("div",{className:"space-y-4",children:[s.map(j=>i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-4 shadow-sm flex items-start gap-3 animate-in fade-in slide-in-from-bottom-2",children:[i.jsx("div",{className:"flex-shrink-0 bg-brand-primary/5 rounded-full p-2 border border-brand-primary/10",children:i.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:i.jsx(pb,{className:"w-5 h-5 text-brand-primary"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"flex justify-between items-start gap-2",children:i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-text-primary font-medium text-sm",children:[i.jsxs("span",{className:"text-text-secondary",children:["Feedback from"," "]}),i.jsx("span",{className:"font-bold text-brand-primary",children:j.sender.name})]}),i.jsxs("p",{className:"text-xs text-text-muted mt-0.5",children:["Received on"," ",new Date(j.createdAt).toLocaleDateString()]})]})}),i.jsxs("div",{className:"mt-2 bg-bg-main p-3 rounded-lg text-sm text-text-secondary italic border border-border/50 break-words",children:['"',j.message,'"']})]})]},j._id)),s.length===0&&!o&&i.jsxs("div",{className:"text-center py-12 text-text-secondary bg-bg-main rounded-xl border border-border border-dashed",children:[i.jsx(pb,{size:32,className:"mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No feedback received yet."})]}),o&&i.jsx("div",{className:"text-center py-12 text-text-secondary",children:"Loading..."})]})]})]}),i.jsx(ma,{isOpen:m,onClose:()=>g(!1),onConfirm:()=>g(!1),title:"Feedback Sent",message:"Your feedback has been sent successfully!",confirmText:"OK",variant:"success",showCancel:!1})]})}function Cne(){const e=Fa(),{user:t}=cn(),n=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="HR",[r,s]=C.useState([]),[a,o]=C.useState([]),[l,c]=C.useState([]),[d,u]=C.useState(!0),[f,p]=C.useState(""),[h,m]=C.useState(""),[g,x]=C.useState(""),[y,v]=C.useState(!1),[N,j]=C.useState(!1),[D,T]=C.useState(!1),[A,S]=C.useState(""),[E,I]=C.useState(null),[L,O]=C.useState(!1),[F,U]=C.useState(null),[W,X]=C.useState(!1),[P,z]=C.useState(null);C.useEffect(()=>{oe()},[]);const oe=async()=>{try{u(!0);const[Z,ie,he]=await Promise.all([xe.getBadges(),xe.getAppreciations(),xe.getEmployees()]);s(Z),o(ie),c(he.filter(ye=>ye.user&&ye.user._id!==(t==null?void 0:t.id)))}catch(Z){console.error("Failed to fetch appreciation data",Z)}finally{u(!1)}},Y=async Z=>{if(Z.preventDefault(),!(!f||!h))try{v(!0),await xe.createAppreciation({recipientId:f,badgeId:h,message:g}),j(!0),p(""),m(""),x("");const ie=await xe.getAppreciations();o(ie)}catch(ie){console.error("Failed to send appreciation",ie)}finally{v(!1)}},q=async Z=>{if(Z.preventDefault(),!(!A||!E&&!F))try{O(!0);const ie=new FormData;ie.append("title",A),E&&ie.append("icon",E),F?await xe.updateBadge(F,ie):await xe.createBadge(ie);const he=await xe.getBadges();s(he),S(""),I(null),U(null)}catch(ie){console.error("Failed to save badge",ie)}finally{O(!1)}},_=Z=>{U(Z._id),S(Z.title),I(null)},$=()=>{U(null),S(""),I(null)},J=Z=>{z(Z),X(!0)},te=async()=>{if(P)try{await xe.deleteBadge(P),s(r.filter(Z=>Z._id!==P)),X(!1),z(null)}catch(Z){console.error("Failed to delete badge",Z)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-0",children:[i.jsx(at,{variant:"ghost",onClick:()=>e("/miscellaneous"),leftIcon:i.jsx(gc,{size:20}),style:{paddingRight:"0",paddingLeft:"0"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Appreciation Center"}),i.jsx("p",{className:"text-text-secondary",children:"Recognize and celebrate your colleagues"})]})]}),n&&i.jsx(at,{onClick:()=>T(!0),leftIcon:i.jsx(id,{size:18}),children:"Manage Badges"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-1 space-y-6",children:i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 shadow-sm sticky top-6",children:[i.jsxs("h2",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[i.jsx(id,{className:"text-brand-primary",size:20}),"Send Appreciation"]}),i.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[i.jsx("div",{children:i.jsx(Gt,{label:"Recipient",value:f,onChange:Z=>p(Z),options:l.map(Z=>({value:Z.user._id,label:`${Z.firstName} ${Z.lastName}`})),placeholder:"Select a colleague...",required:!0})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Select Badge"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 max-h-48 overflow-y-auto p-1",children:[r.map(Z=>i.jsxs("div",{onClick:()=>m(Z._id),className:`cursor-pointer rounded-lg p-2 border transition-all flex flex-col items-center gap-1 text-center ${h===Z._id?"border-brand-primary bg-brand-primary/5 ring-1 ring-brand-primary":"border-border hover:border-brand-primary/50"}`,children:[i.jsx("img",{src:Z.icon.startsWith("http")?Z.icon:`${xs}${Z.icon}`,alt:Z.title,className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"text-[10px] font-medium truncate w-full",children:Z.title})]},Z._id)),r.length===0&&i.jsx("div",{className:"col-span-3 text-center py-4 text-xs text-text-muted",children:"No badges available."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Message (Optional)"}),i.jsx("textarea",{value:g,onChange:Z=>x(Z.target.value),placeholder:"Why are you appreciating them?",className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 resize-none h-24"})]}),i.jsx(at,{type:"submit",className:"w-full",disabled:y||!f||!h,isLoading:y,children:"Send Appreciation"})]})]})}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Recent Appreciations"}),i.jsxs("div",{className:"space-y-4",children:[a.map(Z=>{var ie;return i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-4 shadow-sm flex items-start gap-3 animate-in fade-in slide-in-from-bottom-2",children:[i.jsx("div",{className:"flex-shrink-0 bg-brand-primary/5 rounded-full p-2 border border-brand-primary/10",children:Z.badge?i.jsx("img",{src:Z.badge.icon.startsWith("http")?Z.badge.icon:`${xs}${Z.badge.icon}`,alt:Z.badge.title,className:"w-8 h-8 object-contain"}):i.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:i.jsx(id,{className:"w-5 h-5 text-text-muted opacity-50"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-text-primary font-medium text-base truncate",children:[i.jsxs("span",{className:"font-bold text-brand-primary",children:[Z.recipient.firstName," ",Z.recipient.lastName]}),i.jsx("span",{className:"text-text-secondary font-normal mx-1",children:"recieved"}),i.jsx("span",{className:"font-semibold text-text-primary",children:((ie=Z.badge)==null?void 0:ie.title)||"Unknown Badge"})]}),i.jsxs("p",{className:"text-sm text-text-secondary mt-0.5 truncate",children:["from ",Z.sender.firstName," ",Z.sender.lastName]})]}),i.jsx("span",{className:"text-xs text-text-muted whitespace-nowrap pt-1",children:new Date(Z.createdAt).toLocaleDateString()})]}),Z.message&&i.jsxs("div",{className:"mt-2 bg-bg-main p-3 rounded-lg text-sm text-text-secondary italic border border-border/50 break-words",children:['"',Z.message,'"']})]})]},Z._id)}),a.length===0&&!d&&i.jsxs("div",{className:"text-center py-12 text-text-secondary bg-bg-main rounded-xl border border-border border-dashed",children:[i.jsx(id,{size:32,className:"mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No appreciations yet. Be the first to recognize someone!"})]}),d&&i.jsx("div",{className:"text-center py-12 text-text-secondary",children:"Loading..."})]})]})]}),i.jsx(Hn,{isOpen:D,onClose:()=>T(!1),title:"Manage Badges",maxWidth:"max-w-2xl",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-border pb-2",children:[i.jsx("h3",{className:"font-semibold text-text-primary",children:F?"Edit Badge":"Add New Badge"}),F&&i.jsxs("button",{onClick:$,className:"text-xs flex items-center gap-1 text-text-secondary hover:text-text-primary",children:[i.jsx(bi,{size:14})," Cancel"]})]}),i.jsxs("form",{onSubmit:q,className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Badge Title"}),i.jsx(Ze,{value:A,onChange:Z=>S(Z.target.value),placeholder:"e.g. Star Performer",className:"bg-bg-input",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Icon (SVG/PNG)"}),i.jsx("div",{className:"flex items-center justify-center w-full",children:i.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-border border-dashed rounded-lg cursor-pointer bg-bg-main hover:bg-bg-hover transition-colors",children:[i.jsx("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:E?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"mb-2 text-sm text-brand-primary font-semibold",children:E.name}),i.jsx("p",{className:"text-xs text-text-muted",children:"Click to change"})]}):i.jsxs(i.Fragment,{children:[i.jsx(yi,{className:"w-8 h-8 mb-3 text-text-muted"}),i.jsx("p",{className:"mb-2 text-sm text-text-secondary",children:i.jsx("span",{className:"font-semibold",children:"Click to upload"})}),i.jsx("p",{className:"text-xs text-text-muted",children:"SVG, PNG (max 5MB)"})]})}),i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Z=>Z.target.files&&I(Z.target.files[0]),required:!F})]})})]}),i.jsx(at,{type:"submit",className:"w-full",disabled:L,isLoading:L,children:F?"Update Badge":"Upload Badge"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-text-primary border-b border-border pb-2",children:"Existing Badges"}),i.jsxs("div",{className:"max-h-[400px] overflow-y-auto space-y-2 pr-1",children:[r.map(Z=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-main rounded-lg border border-border",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:Z.icon.startsWith("http")?Z.icon:`${xs}${Z.icon}`,alt:Z.title,className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"text-sm font-medium text-text-primary",children:Z.title})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>_(Z),className:"p-1.5 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-md transition-colors",title:"Edit",children:i.jsx(Wv,{size:16})}),i.jsx("button",{onClick:()=>J(Z._id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-md transition-colors",title:"Delete",children:i.jsx(br,{size:16})})]})]},Z._id)),r.length===0&&i.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"No badges added yet."})]})]})]})}),i.jsx(ma,{isOpen:W,onClose:()=>{X(!1),z(null)},onConfirm:te,title:"Delete Badge?",message:"Are you sure? This will not remove past appreciations but will prevent new ones.",confirmText:"Yes, Delete",cancelText:"Cancel",variant:"danger"}),i.jsx(ma,{isOpen:N,onClose:()=>j(!1),onConfirm:()=>j(!1),title:"Appreciation Sent!",message:"Your appreciation badge has been successfully delivered to your colleague.",confirmText:"Awesome!",variant:"success",showCancel:!1})]})}var iO={exports:{}},oO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap=C;function Ane(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mne=typeof Object.is=="function"?Object.is:Ane,Dne=ap.useState,Ene=ap.useEffect,_ne=ap.useLayoutEffect,Tne=ap.useDebugValue;function Lne(e,t){var n=t(),r=Dne({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return _ne(function(){s.value=n,s.getSnapshot=t,Iw(s)&&a({inst:s})},[e,n,t]),Ene(function(){return Iw(s)&&a({inst:s}),e(function(){Iw(s)&&a({inst:s})})},[e]),Tne(n),n}function Iw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mne(e,n)}catch{return!0}}function Rne(e,t){return t()}var One=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rne:Lne;oO.useSyncExternalStore=ap.useSyncExternalStore!==void 0?ap.useSyncExternalStore:One;iO.exports=oO;var bk=iO.exports;function Ps(e){this.content=e}Ps.prototype={constructor:Ps,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,s=r.find(e),a=r.content.slice();return s==-1?a.push(n||e,t):(a[s+1]=t,n&&(a[s]=n)),new Ps(a)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Ps(n)},addToStart:function(e,t){return new Ps([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Ps(n)},addBefore:function(e,t,n){var r=this.remove(t),s=r.content.slice(),a=r.find(e);return s.splice(a==-1?s.length:a,0,t,n),new Ps(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Ps.from(e),e.size?new Ps(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Ps.from(e),e.size?new Ps(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Ps.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Ps.from=function(e){if(e instanceof Ps)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Ps(t)};function lO(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let s=e.child(r),a=t.child(r);if(s==a){n+=s.nodeSize;continue}if(!s.sameMarkup(a))return n;if(s.isText&&s.text!=a.text){for(let o=0;s.text[o]==a.text[o];o++)n++;return n}if(s.content.size||a.content.size){let o=lO(s.content,a.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function cO(e,t,n,r){for(let s=e.childCount,a=t.childCount;;){if(s==0||a==0)return s==a?null:{a:n,b:r};let o=e.child(--s),l=t.child(--a),c=o.nodeSize;if(o==l){n-=c,r-=c;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,u=Math.min(o.text.length,l.text.length);for(;d<u&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=cO(o.content,l.content,n-1,r-1);if(d)return d}n-=c,r-=c}}class Ye{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,s=0,a){for(let o=0,l=0;l<n;o++){let c=this.content[o],d=l+c.nodeSize;if(d>t&&r(c,s+l,a||null,o)!==!1&&c.content.size){let u=l+1;c.nodesBetween(Math.max(0,t-u),Math.min(c.content.size,n-u),r,s+u)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,s){let a="",o=!0;return this.nodesBetween(t,n,(l,c)=>{let d=l.isText?l.text.slice(Math.max(t,c)-c,n-c):l.isLeaf?s?typeof s=="function"?s(l):s:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:a+=r),a+=d},0),a}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,s=this.content.slice(),a=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),a=1);a<t.content.length;a++)s.push(t.content[a]);return new Ye(s,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],s=0;if(n>t)for(let a=0,o=0;o<n;a++){let l=this.content[a],c=o+l.nodeSize;c>t&&((o<t||c>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),s+=l.nodeSize),o=c}return new Ye(r,s)}cutByIndex(t,n){return t==n?Ye.empty:t==0&&n==this.content.length?this:new Ye(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let s=this.content.slice(),a=this.size+n.nodeSize-r.nodeSize;return s[t]=n,new Ye(s,a)}addToStart(t){return new Ye([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Ye(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];t(s,r,n),r+=s.nodeSize}}findDiffStart(t,n=0){return lO(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return cO(this,t,n,r)}findIndex(t){if(t==0)return $0(0,t);if(t==this.size)return $0(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),a=r+s.nodeSize;if(a>=t)return a==t?$0(n+1,a):$0(n,r);r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return Ye.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ye(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Ye.empty;let n,r=0;for(let s=0;s<t.length;s++){let a=t[s];r+=a.nodeSize,s&&a.isText&&t[s-1].sameMarkup(a)?(n||(n=t.slice(0,s)),n[n.length-1]=a.withText(n[n.length-1].text+a.text)):n&&n.push(a)}return new Ye(n||t,r)}static from(t){if(!t)return Ye.empty;if(t instanceof Ye)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Ye([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ye.empty=new Ye([],0);const Fw={index:0,offset:0};function $0(e,t){return Fw.index=e,Fw.offset=t,Fw}function Pb(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Pb(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Pb(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Xn=class V5{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let s=0;s<t.length;s++){let a=t[s];if(this.eq(a))return t;if(this.type.excludes(a.type))n||(n=t.slice(0,s));else{if(a.type.excludes(this.type))return t;!r&&a.type.rank>this.type.rank&&(n||(n=t.slice(0,s)),n.push(this),r=!0),n&&n.push(a)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Pb(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return V5.none;if(t instanceof V5)return[t];let n=t.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};Xn.none=[];class Ib extends Error{}class ft{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=uO(this.content,t+this.openStart,n);return r&&new ft(r,this.openStart,this.openEnd)}removeBetween(t,n){return new ft(dO(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return ft.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ft(Ye.fromJSON(t,n.content),r,s)}static maxOpen(t,n=!0){let r=0,s=0;for(let a=t.firstChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.firstChild)r++;for(let a=t.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)s++;return new ft(t,r,s)}}ft.empty=new ft(Ye.empty,0,0);function dO(e,t,n){let{index:r,offset:s}=e.findIndex(t),a=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(s==t||a.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,a.copy(dO(a.content,t-s-1,n-s-1)))}function uO(e,t,n,r){let{index:s,offset:a}=e.findIndex(t),o=e.maybeChild(s);if(a==t||o.isText)return r&&!r.canReplace(s,s,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=uO(o.content,t-a-1,n,o);return l&&e.replaceChild(s,o.copy(l))}function Pne(e,t,n){if(n.openStart>e.depth)throw new Ib("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Ib("Inconsistent open depths");return fO(e,t,n,0)}function fO(e,t,n,r){let s=e.index(r),a=e.node(r);if(s==t.index(r)&&r<e.depth-n.openStart){let o=fO(e,t,n,r+1);return a.copy(a.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return Uu(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=Ine(n,e);return Uu(a,pO(e,o,l,t,r))}else return Uu(a,Fb(e,t,r))}function hO(e,t){if(!t.type.compatibleContent(e.type))throw new Ib("Cannot join "+t.type.name+" onto "+e.type.name)}function Y5(e,t,n){let r=e.node(n);return hO(r,t.node(n)),r}function Hu(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function rg(e,t,n,r){let s=(t||e).node(n),a=0,o=t?t.index(n):s.childCount;e&&(a=e.index(n),e.depth>n?a++:e.textOffset&&(Hu(e.nodeAfter,r),a++));for(let l=a;l<o;l++)Hu(s.child(l),r);t&&t.depth==n&&t.textOffset&&Hu(t.nodeBefore,r)}function Uu(e,t){return e.type.checkContent(t),e.copy(t)}function pO(e,t,n,r,s){let a=e.depth>s&&Y5(e,t,s+1),o=r.depth>s&&Y5(n,r,s+1),l=[];return rg(null,e,s,l),a&&o&&t.index(s)==n.index(s)?(hO(a,o),Hu(Uu(a,pO(e,t,n,r,s+1)),l)):(a&&Hu(Uu(a,Fb(e,t,s+1)),l),rg(t,n,s,l),o&&Hu(Uu(o,Fb(n,r,s+1)),l)),rg(r,null,s,l),new Ye(l)}function Fb(e,t,n){let r=[];if(rg(null,e,n,r),e.depth>n){let s=Y5(e,t,n+1);Hu(Uu(s,Fb(e,t,n+1)),r)}return rg(t,null,n,r),new Ye(r)}function Ine(e,t){let n=t.depth-e.openStart,s=t.node(n).copy(e.content);for(let a=n-1;a>=0;a--)s=t.node(a).copy(Ye.from(s));return{start:s.resolveNoCache(e.openStart+n),end:s.resolveNoCache(s.content.size-e.openEnd-n)}}class Ug{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=t.child(n);return r?t.child(n).cut(r):s}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let a=0;a<t;a++)s+=r.child(a).nodeSize;return s}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Xn.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),s=t.maybeChild(n);if(!r){let l=r;r=s,s=l}let a=r.marks;for(var o=0;o<a.length;o++)a[o].type.spec.inclusive===!1&&(!s||!a[o].isInSet(s.marks))&&(a=a[o--].removeFromSet(a));return a}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=t.parent.maybeChild(t.index());for(var a=0;a<r.length;a++)r[a].type.spec.inclusive===!1&&(!s||!r[a].isInSet(s.marks))&&(r=r[a--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new zb(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,a=n;for(let o=t;;){let{index:l,offset:c}=o.content.findIndex(a),d=a-c;if(r.push(o,l,s+c),!d||(o=o.child(l),o.isText))break;a=d-1,s+=c+1}return new Ug(n,r,a)}static resolveCached(t,n){let r=ND.get(t);if(r)for(let a=0;a<r.elts.length;a++){let o=r.elts[a];if(o.pos==n)return o}else ND.set(t,r=new Fne);let s=r.elts[r.i]=Ug.resolve(t,n);return r.i=(r.i+1)%zne,s}}class Fne{constructor(){this.elts=[],this.i=0}}const zne=12,ND=new WeakMap;class zb{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Bne=Object.create(null);let kd=class W5{constructor(t,n,r,s=Xn.none){this.type=t,this.attrs=n,this.marks=s,this.content=r||Ye.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,s=0){this.content.nodesBetween(t,n,r,s,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,s){return this.content.textBetween(t,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Pb(this.attrs,n||t.defaultAttrs||Bne)&&Xn.sameSet(this.marks,r||Xn.none)}copy(t=null){return t==this.content?this:new W5(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new W5(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return ft.empty;let s=this.resolve(t),a=this.resolve(n),o=r?0:s.sharedDepth(n),l=s.start(o),d=s.node(o).content.cut(s.pos-l,a.pos-l);return new ft(d,s.depth-o,a.depth-o)}replace(t,n,r){return Pne(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(s==t||n.isText)return n;t-=s+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(t){return Ug.resolveCached(this,t)}resolveNoCache(t){return Ug.resolve(this,t)}rangeHasMark(t,n,r){let s=!1;return n>t&&this.nodesBetween(t,n,a=>(r.isInSet(a.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),mO(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=Ye.empty,s=0,a=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,s,a),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let c=s;c<a;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(t,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let a=this.contentMatchAt(t).matchType(r),o=a&&a.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Xn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Xn.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let s=Ye.fromJSON(t,n.content),a=t.nodeType(n.type).create(n.attrs,s,r);return a.type.checkAttrs(a.attrs),a}};kd.prototype.text=void 0;class Bb extends kd{constructor(t,n,r,s){if(super(t,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):mO(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Bb(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Bb(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function mO(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class af{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new Hne(t,n);if(r.next==null)return af.empty;let s=gO(r);r.next&&r.err("Unexpected trailing text");let a=Gne(Wne(s));return Kne(a,r),a}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let s=this;for(let a=n;s&&a<r;a++)s=s.matchType(t.child(a).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let s=[this];function a(o,l){let c=o.matchFragment(t,r);if(c&&(!n||c.validEnd))return Ye.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:u,next:f}=o.next[d];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(f)==-1){s.push(f);let p=a(f,l.concat(u));if(p)return p}}return null}return a(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),a=s.match;if(a.matchType(t)){let o=[];for(let l=s;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<a.next.length;o++){let{type:l,next:c}=a.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!s.type||c.validEnd)&&(r.push({match:l.contentMatch,type:l,via:s}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let s=0;s<r.next.length;s++)t.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),t.map((r,s)=>{let a=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)a+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return a}).join(`
`)}}af.empty=new af(!0);class Hne{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function gO(e){let t=[];do t.push(Une(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function Une(e){let t=[];do t.push($ne(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function $ne(e){let t=Yne(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=qne(e,t);else break;return t}function jD(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function qne(e,t){let n=jD(e),r=n;return e.eat(",")&&(e.next!="}"?r=jD(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Vne(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let s=[];for(let a in n){let o=n[a];o.isInGroup(t)&&s.push(o)}return s.length==0&&e.err("No node type or group '"+t+"' found"),s}function Yne(e){if(e.eat("(")){let t=gO(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=Vne(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function Wne(e){let t=[[]];return s(a(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,c){let d={term:c,to:l};return t[o].push(d),d}function s(o,l){o.forEach(c=>c.to=l)}function a(o,l){if(o.type=="choice")return o.exprs.reduce((c,d)=>c.concat(a(d,l)),[]);if(o.type=="seq")for(let c=0;;c++){let d=a(o.exprs[c],l);if(c==o.exprs.length-1)return d;s(d,l=n())}else if(o.type=="star"){let c=n();return r(l,c),s(a(o.expr,c),c),[r(c)]}else if(o.type=="plus"){let c=n();return s(a(o.expr,l),c),s(a(o.expr,c),c),[r(c)]}else{if(o.type=="opt")return[r(l)].concat(a(o.expr,l));if(o.type=="range"){let c=l;for(let d=0;d<o.min;d++){let u=n();s(a(o.expr,c),u),c=u}if(o.max==-1)s(a(o.expr,c),c);else for(let d=o.min;d<o.max;d++){let u=n();r(c,u),s(a(o.expr,c),u),c=u}return[r(c)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function xO(e,t){return t-e}function SD(e,t){let n=[];return r(t),n.sort(xO);function r(s){let a=e[s];if(a.length==1&&!a[0].term)return r(a[0].to);n.push(s);for(let o=0;o<a.length;o++){let{term:l,to:c}=a[o];!l&&n.indexOf(c)==-1&&r(c)}}}function Gne(e){let t=Object.create(null);return n(SD(e,0));function n(r){let s=[];r.forEach(o=>{e[o].forEach(({term:l,to:c})=>{if(!l)return;let d;for(let u=0;u<s.length;u++)s[u][0]==l&&(d=s[u][1]);SD(e,c).forEach(u=>{d||s.push([l,d=[]]),d.indexOf(u)==-1&&d.push(u)})})});let a=t[r.join(",")]=new af(r.indexOf(e.length-1)>-1);for(let o=0;o<s.length;o++){let l=s[o][1].sort(xO);a.next.push({type:s[o][0],next:t[l.join(",")]||n(l)})}return a}}function Kne(e,t){for(let n=0,r=[e];n<r.length;n++){let s=r[n],a=!s.validEnd,o=[];for(let l=0;l<s.next.length;l++){let{type:c,next:d}=s.next[l];o.push(c.name),a&&!(c.isText||c.hasRequiredAttrs())&&(a=!1),r.indexOf(d)==-1&&r.push(d)}a&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function yO(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function bO(e,t){let n=Object.create(null);for(let r in e){let s=t&&t[r];if(s===void 0){let a=e[r];if(a.hasDefault)s=a.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function vO(e,t,n,r){for(let s in t)if(!(s in e))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in e){let a=e[s];a.validate&&a.validate(t[s])}}function wO(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new Xne(e,r,t[r]);return n}let kD=class NO{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=wO(t,r.attrs),this.defaultAttrs=yO(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==af.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:bO(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new kd(this,this.computeAttrs(t),Ye.from(n),Xn.setFrom(r))}createChecked(t=null,n,r){return n=Ye.from(n),this.checkContent(n),new kd(this,this.computeAttrs(t),n,Xn.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=Ye.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),a=s&&s.fillBefore(Ye.empty,!0);return a?new kd(this,t,n.append(a),Xn.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){vO(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Xn.none:t}static compile(t,n){let r=Object.create(null);t.forEach((a,o)=>r[a]=new NO(a,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let a in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Jne(e,t,n){let r=n.split("|");return s=>{let a=s===null?"null":typeof s;if(r.indexOf(a)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${a}`)}}class Xne{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Jne(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class d1{constructor(t,n,r,s){this.name=t,this.rank=n,this.schema=r,this.spec=s,this.attrs=wO(t,s.attrs),this.excluded=null;let a=yO(this.attrs);this.instance=a?new Xn(this,a):null}create(t=null){return!t&&this.instance?this.instance:new Xn(this,bO(this.attrs,t))}static compile(t,n){let r=Object.create(null),s=0;return t.forEach((a,o)=>r[a]=new d1(a,s++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){vO(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class jO{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in t)n[s]=t[s];n.nodes=Ps.from(t.nodes),n.marks=Ps.from(t.marks||{}),this.nodes=kD.compile(this.spec.nodes,this),this.marks=d1.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let a=this.nodes[s],o=a.spec.content||"",l=a.spec.marks;if(a.contentMatch=r[o]||(r[o]=af.parse(o,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=l=="_"?null:l?CD(this,l.split(" ")):l==""||!a.inlineContent?[]:null}for(let s in this.marks){let a=this.marks[s],o=a.spec.excludes;a.excluded=o==null?[a]:o==""?[]:CD(this,o.split(" "))}this.nodeFromJSON=s=>kd.fromJSON(this,s),this.markFromJSON=s=>Xn.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,s){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof kD){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,s)}text(t,n){let r=this.nodes.text;return new Bb(r,r.defaultAttrs,t,Xn.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function CD(e,t){let n=[];for(let r=0;r<t.length;r++){let s=t[r],a=e.marks[s],o=a;if(a)n.push(a);else for(let l in e.marks){let c=e.marks[l];(s=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function Qne(e){return e.tag!=null}function Zne(e){return e.style!=null}class Cd{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(Qne(s))this.tags.push(s);else if(Zne(s)){let a=/[^=]*/.exec(s.style)[0];r.indexOf(a)<0&&r.push(a),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let a=t.nodes[s.node];return a.contentMatch.matchType(a)})}parse(t,n={}){let r=new MD(this,n,!1);return r.addAll(t,Xn.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new MD(this,n,!0);return r.addAll(t,Xn.none,n.from,n.to),ft.maxOpen(r.finish())}matchTag(t,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let a=this.tags[s];if(nre(t,a.tag)&&(a.namespace===void 0||t.namespaceURI==a.namespace)&&(!a.context||n.matchesContext(a.context))){if(a.getAttrs){let o=a.getAttrs(t);if(o===!1)continue;a.attrs=o||void 0}return a}}}matchStyle(t,n,r,s){for(let a=s?this.styles.indexOf(s)+1:0;a<this.styles.length;a++){let o=this.styles[a],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let c=o.getAttrs(n);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(t){let n=[];function r(s){let a=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<a)break}n.splice(o,0,s)}for(let s in t.marks){let a=t.marks[s].spec.parseDOM;a&&a.forEach(o=>{r(o=DD(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in t.nodes){let a=t.nodes[s].spec.parseDOM;a&&a.forEach(o=>{r(o=DD(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Cd(t,Cd.schemaRules(t)))}}const SO={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ere={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},kO={ol:!0,ul:!0},$g=1,G5=2,sg=4;function AD(e,t,n){return t!=null?(t?$g:0)|(t==="full"?G5:0):e&&e.whitespace=="pre"?$g|G5:n&~sg}class q0{constructor(t,n,r,s,a,o){this.type=t,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=Xn.none,this.match=a||(o&sg?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ye.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(t.type))?(this.match=r,s):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&$g)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let a=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-s[0].length))}}let n=Ye.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(Ye.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!SO.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class MD{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,a,o=AD(null,n.preserveWhitespace,0)|(r?sg:0);s?a=new q0(s.type,s.attrs,Xn.none,!0,n.topMatch||s.type.contentMatch,o):r?a=new q0(null,null,Xn.none,!0,null,o):a=new q0(t.schema.topNodeType,null,Xn.none,!0,null,o),this.nodes=[a],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,s=this.top,a=s.options&G5?"full":this.localPreserveWS||(s.options&$g)>0,{schema:o}=this.parser;if(a==="full"||s.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(a)if(a==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let l=r.split(/\r?\n|\r/);for(let c=0;c<l.length;c++)c&&this.insertNode(o.linebreakReplacement.create(),n,!0),l[c]&&this.insertNode(o.text(l[c]),n,!/\S/.test(l[c]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=s.content[s.content.length-1],c=t.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let s=this.localPreserveWS,a=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;kO.hasOwnProperty(o)&&this.parser.normalizeLists&&tre(t);let c=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(c?c.ignore:ere.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(t=c.skip);let d,u=this.needsBlock;if(SO.hasOwnProperty(o))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),d=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let f=c&&c.skip?n:this.readStyles(t,n);f&&this.addAll(t,f),d&&this.sync(a),this.needsBlock=u}else{let d=this.readStyles(t,n);d&&this.addElementByRule(t,c,d,c.consuming===!1?l:void 0)}this.localPreserveWS=s}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let a=this.parser.matchedStyles[s],o=r.getPropertyValue(a);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(a,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(d=>!c.clearMark(d)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return n}addElementByRule(t,n,r,s){let a,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let c=this.enter(o,n.attrs||null,r,n.preserveWhitespace);c&&(a=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(s)this.addElement(t,r,s);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=t;typeof n.contentElement=="string"?c=t.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(t):n.contentElement&&(c=n.contentElement),this.findAround(t,c,!0),this.addAll(c,r),this.findAround(t,c,!1)}a&&this.sync(l)&&this.open--}addAll(t,n,r,s){let a=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=s==null?null:t.childNodes[s];o!=l;o=o.nextSibling,++a)this.findAtPoint(t,a),this.addDOM(o,n);this.findAtPoint(t,a)}findPlace(t,n,r){let s,a;for(let o=this.open,l=0;o>=0;o--){let c=this.nodes[o],d=c.findWrapping(t);if(d&&(!s||s.length>d.length+l)&&(s=d,a=c,!d.length))break;if(c.solid){if(r)break;l+=2}}if(!s)return null;this.sync(a);for(let o=0;o<s.length;o++)n=this.enterInner(s[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(n=this.enterInner(a,null,n))}let s=this.findPlace(t,n,r);if(s){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(t.type));let o=Xn.none;for(let l of s.concat(t.marks))(a.type?a.type.allowsMarkType(l.type):ED(l.type,t.type))&&(o=l.addToSet(o));return a.content.push(t.mark(o)),!0}return!1}enter(t,n,r,s){let a=this.findPlace(t.create(n),r,!1);return a&&(a=this.enterInner(t,n,r,!0,s)),a}enterInner(t,n,r,s=!1,a){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=AD(t,a,o.options);o.options&sg&&o.content.length==0&&(l|=sg);let c=Xn.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):ED(d.type,t))?(c=d.addToSet(c),!1):!0),this.nodes.push(new q0(t,n,c,s,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=$g)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)t+=r[s].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&t.nodeType==1&&t.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(s?0:1),o=(l,c)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;c>=a;c--)if(o(l-1,c))return!0;return!1}else{let u=c>0||c==0&&s?this.nodes[c].type:r&&c>=a?r.node(c-a).type:null;if(!u||u.name!=d&&!u.isInGroup(d))return!1;c--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function tre(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&kO.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function nre(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function DD(e){let t={};for(let n in e)t[n]=e[n];return t}function ED(e,t){let n=t.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(e))continue;let a=[],o=l=>{a.push(l);for(let c=0;c<l.edgeCount;c++){let{type:d,next:u}=l.edge(c);if(d==t||a.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}class jf{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=zw(n).createDocumentFragment());let s=r,a=[];return t.forEach(o=>{if(a.length||o.marks.length){let l=0,c=0;for(;l<a.length&&c<o.marks.length;){let d=o.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(a[l][0])||d.type.spec.spanning===!1)break;l++,c++}for(;l<a.length;)s=a.pop()[1];for(;c<o.marks.length;){let d=o.marks[c++],u=this.serializeMark(d,o.isInline,n);u&&(a.push([d,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:s}=Ey(zw(n),this.nodes[t.type.name](t),null,t.attrs);if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,s)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let s=t.marks.length-1;s>=0;s--){let a=this.serializeMark(t.marks[s],t.isInline,n);a&&((a.contentDOM||a.dom).appendChild(r),r=a.dom)}return r}serializeMark(t,n,r={}){let s=this.marks[t.type.name];return s&&Ey(zw(r),s(t,n),null,t.attrs)}static renderSpec(t,n,r=null,s){return Ey(t,n,r,s)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new jf(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=_D(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return _D(t.marks)}}function _D(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function zw(e){return e.document||window.document}const TD=new WeakMap;function rre(e){let t=TD.get(e);return t===void 0&&TD.set(e,t=sre(e)),t}function sre(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(e),t}function Ey(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let s=t[0],a;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(a=rre(r))&&a.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let l,c=n?e.createElementNS(n,s):e.createElement(s),d=t[1],u=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){u=2;for(let f in d)if(d[f]!=null){let p=f.indexOf(" ");p>0?c.setAttributeNS(f.slice(0,p),f.slice(p+1),d[f]):f=="style"&&c.style?c.style.cssText=d[f]:c.setAttribute(f,d[f])}}for(let f=u;f<t.length;f++){let p=t[f];if(p===0){if(f<t.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:h,contentDOM:m}=Ey(e,p,n,r);if(c.appendChild(h),m){if(l)throw new RangeError("Multiple content holes");l=m}}}return{dom:c,contentDOM:l}}const CO=65535,AO=Math.pow(2,16);function are(e,t){return e+t*AO}function LD(e){return e&CO}function ire(e){return(e-(e&CO))/AO}const MO=1,DO=2,_y=4,EO=8;class K5{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&EO)>0}get deletedBefore(){return(this.delInfo&(MO|_y))>0}get deletedAfter(){return(this.delInfo&(DO|_y))>0}get deletedAcross(){return(this.delInfo&_y)>0}}class ii{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&ii.empty)return ii.empty}recover(t){let n=0,r=LD(t);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+ire(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let s=0,a=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?s:0);if(c>t)break;let d=this.ranges[l+a],u=this.ranges[l+o],f=c+d;if(t<=f){let p=d?t==c?-1:t==f?1:n:n,h=c+s+(p<0?0:u);if(r)return h;let m=t==(n<0?c:f)?null:are(l/3,t-c),g=t==c?DO:t==f?MO:_y;return(n<0?t!=c:t!=f)&&(g|=EO),new K5(h,g,m)}s+=u-d}return r?t+s:new K5(t+s,0,null)}touches(t,n){let r=0,s=LD(n),a=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>t)break;let d=this.ranges[l+a],u=c+d;if(t<=u&&l==s*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,a=0;s<this.ranges.length;s+=3){let o=this.ranges[s],l=o-(this.inverted?a:0),c=o+(this.inverted?0:a),d=this.ranges[s+n],u=this.ranges[s+r];t(l,l+d,c,c+u),a+=u-d}}invert(){return new ii(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?ii.empty:new ii(t<0?[0,-t,0]:[0,0,t])}}ii.empty=new ii([]);class qg{constructor(t,n,r=0,s=t?t.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new qg(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let s=t.getMirror(n);this.appendMap(t._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let s=t.getMirror(n);this.appendMap(t._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let t=new qg;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let s=0;for(let a=this.from;a<this.to;a++){let o=this._maps[a],l=o.mapResult(t,n);if(l.recover!=null){let c=this.getMirror(a);if(c!=null&&c>a&&c<this.to){a=c,t=this._maps[c].recover(l.recover);continue}}s|=l.delInfo,t=l.pos}return r?t:new K5(t,s,null)}}const Bw=Object.create(null);class na{getMap(){return ii.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Bw[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Bw)throw new RangeError("Duplicate use of step JSON ID "+t);return Bw[t]=n,n.prototype.jsonID=t,n}}class rs{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new rs(t,null)}static fail(t){return new rs(null,t)}static fromReplace(t,n,r,s){try{return rs.ok(t.replace(n,r,s))}catch(a){if(a instanceof Ib)return rs.fail(a.message);throw a}}}function vk(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let a=e.child(s);a.content.size&&(a=a.copy(vk(a.content,t,a))),a.isInline&&(a=t(a,n,s)),r.push(a)}return Ye.fromArray(r)}class dd extends na{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),s=r.node(r.sharedDepth(this.to)),a=new ft(vk(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return rs.fromReplace(t,this.from,this.to,a)}invert(){return new co(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new dd(n.pos,r.pos,this.mark)}merge(t){return t instanceof dd&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new dd(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new dd(n.from,n.to,t.markFromJSON(n.mark))}}na.jsonID("addMark",dd);class co extends na{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new ft(vk(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),t),n.openStart,n.openEnd);return rs.fromReplace(t,this.from,this.to,r)}invert(){return new dd(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new co(n.pos,r.pos,this.mark)}merge(t){return t instanceof co&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new co(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new co(n.from,n.to,t.markFromJSON(n.mark))}}na.jsonID("removeMark",co);class ud extends na{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return rs.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return rs.fromReplace(t,this.pos,this.pos+1,new ft(Ye.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new ud(this.pos,n.marks[s]);return new ud(this.pos,this.mark)}}return new of(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ud(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ud(n.pos,t.markFromJSON(n.mark))}}na.jsonID("addNodeMark",ud);class of extends na{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return rs.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return rs.fromReplace(t,this.pos,this.pos+1,new ft(Ye.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ud(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new of(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new of(n.pos,t.markFromJSON(n.mark))}}na.jsonID("removeNodeMark",of);class ks extends na{constructor(t,n,r,s=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=s}apply(t){return this.structure&&J5(t,this.from,this.to)?rs.fail("Structure replace would overwrite content"):rs.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new ii([this.from,this.to-this.from,this.slice.size])}invert(t){return new ks(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ks(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof ks)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?ft.empty:new ft(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new ks(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?ft.empty:new ft(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new ks(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ks(n.from,n.to,ft.fromJSON(t,n.slice),!!n.structure)}}na.jsonID("replace",ks);class Ms extends na{constructor(t,n,r,s,a,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=a,this.insert=o,this.structure=l}apply(t){if(this.structure&&(J5(t,this.from,this.gapFrom)||J5(t,this.gapTo,this.to)))return rs.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return rs.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?rs.fromReplace(t,this.from,this.to,r):rs.fail("Content does not fit in gap")}getMap(){return new ii([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Ms(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),a=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||a>r.pos?null:new Ms(n.pos,r.pos,s,a,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ms(n.from,n.to,n.gapFrom,n.gapTo,ft.fromJSON(t,n.slice),n.insert,!!n.structure)}}na.jsonID("replaceAround",Ms);function J5(e,t,n){let r=e.resolve(t),s=n-t,a=r.depth;for(;s>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,s--;if(s>0){let o=r.node(a).maybeChild(r.indexAfter(a));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function ore(e,t,n,r){let s=[],a=[],o,l;e.doc.nodesBetween(t,n,(c,d,u)=>{if(!c.isInline)return;let f=c.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let p=Math.max(d,t),h=Math.min(d+c.nodeSize,n),m=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(m)||(o&&o.to==p&&o.mark.eq(f[g])?o.to=h:s.push(o=new co(p,h,f[g])));l&&l.to==p?l.to=h:a.push(l=new dd(p,h,r))}}),s.forEach(c=>e.step(c)),a.forEach(c=>e.step(c))}function lre(e,t,n,r){let s=[],a=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;a++;let c=null;if(r instanceof d1){let d=o.marks,u;for(;u=r.isInSet(d);)(c||(c=[])).push(u),d=u.removeFromSet(d)}else r?r.isInSet(o.marks)&&(c=[r]):c=o.marks;if(c&&c.length){let d=Math.min(l+o.nodeSize,n);for(let u=0;u<c.length;u++){let f=c[u],p;for(let h=0;h<s.length;h++){let m=s[h];m.step==a-1&&f.eq(s[h].style)&&(p=m)}p?(p.to=d,p.step=a):s.push({style:f,from:Math.max(l,t),to:d,step:a})}}}),s.forEach(o=>e.step(new co(o.from,o.to,o.style)))}function wk(e,t,n,r=n.contentMatch,s=!0){let a=e.doc.nodeAt(t),o=[],l=t+1;for(let c=0;c<a.childCount;c++){let d=a.child(c),u=l+d.nodeSize,f=r.matchType(d.type);if(!f)o.push(new ks(l,u,ft.empty));else{r=f;for(let p=0;p<d.marks.length;p++)n.allowsMarkType(d.marks[p].type)||e.step(new co(l,u,d.marks[p]));if(s&&d.isText&&n.whitespace!="pre"){let p,h=/\r?\n|\r/g,m;for(;p=h.exec(d.text);)m||(m=new ft(Ye.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new ks(l+p.index,l+p.index+p[0].length,m))}}l=u}if(!r.validEnd){let c=r.fillBefore(Ye.empty,!0);e.replace(l,l,new ft(c,0,0))}for(let c=o.length-1;c>=0;c--)e.step(o[c])}function cre(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Ep(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,s=0,a=0;;--r){let o=e.$from.node(r),l=e.$from.index(r)+s,c=e.$to.indexAfter(r)-a;if(r<e.depth&&o.canReplace(l,c,n))return r;if(r==0||o.type.spec.isolating||!cre(o,l,c))break;l&&(s=1),c<o.childCount&&(a=1)}return null}function dre(e,t,n){let{$from:r,$to:s,depth:a}=t,o=r.before(a+1),l=s.after(a+1),c=o,d=l,u=Ye.empty,f=0;for(let m=a,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,u=Ye.from(r.node(m).copy(u)),f++):c--;let p=Ye.empty,h=0;for(let m=a,g=!1;m>n;m--)g||s.after(m+1)<s.end(m)?(g=!0,p=Ye.from(s.node(m).copy(p)),h++):d++;e.step(new Ms(c,d,o,l,new ft(u.append(p),f,h),u.size-f,!0))}function Nk(e,t,n=null,r=e){let s=ure(e,t),a=s&&fre(r,t);return a?s.map(RD).concat({type:t,attrs:n}).concat(a.map(RD)):null}function RD(e){return{type:e,attrs:null}}function ure(e,t){let{parent:n,startIndex:r,endIndex:s}=e,a=n.contentMatchAt(r).findWrapping(t);if(!a)return null;let o=a.length?a[0]:t;return n.canReplaceWith(r,s,o)?a:null}function fre(e,t){let{parent:n,startIndex:r,endIndex:s}=e,a=n.child(r),o=t.contentMatch.findWrapping(a.type);if(!o)return null;let c=(o.length?o[o.length-1]:t).contentMatch;for(let d=r;c&&d<s;d++)c=c.matchType(n.child(d).type);return!c||!c.validEnd?null:o}function hre(e,t,n){let r=Ye.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ye.from(n[o].type.create(n[o].attrs,r))}let s=t.start,a=t.end;e.step(new Ms(s,a,s,a,new ft(r,0,0),n.length,!0))}function pre(e,t,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let c=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,c)&&mre(e.doc,e.mapping.slice(a).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?d=!1:!h&&m&&(d=!0)}d===!1&&TO(e,o,l,a),wk(e,e.mapping.slice(a).map(l,1),r,void 0,d===null);let u=e.mapping.slice(a),f=u.map(l,1),p=u.map(l+o.nodeSize,1);return e.step(new Ms(f,p,f+1,p-1,new ft(Ye.from(r.create(c,null,o.marks)),0,0),1,!0)),d===!0&&_O(e,o,l,a),!1}})}function _O(e,t,n,r){t.forEach((s,a)=>{if(s.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(s.text);){let c=e.mapping.slice(r).map(n+1+a+o.index);e.replaceWith(c,c+1,t.type.schema.linebreakReplacement.create())}}})}function TO(e,t,n,r){t.forEach((s,a)=>{if(s.type==s.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+a);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function mre(e,t,n){let r=e.resolve(t),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function gre(e,t,n,r,s){let a=e.doc.nodeAt(t);if(!a)throw new RangeError("No node at given position");n||(n=a.type);let o=n.create(r,null,s||a.marks);if(a.isLeaf)return e.replaceWith(t,t+a.nodeSize,o);if(!n.validContent(a.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Ms(t,t+a.nodeSize,t+1,t+a.nodeSize-1,new ft(Ye.from(o),0,0),1,!0))}function nc(e,t,n=1,r){let s=e.resolve(t),a=s.depth-n,o=r&&r[r.length-1]||s.parent;if(a<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let d=s.depth-1,u=n-2;d>a;d--,u--){let f=s.node(d),p=s.index(d);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(p,f.childCount),m=r&&r[u+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[u]||f;if(!f.canReplace(p+1,f.childCount)||!g.type.validContent(h))return!1}let l=s.indexAfter(a),c=r&&r[0];return s.node(a).canReplaceWith(l,l,c?c.type:s.node(a+1).type)}function xre(e,t,n=1,r){let s=e.doc.resolve(t),a=Ye.empty,o=Ye.empty;for(let l=s.depth,c=s.depth-n,d=n-1;l>c;l--,d--){a=Ye.from(s.node(l).copy(a));let u=r&&r[d];o=Ye.from(u?u.type.create(u.attrs,o):s.node(l).copy(o))}e.step(new ks(t,t,new ft(a.append(o),n,n),!0))}function qd(e,t){let n=e.resolve(t),r=n.index();return LO(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function yre(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let s=0;s<t.childCount;s++){let a=t.child(s),o=a.type==r?e.type.schema.nodes.text:a.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(a.marks))return!1}return n.validEnd}function LO(e,t){return!!(e&&t&&!e.isLeaf&&yre(e,t))}function u1(e,t,n=-1){let r=e.resolve(t);for(let s=r.depth;;s--){let a,o,l=r.index(s);if(s==r.depth?(a=r.nodeBefore,o=r.nodeAfter):n>0?(a=r.node(s+1),l++,o=r.node(s).maybeChild(l)):(a=r.node(s).maybeChild(l-1),o=r.node(s+1)),a&&!a.isTextblock&&LO(a,o)&&r.node(s).canReplace(l,l+1))return t;if(s==0)break;t=n<0?r.before(s):r.after(s)}}function bre(e,t,n){let r=null,{linebreakReplacement:s}=e.doc.type.schema,a=e.doc.resolve(t-n),o=a.node().type;if(s&&o.inlineContent){let u=o.whitespace=="pre",f=!!o.contentMatch.matchType(s);u&&!f?r=!1:!u&&f&&(r=!0)}let l=e.steps.length;if(r===!1){let u=e.doc.resolve(t+n);TO(e,u.node(),u.before(),l)}o.inlineContent&&wk(e,t+n-1,o,a.node().contentMatchAt(a.index()),r==null);let c=e.mapping.slice(l),d=c.map(t-n);if(e.step(new ks(d,c.map(t+n,-1),ft.empty,!0)),r===!0){let u=e.doc.resolve(d);_O(e,u.node(),u.before(),e.steps.length)}return e}function vre(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let a=r.index(s);if(r.node(s).canReplaceWith(a,a,n))return r.before(s+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}return null}function RO(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let s=n.content;for(let a=0;a<n.openStart;a++)s=s.firstChild.content;for(let a=1;a<=(n.openStart==0&&n.size?2:1);a++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,c=r.index(o)+(l>0?1:0),d=r.node(o),u=!1;if(a==1)u=d.canReplace(c,c,s);else{let f=d.contentMatchAt(c).findWrapping(s.firstChild.type);u=f&&d.canReplaceWith(c,c,f[0])}if(u)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function f1(e,t,n=t,r=ft.empty){if(t==n&&!r.size)return null;let s=e.resolve(t),a=e.resolve(n);return OO(s,a,r)?new ks(t,n,r):new wre(s,a,r).fit()}function OO(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class wre{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ye.empty;for(let s=0;s<=t.depth;s++){let a=t.node(s);this.frontier.push({type:a.type,match:a.contentMatchAt(t.indexAfter(s))})}for(let s=t.depth;s>0;s--)this.placed=Ye.from(t.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(t<0?this.$to:r.doc.resolve(t));if(!s)return null;let a=this.placed,o=r.depth,l=s.depth;for(;o&&l&&a.childCount==1;)a=a.firstChild.content,o--,l--;let c=new ft(a,o,l);return t>-1?new Ms(r.pos,t,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new ks(r.pos,s.pos,c):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<t;r++){let a=n.firstChild;if(n.childCount>1&&(s=0),a.type.spec.isolating&&s<=r){t=r;break}n=a.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let s,a=null;r?(a=Hw(this.unplaced.content,r-1).firstChild,s=a.content):s=this.unplaced.content;let o=s.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:d}=this.frontier[l],u,f=null;if(n==1&&(o?d.matchType(o.type)||(f=d.fillBefore(Ye.from(o),!1)):a&&c.compatibleContent(a.type)))return{sliceDepth:r,frontierDepth:l,parent:a,inject:f};if(n==2&&o&&(u=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:a,wrap:u};if(a&&d.matchType(a.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=Hw(t,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new ft(t,n+1,Math.max(r,s.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=Hw(t,n);if(s.childCount<=1&&n>0){let a=t.size-n<=n+s.size;this.unplaced=new ft(Lm(t,n-1,1),n-1,a?n-1:r)}else this.unplaced=new ft(Lm(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:s,wrap:a}){for(;this.depth>n;)this.closeFrontierNode();if(a)for(let g=0;g<a.length;g++)this.openFrontierNode(a[g]);let o=this.unplaced,l=r?r.content:o.content,c=o.openStart-t,d=0,u=[],{match:f,type:p}=this.frontier[n];if(s){for(let g=0;g<s.childCount;g++)u.push(s.child(g));f=f.matchFragment(s)}let h=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let g=l.child(d),x=f.matchType(g.type);if(!x)break;d++,(d>1||c==0||g.content.size)&&(f=x,u.push(PO(g.mark(p.allowedMarks(g.marks)),d==1?c:0,d==l.childCount?h:-1)))}let m=d==l.childCount;m||(h=-1),this.placed=Rm(this.placed,n,Ye.from(u)),this.frontier[n].match=f,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,x=l;g<h;g++){let y=x.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),x=y.content}this.unplaced=m?t==0?ft.empty:new ft(Lm(o.content,t-1,1),t-1,h<0?o.openEnd:t-1):new ft(Lm(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Uw(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],a=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=Uw(t,n,s,r,a);if(o){for(let l=n-1;l>=0;l--){let{match:c,type:d}=this.frontier[l],u=Uw(t,l,d,c,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:a?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Rm(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let s=t.node(r),a=s.type.contentMatch.fillBefore(s.content,!0,t.index(r));this.openFrontierNode(s.type,s.attrs,a)}return t}openFrontierNode(t,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(t),this.placed=Rm(this.placed,this.depth,Ye.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ye.empty,!0);n.childCount&&(this.placed=Rm(this.placed,this.frontier.length,n))}}function Lm(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Lm(e.firstChild.content,t-1,n)))}function Rm(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Rm(e.lastChild.content,t-1,n)))}function Hw(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function PO(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,PO(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Ye.empty,!0)))),e.copy(r)}function Uw(e,t,n,r,s){let a=e.node(t),o=s?e.indexAfter(t):e.index(t);if(o==a.childCount&&!n.compatibleContent(a.type))return null;let l=r.fillBefore(a.content,!0,o);return l&&!Nre(n,a.content,o)?l:null}function Nre(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function jre(e){return e.spec.defining||e.spec.definingForContent}function Sre(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let s=e.doc.resolve(t),a=e.doc.resolve(n);if(OO(s,a,r))return e.step(new ks(t,n,r));let o=FO(s,a);o[o.length-1]==0&&o.pop();let l=-(s.depth+1);o.unshift(l);for(let p=s.depth,h=s.pos-1;p>0;p--,h--){let m=s.node(p).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(p)>-1?l=p:s.before(p)==h&&o.splice(1,0,-p)}let c=o.indexOf(l),d=[],u=r.openStart;for(let p=r.content,h=0;;h++){let m=p.firstChild;if(d.push(m),h==r.openStart)break;p=m.content}for(let p=u-1;p>=0;p--){let h=d[p],m=jre(h.type);if(m&&!h.sameMarkup(s.node(Math.abs(l)-1)))u=p;else if(m||!h.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let h=(p+u+1)%(r.openStart+1),m=d[h];if(m)for(let g=0;g<o.length;g++){let x=o[(g+c)%o.length],y=!0;x<0&&(y=!1,x=-x);let v=s.node(x-1),N=s.index(x-1);if(v.canReplaceWith(N,N,m.type,m.marks))return e.replace(s.before(x),y?a.after(x):n,new ft(IO(r.content,0,r.openStart,h),h,r.openEnd))}}let f=e.steps.length;for(let p=o.length-1;p>=0&&(e.replace(t,n,r),!(e.steps.length>f));p--){let h=o[p];h<0||(t=s.before(h),n=a.after(h))}}function IO(e,t,n,r,s){if(t<n){let a=e.firstChild;e=e.replaceChild(0,a.copy(IO(a.content,t+1,n,r,a)))}if(t>r){let a=s.contentMatchAt(0),o=a.fillBefore(e).append(e);e=o.append(a.matchFragment(o).fillBefore(Ye.empty,!0))}return e}function kre(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let s=vre(e.doc,t,r.type);s!=null&&(t=n=s)}e.replaceRange(t,n,new ft(Ye.from(r),0,0))}function Cre(e,t,n){let r=e.doc.resolve(t),s=e.doc.resolve(n),a=FO(r,s);for(let o=0;o<a.length;o++){let l=a[o],c=o==a.length-1;if(c&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),s.end(l));if(l>0&&(c||r.node(l-1).canReplace(r.index(l-1),s.indexAfter(l-1))))return e.delete(r.before(l),s.after(l))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function FO(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let s=r;s>=0;s--){let a=e.start(s);if(a<e.pos-(e.depth-s)||t.end(s)>t.pos+(t.depth-s)||e.node(s).type.spec.isolating||t.node(s).type.spec.isolating)break;(a==t.start(s)||s==e.depth&&s==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&s&&t.start(s-1)==a-1)&&n.push(s)}return n}class Rh extends na{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return rs.fail("No node at attribute step's position");let r=Object.create(null);for(let a in n.attrs)r[a]=n.attrs[a];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return rs.fromReplace(t,this.pos,this.pos+1,new ft(Ye.from(s),0,n.isLeaf?0:1))}getMap(){return ii.empty}invert(t){return new Rh(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Rh(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Rh(n.pos,n.attr,n.value)}}na.jsonID("attr",Rh);class Vg extends na{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return rs.ok(r)}getMap(){return ii.empty}invert(t){return new Vg(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Vg(n.attr,n.value)}}na.jsonID("docAttr",Vg);let ip=class extends Error{};ip=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};ip.prototype=Object.create(Error.prototype);ip.prototype.constructor=ip;ip.prototype.name="TransformError";class zO{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new qg}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new ip(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=ft.empty){let s=f1(this.doc,t,n,r);return s&&this.step(s),this}replaceWith(t,n,r){return this.replace(t,n,new ft(Ye.from(r),0,0))}delete(t,n){return this.replace(t,n,ft.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return Sre(this,t,n,r),this}replaceRangeWith(t,n,r){return kre(this,t,n,r),this}deleteRange(t,n){return Cre(this,t,n),this}lift(t,n){return dre(this,t,n),this}join(t,n=1){return bre(this,t,n),this}wrap(t,n){return hre(this,t,n),this}setBlockType(t,n=t,r,s=null){return pre(this,t,n,r,s),this}setNodeMarkup(t,n,r=null,s){return gre(this,t,n,r,s),this}setNodeAttribute(t,n,r){return this.step(new Rh(t,n,r)),this}setDocAttribute(t,n){return this.step(new Vg(t,n)),this}addNodeMark(t,n){return this.step(new ud(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Xn)n.isInSet(r.marks)&&this.step(new of(t,n));else{let s=r.marks,a,o=[];for(;a=n.isInSet(s);)o.push(new of(t,a)),s=a.removeFromSet(s);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return xre(this,t,n,r),this}addMark(t,n,r){return ore(this,t,n,r),this}removeMark(t,n,r){return lre(this,t,n,r),this}clearIncompatible(t,n,r){return wk(this,t,n,r),this}}const $w=Object.create(null);class nn{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new Are(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=ft.empty){let r=n.content.lastChild,s=null;for(let l=0;l<n.openEnd;l++)s=r,r=r.lastChild;let a=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:d}=o[l],u=t.mapping.slice(a);t.replaceRange(u.map(c.pos),u.map(d.pos),l?ft.empty:n),l==0&&ID(t,a,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:o,$to:l}=s[a],c=t.mapping.slice(r),d=c.map(o.pos),u=c.map(l.pos);a?t.deleteRange(d,u):(t.replaceRangeWith(d,u,n),ID(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let s=t.parent.inlineContent?new $t(t):eh(t.node(0),t.parent,t.pos,t.index(),n,r);if(s)return s;for(let a=t.depth-1;a>=0;a--){let o=n<0?eh(t.node(0),t.node(a),t.before(a+1),t.index(a),n,r):eh(t.node(0),t.node(a),t.after(a+1),t.index(a)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new mi(t.node(0))}static atStart(t){return eh(t,t,0,0,1)||new mi(t)}static atEnd(t){return eh(t,t,t.content.size,t.childCount,-1)||new mi(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=$w[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in $w)throw new RangeError("Duplicate use of selection JSON ID "+t);return $w[t]=n,n.prototype.jsonID=t,n}getBookmark(){return $t.between(this.$anchor,this.$head).getBookmark()}}nn.prototype.visible=!0;class Are{constructor(t,n){this.$from=t,this.$to=n}}let OD=!1;function PD(e){!OD&&!e.parent.inlineContent&&(OD=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class $t extends nn{constructor(t,n=t){PD(t),PD(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return nn.near(r);let s=t.resolve(n.map(this.anchor));return new $t(s.parent.inlineContent?s:r,r)}replace(t,n=ft.empty){if(super.replace(t,n),n==ft.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof $t&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new h1(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new $t(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let s=t.resolve(n);return new this(s,r==n?s:t.resolve(r))}static between(t,n,r){let s=t.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let a=nn.findFrom(n,r,!0)||nn.findFrom(n,-r,!0);if(a)n=a.$head;else return nn.near(n,r)}return t.parent.inlineContent||(s==0?t=n:(t=(nn.findFrom(t,-r,!0)||nn.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=s<0&&(t=n))),new $t(t,n)}}nn.jsonID("text",$t);class h1{constructor(t,n){this.anchor=t,this.head=n}map(t){return new h1(t.map(this.anchor),t.map(this.head))}resolve(t){return $t.between(t.resolve(this.anchor),t.resolve(this.head))}}class Dt extends nn{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),a=t.resolve(s);return r?nn.near(a):new Dt(a)}content(){return new ft(Ye.from(this.node),0,0)}eq(t){return t instanceof Dt&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new jk(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Dt(t.resolve(n.anchor))}static create(t,n){return new Dt(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Dt.prototype.visible=!1;nn.jsonID("node",Dt);class jk{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new h1(r,r):new jk(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Dt.isSelectable(r)?new Dt(n):nn.near(n)}}class mi extends nn{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=ft.empty){if(n==ft.empty){t.delete(0,t.doc.content.size);let r=nn.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new mi(t)}map(t){return new mi(t)}eq(t){return t instanceof mi}getBookmark(){return Mre}}nn.jsonID("all",mi);const Mre={map(){return this},resolve(e){return new mi(e)}};function eh(e,t,n,r,s,a=!1){if(t.inlineContent)return $t.create(e,n);for(let o=r-(s>0?0:1);s>0?o<t.childCount:o>=0;o+=s){let l=t.child(o);if(l.isAtom){if(!a&&Dt.isSelectable(l))return Dt.create(e,n-(s<0?l.nodeSize:0))}else{let c=eh(e,l,n+s,s<0?l.childCount:0,s,a);if(c)return c}n+=l.nodeSize*s}return null}function ID(e,t,n){let r=e.steps.length-1;if(r<t)return;let s=e.steps[r];if(!(s instanceof ks||s instanceof Ms))return;let a=e.mapping.maps[r],o;a.forEach((l,c,d,u)=>{o==null&&(o=u)}),e.setSelection(nn.near(e.doc.resolve(o),n))}const FD=1,V0=2,zD=4;class Dre extends zO{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|FD)&~V0,this.storedMarks=null,this}get selectionSet(){return(this.updated&FD)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=V0,this}ensureMarks(t){return Xn.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&V0)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~V0,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Xn.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let s=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(s.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),!t)return this.deleteRange(n,r);let a=this.storedMarks;if(!a){let o=this.doc.resolve(n);a=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(t,a)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(nn.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=zD,this}get scrolledIntoView(){return(this.updated&zD)>0}}function BD(e,t){return!t||!e?e:e.bind(t)}class Om{constructor(t,n,r){this.name=t,this.init=BD(n.init,r),this.apply=BD(n.apply,r)}}const Ere=[new Om("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Om("selection",{init(e,t){return e.selection||nn.atStart(t.doc)},apply(e){return e.selection}}),new Om("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Om("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class qw{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Ere.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Om(r.key,r.spec.state,r))})}}class xh{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),s=null;for(;;){let a=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=s?s[o].n:0,d=s?s[o].state:this,u=c<n.length&&l.spec.appendTransaction.call(l,c?n.slice(c):n,d,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",t),!s){s=[];for(let f=0;f<this.config.plugins.length;f++)s.push(f<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),a=!0}s&&(s[o]={state:r,n:n.length})}}if(!a)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new xh(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let a=r[s];n[a.name]=a.apply(t,this[a.name],this,n)}return n}get tr(){return new Dre(this)}static create(t){let n=new qw(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new xh(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(t,r);return r}reconfigure(t){let n=new qw(this.schema,t.plugins),r=n.fields,s=new xh(n);for(let a=0;a<r.length;a++){let o=r[a].name;s[o]=this.hasOwnProperty(o)?this[o]:r[a].init(t,s)}return s}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=t[r],a=s.spec.state;a&&a.toJSON&&(n[r]=a.toJSON.call(s,this[s.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let s=new qw(t.schema,t.plugins),a=new xh(s);return s.fields.forEach(o=>{if(o.name=="doc")a.doc=kd.fromJSON(t.schema,n.doc);else if(o.name=="selection")a.selection=nn.fromJSON(a.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(a.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let c=r[l],d=c.spec.state;if(c.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){a[o.name]=d.fromJSON.call(c,t,n[l],a);return}}a[o.name]=o.init(t,a)}}),a}}function BO(e,t,n){for(let r in e){let s=e[r];s instanceof Function?s=s.bind(t):r=="handleDOMEvents"&&(s=BO(s,t,{})),n[r]=s}return n}class vr{constructor(t){this.spec=t,this.props={},t.props&&BO(t.props,this,this.props),this.key=t.key?t.key.key:HO("plugin")}getState(t){return t[this.key]}}const Vw=Object.create(null);function HO(e){return e in Vw?e+"$"+ ++Vw[e]:(Vw[e]=0,e+"$")}class vs{constructor(t="key"){this.key=HO(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Sk=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function UO(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const $O=(e,t,n)=>{let r=UO(e,n);if(!r)return!1;let s=kk(r);if(!s){let o=r.blockRange(),l=o&&Ep(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let a=s.nodeBefore;if(QO(e,s,t,-1))return!0;if(r.parent.content.size==0&&(op(a,"end")||Dt.isSelectable(a)))for(let o=r.depth;;o--){let l=f1(e.doc,r.before(o),r.after(o),ft.empty);if(l&&l.slice.size<l.to-l.from){if(t){let c=e.tr.step(l);c.setSelection(op(a,"end")?nn.findFrom(c.doc.resolve(c.mapping.map(s.pos,-1)),-1):Dt.create(c.doc,s.pos-a.nodeSize)),t(c.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return a.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos-a.nodeSize,s.pos).scrollIntoView()),!0):!1},_re=(e,t,n)=>{let r=UO(e,n);if(!r)return!1;let s=kk(r);return s?qO(e,s,t):!1},Tre=(e,t,n)=>{let r=YO(e,n);if(!r)return!1;let s=Ck(r);return s?qO(e,s,t):!1};function qO(e,t,n){let r=t.nodeBefore,s=r,a=t.pos-1;for(;!s.isTextblock;a--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let o=t.nodeAfter,l=o,c=t.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let d=f1(e.doc,a,c,ft.empty);if(!d||d.from!=a||d instanceof ks&&d.slice.size>=c-a)return!1;if(n){let u=e.tr.step(d);u.setSelection($t.create(u.doc,a)),n(u.scrollIntoView())}return!0}function op(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const VO=(e,t,n)=>{let{$head:r,empty:s}=e.selection,a=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;a=kk(r)}let o=a&&a.nodeBefore;return!o||!Dt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Dt.create(e.doc,a.pos-o.nodeSize)).scrollIntoView()),!0)};function kk(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function YO(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const WO=(e,t,n)=>{let r=YO(e,n);if(!r)return!1;let s=Ck(r);if(!s)return!1;let a=s.nodeAfter;if(QO(e,s,t,1))return!0;if(r.parent.content.size==0&&(op(a,"start")||Dt.isSelectable(a))){let o=f1(e.doc,r.before(),r.after(),ft.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(op(a,"start")?nn.findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):Dt.create(l.doc,l.mapping.map(s.pos))),t(l.scrollIntoView())}return!0}}return a.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView()),!0):!1},GO=(e,t,n)=>{let{$head:r,empty:s}=e.selection,a=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;a=Ck(r)}let o=a&&a.nodeAfter;return!o||!Dt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Dt.create(e.doc,a.pos)).scrollIntoView()),!0)};function Ck(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const Lre=(e,t)=>{let n=e.selection,r=n instanceof Dt,s;if(r){if(n.node.isTextblock||!qd(e.doc,n.from))return!1;s=n.from}else if(s=u1(e.doc,n.from,-1),s==null)return!1;if(t){let a=e.tr.join(s);r&&a.setSelection(Dt.create(a.doc,s-e.doc.resolve(s).nodeBefore.nodeSize)),t(a.scrollIntoView())}return!0},Rre=(e,t)=>{let n=e.selection,r;if(n instanceof Dt){if(n.node.isTextblock||!qd(e.doc,n.to))return!1;r=n.to}else if(r=u1(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},Ore=(e,t)=>{let{$from:n,$to:r}=e.selection,s=n.blockRange(r),a=s&&Ep(s);return a==null?!1:(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)},KO=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function Ak(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Pre=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),a=n.indexAfter(-1),o=Ak(s.contentMatchAt(a));if(!o||!s.canReplaceWith(a,a,o))return!1;if(t){let l=n.after(),c=e.tr.replaceWith(l,l,o.createAndFill());c.setSelection(nn.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0},JO=(e,t)=>{let n=e.selection,{$from:r,$to:s}=n;if(n instanceof mi||r.parent.inlineContent||s.parent.inlineContent)return!1;let a=Ak(s.parent.contentMatchAt(s.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,l=e.tr.insert(o,a.createAndFill());l.setSelection($t.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},XO=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let a=n.before();if(nc(e.doc,a))return t&&t(e.tr.split(a).scrollIntoView()),!0}let r=n.blockRange(),s=r&&Ep(r);return s==null?!1:(t&&t(e.tr.lift(r,s).scrollIntoView()),!0)};function Ire(e){return(t,n)=>{let{$from:r,$to:s}=t.selection;if(t.selection instanceof Dt&&t.selection.node.isBlock)return!r.parentOffset||!nc(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let a=[],o,l,c=!1,d=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){c=r.end(h)==r.pos+(r.depth-h),d=r.start(h)==r.pos-(r.depth-h),l=Ak(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),a.unshift(c&&l?{type:l}:null),o=h;break}else{if(h==1)return!1;a.unshift(null)}let u=t.tr;(t.selection instanceof $t||t.selection instanceof mi)&&u.deleteSelection();let f=u.mapping.map(r.pos),p=nc(u.doc,f,a.length,a);if(p||(a[0]=l?{type:l}:null,p=nc(u.doc,f,a.length,a)),!p)return!1;if(u.split(f,a.length,a),!c&&d&&r.node(o).type!=l){let h=u.mapping.map(r.before(o)),m=u.doc.resolve(h);l&&r.node(o-1).canReplaceWith(m.index(),m.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(o)),l)}return n&&n(u.scrollIntoView()),!0}}const Fre=Ire(),zre=(e,t)=>{let{$from:n,to:r}=e.selection,s,a=n.sharedDepth(r);return a==0?!1:(s=n.before(a),t&&t(e.tr.setSelection(Dt.create(e.doc,s))),!0)};function Bre(e,t,n){let r=t.nodeBefore,s=t.nodeAfter,a=t.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&t.parent.canReplace(a-1,a)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(a,a+1)||!(s.isTextblock||qd(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function QO(e,t,n,r){let s=t.nodeBefore,a=t.nodeAfter,o,l,c=s.type.spec.isolating||a.type.spec.isolating;if(!c&&Bre(e,t,n))return!0;let d=!c&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&l.matchType(o[0]||a.type).validEnd){if(n){let h=t.pos+a.nodeSize,m=Ye.empty;for(let y=o.length-1;y>=0;y--)m=Ye.from(o[y].create(null,m));m=Ye.from(s.copy(m));let g=e.tr.step(new Ms(t.pos-1,h,t.pos,h,new ft(m,1,0),o.length,!0)),x=g.doc.resolve(h+2*o.length);x.nodeAfter&&x.nodeAfter.type==s.type&&qd(g.doc,x.pos)&&g.join(x.pos),n(g.scrollIntoView())}return!0}let u=a.type.spec.isolating||r>0&&c?null:nn.findFrom(t,1),f=u&&u.$from.blockRange(u.$to),p=f&&Ep(f);if(p!=null&&p>=t.depth)return n&&n(e.tr.lift(f,p).scrollIntoView()),!0;if(d&&op(a,"start",!0)&&op(s,"end")){let h=s,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let g=a,x=1;for(;!g.isTextblock;g=g.firstChild)x++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(n){let y=Ye.empty;for(let N=m.length-1;N>=0;N--)y=Ye.from(m[N].copy(y));let v=e.tr.step(new Ms(t.pos-m.length,t.pos+a.nodeSize,t.pos+x,t.pos+a.nodeSize-x,new ft(y,m.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function ZO(e){return function(t,n){let r=t.selection,s=e<0?r.$from:r.$to,a=s.depth;for(;s.node(a).isInline;){if(!a)return!1;a--}return s.node(a).isTextblock?(n&&n(t.tr.setSelection($t.create(t.doc,e<0?s.start(a):s.end(a)))),!0):!1}}const Hre=ZO(-1),Ure=ZO(1);function $re(e,t=null){return function(n,r){let{$from:s,$to:a}=n.selection,o=s.blockRange(a),l=o&&Nk(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function HD(e,t=null){return function(n,r){let s=!1;for(let a=0;a<n.selection.ranges.length&&!s;a++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[a];n.doc.nodesBetween(o,l,(c,d)=>{if(s)return!1;if(!(!c.isTextblock||c.hasMarkup(e,t)))if(c.type==e)s=!0;else{let u=n.doc.resolve(d),f=u.index();s=u.parent.canReplaceWith(f,f+1,e)}})}if(!s)return!1;if(r){let a=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[o];a.setBlockType(l,c,e,t)}r(a.scrollIntoView())}return!0}}function Mk(...e){return function(t,n,r){for(let s=0;s<e.length;s++)if(e[s](t,n,r))return!0;return!1}}Mk(Sk,$O,VO);Mk(Sk,WO,GO);Mk(KO,JO,XO,Fre);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function qre(e,t=null){return function(n,r){let{$from:s,$to:a}=n.selection,o=s.blockRange(a);if(!o)return!1;let l=r?n.tr:null;return Vre(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function Vre(e,t,n,r=null){let s=!1,a=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let c=o.resolve(t.start-2);a=new zb(c,c,t.depth),t.endIndex<t.parent.childCount&&(t=new zb(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),s=!0}let l=Nk(a,n,r,t);return l?(e&&Yre(e,t,l,s,n),!0):!1}function Yre(e,t,n,r,s){let a=Ye.empty;for(let u=n.length-1;u>=0;u--)a=Ye.from(n[u].type.create(n[u].attrs,a));e.step(new Ms(t.start-(r?2:0),t.end,t.start,t.end,new ft(a,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==s&&(o=u+1);let l=n.length-o,c=t.start+n.length-(r?2:0),d=t.parent;for(let u=t.startIndex,f=t.endIndex,p=!0;u<f;u++,p=!1)!p&&nc(e.doc,c,l)&&(e.split(c,l),c+=2*l),c+=d.child(u).nodeSize;return e}function Wre(e){return function(t,n){let{$from:r,$to:s}=t.selection,a=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==e);return a?n?r.node(a.depth-1).type==e?Gre(t,n,e,a):Kre(t,n,a):!0:!1}}function Gre(e,t,n,r){let s=e.tr,a=r.end,o=r.$to.end(r.depth);a<o&&(s.step(new Ms(a-1,o,a,o,new ft(Ye.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new zb(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const l=Ep(r);if(l==null)return!1;s.lift(r,l);let c=s.doc.resolve(s.mapping.map(a,-1)-1);return qd(s.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&s.join(c.pos),t(s.scrollIntoView()),!0}function Kre(e,t,n){let r=e.tr,s=n.parent;for(let h=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)h-=s.child(m).nodeSize,r.delete(h-1,h+1);let a=r.doc.resolve(n.start),o=a.nodeAfter;if(r.mapping.map(n.end)!=n.start+a.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,c=n.endIndex==s.childCount,d=a.node(-1),u=a.index(-1);if(!d.canReplace(u+(l?0:1),u+1,o.content.append(c?Ye.empty:Ye.from(s))))return!1;let f=a.pos,p=f+o.nodeSize;return r.step(new Ms(f-(l?1:0),p+(c?1:0),f+1,p-1,new ft((l?Ye.empty:Ye.from(s.copy(Ye.empty))).append(c?Ye.empty:Ye.from(s.copy(Ye.empty))),l?0:1,c?0:1),l?0:1)),t(r.scrollIntoView()),!0}function Jre(e){return function(t,n){let{$from:r,$to:s}=t.selection,a=r.blockRange(s,d=>d.childCount>0&&d.firstChild.type==e);if(!a)return!1;let o=a.startIndex;if(o==0)return!1;let l=a.parent,c=l.child(o-1);if(c.type!=e)return!1;if(n){let d=c.lastChild&&c.lastChild.type==l.type,u=Ye.from(d?e.create():null),f=new ft(Ye.from(e.create(null,Ye.from(l.type.create(null,u)))),d?3:1,0),p=a.start,h=a.end;n(t.tr.step(new Ms(p-(d?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0}}const Fs=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},lp=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let X5=null;const Ol=function(e,t,n){let r=X5||(X5=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},Xre=function(){X5=null},lf=function(e,t,n,r){return n&&(UD(e,t,n,r,-1)||UD(e,t,n,r,1))},Qre=/^(img|br|input|textarea|hr)$/i;function UD(e,t,n,r,s){for(var a;;){if(e==n&&t==r)return!0;if(t==(s<0?0:Fi(e))){let o=e.parentNode;if(!o||o.nodeType!=1||Nx(e)||Qre.test(e.nodeName)||e.contentEditable=="false")return!1;t=Fs(e)+(s<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((a=o.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)t+=s;else return!1;else e=o,t=s<0?Fi(e):0}else return!1}}function Fi(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Zre(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Fi(e)}else if(e.parentNode&&!Nx(e))t=Fs(e),e=e.parentNode;else return null}}function ese(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Nx(e))t=Fs(e)+1,e=e.parentNode;else return null}}function tse(e,t,n){for(let r=t==0,s=t==Fi(e);r||s;){if(e==n)return!0;let a=Fs(e);if(e=e.parentNode,!e)return!1;r=r&&a==0,s=s&&a==Fi(e)}}function Nx(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const p1=function(e){return e.focusNode&&lf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Nu(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function nse(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function rse(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Fi(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Fi(r.startContainer),r.startOffset)}}}const Yo=typeof navigator<"u"?navigator:null,$D=typeof document<"u"?document:null,Vd=Yo&&Yo.userAgent||"",Q5=/Edge\/(\d+)/.exec(Vd),eP=/MSIE \d/.exec(Vd),Z5=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Vd),Ra=!!(eP||Z5||Q5),Ad=eP?document.documentMode:Z5?+Z5[1]:Q5?+Q5[1]:0,Hi=!Ra&&/gecko\/(\d+)/i.test(Vd);Hi&&+(/Firefox\/(\d+)/.exec(Vd)||[0,0])[1];const ej=!Ra&&/Chrome\/(\d+)/.exec(Vd),Cs=!!ej,tP=ej?+ej[1]:0,ta=!Ra&&!!Yo&&/Apple Computer/.test(Yo.vendor),cp=ta&&(/Mobile\/\w+/.test(Vd)||!!Yo&&Yo.maxTouchPoints>2),Ei=cp||(Yo?/Mac/.test(Yo.platform):!1),nP=Yo?/Win/.test(Yo.platform):!1,ql=/Android \d/.test(Vd),jx=!!$D&&"webkitFontSmoothing"in $D.documentElement.style,sse=jx?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ase(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Dl(e,t){return typeof e=="number"?e:e[t]}function ise(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function qD(e,t,n){let r=e.someProp("scrollThreshold")||0,s=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=lp(o);continue}let l=o,c=l==a.body,d=c?ase(a):ise(l),u=0,f=0;if(t.top<d.top+Dl(r,"top")?f=-(d.top-t.top+Dl(s,"top")):t.bottom>d.bottom-Dl(r,"bottom")&&(f=t.bottom-t.top>d.bottom-d.top?t.top+Dl(s,"top")-d.top:t.bottom-d.bottom+Dl(s,"bottom")),t.left<d.left+Dl(r,"left")?u=-(d.left-t.left+Dl(s,"left")):t.right>d.right-Dl(r,"right")&&(u=t.right-d.right+Dl(s,"right")),u||f)if(c)a.defaultView.scrollBy(u,f);else{let h=l.scrollLeft,m=l.scrollTop;f&&(l.scrollTop+=f),u&&(l.scrollLeft+=u);let g=l.scrollLeft-h,x=l.scrollTop-m;t={left:t.left-g,top:t.top-x,right:t.right-g,bottom:t.bottom-x}}let p=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(p))break;o=p=="absolute"?o.offsetParent:lp(o)}}function ose(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,s;for(let a=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(a,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=n-20){r=l,s=c.top;break}}return{refDOM:r,refTop:s,stack:rP(e.dom)}}function rP(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=lp(r));return t}function lse({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;sP(n,r==0?0:r-t)}function sP(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:s,left:a}=e[n];r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=a&&(r.scrollLeft=a)}}let Vf=null;function cse(e){if(e.setActive)return e.setActive();if(Vf)return e.focus(Vf);let t=rP(e);e.focus(Vf==null?{get preventScroll(){return Vf={preventScroll:!0},!0}}:void 0),Vf||(Vf=!1,sP(t,0))}function aP(e,t){let n,r=2e8,s,a=0,o=t.top,l=t.top,c,d;for(let u=e.firstChild,f=0;u;u=u.nextSibling,f++){let p;if(u.nodeType==1)p=u.getClientRects();else if(u.nodeType==3)p=Ol(u).getClientRects();else continue;for(let h=0;h<p.length;h++){let m=p[h];if(m.top<=o&&m.bottom>=l){o=Math.max(m.bottom,o),l=Math.min(m.top,l);let g=m.left>t.left?m.left-t.left:m.right<t.left?t.left-m.right:0;if(g<r){n=u,r=g,s=g&&n.nodeType==3?{left:m.right<t.left?m.right:m.left,top:t.top}:t,u.nodeType==1&&g&&(a=f+(t.left>=(m.left+m.right)/2?1:0));continue}}else m.top>t.top&&!c&&m.left<=t.left&&m.right>=t.left&&(c=u,d={left:Math.max(m.left,Math.min(m.right,t.left)),top:m.top});!n&&(t.left>=m.right&&t.top>=m.top||t.left>=m.left&&t.top>=m.bottom)&&(a=f+1)}}return!n&&c&&(n=c,s=d,r=0),n&&n.nodeType==3?dse(n,s):!n||r&&n.nodeType==1?{node:e,offset:a}:aP(n,s)}function dse(e,t){let n=e.nodeValue.length,r=document.createRange(),s;for(let a=0;a<n;a++){r.setEnd(e,a+1),r.setStart(e,a);let o=Uc(r,1);if(o.top!=o.bottom&&Dk(t,o)){s={node:e,offset:a+(t.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),s||{node:e,offset:0}}function Dk(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function use(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function fse(e,t,n){let{node:r,offset:s}=aP(t,n),a=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();a=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,s,a)}function hse(e,t,n,r){let s=-1;for(let a=t,o=!1;a!=e.dom;){let l=e.docView.nearestDesc(a,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&c.left>r.left||c.top>r.top?s=l.posBefore:(!o&&c.right<r.left||c.bottom<r.top)&&(s=l.posAfter),o=!0),!l.contentDOM&&s<0&&!l.node.isText))return(l.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;a=l.dom.parentNode}return s>-1?s:e.docView.posFromDOM(t,n,-1)}function iP(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),a=s;;){let o=e.childNodes[a];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let d=l[c];if(Dk(t,d))return iP(o,t,d)}}if((a=(a+1)%r)==s)break}return e}function pse(e,t){let n=e.dom.ownerDocument,r,s=0,a=rse(n,t.left,t.top);a&&({node:r,offset:s}=a);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!Dk(t,d)||(o=iP(e.dom,t,d),!o))return null}if(ta)for(let d=o;r&&d;d=lp(d))d.draggable&&(r=void 0);if(o=use(o,t),r){if(Hi&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&s++}let d;jx&&s&&r.nodeType==1&&(d=r.childNodes[s-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&s--,r==e.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(l=hse(e,r,s,t))}l==null&&(l=fse(e,o,t));let c=e.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function VD(e){return e.top<e.bottom||e.left<e.right}function Uc(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(VD(r))return r}return Array.prototype.find.call(n,VD)||e.getBoundingClientRect()}const mse=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function oP(e,t,n){let{node:r,offset:s,atom:a}=e.docView.domFromPos(t,n<0?-1:1),o=jx||Hi;if(r.nodeType==3)if(o&&(mse.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let c=Uc(Ol(r,s,s),n);if(Hi&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let d=Uc(Ol(r,s-1,s-1),-1);if(d.top==c.top){let u=Uc(Ol(r,s,s+1),-1);if(u.top!=c.top)return Nm(u,u.left<d.left)}}return c}else{let c=s,d=s,u=n<0?1:-1;return n<0&&!s?(d++,u=-1):n>=0&&s==r.nodeValue.length?(c--,u=1):n<0?c--:d++,Nm(Uc(Ol(r,c,d),u),u<0)}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(a==null&&s&&(n<0||s==Fi(r))){let c=r.childNodes[s-1];if(c.nodeType==1)return Yw(c.getBoundingClientRect(),!1)}if(a==null&&s<Fi(r)){let c=r.childNodes[s];if(c.nodeType==1)return Yw(c.getBoundingClientRect(),!0)}return Yw(r.getBoundingClientRect(),n>=0)}if(a==null&&s&&(n<0||s==Fi(r))){let c=r.childNodes[s-1],d=c.nodeType==3?Ol(c,Fi(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return Nm(Uc(d,1),!1)}if(a==null&&s<Fi(r)){let c=r.childNodes[s];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?Ol(c,0,o?0:1):c.nodeType==1?c:null:null;if(d)return Nm(Uc(d,-1),!0)}return Nm(Uc(r.nodeType==3?Ol(r):r,-n),n>=0)}function Nm(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Yw(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function lP(e,t,n){let r=e.state,s=e.root.activeElement;r!=t&&e.updateState(t),s!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),s!=e.dom&&s&&s.focus()}}function gse(e,t,n){let r=t.selection,s=n=="up"?r.$from:r.$to;return lP(e,t,()=>{let{node:a}=e.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(a,!0);if(!l)break;if(l.node.isBlock){a=l.contentDOM||l.dom;break}a=l.dom.parentNode}let o=oP(e,s.pos,1);for(let l=a.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=Ol(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let u=c[d];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const xse=/[\u0590-\u08ac]/;function yse(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,a=!s,o=s==r.parent.content.size,l=e.domSelection();return l?!xse.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?a:o:lP(e,t,()=>{let{focusNode:c,focusOffset:d,anchorNode:u,anchorOffset:f}=e.domSelectionRange(),p=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:m,focusOffset:g}=e.domSelectionRange(),x=m&&!h.contains(m.nodeType==1?m:m.parentNode)||c==m&&d==g;try{l.collapse(u,f),c&&(c!=u||d!=f)&&l.extend&&l.extend(c,d)}catch{}return p!=null&&(l.caretBidiLevel=p),x}):r.pos==r.start()||r.pos==r.end()}let YD=null,WD=null,GD=!1;function bse(e,t,n){return YD==t&&WD==n?GD:(YD=t,WD=n,GD=n=="up"||n=="down"?gse(e,t,n):yse(e,t,n))}const Ui=0,KD=1,Au=2,Wo=3;class Sx{constructor(t,n,r,s){this.parent=t,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Ui,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==t)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let a,o;if(t==this.contentDOM)a=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.previousSibling}for(;a&&!((o=a.pmViewDesc)&&o.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(o)+o.size:this.posAtStart}else{let a,o;if(t==this.contentDOM)a=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.nextSibling}for(;a&&!((o=a.pmViewDesc)&&o.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(o):this.posAtEnd}let s;if(t==this.dom&&this.contentDOM)s=n>Fs(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let a=t;;a=a.parentNode){if(a==this.dom){s=!1;break}if(a.previousSibling)break}if(s==null&&n==t.childNodes.length)for(let a=t;;a=a.parentNode){if(a==this.dom){s=!0;break}if(a.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,s=t;s;s=s.parentNode){let a=this.getDesc(s),o;if(a&&(!n||a.node))if(r&&(o=a.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return a}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let s=t;s;s=s.parentNode){let a=this.getDesc(s);if(a)return a.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],a=r+s.size;if(r==t&&a!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let l=s.children[o];if(l.size){s=l;break}}return s}if(t<a)return s.descAt(t-r-s.border);r=a}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,s=0;for(let a=0;r<this.children.length;r++){let o=this.children[r],l=a+o.size;if(l>t||o instanceof dP){s=t-a;break}a=l}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let a;r&&!(a=this.children[r-1]).size&&a instanceof cP&&a.side>=0;r--);if(n<=0){let a,o=!0;for(;a=r?this.children[r-1]:null,!(!a||a.dom.parentNode==this.contentDOM);r--,o=!1);return a&&n&&o&&!a.border&&!a.domAtom?a.domFromPos(a.size,n):{node:this.contentDOM,offset:a?Fs(a.dom)+1:0}}else{let a,o=!0;for(;a=r<this.children.length?this.children[r]:null,!(!a||a.dom.parentNode==this.contentDOM);r++,o=!1);return a&&o&&!a.border&&!a.domAtom?a.domFromPos(0,n):{node:this.contentDOM,offset:a?Fs(a.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,a=-1;for(let o=r,l=0;;l++){let c=this.children[l],d=o+c.size;if(s==-1&&t<=d){let u=o+c.border;if(t>=u&&n<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,n,u);t=o;for(let f=l;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){s=Fs(p.dom)+1;break}t-=p.size}s==-1&&(s=0)}if(s>-1&&(d>n||l==this.children.length-1)){n=d;for(let u=l+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){a=Fs(f.dom);break}n+=f.size}a==-1&&(a=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:n,fromOffset:s,toOffset:a}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,s=!1){let a=Math.min(t,n),o=Math.max(t,n);for(let h=0,m=0;h<this.children.length;h++){let g=this.children[h],x=m+g.size;if(a>m&&o<x)return g.setSelection(t-m-g.border,n-m-g.border,r,s);m=x}let l=this.domFromPos(t,t?-1:1),c=n==t?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((Hi||ta)&&t==n){let{node:h,offset:m}=l;if(h.nodeType==3){if(f=!!(m&&h.nodeValue[m-1]==`
`),f&&m==h.nodeValue.length)for(let g=h,x;g;g=g.parentNode){if(x=g.nextSibling){x.nodeName=="BR"&&(l=c={node:x.parentNode,offset:Fs(x)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=h.childNodes[m-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Hi&&u.focusNode&&u.focusNode!=c.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(s=!0)}if(!(s||f&&ta)&&lf(l.node,l.offset,u.anchorNode,u.anchorOffset)&&lf(c.node,c.offset,u.focusNode,u.focusOffset))return;let p=!1;if((d.extend||t==n)&&!(f&&Hi)){d.collapse(l.node,l.offset);try{t!=n&&d.extend(c.node,c.offset),p=!0}catch{}}if(!p){if(t>n){let m=l;l=c,c=m}let h=document.createRange();h.setEnd(c.node,c.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,s=0;s<this.children.length;s++){let a=this.children[s],o=r+a.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+a.border,c=o-a.border;if(t>=l&&n<=c){this.dirty=t==r||n==o?Au:KD,t==l&&n==c&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Wo:a.markDirty(t-l,n-l);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Au:Wo}r=o}this.dirty=Au}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Au:KD;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class cP extends Sx{constructor(t,n,r,s){let a,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,a=this}matchesWidget(t){return this.dirty==Ui&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class vse extends Sx{constructor(t,n,r,s){super(t,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class cf extends Sx{constructor(t,n,r,s,a){super(t,[],r,s),this.mark=n,this.spec=a}static create(t,n,r,s){let a=s.nodeViews[n.type.name],o=a&&a(n,s,r);return(!o||!o.dom)&&(o=jf.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new cf(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Wo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Wo&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Ui){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ui}}slice(t,n,r){let s=cf.create(this.parent,this.mark,!0,r),a=this.children,o=this.size;n<o&&(a=nj(a,n,o,r)),t>0&&(a=nj(a,0,t,r));for(let l=0;l<a.length;l++)a[l].parent=s;return s.children=a,s}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Md extends Sx{constructor(t,n,r,s,a,o,l,c,d){super(t,[],a,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=l}static create(t,n,r,s,a,o){let l=a.nodeViews[n.type.name],c,d=l&&l(n,a,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},r,s),u=d&&d.dom,f=d&&d.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=jf.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let p=u;return u=hP(u,r,n),d?c=new wse(t,n,r,s,u,f||null,p,d,a,o+1):n.isText?new m1(t,n,r,s,u,p,a):new Md(t,n,r,s,u,f||null,p,a,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Ye.empty)}return t}matchesNode(t,n,r){return this.dirty==Ui&&t.eq(this.node)&&Hb(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,s=n,a=t.composing?this.localCompositionInfo(t,n):null,o=a&&a.pos>-1?a:null,l=a&&a.pos<0,c=new jse(this,o&&o.node,t);Cse(this.node,this.innerDeco,(d,u,f)=>{d.spec.marks?c.syncToMarks(d.spec.marks,r,t):d.type.side>=0&&!f&&c.syncToMarks(u==this.node.childCount?Xn.none:this.node.child(u).marks,r,t),c.placeWidget(d,t,s)},(d,u,f,p)=>{c.syncToMarks(d.marks,r,t);let h;c.findNodeMatch(d,u,f,p)||l&&t.state.selection.from>s&&t.state.selection.to<s+d.nodeSize&&(h=c.findIndexWithChild(a.node))>-1&&c.updateNodeAt(d,u,f,h,t)||c.updateNextNode(d,u,f,t,p,s)||c.addNode(d,u,f,t,s),s+=d.nodeSize}),c.syncToMarks([],r,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Au)&&(o&&this.protectLocalComposition(t,o),uP(this.contentDOM,this.children,t),cp&&Ase(this.dom))}localCompositionInfo(t,n){let{from:r,to:s}=t.state.selection;if(!(t.state.selection instanceof $t)||r<n||s>n+this.node.content.size)return null;let a=t.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let o=a.nodeValue,l=Mse(this.node.content,o,r-n,s-n);return l<0?null:{node:a,pos:l,text:o}}else return{node:a,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let a=n;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let o=new vse(this,a,n,s);t.input.compositionNodes.push(o),this.children=nj(this.children,r,r+s.length,t,o)}update(t,n,r,s){return this.dirty==Wo||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,s),!0)}updateInner(t,n,r,s){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Ui}updateOuterDeco(t){if(Hb(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=fP(this.dom,this.nodeDOM,tj(this.outerDeco,this.node,n),tj(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function JD(e,t,n,r,s){hP(r,t,e);let a=new Md(void 0,e,t,n,r,r,r,s,0);return a.contentDOM&&a.updateChildren(s,0),a}class m1 extends Md{constructor(t,n,r,s,a,o,l){super(t,n,r,s,a,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,s){return this.dirty==Wo||this.dirty!=Ui&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ui||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=t,this.dirty=Ui,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let s=this.node.cut(t,n),a=document.createTextNode(s.text);return new m1(this.parent,s,this.outerDeco,this.innerDeco,a,a,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Wo)}get domAtom(){return!1}isText(t){return this.node.text==t}}class dP extends Sx{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Ui&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class wse extends Md{constructor(t,n,r,s,a,o,l,c,d,u){super(t,n,r,s,a,o,l,d,u),this.spec=c}update(t,n,r,s){if(this.dirty==Wo)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let a=this.spec.update(t,n,r);return a&&this.updateInner(t,n,r,s),a}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,s){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function uP(e,t,n){let r=e.firstChild,s=!1;for(let a=0;a<t.length;a++){let o=t[a],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=XD(r),s=!0;r=r.nextSibling}else s=!0,e.insertBefore(l,r);if(o instanceof cf){let c=r?r.previousSibling:e.lastChild;uP(o.contentDOM,o.children,n),r=c?c.nextSibling:e.firstChild}}for(;r;)r=XD(r),s=!0;s&&n.trackWrites==e&&(n.trackWrites=null)}const ag=function(e){e&&(this.nodeName=e)};ag.prototype=Object.create(null);const Mu=[new ag];function tj(e,t,n){if(e.length==0)return Mu;let r=n?Mu[0]:new ag,s=[r];for(let a=0;a<e.length;a++){let o=e[a].type.attrs;if(o){o.nodeName&&s.push(r=new ag(o.nodeName));for(let l in o){let c=o[l];c!=null&&(n&&s.length==1&&s.push(r=new ag(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+c:l=="style"?r.style=(r.style?r.style+";":"")+c:l!="nodeName"&&(r[l]=c))}}}return s}function fP(e,t,n,r){if(n==Mu&&r==Mu)return t;let s=t;for(let a=0;a<r.length;a++){let o=r[a],l=n[a];if(a){let c;l&&l.nodeName==o.nodeName&&s!=e&&(c=s.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(s),l=Mu[0]),s=c}Nse(s,l||Mu[0],o)}return s}function Nse(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let a=0;a<r.length;a++)s.indexOf(r[a])==-1&&e.classList.remove(r[a]);for(let a=0;a<s.length;a++)r.indexOf(s[a])==-1&&e.classList.add(s[a]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(t.style);)e.style.removeProperty(s[1])}n.style&&(e.style.cssText+=n.style)}}function hP(e,t,n){return fP(e,e,Mu,tj(t,n,e.nodeType!=1))}function Hb(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function XD(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class jse{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Sse(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let s=0,a=this.stack.length>>1,o=Math.min(a,t.length);for(;s<o&&(s==a-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<a;)this.destroyRest(),this.top.dirty=Ui,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let d=this.top.children[c];if(d.matchesMark(t[a])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=cf.create(this.top,t[a],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,a++}}findNodeMatch(t,n,r,s){let a=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))a=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let d=this.top.children[l];if(d.matchesNode(t,n,r)&&!this.preMatch.matched.has(d)){a=l;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(t,n,r,s,a){let o=this.top.children[s];return o.dirty==Wo&&o.dom==o.contentDOM&&(o.dirty=Au),o.update(t,n,r,a)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}t=n}}updateNextNode(t,n,r,s,a,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof Md){let d=this.preMatch.matched.get(c);if(d!=null&&d!=a)return!1;let u=c.dom,f,p=this.isLocked(u)&&!(t.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==t.text&&c.dirty!=Wo&&Hb(n,c.outerDeco));if(!p&&c.update(t,n,r,s))return this.destroyBetween(this.index,l),c.dom!=u&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(c,t,n,r,s,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Au,f.updateChildren(s,o+1),f.dirty=Ui),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,s,a,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Hb(r,t.outerDeco)||!s.eq(t.innerDeco))return null;let l=Md.create(this.top,n,r,s,a,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let c of l.children)c.parent=l}return t.destroy(),l}addNode(t,n,r,s,a){let o=Md.create(this.top,t,n,r,s,a);o.contentDOM&&o.updateChildren(s,a+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(t)&&(t==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let a=new cP(this.top,t,n,r);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof cf;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof m1)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((ta||Cs)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new dP(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function Sse(e,t){let n=t,r=n.children.length,s=e.childCount,a=new Map,o=[];e:for(;s>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof cf)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=l.node;if(c){if(c!=e.child(s-1))break;--s,a.set(l,s),o.push(l)}}return{index:s,matched:a,matches:o.reverse()}}function kse(e,t){return e.type.side-t.type.side}function Cse(e,t,n,r){let s=t.locals(e),a=0;if(s.length==0){for(let d=0;d<e.childCount;d++){let u=e.child(d);r(u,s,t.forChild(a,u),d),a+=u.nodeSize}return}let o=0,l=[],c=null;for(let d=0;;){let u,f;for(;o<s.length&&s[o].to==a;){let x=s[o++];x.widget&&(u?(f||(f=[u])).push(x):u=x)}if(u)if(f){f.sort(kse);for(let x=0;x<f.length;x++)n(f[x],d,!!c)}else n(u,d,!!c);let p,h;if(c)h=-1,p=c,c=null;else if(d<e.childCount)h=d,p=e.child(d++);else break;for(let x=0;x<l.length;x++)l[x].to<=a&&l.splice(x--,1);for(;o<s.length&&s[o].from<=a&&s[o].to>a;)l.push(s[o++]);let m=a+p.nodeSize;if(p.isText){let x=m;o<s.length&&s[o].from<x&&(x=s[o].from);for(let y=0;y<l.length;y++)l[y].to<x&&(x=l[y].to);x<m&&(c=p.cut(x-a),p=p.cut(0,x-a),m=x,h=-1)}else for(;o<s.length&&s[o].to<m;)o++;let g=p.isInline&&!p.isLeaf?l.filter(x=>!x.inline):l.slice();r(p,g,t.forChild(a,p),h),a=m}}function Ase(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Mse(e,t,n,r){for(let s=0,a=0;s<e.childCount&&a<=r;){let o=e.child(s++),l=a;if(a+=o.nodeSize,!o.isText)continue;let c=o.text;for(;s<e.childCount;){let d=e.child(s++);if(a+=d.nodeSize,!d.isText)break;c+=d.text}if(a>=n){if(a>=r&&c.slice(r-t.length-l,r-l)==t)return r-t.length;let d=l<r?c.lastIndexOf(t,r-l-1):-1;if(d>=0&&d+t.length+l>=n)return l+d;if(n==r&&c.length>=r+t.length-l&&c.slice(r-l,r-l+t.length)==t)return r}}return-1}function nj(e,t,n,r,s){let a=[];for(let o=0,l=0;o<e.length;o++){let c=e[o],d=l,u=l+=c.size;d>=n||u<=t?a.push(c):(d<t&&a.push(c.slice(0,t-d,r)),s&&(a.push(s),s=void 0),u>n&&a.push(c.slice(n-d,c.size,r)))}return a}function Ek(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let s=e.docView.nearestDesc(n.focusNode),a=s&&s.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),c,d;if(p1(n)){for(c=o;s&&!s.node;)s=s.parent;let f=s.node;if(s&&f.isAtom&&Dt.isSelectable(f)&&s.parent&&!(f.isInline&&tse(n.focusNode,n.focusOffset,s.dom))){let p=s.posBefore;d=new Dt(o==p?l:r.resolve(p))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=o,p=o;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);f=Math.min(f,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[c,o]=p==e.state.selection.anchor?[p,f]:[f,p],l=r.resolve(o)}else c=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let u=r.resolve(c);if(!d){let f=t=="pointer"||e.state.selection.head<l.pos&&!a?1:-1;d=_k(e,u,l,f)}return d}function pP(e){return e.editable?e.hasFocus():gP(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function rc(e,t=!1){let n=e.state.selection;if(mP(e,n),!!pP(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Cs){let r=e.domSelectionRange(),s=e.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&lf(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)Ese(e);else{let{anchor:r,head:s}=n,a,o;QD&&!(n instanceof $t)&&(n.$from.parent.inlineContent||(a=ZD(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=ZD(e,n.to))),e.docView.setSelection(r,s,e,t),QD&&(a&&eE(a),o&&eE(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Dse(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const QD=ta||Cs&&tP<63;function ZD(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),s=r<n.childNodes.length?n.childNodes[r]:null,a=r?n.childNodes[r-1]:null;if(ta&&s&&s.contentEditable=="false")return Ww(s);if((!s||s.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(s)return Ww(s);if(a)return Ww(a)}}function Ww(e){return e.contentEditable="true",ta&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function eE(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Dse(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!pP(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function Ese(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,Fs(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Ra&&Ad<=11&&(n.disabled=!0,n.disabled=!1)}function mP(e,t){if(t instanceof Dt){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(tE(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else tE(e)}function tE(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function _k(e,t,n,r){return e.someProp("createSelectionBetween",s=>s(e,t,n))||$t.between(t,n,r)}function nE(e){return e.editable&&!e.hasFocus()?!1:gP(e)}function gP(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function _se(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return lf(t.node,t.offset,n.anchorNode,n.anchorOffset)}function rj(e,t){let{$anchor:n,$head:r}=e.selection,s=t>0?n.max(r):n.min(r),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&nn.findFrom(a,t)}function Vc(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function rE(e,t,n){let r=e.state.selection;if(r instanceof $t)if(n.indexOf("s")>-1){let{$head:s}=r,a=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let o=e.state.doc.resolve(s.pos+a.nodeSize*(t<0?-1:1));return Vc(e,new $t(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let s=rj(e.state,t);return s&&s instanceof Dt?Vc(e,s):!1}else if(!(Ei&&n.indexOf("m")>-1)){let s=r.$head,a=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter,o;if(!a||a.isText)return!1;let l=t<0?s.pos-a.nodeSize:s.pos;return a.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?Dt.isSelectable(a)?Vc(e,new Dt(t<0?e.state.doc.resolve(s.pos-a.nodeSize):s)):jx?Vc(e,new $t(e.state.doc.resolve(t<0?l:l+a.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Dt&&r.node.isInline)return Vc(e,new $t(t>0?r.$to:r.$from));{let s=rj(e.state,t);return s?Vc(e,s):!1}}}function Ub(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function ig(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Yf(e,t){return t<0?Tse(e):Lse(e)}function Tse(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s,a,o=!1;for(Hi&&n.nodeType==1&&r<Ub(n)&&ig(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(ig(l,-1))s=n,a=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(xP(n))break;{let l=n.previousSibling;for(;l&&ig(l,-1);)s=n.parentNode,a=Fs(l),l=l.previousSibling;if(l)n=l,r=Ub(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?sj(e,n,r):s&&sj(e,s,a)}function Lse(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s=Ub(n),a,o;for(;;)if(r<s){if(n.nodeType!=1)break;let l=n.childNodes[r];if(ig(l,1))a=n,o=++r;else break}else{if(xP(n))break;{let l=n.nextSibling;for(;l&&ig(l,1);)a=l.parentNode,o=Fs(l)+1,l=l.nextSibling;if(l)n=l,r=0,s=Ub(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}a&&sj(e,a,o)}function xP(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Rse(e,t){for(;e&&t==e.childNodes.length&&!Nx(e);)t=Fs(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function Ose(e,t){for(;e&&!t&&!Nx(e);)t=Fs(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function sj(e,t,n){if(t.nodeType!=3){let a,o;(o=Rse(t,n))?(t=o,n=0):(a=Ose(t,n))&&(t=a,n=a.nodeValue.length)}let r=e.domSelection();if(!r)return;if(p1(r)){let a=document.createRange();a.setEnd(t,n),a.setStart(t,n),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:s}=e;setTimeout(()=>{e.state==s&&rc(e)},50)}function sE(e,t){let n=e.state.doc.resolve(t);if(!(Cs||nP)&&n.parent.inlineContent){let s=e.coordsAtPos(t);if(t>n.start()){let a=e.coordsAtPos(t-1),o=(a.top+a.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(a.left-s.left)>1)return a.left<s.left?"ltr":"rtl"}if(t<n.end()){let a=e.coordsAtPos(t+1),o=(a.top+a.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(a.left-s.left)>1)return a.left>s.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function aE(e,t,n){let r=e.state.selection;if(r instanceof $t&&!r.empty||n.indexOf("s")>-1||Ei&&n.indexOf("m")>-1)return!1;let{$from:s,$to:a}=r;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=rj(e.state,t);if(o&&o instanceof Dt)return Vc(e,o)}if(!s.parent.inlineContent){let o=t<0?s:a,l=r instanceof mi?nn.near(o,t):nn.findFrom(o,t);return l?Vc(e,l):!1}return!1}function iE(e,t){if(!(e.state.selection instanceof $t))return!0;let{$head:n,$anchor:r,empty:s}=e.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let a=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(a&&!a.isText){let o=e.state.tr;return t<0?o.delete(n.pos-a.nodeSize,n.pos):o.delete(n.pos,n.pos+a.nodeSize),e.dispatch(o),!0}return!1}function oE(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Pse(e){if(!ta||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;oE(e,r,"true"),setTimeout(()=>oE(e,r,"false"),20)}return!1}function Ise(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Fse(e,t){let n=t.keyCode,r=Ise(t);if(n==8||Ei&&n==72&&r=="c")return iE(e,-1)||Yf(e,-1);if(n==46&&!t.shiftKey||Ei&&n==68&&r=="c")return iE(e,1)||Yf(e,1);if(n==13||n==27)return!0;if(n==37||Ei&&n==66&&r=="c"){let s=n==37?sE(e,e.state.selection.from)=="ltr"?-1:1:-1;return rE(e,s,r)||Yf(e,s)}else if(n==39||Ei&&n==70&&r=="c"){let s=n==39?sE(e,e.state.selection.from)=="ltr"?1:-1:1;return rE(e,s,r)||Yf(e,s)}else{if(n==38||Ei&&n==80&&r=="c")return aE(e,-1,r)||Yf(e,-1);if(n==40||Ei&&n==78&&r=="c")return Pse(e)||aE(e,1,r)||Yf(e,1);if(r==(Ei?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Tk(e,t){e.someProp("transformCopied",h=>{t=h(t,e)});let n=[],{content:r,openStart:s,openEnd:a}=t;for(;s>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,a--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=e.someProp("clipboardSerializer")||jf.fromSchema(e.state.schema),l=jP(),c=l.createElement("div");c.appendChild(o.serializeFragment(r,{document:l}));let d=c.firstChild,u,f=0;for(;d&&d.nodeType==1&&(u=NP[d.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let m=l.createElement(u[h]);for(;c.firstChild;)m.appendChild(c.firstChild);c.appendChild(m),f++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${s} ${a}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=e.someProp("clipboardTextSerializer",h=>h(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:c,text:p,slice:t}}function yP(e,t,n,r,s){let a=s.parent.type.spec.code,o,l;if(!n&&!t)return null;let c=!!t&&(r||a||!n);if(c){if(e.someProp("transformPastedText",p=>{t=p(t,a||r,e)}),a)return l=new ft(Ye.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",p=>{l=p(l,e,!0)}),l;let f=e.someProp("clipboardTextParser",p=>p(t,s,r,e));if(f)l=f;else{let p=s.marks(),{schema:h}=e.state,m=jf.fromSchema(h);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(g=>{let x=o.appendChild(document.createElement("p"));g&&x.appendChild(m.serializeNode(h.text(g,p)))})}}else e.someProp("transformPastedHTML",f=>{n=f(n,e)}),o=Use(n),jx&&$se(o);let d=o&&o.querySelector("[data-pm-slice]"),u=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let p=o.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;o=p}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||Cd.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||u),context:s,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!zse.test(p.parentNode.nodeName)?{ignore:!0}:null}})),u)l=qse(lE(l,+u[1],+u[2]),u[4]);else if(l=ft.maxOpen(Bse(l.content,s),!0),l.openStart||l.openEnd){let f=0,p=0;for(let h=l.content.firstChild;f<l.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=l.content.lastChild;p<l.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);l=lE(l,f,p)}return e.someProp("transformPasted",f=>{l=f(l,e,c)}),l}const zse=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Bse(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let s=t.node(n).contentMatchAt(t.index(n)),a,o=[];if(e.forEach(l=>{if(!o)return;let c=s.findWrapping(l.type),d;if(!c)return o=null;if(d=o.length&&a.length&&vP(c,a,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=wP(o[o.length-1],a.length));let u=bP(l,c);o.push(u),s=s.matchType(u.type),a=c}}),o)return Ye.from(o)}return e}function bP(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,Ye.from(e));return e}function vP(e,t,n,r,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let a=vP(e,t,n,r.lastChild,s+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(s==e.length-1?n.type:e[s+1]))return r.copy(r.content.append(Ye.from(bP(n,e,s+1))))}}function wP(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,wP(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Ye.empty,!0);return e.copy(n.append(r))}function aj(e,t,n,r,s,a){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(a=0),s<r-1&&(l=aj(l,t,n,r,s+1,a)),s>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,a<=s).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(Ye.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function lE(e,t,n){return t<e.openStart&&(e=new ft(aj(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new ft(aj(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const NP={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let cE=null;function jP(){return cE||(cE=document.implementation.createHTMLDocument("title"))}let Gw=null;function Hse(e){let t=window.trustedTypes;return t?(Gw||(Gw=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Gw.createHTML(e)):e}function Use(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=jP().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),s;if((s=r&&NP[r[1].toLowerCase()])&&(e=s.map(a=>"<"+a+">").join("")+e+s.map(a=>"</"+a+">").reverse().join("")),n.innerHTML=Hse(e),s)for(let a=0;a<s.length;a++)n=n.querySelector(s[a])||n;return n}function $se(e){let t=e.querySelectorAll(Cs?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function qse(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:s,openStart:a,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let c=n.nodes[r[l]];if(!c||c.hasRequiredAttrs())break;s=Ye.from(c.create(r[l+1],s)),a++,o++}return new ft(s,a,o)}const ga={},xa={},Vse={touchstart:!0,touchmove:!0};class Yse{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Wse(e){for(let t in ga){let n=ga[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{Kse(e,r)&&!Lk(e,r)&&(e.editable||!(r.type in xa))&&n(e,r)},Vse[t]?{passive:!0}:void 0)}ta&&e.dom.addEventListener("input",()=>null),ij(e)}function fd(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Gse(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function ij(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>Lk(e,r))})}function Lk(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function Kse(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Jse(e,t){!Lk(e,t)&&ga[t.type]&&(e.editable||!(t.type in xa))&&ga[t.type](e,t)}xa.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!kP(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(ql&&Cs&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),cp&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",s=>s(e,Nu(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||Fse(e,n)?n.preventDefault():fd(e,"key")};xa.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};xa.keypress=(e,t)=>{let n=t;if(kP(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ei&&n.metaKey)return;if(e.someProp("handleKeyPress",s=>s(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof $t)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),a=()=>e.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,s,a))&&e.dispatch(a()),n.preventDefault()}};function g1(e){return{left:e.clientX,top:e.clientY}}function Xse(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function Rk(e,t,n,r,s){if(r==-1)return!1;let a=e.state.doc.resolve(r);for(let o=a.depth+1;o>0;o--)if(e.someProp(t,l=>o>a.depth?l(e,n,a.nodeAfter,a.before(o),s,!0):l(e,n,a.node(o),a.before(o),s,!1)))return!0;return!1}function Oh(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function Qse(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Dt.isSelectable(r)?(Oh(e,new Dt(n)),!0):!1}function Zse(e,t){if(t==-1)return!1;let n=e.state.selection,r,s;n instanceof Dt&&(r=n.node);let a=e.state.doc.resolve(t);for(let o=a.depth+1;o>0;o--){let l=o>a.depth?a.nodeAfter:a.node(o);if(Dt.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&a.before(n.$from.depth+1)==n.$from.pos?s=a.before(n.$from.depth):s=a.before(o);break}}return s!=null?(Oh(e,Dt.create(e.state.doc,s)),!0):!1}function eae(e,t,n,r,s){return Rk(e,"handleClickOn",t,n,r)||e.someProp("handleClick",a=>a(e,t,r))||(s?Zse(e,n):Qse(e,n))}function tae(e,t,n,r){return Rk(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",s=>s(e,t,r))}function nae(e,t,n,r){return Rk(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",s=>s(e,t,r))||rae(e,n,r)}function rae(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Oh(e,$t.create(r,0,r.content.size)),!0):!1;let s=r.resolve(t);for(let a=s.depth+1;a>0;a--){let o=a>s.depth?s.nodeAfter:s.node(a),l=s.before(a);if(o.inlineContent)Oh(e,$t.create(r,l+1,l+1+o.content.size));else if(Dt.isSelectable(o))Oh(e,Dt.create(r,l));else continue;return!0}}function Ok(e){return $b(e)}const SP=Ei?"metaKey":"ctrlKey";ga.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=Ok(e),s=Date.now(),a="singleClick";s-e.input.lastClick.time<500&&Xse(n,e.input.lastClick)&&!n[SP]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?a="doubleClick":e.input.lastClick.type=="doubleClick"&&(a="tripleClick")),e.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:a,button:n.button};let o=e.posAtCoords(g1(n));o&&(a=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new sae(e,o,n,!!r)):(a=="doubleClick"?tae:nae)(e,o.pos,o.inside,n)?n.preventDefault():fd(e,"pointer"))};class sae{constructor(t,n,r,s){this.view=t,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[SP],this.allowDefault=r.shiftKey;let a,o;if(n.inside>-1)a=t.state.doc.nodeAt(n.inside),o=n.inside;else{let u=t.state.doc.resolve(n.pos);a=u.parent,o=u.depth?u.before():0}const l=s?null:r.target,c=l?t.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:d}=t.state;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||d instanceof Dt&&d.from<=o&&d.to>o)&&(this.mightDrag={node:a,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Hi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),fd(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>rc(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(g1(t))),this.updateAllowDefault(t),this.allowDefault||!n?fd(this.view,"pointer"):eae(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||ta&&this.mightDrag&&!this.mightDrag.node.isAtom||Cs&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Oh(this.view,nn.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):fd(this.view,"pointer")}move(t){this.updateAllowDefault(t),fd(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}ga.touchstart=e=>{e.input.lastTouch=Date.now(),Ok(e),fd(e,"pointer")};ga.touchmove=e=>{e.input.lastTouch=Date.now(),fd(e,"pointer")};ga.contextmenu=e=>Ok(e);function kP(e,t){return e.composing?!0:ta&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const aae=ql?5e3:-1;xa.compositionstart=xa.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof $t&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Cs&&nP&&iae(e)))e.markCursor=e.state.storedMarks||n.marks(),$b(e,!0),e.markCursor=null;else if($b(e,!t.selection.empty),Hi&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let s=r.focusNode,a=r.focusOffset;s&&s.nodeType==1&&a!=0;){let o=a<0?s.lastChild:s.childNodes[a-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else s=o,a=-1}}e.input.composing=!0}CP(e,aae)};function iae(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let r=t.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}xa.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,CP(e,20))};function CP(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>$b(e),t))}function AP(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=lae());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function oae(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=Zre(t.focusNode,t.focusOffset),r=ese(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,a=e.domObserver.lastChangedTextNode;if(n==a||r==a)return a;if(!s||!s.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function lae(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function $b(e,t=!1){if(!(ql&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),AP(e),t||e.docView&&e.docView.dirty){let n=Ek(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function cae(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Yg=Ra&&Ad<15||cp&&sse<604;ga.copy=xa.cut=(e,t)=>{let n=t,r=e.state.selection,s=n.type=="cut";if(r.empty)return;let a=Yg?null:n.clipboardData,o=r.content(),{dom:l,text:c}=Tk(e,o);a?(n.preventDefault(),a.clearData(),a.setData("text/html",l.innerHTML),a.setData("text/plain",c)):cae(e,l),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function dae(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function uae(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Wg(e,r.value,null,s,t):Wg(e,r.textContent,r.innerHTML,s,t)},50)}function Wg(e,t,n,r,s){let a=yP(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",c=>c(e,s,a||ft.empty)))return!0;if(!a)return!1;let o=dae(a),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(a);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function MP(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}xa.paste=(e,t)=>{let n=t;if(e.composing&&!ql)return;let r=Yg?null:n.clipboardData,s=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Wg(e,MP(r),r.getData("text/html"),s,n)?n.preventDefault():uae(e,n)};class DP{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const fae=Ei?"altKey":"ctrlKey";function EP(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[fae]}ga.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=e.state.selection,a=s.empty?null:e.posAtCoords(g1(n)),o;if(!(a&&a.pos>=s.from&&a.pos<=(s instanceof Dt?s.to-1:s.to))){if(r&&r.mightDrag)o=Dt.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=e.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(o=Dt.create(e.state.doc,f.posBefore))}}let l=(o||e.state.selection).content(),{dom:c,text:d,slice:u}=Tk(e,l);(!n.dataTransfer.files.length||!Cs||tP>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Yg?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Yg||n.dataTransfer.setData("text/plain",d),e.dragging=new DP(u,EP(e,n),o)};ga.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};xa.dragover=xa.dragenter=(e,t)=>t.preventDefault();xa.drop=(e,t)=>{try{hae(e,t,e.dragging)}finally{e.dragging=null}};function hae(e,t,n){if(!t.dataTransfer)return;let r=e.posAtCoords(g1(t));if(!r)return;let s=e.state.doc.resolve(r.pos),a=n&&n.slice;a?e.someProp("transformPasted",h=>{a=h(a,e,!1)}):a=yP(e,MP(t.dataTransfer),Yg?null:t.dataTransfer.getData("text/html"),!1,s);let o=!!(n&&EP(e,t));if(e.someProp("handleDrop",h=>h(e,t,a||ft.empty,o))){t.preventDefault();return}if(!a)return;t.preventDefault();let l=a?RO(e.state.doc,s.pos,a):s.pos;l==null&&(l=s.pos);let c=e.state.tr;if(o){let{node:h}=n;h?h.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,f=c.doc;if(u?c.replaceRangeWith(d,d,a.content.firstChild):c.replaceRange(d,d,a),c.doc.eq(f))return;let p=c.doc.resolve(d);if(u&&Dt.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new Dt(p));else{let h=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,x,y)=>h=y),c.setSelection(_k(e,p,c.doc.resolve(h)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}ga.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&rc(e)},20))};ga.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};ga.beforeinput=(e,t)=>{if(Cs&&ql&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",a=>a(e,Nu(8,"Backspace")))))return;let{$cursor:s}=e.state.selection;s&&s.pos>0&&e.dispatch(e.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let e in xa)ga[e]=xa[e];function Gg(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class qb{constructor(t,n){this.toDOM=t,this.spec=n||$u,this.side=this.spec.side||0}map(t,n,r,s){let{pos:a,deleted:o}=t.mapResult(n.from+s,this.side<0?-1:1);return o?null:new ha(a-r,a-r,this)}valid(){return!0}eq(t){return this==t||t instanceof qb&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Gg(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Dd{constructor(t,n){this.attrs=t,this.spec=n||$u}map(t,n,r,s){let a=t.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return a>=o?null:new ha(a,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Dd&&Gg(this.attrs,t.attrs)&&Gg(this.spec,t.spec)}static is(t){return t.type instanceof Dd}destroy(){}}class Pk{constructor(t,n){this.attrs=t,this.spec=n||$u}map(t,n,r,s){let a=t.mapResult(n.from+s,1);if(a.deleted)return null;let o=t.mapResult(n.to+s,-1);return o.deleted||o.pos<=a.pos?null:new ha(a.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:s}=t.content.findIndex(n.from),a;return s==n.from&&!(a=t.child(r)).isText&&s+a.nodeSize==n.to}eq(t){return this==t||t instanceof Pk&&Gg(this.attrs,t.attrs)&&Gg(this.spec,t.spec)}destroy(){}}class ha{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new ha(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new ha(t,t,new qb(n,r))}static inline(t,n,r,s){return new ha(t,n,new Dd(r,s))}static node(t,n,r,s){return new ha(t,n,new Pk(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Dd}get widget(){return this.type instanceof qb}}const th=[],$u={};class gr{constructor(t,n){this.local=t.length?t:th,this.children=n.length?n:th}static create(t,n){return n.length?Vb(n,t,0,$u):Qs}find(t,n,r){let s=[];return this.findInner(t??0,n??1e9,s,0,r),s}findInner(t,n,r,s,a){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!a||a(l.spec))&&r.push(l.copy(l.from+s,l.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,s+l,a)}}map(t,n,r){return this==Qs||t.maps.length==0?this:this.mapInner(t,n,0,0,r||$u)}mapInner(t,n,r,s,a){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(t,r,s);c&&c.type.valid(n,c)?(o||(o=[])).push(c):a.onRemove&&a.onRemove(this.local[l].spec)}return this.children.length?pae(this.children,o||[],t,n,r,s,a):o?new gr(o.sort(qu),th):Qs}add(t,n){return n.length?this==Qs?gr.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let s,a=0;t.forEach((l,c)=>{let d=c+r,u;if(u=TP(n,l,d)){for(s||(s=this.children.slice());a<s.length&&s[a]<c;)a+=3;s[a]==c?s[a+2]=s[a+2].addInner(l,u,d+1):s.splice(a,0,c,c+l.nodeSize,Vb(u,l,d+1,$u)),a+=3}});let o=_P(a?LP(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new gr(o.length?this.local.concat(o).sort(qu):this.local,s||this.children)}remove(t){return t.length==0||this==Qs?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,s=this.local;for(let a=0;a<r.length;a+=3){let o,l=r[a]+n,c=r[a+1]+n;for(let u=0,f;u<t.length;u++)(f=t[u])&&f.from>l&&f.to<c&&(t[u]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[a+2].removeInner(o,l+1);d!=Qs?r[a+2]=d:(r.splice(a,3),a-=3)}if(s.length){for(let a=0,o;a<t.length;a++)if(o=t[a])for(let l=0;l<s.length;l++)s[l].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(l--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new gr(s,r):Qs}forChild(t,n){if(this==Qs)return this;if(n.isLeaf)return gr.empty;let r,s;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let a=t+1,o=a+n.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>a&&c.type instanceof Dd){let d=Math.max(a,c.from)-a,u=Math.min(o,c.to)-a;d<u&&(s||(s=[])).push(c.copy(d,u))}}if(s){let l=new gr(s.sort(qu),th);return r?new Qc([l,r]):l}return r||Qs}eq(t){if(this==t)return!0;if(!(t instanceof gr)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return Ik(this.localsInner(t))}localsInner(t){if(this==Qs)return th;if(t.inlineContent||!this.local.some(Dd.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Dd||n.push(this.local[r]);return n}forEachSet(t){t(this)}}gr.empty=new gr([],[]);gr.removeOverlap=Ik;const Qs=gr.empty;class Qc{constructor(t){this.members=t}map(t,n){const r=this.members.map(s=>s.map(t,n,$u));return Qc.from(r)}forChild(t,n){if(n.isLeaf)return gr.empty;let r=[];for(let s=0;s<this.members.length;s++){let a=this.members[s].forChild(t,n);a!=Qs&&(a instanceof Qc?r=r.concat(a.members):r.push(a))}return Qc.from(r)}eq(t){if(!(t instanceof Qc)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let s=0;s<this.members.length;s++){let a=this.members[s].localsInner(t);if(a.length)if(!n)n=a;else{r&&(n=n.slice(),r=!1);for(let o=0;o<a.length;o++)n.push(a[o])}}return n?Ik(r?n:n.sort(qu)):th}static from(t){switch(t.length){case 0:return Qs;case 1:return t[0];default:return new Qc(t.every(n=>n instanceof gr)?t:t.reduce((n,r)=>n.concat(r instanceof gr?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function pae(e,t,n,r,s,a,o){let l=e.slice();for(let d=0,u=a;d<n.maps.length;d++){let f=0;n.maps[d].forEach((p,h,m,g)=>{let x=g-m-(h-p);for(let y=0;y<l.length;y+=3){let v=l[y+1];if(v<0||p>v+u-f)continue;let N=l[y]+u-f;h>=N?l[y+1]=p<=N?-2:-1:p>=u&&x&&(l[y]+=x,l[y+1]+=x)}f+=x}),u=n.maps[d].map(u,-1)}let c=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){c=!0,l[d+1]=-1;continue}let u=n.map(e[d]+a),f=u-s;if(f<0||f>=r.content.size){c=!0;continue}let p=n.map(e[d+1]+a,-1),h=p-s,{index:m,offset:g}=r.content.findIndex(f),x=r.maybeChild(m);if(x&&g==f&&g+x.nodeSize==h){let y=l[d+2].mapInner(n,x,u+1,e[d]+a+1,o);y!=Qs?(l[d]=f,l[d+1]=h,l[d+2]=y):(l[d+1]=-2,c=!0)}else c=!0}if(c){let d=mae(l,e,t,n,s,a,o),u=Vb(d,r,0,o);t=u.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,p=0;f<u.children.length;f+=3){let h=u.children[f];for(;p<l.length&&l[p]<h;)p+=3;l.splice(p,0,u.children[f],u.children[f+1],u.children[f+2])}}return new gr(t.sort(qu),l)}function _P(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let s=e[r];n.push(new ha(s.from+t,s.to+t,s.type))}return n}function mae(e,t,n,r,s,a,o){function l(c,d){for(let u=0;u<c.local.length;u++){let f=c.local[u].map(r,s,d);f?n.push(f):o.onRemove&&o.onRemove(c.local[u].spec)}for(let u=0;u<c.children.length;u+=3)l(c.children[u+2],c.children[u]+d+1)}for(let c=0;c<e.length;c+=3)e[c+1]==-1&&l(e[c+2],t[c]+a+1);return n}function TP(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,s=null;for(let a=0,o;a<e.length;a++)(o=e[a])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),e[a]=null);return s}function LP(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Vb(e,t,n,r){let s=[],a=!1;t.forEach((l,c)=>{let d=TP(e,l,c+n);if(d){a=!0;let u=Vb(d,l,n+c+1,r);u!=Qs&&s.push(c,c+l.nodeSize,u)}});let o=_P(a?LP(e):e,-n).sort(qu);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||s.length?new gr(o,s):Qs}function qu(e,t){return e.from-t.from||e.to-t.to}function Ik(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let s=n+1;s<t.length;s++){let a=t[s];if(a.from==r.from){a.to!=r.to&&(t==e&&(t=e.slice()),t[s]=a.copy(a.from,r.to),dE(t,s+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,a.from),dE(t,s,r.copy(a.from,r.to)));break}}}return t}function dE(e,t,n){for(;t<e.length&&qu(n,e[t])>0;)t++;e.splice(t,0,n)}function Kw(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Qs&&t.push(r)}),e.cursorWrapper&&t.push(gr.create(e.state.doc,[e.cursorWrapper.deco])),Qc.from(t)}const gae={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},xae=Ra&&Ad<=11;class yae{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class bae{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new yae,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Ra&&Ad<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),xae&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,gae)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(nE(this.view)){if(this.suppressingSelectionUpdates)return rc(this.view);if(Ra&&Ad<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&lf(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let a=t.focusNode;a;a=lp(a))n.add(a);for(let a=t.anchorNode;a;a=lp(a))if(n.has(a)){r=a;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&nE(t)&&!this.ignoreSelectionChange(r),a=-1,o=-1,l=!1,c=[];if(t.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],c);f&&(a=a<0?f.from:Math.min(f.from,a),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(l=!0))}if(Hi&&c.length){let u=c.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,p]=u;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of u){let h=p.parentNode;h&&h.nodeName=="LI"&&(!f||Nae(t,f)!=h)&&p.remove()}}}else if((Cs||ta)&&c.some(u=>u.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let u of c)if(u.nodeName=="BR"&&u.parentNode){let f=u.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&u.parentNode.removeChild(u)}}let d=null;a<0&&s&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&p1(r)&&(d=Ek(t))&&d.eq(nn.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,rc(t),this.currentSelection.set(r),t.scrollToSelection()):(a>-1||s)&&(a>-1&&(t.docView.markDirty(a,o),vae(t)),this.handleDOMChange(a,o,l,c),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||rc(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let f=t.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let s=t.previousSibling,a=t.nextSibling;if(Ra&&Ad<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:f,nextSibling:p}=t.addedNodes[u];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(s=f),(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(a=p)}let o=s&&s.parentNode==t.target?Fs(s)+1:0,l=r.localPosFromDOM(t.target,o,-1),c=a&&a.parentNode==t.target?Fs(a):t.target.childNodes.length,d=r.localPosFromDOM(t.target,c,1);return{from:l,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let uE=new WeakMap,fE=!1;function vae(e){if(!uE.has(e)&&(uE.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Hi,fE)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),fE=!0}}function hE(e,t){let n=t.startContainer,r=t.startOffset,s=t.endContainer,a=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return lf(o.node,o.offset,s,a)&&([n,r,s,a]=[s,a,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:a}}function wae(e,t){if(t.getComposedRanges){let s=t.getComposedRanges(e.root)[0];if(s)return hE(e,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?hE(e,n):null}function Nae(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function jae(e,t,n){let{node:r,fromOffset:s,toOffset:a,from:o,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),d,u=c.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(d=[{node:u,offset:c.anchorOffset}],p1(c)||d.push({node:c.focusNode,offset:c.focusOffset})),Cs&&e.input.lastKeyCode===8)for(let x=a;x>s;x--){let y=r.childNodes[x-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){a=x;break}if(!v||v.size)break}let f=e.state.doc,p=e.someProp("domParser")||Cd.fromSchema(e.state.schema),h=f.resolve(o),m=null,g=p.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:a,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:Sae,context:h});if(d&&d[0].pos!=null){let x=d[0].pos,y=d[1]&&d[1].pos;y==null&&(y=x),m={anchor:x+o,head:y+o}}return{doc:g,sel:m,from:o,to:l}}function Sae(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(ta&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||ta&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const kae=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Cae(e,t,n,r,s){let a=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let A=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,S=Ek(e,A);if(S&&!e.state.selection.eq(S)){if(Cs&&ql&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",I=>I(e,Nu(13,"Enter"))))return;let E=e.state.tr.setSelection(S);A=="pointer"?E.setMeta("pointer",!0):A=="key"&&E.scrollIntoView(),a&&E.setMeta("composition",a),e.dispatch(E)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let c=e.state.selection,d=jae(e,t,n),u=e.state.doc,f=u.slice(d.from,d.to),p,h;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(p=e.state.selection.to,h="end"):(p=e.state.selection.from,h="start"),e.input.lastKeyCode=null;let m=Dae(f.content,d.doc.content,d.from,p,h);if(m&&e.input.domChangeCount++,(cp&&e.input.lastIOSEnter>Date.now()-225||ql)&&s.some(A=>A.nodeType==1&&!kae.test(A.nodeName))&&(!m||m.endA>=m.endB)&&e.someProp("handleKeyDown",A=>A(e,Nu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!m)if(r&&c instanceof $t&&!c.empty&&c.$head.sameParent(c.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))m={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let A=pE(e,e.state.doc,d.sel);if(A&&!A.eq(e.state.selection)){let S=e.state.tr.setSelection(A);a&&S.setMeta("composition",a),e.dispatch(S)}}return}e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof $t&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),Ra&&Ad<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>d.from&&d.doc.textBetween(m.start-d.from-1,m.start-d.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=d.doc.resolveNoCache(m.start-d.from),x=d.doc.resolveNoCache(m.endB-d.from),y=u.resolve(m.start),v=g.sameParent(x)&&g.parent.inlineContent&&y.end()>=m.endA;if((cp&&e.input.lastIOSEnter>Date.now()-225&&(!v||s.some(A=>A.nodeName=="DIV"||A.nodeName=="P"))||!v&&g.pos<d.doc.content.size&&(!g.sameParent(x)||!g.parent.inlineContent)&&g.pos<x.pos&&!/\S/.test(d.doc.textBetween(g.pos,x.pos,"","")))&&e.someProp("handleKeyDown",A=>A(e,Nu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>m.start&&Mae(u,m.start,m.endA,g,x)&&e.someProp("handleKeyDown",A=>A(e,Nu(8,"Backspace")))){ql&&Cs&&e.domObserver.suppressSelectionUpdates();return}Cs&&m.endB==m.start&&(e.input.lastChromeDelete=Date.now()),ql&&!v&&g.start()!=x.start()&&x.parentOffset==0&&g.depth==x.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==m.endA&&(m.endB-=2,x=d.doc.resolveNoCache(m.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(A){return A(e,Nu(13,"Enter"))})},20));let N=m.start,j=m.endA,D=A=>{let S=A||e.state.tr.replace(N,j,d.doc.slice(m.start-d.from,m.endB-d.from));if(d.sel){let E=pE(e,S.doc,d.sel);E&&!(Cs&&e.composing&&E.empty&&(m.start!=m.endB||e.input.lastChromeDelete<Date.now()-100)&&(E.head==N||E.head==S.mapping.map(j)-1)||Ra&&E.empty&&E.head==N)&&S.setSelection(E)}return a&&S.setMeta("composition",a),S.scrollIntoView()},T;if(v)if(g.pos==x.pos){Ra&&Ad<=11&&g.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>rc(e),20));let A=D(e.state.tr.delete(N,j)),S=u.resolve(m.start).marksAcross(u.resolve(m.endA));S&&A.ensureMarks(S),e.dispatch(A)}else if(m.endA==m.endB&&(T=Aae(g.parent.content.cut(g.parentOffset,x.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let A=D(e.state.tr);T.type=="add"?A.addMark(N,j,T.mark):A.removeMark(N,j,T.mark),e.dispatch(A)}else if(g.parent.child(g.index()).isText&&g.index()==x.index()-(x.textOffset?0:1)){let A=g.parent.textBetween(g.parentOffset,x.parentOffset),S=()=>D(e.state.tr.insertText(A,N,j));e.someProp("handleTextInput",E=>E(e,N,j,A,S))||e.dispatch(S())}else e.dispatch(D());else e.dispatch(D())}function pE(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:_k(e,t.resolve(n.anchor),t.resolve(n.head))}function Aae(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,s=n,a=r,o,l,c;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)a=n[u].removeFromSet(a);if(s.length==1&&a.length==0)l=s[0],o="add",c=u=>u.mark(l.addToSet(u.marks));else if(s.length==0&&a.length==1)l=a[0],o="remove",c=u=>u.mark(l.removeFromSet(u.marks));else return null;let d=[];for(let u=0;u<t.childCount;u++)d.push(c(t.child(u)));if(Ye.from(d).eq(e))return{mark:l,type:o}}function Mae(e,t,n,r,s){if(n-t<=s.pos-r.pos||Jw(r,!0,!1)<s.pos)return!1;let a=e.resolve(t);if(!r.parent.isTextblock){let l=a.nodeAfter;return l!=null&&n==t+l.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let o=e.resolve(Jw(a,!0,!0));return!o.parent.isTextblock||o.pos>n||Jw(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Jw(e,t,n){let r=e.depth,s=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,s++,t=!1;if(n){let a=e.node(r).maybeChild(e.indexAfter(r));for(;a&&!a.isLeaf;)a=a.firstChild,s++}return s}function Dae(e,t,n,r,s){let a=e.findDiffStart(t,n);if(a==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(s=="end"){let c=Math.max(0,a-Math.min(o,l));r-=o+c-a}if(o<a&&e.size<t.size){let c=r<=a&&r>=o?a-r:0;a-=c,a&&a<t.size&&mE(t.textBetween(a-1,a+1))&&(a+=c?1:-1),l=a+(l-o),o=a}else if(l<a){let c=r<=a&&r>=l?a-r:0;a-=c,a&&a<e.size&&mE(e.textBetween(a-1,a+1))&&(a+=c?1:-1),o=a+(o-l),l=a}return{start:a,endA:o,endB:l}}function mE(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class RP{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Yse,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(vE),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=yE(this),xE(this),this.nodeViews=bE(this),this.docView=JD(this.state.doc,gE(this),Kw(this),this.dom,this),this.domObserver=new bae(this,(r,s,a,o)=>Cae(this,r,s,a,o)),this.domObserver.start(),Wse(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ij(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(vE),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let s=this.state,a=!1,o=!1;t.storedMarks&&this.composing&&(AP(this),o=!0),this.state=t;let l=s.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=bE(this);_ae(h,this.nodeViews)&&(this.nodeViews=h,a=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&ij(this),this.editable=yE(this),xE(this);let c=Kw(this),d=gE(this),u=s.plugins!=t.plugins&&!s.doc.eq(t.doc)?"reset":t.scrollToSelection>s.scrollToSelection?"to selection":"preserve",f=a||!this.docView.matchesNode(t.doc,d,c);(f||!t.selection.eq(s.selection))&&(o=!0);let p=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&ose(this);if(o){this.domObserver.stop();let h=f&&(Ra||Cs)&&!this.composing&&!s.selection.empty&&!t.selection.empty&&Eae(s.selection,t.selection);if(f){let m=Cs?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=oae(this)),(a||!this.docView.update(t.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=JD(t.doc,d,c,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&_se(this))?rc(this,h):(mP(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():p&&lse(p)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Dt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&qD(this,n.getBoundingClientRect(),t)}else qD(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let a=r.from+(this.state.doc.content.size-n.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==r.node&&(s=a)}this.dragging=new DP(t.slice,t.move,s<0?void 0:Dt.create(this.state.doc,s))}someProp(t,n){let r=this._props&&this._props[t],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(s=n?n(l):l))return s}let a=this.state.plugins;if(a)for(let o=0;o<a.length;o++){let l=a[o].props[t];if(l!=null&&(s=n?n(l):l))return s}}hasFocus(){if(Ra){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&cse(this.dom),rc(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return pse(this,t)}coordsAtPos(t,n=1){return oP(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let s=this.docView.posFromDOM(t,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(t,n){return bse(this,n||this.state,t)}pasteHTML(t,n){return Wg(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Wg(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return Tk(this,t)}destroy(){this.docView&&(Gse(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Kw(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Xre())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Jse(this,t)}domSelectionRange(){let t=this.domSelection();return t?ta&&this.root.nodeType===11&&nse(this.dom.ownerDocument)==this.dom&&wae(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}RP.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function gE(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[ha.node(0,e.state.doc.content.size,t)]}function xE(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:ha.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function yE(e){return!e.someProp("editable",t=>t(e.state)===!1)}function Eae(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function bE(e){let t=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(t,s)||(t[s]=r[s])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function _ae(e,t){let n=0,r=0;for(let s in e){if(e[s]!=t[s])return!0;n++}for(let s in t)r++;return n!=r}function vE(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Fd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yb={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Tae=typeof navigator<"u"&&/Mac/.test(navigator.platform),Lae=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var zs=0;zs<10;zs++)Fd[48+zs]=Fd[96+zs]=String(zs);for(var zs=1;zs<=24;zs++)Fd[zs+111]="F"+zs;for(var zs=65;zs<=90;zs++)Fd[zs]=String.fromCharCode(zs+32),Yb[zs]=String.fromCharCode(zs);for(var Xw in Fd)Yb.hasOwnProperty(Xw)||(Yb[Xw]=Fd[Xw]);function Rae(e){var t=Tae&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Lae&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Yb:Fd)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Oae=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Pae=typeof navigator<"u"&&/Win/.test(navigator.platform);function Iae(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,s,a,o;for(let l=0;l<t.length-1;l++){let c=t[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))Oae?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function Fae(e){let t=Object.create(null);for(let n in e)t[Iae(n)]=e[n];return t}function Qw(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function zae(e){return new vr({props:{handleKeyDown:OP(e)}})}function OP(e){let t=Fae(e);return function(n,r){let s=Rae(r),a,o=t[Qw(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let l=t[Qw(s,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Pae&&r.ctrlKey&&r.altKey)&&(a=Fd[r.keyCode])&&a!=s){let l=t[Qw(a,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}var Bae=Object.defineProperty,Fk=(e,t)=>{for(var n in t)Bae(e,n,{get:t[n],enumerable:!0})};function x1(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:a}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return a},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,a=n.storedMarks,n}}}var y1=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:s}=n,a=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const u=l(...d)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:a}=r,o=[],l=!!e,c=e||s.tr,d=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(c),o.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(n).map(([f,p])=>[f,(...m)=>{const g=this.buildProps(c,t),x=p(...m)(g);return o.push(x),u}])),run:d};return u}createCan(e){const{rawCommands:t,state:n}=this,r=!1,s=e||n.tr,a=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...d)=>c(...d)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:a}=r,o={tr:e,editor:r,view:a,state:x1({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)(o)]))}};return o}},PP={};Fk(PP,{blur:()=>Hae,clearContent:()=>Uae,clearNodes:()=>$ae,command:()=>qae,createParagraphNear:()=>Vae,cut:()=>Yae,deleteCurrentNode:()=>Wae,deleteNode:()=>Gae,deleteRange:()=>Kae,deleteSelection:()=>Jae,enter:()=>Xae,exitCode:()=>Qae,extendMarkRange:()=>Zae,first:()=>eie,focus:()=>nie,forEach:()=>rie,insertContent:()=>sie,insertContentAt:()=>oie,joinBackward:()=>die,joinDown:()=>cie,joinForward:()=>uie,joinItemBackward:()=>fie,joinItemForward:()=>hie,joinTextblockBackward:()=>pie,joinTextblockForward:()=>mie,joinUp:()=>lie,keyboardShortcut:()=>xie,lift:()=>yie,liftEmptyBlock:()=>bie,liftListItem:()=>vie,newlineInCode:()=>wie,resetAttributes:()=>Nie,scrollIntoView:()=>jie,selectAll:()=>Sie,selectNodeBackward:()=>kie,selectNodeForward:()=>Cie,selectParentNode:()=>Aie,selectTextblockEnd:()=>Mie,selectTextblockStart:()=>Die,setContent:()=>Eie,setMark:()=>Jie,setMeta:()=>Xie,setNode:()=>Qie,setNodeSelection:()=>Zie,setTextDirection:()=>eoe,setTextSelection:()=>toe,sinkListItem:()=>noe,splitBlock:()=>roe,splitListItem:()=>soe,toggleList:()=>aoe,toggleMark:()=>ioe,toggleNode:()=>ooe,toggleWrap:()=>loe,undoInputRule:()=>coe,unsetAllMarks:()=>doe,unsetMark:()=>uoe,unsetTextDirection:()=>foe,updateAttributes:()=>hoe,wrapIn:()=>poe,wrapInList:()=>moe});var Hae=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),Uae=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),$ae=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return n&&s.forEach(({$from:a,$to:o})=>{e.doc.nodesBetween(a.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:d,mapping:u}=t,f=d.resolve(u.map(c)),p=d.resolve(u.map(c+l.nodeSize)),h=f.blockRange(p);if(!h)return;const m=Ep(h);if(l.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(h.start,g)}(m||m===0)&&t.lift(h,m)})}),!0},qae=e=>t=>e(t),Vae=()=>({state:e,dispatch:t})=>JO(e,t),Yae=(e,t)=>({editor:n,tr:r})=>{const{state:s}=n,a=s.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,a.content),r.setSelection(new $t(r.doc.resolve(Math.max(o-1,0)))),!0},Wae=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===r.type){if(t){const l=s.before(a),c=s.after(a);e.delete(l,c).scrollIntoView()}return!0}return!1};function as(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var Gae=e=>({tr:t,state:n,dispatch:r})=>{const s=as(e,n.schema),a=t.selection.$anchor;for(let o=a.depth;o>0;o-=1)if(a.node(o).type===s){if(r){const c=a.before(o),d=a.after(o);t.delete(c,d).scrollIntoView()}return!0}return!1},Kae=e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0},Jae=()=>({state:e,dispatch:t})=>Sk(e,t),Xae=()=>({commands:e})=>e.keyboardShortcut("Enter"),Qae=()=>({state:e,dispatch:t})=>Pre(e,t);function zk(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Wb(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(s=>n.strict?t[s]===e[s]:zk(t[s])?t[s].test(e[s]):t[s]===e[s]):!0}function IP(e,t,n={}){return e.find(r=>r.type===t&&Wb(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function wE(e,t,n={}){return!!IP(e,t,n)}function Bk(e,t,n){var r;if(!e||!t)return;let s=e.parent.childAfter(e.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===t))&&(s=e.parent.childBefore(e.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===t)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!IP([...s.node.marks],t,n)))return;let o=s.index,l=e.start()+s.offset,c=o+1,d=l+s.node.nodeSize;for(;o>0&&wE([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;c<e.parent.childCount&&wE([...e.parent.child(c).marks],t,n);)d+=e.parent.child(c).nodeSize,c+=1;return{from:l,to:d}}function xc(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var Zae=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const a=xc(e,r.schema),{doc:o,selection:l}=n,{$from:c,from:d,to:u}=l;if(s){const f=Bk(c,a,t);if(f&&f.from<=d&&f.to>=u){const p=$t.create(o,f.from,f.to);n.setSelection(p)}}return!0},eie=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function FP(e){return e instanceof $t}function Du(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function zP(e,t=null){if(!t)return null;const n=nn.atStart(e),r=nn.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const s=n.from,a=r.to;return t==="all"?$t.create(e,Du(0,s,a),Du(e.content.size,s,a)):$t.create(e,Du(t,s,a),Du(t,s,a))}function tie(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Hk(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var nie=(e=null,t={})=>({editor:n,view:r,tr:s,dispatch:a})=>{t={scrollIntoView:!0,...t};const o=()=>{(Hk()||tie())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(a&&e===null&&!FP(n.state.selection))return o(),!0;const l=zP(s.doc,e)||n.state.selection,c=n.state.selection.eq(l);return a&&(c||s.setSelection(l),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},rie=(e,t)=>n=>e.every((r,s)=>t(r,{...n,index:s})),sie=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),BP=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&BP(r)}return e};function Y0(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return BP(n)}function Kg(e,t,n){if(e instanceof kd||e instanceof Ye)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,s=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return Ye.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(a){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",a),Kg("",t,n)}if(s){if(n.errorOnInvalidContent){let o=!1,l="";const c=new jO({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?Cd.fromSchema(c).parseSlice(Y0(e),n.parseOptions):Cd.fromSchema(c).parse(Y0(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const a=Cd.fromSchema(t);return n.slice?a.parseSlice(Y0(e),n.parseOptions).content:a.parse(Y0(e),n.parseOptions)}return Kg("",t,n)}function aie(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof ks||s instanceof Ms))return;const a=e.mapping.maps[r];let o=0;a.forEach((l,c,d,u)=>{o===0&&(o=u)}),e.setSelection(nn.near(e.doc.resolve(o),n))}var iie=e=>!("type"in e),oie=(e,t,n)=>({tr:r,dispatch:s,editor:a})=>{var o;if(s){n={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const c=x=>{a.emit("contentError",{editor:a,error:x,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{Kg(t,a.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(x){c(x)}try{l=Kg(t,a.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:a.options.enableContentCheck})}catch(x){return c(x),!1}let{from:u,to:f}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},p=!0,h=!0;if((iie(l)?l:[l]).forEach(x=>{x.check(),p=p?x.isText&&x.marks.length===0:!1,h=h?x.isBlock:!1}),u===f&&h){const{parent:x}=r.doc.resolve(u);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(u-=1,f+=1)}let g;if(p){if(Array.isArray(t))g=t.map(x=>x.text||"").join("");else if(t instanceof Ye){let x="";t.forEach(y=>{y.text&&(x+=y.text)}),g=x}else typeof t=="object"&&t&&t.text?g=t.text:g=t;r.insertText(g,u,f)}else{g=l;const x=r.doc.resolve(u),y=x.node(),v=x.parentOffset===0,N=y.isText||y.isTextblock,j=y.content.size>0;v&&N&&j&&(u=Math.max(0,u-1)),r.replaceWith(u,f,g)}n.updateSelection&&aie(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:g})}return!0},lie=()=>({state:e,dispatch:t})=>Lre(e,t),cie=()=>({state:e,dispatch:t})=>Rre(e,t),die=()=>({state:e,dispatch:t})=>$O(e,t),uie=()=>({state:e,dispatch:t})=>WO(e,t),fie=()=>({state:e,dispatch:t,tr:n})=>{try{const r=u1(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},hie=()=>({state:e,dispatch:t,tr:n})=>{try{const r=u1(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},pie=()=>({state:e,dispatch:t})=>_re(e,t),mie=()=>({state:e,dispatch:t})=>Tre(e,t);function HP(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function gie(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,s,a,o;for(let l=0;l<t.length-1;l+=1){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))Hk()||HP()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),a&&(n=`Shift-${n}`),n}var xie=e=>({editor:t,view:n,tr:r,dispatch:s})=>{const a=gie(e).split(/-(?!$)/),o=a.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),c=t.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return c==null||c.steps.forEach(d=>{const u=d.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function zd(e,t,n={}){const{from:r,to:s,empty:a}=e.selection,o=t?as(t,e.schema):null,l=[];e.doc.nodesBetween(r,s,(f,p)=>{if(f.isText)return;const h=Math.max(r,p),m=Math.min(s,p+f.nodeSize);l.push({node:f,from:h,to:m})});const c=s-r,d=l.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>Wb(f.node.attrs,n,{strict:!1}));return a?!!d.length:d.reduce((f,p)=>f+p.to-p.from,0)>=c}var yie=(e,t={})=>({state:n,dispatch:r})=>{const s=as(e,n.schema);return zd(n,s,t)?Ore(n,r):!1},bie=()=>({state:e,dispatch:t})=>XO(e,t),vie=e=>({state:t,dispatch:n})=>{const r=as(e,t.schema);return Wre(r)(t,n)},wie=()=>({state:e,dispatch:t})=>KO(e,t);function b1(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function NE(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,s)=>(n.includes(s)||(r[s]=e[s]),r),{})}var Nie=(e,t)=>({tr:n,state:r,dispatch:s})=>{let a=null,o=null;const l=b1(typeof e=="string"?e:e.name,r.schema);if(!l)return!1;l==="node"&&(a=as(e,r.schema)),l==="mark"&&(o=xc(e,r.schema));let c=!1;return n.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(u,f)=>{a&&a===u.type&&(c=!0,s&&n.setNodeMarkup(f,void 0,NE(u.attrs,t))),o&&u.marks.length&&u.marks.forEach(p=>{o===p.type&&(c=!0,s&&n.addMark(f,f+u.nodeSize,o.create(NE(p.attrs,t))))})})}),c},jie=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),Sie=()=>({tr:e,dispatch:t})=>{if(t){const n=new mi(e.doc);e.setSelection(n)}return!0},kie=()=>({state:e,dispatch:t})=>VO(e,t),Cie=()=>({state:e,dispatch:t})=>GO(e,t),Aie=()=>({state:e,dispatch:t})=>zre(e,t),Mie=()=>({state:e,dispatch:t})=>Ure(e,t),Die=()=>({state:e,dispatch:t})=>Hre(e,t);function oj(e,t,n={},r={}){return Kg(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var Eie=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:a,dispatch:o,commands:l})=>{const{doc:c}=a;if(r.preserveWhitespace!=="full"){const d=oj(e,s.schema,r,{errorOnInvalidContent:t??s.options.enableContentCheck});return o&&a.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!n),!0}return o&&a.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:c.content.size},e,{parseOptions:r,errorOnInvalidContent:t??s.options.enableContentCheck})};function UP(e,t){const n=xc(t,e.schema),{from:r,to:s,empty:a}=e.selection,o=[];a?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function $P(e,t){const n=new zO(e);return t.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function _ie(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Tie(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(s,a)=>{n(s)&&r.push({node:s,pos:a})}),r}function Lie(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function v1(e){return t=>Lie(t.$from,e)}function Ct(e,t,n){return e.config[t]===void 0&&e.parent?Ct(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?Ct(e.parent,t,n):null}):e.config[t]}function Uk(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=Ct(t,"addExtensions",n);return r?[t,...Uk(r())]:t}).flat(10)}function $k(e,t){const n=jf.fromSchema(t).serializeFragment(e),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function qP(e){return typeof e=="function"}function On(e,t=void 0,...n){return qP(e)?t?e.bind(t)(...n):e(...n):e}function Rie(e={}){return Object.keys(e).length===0&&e.constructor===Object}function dp(e){const t=e.filter(s=>s.type==="extension"),n=e.filter(s=>s.type==="node"),r=e.filter(s=>s.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function VP(e){const t=[],{nodeExtensions:n,markExtensions:r}=dp(e),s=[...n,...r],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:s},c=Ct(o,"addGlobalAttributes",l);if(!c)return;c().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([p,h])=>{t.push({type:f,name:p,attribute:{...a,...h}})})})})}),s.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},c=Ct(o,"addAttributes",l);if(!c)return;const d=c();Object.entries(d).forEach(([u,f])=>{const p={...a,...f};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,t.push({type:o.name,name:u,attribute:p})})}),t}function Tr(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([s,a])=>{if(!r[s]){r[s]=a;return}if(s==="class"){const l=a?String(a).split(" "):[],c=r[s]?r[s].split(" "):[],d=l.filter(u=>!c.includes(u));r[s]=[...c,...d].join(" ")}else if(s==="style"){const l=a?a.split(";").map(u=>u.trim()).filter(Boolean):[],c=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],d=new Map;c.forEach(u=>{const[f,p]=u.split(":").map(h=>h.trim());d.set(f,p)}),l.forEach(u=>{const[f,p]=u.split(":").map(h=>h.trim());d.set(f,p)}),r[s]=Array.from(d.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[s]=a}),r},{})}function Gb(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Tr(n,r),{})}function Oie(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function jE(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const s=t.reduce((a,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):Oie(n.getAttribute(o.name));return l==null?a:{...a,[o.name]:l}},{});return{...r,...s}}}}function SE(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&Rie(n)?!1:n!=null))}function kE(e){var t,n;const r={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(r.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function Pie(e,t){var n;const r=VP(e),{nodeExtensions:s,markExtensions:a}=dp(e),o=(n=s.find(d=>Ct(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(s.map(d=>{const u=r.filter(y=>y.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:t},p=e.reduce((y,v)=>{const N=Ct(v,"extendNodeSchema",f);return{...y,...N?N(d):{}}},{}),h=SE({...p,content:On(Ct(d,"content",f)),marks:On(Ct(d,"marks",f)),group:On(Ct(d,"group",f)),inline:On(Ct(d,"inline",f)),atom:On(Ct(d,"atom",f)),selectable:On(Ct(d,"selectable",f)),draggable:On(Ct(d,"draggable",f)),code:On(Ct(d,"code",f)),whitespace:On(Ct(d,"whitespace",f)),linebreakReplacement:On(Ct(d,"linebreakReplacement",f)),defining:On(Ct(d,"defining",f)),isolating:On(Ct(d,"isolating",f)),attrs:Object.fromEntries(u.map(kE))}),m=On(Ct(d,"parseHTML",f));m&&(h.parseDOM=m.map(y=>jE(y,u)));const g=Ct(d,"renderHTML",f);g&&(h.toDOM=y=>g({node:y,HTMLAttributes:Gb(y,u)}));const x=Ct(d,"renderText",f);return x&&(h.toText=x),[d.name,h]})),c=Object.fromEntries(a.map(d=>{const u=r.filter(x=>x.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:t},p=e.reduce((x,y)=>{const v=Ct(y,"extendMarkSchema",f);return{...x,...v?v(d):{}}},{}),h=SE({...p,inclusive:On(Ct(d,"inclusive",f)),excludes:On(Ct(d,"excludes",f)),group:On(Ct(d,"group",f)),spanning:On(Ct(d,"spanning",f)),code:On(Ct(d,"code",f)),attrs:Object.fromEntries(u.map(kE))}),m=On(Ct(d,"parseHTML",f));m&&(h.parseDOM=m.map(x=>jE(x,u)));const g=Ct(d,"renderHTML",f);return g&&(h.toDOM=x=>g({mark:x,HTMLAttributes:Gb(x,u)})),[d.name,h]}));return new jO({topNode:o,nodes:l,marks:c})}function Iie(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function qk(e){return e.sort((n,r)=>{const s=Ct(n,"priority")||100,a=Ct(r,"priority")||100;return s>a?-1:s<a?1:0})}function YP(e){const t=qk(Uk(e)),n=Iie(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function WP(e,t,n){const{from:r,to:s}=t,{blockSeparator:a=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,s,(c,d,u,f)=>{var p;c.isBlock&&d>r&&(l+=a);const h=o==null?void 0:o[c.type.name];if(h)return u&&(l+=h({node:c,pos:d,parent:u,index:f,range:t})),!1;c.isText&&(l+=(p=c==null?void 0:c.text)==null?void 0:p.slice(Math.max(r,d)-d,s-d))}),l}function Fie(e,t){const n={from:0,to:e.content.size};return WP(e,n,t)}function GP(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function zie(e,t){const n=as(t,e.schema),{from:r,to:s}=e.selection,a=[];e.doc.nodesBetween(r,s,l=>{a.push(l)});const o=a.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function KP(e,t){const n=b1(typeof t=="string"?t:t.name,e.schema);return n==="node"?zie(e,t):n==="mark"?UP(e,t):{}}function Bie(e,t=JSON.stringify){const n={};return e.filter(r=>{const s=t(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function Hie(e){const t=Bie(e);return t.length===1?t:t.filter((n,r)=>!t.filter((a,o)=>o!==r).some(a=>n.oldRange.from>=a.oldRange.from&&n.oldRange.to<=a.oldRange.to&&n.newRange.from>=a.newRange.from&&n.newRange.to<=a.newRange.to))}function JP(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((s,a)=>{const o=[];if(s.ranges.length)s.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=n[a];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const d=t.slice(a).map(l,-1),u=t.slice(a).map(c),f=t.invert().map(d,-1),p=t.invert().map(u);r.push({oldRange:{from:f,to:p},newRange:{from:d,to:u}})})}),Hie(r)}function Vk(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(s=>{const a=n.resolve(e),o=Bk(a,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(e,t,(s,a)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:a,to:a+s.nodeSize,mark:o})))}),r}var Uie=(e,t,n,r=20)=>{const s=e.doc.resolve(n);let a=r,o=null;for(;a>0&&o===null;){const l=s.node(a);(l==null?void 0:l.type.name)===t?o=l:a-=1}return[o,a]};function Zw(e,t){return t.nodes[e]||t.marks[e]||null}function Ty(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=e.find(a=>a.type===t&&a.name===r);return s?s.attribute.keepOnSplit:!1}))}var $ie=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(s,a,o,l)=>{var c,d;const u=((d=(c=s.type.spec).toText)==null?void 0:d.call(c,{node:s,pos:a,parent:o,index:l}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-a))}),n};function lj(e,t,n={}){const{empty:r,ranges:s}=e.selection,a=t?xc(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>a?a.name===f.type.name:!0).find(f=>Wb(f.attrs,n,{strict:!1}));let o=0;const l=[];if(s.forEach(({$from:f,$to:p})=>{const h=f.pos,m=p.pos;e.doc.nodesBetween(h,m,(g,x)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(h,x),v=Math.min(m,x+g.nodeSize),N=v-y;o+=N,l.push(...g.marks.map(j=>({mark:j,from:y,to:v})))})}),o===0)return!1;const c=l.filter(f=>a?a.name===f.mark.type.name:!0).filter(f=>Wb(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),d=l.filter(f=>a?f.mark.type!==a&&f.mark.type.excludes(a):!0).reduce((f,p)=>f+p.to-p.from,0);return(c>0?c+d:c)>=o}function qie(e,t,n={}){if(!t)return zd(e,null,n)||lj(e,null,n);const r=b1(t,e.schema);return r==="node"?zd(e,t,n):r==="mark"?lj(e,t,n):!1}var Vie=(e,t)=>{const{$from:n,$to:r,$anchor:s}=e.selection;if(t){const a=v1(l=>l.type.name===t)(e.selection);if(!a)return!1;const o=e.doc.resolve(a.pos+1);return s.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},Yie=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function CE(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function AE(e,t){const{nodeExtensions:n}=dp(t),r=n.find(o=>o.name===e);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},a=On(Ct(r,"group",s));return typeof a!="string"?!1:a.split(" ").includes("list")}function w1(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let s=!0;return e.content.forEach(a=>{s!==!1&&(w1(a,{ignoreWhitespace:n,checkChildren:t})||(s=!1))}),s}return!1}function XP(e){return e instanceof Dt}var QP=class ZP{constructor(t){this.position=t}static fromJSON(t){return new ZP(t.position)}toJSON(){return{position:this.position}}};function Wie(e,t){const n=t.mapping.mapResult(e.position);return{position:new QP(n.pos),mapResult:n}}function Gie(e){return new QP(e)}function Kie(e,t,n){var r;const{selection:s}=t;let a=null;if(FP(s)&&(a=s.$cursor),a){const l=(r=e.storedMarks)!=null?r:a.marks();return a.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=s;return o.some(({$from:l,$to:c})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,c.pos,(u,f,p)=>{if(d)return!1;if(u.isInline){const h=!p||p.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));d=h&&m}return!d}),d})}var Jie=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:a}=n,{empty:o,ranges:l}=a,c=xc(e,r.schema);if(s)if(o){const d=UP(r,c);n.addStoredMark(c.create({...d,...t}))}else l.forEach(d=>{const u=d.$from.pos,f=d.$to.pos;r.doc.nodesBetween(u,f,(p,h)=>{const m=Math.max(h,u),g=Math.min(h+p.nodeSize,f);p.marks.find(y=>y.type===c)?p.marks.forEach(y=>{c===y.type&&n.addMark(m,g,c.create({...y.attrs,...t}))}):n.addMark(m,g,c.create(t))})});return Kie(r,n,c)},Xie=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),Qie=(e,t={})=>({state:n,dispatch:r,chain:s})=>{const a=as(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),a.isTextblock?s().command(({commands:l})=>HD(a,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>HD(a,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Zie=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,s=Du(e,0,r.content.size),a=Dt.create(r,s);t.setSelection(a)}return!0},eoe=(e,t)=>({tr:n,state:r,dispatch:s})=>{const{selection:a}=r;let o,l;return typeof t=="number"?(o=t,l=t):t&&"from"in t&&"to"in t?(o=t.from,l=t.to):(o=a.from,l=a.to),s&&n.doc.nodesBetween(o,l,(c,d)=>{c.isText||n.setNodeMarkup(d,void 0,{...c.attrs,dir:e})}),!0},toe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:s,to:a}=typeof e=="number"?{from:e,to:e}:e,o=$t.atStart(r).from,l=$t.atEnd(r).to,c=Du(s,o,l),d=Du(a,o,l),u=$t.create(r,c,d);t.setSelection(u)}return!0},noe=e=>({state:t,dispatch:n})=>{const r=as(e,t.schema);return Jre(r)(t,n)};function ME(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(s=>t==null?void 0:t.includes(s.type.name));e.tr.ensureMarks(r)}}var roe=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:a,doc:o}=t,{$from:l,$to:c}=a,d=s.extensionManager.attributes,u=Ty(d,l.node().type.name,l.node().attrs);if(a instanceof Dt&&a.node.isBlock)return!l.parentOffset||!nc(o,l.pos)?!1:(r&&(e&&ME(n,s.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,p=l.depth===0?void 0:_ie(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=f&&p?[{type:p,attrs:u}]:void 0,m=nc(t.doc,t.mapping.map(l.pos),1,h);if(!h&&!m&&nc(t.doc,t.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(m=!0,h=p?[{type:p,attrs:u}]:void 0),r){if(m&&(a instanceof $t&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,h),p&&!f&&!l.parentOffset&&l.parent.type!==p)){const g=t.mapping.map(l.before()),x=t.doc.resolve(g);l.node(-1).canReplaceWith(x.index(),x.index()+1,p)&&t.setNodeMarkup(t.mapping.map(l.before()),p)}e&&ME(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return m},soe=(e,t={})=>({tr:n,state:r,dispatch:s,editor:a})=>{var o;const l=as(e,r.schema),{$from:c,$to:d}=r.selection,u=r.selection.node;if(u&&u.isBlock||c.depth<2||!c.sameParent(d))return!1;const f=c.node(-1);if(f.type!==l)return!1;const p=a.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(s){let y=Ye.empty;const v=c.index(-1)?1:c.index(-2)?2:3;for(let S=c.depth-v;S>=c.depth-3;S-=1)y=Ye.from(c.node(S).copy(y));const N=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,j={...Ty(p,c.node().type.name,c.node().attrs),...t},D=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(j))||void 0;y=y.append(Ye.from(l.createAndFill(null,D)||void 0));const T=c.before(c.depth-(v-1));n.replace(T,c.after(-N),new ft(y,4-v,0));let A=-1;n.doc.nodesBetween(T,n.doc.content.size,(S,E)=>{if(A>-1)return!1;S.isTextblock&&S.content.size===0&&(A=E+1)}),A>-1&&n.setSelection($t.near(n.doc.resolve(A))),n.scrollIntoView()}return!0}const h=d.pos===c.end()?f.contentMatchAt(0).defaultType:null,m={...Ty(p,f.type.name,f.attrs),...t},g={...Ty(p,c.node().type.name,c.node().attrs),...t};n.delete(c.pos,d.pos);const x=h?[{type:l,attrs:m},{type:h,attrs:g}]:[{type:l,attrs:m}];if(!nc(n.doc,c.pos,2))return!1;if(s){const{selection:y,storedMarks:v}=r,{splittableMarks:N}=a.extensionManager,j=v||y.$to.parentOffset&&y.$from.marks();if(n.split(c.pos,2,x).scrollIntoView(),!j||!s)return!0;const D=j.filter(T=>N.includes(T.type.name));n.ensureMarks(D)}return!0},eN=(e,t)=>{const n=v1(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&qd(e.doc,n.pos)&&e.join(n.pos),!0},tN=(e,t)=>{const n=v1(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&qd(e.doc,r)&&e.join(r),!0},aoe=(e,t,n,r={})=>({editor:s,tr:a,state:o,dispatch:l,chain:c,commands:d,can:u})=>{const{extensions:f,splittableMarks:p}=s.extensionManager,h=as(e,o.schema),m=as(t,o.schema),{selection:g,storedMarks:x}=o,{$from:y,$to:v}=g,N=y.blockRange(v),j=x||g.$to.parentOffset&&g.$from.marks();if(!N)return!1;const D=v1(T=>AE(T.type.name,f))(g);if(N.depth>=1&&D&&N.depth-D.depth<=1){if(D.node.type===h)return d.liftListItem(m);if(AE(D.node.type.name,f)&&h.validContent(D.node.content)&&l)return c().command(()=>(a.setNodeMarkup(D.pos,h),!0)).command(()=>eN(a,h)).command(()=>tN(a,h)).run()}return!n||!j||!l?c().command(()=>u().wrapInList(h,r)?!0:d.clearNodes()).wrapInList(h,r).command(()=>eN(a,h)).command(()=>tN(a,h)).run():c().command(()=>{const T=u().wrapInList(h,r),A=j.filter(S=>p.includes(S.type.name));return a.ensureMarks(A),T?!0:d.clearNodes()}).wrapInList(h,r).command(()=>eN(a,h)).command(()=>tN(a,h)).run()},ioe=(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:a=!1}=n,o=xc(e,r.schema);return lj(r,o,t)?s.unsetMark(o,{extendEmptyMarkRange:a}):s.setMark(o,t)},ooe=(e,t,n={})=>({state:r,commands:s})=>{const a=as(e,r.schema),o=as(t,r.schema),l=zd(r,a,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),l?s.setNode(o,c):s.setNode(a,{...c,...n})},loe=(e,t={})=>({state:n,commands:r})=>{const s=as(e,n.schema);return zd(n,s,t)?r.lift(s):r.wrapIn(s,t)},coe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let a;if(s.spec.isInputRules&&(a=s.getState(e))){if(t){const o=e.tr,l=a.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(a.text){const c=o.doc.resolve(a.from).marks();o.replaceWith(a.from,a.to,e.schema.text(a.text,c))}else o.delete(a.from,a.to)}return!0}}return!1},doe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(a=>{e.removeMark(a.$from.pos,a.$to.pos)}),!0},uoe=(e,t={})=>({tr:n,state:r,dispatch:s})=>{var a;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,c=xc(e,r.schema),{$from:d,empty:u,ranges:f}=l;if(!s)return!0;if(u&&o){let{from:p,to:h}=l;const m=(a=d.marks().find(x=>x.type===c))==null?void 0:a.attrs,g=Bk(d,c,m);g&&(p=g.from,h=g.to),n.removeMark(p,h,c)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,c)});return n.removeStoredMark(c),!0},foe=e=>({tr:t,state:n,dispatch:r})=>{const{selection:s}=n;let a,o;return typeof e=="number"?(a=e,o=e):e&&"from"in e&&"to"in e?(a=e.from,o=e.to):(a=s.from,o=s.to),r&&t.doc.nodesBetween(a,o,(l,c)=>{if(l.isText)return;const d={...l.attrs};delete d.dir,t.setNodeMarkup(c,void 0,d)}),!0},hoe=(e,t={})=>({tr:n,state:r,dispatch:s})=>{let a=null,o=null;const l=b1(typeof e=="string"?e:e.name,r.schema);if(!l)return!1;l==="node"&&(a=as(e,r.schema)),l==="mark"&&(o=xc(e,r.schema));let c=!1;return n.selection.ranges.forEach(d=>{const u=d.$from.pos,f=d.$to.pos;let p,h,m,g;n.selection.empty?r.doc.nodesBetween(u,f,(x,y)=>{a&&a===x.type&&(c=!0,m=Math.max(y,u),g=Math.min(y+x.nodeSize,f),p=y,h=x)}):r.doc.nodesBetween(u,f,(x,y)=>{y<u&&a&&a===x.type&&(c=!0,m=Math.max(y,u),g=Math.min(y+x.nodeSize,f),p=y,h=x),y>=u&&y<=f&&(a&&a===x.type&&(c=!0,s&&n.setNodeMarkup(y,void 0,{...x.attrs,...t})),o&&x.marks.length&&x.marks.forEach(v=>{if(o===v.type&&(c=!0,s)){const N=Math.max(y,u),j=Math.min(y+x.nodeSize,f);n.addMark(N,j,o.create({...v.attrs,...t}))}}))}),h&&(p!==void 0&&s&&n.setNodeMarkup(p,void 0,{...h.attrs,...t}),o&&h.marks.length&&h.marks.forEach(x=>{o===x.type&&s&&n.addMark(m,g,o.create({...x.attrs,...t}))}))}),c},poe=(e,t={})=>({state:n,dispatch:r})=>{const s=as(e,n.schema);return $re(s,t)(n,r)},moe=(e,t={})=>({state:n,dispatch:r})=>{const s=as(e,n.schema);return qre(s,t)(n,r)},goe=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},N1=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},xoe=(e,t)=>{if(zk(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function W0(e){var t;const{editor:n,from:r,to:s,text:a,rules:o,plugin:l}=e,{view:c}=n;if(c.composing)return!1;const d=c.state.doc.resolve(r);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(p=>p.type.spec.code))return!1;let u=!1;const f=$ie(d)+a;return o.forEach(p=>{if(u)return;const h=xoe(f,p.find);if(!h)return;const m=c.state.tr,g=x1({state:c.state,transaction:m}),x={from:r-(h[0].length-a.length),to:s},{commands:y,chain:v,can:N}=new y1({editor:n,state:g});p.handler({state:g,range:x,match:h,commands:y,chain:v,can:N})===null||!m.steps.length||(p.undoable&&m.setMeta(l,{transform:m,from:r,to:s,text:a}),c.dispatch(m),u=!0)}),u}function yoe(e){const{editor:t,rules:n}=e,r=new vr({state:{init(){return null},apply(s,a,o){const l=s.getMeta(r);if(l)return l;const c=s.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:u}=c;typeof u=="string"?u=u:u=$k(Ye.from(u),o.schema);const{from:f}=c,p=f+u.length;W0({editor:t,from:f,to:p,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:a}},props:{handleTextInput(s,a,o,l){return W0({editor:t,from:a,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:a}=s.state.selection;a&&W0({editor:t,from:a.pos,to:a.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,a){if(a.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?W0({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function boe(e){return Object.prototype.toString.call(e).slice(8,-1)}function G0(e){return boe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function e7(e,t){const n={...e};return G0(e)&&G0(t)&&Object.keys(t).forEach(r=>{G0(t[r])&&G0(e[r])?n[r]=e7(e[r],t[r]):n[r]=t[r]}),n}var Yk=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...On(Ct(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...On(Ct(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>e7(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Yd=class t7 extends Yk{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new t7(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,s=t.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(d=>(d==null?void 0:d.type.name)===n.name))return!1;const c=o.find(d=>(d==null?void 0:d.type.name)===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",s.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function voe(e){return typeof e=="number"}var woe=class{constructor(e){this.find=e.find,this.handler=e.handler}},Noe=(e,t,n)=>{if(zk(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(s=>{const a=[s.text];return a.index=s.index,a.input=e,a.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(s.replaceWith)),a}):[]};function joe(e){const{editor:t,state:n,from:r,to:s,rule:a,pasteEvent:o,dropEvent:l}=e,{commands:c,chain:d,can:u}=new y1({editor:t,state:n}),f=[];return n.doc.nodesBetween(r,s,(h,m)=>{var g,x,y,v,N;if((x=(g=h.type)==null?void 0:g.spec)!=null&&x.code||!(h.isText||h.isTextblock||h.isInline))return;const j=(N=(v=(y=h.content)==null?void 0:y.size)!=null?v:h.nodeSize)!=null?N:0,D=Math.max(r,m),T=Math.min(s,m+j);if(D>=T)return;const A=h.isText?h.text||"":h.textBetween(D-m,T-m,void 0,"");Noe(A,a.find,o).forEach(E=>{if(E.index===void 0)return;const I=D+E.index+1,L=I+E[0].length,O={from:n.tr.mapping.map(I),to:n.tr.mapping.map(L)},F=a.handler({state:n,range:O,match:E,commands:c,chain:d,can:u,pasteEvent:o,dropEvent:l});f.push(F)})}),f.every(h=>h!==null)}var K0=null,Soe=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function koe(e){const{editor:t,rules:n}=e;let r=null,s=!1,a=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:u,from:f,to:p,rule:h,pasteEvt:m})=>{const g=u.tr,x=x1({state:u,transaction:g});if(!(!joe({editor:t,state:x,from:Math.max(f-1,0),to:p.b-1,rule:h,pasteEvent:m,dropEvent:l})||!g.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(u=>new vr({view(f){const p=m=>{var g;r=(g=f.dom.parentElement)!=null&&g.contains(m.target)?f.dom.parentElement:null,r&&(K0=t)},h=()=>{K0&&(K0=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(a=r===f.dom.parentElement,l=p,!a){const h=K0;h!=null&&h.isEditable&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,p)=>{var h;const m=(h=p.clipboardData)==null?void 0:h.getData("text/html");return o=p,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,p,h)=>{const m=f[0],g=m.getMeta("uiEvent")==="paste"&&!s,x=m.getMeta("uiEvent")==="drop"&&!a,y=m.getMeta("applyPasteRules"),v=!!y;if(!g&&!x&&!v)return;if(v){let{text:D}=y;typeof D=="string"?D=D:D=$k(Ye.from(D),h.schema);const{from:T}=y,A=T+D.length,S=Soe(D);return c({rule:u,state:h,from:T,to:{b:A},pasteEvt:S})}const N=p.doc.content.findDiffStart(h.doc.content),j=p.doc.content.findDiffEnd(h.doc.content);if(!(!voe(N)||!j||N===j.b))return c({rule:u,state:h,from:N,to:j,pasteEvt:o})}}))}var j1=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=YP(e),this.schema=Pie(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Zw(t.name,this.schema)},r=Ct(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return qk([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Zw(r.name,this.schema)},a=[],o=Ct(r,"addKeyboardShortcuts",s);let l={};if(r.type==="mark"&&Ct(r,"exitable",s)&&(l.ArrowRight=()=>Yd.handleExit({editor:e,mark:r})),o){const p=Object.fromEntries(Object.entries(o()).map(([h,m])=>[h,()=>m({editor:e})]));l={...l,...p}}const c=zae(l);a.push(c);const d=Ct(r,"addInputRules",s);if(CE(r,e.options.enableInputRules)&&d){const p=d();if(p&&p.length){const h=yoe({editor:e,rules:p}),m=Array.isArray(h)?h:[h];a.push(...m)}}const u=Ct(r,"addPasteRules",s);if(CE(r,e.options.enablePasteRules)&&u){const p=u();if(p&&p.length){const h=koe({editor:e,rules:p});a.push(...h)}}const f=Ct(r,"addProseMirrorPlugins",s);if(f){const p=f();a.push(...p)}return a})}get attributes(){return VP(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=dp(this.extensions);return Object.fromEntries(t.filter(n=>!!Ct(n,"addNodeView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:as(n.name,this.schema)},a=Ct(n,"addNodeView",s);if(!a)return[];const o=a();if(!o)return[];const l=(c,d,u,f,p)=>{const h=Gb(c,r);return o({node:c,view:d,getPos:u,decorations:f,innerDecorations:p,editor:e,extension:n,HTMLAttributes:h})};return[n.name,l]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=dp(this.extensions);return Object.fromEntries(t.filter(n=>!!Ct(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:xc(n.name,this.schema)},a=Ct(n,"addMarkView",s);if(!a)return[];const o=(l,c,d)=>{const u=Gb(l,r);return a()({mark:l,view:c,inline:d,editor:e,extension:n,HTMLAttributes:u,updateAttributes:f=>{Boe(l,e,f)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Zw(t.name,this.schema)};t.type==="mark"&&((n=On(Ct(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const s=Ct(t,"onBeforeCreate",r),a=Ct(t,"onCreate",r),o=Ct(t,"onUpdate",r),l=Ct(t,"onSelectionUpdate",r),c=Ct(t,"onTransaction",r),d=Ct(t,"onFocus",r),u=Ct(t,"onBlur",r),f=Ct(t,"onDestroy",r);s&&this.editor.on("beforeCreate",s),a&&this.editor.on("create",a),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}};j1.resolve=YP;j1.sort=qk;j1.flatten=Uk;var Coe={};Fk(Coe,{ClipboardTextSerializer:()=>r7,Commands:()=>s7,Delete:()=>a7,Drop:()=>i7,Editable:()=>o7,FocusEvents:()=>c7,Keymap:()=>d7,Paste:()=>u7,Tabindex:()=>f7,TextDirection:()=>h7,focusEventsPluginKey:()=>l7});var Vn=class n7 extends Yk{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new n7(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},r7=Vn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new vr({key:new vs("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:a}=s,o=Math.min(...a.map(u=>u.$from.pos)),l=Math.max(...a.map(u=>u.$to.pos)),c=GP(n);return WP(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),s7=Vn.create({name:"commands",addCommands(){return{...PP}}}),a7=Vn.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,s;const a=()=>{var o,l,c,d;if((d=(c=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const u=$P(e.before,[e,...t]);JP(u).forEach(h=>{u.mapping.mapResult(h.oldRange.from).deletedAfter&&u.mapping.mapResult(h.oldRange.to).deletedBefore&&u.before.nodesBetween(h.oldRange.from,h.oldRange.to,(m,g)=>{const x=g+m.nodeSize-2,y=h.oldRange.from<=g&&x<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:x,newFrom:u.mapping.map(g),newTo:u.mapping.map(x),deletedRange:h.oldRange,newRange:h.newRange,partial:!y,editor:this.editor,transaction:e,combinedTransform:u})})});const p=u.mapping;u.steps.forEach((h,m)=>{var g,x;if(h instanceof co){const y=p.slice(m).map(h.from,-1),v=p.slice(m).map(h.to),N=p.invert().map(y,-1),j=p.invert().map(v),D=(g=u.doc.nodeAt(y-1))==null?void 0:g.marks.some(A=>A.eq(h.mark)),T=(x=u.doc.nodeAt(v))==null?void 0:x.marks.some(A=>A.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:N,to:j},newRange:{from:y,to:v},partial:!!(T||D),editor:this.editor,transaction:e,combinedTransform:u})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(a,0):a()}}),i7=Vn.create({name:"drop",addProseMirrorPlugins(){return[new vr({key:new vs("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),o7=Vn.create({name:"editable",addProseMirrorPlugins(){return[new vr({key:new vs("editable"),props:{editable:()=>this.editor.options.editable}})]}}),l7=new vs("focusEvents"),c7=Vn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new vr({key:l7,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),d7=Vn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:d}=l,{empty:u,$anchor:f}=c,{pos:p,parent:h}=f,m=f.parent.isTextblock&&p>0?l.doc.resolve(p-1):f,g=m.parent.type.spec.isolating,x=f.pos-f.parentOffset,y=g&&m.parent.childCount===1?x===f.pos:nn.atStart(d).from===p;return!u||!h.type.isTextblock||h.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},a={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Hk()||HP()?a:s},addProseMirrorPlugins(){return[new vr({key:new vs("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(g=>g.getMeta("composition")))return;const r=e.some(g=>g.docChanged)&&!t.doc.eq(n.doc),s=e.some(g=>g.getMeta("preventClearDocument"));if(!r||s)return;const{empty:a,from:o,to:l}=t.selection,c=nn.atStart(t.doc).from,d=nn.atEnd(t.doc).to;if(a||!(o===c&&l===d)||!w1(n.doc))return;const p=n.tr,h=x1({state:n,transaction:p}),{commands:m}=new y1({editor:this.editor,state:h});if(m.clearNodes(),!!p.steps.length)return p}})]}}),u7=Vn.create({name:"paste",addProseMirrorPlugins(){return[new vr({key:new vs("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),f7=Vn.create({name:"tabindex",addProseMirrorPlugins(){return[new vr({key:new vs("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),h7=Vn.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=dp(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new vr({key:new vs("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),Aoe=class nh{constructor(t,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new nh(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new nh(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new nh(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,a=n.isAtom&&!n.isText,o=this.pos+r+(a?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!s&&l.depth<=this.depth)return;const c=new nh(l,this.editor,s,s?n:null);s&&(c.actualDepth=this.depth+1),t.push(new nh(l,this.editor,s,s?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===t)if(Object.keys(n).length>0){const a=s.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const c=o[l];if(a[c]!==n[c])break}}else r=s;s=s.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const a=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===t&&a.every(c=>n[c]===o.node.attrs[c])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(t,n,r))))}),s}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},Moe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Doe(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.setAttribute("data-tiptap-style",""),s.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(s),s}var Eoe=class extends goe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:Wie,createMappablePosition:Gie},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:a})=>this.options.onDrop(r,s,a)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=zP(t,this.options.autofocus);this.editorState=xh.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Doe(Moe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=qP(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;n=n.filter(o=>!o.key.startsWith(a))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[o7,r7.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),s7,c7,d7,f7,i7,u7,a7,h7.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new j1(r,this)}createCommandManager(){this.commandManager=new y1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=oj(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=oj(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new RP(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(d)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),s=n.includes(e),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!s)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o==null?void 0:o.getMeta("focus"),c=o==null?void 0:o.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||a.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return KP(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return qie(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return $k(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return Fie(this.state.doc,{blockSeparator:t,textSerializers:{...GP(this.schema),...n}})}get isEmpty(){return w1(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Aoe(t,this)}get $doc(){return this.$pos(0)}};function up(e){return new N1({find:e.find,handler:({state:t,range:n,match:r})=>{const s=On(e.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:a}=t,o=r[r.length-1],l=r[0];if(o){const c=l.search(/\S/),d=n.from+l.indexOf(o),u=d+o.length;if(Vk(n.from,n.to,t.doc).filter(h=>h.mark.type.excluded.find(g=>g===e.type&&g!==h.mark.type)).filter(h=>h.to>d).length)return null;u<n.to&&a.delete(u,n.to),d>n.from&&a.delete(n.from+c,d);const p=n.from+c+o.length;a.addMark(n.from+c,p,e.type.create(s||{})),a.removeStoredMark(e.type)}},undoable:e.undoable})}function p7(e){return new N1({find:e.find,handler:({state:t,range:n,match:r})=>{const s=On(e.getAttributes,void 0,r)||{},{tr:a}=t,o=n.from;let l=n.to;const c=e.type.create(s);if(r[1]){const d=r[0].lastIndexOf(r[1]);let u=o+d;u>l?u=l:l=u+r[1].length;const f=r[0][r[0].length-1];a.insertText(f,o+r[0].length-1),a.replaceWith(u,l,c)}else if(r[0]){const d=e.type.isInline?o:o-1;a.insert(d,e.type.create(s)).delete(a.mapping.map(o),a.mapping.map(l))}a.scrollIntoView()},undoable:e.undoable})}function cj(e){return new N1({find:e.find,handler:({state:t,range:n,match:r})=>{const s=t.doc.resolve(n.from),a=On(e.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,a)},undoable:e.undoable})}function fp(e){return new N1({find:e.find,handler:({state:t,range:n,match:r,chain:s})=>{const a=On(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),c=o.doc.resolve(n.from).blockRange(),d=c&&Nk(c,e.type,a);if(!d)return null;if(o.wrap(c,d),e.keepMarks&&e.editor){const{selection:f,storedMarks:p}=t,{splittableMarks:h}=e.editor.extensionManager,m=p||f.$to.parentOffset&&f.$from.marks();if(m){const g=m.filter(x=>h.includes(x.type.name));o.ensureMarks(g)}}if(e.keepAttributes){const f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(f,a).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===e.type&&qd(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,u))&&o.join(n.from-1)},undoable:e.undoable})}var _oe=e=>"touches"in e,Toe=class{constructor(e){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=l=>{if(!this.isResizing||!this.activeHandle)return;const c=l.clientX-this.startX,d=l.clientY-this.startY;this.handleResize(c,d)},this.handleTouchMove=l=>{if(!this.isResizing||!this.activeHandle)return;const c=l.touches[0];if(!c)return;const d=c.clientX-this.startX,u=c.clientY-this.startY;this.handleResize(d,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const l=this.element.offsetWidth,c=this.element.offsetHeight;this.onCommit(l,c),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,n,r,s,a,o;this.node=e.node,this.editor=e.editor,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(t=e.options)!=null&&t.min&&(this.minSize={...this.minSize,...e.options.min}),(n=e.options)!=null&&n.max&&(this.maxSize=e.options.max),(r=e==null?void 0:e.options)!=null&&r.directions&&(this.directions=e.options.directions),(s=e.options)!=null&&s.preserveAspectRatio&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(a=e.options)!=null&&a.className&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),(o=e.options)!=null&&o.createCustomHandle&&(this.createCustomHandle=e.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const e=this.editor.isEditable;e!==this.lastEditableState&&(this.lastEditableState=e,e?e&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(e,t,n){return e.type!==this.node.type?!1:(this.node=e,this.onUpdate?this.onUpdate(e,t,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){const n=t.includes("top"),r=t.includes("bottom"),s=t.includes("left"),a=t.includes("right");n&&(e.style.top="0"),r&&(e.style.bottom="0"),s&&(e.style.left="0"),a&&(e.style.right="0"),(t==="top"||t==="bottom")&&(e.style.left="0",e.style.right="0"),(t==="left"||t==="right")&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let t;this.createCustomHandle?t=this.createCustomHandle(e):t=this.createHandle(e),t instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${e}") did not return an HTMLElement. Falling back to default handle.`),t=this.createHandle(e)),this.createCustomHandle||this.positionHandle(t,e),t.addEventListener("mousedown",n=>this.handleResizeStart(n,e)),t.addEventListener("touchstart",n=>this.handleResizeStart(n,e)),this.handleMap.set(e,t),this.wrapper.appendChild(t)})}removeHandles(){this.handleMap.forEach(e=>e.remove()),this.handleMap.clear()}applyInitialSize(){const e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,_oe(e)?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:s}=this.calculateNewDimensions(this.activeHandle,e,t),a=this.applyConstraints(r,s,n);this.element.style.width=`${a.width}px`,this.element.style.height=`${a.height}px`,this.onResize&&this.onResize(a.width,a.height)}calculateNewDimensions(e,t,n){let r=this.startWidth,s=this.startHeight;const a=e.includes("right"),o=e.includes("left"),l=e.includes("bottom"),c=e.includes("top");return a?r=this.startWidth+t:o&&(r=this.startWidth-t),l?s=this.startHeight+n:c&&(s=this.startHeight-n),(e==="right"||e==="left")&&(r=this.startWidth+(a?t:-t)),(e==="top"||e==="bottom")&&(s=this.startHeight+(l?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,s,e):{width:r,height:s}}applyConstraints(e,t,n){var r,s,a,o;if(!n){let d=Math.max(this.minSize.width,e),u=Math.max(this.minSize.height,t);return(r=this.maxSize)!=null&&r.width&&(d=Math.min(this.maxSize.width,d)),(s=this.maxSize)!=null&&s.height&&(u=Math.min(this.maxSize.height,u)),{width:d,height:u}}let l=e,c=t;return l<this.minSize.width&&(l=this.minSize.width,c=l/this.aspectRatio),c<this.minSize.height&&(c=this.minSize.height,l=c*this.aspectRatio),(a=this.maxSize)!=null&&a.width&&l>this.maxSize.width&&(l=this.maxSize.width,c=l/this.aspectRatio),(o=this.maxSize)!=null&&o.height&&c>this.maxSize.height&&(c=this.maxSize.height,l=c*this.aspectRatio),{width:l,height:c}}applyAspectRatio(e,t,n){const r=n==="left"||n==="right",s=n==="top"||n==="bottom";return r?{width:e,height:e/this.aspectRatio}:s?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function Loe(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Dt){const a=r.index();return r.parent.canReplaceWith(a,a+1,t)}let s=r.depth;for(;s>=0;){const a=r.index(s);if(r.node(s).contentMatchAt(a).matchType(t))return!0;s-=1}return!1}var Roe={};Fk(Roe,{createAtomBlockMarkdownSpec:()=>Ooe,createBlockMarkdownSpec:()=>Poe,createInlineMarkdownSpec:()=>zoe,parseAttributes:()=>Wk,parseIndentedBlocks:()=>dj,renderNestedMarkdownContent:()=>Kk,serializeAttributes:()=>Gk});function Wk(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,d=>(n.push(d),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const d=s.map(u=>u.trim().slice(1));t.class=d.join(" ")}const a=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(t.id=a[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,d,u])=>{var f;const p=parseInt(((f=u.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),h=n[p];h&&(t[d]=h.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(t[u]=!0)}),t}function Gk(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function Ooe(e){const{nodeName:t,name:n,parseAttributes:r=Wk,serializeAttributes:s=Gk,defaultAttributes:a={},requiredAttributes:o=[],allowedAttributes:l}=e,c=n||t,d=u=>{if(!l)return u;const f={};return l.forEach(p=>{p in u&&(f[p]=u[p])}),f};return{parseMarkdown:(u,f)=>{const p={...a,...u.attributes};return f.createNode(t,p,[])},markdownTokenizer:{name:t,level:"block",start(u){var f;const p=new RegExp(`^:::${c}(?:\\s|$)`,"m"),h=(f=u.match(p))==null?void 0:f.index;return h!==void 0?h:-1},tokenize(u,f,p){const h=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=u.match(h);if(!m)return;const g=m[1]||"",x=r(g);if(!o.find(v=>!(v in x)))return{type:t,raw:m[0],attributes:x}}},renderMarkdown:u=>{const f=d(u.attrs||{}),p=s(f),h=p?` {${p}}`:"";return`:::${c}${h} :::`}}}function Poe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:s=Wk,serializeAttributes:a=Gk,defaultAttributes:o={},content:l="block",allowedAttributes:c}=e,d=n||t,u=f=>{if(!c)return f;const p={};return c.forEach(h=>{h in f&&(p[h]=f[h])}),p};return{parseMarkdown:(f,p)=>{let h;if(r){const g=r(f);h=typeof g=="string"?[{type:"text",text:g}]:g}else l==="block"?h=p.parseChildren(f.tokens||[]):h=p.parseInline(f.tokens||[]);const m={...o,...f.attributes};return p.createNode(t,m,h)},markdownTokenizer:{name:t,level:"block",start(f){var p;const h=new RegExp(`^:::${d}`,"m"),m=(p=f.match(h))==null?void 0:p.index;return m!==void 0?m:-1},tokenize(f,p,h){var m;const g=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),x=f.match(g);if(!x)return;const[y,v=""]=x,N=s(v);let j=1;const D=y.length;let T="";const A=/^:::([\w-]*)(\s.*)?/gm,S=f.slice(D);for(A.lastIndex=0;;){const E=A.exec(S);if(E===null)break;const I=E.index,L=E[1];if(!((m=E[2])!=null&&m.endsWith(":::"))){if(L)j+=1;else if(j-=1,j===0){const O=S.slice(0,I);T=O.trim();const F=f.slice(0,D+I+E[0].length);let U=[];if(T)if(l==="block")for(U=h.blockTokens(O),U.forEach(W=>{W.text&&(!W.tokens||W.tokens.length===0)&&(W.tokens=h.inlineTokens(W.text))});U.length>0;){const W=U[U.length-1];if(W.type==="paragraph"&&(!W.text||W.text.trim()===""))U.pop();else break}else U=h.inlineTokens(T);return{type:t,raw:F,attributes:N,content:T,tokens:U}}}}}},renderMarkdown:(f,p)=>{const h=u(f.attrs||{}),m=a(h),g=m?` {${m}}`:"",x=p.renderChildren(f.content||[],`

`);return`:::${d}${g}

${x}

:::`}}}function Ioe(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,s,a,o]=r;t[s]=a||o,r=n.exec(e)}return t}function Foe(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function zoe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:s=Ioe,serializeAttributes:a=Foe,defaultAttributes:o={},selfClosing:l=!1,allowedAttributes:c}=e,d=n||t,u=p=>{if(!c)return p;const h={};return c.forEach(m=>{const g=typeof m=="string"?m:m.name,x=typeof m=="string"?void 0:m.skipIfDefault;if(g in p){const y=p[g];if(x!==void 0&&y===x)return;h[g]=y}}),h},f=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(p,h)=>{const m={...o,...p.attributes};if(l)return h.createNode(t,m);const g=r?r(p):p.content||"";return g?h.createNode(t,m,[h.createTextNode(g)]):h.createNode(t,m,[])},markdownTokenizer:{name:t,level:"inline",start(p){const h=l?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),m=p.match(h),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(p,h,m){const g=l?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),x=p.match(g);if(!x)return;let y="",v="";if(l){const[,j]=x;v=j}else{const[,j,D]=x;v=j,y=D||""}const N=s(v.trim());return{type:t,raw:x[0],content:y.trim(),attributes:N}}},renderMarkdown:p=>{let h="";r?h=r(p):p.content&&p.content.length>0&&(h=p.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=u(p.attrs||{}),g=a(m),x=g?` ${g}`:"";return l?`[${d}${x}]`:`[${d}${x}]${h}[/${d}]`}}}function dj(e,t,n){var r,s,a,o;const l=e.split(`
`),c=[];let d="",u=0;const f=t.baseIndentSize||2;for(;u<l.length;){const p=l[u],h=p.match(t.itemPattern);if(!h){if(c.length>0)break;if(p.trim()===""){u+=1,d=`${d}${p}
`;continue}else return}const m=t.extractItemData(h),{indentLevel:g,mainContent:x}=m;d=`${d}${p}
`;const y=[x];for(u+=1;u<l.length;){const D=l[u];if(D.trim()===""){const A=l.slice(u+1).findIndex(I=>I.trim()!=="");if(A===-1)break;if((((s=(r=l[u+1+A].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>g){y.push(D),d=`${d}${D}
`,u+=1;continue}else break}if((((o=(a=D.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:o.length)||0)>g)y.push(D),d=`${d}${D}
`,u+=1;else break}let v;const N=y.slice(1);if(N.length>0){const D=N.map(T=>T.slice(g+f)).join(`
`);D.trim()&&(t.customNestedParser?v=t.customNestedParser(D):v=n.blockTokens(D))}const j=t.createToken(m,v);c.push(j)}if(c.length!==0)return{items:c,raw:d}}function Kk(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const s=typeof n=="function"?n(r):n,[a,...o]=e.content,l=t.renderChildren([a]),c=[`${s}${l}`];return o&&o.length>0&&o.forEach(d=>{const u=t.renderChildren([d]);if(u){const f=u.split(`
`).map(p=>p?t.indent(p):"").join(`
`);c.push(f)}}),c.join(`
`)}function Boe(e,t,n={}){const{state:r}=t,{doc:s,tr:a}=r,o=e;s.descendants((l,c)=>{const d=a.mapping.map(c),u=a.mapping.map(c)+l.nodeSize;let f=null;if(l.marks.forEach(h=>{if(h!==o)return!1;f=h}),!f)return;let p=!1;if(Object.keys(n).forEach(h=>{n[h]!==f.attrs[h]&&(p=!0)}),p){const h=e.type.create({...e.attrs,...n});a.removeMark(d,u,e.type),a.addMark(d,u,h)}}),a.docChanged&&t.view.dispatch(a)}var Ba=class m7 extends Yk{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new m7(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function df(e){return new woe({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:s})=>{const a=On(e.getAttributes,void 0,r,s);if(a===!1||a===null)return null;const{tr:o}=t,l=r[r.length-1],c=r[0];let d=n.to;if(l){const u=c.search(/\S/),f=n.from+c.indexOf(l),p=f+l.length;if(Vk(n.from,n.to,t.doc).filter(m=>m.mark.type.excluded.find(x=>x===e.type&&x!==m.mark.type)).filter(m=>m.to>f).length)return null;p<n.to&&o.delete(p,n.to),f>n.from&&o.delete(n.from+u,f),d=n.from+u+l.length,o.addMark(n.from+u,d,e.type.create(a||{})),o.removeStoredMark(e.type)}}})}const{getOwnPropertyNames:Hoe,getOwnPropertySymbols:Uoe}=Object,{hasOwnProperty:$oe}=Object.prototype;function DE(e,t){return function(r,s,a){return e(r,s,a)&&t(r,s,a)}}function J0(e){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,s);const{cache:a}=s,o=a.get(n),l=a.get(r);if(o&&l)return o===r&&l===n;a.set(n,r),a.set(r,n);const c=e(n,r,s);return a.delete(n),a.delete(r),c}}function qoe(e){return e!=null?e[Symbol.toStringTag]:void 0}function EE(e){return Hoe(e).concat(Uoe(e))}const Voe=Object.hasOwn||((e,t)=>$oe.call(e,t));function Sf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Yoe="__v",Woe="__o",Goe="_owner",{getOwnPropertyDescriptor:_E,keys:TE}=Object;function Koe(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Joe(e,t){return Sf(e.getTime(),t.getTime())}function Xoe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Qoe(e,t){return e===t}function LE(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const s=new Array(r),a=e.entries();let o,l,c=0;for(;(o=a.next())&&!o.done;){const d=t.entries();let u=!1,f=0;for(;(l=d.next())&&!l.done;){if(s[f]){f++;continue}const p=o.value,h=l.value;if(n.equals(p[0],h[0],c,f,e,t,n)&&n.equals(p[1],h[1],p[0],h[0],e,t,n)){u=s[f]=!0;break}f++}if(!u)return!1;c++}return!0}const Zoe=Sf;function ele(e,t,n){const r=TE(e);let s=r.length;if(TE(t).length!==s)return!1;for(;s-- >0;)if(!g7(e,t,n,r[s]))return!1;return!0}function jm(e,t,n){const r=EE(e);let s=r.length;if(EE(t).length!==s)return!1;let a,o,l;for(;s-- >0;)if(a=r[s],!g7(e,t,n,a)||(o=_E(e,a),l=_E(t,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function tle(e,t){return Sf(e.valueOf(),t.valueOf())}function nle(e,t){return e.source===t.source&&e.flags===t.flags}function RE(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const s=new Array(r),a=e.values();let o,l;for(;(o=a.next())&&!o.done;){const c=t.values();let d=!1,u=0;for(;(l=c.next())&&!l.done;){if(!s[u]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=s[u]=!0;break}u++}if(!d)return!1}return!0}function rle(e,t){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function sle(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function g7(e,t,n,r){return(r===Goe||r===Woe||r===Yoe)&&(e.$$typeof||t.$$typeof)?!0:Voe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const ale="[object Arguments]",ile="[object Boolean]",ole="[object Date]",lle="[object Error]",cle="[object Map]",dle="[object Number]",ule="[object Object]",fle="[object RegExp]",hle="[object Set]",ple="[object String]",mle="[object URL]",{isArray:gle}=Array,OE=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,{assign:PE}=Object,xle=Object.prototype.toString.call.bind(Object.prototype.toString);function yle({areArraysEqual:e,areDatesEqual:t,areErrorsEqual:n,areFunctionsEqual:r,areMapsEqual:s,areNumbersEqual:a,areObjectsEqual:o,arePrimitiveWrappersEqual:l,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:u,areUrlsEqual:f,unknownTagComparators:p}){return function(m,g,x){if(m===g)return!0;if(m==null||g==null)return!1;const y=typeof m;if(y!==typeof g)return!1;if(y!=="object")return y==="number"?a(m,g,x):y==="function"?r(m,g,x):!1;const v=m.constructor;if(v!==g.constructor)return!1;if(v===Object)return o(m,g,x);if(gle(m))return e(m,g,x);if(OE!=null&&OE(m))return u(m,g,x);if(v===Date)return t(m,g,x);if(v===RegExp)return c(m,g,x);if(v===Map)return s(m,g,x);if(v===Set)return d(m,g,x);const N=xle(m);if(N===ole)return t(m,g,x);if(N===fle)return c(m,g,x);if(N===cle)return s(m,g,x);if(N===hle)return d(m,g,x);if(N===ule)return typeof m.then!="function"&&typeof g.then!="function"&&o(m,g,x);if(N===mle)return f(m,g,x);if(N===lle)return n(m,g,x);if(N===ale)return o(m,g,x);if(N===ile||N===dle||N===ple)return l(m,g,x);if(p){let j=p[N];if(!j){const D=qoe(m);D&&(j=p[D])}if(j)return j(m,g,x)}return!1}}function ble({circular:e,createCustomConfig:t,strict:n}){let r={areArraysEqual:n?jm:Koe,areDatesEqual:Joe,areErrorsEqual:Xoe,areFunctionsEqual:Qoe,areMapsEqual:n?DE(LE,jm):LE,areNumbersEqual:Zoe,areObjectsEqual:n?jm:ele,arePrimitiveWrappersEqual:tle,areRegExpsEqual:nle,areSetsEqual:n?DE(RE,jm):RE,areTypedArraysEqual:n?jm:rle,areUrlsEqual:sle,unknownTagComparators:void 0};if(t&&(r=PE({},r,t(r))),e){const s=J0(r.areArraysEqual),a=J0(r.areMapsEqual),o=J0(r.areObjectsEqual),l=J0(r.areSetsEqual);r=PE({},r,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return r}function vle(e){return function(t,n,r,s,a,o,l){return e(t,n,l)}}function wle({circular:e,comparator:t,createState:n,equals:r,strict:s}){if(n)return function(l,c){const{cache:d=e?new WeakMap:void 0,meta:u}=n();return t(l,c,{cache:d,equals:r,meta:u,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const a={cache:void 0,equals:r,meta:void 0,strict:s};return function(l,c){return t(l,c,a)}}const Nle=Wd();Wd({strict:!0});Wd({circular:!0});Wd({circular:!0,strict:!0});Wd({createInternalComparator:()=>Sf});Wd({strict:!0,createInternalComparator:()=>Sf});Wd({circular:!0,createInternalComparator:()=>Sf});Wd({circular:!0,createInternalComparator:()=>Sf,strict:!0});function Wd(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:s=!1}=e,a=ble(e),o=yle(a),l=n?n(o):vle(o);return wle({circular:t,comparator:o,createState:r,equals:l,strict:s})}var x7={exports:{}},y7={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1=C,jle=bk;function Sle(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kle=typeof Object.is=="function"?Object.is:Sle,Cle=jle.useSyncExternalStore,Ale=S1.useRef,Mle=S1.useEffect,Dle=S1.useMemo,Ele=S1.useDebugValue;y7.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var a=Ale(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Dle(function(){function c(h){if(!d){if(d=!0,u=h,h=r(h),s!==void 0&&o.hasValue){var m=o.value;if(s(m,h))return f=m}return f=h}if(m=f,kle(u,h))return m;var g=r(h);return s!==void 0&&s(m,g)?(u=h,m):(u=h,f=g)}var d=!1,u,f,p=n===void 0?null:n;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,n,r,s]);var l=Cle(e,a[0],a[1]);return Mle(function(){o.hasValue=!0,o.value=l},[l]),Ele(l),l};x7.exports=y7;var _le=x7.exports,Tle=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},Lle=({contentComponent:e})=>{const t=bk.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return i.jsx(i.Fragment,{children:Object.values(t)})};function Rle(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:Mj.createPortal(r.reactElement,r.element,n)},e.forEach(s=>s())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(s=>s())}}}var Ole=class extends ge.Component{constructor(e){var t;super(e),this.editorContentRef=ge.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=Rle(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return i.jsxs(i.Fragment,{children:[i.jsx("div",{ref:Tle(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&i.jsx(Lle,{contentComponent:e.contentComponent})]})}},Ple=C.forwardRef((e,t)=>{const n=ge.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return ge.createElement(Ole,{key:n,innerRef:t,...e})}),Ile=ge.memo(Ple),Fle=typeof window<"u"?C.useLayoutEffect:C.useEffect,zle=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function Ble(e){var t;const[n]=C.useState(()=>new zle(e.editor)),r=_le.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:Nle);return Fle(()=>n.watch(e.editor),[e.editor,n]),C.useDebugValue(r),r}var Hle=!1,uj=typeof window>"u",Ule=uj||!!(typeof window<"u"&&window.next),$le=class b7{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?uj||Ule?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var s,a;return(a=(s=this.options.current).onBeforeCreate)==null?void 0:a.call(s,...r)},onBlur:(...r)=>{var s,a;return(a=(s=this.options.current).onBlur)==null?void 0:a.call(s,...r)},onCreate:(...r)=>{var s,a;return(a=(s=this.options.current).onCreate)==null?void 0:a.call(s,...r)},onDestroy:(...r)=>{var s,a;return(a=(s=this.options.current).onDestroy)==null?void 0:a.call(s,...r)},onFocus:(...r)=>{var s,a;return(a=(s=this.options.current).onFocus)==null?void 0:a.call(s,...r)},onSelectionUpdate:(...r)=>{var s,a;return(a=(s=this.options.current).onSelectionUpdate)==null?void 0:a.call(s,...r)},onTransaction:(...r)=>{var s,a;return(a=(s=this.options.current).onTransaction)==null?void 0:a.call(s,...r)},onUpdate:(...r)=>{var s,a;return(a=(s=this.options.current).onUpdate)==null?void 0:a.call(s,...r)},onContentError:(...r)=>{var s,a;return(a=(s=this.options.current).onContentError)==null?void 0:a.call(s,...r)},onDrop:(...r)=>{var s,a;return(a=(s=this.options.current).onDrop)==null?void 0:a.call(s,...r)},onPaste:(...r)=>{var s,a;return(a=(s=this.options.current).onPaste)==null?void 0:a.call(s,...r)},onDelete:(...r)=>{var s,a;return(a=(s=this.options.current).onDelete)==null?void 0:a.call(s,...r)}};return new Eoe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((s,a)=>{var o;return s===((o=n.extensions)==null?void 0:o[a])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?b7.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,s)=>r===t[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function qle(e={},t=[]){const n=C.useRef(e);n.current=e;const[r]=C.useState(()=>new $le(n)),s=bk.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return C.useDebugValue(s),C.useEffect(r.onRender(t)),Ble({editor:s,selector:({transactionNumber:a})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&a===0?0:a+1}),s}var Vle=C.createContext({editor:null});Vle.Consumer;var Yle=C.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Wle=()=>C.useContext(Yle);ge.forwardRef((e,t)=>{const{onDragStart:n}=Wle(),r=e.as||"div";return i.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});ge.createContext({markViewContentRef:()=>{}});var Kb=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},Gle=/^\s*>\s$/,Kle=Ba.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Kb("blockquote",{...Tr(this.options.HTMLAttributes,e),children:Kb("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(s=>{const l=t.renderChildren([s]).split(`
`).map(c=>c.trim()===""?n:`${n} ${c}`);r.push(l.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[fp({find:Gle,type:this.type})]}}),Jle=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Xle=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Qle=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Zle=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,ece=Yd.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Kb("strong",{...Tr(this.options.HTMLAttributes,e),children:Kb("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[up({find:Jle,type:this.type}),up({find:Qle,type:this.type})]},addPasteRules(){return[df({find:Xle,type:this.type}),df({find:Zle,type:this.type})]}}),tce=/(^|[^`])`([^`]+)`(?!`)$/,nce=/(^|[^`])`([^`]+)`(?!`)/g,rce=Yd.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Tr(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[up({find:tce,type:this.type})]},addPasteRules(){return[df({find:nce,type:this.type})]}}),nN=4,sce=/^```([a-z]+)?[\s\n]$/,ace=/^~~~([a-z]+)?[\s\n]$/,ice=Ba.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:nN,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const a=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Tr(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const s=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${s}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:nN,{state:r}=e,{selection:s}=r,{$from:a,empty:o}=s;if(a.parent.type!==this.type)return!1;const l=" ".repeat(n);return o?e.commands.insertContent(l):e.commands.command(({tr:c})=>{const{from:d,to:u}=s,h=r.doc.textBetween(d,u,`
`,`
`).split(`
`).map(m=>l+m).join(`
`);return c.replaceWith(d,u,r.schema.text(h)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:nN,{state:r}=e,{selection:s}=r,{$from:a,empty:o}=s;return a.parent.type!==this.type?!1:o?e.commands.command(({tr:l})=>{var c;const{pos:d}=a,u=a.start(),f=a.end(),h=r.doc.textBetween(u,f,`
`,`
`).split(`
`);let m=0,g=0;const x=d-u;for(let T=0;T<h.length;T+=1){if(g+h[T].length>=x){m=T;break}g+=h[T].length+1}const v=((c=h[m].match(/^ */))==null?void 0:c[0])||"",N=Math.min(v.length,n);if(N===0)return!0;let j=u;for(let T=0;T<m;T+=1)j+=h[T].length+1;return l.delete(j,j+N),d-j<=N&&l.setSelection($t.create(l.doc,j)),!0}):e.commands.command(({tr:l})=>{const{from:c,to:d}=s,p=r.doc.textBetween(c,d,`
`,`
`).split(`
`).map(h=>{var m;const g=((m=h.match(/^ */))==null?void 0:m[0])||"",x=Math.min(g.length,n);return h.slice(x)}).join(`
`);return l.replaceWith(c,d,r.schema.text(p)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!a||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:a}=n;if(!a||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const l=s.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection(nn.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[cj({find:sce,type:this.type,getAttributes:e=>({language:e[1]})}),cj({find:ace,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new vr({key:new vs("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,a=s==null?void 0:s.mode;if(!n||!a)return!1;const{tr:o,schema:l}=e.state,c=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:a},c)),o.selection.$from.parent.type!==this.type&&o.setSelection($t.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),oce=Ba.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),lce=Ba.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Tr(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:a}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,c=a||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:u})=>{if(u&&c&&o){const f=c.filter(p=>l.includes(p.type.name));d.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),cce=Ba.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Tr(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,s="#".repeat(r);return e.content?`${s} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>cj({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),dce=Ba.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Tr(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!Loe(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,s=e();return XP(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:a,tr:o,dispatch:l})=>{if(l){const{$to:c}=o.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection($t.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Dt.create(o.doc,c.pos)):o.setSelection($t.create(o.doc,c.pos));else{const u=a.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,f=u==null?void 0:u.create();f&&(o.insert(d,f),o.setSelection($t.create(o.doc,d+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[p7({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),uce=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,fce=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,hce=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,pce=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,mce=Yd.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Tr(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[up({find:uce,type:this.type}),up({find:hce,type:this.type})]},addPasteRules(){return[df({find:fce,type:this.type}),df({find:pce,type:this.type})]}});const gce="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",xce="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",fj="numeric",hj="ascii",pj="alpha",og="asciinumeric",Pm="alphanumeric",mj="domain",v7="emoji",yce="scheme",bce="slashscheme",rN="whitespace";function vce(e,t){return e in t||(t[e]=[]),t[e]}function Eu(e,t,n){t[fj]&&(t[og]=!0,t[Pm]=!0),t[hj]&&(t[og]=!0,t[pj]=!0),t[og]&&(t[Pm]=!0),t[pj]&&(t[Pm]=!0),t[Pm]&&(t[mj]=!0),t[v7]&&(t[mj]=!0);for(const r in t){const s=vce(r,n);s.indexOf(e)<0&&s.push(e)}}function wce(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Ea(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Ea.groups={};Ea.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const s=t.jr[r][0],a=t.jr[r][1];if(a&&s.test(e))return a}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,r)},tr(e,t,n,r){r=r||Ea.groups;let s;return t&&t.j?s=t:(s=new Ea(t),n&&r&&Eu(t,n,r)),this.jr.push([e,s]),s},ts(e,t,n,r){let s=this;const a=e.length;if(!a)return s;for(let o=0;o<a-1;o++)s=s.tt(e[o]);return s.tt(e[a-1],t,n,r)},tt(e,t,n,r){r=r||Ea.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const a=t;let o,l=s.go(e);if(l?(o=new Ea,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Ea,a){if(r)if(o.t&&typeof o.t=="string"){const c=Object.assign(wce(o.t,r),n);Eu(a,c,r)}else n&&Eu(a,n,r);o.t=a}return s.j[e]=o,o}};const tn=(e,t,n,r,s)=>e.ta(t,n,r,s),Sr=(e,t,n,r,s)=>e.tr(t,n,r,s),IE=(e,t,n,r,s)=>e.ts(t,n,r,s),Xe=(e,t,n,r,s)=>e.tt(t,n,r,s),Ll="WORD",gj="UWORD",w7="ASCIINUMERICAL",N7="ALPHANUMERICAL",Jg="LOCALHOST",xj="TLD",yj="UTLD",Ly="SCHEME",rh="SLASH_SCHEME",Jk="NUM",bj="WS",Xk="NL",lg="OPENBRACE",cg="CLOSEBRACE",Jb="OPENBRACKET",Xb="CLOSEBRACKET",Qb="OPENPAREN",Zb="CLOSEPAREN",ev="OPENANGLEBRACKET",tv="CLOSEANGLEBRACKET",nv="FULLWIDTHLEFTPAREN",rv="FULLWIDTHRIGHTPAREN",sv="LEFTCORNERBRACKET",av="RIGHTCORNERBRACKET",iv="LEFTWHITECORNERBRACKET",ov="RIGHTWHITECORNERBRACKET",lv="FULLWIDTHLESSTHAN",cv="FULLWIDTHGREATERTHAN",dv="AMPERSAND",uv="APOSTROPHE",fv="ASTERISK",Yc="AT",hv="BACKSLASH",pv="BACKTICK",mv="CARET",Zc="COLON",Qk="COMMA",gv="DOLLAR",Eo="DOT",xv="EQUALS",Zk="EXCLAMATION",Mi="HYPHEN",dg="PERCENT",yv="PIPE",bv="PLUS",vv="POUND",ug="QUERY",e4="QUOTE",j7="FULLWIDTHMIDDLEDOT",t4="SEMI",_o="SLASH",fg="TILDE",wv="UNDERSCORE",S7="EMOJI",Nv="SYM";var k7=Object.freeze({__proto__:null,ALPHANUMERICAL:N7,AMPERSAND:dv,APOSTROPHE:uv,ASCIINUMERICAL:w7,ASTERISK:fv,AT:Yc,BACKSLASH:hv,BACKTICK:pv,CARET:mv,CLOSEANGLEBRACKET:tv,CLOSEBRACE:cg,CLOSEBRACKET:Xb,CLOSEPAREN:Zb,COLON:Zc,COMMA:Qk,DOLLAR:gv,DOT:Eo,EMOJI:S7,EQUALS:xv,EXCLAMATION:Zk,FULLWIDTHGREATERTHAN:cv,FULLWIDTHLEFTPAREN:nv,FULLWIDTHLESSTHAN:lv,FULLWIDTHMIDDLEDOT:j7,FULLWIDTHRIGHTPAREN:rv,HYPHEN:Mi,LEFTCORNERBRACKET:sv,LEFTWHITECORNERBRACKET:iv,LOCALHOST:Jg,NL:Xk,NUM:Jk,OPENANGLEBRACKET:ev,OPENBRACE:lg,OPENBRACKET:Jb,OPENPAREN:Qb,PERCENT:dg,PIPE:yv,PLUS:bv,POUND:vv,QUERY:ug,QUOTE:e4,RIGHTCORNERBRACKET:av,RIGHTWHITECORNERBRACKET:ov,SCHEME:Ly,SEMI:t4,SLASH:_o,SLASH_SCHEME:rh,SYM:Nv,TILDE:fg,TLD:xj,UNDERSCORE:wv,UTLD:yj,UWORD:gj,WORD:Ll,WS:bj});const El=/[a-z]/,Sm=new RegExp("\\p{L}","u"),sN=new RegExp("\\p{Emoji}","u"),_l=/\d/,aN=/\s/,FE="\r",iN=`
`,Nce="",jce="",oN="";let X0=null,Q0=null;function Sce(e=[]){const t={};Ea.groups=t;const n=new Ea;X0==null&&(X0=zE(gce)),Q0==null&&(Q0=zE(xce)),Xe(n,"'",uv),Xe(n,"{",lg),Xe(n,"}",cg),Xe(n,"[",Jb),Xe(n,"]",Xb),Xe(n,"(",Qb),Xe(n,")",Zb),Xe(n,"<",ev),Xe(n,">",tv),Xe(n,"",nv),Xe(n,"",rv),Xe(n,"",sv),Xe(n,"",av),Xe(n,"",iv),Xe(n,"",ov),Xe(n,"",lv),Xe(n,"",cv),Xe(n,"&",dv),Xe(n,"*",fv),Xe(n,"@",Yc),Xe(n,"`",pv),Xe(n,"^",mv),Xe(n,":",Zc),Xe(n,",",Qk),Xe(n,"$",gv),Xe(n,".",Eo),Xe(n,"=",xv),Xe(n,"!",Zk),Xe(n,"-",Mi),Xe(n,"%",dg),Xe(n,"|",yv),Xe(n,"+",bv),Xe(n,"#",vv),Xe(n,"?",ug),Xe(n,'"',e4),Xe(n,"/",_o),Xe(n,";",t4),Xe(n,"~",fg),Xe(n,"_",wv),Xe(n,"\\",hv),Xe(n,"",j7);const r=Sr(n,_l,Jk,{[fj]:!0});Sr(r,_l,r);const s=Sr(r,El,w7,{[og]:!0}),a=Sr(r,Sm,N7,{[Pm]:!0}),o=Sr(n,El,Ll,{[hj]:!0});Sr(o,_l,s),Sr(o,El,o),Sr(s,_l,s),Sr(s,El,s);const l=Sr(n,Sm,gj,{[pj]:!0});Sr(l,El),Sr(l,_l,a),Sr(l,Sm,l),Sr(a,_l,a),Sr(a,El),Sr(a,Sm,a);const c=Xe(n,iN,Xk,{[rN]:!0}),d=Xe(n,FE,bj,{[rN]:!0}),u=Sr(n,aN,bj,{[rN]:!0});Xe(n,oN,u),Xe(d,iN,c),Xe(d,oN,u),Sr(d,aN,u),Xe(u,FE),Xe(u,iN),Sr(u,aN,u),Xe(u,oN,u);const f=Sr(n,sN,S7,{[v7]:!0});Xe(f,"#"),Sr(f,sN,f),Xe(f,Nce,f);const p=Xe(f,jce);Xe(p,"#"),Sr(p,sN,f);const h=[[El,o],[_l,s]],m=[[El,null],[Sm,l],[_l,a]];for(let g=0;g<X0.length;g++)Bc(n,X0[g],xj,Ll,h);for(let g=0;g<Q0.length;g++)Bc(n,Q0[g],yj,gj,m);Eu(xj,{tld:!0,ascii:!0},t),Eu(yj,{utld:!0,alpha:!0},t),Bc(n,"file",Ly,Ll,h),Bc(n,"mailto",Ly,Ll,h),Bc(n,"http",rh,Ll,h),Bc(n,"https",rh,Ll,h),Bc(n,"ftp",rh,Ll,h),Bc(n,"ftps",rh,Ll,h),Eu(Ly,{scheme:!0,ascii:!0},t),Eu(rh,{slashscheme:!0,ascii:!0},t),e=e.sort((g,x)=>g[0]>x[0]?1:-1);for(let g=0;g<e.length;g++){const x=e[g][0],v=e[g][1]?{[yce]:!0}:{[bce]:!0};x.indexOf("-")>=0?v[mj]=!0:El.test(x)?_l.test(x)?v[og]=!0:v[hj]=!0:v[fj]=!0,IE(n,x,x,v)}return IE(n,"localhost",Jg,{ascii:!0}),n.jd=new Ea(Nv),{start:n,tokens:Object.assign({groups:t},k7)}}function C7(e,t){const n=kce(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,s=[];let a=0,o=0;for(;o<r;){let l=e,c=null,d=0,u=null,f=-1,p=-1;for(;o<r&&(c=l.go(n[o]));)l=c,l.accepts()?(f=0,p=0,u=l):f>=0&&(f+=n[o].length,p++),d+=n[o].length,a+=n[o].length,o++;a-=f,o-=p,d-=f,s.push({t:u.t,v:t.slice(a-d,a),s:a-d,e:a})}return s}function kce(e){const t=[],n=e.length;let r=0;for(;r<n;){let s=e.charCodeAt(r),a,o=s<55296||s>56319||r+1===n||(a=e.charCodeAt(r+1))<56320||a>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Bc(e,t,n,r,s){let a;const o=t.length;for(let l=0;l<o-1;l++){const c=t[l];e.j[c]?a=e.j[c]:(a=new Ea(r),a.jr=s.slice(),e.j[c]=a),e=a}return a=new Ea(n),a.jr=s.slice(),e.j[t[o-1]]=a,a}function zE(e){const t=[],n=[];let r=0,s="0123456789";for(;r<e.length;){let a=0;for(;s.indexOf(e[r+a])>=0;)a++;if(a>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+a),10);o>0;o--)n.pop();r+=a}else n.push(e[r]),r++}return t}const Xg={defaultProtocol:"http",events:null,format:BE,formatHref:BE,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function n4(e,t=null){let n=Object.assign({},Xg);e&&(n=Object.assign(n,e instanceof n4?e.o:e));const r=n.ignoreTags,s=[];for(let a=0;a<r.length;a++)s.push(r[a].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}n4.prototype={o:Xg,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Xg[e],typeof s=="function"&&r&&(s=s(t,n))):typeof s=="function"&&r&&(s=s(t,n.t,n)),s)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function BE(e){return e}function A7(e,t){this.t="token",this.v=e,this.tk=t}A7.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Xg.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),s=e.get("tagName",n,t),a=this.toFormattedString(e),o={},l=e.get("className",n,t),c=e.get("target",n,t),d=e.get("rel",n,t),u=e.getObj("attributes",n,t),f=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),c&&(o.target=c),d&&(o.rel=d),u&&Object.assign(o,u),{tagName:s,attributes:o,content:a,eventListeners:f}}};function k1(e,t){class n extends A7{constructor(s,a){super(s,a),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const HE=k1("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),UE=k1("text"),Cce=k1("nl"),Z0=k1("url",{isLink:!0,toHref(e=Xg.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Jg&&e[1].t===Zc}}),Ai=e=>new Ea(e);function Ace({groups:e}){const t=e.domain.concat([dv,fv,Yc,hv,pv,mv,gv,xv,Mi,Jk,dg,yv,bv,vv,_o,Nv,fg,wv]),n=[uv,Zc,Qk,Eo,Zk,dg,ug,e4,t4,ev,tv,lg,cg,Xb,Jb,Qb,Zb,nv,rv,sv,av,iv,ov,lv,cv],r=[dv,uv,fv,hv,pv,mv,gv,xv,Mi,lg,cg,dg,yv,bv,vv,ug,_o,Nv,fg,wv],s=Ai(),a=Xe(s,fg);tn(a,r,a),tn(a,e.domain,a);const o=Ai(),l=Ai(),c=Ai();tn(s,e.domain,o),tn(s,e.scheme,l),tn(s,e.slashscheme,c),tn(o,r,a),tn(o,e.domain,o);const d=Xe(o,Yc);Xe(a,Yc,d),Xe(l,Yc,d),Xe(c,Yc,d);const u=Xe(a,Eo);tn(u,r,a),tn(u,e.domain,a);const f=Ai();tn(d,e.domain,f),tn(f,e.domain,f);const p=Xe(f,Eo);tn(p,e.domain,f);const h=Ai(HE);tn(p,e.tld,h),tn(p,e.utld,h),Xe(d,Jg,h);const m=Xe(f,Mi);Xe(m,Mi,m),tn(m,e.domain,f),tn(h,e.domain,f),Xe(h,Eo,p),Xe(h,Mi,m);const g=Xe(h,Zc);tn(g,e.numeric,HE);const x=Xe(o,Mi),y=Xe(o,Eo);Xe(x,Mi,x),tn(x,e.domain,o),tn(y,r,a),tn(y,e.domain,o);const v=Ai(Z0);tn(y,e.tld,v),tn(y,e.utld,v),tn(v,e.domain,o),tn(v,r,a),Xe(v,Eo,y),Xe(v,Mi,x),Xe(v,Yc,d);const N=Xe(v,Zc),j=Ai(Z0);tn(N,e.numeric,j);const D=Ai(Z0),T=Ai();tn(D,t,D),tn(D,n,T),tn(T,t,D),tn(T,n,T),Xe(v,_o,D),Xe(j,_o,D);const A=Xe(l,Zc),S=Xe(c,Zc),E=Xe(S,_o),I=Xe(E,_o);tn(l,e.domain,o),Xe(l,Eo,y),Xe(l,Mi,x),tn(c,e.domain,o),Xe(c,Eo,y),Xe(c,Mi,x),tn(A,e.domain,D),Xe(A,_o,D),Xe(A,ug,D),tn(I,e.domain,D),tn(I,t,D),Xe(I,_o,D);const L=[[lg,cg],[Jb,Xb],[Qb,Zb],[ev,tv],[nv,rv],[sv,av],[iv,ov],[lv,cv]];for(let O=0;O<L.length;O++){const[F,U]=L[O],W=Xe(D,F);Xe(T,F,W),Xe(W,U,D);const X=Ai(Z0);tn(W,t,X);const P=Ai();tn(W,n),tn(X,t,X),tn(X,n,P),tn(P,t,X),tn(P,n,P),Xe(X,U,D),Xe(P,U,D)}return Xe(s,Jg,v),Xe(s,Xk,Cce),{start:s,tokens:k7}}function Mce(e,t,n){let r=n.length,s=0,a=[],o=[];for(;s<r;){let l=e,c=null,d=null,u=0,f=null,p=-1;for(;s<r&&!(c=l.go(n[s].t));)o.push(n[s++]);for(;s<r&&(d=c||l.go(n[s].t));)c=null,l=d,l.accepts()?(p=0,f=l):p>=0&&p++,s++,u++;if(p<0)s-=u,s<r&&(o.push(n[s]),s++);else{o.length>0&&(a.push(lN(UE,t,o)),o=[]),s-=p,u-=p;const h=f.t,m=n.slice(s-u,s);a.push(lN(h,t,m))}}return o.length>0&&a.push(lN(UE,t,o)),a}function lN(e,t,n){const r=n[0].s,s=n[n.length-1].e,a=t.slice(r,s);return new e(a,n)}const Dce=typeof console<"u"&&console&&console.warn||(()=>{}),Ece="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ir={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function _ce(){return Ea.groups={},ir.scanner=null,ir.parser=null,ir.tokenQueue=[],ir.pluginQueue=[],ir.customSchemes=[],ir.initialized=!1,ir}function $E(e,t=!1){if(ir.initialized&&Dce(`linkifyjs: already initialized - will not register custom scheme "${e}" ${Ece}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ir.customSchemes.push([e,t])}function Tce(){ir.scanner=Sce(ir.customSchemes);for(let e=0;e<ir.tokenQueue.length;e++)ir.tokenQueue[e][1]({scanner:ir.scanner});ir.parser=Ace(ir.scanner.tokens);for(let e=0;e<ir.pluginQueue.length;e++)ir.pluginQueue[e][1]({scanner:ir.scanner,parser:ir.parser});return ir.initialized=!0,ir}function r4(e){return ir.initialized||Tce(),Mce(ir.parser.start,e,C7(ir.scanner.start,e))}r4.scan=C7;function M7(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new n4(n),s=r4(e),a=[];for(let o=0;o<s.length;o++){const l=s[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&a.push(l.toFormattedObject(r))}return a}var s4="[\0- -\u2029]",Lce=new RegExp(s4),Rce=new RegExp(`${s4}$`),Oce=new RegExp(s4,"g");function Pce(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function Ice(e){return new vr({key:new vs("autolink"),appendTransaction:(t,n,r)=>{const s=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),a=t.some(d=>d.getMeta("preventAutolink"));if(!s||a)return;const{tr:o}=r,l=$P(n.doc,[...t]);if(JP(l).forEach(({newRange:d})=>{const u=Tie(r.doc,d,h=>h.isTextblock);let f,p;if(u.length>1)f=u[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(u.length){const h=r.doc.textBetween(d.from,d.to," "," ");if(!Rce.test(h))return;f=u[0],p=r.doc.textBetween(f.pos,d.to,void 0," ")}if(f&&p){const h=p.split(Lce).filter(Boolean);if(h.length<=0)return!1;const m=h[h.length-1],g=f.pos+p.lastIndexOf(m);if(!m)return!1;const x=r4(m).map(y=>y.toObject(e.defaultProtocol));if(!Pce(x))return!1;x.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>e.validate(y.value)).filter(y=>e.shouldAutoLink(y.value)).forEach(y=>{Vk(y.from,y.to,r.doc).some(v=>v.mark.type===e.type)||o.addMark(y.from,y.to,e.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function Fce(e){return new vr({key:new vs("handleClickLink"),props:{handleClick:(t,n,r)=>{var s,a;if(r.button!==0||!t.editable)return!1;let o=!1;if(e.enableClickSelection&&(o=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{let f=r.target;const p=[];for(;f.nodeName!=="DIV";)p.push(f),f=f.parentNode;l=p.find(h=>h.nodeName==="A")}if(!l)return o;const c=KP(t.state,e.type.name),d=(s=l==null?void 0:l.href)!=null?s:c.href,u=(a=l==null?void 0:l.target)!=null?a:c.target;l&&d&&(window.open(d,u),o=!0)}return o}}})}function zce(e){return new vr({key:new vs("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:s}=e,{state:a}=t,{selection:o}=a,{empty:l}=o;if(l)return!1;let c="";r.content.forEach(u=>{c+=u.textContent});const d=M7(c,{defaultProtocol:e.defaultProtocol}).find(u=>u.isLink&&u.value===c);return!c||!d||s!==void 0&&!s(d.href)?!1:e.editor.commands.setMark(e.type,{href:d.href})}}})}function uu(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!e||e.replace(Oce,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Bce=Yd.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){$E(e);return}$E(e.scheme,e.optionalSlashes)})},onDestroy(){_ce()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!uu(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!uu(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!uu(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Tr(this.options.HTMLAttributes,e),0]:["a",Tr(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n;const r=((n=e.attrs)==null?void 0:n.href)||"";return`[${t.renderChildren(e)}](${r})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!uu(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!uu(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[df({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,s=M7(e).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:o=>!!uu(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(a=>{this.options.shouldAutoLink(a.value)&&t.push({text:a.value,data:{href:a.href},index:a.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(Ice({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!uu(s,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(Fce({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(zce({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),Hce=Object.defineProperty,Uce=(e,t)=>{for(var n in t)Hce(e,n,{get:t[n],enumerable:!0})},$ce="listItem",qE="textStyle",VE=/^\s*([-+*])\s$/,D7=Ba.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Tr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($ce,this.editor.getAttributes(qE)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=fp({find:VE,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=fp({find:VE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(qE),editor:this.editor})),[e]}}),E7=Ba.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Tr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(s=>s.type==="paragraph"))n=t.parseChildren(e.tokens);else{const s=e.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(s.tokens)}],e.tokens.length>1){const o=e.tokens.slice(1),l=t.parseChildren(o);n.push(...l)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>Kk(e,t,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),qce={};Uce(qce,{findListItemPos:()=>kx,getNextListDepth:()=>a4,handleBackspace:()=>vj,handleDelete:()=>wj,hasListBefore:()=>_7,hasListItemAfter:()=>Vce,hasListItemBefore:()=>T7,listItemHasSubList:()=>L7,nextListIsDeeper:()=>R7,nextListIsHigher:()=>O7});var kx=(e,t)=>{const{$from:n}=t.selection,r=as(e,t.schema);let s=null,a=n.depth,o=n.pos,l=null;for(;a>0&&l===null;)s=n.node(a),s.type===r?l=a:(a-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},a4=(e,t)=>{const n=kx(e,t);if(!n)return!1;const[,r]=Uie(t,e,n.$pos.pos+4);return r},_7=(e,t,n)=>{const{$anchor:r}=e.selection,s=Math.max(0,r.pos-2),a=e.doc.resolve(s).node();return!(!a||!n.includes(a.type.name))},T7=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==e)},L7=(e,t,n)=>{if(!n)return!1;const r=as(e,t.schema);let s=!1;return n.descendants(a=>{a.type===r&&(s=!0)}),s},vj=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!zd(e.state,t)&&_7(e.state,t,n)){const{$anchor:l}=e.state.selection,c=e.state.doc.resolve(l.before()-1),d=[];c.node().descendants((p,h)=>{p.type.name===t&&d.push({node:p,pos:h})});const u=d.at(-1);if(!u)return!1;const f=e.state.doc.resolve(c.start()+u.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},f.end()).joinForward().run()}if(!zd(e.state,t)||!Yie(e.state))return!1;const r=kx(t,e.state);if(!r)return!1;const a=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=L7(t,e.state,a);return T7(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},R7=(e,t)=>{const n=a4(e,t),r=kx(e,t);return!r||!n?!1:n>r.depth},O7=(e,t)=>{const n=a4(e,t),r=kx(e,t);return!r||!n?!1:n<r.depth},wj=(e,t)=>{if(!zd(e.state,t)||!Vie(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:R7(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():O7(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},Vce=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==e)},P7=Vn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&wj(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&wj(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&vj(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&vj(e,n,r)&&(t=!0)}),t}}}}),YE=/^(\s*)(\d+)\.\s+(.*)$/,Yce=/^\s/;function Wce(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n],a=s.match(YE);if(!a)break;const[,o,l,c]=a,d=o.length;let u=c,f=n+1;const p=[s];for(;f<e.length;){const h=e[f];if(h.match(YE))break;if(h.trim()==="")p.push(h),u+=`
`,f+=1;else if(h.match(Yce))p.push(h),u+=`
${h.slice(d+2)}`,f+=1;else break}t.push({indent:d,number:parseInt(l,10),content:u.trim(),raw:p.join(`
`)}),r=f,n=f}return[t,r]}function I7(e,t,n){var r;const s=[];let a=0;for(;a<e.length;){const o=e[a];if(o.indent===t){const l=o.content.split(`
`),c=((r=l[0])==null?void 0:r.trim())||"",d=[];c&&d.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const u=l.slice(1).join(`
`).trim();if(u){const h=n.blockTokens(u);d.push(...h)}let f=a+1;const p=[];for(;f<e.length&&e[f].indent>t;)p.push(e[f]),f+=1;if(p.length>0){const h=Math.min(...p.map(g=>g.indent)),m=I7(p,h,n);d.push({type:"list",ordered:!0,start:p[0].number,items:m,raw:p.map(g=>g.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:d}),a=f}else a+=1}return s}function Gce(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...t.parseChildren([s]));else if(s.type==="text"&&s.tokens){const a=t.parseChildren([s]);r.push({type:"paragraph",content:a})}else{const a=t.parseChildren([s]);a.length>0&&r.push(...a)}}),{type:"listItem",content:r}})}var Kce="listItem",WE="textStyle",GE=/^(\d+)\.\s$/,F7=Ba.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Tr(this.options.HTMLAttributes,n),0]:["ol",Tr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?Gce(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const s=e.split(`
`),[a,o]=Wce(s);if(a.length===0)return;const l=I7(a,0,n);return l.length===0?void 0:{type:"list",ordered:!0,start:((r=a[0])==null?void 0:r.number)||1,items:l,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Kce,this.editor.getAttributes(WE)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=fp({find:GE,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=fp({find:GE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(WE)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Jce=/^\s*(\[([( |x])?\])\s$/,Xce=Ba.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Tr(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const s=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return Kk(e,t,s)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const s=document.createElement("li"),a=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),d=u=>{var f,p;l.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,u,l.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return d(e),a.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",u=>u.preventDefault()),l.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:f}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const h=n();if(typeof h!="number")return!1;const m=p.doc.nodeAt(h);return p.setNodeMarkup(h,void 0,{...m==null?void 0:m.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,f)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,f])=>{s.setAttribute(u,f)}),s.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,a.append(l,o),s.append(a,c),Object.entries(t).forEach(([u,f])=>{s.setAttribute(u,f)}),{dom:s,contentDOM:c,update:u=>u.type!==this.type?!1:(s.dataset.checked=u.attrs.checked,l.checked=u.attrs.checked,d(u),!0)}}},addInputRules(){return[fp({find:Jce,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Qce=Ba.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Tr(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=a=>{const o=dj(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:n.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(a)},s=dj(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,o)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:o}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Vn.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(D7.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(E7.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(P7.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(F7.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(Xce.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(Qce.configure(this.options.taskList)),e}});var Zce=Ba.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Tr(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];return n.length===1&&n[0].type==="image"?t.parseChildren([n[0]]):t.createNode("paragraph",void 0,t.parseInline(n))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),ede=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,tde=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,nde=Yd.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Tr(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[up({find:ede,type:this.type})]},addPasteRules(){return[df({find:tde,type:this.type})]}}),rde=Ba.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),sde=Yd.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Tr(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!s)return;const a=s[2].trim();return{type:"underline",raw:s[0],text:a,tokens:n.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function ade(e={}){return new vr({view(t){return new ide(t,e)}})}class ide{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let a=o=>{this[s](o)};return t.dom.addEventListener(s,a),{name:s,handler:a}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,s=this.editorView.dom,a=s.getBoundingClientRect(),o=a.width/s.offsetWidth,l=a.height/s.offsetHeight;if(n){let f=t.nodeBefore,p=t.nodeAfter;if(f||p){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let m=h.getBoundingClientRect(),g=f?m.bottom:m.top;f&&p&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let x=this.width/2*l;r={left:m.left,right:m.right,top:g-x,bottom:g+x}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*o;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,u;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,u=-pageYOffset;else{let f=c.getBoundingClientRect(),p=f.width/c.offsetWidth,h=f.height/c.offsetHeight;d=f.left-c.scrollLeft*p,u=f.top-c.scrollTop*h}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-u)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,a=typeof s=="function"?s(this.editorView,n,t):s;if(n&&!a){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=RO(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Mr extends nn{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Mr.valid(r)?new Mr(r):nn.near(r)}content(){return ft.empty}eq(t){return t instanceof Mr&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Mr(t.resolve(n.pos))}getBookmark(){return new i4(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!ode(t)||!lde(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Mr.valid(t))return t;let s=t.pos,a=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){a=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;s+=n;let c=t.doc.resolve(s);if(Mr.valid(c))return c}for(;;){let o=n>0?a.firstChild:a.lastChild;if(!o){if(a.isAtom&&!a.isText&&!Dt.isSelectable(a)){t=t.doc.resolve(s+a.nodeSize*n),r=!1;continue e}break}a=o,s+=n;let l=t.doc.resolve(s);if(Mr.valid(l))return l}return null}}}Mr.prototype.visible=!1;Mr.findFrom=Mr.findGapCursorFrom;nn.jsonID("gapcursor",Mr);class i4{constructor(t){this.pos=t}map(t){return new i4(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Mr.valid(n)?new Mr(n):nn.near(n)}}function z7(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function ode(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||z7(s.type))return!0;if(s.inlineContent)return!1}}return!0}function lde(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||z7(s.type))return!0;if(s.inlineContent)return!1}}return!0}function cde(){return new vr({props:{decorations:hde,createSelectionBetween(e,t,n){return t.pos==n.pos&&Mr.valid(n)?new Mr(n):null},handleClick:ude,handleKeyDown:dde,handleDOMEvents:{beforeinput:fde}}})}const dde=OP({ArrowLeft:ey("horiz",-1),ArrowRight:ey("horiz",1),ArrowUp:ey("vert",-1),ArrowDown:ey("vert",1)});function ey(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,s,a){let o=r.selection,l=t>0?o.$to:o.$from,c=o.empty;if(o instanceof $t){if(!a.endOfTextblock(n)||l.depth==0)return!1;c=!1,l=r.doc.resolve(t>0?l.after():l.before())}let d=Mr.findGapCursorFrom(l,t,c);return d?(s&&s(r.tr.setSelection(new Mr(d))),!0):!1}}function ude(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Mr.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Dt.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Mr(r))),!0)}function fde(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Mr))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=Ye.empty;for(let o=r.length-1;o>=0;o--)s=Ye.from(r[o].createAndFill(null,s));let a=e.state.tr.replace(n.pos,n.pos,new ft(s,0,0));return a.setSelection($t.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function hde(e){if(!(e.selection instanceof Mr))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",gr.create(e.doc,[ha.widget(e.selection.head,t,{key:"gapcursor"})])}var jv=200,Ds=function(){};Ds.prototype.append=function(t){return t.length?(t=Ds.from(t),!this.length&&t||t.length<jv&&this.leafAppend(t)||this.length<jv&&t.leafPrepend(this)||this.appendInner(t)):this};Ds.prototype.prepend=function(t){return t.length?Ds.from(t).append(this):this};Ds.prototype.appendInner=function(t){return new pde(this,t)};Ds.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Ds.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Ds.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ds.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Ds.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(a,o){return s.push(t(a,o))},n,r),s};Ds.from=function(t){return t instanceof Ds?t:t&&t.length?new B7(t):Ds.empty};var B7=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,a){return s==0&&a==this.length?this:new t(this.values.slice(s,a))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,a,o,l){for(var c=a;c<o;c++)if(s(this.values[c],l+c)===!1)return!1},t.prototype.forEachInvertedInner=function(s,a,o,l){for(var c=a-1;c>=o;c--)if(s(this.values[c],l+c)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=jv)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=jv)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Ds);Ds.empty=new B7([]);var pde=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,a,o){var l=this.left.length;if(s<l&&this.left.forEachInner(r,s,Math.min(a,l),o)===!1||a>l&&this.right.forEachInner(r,Math.max(s-l,0),Math.min(this.length,a)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,a,o){var l=this.left.length;if(s>l&&this.right.forEachInvertedInner(r,s-l,Math.max(a,l)-l,o+l)===!1||a<l&&this.left.forEachInvertedInner(r,Math.min(s,l),a,o)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var a=this.left.length;return s<=a?this.left.slice(r,s):r>=a?this.right.slice(r-a,s-a):this.left.slice(r,a).append(this.right.slice(0,s-a))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Ds);const mde=500;class oo{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,a;n&&(s=this.remapping(r,this.items.length),a=s.maps.length);let o=t.tr,l,c,d=[],u=[];return this.items.forEach((f,p)=>{if(!f.step){s||(s=this.remapping(r,p+1),a=s.maps.length),a--,u.push(f);return}if(s){u.push(new To(f.map));let h=f.step.map(s.slice(a)),m;h&&o.maybeStep(h).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],d.push(new To(m,void 0,void 0,d.length+u.length))),a--,m&&s.appendMap(m,a)}else o.maybeStep(f.step);if(f.selection)return l=s?f.selection.map(s.slice(a)):f.selection,c=new oo(this.items.slice(0,r).append(u.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(t,n,r,s){let a=[],o=this.eventCount,l=this.items,c=!s&&l.length?l.get(l.length-1):null;for(let u=0;u<t.steps.length;u++){let f=t.steps[u].invert(t.docs[u]),p=new To(t.mapping.maps[u],f,n),h;(h=c&&c.merge(p))&&(p=h,u?a.pop():l=l.slice(0,l.length-1)),a.push(p),n&&(o++,n=void 0),s||(c=p)}let d=o-r.depth;return d>xde&&(l=gde(l,d),o-=d),new oo(l.append(a),o)}remapping(t,n){let r=new qg;return this.items.forEach((s,a)=>{let o=s.mirrorOffset!=null&&a-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new oo(this.items.append(t.map(n=>new To(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),a=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(p=>{p.selection&&l--},s);let c=n;this.items.forEach(p=>{let h=a.getMirror(--c);if(h==null)return;o=Math.min(o,h);let m=a.maps[h];if(p.step){let g=t.steps[h].invert(t.docs[h]),x=p.selection&&p.selection.map(a.slice(c+1,h));x&&l++,r.push(new To(m,g,x))}else r.push(new To(m))},s);let d=[];for(let p=n;p<o;p++)d.push(new To(a.maps[p]));let u=this.items.slice(0,s).append(d).append(r),f=new oo(u,l);return f.emptyItemCount()>mde&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,s=[],a=0;return this.items.forEach((o,l)=>{if(l>=t)s.push(o),o.selection&&a++;else if(o.step){let c=o.step.map(n.slice(r)),d=c&&c.getMap();if(r--,d&&n.appendMap(d,r),c){let u=o.selection&&o.selection.map(n.slice(r));u&&a++;let f=new To(d.invert(),c,u),p,h=s.length-1;(p=s.length&&s[h].merge(f))?s[h]=p:s.push(f)}}else o.map&&r--},this.items.length,0),new oo(Ds.from(s.reverse()),a)}}oo.empty=new oo(Ds.empty,0);function gde(e,t){let n;return e.forEach((r,s)=>{if(r.selection&&t--==0)return n=s,!1}),e.slice(n)}class To{constructor(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new To(n.getMap().invert(),n,this.selection)}}}class Wc{constructor(t,n,r,s,a){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=a}}const xde=20;function yde(e,t,n,r){let s=n.getMeta(Vu),a;if(s)return s.historyState;n.getMeta(wde)&&(e=new Wc(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(Vu))return o.getMeta(Vu).redo?new Wc(e.done.addTransform(n,void 0,r,Ry(t)),e.undone,KE(n.mapping.maps),e.prevTime,e.prevComposition):new Wc(e.done,e.undone.addTransform(n,void 0,r,Ry(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),c=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!bde(n,e.prevRanges)),d=o?cN(e.prevRanges,n.mapping):KE(n.mapping.maps);return new Wc(e.done.addTransform(n,c?t.selection.getBookmark():void 0,r,Ry(t)),oo.empty,d,n.time,l??e.prevComposition)}else return(a=n.getMeta("rebased"))?new Wc(e.done.rebased(n,a),e.undone.rebased(n,a),cN(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Wc(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),cN(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function bde(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,s)=>{for(let a=0;a<t.length;a+=2)r<=t[a+1]&&s>=t[a]&&(n=!0)}),n}function KE(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,s,a,o)=>t.push(a,o));return t}function cN(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),a=t.map(e[r+1],-1);s<=a&&n.push(s,a)}return n}function vde(e,t,n){let r=Ry(t),s=Vu.get(t).spec.config,a=(n?e.undone:e.done).popEvent(t,r);if(!a)return null;let o=a.selection.resolve(a.transform.doc),l=(n?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),s,r),c=new Wc(n?l:a.remaining,n?a.remaining:l,null,0,-1);return a.transform.setSelection(o).setMeta(Vu,{redo:n,historyState:c})}let dN=!1,JE=null;function Ry(e){let t=e.plugins;if(JE!=t){dN=!1,JE=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){dN=!0;break}}return dN}const Vu=new vs("history"),wde=new vs("closeHistory");function Nde(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new vr({key:Vu,state:{init(){return new Wc(oo.empty,oo.empty,null,0,-1)},apply(t,n,r){return yde(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,s=r=="historyUndo"?U7:r=="historyRedo"?$7:null;return!s||!t.editable?!1:(n.preventDefault(),s(t.state,t.dispatch))}}}})}function H7(e,t){return(n,r)=>{let s=Vu.getState(n);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(r){let a=vde(s,n,e);a&&r(t?a.scrollIntoView():a)}return!0}}const U7=H7(!1,!0),$7=H7(!0,!0);Vn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new vr({key:new vs("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const s=this.options.limit;if(s==null||s===0){e=!0;return}const a=this.storage.characters({node:r.doc});if(a>s){const o=a-s,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,c);return e=!0,d}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),a=this.storage.characters({node:t.doc});if(a<=r||s>r&&a>r&&a<=s)return!0;if(s>r&&a>r&&a>s||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,c=a-r,d=l-c,u=l;return t.deleteRange(d,u),!(this.storage.characters({node:t.doc})>r)}})]}});var jde=Vn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[ade(this.options)]}});Vn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new vr({key:new vs("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=t,a=[];if(!n||!r)return gr.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((c,d)=>{if(c.isText)return;if(!(s>=d&&s<=d+c.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((c,d)=>{if(c.isText||!(s>=d&&s<=d+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";a.push(ha.node(d,d+c.nodeSize,{class:this.options.className}))}),gr.create(e,a)}}})]}});var Sde=Vn.create({name:"gapCursor",addProseMirrorPlugins(){return[cde()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=On(Ct(e,"allowGapCursor",n)))!=null?t:null}}});Vn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new vr({key:new vs("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,s=[];if(!n)return null;const a=this.editor.isEmpty;return e.descendants((o,l)=>{const c=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&w1(o);if((c||!this.options.showOnlyCurrent)&&d){const u=[this.options.emptyNodeClass];a&&u.push(this.options.emptyEditorClass);const f=ha.node(l,l+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});s.push(f)}return this.options.includeChildren}),gr.create(e,s)}}})]}});Vn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new vr({key:new vs("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||XP(n.selection)||e.view.dragging?null:gr.create(n.doc,[ha.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function XE({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var kde=Vn.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new vs(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new vr({key:t,appendTransaction:(s,a,o)=>{const{doc:l,tr:c,schema:d}=o,u=t.getState(o),f=l.content.size,p=d.nodes[n];if(u)return c.insert(f,p.create())},state:{init:(s,a)=>{const o=a.tr.doc.lastChild;return!XE({node:o,types:r})},apply:(s,a)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return a;const o=s.doc.lastChild;return!XE({node:o,types:r})}}})]}}),Cde=Vn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>U7(e,t),redo:()=>({state:e,dispatch:t})=>$7(e,t)}},addProseMirrorPlugins(){return[Nde(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Ade=Vn.create({name:"starterKit",addExtensions(){var e,t,n,r;const s=[];return this.options.bold!==!1&&s.push(ece.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(Kle.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(D7.configure(this.options.bulletList)),this.options.code!==!1&&s.push(rce.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(ice.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(oce.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(jde.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(Sde.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(lce.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(cce.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(Cde.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(dce.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(mce.configure(this.options.italic)),this.options.listItem!==!1&&s.push(E7.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(P7.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&s.push(Bce.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&s.push(F7.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(Zce.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(nde.configure(this.options.strike)),this.options.text!==!1&&s.push(rde.configure(this.options.text)),this.options.underline!==!1&&s.push(sde.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(kde.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),Mde=Ade,Dde=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Ede=Ba.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Tr(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,n,r,s,a,o;const l=(n=(t=e.attrs)==null?void 0:t.src)!=null?n:"",c=(s=(r=e.attrs)==null?void 0:r.alt)!=null?s:"",d=(o=(a=e.attrs)==null?void 0:a.title)!=null?o:"";return d?`![${c}](${l} "${d}")`:`![${c}](${l})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:e,minWidth:t,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:s,getPos:a,HTMLAttributes:o,editor:l})=>{const c=document.createElement("img");Object.entries(o).forEach(([f,p])=>{if(p!=null)switch(f){case"width":case"height":break;default:c.setAttribute(f,p);break}}),c.src=o.src;const d=new Toe({element:c,editor:l,node:s,getPos:a,onResize:(f,p)=>{c.style.width=`${f}px`,c.style.height=`${p}px`},onCommit:(f,p)=>{const h=a();h!==void 0&&this.editor.chain().setNodeSelection(h).updateAttributes(this.name,{width:f,height:p}).run()},onUpdate:(f,p,h)=>f.type===s.type,options:{directions:e,min:{width:t,height:n},preserveAspectRatio:r===!0}}),u=d.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",c.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},d}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[p7({find:Dde,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),_de=Vn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).some(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).some(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Tde=20,q7=(e,t=0)=>{const n=[];return!e.children.length||t>Tde||Array.from(e.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...q7(r,t+1))}),n},Lde=e=>{if(!e.children.length)return;const t=q7(e);t&&t.forEach(n=>{var r,s;const a=n.getAttribute("style"),o=(s=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:s.getAttribute("style");n.setAttribute("style",`${o};${a}`)})},V7=Yd.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:e=>e.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&Lde(e),{}):!1}]},renderHTML({HTMLAttributes:e}){return["span",Tr(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleTextStyle:e=>({commands:t})=>t.toggleMark(this.name,e),removeEmptyTextStyle:()=>({tr:e})=>{const{selection:t}=e;return e.doc.nodesBetween(t.from,t.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(a=>!!a))||e.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),Rde=Vn.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const a=r[s].split(":");if(a.length>=2){const o=a[0].trim().toLowerCase(),l=a.slice(1).join(":").trim();if(o==="background-color")return l.replace(/['"]+/g,"")}}}return(t=e.style.backgroundColor)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.backgroundColor?{style:`background-color: ${e.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:e=>({chain:t})=>t().setMark("textStyle",{backgroundColor:e}).run(),unsetBackgroundColor:()=>({chain:e})=>e().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Y7=Vn.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const a=r[s].split(":");if(a.length>=2){const o=a[0].trim().toLowerCase(),l=a.slice(1).join(":").trim();if(o==="color")return l.replace(/['"]+/g,"")}}}return(t=e.style.color)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:`color: ${e.color}`}:{}}}}]},addCommands(){return{setColor:e=>({chain:t})=>t().setMark("textStyle",{color:e}).run(),unsetColor:()=>({chain:e})=>e().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Ode=Vn.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.fontFamily?{style:`font-family: ${e.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:e=>({chain:t})=>t().setMark("textStyle",{fontFamily:e}).run(),unsetFontFamily:()=>({chain:e})=>e().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),Pde=Vn.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:e=>({chain:t})=>t().setMark("textStyle",{fontSize:e}).run(),unsetFontSize:()=>({chain:e})=>e().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Ide=Vn.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:e=>e.style.lineHeight,renderHTML:e=>e.lineHeight?{style:`line-height: ${e.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:e=>({chain:t})=>t().setMark("textStyle",{lineHeight:e}).run(),unsetLineHeight:()=>({chain:e})=>e().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Vn.create({name:"textStyleKit",addExtensions(){const e=[];return this.options.backgroundColor!==!1&&e.push(Rde.configure(this.options.backgroundColor)),this.options.color!==!1&&e.push(Y7.configure(this.options.color)),this.options.fontFamily!==!1&&e.push(Ode.configure(this.options.fontFamily)),this.options.fontSize!==!1&&e.push(Pde.configure(this.options.fontSize)),this.options.lineHeight!==!1&&e.push(Ide.configure(this.options.lineHeight)),this.options.textStyle!==!1&&e.push(V7.configure(this.options.textStyle)),e}});function QE({value:e,onChange:t}){const n=qle({extensions:[Mde,Ede.configure({inline:!0,allowBase64:!0}),_de.configure({types:["heading","paragraph"]}),V7,Y7],content:e,onUpdate:({editor:s})=>{t(s.getHTML())},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[300px] p-4"}}}),r=C.useCallback(()=>{const s=document.createElement("input");s.type="file",s.accept="image/*",s.onchange=a=>{var l;const o=(l=a.target.files)==null?void 0:l[0];if(o){const c=new FileReader;c.onload=d=>{var f;const u=(f=d.target)==null?void 0:f.result;n==null||n.chain().focus().setImage({src:u}).run()},c.readAsDataURL(o)}},s.click()},[n]);return n?i.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-white dark:bg-gray-800",children:[i.jsxs("div",{className:"flex flex-wrap gap-1 p-2 border-b border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900",children:[i.jsx("button",{onClick:()=>n.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("bold")?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Bold",children:i.jsx(RH,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>n.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("italic")?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Italic",children:i.jsx(XU,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>n.chain().focus().toggleCode().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("code")?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Inline Code",children:i.jsx(xU,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),i.jsx("button",{onClick:()=>n.chain().focus().toggleBulletList().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("bulletList")?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Bullet List",children:i.jsx(SL,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>n.chain().focus().toggleOrderedList().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("orderedList")?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Numbered List",children:i.jsx(l$,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),i.jsx("button",{onClick:()=>n.chain().focus().setTextAlign("left").run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive({textAlign:"left"})?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Align Left",children:i.jsx(nq,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>n.chain().focus().setTextAlign("center").run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive({textAlign:"center"})?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Align Center",children:i.jsx(Q$,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>n.chain().focus().setTextAlign("right").run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive({textAlign:"right"})?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Align Right",children:i.jsx(eq,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),i.jsx("button",{onClick:r,className:"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700",type:"button",title:"Insert Image",children:i.jsx(ef,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),i.jsx("button",{onClick:()=>n.chain().focus().undo().run(),disabled:!n.can().undo(),className:"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",type:"button",title:"Undo",children:i.jsx(dq,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>n.chain().focus().redo().run(),disabled:!n.can().redo(),className:"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",type:"button",title:"Redo",children:i.jsx(P$,{className:"w-4 h-4"})}),i.jsx("div",{className:"ml-auto flex items-center gap-2",children:i.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Supports:"," ","{{employee_name}}, {{company_name}}, {{years_completed}}"]})})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:i.jsx(Ile,{editor:n})})]}):null}function Fde(){var x,y,v,N,j,D,T,A;const[e,t]=C.useState("settings"),[n,r]=C.useState(!1),[s,a]=C.useState(null),[o,l]=C.useState([]),[c,d]=C.useState(null);C.useEffect(()=>{e==="settings"&&u(),e==="logs"&&f()},[e]);const u=async()=>{try{r(!0),d(null);const S=await xe.getEmailSettings();a(S)}catch(S){console.error("Failed to fetch settings",S),d(S.message||"Failed to load settings")}finally{r(!1)}},f=async()=>{try{r(!0),d(null);const S=await xe.getEmailAuditLogs();l(S)}catch(S){console.error("Failed to fetch logs",S)}finally{r(!1)}},p=async()=>{try{r(!0),d(null),await xe.updateEmailSettings(s)}catch(S){console.error("Failed to save settings",S),d(S.message||"Failed to save settings")}finally{r(!1)}},h=async()=>{try{r(!0),d(null),await xe.triggerEmailAutomation(),t("logs")}catch(S){console.error("Failed to trigger automation",S),d(S.message||"Failed to trigger automation")}finally{r(!1)}},m=(S,E)=>{a(I=>{const L=S.split("."),O={...I};let F=O;for(let U=0;U<L.length-1;U++)F=F[L[U]];return F[L[L.length-1]]=E,O})},g=[{header:"Recipient",accessorKey:"recipient.name",render:S=>S.recipient.name},{header:"Type",accessorKey:"type",render:S=>i.jsx(Id,{variant:"primary",children:S.type})},{header:"Subject",accessorKey:"subject"},{header:"Date",accessorKey:"sentAt",render:S=>new Date(S.sentAt).toLocaleString()},{header:"Status",accessorKey:"status",render:S=>i.jsx(Id,{variant:S.status==="Success"?"success":"error",children:S.status})},{header:"Trigger",accessorKey:"triggeredBy"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{className:"flex items-center gap-0",children:[i.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors -ml-2",children:i.jsx("svg",{className:"w-5 h-5 text-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Email Automation"}),i.jsx("p",{className:"text-text-secondary",children:"Configure automated birthday and work anniversary email notifications"})]})]})}),c&&i.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c})}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"flex border-b border-border",children:[i.jsx("button",{onClick:()=>t("settings"),className:`px-6 py-3 text-sm font-medium transition-colors ${e==="settings"?"border-b-2 border-brand-primary text-brand-primary":"text-text-secondary hover:text-text-primary"}`,children:"Settings"}),i.jsx("button",{onClick:()=>t("logs"),className:`px-6 py-3 text-sm font-medium transition-colors ${e==="logs"?"border-b-2 border-brand-primary text-brand-primary":"text-text-secondary hover:text-text-primary"}`,children:"Audit Logs"})]}),i.jsxs("div",{className:"p-6",children:[c&&i.jsxs("div",{className:"p-4 mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg",children:["Error: ",c,i.jsx("button",{onClick:u,className:"ml-4 underline hover:text-red-800",children:"Retry"})]}),e==="settings"&&!s&&!n&&!c&&i.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[i.jsx("p",{children:"No settings data found."}),i.jsx("button",{onClick:u,className:"mt-2 text-brand-primary underline",children:"Retry"})]}),e==="settings"&&s&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Birthday Emails"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:((x=s.birthday)==null?void 0:x.enabled)||!1,onChange:S=>m("birthday.enabled",S.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-primary"})]})]}),((y=s.birthday)==null?void 0:y.enabled)&&i.jsxs("div",{className:"grid gap-4 pl-4 border-l-2 border-border",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subject"}),i.jsx(Ze,{type:"text",value:s.birthday.subject,onChange:S=>m("birthday.subject",S.target.value),className:"bg-bg-input"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Body (HTML Editor)"}),i.jsx(QE,{value:s.birthday.body,onChange:S=>m("birthday.body",S),placeholder:"Enter birthday email template..."})]})]})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Work Anniversary Emails"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:((v=s.anniversary)==null?void 0:v.enabled)||!1,onChange:S=>m("anniversary.enabled",S.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-primary"})]})]}),((N=s.anniversary)==null?void 0:N.enabled)&&i.jsxs("div",{className:"grid gap-4 pl-4 border-l-2 border-border",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subject"}),i.jsx(Ze,{type:"text",value:s.anniversary.subject,onChange:S=>m("anniversary.subject",S.target.value),className:"bg-bg-input"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Body (HTML Editor)"}),i.jsx(QE,{value:s.anniversary.body,onChange:S=>m("anniversary.body",S),placeholder:"Enter anniversary email template..."})]})]})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-border md:flex gap-8",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold text-text-primary mb-2",children:"Schedule"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-text-secondary",children:"Send daily at:"}),i.jsx(Ze,{type:"time",value:((j=s.schedule)==null?void 0:j.time)||"09:00",onChange:S=>m("schedule.time",S.target.value),className:"px-2 py-1 bg-bg-input"})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold text-text-primary mb-2",children:"Notifications"}),i.jsxs("div",{className:"space-y-4",children:[" ",i.jsx(La,{checked:((D=s.notification)==null?void 0:D.ccManager)||!1,onChange:S=>m("notification.ccManager",S.target.checked),label:"CC Employee's Manager"}),i.jsx(La,{checked:((T=s.notification)==null?void 0:T.notifyHR)||!1,onChange:S=>m("notification.notifyHR",S.target.checked),label:"Notify HR upon sending"}),i.jsx(La,{checked:((A=s.notification)==null?void 0:A.notifyAllEmployees)||!1,onChange:S=>m("notification.notifyAllEmployees",S.target.checked),label:"Send celebration email to all employees"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-border",children:[i.jsxs("button",{onClick:h,disabled:n,className:"flex items-center gap-2 px-4 py-2 text-brand-primary bg-brand-primary/10 hover:bg-brand-primary/20 rounded-lg transition-colors",children:[i.jsx(oU,{size:18}),"Run Now"]}),i.jsxs("button",{onClick:p,disabled:n,className:"flex items-center gap-2 px-4 py-2 bg-brand-primary text-white hover:bg-brand-primary-dark rounded-lg transition-colors",children:[n?i.jsx(Hr,{size:18,className:"animate-spin"}):i.jsx(yf,{size:18}),"Save Changes"]})]})]}),e==="logs"&&i.jsx("div",{children:i.jsx(Qo,{data:o,columns:g,isLoading:n,emptyMessage:"No emails sent yet."})})]})]})]})}function zde(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(""),[o,l]=C.useState(!1),[c,d]=C.useState(null),[u,f]=C.useState(null),[p,h]=C.useState({name:"",description:"",customFields:[]});C.useEffect(()=>{m()},[]);const m=async()=>{try{r(!0);const T=await xe.getAssetCategories(!0);t(T)}catch(T){a(T.message)}finally{r(!1)}},g=async T=>{T.preventDefault();try{c?await xe.updateAssetCategory(c._id,p):await xe.createAssetCategory(p),l(!1),v(),m()}catch(A){a(A.message)}},x=T=>{d(T),h({name:T.name,description:T.description,customFields:T.customFields||[]}),l(!0)},y=async T=>{try{await xe.deleteAssetCategory(T),f(null),m()}catch(A){a(A.message)}},v=()=>{h({name:"",description:"",customFields:[]}),d(null)},N=()=>{h({...p,customFields:[...p.customFields,{name:"",fieldType:"text",required:!1,options:[]}]})},j=(T,A)=>{const S=[...p.customFields];S[T]={...S[T],...A},h({...p,customFields:S})},D=T=>{h({...p,customFields:p.customFields.filter((A,S)=>S!==T)})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-0",children:[i.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors -ml-2",children:i.jsx(gc,{className:"w-5 h-5 text-text-secondary"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Asset Categories"}),i.jsx("p",{className:"text-text-secondary",children:"Configure asset types and their custom fields"})]})]}),i.jsx(at,{onClick:()=>{v(),l(!0)},leftIcon:i.jsx(Wr,{size:20}),children:"Add Category"})]}),s&&i.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s})}),i.jsx("div",{className:"bg-bg-card border border-border rounded-xl shadow-sm overflow-hidden",children:n?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-bg-secondary border-b border-border",children:i.jsx("tr",{children:["Name","Description","Custom Fields","Status","Actions"].map((T,A)=>i.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider ${T==="Actions"?"text-right":""}`,children:T},A))})}),i.jsx("tbody",{className:"divide-y divide-border",children:[1,2,3,4,5].map(T=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4",children:i.jsx(le,{className:"h-4 w-32"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(le,{className:"h-4 w-48"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(le,{className:"h-4 w-20"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(le,{className:"h-5 w-16 rounded-full"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(le,{className:"h-5 w-5 rounded"}),i.jsx(le,{className:"h-5 w-5 rounded"})]})})]},T))})]})}):e.length===0?i.jsx("div",{className:"p-12 text-center text-text-secondary",children:'No asset categories found. Click "Add Category" to create one.'}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-bg-secondary border-b border-border",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Description"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Custom Fields"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-border",children:e.map(T=>{var A;return i.jsxs("tr",{className:"hover:bg-bg-hover transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"font-medium text-text-primary",children:T.name})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"text-sm text-text-secondary",children:T.description||"-"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("span",{className:"text-sm text-text-secondary",children:[((A=T.customFields)==null?void 0:A.length)||0," field(s)"]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${T.isActive?"bg-status-success/10 text-status-success":"bg-status-muted/10 text-status-muted"}`,children:T.isActive?"Active":"Inactive"})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[i.jsx("button",{onClick:()=>x(T),className:"text-brand-primary hover:text-brand-secondary mr-4",children:i.jsx(OS,{size:18})}),i.jsx("button",{onClick:()=>f(T._id),className:"text-status-error hover:text-red-700",children:i.jsx(br,{size:18})})]})]},T._id)})})]})})}),i.jsx(Hn,{isOpen:o,onClose:()=>{l(!1),v()},title:c?"Edit Category":"Add Category",children:i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Name *"}),i.jsx(Ze,{required:!0,value:p.name,onChange:T=>h({...p,name:T.target.value}),className:"bg-bg-input",placeholder:"e.g., Laptop, Monitor, Keyboard"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Description"}),i.jsx("textarea",{value:p.description,onChange:T=>h({...p,description:T.target.value}),className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20",rows:3,placeholder:"Optional description"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary",children:"Custom Fields"}),i.jsx("button",{type:"button",onClick:N,className:"text-sm text-brand-primary hover:underline",children:"+ Add Field"})]}),p.customFields.map((T,A)=>i.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg mb-2 space-y-2",children:[i.jsxs("div",{className:"flex gap-2 items-start",children:[i.jsx(Ze,{placeholder:"Field name",value:T.name,onChange:S=>j(A,{name:S.target.value}),className:"flex-1 bg-bg-input"}),i.jsx("div",{className:"w-1/3",children:i.jsx(Gt,{value:T.fieldType,onChange:S=>j(A,{fieldType:S}),options:[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"dropdown",label:"Dropdown"},{value:"boolean",label:"Yes/No"}],className:"bg-bg-input"})}),i.jsx("button",{type:"button",onClick:()=>D(A),className:"p-2 text-status-error hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg mt-1",children:i.jsx(br,{size:16})})]}),i.jsx("div",{className:"flex items-center gap-2 mt-2",children:i.jsx(La,{checked:T.required,onChange:S=>j(A,{required:S.target.checked}),label:"Required field"})})]},A))]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(at,{type:"button",variant:"secondary",onClick:()=>{l(!1),v()},children:"Cancel"}),i.jsx(at,{type:"submit",children:c?"Update":"Create"})]})]})}),i.jsxs(Hn,{isOpen:u!==null,onClose:()=>f(null),title:"Delete Category",children:[i.jsx("p",{className:"text-text-secondary mb-4",children:"Are you sure you want to delete this category? This action cannot be undone."}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(at,{variant:"secondary",onClick:()=>f(null),children:"Cancel"}),i.jsx(at,{variant:"danger",onClick:()=>u&&y(u),children:"Delete"})]})]})]})}function Bde(){const[e,t]=C.useState([]),[n,r]=C.useState([]),[s,a]=C.useState(!0),[o,l]=C.useState(""),[c,d]=C.useState(!1),[u,f]=C.useState(null),[p,h]=C.useState(null),[m,g]=C.useState(""),[x,y]=C.useState(""),[v,N]=C.useState(null),[j,D]=C.useState([]),[T,A]=C.useState({employeeId:"",expectedReturnDate:"",notes:""}),[S,E]=C.useState({categoryId:"",status:"",search:""}),[I,L]=C.useState({categoryId:"",name:"",manufacturer:"",model:"",serialNumber:"",purchaseDate:"",vendor:"",warrantyExpiry:"",condition:"New",purchasePrice:"",currentValue:"",notes:"",image:null});C.useEffect(()=>{Promise.all([U(),F(),O()])},[]);const O=async()=>{try{const _=await xe.getEmployees();D(_)}catch(_){console.error("Failed to fetch employees:",_)}},F=async()=>{try{const _=await xe.getAssetCategories();r(_)}catch(_){console.error(_)}},U=async()=>{try{a(!0);const _={};S.categoryId&&(_.categoryId=S.categoryId),S.status&&(_.status=S.status),S.search&&(_.search=S.search);const $=await xe.getAssets(_);t($.assets||$)}catch(_){l(_.message)}finally{a(!1)}};C.useEffect(()=>{U()},[S]);const W=async _=>{_.preventDefault();try{const $=new FormData;$.append("categoryId",I.categoryId),$.append("name",I.name),I.manufacturer&&$.append("manufacturer",I.manufacturer),I.model&&$.append("model",I.model),I.serialNumber&&$.append("serialNumber",I.serialNumber),I.purchaseDate&&$.append("purchaseDate",I.purchaseDate),I.vendor&&$.append("vendor",I.vendor),I.warrantyExpiry&&$.append("warrantyExpiry",I.warrantyExpiry),$.append("condition",I.condition),I.purchasePrice&&$.append("purchasePrice",I.purchasePrice),I.currentValue&&$.append("currentValue",I.currentValue),I.notes&&$.append("notes",I.notes),I.image&&$.append("image",I.image),u?await xe.updateAsset(u._id,$):await xe.createAsset($),d(!1),oe(),U()}catch($){l($.message)}},X=_=>{var $,J;f(_),L({categoryId:_.categoryId._id,name:_.name,manufacturer:_.manufacturer||"",model:_.model||"",serialNumber:_.serialNumber||"",purchaseDate:"",vendor:"",warrantyExpiry:"",condition:_.condition,purchasePrice:(($=_.purchasePrice)==null?void 0:$.toString())||"",currentValue:((J=_.currentValue)==null?void 0:J.toString())||"",notes:"",image:null}),d(!0)},P=async()=>{if(p)try{await xe.disposeAsset(p,{disposalReason:m,disposalNotes:x,disposalDate:new Date().toISOString()}),h(null),g(""),y(""),U()}catch(_){l(_.message)}},z=async()=>{if(!(!v||!T.employeeId))try{await xe.assignAsset({assetId:v._id,employeeId:T.employeeId,expectedReturnDate:T.expectedReturnDate||void 0,conditionAtIssue:v.condition,notes:T.notes}),N(null),A({employeeId:"",expectedReturnDate:"",notes:""}),U()}catch(_){l(_.message)}},oe=()=>{L({categoryId:"",name:"",manufacturer:"",model:"",serialNumber:"",purchaseDate:"",vendor:"",warrantyExpiry:"",condition:"New",purchasePrice:"",currentValue:"",notes:"",image:null}),f(null)},Y=_=>{switch(_){case"Available":return"success";case"Issued":return"info";case"Under Repair":return"warning";case"Lost":case"Disposed":return"error";default:return"default"}},q=()=>{if(e.length===0)return;const _=["Asset Code","Name","Category","Manufacturer","Model","Serial Number","Status","Condition","Purchase Price","Current Value"],$=e.map(he=>{var ye;return[he.assetCode,he.name,((ye=he.categoryId)==null?void 0:ye.name)||"N/A",he.manufacturer||"-",he.model||"-",he.serialNumber||"-",he.status,he.condition,he.purchasePrice||"0",he.currentValue||"0"]}),J=[_.join(","),...$.map(he=>he.map(ye=>`"${ye}"`).join(","))].join(`
`),te=new Blob([J],{type:"text/csv;charset=utf-8;"}),Z=document.createElement("a"),ie=URL.createObjectURL(te);Z.setAttribute("href",ie),Z.setAttribute("download",`asset-inventory-${new Date().toISOString().split("T")[0]}.csv`),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-0",children:[i.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors -ml-2",children:i.jsx(gc,{className:"w-5 h-5 text-text-secondary"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Asset Inventory"}),i.jsx("p",{className:"text-text-secondary",children:"Manage and track all company assets"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{variant:"secondary",onClick:q,leftIcon:i.jsx(xf,{size:18}),disabled:e.length===0,children:"Export CSV"}),i.jsx(at,{onClick:()=>{oe(),d(!0)},leftIcon:i.jsx(Wr,{size:20}),children:"Add Asset"})]})]}),o&&i.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:o})}),i.jsxs("div",{className:"bg-bg-card p-4 rounded-xl border border-border flex gap-4",children:[i.jsx(Ze,{type:"text",placeholder:"Search by name, code, or serial number...",value:S.search,onChange:_=>E({...S,search:_.target.value}),className:"flex-1 bg-bg-input"}),i.jsx("div",{className:"w-48",children:i.jsx(Gt,{value:S.categoryId,onChange:_=>E({...S,categoryId:_}),options:[{value:"",label:"All Categories"},...n.map(_=>({value:_._id,label:_.name}))],className:"bg-bg-input"})}),i.jsx("div",{className:"w-40",children:i.jsx(Gt,{value:S.status,onChange:_=>E({...S,status:_}),options:[{value:"",label:"All Statuses"},{value:"Available",label:"Available"},{value:"Issued",label:"Issued"},{value:"Under Repair",label:"Under Repair"},{value:"Lost",label:"Lost"},{value:"Disposed",label:"Disposed"}],className:"bg-bg-input"})})]}),i.jsx("div",{className:"bg-bg-card border border-border rounded-xl shadow-sm overflow-hidden",children:s?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-bg-secondary border-b border-border",children:i.jsx("tr",{children:["Image","Asset Code","Name","Category","Serial Number","Status","Condition","Actions"].map((_,$)=>i.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase ${_==="Actions"?"text-right":""}`,children:_},$))})}),i.jsx("tbody",{className:"divide-y divide-border",children:[1,2,3,4,5,6].map(_=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4",children:i.jsx(le,{className:"h-10 w-10 rounded-lg"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(le,{className:"h-4 w-20"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx(le,{className:"h-4 w-32"}),i.jsx(le,{className:"h-3 w-24"})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(le,{className:"h-4 w-24"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(le,{className:"h-4 w-20"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(le,{className:"h-6 w-24 rounded-full"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(le,{className:"h-4 w-16"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(le,{className:"h-5 w-5 rounded"}),i.jsx(le,{className:"h-5 w-5 rounded"}),i.jsx(le,{className:"h-5 w-5 rounded"})]})})]},_))})]})}):e.length===0?i.jsxs("div",{className:"p-12 text-center text-text-secondary",children:[i.jsx(lo,{className:"mx-auto mb-4 text-text-muted",size:48}),i.jsx("p",{children:'No assets found. Click "Add Asset" to register one.'})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-bg-secondary border-b border-border",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Image"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Asset Code"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Category"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Serial Number"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Condition"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-border",children:e.map(_=>{var $;return i.jsxs("tr",{className:"hover:bg-bg-hover transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"w-10 h-10 rounded-lg bg-bg-secondary border border-border flex items-center justify-center overflow-hidden",children:_.image?i.jsx("img",{src:_.image.startsWith("http")?_.image:`http://localhost:5000${_.image}`,alt:_.name,className:"w-full h-full object-cover"}):i.jsx(ef,{className:"text-text-muted",size:16})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"font-mono text-sm text-brand-primary",children:_.assetCode})}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("span",{className:"font-medium text-text-primary",children:_.name}),_.manufacturer&&i.jsx("p",{className:"text-xs text-text-secondary",children:_.manufacturer})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"text-sm text-text-secondary",children:(($=_.categoryId)==null?void 0:$.name)||"N/A"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"text-sm text-text-secondary font-mono",children:_.serialNumber||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx(Id,{variant:Y(_.status),children:_.status})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"text-sm text-text-secondary",children:_.condition})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[_.status==="Available"&&i.jsx("button",{onClick:()=>N(_),className:"text-green-600 hover:text-green-700 mr-4",title:"Assign to Employee",children:i.jsx(pq,{size:18})}),i.jsx("button",{onClick:()=>X(_),className:"text-brand-primary hover:text-brand-secondary mr-4",title:"Edit",children:i.jsx(OS,{size:18})}),_.status!=="Disposed"&&i.jsx("button",{onClick:()=>h(_._id),className:"text-amber-600 hover:text-amber-700 mr-4",title:"Dispose Asset",children:i.jsx(br,{size:18})})]})]},_._id)})})]})})}),i.jsx(Hn,{isOpen:c,onClose:()=>{d(!1),oe()},title:u?"Edit Asset":"Add New Asset",children:i.jsxs("form",{onSubmit:W,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{className:"col-span-2",children:i.jsx(Gt,{label:"Category *",required:!0,value:I.categoryId,onChange:_=>L({...I,categoryId:_}),options:[{value:"",label:"Select Category"},...n.map(_=>({value:_._id,label:_.name}))],className:"bg-bg-input"})}),i.jsx("div",{className:"col-span-2",children:i.jsx(Ze,{label:"Asset Name *",type:"text",required:!0,value:I.name,onChange:_=>L({...I,name:_.target.value}),className:"bg-bg-input"})}),i.jsx("div",{children:i.jsx(Ze,{label:"Manufacturer",type:"text",value:I.manufacturer,onChange:_=>L({...I,manufacturer:_.target.value}),className:"bg-bg-input"})}),i.jsx("div",{children:i.jsx(Ze,{label:"Model",type:"text",value:I.model,onChange:_=>L({...I,model:_.target.value}),className:"bg-bg-input"})}),i.jsx("div",{children:i.jsx(Ze,{label:"Serial Number",type:"text",value:I.serialNumber,onChange:_=>L({...I,serialNumber:_.target.value}),className:"bg-bg-input"})}),i.jsx("div",{children:i.jsx(Gt,{label:"Condition",value:I.condition,onChange:_=>L({...I,condition:_}),options:[{value:"New",label:"New"},{value:"Good",label:"Good"},{value:"Used",label:"Used"},{value:"Damaged",label:"Damaged"}],className:"bg-bg-input"})}),i.jsx("div",{children:i.jsx(Ze,{label:"Purchase Price",type:"number",value:I.purchasePrice,onChange:_=>L({...I,purchasePrice:_.target.value}),className:"bg-bg-input"})}),i.jsx("div",{children:i.jsx(Ze,{label:"Current Value",type:"number",value:I.currentValue,onChange:_=>L({...I,currentValue:_.target.value}),className:"bg-bg-input"})}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Asset Image"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"relative w-20 h-20 bg-bg-secondary rounded-lg border border-border flex items-center justify-center overflow-hidden",children:I.image?i.jsx("img",{src:URL.createObjectURL(I.image),alt:"Preview",className:"w-full h-full object-cover"}):u!=null&&u.image?i.jsx("img",{src:u.image.startsWith("http")?u.image:`http://localhost:5000${u.image}`,alt:"Current",className:"w-full h-full object-cover"}):i.jsx(ef,{className:"text-text-muted",size:24})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:_=>{_.target.files&&_.target.files[0]&&L({...I,image:_.target.files[0]})},className:`block w-full text-sm text-text-secondary
                      file:mr-4 file:py-2 file:px-4
                      file:rounded-full file:border-0
                      file:text-sm file:font-semibold
                      file:bg-brand-primary/10 file:text-brand-primary
                      hover:file:bg-brand-primary/20
                    `}),i.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Upload an image of the asset (JPG, PNG, WebP)"})]})]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Notes"}),i.jsx("textarea",{value:I.notes,onChange:_=>L({...I,notes:_.target.value}),className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg",rows:3})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{d(!1),oe()},className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors disabled:opacity-50 flex items-center gap-2",children:u?"Update":"Create"})]})]})}),i.jsx(Hn,{isOpen:v!==null,onClose:()=>{N(null),A({employeeId:"",expectedReturnDate:"",notes:""})},title:"Assign Asset to Employee",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:i.jsxs("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-400",children:["Asset: ",v==null?void 0:v.name," (",v==null?void 0:v.assetCode,")"]})}),i.jsx("div",{children:i.jsx(Gt,{label:"Assign to Employee *",value:T.employeeId,onChange:_=>A({...T,employeeId:_}),options:[{value:"",label:"Select an employee"},...j.map(_=>({value:_._id,label:`${_.firstName} ${_.lastName} - ${_.employeeId||_.email}`}))],required:!0,className:"bg-bg-input"})}),i.jsx("div",{children:i.jsx(Ze,{label:"Expected Return Date (Optional)",type:"date",value:T.expectedReturnDate,onChange:_=>A({...T,expectedReturnDate:_.target.value}),className:"bg-bg-input"})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Notes (Optional)"}),i.jsx("textarea",{value:T.notes,onChange:_=>A({...T,notes:_.target.value}),className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg",rows:3,placeholder:"Enter any assignment notes or special instructions..."})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(at,{variant:"secondary",onClick:()=>{N(null),A({employeeId:"",expectedReturnDate:"",notes:""})},children:"Cancel"}),i.jsx(at,{onClick:z,disabled:!T.employeeId,children:"Assign Asset"})]})]})}),i.jsx(Hn,{isOpen:p!==null,onClose:()=>{h(null),g(""),y("")},title:"Dispose Asset",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:i.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-400",children:[" ",i.jsx("strong",{children:"Warning:"})," Asset disposal is permanent and cannot be undone. The asset will be marked as disposed and removed from active inventory."]})}),i.jsx("div",{children:i.jsx(Gt,{label:"Disposal Reason *",required:!0,value:m,onChange:_=>g(_),options:[{value:"",label:"Select a reason"},{value:"End of Life",label:"End of Life"},{value:"Damaged Beyond Repair",label:"Damaged Beyond Repair"},{value:"Lost/Stolen",label:"Lost/Stolen"},{value:"Obsolete",label:"Obsolete"},{value:"Sold",label:"Sold"},{value:"Donated",label:"Donated"},{value:"Other",label:"Other"}],className:"bg-bg-input"})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Additional Notes (Optional)"}),i.jsx("textarea",{value:x,onChange:_=>y(_.target.value),className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg",rows:3,placeholder:"Enter any additional details about the disposal..."})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(at,{variant:"secondary",onClick:()=>{h(null),g(""),y("")},children:"Cancel"}),i.jsx(at,{variant:"danger",onClick:P,disabled:!m,children:"Dispose Asset"})]})]})})]})}function Hde(){var F,U;const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(""),[o,l]=C.useState(null),[c,d]=C.useState(null),[u,f]=C.useState("Good"),[p,h]=C.useState(""),[m,g]=C.useState(null),[x,y]=C.useState("Damage"),[v,N]=C.useState(""),[j,D]=C.useState("Medium"),[T,A]=C.useState([]);C.useEffect(()=>{S()},[]);const S=async()=>{try{r(!0);const W=await xe.getMyAssets();t(W)}catch(W){a(W.message)}finally{r(!1)}},E=async W=>{try{await xe.acknowledgeAsset(W),l(null),S()}catch(X){a(X.message)}},I=async()=>{if(c)try{await xe.returnAsset(c,{conditionAtReturn:u,notes:p}),d(null),f("Good"),h(""),S()}catch(W){a(W.message)}},L=async()=>{if(m)try{const W={assetId:m.assetId._id,assignmentId:m._id,incidentType:x,description:v,urgency:j};await xe.reportAssetIncident(W,T),g(null),y("Damage"),N(""),D("Medium"),A([]),S()}catch(W){a(W.message)}},O=()=>e.filter(W=>W.status==="Pending Acknowledgement").length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"My Assets"}),i.jsx("p",{className:"text-text-secondary",children:"Assets assigned to you by the company"})]}),s&&i.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s})}),O()>0&&i.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:i.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-400 font-medium",children:[" You have ",O()," asset(s) pending acknowledgement"]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n?Array.from({length:8}).map((W,X)=>i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl overflow-hidden flex flex-col h-[280px]",children:[i.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(le,{className:"w-5 h-5 rounded"}),i.jsx(le,{className:"h-5 w-32"})]}),i.jsx(le,{className:"h-3 w-20 ml-7"})]}),i.jsx(le,{className:"h-5 w-16 rounded-full"})]}),i.jsxs("div",{className:"p-4 flex-1 space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-4 w-3/4"}),i.jsx(le,{className:"h-4 w-1/2"}),i.jsx(le,{className:"h-4 w-2/3"})]}),i.jsxs("div",{className:"border-t border-border/50 pt-2 space-y-2",children:[i.jsx(le,{className:"h-4 w-full"}),i.jsx(le,{className:"h-4 w-2/3"})]})]}),i.jsxs("div",{className:"p-3 border-t border-border bg-bg-hover/50 flex gap-2",children:[i.jsx(le,{className:"h-8 flex-1 rounded-lg"}),i.jsx(le,{className:"h-8 flex-1 rounded-lg"})]})]},X)):e.length===0?i.jsxs("div",{className:"col-span-full py-12 bg-bg-card border border-border rounded-xl text-center text-text-secondary",children:[i.jsx(lo,{className:"mx-auto mb-4 text-text-muted",size:48}),i.jsx("p",{className:"text-lg",children:"No assets assigned to you"})]}):e.map(W=>i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl overflow-hidden hover:shadow-sm transition-all duration-200 flex flex-col group",children:[i.jsxs("div",{className:"p-4 border-b border-border bg-gradient-to-r from-bg-hover to-transparent flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(lo,{className:"text-brand-primary shrink-0",size:18}),i.jsx("h3",{className:"text-base font-bold text-text-primary truncate",title:W.assetId.name,children:W.assetId.name})]}),i.jsx("p",{className:"text-xs text-text-secondary font-mono truncate pl-6.5",children:W.assetId.assetCode})]}),i.jsx(Id,{variant:W.status==="Pending Acknowledgement"?"warning":"success",size:"sm",className:"shrink-0",children:W.status})]}),i.jsxs("div",{className:"p-4 flex-1 space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[W.assetId.manufacturer&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[i.jsx(EU,{size:14,className:"text-text-secondary shrink-0"}),i.jsx("span",{className:"truncate",title:W.assetId.manufacturer,children:W.assetId.manufacturer})]}),W.assetId.model&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[i.jsx(n$,{size:14,className:"text-text-secondary shrink-0"}),i.jsx("span",{className:"truncate",title:W.assetId.model,children:W.assetId.model})]}),W.assetId.serialNumber&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[i.jsx(xy,{size:14,className:"text-text-secondary shrink-0"}),i.jsx("span",{className:"truncate font-mono text-xs",title:W.assetId.serialNumber,children:W.assetId.serialNumber})]})]}),i.jsxs("div",{className:"border-t border-border/50 pt-2 space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[i.jsx(VH,{size:14,className:"text-text-secondary shrink-0"}),i.jsxs("span",{children:["Issued:"," ",new Date(W.issueDate).toLocaleDateString()]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[i.jsx(wH,{size:14,className:"text-text-secondary shrink-0"}),i.jsxs("span",{children:["Condition: ",W.conditionAtIssue]})]}),W.expectedReturnDate&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[i.jsx(sq,{size:14,className:"text-text-secondary shrink-0"}),i.jsxs("span",{children:["Return:"," ",new Date(W.expectedReturnDate).toLocaleDateString()]})]})]}),W.notes&&i.jsx("div",{className:"pt-2",children:i.jsxs("p",{className:"text-xs text-text-secondary italic line-clamp-2",title:W.notes,children:['"',W.notes,'"']})})]}),i.jsx("div",{className:"p-3 border-t border-border bg-bg-hover/50",children:W.status==="Pending Acknowledgement"?i.jsx(at,{variant:"primary",size:"sm",className:"w-full justify-center h-8",onClick:()=>l(W._id),leftIcon:i.jsx(Yr,{size:14}),children:"Acknowledge"}):W.status==="Active"?i.jsxs("div",{className:"flex gap-2",children:[i.jsx(at,{variant:"secondary",size:"sm",className:"flex-1 justify-center h-8 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600",onClick:()=>d(W._id),leftIcon:i.jsx(jp,{size:14}),children:"Return"}),i.jsx(at,{variant:"danger",size:"sm",className:"flex-1 justify-center h-8",onClick:()=>g(W),leftIcon:i.jsx(bs,{size:14}),children:"Report"})]}):i.jsx("div",{className:"h-8"})})]},W._id))}),i.jsx(Hn,{isOpen:o!==null,onClose:()=>l(null),title:"Acknowledge Asset Receipt",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-text-secondary",children:"By acknowledging this asset, you confirm that:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-text-secondary text-sm",children:[i.jsx("li",{children:"You have received the asset in the condition stated"}),i.jsx("li",{children:"You will handle the asset with care and responsibility"}),i.jsx("li",{children:"You will report any damage or issues immediately"}),i.jsx("li",{children:"You will return the asset when requested or upon leaving the company"})]}),i.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg",children:i.jsx(La,{id:"agree",label:"I agree to the terms and conditions above",required:!0})}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(at,{variant:"secondary",onClick:()=>l(null),children:"Cancel"}),i.jsx(at,{onClick:()=>o&&E(o),children:"Acknowledge Receipt"})]})]})}),i.jsx(Hn,{isOpen:c!==null,onClose:()=>{d(null),f("Good"),h("")},title:"Return Asset",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Condition at Return *"}),i.jsx(Gt,{value:u,onChange:W=>f(W),options:[{value:"New",label:"New"},{value:"Good",label:"Good"},{value:"Used",label:"Used"},{value:"Damaged",label:"Damaged"}],className:"bg-bg-input"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Notes (Optional)"}),i.jsx(mo,{value:p,onChange:W=>h(W.target.value),className:"bg-bg-input",rows:3,placeholder:"Any additional notes about the asset condition..."})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(at,{variant:"secondary",onClick:()=>{d(null),f("Good"),h("")},children:"Cancel"}),i.jsx(at,{onClick:I,children:"Process Return"})]})]})}),i.jsx(Hn,{isOpen:m!==null,onClose:()=>{g(null),y("Damage"),N(""),D("Medium"),A([])},title:"Report Asset Issue",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:i.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-400",children:[i.jsx("strong",{children:"Asset:"})," ",(F=m==null?void 0:m.assetId)==null?void 0:F.name," (",(U=m==null?void 0:m.assetId)==null?void 0:U.assetCode,")"]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Incident Type *"}),i.jsx(Gt,{value:x,onChange:W=>y(W),options:[{value:"Damage",label:"Damage"},{value:"Lost",label:"Lost"},{value:"Theft",label:"Theft"},{value:"Malfunction",label:"Malfunction"}],className:"bg-bg-input"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Description *"}),i.jsx(mo,{value:v,onChange:W=>N(W.target.value),className:"bg-bg-input",rows:4,placeholder:"Describe what happened in detail...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Urgency"}),i.jsx(Gt,{value:j,onChange:W=>D(W),options:[{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"},{value:"Critical",label:"Critical"}],className:"bg-bg-input"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Upload Photos (Optional, max 5)"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:W=>{const X=Array.from(W.target.files||[]);A(X.slice(0,5))},className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg text-sm"}),T.length>0&&i.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:[T.length," photo(s) selected"]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(at,{variant:"secondary",onClick:()=>{g(null),y("Damage"),N(""),D("Medium"),A([])},children:"Cancel"}),i.jsx(at,{onClick:L,disabled:!v.trim(),children:"Submit Report"})]})]})})]})}function Ude(){const e=Fa(),[t,n]=C.useState(null),[r,s]=C.useState(!0),[a,o]=C.useState("");C.useEffect(()=>{l()},[]);const l=async()=>{try{s(!0);const u=await xe.getAssetStats();n(u)}catch(u){o(u.message)}finally{s(!1)}};if(r)return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(le,{className:"h-8 w-48 mb-2"}),i.jsx(le,{className:"h-4 w-64"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(u=>i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(le,{className:"h-6 w-6 rounded"}),i.jsx(le,{className:"h-4 w-12"})]}),i.jsx(le,{className:"h-8 w-16 mb-1"}),i.jsx(le,{className:"h-4 w-24"})]},u))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 flex flex-col h-full",children:[i.jsx(le,{className:"h-6 w-48 mb-4"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 flex-1",children:[[1,2,3,4].map(u=>i.jsxs("div",{className:"p-3 border border-border rounded-lg h-24",children:[i.jsx(le,{className:"h-5 w-20 mb-2"}),i.jsx(le,{className:"h-8 w-12"})]},u)),i.jsxs("div",{className:"col-span-2 p-3 border border-border rounded-lg flex items-center justify-between h-16",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(le,{className:"h-5 w-5 rounded"}),i.jsx(le,{className:"h-4 w-20"})]}),i.jsx(le,{className:"h-6 w-12"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"border border-border rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(le,{className:"h-6 w-6 rounded-full"}),i.jsxs("div",{className:"space-y-2 flex-1",children:[i.jsx(le,{className:"h-5 w-48"}),i.jsx(le,{className:"h-4 w-full"})]})]})}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsx(le,{className:"h-6 w-32 mb-4"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4].map(u=>i.jsxs("div",{className:"p-4 border border-border rounded-lg h-20",children:[i.jsx(le,{className:"h-5 w-5 mb-2"}),i.jsx(le,{className:"h-4 w-24"})]},u))})]})]})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsx(le,{className:"h-6 w-40 mb-4"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(u=>i.jsxs("div",{children:[i.jsx(le,{className:"h-4 w-24 mb-2"}),i.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[i.jsx(le,{className:"h-8 w-16"}),i.jsx(le,{className:"h-4 w-32"})]}),i.jsx(le,{className:"h-2 w-full rounded-full"})]},u))})]})]});if(a)return i.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:a})});const c=()=>!t||t.totalAssets===0?0:Math.round(t.issuedAssets/t.totalAssets*100),d=()=>!t||t.totalAssets===0?0:Math.round(t.availableAssets/t.totalAssets*100);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Asset Management"}),i.jsx("p",{className:"text-text-secondary",children:"Overview of company assets and inventory"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(lo,{className:"text-brand-primary",size:24}),i.jsx("span",{className:"text-xs text-text-secondary",children:"Total"})]}),i.jsx("div",{className:"text-3xl font-bold text-text-primary",children:(t==null?void 0:t.totalAssets)||0}),i.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Total Assets"})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(Yr,{className:"text-status-success",size:24}),i.jsxs(Id,{variant:"success",children:[d(),"%"]})]}),i.jsx("div",{className:"text-3xl font-bold text-text-primary",children:(t==null?void 0:t.availableAssets)||0}),i.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Available"})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(Ch,{className:"text-status-info",size:24}),i.jsxs(Id,{variant:"info",children:[c(),"%"]})]}),i.jsx("div",{className:"text-3xl font-bold text-text-primary",children:(t==null?void 0:t.issuedAssets)||0}),i.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Issued"})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(Ch,{className:"text-brand-primary",size:24}),i.jsx("span",{className:"text-xs text-text-secondary",children:"INR"})]}),i.jsx("div",{className:"text-3xl font-bold text-text-primary",children:new Intl.NumberFormat("en-IN",{notation:"compact",maximumFractionDigits:1}).format((t==null?void 0:t.totalValue)||0)}),i.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Total Value"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 flex flex-col h-full",children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Asset Status Breakdown"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 flex-1",children:[i.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/10 border border-green-100 dark:border-green-800 rounded-lg flex flex-col justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Yr,{className:"text-green-600 dark:text-green-400",size:18}),i.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Available"})]}),i.jsx("span",{className:"text-2xl font-bold text-text-primary",children:(t==null?void 0:t.availableAssets)||0})]}),i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-800 rounded-lg flex flex-col justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ch,{className:"text-blue-600 dark:text-blue-400",size:18}),i.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Issued"})]}),i.jsx("span",{className:"text-2xl font-bold text-text-primary",children:(t==null?void 0:t.issuedAssets)||0})]}),i.jsxs("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-800 rounded-lg flex flex-col justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(bs,{className:"text-amber-600 dark:text-amber-400",size:18}),i.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Under Repair"})]}),i.jsx("span",{className:"text-2xl font-bold text-text-primary",children:(t==null?void 0:t.underRepairAssets)||0})]}),i.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/10 border border-red-100 dark:border-red-800 rounded-lg flex flex-col justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(jp,{className:"text-red-600 dark:text-red-400",size:18}),i.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Lost"})]}),i.jsx("span",{className:"text-2xl font-bold text-text-primary",children:(t==null?void 0:t.lostAssets)||0})]}),i.jsxs("div",{className:"col-span-2 p-3 bg-gray-50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-700 rounded-lg flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(lo,{className:"text-gray-500",size:18}),i.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Disposed"})]}),i.jsx("span",{className:"text-2xl font-bold text-text-primary",children:(t==null?void 0:t.disposedAssets)||0})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[t&&t.warrantyExpiringSoon>0&&i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(bs,{className:"text-amber-600 dark:text-amber-400 flex-shrink-0",size:24}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-amber-800 dark:text-amber-400 mb-1",children:"Warranty Expiring Soon"}),i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-500",children:[t.warrantyExpiringSoon," asset",t.warrantyExpiringSoon!==1?"s":""," with warranty expiring in 30 days"]})]})]})}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>e("/assets/inventory"),className:"p-4 bg-brand-primary/10 hover:bg-brand-primary/20 rounded-lg transition-colors text-left",children:[i.jsx(lo,{className:"text-brand-primary mb-2",size:20}),i.jsx("p",{className:"text-sm font-medium text-text-primary",children:"View Inventory"})]}),i.jsxs("button",{onClick:()=>e("/miscellaneous/asset-categories"),className:"p-4 bg-brand-primary/10 hover:bg-brand-primary/20 rounded-lg transition-colors text-left",children:[i.jsx(lo,{className:"text-brand-primary mb-2",size:20}),i.jsx("p",{className:"text-sm font-medium text-text-primary",children:"Categories"})]}),i.jsxs("button",{onClick:()=>e("/my-assets"),className:"p-4 bg-brand-primary/10 hover:bg-brand-primary/20 rounded-lg transition-colors text-left",children:[i.jsx(Yr,{className:"text-brand-primary mb-2",size:20}),i.jsx("p",{className:"text-sm font-medium text-text-primary",children:"My Assets"})]}),i.jsxs("button",{onClick:()=>e("/assets/inventory"),className:"p-4 bg-brand-primary/10 hover:bg-brand-primary/20 rounded-lg transition-colors text-left",children:[i.jsx(Es,{className:"text-brand-primary mb-2",size:20}),i.jsx("p",{className:"text-sm font-medium text-text-primary",children:"History"})]})]})]})]})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Utilization Insights"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Utilization Rate"}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs("span",{className:"text-2xl font-bold text-text-primary",children:[c(),"%"]}),i.jsx("span",{className:"text-sm text-text-secondary mb-1",children:"of assets in use"})]}),i.jsx("div",{className:"mt-2 bg-bg-secondary rounded-full h-2",children:i.jsx("div",{className:"bg-status-info rounded-full h-2 transition-all",style:{width:`${c()}%`}})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Availability Rate"}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs("span",{className:"text-2xl font-bold text-text-primary",children:[d(),"%"]}),i.jsx("span",{className:"text-sm text-text-secondary mb-1",children:"available for use"})]}),i.jsx("div",{className:"mt-2 bg-bg-secondary rounded-full h-2",children:i.jsx("div",{className:"bg-status-success rounded-full h-2 transition-all",style:{width:`${d()}%`}})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Asset Health"}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs("span",{className:"text-2xl font-bold text-text-primary",children:[t?Math.round((t.totalAssets-t.lostAssets-t.disposedAssets-t.underRepairAssets)/t.totalAssets*100):0,"%"]}),i.jsx("span",{className:"text-sm text-text-secondary mb-1",children:"in good condition"})]}),i.jsx("div",{className:"mt-2 bg-bg-secondary rounded-full h-2",children:i.jsx("div",{className:"bg-status-success rounded-full h-2 transition-all",style:{width:`${t?Math.round((t.totalAssets-t.lostAssets-t.disposedAssets-t.underRepairAssets)/t.totalAssets*100):0}%`}})})]})]})]})]})}function $de({postId:e}){const{user:t}=cn(),[n,r]=C.useState([]),[s,a]=C.useState(!0),[o,l]=C.useState(""),[c,d]=C.useState(!1);C.useEffect(()=>{u()},[e]);const u=async()=>{try{const p=await xe.getComments(e);r(p.comments||[])}catch(p){console.error("Failed to fetch comments",p)}finally{a(!1)}},f=async p=>{if(p.preventDefault(),!!o.trim()){d(!0);try{const h=await xe.addComment(e,o);r([...n,h.comment]),l("")}catch(h){console.error("Failed to add comment",h)}finally{d(!1)}}};return s?i.jsx("div",{className:"flex justify-center p-4",children:i.jsx(Hr,{className:"animate-spin text-gray-400",size:20})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-1",children:[n.map(p=>{var m,g,x,y,v,N,j,D;const h=(m=p.reactions)==null?void 0:m.find(T=>{var A;return T.user===(t==null?void 0:t.employeeId)||((A=T.user)==null?void 0:A._id)===(t==null?void 0:t.employeeId)});return i.jsxs("div",{className:"flex gap-2.5 group",children:[i.jsx(uc,{src:(g=p.author)!=null&&g.profilePicture?`${xs}/${p.author.profilePicture}`:void 0,alt:(x=p.author)==null?void 0:x.firstName,name:`${(y=p.author)==null?void 0:y.firstName} ${(v=p.author)==null?void 0:v.lastName}`,className:"w-8 h-8 flex-shrink-0"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-bg-hover rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[i.jsxs("span",{className:"font-semibold text-xs text-gray-900 dark:text-text-primary",children:[(N=p.author)==null?void 0:N.firstName," ",(j=p.author)==null?void 0:j.lastName]}),i.jsx("span",{className:"text-[10px] text-gray-500 dark:text-text-muted",children:cR(new Date(p.createdAt),{addSuffix:!0})})]}),i.jsx("p",{className:"text-sm text-gray-700 dark:text-text-primary whitespace-pre-wrap leading-tight",children:p.content})]}),i.jsx("div",{className:"flex items-center gap-4 mt-1 ml-1",children:i.jsxs("button",{onClick:async()=>{try{const T=await xe.toggleCommentReaction(p._id,"like");r(A=>A.map(S=>S._id===p._id?{...S,reactions:T.reactions}:S))}catch(T){console.error("Failed to react",T)}},className:`text-xs font-medium flex items-center gap-1 transition-colors ${h?"text-red-500":"text-gray-500 dark:text-text-secondary hover:text-gray-700 dark:hover:text-text-primary"}`,children:[h?"Liked":"Like",((D=p.reactions)==null?void 0:D.length)>0&&i.jsx("span",{className:"bg-gray-100 dark:bg-bg-hover px-1 rounded-full text-[10px]",children:p.reactions.length})]})})]})]},p._id)}),n.length===0&&i.jsx("p",{className:"text-center text-xs text-gray-400 py-2",children:"No comments yet. Be the first!"})]}),i.jsxs("form",{onSubmit:f,className:"flex items-center gap-2",children:[i.jsx(uc,{src:t!=null&&t.avatar?`${xs}/${t.avatar}`:void 0,name:t==null?void 0:t.name,className:"w-8 h-8"}),i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Ze,{value:o,onChange:p=>l(p.target.value),placeholder:"Write a comment...",className:"bg-gray-100 dark:bg-bg-hover rounded-full pr-10"}),i.jsx("button",{type:"submit",disabled:!o.trim()||c,className:"absolute right-2 top-1/2 -translate-y-1/2 text-blue-600 hover:text-blue-700 disabled:opacity-50 p-1",children:c?i.jsx(Hr,{size:16,className:"animate-spin"}):i.jsx(Lg,{size:16})})]})]})]})}function qde({post:e,onPostUpdate:t,onDelete:n}){var I,L,O,F,U,W,X,P,z,oe,Y,q,_,$;const{user:r}=cn(),[s,a]=C.useState(!1),[o,l]=C.useState(!1),[c,d]=C.useState(!1),[u,f]=C.useState(e.content),[p,h]=C.useState(!1),[m,g]=C.useState(!1),[x,y]=C.useState(!1),[v,N]=C.useState(!1),j=async()=>{try{y(!0),await xe.deletePost(e._id),n(e._id)}catch(J){console.error("Delete failed",J)}finally{y(!1),g(!1)}},D=async()=>{if(u.trim())try{h(!0);const J=await xe.updatePost(e._id,u);t(J.post),d(!1)}catch(J){console.error("Update failed",J)}finally{h(!1)}},T=(I=e.reactions)==null?void 0:I.find(J=>{var Z,ie;if((Z=J.user)!=null&&Z.employeeId)return J.user.employeeId===(r==null?void 0:r.employeeId);const te=((ie=J.user)==null?void 0:ie._id)||J.user;return String(te)===String(r==null?void 0:r.id)||String(te)===String(r==null?void 0:r.employeeId)}),A=async()=>{if(!o){l(!0);try{const J=await xe.toggleReaction(e._id,"like");t({...e,reactions:J.reactions})}catch(J){console.error("Reaction failed",J)}finally{l(!1)}}},S=async J=>{try{const te=await xe.votePoll(e._id,J);t({...e,pollData:te.pollData})}catch(te){console.error("Voting failed",te)}},E=((L=e.author)==null?void 0:L.employeeId)===(r==null?void 0:r.employeeId)||((O=e.author)==null?void 0:O._id)===(r==null?void 0:r.employeeId);return i.jsxs("div",{className:"bg-white dark:bg-bg-card border border-border rounded-xl p-5 shadow-sm hover:shadow-md transition-all duration-300 mb-6 group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(uc,{src:(F=e.author)!=null&&F.profilePicture?`${xs}/${e.author.profilePicture}`:void 0,alt:(U=e.author)==null?void 0:U.firstName,name:`${(W=e.author)==null?void 0:W.firstName} ${(X=e.author)==null?void 0:X.lastName}`,className:"w-10 h-10 ring-2 ring-white dark:ring-bg-card shadow-sm"}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-text-primary text-sm flex items-center gap-2",children:[(P=e.author)==null?void 0:P.firstName," ",(z=e.author)==null?void 0:z.lastName,e.type==="appreciation"&&i.jsx("span",{className:"text-xs font-normal text-text-secondary",children:"shared an appreciation"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-muted",children:[i.jsx("span",{className:"font-medium text-text-secondary",children:((oe=e.author)==null?void 0:oe.designation)||"Employee"}),i.jsx("span",{children:""}),i.jsx("span",{className:"text-text-muted",children:cR(new Date(e.createdAt),{addSuffix:!0})})]})]})]}),(E||(r==null?void 0:r.role)==="Admin")&&i.jsxs("div",{className:"relative opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>N(!v),className:"text-text-muted hover:text-text-primary p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-bg-hover transition-colors",children:i.jsx(kU,{size:18})}),v&&i.jsxs("div",{className:"absolute right-0 top-8 w-40 bg-white dark:bg-bg-card border border-border shadow-lg rounded-xl py-1 z-20 animate-in fade-in zoom-in-95 duration-200",children:[E&&i.jsx("button",{onClick:()=>{d(!0),N(!1)},className:"w-full text-left px-4 py-2 text-sm text-text-primary hover:bg-gray-50 dark:hover:bg-bg-hover transition-colors font-medium",children:"Edit Post"}),i.jsx("button",{onClick:()=>{g(!0),N(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors font-medium",children:"Delete Post"})]})]})]}),i.jsx("div",{className:"mb-4",children:c?i.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-bg-hover p-4 rounded-xl border border-border",children:[i.jsx("textarea",{value:u,onChange:J=>f(J.target.value),className:"w-full p-3 border border-border rounded-lg focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary min-h-[100px] text-sm bg-white dark:bg-bg-card"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>{d(!1),f(e.content)},disabled:p,className:"px-4 py-2 text-xs font-medium text-text-secondary hover:bg-gray-200 dark:hover:bg-bg-main rounded-lg transition-colors",children:"Cancel"}),i.jsx("button",{onClick:D,disabled:p||!u.trim(),className:"px-4 py-2 text-xs font-medium bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 shadow-sm",children:p?"Saving...":"Save Changes"})]})]}):e.type==="appreciation"?i.jsxs("div",{className:"relative overflow-hidden p-3.5 bg-gradient-to-br from-brand-primary/5 via-brand-secondary/5 to-transparent rounded-xl border border-brand-primary/10",children:[i.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-brand-primary/5 rounded-full blur-3xl -mr-12 -mt-12 pointer-events-none"}),i.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[e.media&&e.media.length>0&&i.jsx("div",{className:"flex-shrink-0 bg-white dark:bg-bg-card p-2 rounded-full border border-border shadow-sm ring-2 ring-white/50 dark:ring-white/5",children:i.jsx("img",{src:e.media[0].startsWith("http")?e.media[0]:`${xs}${e.media[0]}`,alt:"Badge",className:"w-10 h-10 object-contain"})}),i.jsx("div",{className:"flex-1 text-text-primary text-sm leading-snug",children:e.relatedAppreciationId&&typeof e.relatedAppreciationId=="object"&&"sender"in e.relatedAppreciationId?i.jsxs("div",{className:"space-y-1.5",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold text-brand-primary",children:(Y=e.relatedAppreciationId.badge)==null?void 0:Y.title})," ","awarded to"," ",i.jsxs("span",{className:"font-semibold text-text-primary",children:[(q=e.relatedAppreciationId.recipient)==null?void 0:q.firstName," ",(_=e.relatedAppreciationId.recipient)==null?void 0:_.lastName]})]}),e.relatedAppreciationId.message&&i.jsx("div",{className:"relative pl-3 border-l-2 border-brand-primary/30",children:i.jsxs("p",{className:"italic text-text-secondary text-sm line-clamp-2",children:['"',e.relatedAppreciationId.message,'"']})})]}):i.jsx("p",{className:"whitespace-pre-wrap",children:e.content})})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-text-primary whitespace-pre-wrap text-[15px] leading-relaxed mb-4",children:e.content}),e.media&&e.media.length>0&&i.jsx("div",{className:`grid gap-2 mb-4 rounded-xl overflow-hidden ${e.media.length===1?"grid-cols-1":"grid-cols-2"}`,children:e.media.map((J,te)=>i.jsxs("div",{className:"relative group cursor-pointer",children:[i.jsx("img",{src:J.startsWith("http")?J:`${xs}${J}`,alt:"Post attachment",className:"w-full h-full object-cover max-h-[500px] hover:scale-[1.02] transition-transform duration-300"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors pointer-events-none"})]},te))}),e.type==="poll"&&e.pollData&&i.jsxs("div",{className:"bg-gray-50/50 dark:bg-black/20 rounded-xl p-4 border border-border backdrop-blur-sm",children:[i.jsxs("h5",{className:"font-semibold text-sm mb-4 text-text-primary flex items-center gap-2",children:[i.jsx("span",{className:"w-1 h-4 bg-brand-primary rounded-full"}),e.pollData.question||"Poll"]}),i.jsx("div",{className:"space-y-2.5",children:e.pollData.options.map((J,te)=>{const Z=e.pollData.options.reduce((ye,Se)=>ye+Se.votes.length,0),ie=Z===0?0:Math.round(J.votes.length/Z*100),he=J.votes.some(ye=>ye===(r==null?void 0:r.employeeId)||ye._id===(r==null?void 0:r.employeeId));return i.jsxs("button",{onClick:()=>S(te),className:`relative w-full text-left p-3 rounded-xl border text-sm transition-all overflow-hidden group/opt ${he?"border-brand-primary/30 text-brand-primary font-medium":"border-border hover:border-brand-primary/30 text-text-primary dark:text-text-primary"}`,children:[i.jsx("div",{className:`absolute left-0 top-0 bottom-0 transition-all duration-700 ease-out ${he?"bg-brand-primary/10 dark:bg-brand-primary/20":"bg-gray-100 dark:bg-white/5 group-hover/opt:bg-brand-primary/5"}`,style:{width:`${ie}%`}}),i.jsxs("div",{className:"flex justify-between relative z-10",children:[i.jsx("span",{children:J.text}),i.jsxs("span",{className:"font-semibold",children:[ie,"%"]})]})]},te)})}),i.jsx("div",{className:"flex justify-end mt-3",children:i.jsxs("span",{className:"text-xs font-medium text-text-secondary bg-white/50 dark:bg-white/5 px-2 py-1 rounded-md border border-border",children:[e.pollData.options.reduce((J,te)=>J+te.votes.length,0)," ","votes total"]})})]})]})}),i.jsx("div",{className:"flex items-center justify-between border-t border-border pt-3",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:A,className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${T?"text-red-500 bg-red-50 dark:bg-red-900/10":"text-text-secondary hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10"}`,children:[i.jsx(jL,{size:18,className:`transition-transform duration-200 ${T?"fill-current scale-110":"scale-100"}`}),(($=e.reactions)==null?void 0:$.length)||0,i.jsx("span",{className:"hidden sm:inline font-normal opacity-80",children:"Likes"})]}),i.jsxs("button",{onClick:()=>a(!s),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${s?"text-brand-primary bg-brand-primary/10":"text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10"}`,children:[i.jsx(y$,{size:18}),e.commentCount||0,i.jsx("span",{className:"hidden sm:inline font-normal opacity-80",children:"Comments"})]})]})}),s&&i.jsx("div",{className:"mt-4 pt-4 border-t border-border animate-in fade-in slide-in-from-top-1",children:i.jsx($de,{postId:e._id})}),i.jsx(ma,{isOpen:m,onClose:()=>g(!1),onConfirm:j,title:"Delete Post",message:"Are you sure you want to delete this post? This action cannot be undone.",confirmText:"Delete Post",variant:"danger",isLoading:x})]})}function Vde({onPostCreated:e}){const{user:t}=cn(),[n,r]=C.useState(""),[s,a]=C.useState([]),[o,l]=C.useState(!1),[c,d]=C.useState(["",""]),[u,f]=C.useState("company"),[p,h]=C.useState(!1),[m,g]=C.useState(!1),x=C.useRef(null),y=async T=>{if(T.target.files&&T.target.files.length>0){h(!0);try{const A=T.target.files[0],S=await xe.uploadSocialMedia(A);a([...s,S.url])}catch(A){console.error("Upload failed",A)}finally{h(!1),x.current&&(x.current.value="")}}},v=T=>{a(s.filter((A,S)=>S!==T))},N=async()=>{if(!(!n.trim()&&s.length===0&&!o)){g(!0);try{const T={content:n,scope:u,media:s,type:o?"poll":s.length>0?"image":"text"};if(o&&(T.pollData={question:n||"Poll Question",options:c.filter(S=>S.trim()).map(S=>({text:S,votes:[]})),allowMultiple:!1},T.pollData.options.length<2)){alert("Poll needs at least 2 options"),g(!1);return}const A=await xe.createPost(T);e(A.post),r(""),a([]),l(!1),d(["",""])}catch(T){console.error("Post failed",T)}finally{g(!1)}}},j=()=>d([...c,""]),D=(T,A)=>{const S=[...c];S[T]=A,d(S)};return i.jsx("div",{className:"bg-white dark:bg-bg-card rounded-xl p-4 shadow-sm border border-border hover:shadow-md transition-shadow duration-300",children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx(uc,{src:t!=null&&t.avatar?`${xs}/${t.avatar}`:void 0,name:t==null?void 0:t.name,className:"w-11 h-11 ring-2 ring-white dark:ring-bg-card shadow-sm"}),i.jsxs("div",{className:"flex-1 space-y-3",children:[i.jsx("div",{className:"flex items-center",children:i.jsxs("div",{className:"relative inline-block group",children:[i.jsx(Gt,{value:u,onChange:T=>f(T),options:[{value:"company",label:"Everyone"},{value:"department",label:"My Department"},{value:"project",label:"My Project"}],className:"w-40 bg-gray-50 dark:bg-bg-hover text-xs py-0 h-9"}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-text-muted group-hover:text-brand-primary transition-colors",children:i.jsx(Pa,{size:12})})]})}),i.jsx(mo,{value:n,onChange:T=>r(T.target.value),placeholder:o?"Ask a question...":"What's on your mind?",className:"w-full border-none p-0 focus:ring-0 resize-none text-base min-h-[60px] placeholder:text-text-muted/60 bg-transparent text-text-primary shadow-none"}),s.length>0&&i.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:[s.map((T,A)=>i.jsxs("div",{className:"relative w-32 h-32 flex-shrink-0 group",children:[i.jsx("img",{src:T,alt:"preview",className:"w-full h-full object-cover rounded-xl shadow-sm border border-border"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-xl"}),i.jsx("button",{onClick:()=>v(A),className:"absolute top-2 right-2 bg-black/50 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70 backdrop-blur-sm",children:i.jsx(bi,{size:14})})]},A)),p&&i.jsx("div",{className:"w-32 h-32 flex items-center justify-center bg-gray-50 dark:bg-bg-hover rounded-xl border border-border border-dashed animate-pulse",children:i.jsx(Hr,{className:"animate-spin text-brand-primary"})})]}),o&&i.jsxs("div",{className:"bg-gray-50/50 dark:bg-black/20 p-4 rounded-xl border border-border space-y-3 animate-in fade-in slide-in-from-top-2",children:[i.jsx("div",{className:"space-y-2",children:c.map((T,A)=>i.jsx(Ze,{type:"text",value:T,onChange:S=>D(A,S.target.value),placeholder:`Option ${A+1}`,className:"bg-gray-50 dark:bg-bg-card"},A))}),i.jsxs("button",{onClick:j,className:"text-xs text-brand-primary font-semibold hover:underline flex items-center gap-1",children:[i.jsx("span",{className:"text-lg leading-none",children:"+"})," Add Option"]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-3 mt-1 border-t border-border/50",children:[i.jsxs("div",{className:"flex gap-1",children:[i.jsxs("button",{onClick:()=>{var T;return(T=x.current)==null?void 0:T.click()},className:"p-2 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-full transition-all duration-200",title:"Add Photo",children:[i.jsx(ef,{size:20,className:"stroke-[1.5]"}),i.jsx("input",{type:"file",ref:x,className:"hidden",accept:"image/*",onChange:y})]}),i.jsx("button",{onClick:()=>l(!o),className:`p-2 rounded-full transition-all duration-200 ${o?"text-brand-primary bg-brand-primary/10":"text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10"}`,title:"Create Poll",children:i.jsx(XH,{size:20,className:"stroke-[1.5]"})})]}),i.jsx("button",{onClick:N,disabled:m||!n&&s.length===0&&!o,className:"bg-brand-primary text-white px-6 py-2 rounded-full text-sm font-semibold hover:bg-brand-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-brand-primary/20 hover:shadow-brand-primary/30 hover:-translate-y-0.5 active:translate-y-0 disabled:hover:translate-y-0 disabled:shadow-none",children:m?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Hr,{size:16,className:"animate-spin"}),"Posting"]}):"Post"})]})]})]})})}function Yde(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[s,a]=C.useState(!1),[o,l]=C.useState(1),[c,d]=C.useState(!0),{clearSocialNotifications:u}=ux();C.useEffect(()=>{u(),f()},[]);const f=async(x=1)=>{try{x>1&&a(!0);const y=await xe.getSocialFeed({page:x,limit:10});console.log(`Loaded page ${x}:`,y.posts.length,"posts"),t(x===1?y.posts:v=>{const N=new Set(v.map(D=>D._id)),j=y.posts.filter(D=>!N.has(D._id));return[...v,...j]}),d(y.currentPage<y.totalPages),l(x)}catch(y){console.error("Failed to load feed",y)}finally{r(!1),a(!1)}},p=()=>{s||f(o+1)},h=x=>{t([x,...e])},m=x=>{t(e.map(y=>y._id===x._id?x:y))},g=x=>{t(e.filter(y=>y._id!==x))};return n&&o===1?i.jsxs("div",{className:"max-w-2xl mx-auto py-6 px-4 space-y-6",children:[i.jsx(le,{className:"h-40 w-full rounded-xl"})," ",[1,2,3].map(x=>i.jsxs("div",{className:"bg-white dark:bg-bg-card rounded-xl border border-gray-200 dark:border-border p-4 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(le,{className:"h-10 w-10 rounded-full"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-4 w-32"}),i.jsx(le,{className:"h-3 w-24"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(le,{className:"h-4 w-full"}),i.jsx(le,{className:"h-4 w-[90%]"}),i.jsx(le,{className:"h-4 w-[80%]"})]})]},x))]}):i.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4",children:[i.jsx("div",{className:"mb-8",children:i.jsx(Vde,{onPostCreated:h})}),i.jsx("div",{className:"space-y-6",children:e.map(x=>i.jsx(qde,{post:x,onPostUpdate:m,onDelete:g},x._id))}),e.length===0&&i.jsx("div",{className:"text-center py-16 bg-white/50 dark:bg-bg-card/50 rounded-xl border-2 border-dashed border-gray-200 dark:border-border backdrop-blur-sm",children:i.jsxs("div",{className:"max-w-xs mx-auto space-y-3",children:[i.jsx("p",{className:"text-lg font-medium text-text-primary",children:"No posts yet"}),i.jsx("p",{className:"text-text-secondary",children:"Be the first to share something with your team!"})]})}),c&&e.length>0&&i.jsx("div",{className:"mt-10 text-center",children:i.jsx("button",{onClick:p,disabled:s,className:"px-6 py-2.5 bg-white dark:bg-bg-card border border-border shadow-sm rounded-full text-brand-primary font-medium text-sm hover:bg-gray-50 dark:hover:bg-bg-hover transition-all hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:s?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Loading..."]}):"Load more posts"})})]})}function Wde(){const{showToast:e}=ux(),{refreshUser:t}=cn(),[n,r]=C.useState(!1),[s,a]=C.useState(!1),[o,l]=C.useState(null),[c,d]=C.useState(null),[u,f]=C.useState({companyName:"",subdomain:"",timezone:"Asia/Kolkata",currency:"INR",workHours:{start:"09:00",end:"18:00"},dateFormat:"DD/MM/YYYY",logo:null,favicon:null});C.useEffect(()=>{p()},[]);const p=async()=>{try{r(!0);const x=(await xe.getCompanySettings()).company;f({companyName:x.name,subdomain:x.subdomain||"",timezone:x.timezone,currency:x.currency,workHours:x.workHours,dateFormat:x.dateFormat,logo:null,favicon:null}),x.logo&&l(x.logo),x.favicon&&d(x.favicon)}catch(g){console.error("Failed to fetch settings",g),e("Failed to load settings","error")}finally{r(!1)}},h=(g,x)=>{if(g.target.files&&g.target.files[0]){const y=g.target.files[0];f(N=>({...N,[x]:y}));const v=new FileReader;v.onloadend=()=>{x==="logo"?l(v.result):d(v.result)},v.readAsDataURL(y)}},m=async g=>{g.preventDefault(),a(!0);try{const x=new FormData;x.append("companyName",u.companyName),x.append("timezone",u.timezone),x.append("currency",u.currency),x.append("workHours",JSON.stringify(u.workHours)),x.append("dateFormat",u.dateFormat),u.logo&&x.append("logo",u.logo),u.favicon&&x.append("favicon",u.favicon),await xe.updateCompanySettings(x),await t(),e("System settings updated successfully","success")}catch(x){console.error("Failed to update settings",x),e(x.message||"Failed to update settings","error")}finally{a(!1)}};return n?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(le,{className:"h-8 w-48 mb-2"}),i.jsx(le,{className:"h-4 w-64"})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(le,{className:"h-5 w-5 rounded"}),i.jsx(le,{className:"h-6 w-32"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx(le,{className:"h-4 w-24 mb-2"}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx(le,{className:"w-32 h-32 rounded-lg"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(le,{className:"h-4 w-full"}),i.jsx(le,{className:"h-3 w-3/4"}),i.jsx(le,{className:"h-8 w-24 mt-2 rounded-lg"})]})]})]}),i.jsxs("div",{children:[i.jsx(le,{className:"h-4 w-24 mb-2"}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx(le,{className:"w-16 h-16 rounded-lg"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(le,{className:"h-4 w-full"}),i.jsx(le,{className:"h-3 w-3/4"}),i.jsx(le,{className:"h-8 w-24 mt-2 rounded-lg"})]})]})]})]})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(le,{className:"h-5 w-5 rounded"}),i.jsx(le,{className:"h-6 w-48"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx(le,{className:"h-4 w-24 mb-1"}),i.jsx(le,{className:"h-10 w-full rounded-lg"})]}),i.jsxs("div",{children:[i.jsx(le,{className:"h-4 w-24 mb-1"}),i.jsx(le,{className:"h-10 w-full rounded-lg"})]})]})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"System Settings"}),i.jsx("p",{className:"text-text-secondary",children:"Manage your company branding and general configuration"})]}),i.jsxs("form",{onSubmit:m,className:"space-y-6",children:[i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(ef,{className:"text-brand-primary",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Branding"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Company Logo"}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"w-32 h-32 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[o?i.jsx("img",{src:o,alt:"Logo preview",className:"w-full h-full object-contain"}):i.jsx("span",{className:"text-text-muted text-xs",children:"No Logo"}),i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx("p",{className:"text-white text-xs font-medium",children:"Change"})}),i.jsx("input",{type:"file",accept:"image/*",onChange:g=>h(g,"logo"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),i.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[i.jsx("p",{children:"Upload your company logo."}),i.jsx("p",{className:"mt-1 text-xs text-text-muted",children:"Recommended size: 200x200px. Max 5MB."}),i.jsx("div",{className:"mt-2",children:i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[i.jsx(yi,{size:14}),"Choose File",i.jsx("input",{type:"file",accept:"image/*",onChange:g=>h(g,"logo"),className:"hidden"})]})})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Favicon"}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"w-16 h-16 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[c?i.jsx("img",{src:c,alt:"Favicon preview",className:"w-8 h-8 object-contain"}):i.jsx(Sp,{className:"text-text-muted",size:24}),i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx("p",{className:"text-white text-[10px] font-medium",children:"Change"})}),i.jsx("input",{type:"file",accept:"image/*",onChange:g=>h(g,"favicon"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),i.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[i.jsx("p",{children:"Upload browser favicon."}),i.jsx("p",{className:"mt-1 text-xs text-text-muted",children:".ico, .png, .jpg supported."}),i.jsx("div",{className:"mt-2",children:i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[i.jsx(yi,{size:14}),"Choose File",i.jsx("input",{type:"file",accept:"image/*",onChange:g=>h(g,"favicon"),className:"hidden"})]})})]})]})]})]})]}),i.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Eg,{className:"text-brand-primary",size:20}),i.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"General Configuration"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Company Name"}),i.jsx(Ze,{value:u.companyName,onChange:g=>f({...u,companyName:g.target.value}),className:"bg-bg-input"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Subdomain"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ze,{value:u.subdomain,disabled:!0,className:"bg-bg-secondary cursor-not-allowed rounded-r-none"}),i.jsx("span",{className:"px-3 py-2 bg-bg-secondary border border-l-0 border-border rounded-r-lg text-text-secondary text-sm",children:".yourhrms.com"})]}),i.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Contact support to change subdomain."})]})]})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx(at,{type:"submit",isLoading:s,leftIcon:i.jsx(yf,{size:20}),children:"Save Changes"})})]})]})}const Gde=QB([{path:"/login",element:i.jsx(vX,{})},{path:"/signup",element:i.jsx(wX,{})},{path:"/unauthorized",element:i.jsx(NX,{})},{path:"/",element:i.jsx(wV,{}),children:[{index:!0,element:i.jsx(En,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern"],children:i.jsx(ote,{})})},{index:!0,element:i.jsx(Dg,{to:"/",replace:!0})},{path:"ai-configuration",element:i.jsx(En,{allowedRoles:["Admin","HR"],children:i.jsx(ws,{module:"ai_chatbot",children:i.jsx(cne,{})})})},{path:"employee-management",element:i.jsx(En,{allowedRoles:["Admin","HR"],children:i.jsx(ws,{module:"employees",children:i.jsx(bX,{})})})},{path:"roles",element:i.jsx(En,{allowedRoles:["Admin","HR"],children:i.jsx(ws,{module:"roles",children:i.jsx(gne,{})})})},{path:"profile",element:i.jsx(En,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:i.jsx(dte,{})})},{path:"attendance",element:i.jsx(En,{allowedRoles:["Employee","HR","Project Manager","Intern","Consultant"],children:i.jsx(ws,{module:"attendance",children:i.jsx(yte,{})})})},{path:"audit",element:i.jsx(En,{allowedRoles:["Admin","HR"],children:i.jsx(ws,{module:"audit",children:i.jsx(bte,{})})})},{path:"leave",element:i.jsx(En,{allowedRoles:["Admin","HR","Project Manager","Employee","Intern","Consultant"],children:i.jsx(ws,{module:"leave",children:i.jsx(Zte,{})})})},{path:"payroll",element:i.jsx(En,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:i.jsx(ws,{module:"payroll",children:i.jsx(rne,{})})})},{path:"projects",element:i.jsx(En,{allowedRoles:["Admin","Project Manager","Employee","Intern","Consultant","Accountant"],children:i.jsx(ws,{module:"projects",children:i.jsx(ane,{})})})},{path:"projects/:id",element:i.jsx(En,{allowedRoles:["Admin","Project Manager","Employee","Intern","Consultant"],children:i.jsx(ws,{module:"projects",children:i.jsx(lne,{})})})},{path:"organization",element:i.jsx(En,{allowedRoles:["Admin","HR","Project Manager","Employee","Intern","Consultant","Accountant"],children:i.jsx(ws,{module:"organization",children:i.jsx(une,{})})})},{path:"/settings/company",element:i.jsx(En,{allowedRoles:["Admin"],children:i.jsx(bne,{})})},{path:"/settings/documents",element:i.jsx(En,{allowedRoles:["Admin","HR"],children:i.jsx(ws,{module:"documents",children:i.jsx(jne,{})})})},{path:"/settings/subscription",element:i.jsx(En,{allowedRoles:["Admin","HR","Accountant"],children:i.jsx(vne,{})})},{path:"/settings/usage",element:i.jsx(En,{allowedRoles:["Admin","HR"],children:i.jsx(wne,{})})},{path:"/superadmin/tenants",element:i.jsx(En,{allowedRoles:["Super Admin"],children:i.jsx(pne,{})})},{path:"/superadmin/analytics",element:i.jsx(En,{allowedRoles:["Super Admin"],children:i.jsx(mne,{})})},{path:"/superadmin/users",element:i.jsx(En,{allowedRoles:["Super Admin"],children:i.jsx(xne,{})})},{path:"/superadmin/settings",element:i.jsx(En,{allowedRoles:["Super Admin"],children:i.jsx(yne,{})})},{path:"settings",element:i.jsx(En,{allowedRoles:["Admin"],children:i.jsx(Wde,{})})},{path:"social",element:i.jsx(En,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:i.jsx(ws,{module:"social",children:i.jsx(Yde,{})})})},{path:"miscellaneous",element:i.jsx(En,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:i.jsx(Sne,{})})},{path:"miscellaneous/feedback",element:i.jsx(En,{allowedRoles:["HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:i.jsx(kne,{})})},{path:"miscellaneous/appreciation",element:i.jsx(En,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:i.jsx(ws,{module:"appreciation",children:i.jsx(Cne,{})})})},{path:"miscellaneous/email-automation",element:i.jsx(En,{allowedRoles:["Admin","HR"],children:i.jsx(ws,{module:"email_automation",children:i.jsx(Fde,{})})})},{path:"miscellaneous/asset-categories",element:i.jsx(En,{allowedRoles:["Admin","HR"],children:i.jsx(ws,{module:"assets",children:i.jsx(zde,{})})})},{path:"assets",element:i.jsx(En,{allowedRoles:["Admin","HR"],children:i.jsx(ws,{module:"assets",children:i.jsx(Ude,{})})})},{path:"assets/inventory",element:i.jsx(En,{allowedRoles:["Admin","HR"],children:i.jsx(ws,{module:"assets",children:i.jsx(Bde,{})})})},{path:"my-assets",element:i.jsx(En,{allowedRoles:["Admin","HR","Project Manager","Employee","Intern","Consultant"],children:i.jsx(ws,{module:"assets",children:i.jsx(Hde,{})})})}]}]);function Kde(){return i.jsx(dV,{children:i.jsx(vV,{children:i.jsx(iH,{router:Gde})})})}M9.createRoot(document.getElementById("root")).render(i.jsx(C.StrictMode,{children:i.jsx(Kde,{})}));export{zn as _,Xde as c,e6 as g};
