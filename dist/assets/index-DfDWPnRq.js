var ru=Object.defineProperty;var nu=(e,t,n)=>t in e?ru(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vn=(e,t,n)=>nu(e,typeof t!="symbol"?t+"":t,n);function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const Ee=t[n];if(typeof Ee!="string"&&!Array.isArray(Ee)){for(const Re in Ee)if(Re!=="default"&&!(Re in e)){const Ce=Object.getOwnPropertyDescriptor(Ee,Re);Ce&&Object.defineProperty(e,Re,Ce.get?Ce:{enumerable:!0,get:()=>Ee[Re]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const Re of document.querySelectorAll('link[rel="modulepreload"]'))Ee(Re);new MutationObserver(Re=>{for(const Ce of Re)if(Ce.type==="childList")for(const Te of Ce.addedNodes)Te.tagName==="LINK"&&Te.rel==="modulepreload"&&Ee(Te)}).observe(document,{childList:!0,subtree:!0});function n(Re){const Ce={};return Re.integrity&&(Ce.integrity=Re.integrity),Re.referrerPolicy&&(Ce.referrerPolicy=Re.referrerPolicy),Re.crossOrigin==="use-credentials"?Ce.credentials="include":Re.crossOrigin==="anonymous"?Ce.credentials="omit":Ce.credentials="same-origin",Ce}function Ee(Re){if(Re.ep)return;Re.ep=!0;const Ce=n(Re);fetch(Re.href,Ce)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var REACT_ELEMENT_TYPE$2=Symbol.for("react.transitional.element"),REACT_FRAGMENT_TYPE$2=Symbol.for("react.fragment");function jsxProd(e,t,n){var Ee=null;if(n!==void 0&&(Ee=""+n),t.key!==void 0&&(Ee=""+t.key),"key"in t){n={};for(var Re in t)Re!=="key"&&(n[Re]=t[Re])}else n=t;return t=n.ref,{$$typeof:REACT_ELEMENT_TYPE$2,type:e,key:Ee,ref:t!==void 0?t:null,props:n}}reactJsxRuntime_production.Fragment=REACT_FRAGMENT_TYPE$2;reactJsxRuntime_production.jsx=jsxProd;reactJsxRuntime_production.jsxs=jsxProd;jsxRuntime.exports=reactJsxRuntime_production;var jsxRuntimeExports=jsxRuntime.exports,react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var REACT_ELEMENT_TYPE$1=Symbol.for("react.transitional.element"),REACT_PORTAL_TYPE$2=Symbol.for("react.portal"),REACT_FRAGMENT_TYPE$1=Symbol.for("react.fragment"),REACT_STRICT_MODE_TYPE$1=Symbol.for("react.strict_mode"),REACT_PROFILER_TYPE$1=Symbol.for("react.profiler"),REACT_CONSUMER_TYPE$1=Symbol.for("react.consumer"),REACT_CONTEXT_TYPE$1=Symbol.for("react.context"),REACT_FORWARD_REF_TYPE$1=Symbol.for("react.forward_ref"),REACT_SUSPENSE_TYPE$1=Symbol.for("react.suspense"),REACT_MEMO_TYPE$1=Symbol.for("react.memo"),REACT_LAZY_TYPE$1=Symbol.for("react.lazy"),REACT_ACTIVITY_TYPE$1=Symbol.for("react.activity"),MAYBE_ITERATOR_SYMBOL$1=Symbol.iterator;function getIteratorFn$1(e){return e===null||typeof e!="object"?null:(e=MAYBE_ITERATOR_SYMBOL$1&&e[MAYBE_ITERATOR_SYMBOL$1]||e["@@iterator"],typeof e=="function"?e:null)}var ReactNoopUpdateQueue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},assign$4=Object.assign,emptyObject={};function Component(e,t,n){this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue}Component.prototype.isReactComponent={};Component.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Component.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ComponentDummy(){}ComponentDummy.prototype=Component.prototype;function PureComponent(e,t,n){this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue}var pureComponentPrototype=PureComponent.prototype=new ComponentDummy;pureComponentPrototype.constructor=PureComponent;assign$4(pureComponentPrototype,Component.prototype);pureComponentPrototype.isPureReactComponent=!0;var isArrayImpl$1=Array.isArray;function noop$5(){}var ReactSharedInternals$2={H:null,A:null,T:null,S:null},hasOwnProperty$2=Object.prototype.hasOwnProperty;function ReactElement(e,t,n){var Ee=n.ref;return{$$typeof:REACT_ELEMENT_TYPE$1,type:e,key:t,ref:Ee!==void 0?Ee:null,props:n}}function cloneAndReplaceKey(e,t){return ReactElement(e.type,t,e.props)}function isValidElement(e){return typeof e=="object"&&e!==null&&e.$$typeof===REACT_ELEMENT_TYPE$1}function escape(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var userProvidedKeyEscapeRegex=/\/+/g;function getElementKey(e,t){return typeof e=="object"&&e!==null&&e.key!=null?escape(""+e.key):t.toString(36)}function resolveThenable(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(noop$5,noop$5):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function mapIntoArray(e,t,n,Ee,Re){var Ce=typeof e;(Ce==="undefined"||Ce==="boolean")&&(e=null);var Te=!1;if(e===null)Te=!0;else switch(Ce){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(e.$$typeof){case REACT_ELEMENT_TYPE$1:case REACT_PORTAL_TYPE$2:Te=!0;break;case REACT_LAZY_TYPE$1:return Te=e._init,mapIntoArray(Te(e._payload),t,n,Ee,Re)}}if(Te)return Re=Re(e),Te=Ee===""?"."+getElementKey(e,0):Ee,isArrayImpl$1(Re)?(n="",Te!=null&&(n=Te.replace(userProvidedKeyEscapeRegex,"$&/")+"/"),mapIntoArray(Re,t,n,"",function(Oe){return Oe})):Re!=null&&(isValidElement(Re)&&(Re=cloneAndReplaceKey(Re,n+(Re.key==null||e&&e.key===Re.key?"":(""+Re.key).replace(userProvidedKeyEscapeRegex,"$&/")+"/")+Te)),t.push(Re)),1;Te=0;var Me=Ee===""?".":Ee+":";if(isArrayImpl$1(e))for(var De=0;De<e.length;De++)Ee=e[De],Ce=Me+getElementKey(Ee,De),Te+=mapIntoArray(Ee,t,n,Ce,Re);else if(De=getIteratorFn$1(e),typeof De=="function")for(e=De.call(e),De=0;!(Ee=e.next()).done;)Ee=Ee.value,Ce=Me+getElementKey(Ee,De++),Te+=mapIntoArray(Ee,t,n,Ce,Re);else if(Ce==="object"){if(typeof e.then=="function")return mapIntoArray(resolveThenable(e),t,n,Ee,Re);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return Te}function mapChildren$1(e,t,n){if(e==null)return e;var Ee=[],Re=0;return mapIntoArray(e,Ee,"","",function(Ce){return t.call(n,Ce,Re++)}),Ee}function lazyInitializer(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var reportGlobalError$1=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Children={map:mapChildren$1,forEach:function(e,t,n){mapChildren$1(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return mapChildren$1(e,function(){t++}),t},toArray:function(e){return mapChildren$1(e,function(t){return t})||[]},only:function(e){if(!isValidElement(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production.Activity=REACT_ACTIVITY_TYPE$1;react_production.Children=Children;react_production.Component=Component;react_production.Fragment=REACT_FRAGMENT_TYPE$1;react_production.Profiler=REACT_PROFILER_TYPE$1;react_production.PureComponent=PureComponent;react_production.StrictMode=REACT_STRICT_MODE_TYPE$1;react_production.Suspense=REACT_SUSPENSE_TYPE$1;react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ReactSharedInternals$2;react_production.__COMPILER_RUNTIME={__proto__:null,c:function(e){return ReactSharedInternals$2.H.useMemoCache(e)}};react_production.cache=function(e){return function(){return e.apply(null,arguments)}};react_production.cacheSignal=function(){return null};react_production.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var Ee=assign$4({},e.props),Re=e.key;if(t!=null)for(Ce in t.key!==void 0&&(Re=""+t.key),t)!hasOwnProperty$2.call(t,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&t.ref===void 0||(Ee[Ce]=t[Ce]);var Ce=arguments.length-2;if(Ce===1)Ee.children=n;else if(1<Ce){for(var Te=Array(Ce),Me=0;Me<Ce;Me++)Te[Me]=arguments[Me+2];Ee.children=Te}return ReactElement(e.type,Re,Ee)};react_production.createContext=function(e){return e={$$typeof:REACT_CONTEXT_TYPE$1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:REACT_CONSUMER_TYPE$1,_context:e},e};react_production.createElement=function(e,t,n){var Ee,Re={},Ce=null;if(t!=null)for(Ee in t.key!==void 0&&(Ce=""+t.key),t)hasOwnProperty$2.call(t,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Re[Ee]=t[Ee]);var Te=arguments.length-2;if(Te===1)Re.children=n;else if(1<Te){for(var Me=Array(Te),De=0;De<Te;De++)Me[De]=arguments[De+2];Re.children=Me}if(e&&e.defaultProps)for(Ee in Te=e.defaultProps,Te)Re[Ee]===void 0&&(Re[Ee]=Te[Ee]);return ReactElement(e,Ce,Re)};react_production.createRef=function(){return{current:null}};react_production.forwardRef=function(e){return{$$typeof:REACT_FORWARD_REF_TYPE$1,render:e}};react_production.isValidElement=isValidElement;react_production.lazy=function(e){return{$$typeof:REACT_LAZY_TYPE$1,_payload:{_status:-1,_result:e},_init:lazyInitializer}};react_production.memo=function(e,t){return{$$typeof:REACT_MEMO_TYPE$1,type:e,compare:t===void 0?null:t}};react_production.startTransition=function(e){var t=ReactSharedInternals$2.T,n={};ReactSharedInternals$2.T=n;try{var Ee=e(),Re=ReactSharedInternals$2.S;Re!==null&&Re(n,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(noop$5,reportGlobalError$1)}catch(Ce){reportGlobalError$1(Ce)}finally{t!==null&&n.types!==null&&(t.types=n.types),ReactSharedInternals$2.T=t}};react_production.unstable_useCacheRefresh=function(){return ReactSharedInternals$2.H.useCacheRefresh()};react_production.use=function(e){return ReactSharedInternals$2.H.use(e)};react_production.useActionState=function(e,t,n){return ReactSharedInternals$2.H.useActionState(e,t,n)};react_production.useCallback=function(e,t){return ReactSharedInternals$2.H.useCallback(e,t)};react_production.useContext=function(e){return ReactSharedInternals$2.H.useContext(e)};react_production.useDebugValue=function(){};react_production.useDeferredValue=function(e,t){return ReactSharedInternals$2.H.useDeferredValue(e,t)};react_production.useEffect=function(e,t){return ReactSharedInternals$2.H.useEffect(e,t)};react_production.useEffectEvent=function(e){return ReactSharedInternals$2.H.useEffectEvent(e)};react_production.useId=function(){return ReactSharedInternals$2.H.useId()};react_production.useImperativeHandle=function(e,t,n){return ReactSharedInternals$2.H.useImperativeHandle(e,t,n)};react_production.useInsertionEffect=function(e,t){return ReactSharedInternals$2.H.useInsertionEffect(e,t)};react_production.useLayoutEffect=function(e,t){return ReactSharedInternals$2.H.useLayoutEffect(e,t)};react_production.useMemo=function(e,t){return ReactSharedInternals$2.H.useMemo(e,t)};react_production.useOptimistic=function(e,t){return ReactSharedInternals$2.H.useOptimistic(e,t)};react_production.useReducer=function(e,t,n){return ReactSharedInternals$2.H.useReducer(e,t,n)};react_production.useRef=function(e){return ReactSharedInternals$2.H.useRef(e)};react_production.useState=function(e){return ReactSharedInternals$2.H.useState(e)};react_production.useSyncExternalStore=function(e,t,n){return ReactSharedInternals$2.H.useSyncExternalStore(e,t,n)};react_production.useTransition=function(){return ReactSharedInternals$2.H.useTransition()};react_production.version="19.2.0";react.exports=react_production;var reactExports=react.exports;const React4=getDefaultExportFromCjs(reactExports),React$4=_mergeNamespaces({__proto__:null,default:React4},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(lr,cr){var rr=lr.length;lr.push(cr);e:for(;0<rr;){var pr=rr-1>>>1,mr=lr[pr];if(0<Re(mr,cr))lr[pr]=cr,lr[rr]=mr,rr=pr;else break e}}function n(lr){return lr.length===0?null:lr[0]}function Ee(lr){if(lr.length===0)return null;var cr=lr[0],rr=lr.pop();if(rr!==cr){lr[0]=rr;e:for(var pr=0,mr=lr.length,ir=mr>>>1;pr<ir;){var nr=2*(pr+1)-1,gr=lr[nr],Er=nr+1,Cr=lr[Er];if(0>Re(gr,rr))Er<mr&&0>Re(Cr,gr)?(lr[pr]=Cr,lr[Er]=rr,pr=Er):(lr[pr]=gr,lr[nr]=rr,pr=nr);else if(Er<mr&&0>Re(Cr,rr))lr[pr]=Cr,lr[Er]=rr,pr=Er;else break e}}return cr}function Re(lr,cr){var rr=lr.sortIndex-cr.sortIndex;return rr!==0?rr:lr.id-cr.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var Ce=performance;e.unstable_now=function(){return Ce.now()}}else{var Te=Date,Me=Te.now();e.unstable_now=function(){return Te.now()-Me}}var De=[],Oe=[],Be=1,ze=null,$e=3,He=!1,Ue=!1,Ve=!1,We=!1,qe=typeof setTimeout=="function"?setTimeout:null,Ge=typeof clearTimeout=="function"?clearTimeout:null,Ye=typeof setImmediate<"u"?setImmediate:null;function Ke(lr){for(var cr=n(Oe);cr!==null;){if(cr.callback===null)Ee(Oe);else if(cr.startTime<=lr)Ee(Oe),cr.sortIndex=cr.expirationTime,t(De,cr);else break;cr=n(Oe)}}function Xe(lr){if(Ve=!1,Ke(lr),!Ue)if(n(De)!==null)Ue=!0,Ze||(Ze=!0,dr());else{var cr=n(Oe);cr!==null&&br(Xe,cr.startTime-lr)}}var Ze=!1,er=-1,St=5,ar=-1;function hr(){return We?!0:!(e.unstable_now()-ar<St)}function ur(){if(We=!1,Ze){var lr=e.unstable_now();ar=lr;var cr=!0;try{e:{Ue=!1,Ve&&(Ve=!1,Ge(er),er=-1),He=!0;var rr=$e;try{t:{for(Ke(lr),ze=n(De);ze!==null&&!(ze.expirationTime>lr&&hr());){var pr=ze.callback;if(typeof pr=="function"){ze.callback=null,$e=ze.priorityLevel;var mr=pr(ze.expirationTime<=lr);if(lr=e.unstable_now(),typeof mr=="function"){ze.callback=mr,Ke(lr),cr=!0;break t}ze===n(De)&&Ee(De),Ke(lr)}else Ee(De);ze=n(De)}if(ze!==null)cr=!0;else{var ir=n(Oe);ir!==null&&br(Xe,ir.startTime-lr),cr=!1}}break e}finally{ze=null,$e=rr,He=!1}cr=void 0}}finally{cr?dr():Ze=!1}}}var dr;if(typeof Ye=="function")dr=function(){Ye(ur)};else if(typeof MessageChannel<"u"){var vr=new MessageChannel,yr=vr.port2;vr.port1.onmessage=ur,dr=function(){yr.postMessage(null)}}else dr=function(){qe(ur,0)};function br(lr,cr){er=qe(function(){lr(e.unstable_now())},cr)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(lr){lr.callback=null},e.unstable_forceFrameRate=function(lr){0>lr||125<lr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):St=0<lr?Math.floor(1e3/lr):5},e.unstable_getCurrentPriorityLevel=function(){return $e},e.unstable_next=function(lr){switch($e){case 1:case 2:case 3:var cr=3;break;default:cr=$e}var rr=$e;$e=cr;try{return lr()}finally{$e=rr}},e.unstable_requestPaint=function(){We=!0},e.unstable_runWithPriority=function(lr,cr){switch(lr){case 1:case 2:case 3:case 4:case 5:break;default:lr=3}var rr=$e;$e=lr;try{return cr()}finally{$e=rr}},e.unstable_scheduleCallback=function(lr,cr,rr){var pr=e.unstable_now();switch(typeof rr=="object"&&rr!==null?(rr=rr.delay,rr=typeof rr=="number"&&0<rr?pr+rr:pr):rr=pr,lr){case 1:var mr=-1;break;case 2:mr=250;break;case 5:mr=1073741823;break;case 4:mr=1e4;break;default:mr=5e3}return mr=rr+mr,lr={id:Be++,callback:cr,priorityLevel:lr,startTime:rr,expirationTime:mr,sortIndex:-1},rr>pr?(lr.sortIndex=rr,t(Oe,lr),n(De)===null&&lr===n(Oe)&&(Ve?(Ge(er),er=-1):Ve=!0,br(Xe,rr-pr))):(lr.sortIndex=mr,t(De,lr),Ue||He||(Ue=!0,Ze||(Ze=!0,dr()))),lr},e.unstable_shouldYield=hr,e.unstable_wrapCallback=function(lr){var cr=$e;return function(){var rr=$e;$e=cr;try{return lr.apply(this,arguments)}finally{$e=rr}}}})(scheduler_production);scheduler.exports=scheduler_production;var schedulerExports=scheduler.exports,reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$3=reactExports;function formatProdErrorMessage$1(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function noop$4(){}var Internals={d:{f:noop$4,r:function(){throw Error(formatProdErrorMessage$1(522))},D:noop$4,C:noop$4,L:noop$4,m:noop$4,X:noop$4,S:noop$4,M:noop$4},p:0,findDOMNode:null},REACT_PORTAL_TYPE$1=Symbol.for("react.portal");function createPortal$1(e,t,n){var Ee=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:REACT_PORTAL_TYPE$1,key:Ee==null?null:""+Ee,children:e,containerInfo:t,implementation:n}}var ReactSharedInternals$1=React$3.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function getCrossOriginStringAs(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Internals;reactDom_production.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(formatProdErrorMessage$1(299));return createPortal$1(e,t,null,n)};reactDom_production.flushSync=function(e){var t=ReactSharedInternals$1.T,n=Internals.p;try{if(ReactSharedInternals$1.T=null,Internals.p=2,e)return e()}finally{ReactSharedInternals$1.T=t,Internals.p=n,Internals.d.f()}};reactDom_production.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Internals.d.C(e,t))};reactDom_production.prefetchDNS=function(e){typeof e=="string"&&Internals.d.D(e)};reactDom_production.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,Ee=getCrossOriginStringAs(n,t.crossOrigin),Re=typeof t.integrity=="string"?t.integrity:void 0,Ce=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Internals.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:Ee,integrity:Re,fetchPriority:Ce}):n==="script"&&Internals.d.X(e,{crossOrigin:Ee,integrity:Re,fetchPriority:Ce,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};reactDom_production.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=getCrossOriginStringAs(t.as,t.crossOrigin);Internals.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Internals.d.M(e)};reactDom_production.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,Ee=getCrossOriginStringAs(n,t.crossOrigin);Internals.d.L(e,n,{crossOrigin:Ee,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};reactDom_production.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=getCrossOriginStringAs(t.as,t.crossOrigin);Internals.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Internals.d.m(e)};reactDom_production.requestFormReset=function(e){Internals.d.r(e)};reactDom_production.unstable_batchedUpdates=function(e,t){return e(t)};reactDom_production.useFormState=function(e,t,n){return ReactSharedInternals$1.H.useFormState(e,t,n)};reactDom_production.useFormStatus=function(){return ReactSharedInternals$1.H.useHostTransitionStatus()};reactDom_production.version="19.2.0";function checkDCE$1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE$1)}catch(e){console.error(e)}}checkDCE$1(),reactDom.exports=reactDom_production;var reactDomExports=reactDom.exports;const ReactDOM$1=getDefaultExportFromCjs(reactDomExports),ReactDOM$2=_mergeNamespaces({__proto__:null,default:ReactDOM$1},[reactDomExports]);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Scheduler=schedulerExports,React$2=reactExports,ReactDOM=reactDomExports;function formatProdErrorMessage(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function isValidContainer(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function getNearestMountedFiber(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function getSuspenseInstanceFromFiber(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function getActivityInstanceFromFiber(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function assertIsMounted(e){if(getNearestMountedFiber(e)!==e)throw Error(formatProdErrorMessage(188))}function findCurrentFiberUsingSlowPath(e){var t=e.alternate;if(!t){if(t=getNearestMountedFiber(e),t===null)throw Error(formatProdErrorMessage(188));return t!==e?null:e}for(var n=e,Ee=t;;){var Re=n.return;if(Re===null)break;var Ce=Re.alternate;if(Ce===null){if(Ee=Re.return,Ee!==null){n=Ee;continue}break}if(Re.child===Ce.child){for(Ce=Re.child;Ce;){if(Ce===n)return assertIsMounted(Re),e;if(Ce===Ee)return assertIsMounted(Re),t;Ce=Ce.sibling}throw Error(formatProdErrorMessage(188))}if(n.return!==Ee.return)n=Re,Ee=Ce;else{for(var Te=!1,Me=Re.child;Me;){if(Me===n){Te=!0,n=Re,Ee=Ce;break}if(Me===Ee){Te=!0,Ee=Re,n=Ce;break}Me=Me.sibling}if(!Te){for(Me=Ce.child;Me;){if(Me===n){Te=!0,n=Ce,Ee=Re;break}if(Me===Ee){Te=!0,Ee=Ce,n=Re;break}Me=Me.sibling}if(!Te)throw Error(formatProdErrorMessage(189))}}if(n.alternate!==Ee)throw Error(formatProdErrorMessage(190))}if(n.tag!==3)throw Error(formatProdErrorMessage(188));return n.stateNode.current===n?e:t}function findCurrentHostFiberImpl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=findCurrentHostFiberImpl(e),t!==null)return t;e=e.sibling}return null}var assign$3=Object.assign,REACT_LEGACY_ELEMENT_TYPE=Symbol.for("react.element"),REACT_ELEMENT_TYPE=Symbol.for("react.transitional.element"),REACT_PORTAL_TYPE=Symbol.for("react.portal"),REACT_FRAGMENT_TYPE=Symbol.for("react.fragment"),REACT_STRICT_MODE_TYPE=Symbol.for("react.strict_mode"),REACT_PROFILER_TYPE=Symbol.for("react.profiler"),REACT_CONSUMER_TYPE=Symbol.for("react.consumer"),REACT_CONTEXT_TYPE=Symbol.for("react.context"),REACT_FORWARD_REF_TYPE=Symbol.for("react.forward_ref"),REACT_SUSPENSE_TYPE=Symbol.for("react.suspense"),REACT_SUSPENSE_LIST_TYPE=Symbol.for("react.suspense_list"),REACT_MEMO_TYPE=Symbol.for("react.memo"),REACT_LAZY_TYPE=Symbol.for("react.lazy"),REACT_ACTIVITY_TYPE=Symbol.for("react.activity"),REACT_MEMO_CACHE_SENTINEL=Symbol.for("react.memo_cache_sentinel"),MAYBE_ITERATOR_SYMBOL=Symbol.iterator;function getIteratorFn(e){return e===null||typeof e!="object"?null:(e=MAYBE_ITERATOR_SYMBOL&&e[MAYBE_ITERATOR_SYMBOL]||e["@@iterator"],typeof e=="function"?e:null)}var REACT_CLIENT_REFERENCE=Symbol.for("react.client.reference");function getComponentNameFromType(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===REACT_CLIENT_REFERENCE?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case REACT_FRAGMENT_TYPE:return"Fragment";case REACT_PROFILER_TYPE:return"Profiler";case REACT_STRICT_MODE_TYPE:return"StrictMode";case REACT_SUSPENSE_TYPE:return"Suspense";case REACT_SUSPENSE_LIST_TYPE:return"SuspenseList";case REACT_ACTIVITY_TYPE:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case REACT_PORTAL_TYPE:return"Portal";case REACT_CONTEXT_TYPE:return e.displayName||"Context";case REACT_CONSUMER_TYPE:return(e._context.displayName||"Context")+".Consumer";case REACT_FORWARD_REF_TYPE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case REACT_MEMO_TYPE:return t=e.displayName||null,t!==null?t:getComponentNameFromType(e.type)||"Memo";case REACT_LAZY_TYPE:t=e._payload,e=e._init;try{return getComponentNameFromType(e(t))}catch{}}return null}var isArrayImpl=Array.isArray,ReactSharedInternals=React$2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ReactDOMSharedInternals=ReactDOM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,sharedNotPendingObject={pending:!1,data:null,method:null,action:null},valueStack=[],index$2=-1;function createCursor(e){return{current:e}}function pop(e){0>index$2||(e.current=valueStack[index$2],valueStack[index$2]=null,index$2--)}function push(e,t){index$2++,valueStack[index$2]=e.current,e.current=t}var contextStackCursor=createCursor(null),contextFiberStackCursor=createCursor(null),rootInstanceStackCursor=createCursor(null),hostTransitionProviderCursor=createCursor(null);function pushHostContainer(e,t){switch(push(rootInstanceStackCursor,t),push(contextFiberStackCursor,e),push(contextStackCursor,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?getOwnHostContext(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=getOwnHostContext(t),e=getChildHostContextProd(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}pop(contextStackCursor),push(contextStackCursor,e)}function popHostContainer(){pop(contextStackCursor),pop(contextFiberStackCursor),pop(rootInstanceStackCursor)}function pushHostContext(e){e.memoizedState!==null&&push(hostTransitionProviderCursor,e);var t=contextStackCursor.current,n=getChildHostContextProd(t,e.type);t!==n&&(push(contextFiberStackCursor,e),push(contextStackCursor,n))}function popHostContext(e){contextFiberStackCursor.current===e&&(pop(contextStackCursor),pop(contextFiberStackCursor)),hostTransitionProviderCursor.current===e&&(pop(hostTransitionProviderCursor),HostTransitionContext._currentValue=sharedNotPendingObject)}var prefix,suffix;function describeBuiltInComponentFrame(e){if(prefix===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);prefix=t&&t[1]||"",suffix=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+prefix+e+suffix}var reentry=!1;function describeNativeComponentFrame(e,t){if(!e||reentry)return"";reentry=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Ee={DetermineComponentFrameRoot:function(){try{if(t){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(He){var $e=He}Reflect.construct(e,[],ze)}else{try{ze.call()}catch(He){$e=He}e.call(ze.prototype)}}else{try{throw Error()}catch(He){$e=He}(ze=e())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(He){if(He&&$e&&typeof He.stack=="string")return[He.stack,$e.stack]}return[null,null]}};Ee.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Re=Object.getOwnPropertyDescriptor(Ee.DetermineComponentFrameRoot,"name");Re&&Re.configurable&&Object.defineProperty(Ee.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Ce=Ee.DetermineComponentFrameRoot(),Te=Ce[0],Me=Ce[1];if(Te&&Me){var De=Te.split(`
`),Oe=Me.split(`
`);for(Re=Ee=0;Ee<De.length&&!De[Ee].includes("DetermineComponentFrameRoot");)Ee++;for(;Re<Oe.length&&!Oe[Re].includes("DetermineComponentFrameRoot");)Re++;if(Ee===De.length||Re===Oe.length)for(Ee=De.length-1,Re=Oe.length-1;1<=Ee&&0<=Re&&De[Ee]!==Oe[Re];)Re--;for(;1<=Ee&&0<=Re;Ee--,Re--)if(De[Ee]!==Oe[Re]){if(Ee!==1||Re!==1)do if(Ee--,Re--,0>Re||De[Ee]!==Oe[Re]){var Be=`
`+De[Ee].replace(" at new "," at ");return e.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",e.displayName)),Be}while(1<=Ee&&0<=Re);break}}}finally{reentry=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?describeBuiltInComponentFrame(n):""}function describeFiber(e,t){switch(e.tag){case 26:case 27:case 5:return describeBuiltInComponentFrame(e.type);case 16:return describeBuiltInComponentFrame("Lazy");case 13:return e.child!==t&&t!==null?describeBuiltInComponentFrame("Suspense Fallback"):describeBuiltInComponentFrame("Suspense");case 19:return describeBuiltInComponentFrame("SuspenseList");case 0:case 15:return describeNativeComponentFrame(e.type,!1);case 11:return describeNativeComponentFrame(e.type.render,!1);case 1:return describeNativeComponentFrame(e.type,!0);case 31:return describeBuiltInComponentFrame("Activity");default:return""}}function getStackByFiberInDevAndProd(e){try{var t="",n=null;do t+=describeFiber(e,n),n=e,e=e.return;while(e);return t}catch(Ee){return`
Error generating stack: `+Ee.message+`
`+Ee.stack}}var hasOwnProperty$1=Object.prototype.hasOwnProperty,scheduleCallback$3=Scheduler.unstable_scheduleCallback,cancelCallback$1=Scheduler.unstable_cancelCallback,shouldYield=Scheduler.unstable_shouldYield,requestPaint=Scheduler.unstable_requestPaint,now=Scheduler.unstable_now,getCurrentPriorityLevel=Scheduler.unstable_getCurrentPriorityLevel,ImmediatePriority=Scheduler.unstable_ImmediatePriority,UserBlockingPriority=Scheduler.unstable_UserBlockingPriority,NormalPriority$1=Scheduler.unstable_NormalPriority,LowPriority=Scheduler.unstable_LowPriority,IdlePriority=Scheduler.unstable_IdlePriority,log$1=Scheduler.log,unstable_setDisableYieldValue=Scheduler.unstable_setDisableYieldValue,rendererID=null,injectedHook=null;function setIsStrictModeForDevtools(e){if(typeof log$1=="function"&&unstable_setDisableYieldValue(e),injectedHook&&typeof injectedHook.setStrictMode=="function")try{injectedHook.setStrictMode(rendererID,e)}catch{}}var clz32=Math.clz32?Math.clz32:clz32Fallback,log=Math.log,LN2=Math.LN2;function clz32Fallback(e){return e>>>=0,e===0?32:31-(log(e)/LN2|0)|0}var nextTransitionUpdateLane=256,nextTransitionDeferredLane=262144,nextRetryLane=4194304;function getHighestPriorityLanes(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function getNextLanes(e,t,n){var Ee=e.pendingLanes;if(Ee===0)return 0;var Re=0,Ce=e.suspendedLanes,Te=e.pingedLanes;e=e.warmLanes;var Me=Ee&134217727;return Me!==0?(Ee=Me&~Ce,Ee!==0?Re=getHighestPriorityLanes(Ee):(Te&=Me,Te!==0?Re=getHighestPriorityLanes(Te):n||(n=Me&~e,n!==0&&(Re=getHighestPriorityLanes(n))))):(Me=Ee&~Ce,Me!==0?Re=getHighestPriorityLanes(Me):Te!==0?Re=getHighestPriorityLanes(Te):n||(n=Ee&~e,n!==0&&(Re=getHighestPriorityLanes(n)))),Re===0?0:t!==0&&t!==Re&&!(t&Ce)&&(Ce=Re&-Re,n=t&-t,Ce>=n||Ce===32&&(n&4194048)!==0)?t:Re}function checkIfRootIsPrerendering(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function computeExpirationTime(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function claimNextRetryLane(){var e=nextRetryLane;return nextRetryLane<<=1,!(nextRetryLane&62914560)&&(nextRetryLane=4194304),e}function createLaneMap(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function markRootUpdated$1(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function markRootFinished(e,t,n,Ee,Re,Ce){var Te=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var Me=e.entanglements,De=e.expirationTimes,Oe=e.hiddenUpdates;for(n=Te&~n;0<n;){var Be=31-clz32(n),ze=1<<Be;Me[Be]=0,De[Be]=-1;var $e=Oe[Be];if($e!==null)for(Oe[Be]=null,Be=0;Be<$e.length;Be++){var He=$e[Be];He!==null&&(He.lane&=-536870913)}n&=~ze}Ee!==0&&markSpawnedDeferredLane(e,Ee,0),Ce!==0&&Re===0&&e.tag!==0&&(e.suspendedLanes|=Ce&~(Te&~t))}function markSpawnedDeferredLane(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var Ee=31-clz32(t);e.entangledLanes|=t,e.entanglements[Ee]=e.entanglements[Ee]|1073741824|n&261930}function markRootEntangled(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var Ee=31-clz32(n),Re=1<<Ee;Re&t|e[Ee]&t&&(e[Ee]|=t),n&=~Re}}function getBumpedLaneForHydration(e,t){var n=t&-t;return n=n&42?1:getBumpedLaneForHydrationByLane(n),n&(e.suspendedLanes|t)?0:n}function getBumpedLaneForHydrationByLane(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function lanesToEventPriority(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function resolveUpdatePriority(){var e=ReactDOMSharedInternals.p;return e!==0?e:(e=window.event,e===void 0?32:getEventPriority(e.type))}function runWithPriority(e,t){var n=ReactDOMSharedInternals.p;try{return ReactDOMSharedInternals.p=e,t()}finally{ReactDOMSharedInternals.p=n}}var randomKey=Math.random().toString(36).slice(2),internalInstanceKey="__reactFiber$"+randomKey,internalPropsKey="__reactProps$"+randomKey,internalContainerInstanceKey="__reactContainer$"+randomKey,internalEventHandlersKey="__reactEvents$"+randomKey,internalEventHandlerListenersKey="__reactListeners$"+randomKey,internalEventHandlesSetKey="__reactHandles$"+randomKey,internalRootNodeResourcesKey="__reactResources$"+randomKey,internalHoistableMarker="__reactMarker$"+randomKey;function detachDeletedInstance(e){delete e[internalInstanceKey],delete e[internalPropsKey],delete e[internalEventHandlersKey],delete e[internalEventHandlerListenersKey],delete e[internalEventHandlesSetKey]}function getClosestInstanceFromNode(e){var t=e[internalInstanceKey];if(t)return t;for(var n=e.parentNode;n;){if(t=n[internalContainerInstanceKey]||n[internalInstanceKey]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=getParentHydrationBoundary(e);e!==null;){if(n=e[internalInstanceKey])return n;e=getParentHydrationBoundary(e)}return t}e=n,n=e.parentNode}return null}function getInstanceFromNode(e){if(e=e[internalInstanceKey]||e[internalContainerInstanceKey]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function getNodeFromInstance(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(formatProdErrorMessage(33))}function getResourcesFromRoot(e){var t=e[internalRootNodeResourcesKey];return t||(t=e[internalRootNodeResourcesKey]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function markNodeAsHoistable(e){e[internalHoistableMarker]=!0}var allNativeEvents=new Set,registrationNameDependencies={};function registerTwoPhaseEvent(e,t){registerDirectEvent(e,t),registerDirectEvent(e+"Capture",t)}function registerDirectEvent(e,t){for(registrationNameDependencies[e]=t,e=0;e<t.length;e++)allNativeEvents.add(t[e])}var VALID_ATTRIBUTE_NAME_REGEX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),illegalAttributeNameCache={},validatedAttributeNameCache={};function isAttributeNameSafe(e){return hasOwnProperty$1.call(validatedAttributeNameCache,e)?!0:hasOwnProperty$1.call(illegalAttributeNameCache,e)?!1:VALID_ATTRIBUTE_NAME_REGEX.test(e)?validatedAttributeNameCache[e]=!0:(illegalAttributeNameCache[e]=!0,!1)}function setValueForAttribute(e,t,n){if(isAttributeNameSafe(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var Ee=t.toLowerCase().slice(0,5);if(Ee!=="data-"&&Ee!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function setValueForKnownAttribute(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function setValueForNamespacedAttribute(e,t,n,Ee){if(Ee===null)e.removeAttribute(n);else{switch(typeof Ee){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+Ee)}}function getToStringValue(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function isCheckable(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function trackValueOnNode(e,t,n){var Ee=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof Ee<"u"&&typeof Ee.get=="function"&&typeof Ee.set=="function"){var Re=Ee.get,Ce=Ee.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return Re.call(this)},set:function(Te){n=""+Te,Ce.call(this,Te)}}),Object.defineProperty(e,t,{enumerable:Ee.enumerable}),{getValue:function(){return n},setValue:function(Te){n=""+Te},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function track(e){if(!e._valueTracker){var t=isCheckable(e)?"checked":"value";e._valueTracker=trackValueOnNode(e,t,""+e[t])}}function updateValueIfChanged(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),Ee="";return e&&(Ee=isCheckable(e)?e.checked?"true":"false":e.value),e=Ee,e!==n?(t.setValue(e),!0):!1}function getActiveElement(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var escapeSelectorAttributeValueInsideDoubleQuotesRegex=/[\n"\\]/g;function escapeSelectorAttributeValueInsideDoubleQuotes(e){return e.replace(escapeSelectorAttributeValueInsideDoubleQuotesRegex,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function updateInput(e,t,n,Ee,Re,Ce,Te,Me){e.name="",Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"?e.type=Te:e.removeAttribute("type"),t!=null?Te==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+getToStringValue(t)):e.value!==""+getToStringValue(t)&&(e.value=""+getToStringValue(t)):Te!=="submit"&&Te!=="reset"||e.removeAttribute("value"),t!=null?setDefaultValue(e,Te,getToStringValue(t)):n!=null?setDefaultValue(e,Te,getToStringValue(n)):Ee!=null&&e.removeAttribute("value"),Re==null&&Ce!=null&&(e.defaultChecked=!!Ce),Re!=null&&(e.checked=Re&&typeof Re!="function"&&typeof Re!="symbol"),Me!=null&&typeof Me!="function"&&typeof Me!="symbol"&&typeof Me!="boolean"?e.name=""+getToStringValue(Me):e.removeAttribute("name")}function initInput$1(e,t,n,Ee,Re,Ce,Te,Me){if(Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"&&(e.type=Ce),t!=null||n!=null){if(!(Ce!=="submit"&&Ce!=="reset"||t!=null)){track(e);return}n=n!=null?""+getToStringValue(n):"",t=t!=null?""+getToStringValue(t):n,Me||t===e.value||(e.value=t),e.defaultValue=t}Ee=Ee??Re,Ee=typeof Ee!="function"&&typeof Ee!="symbol"&&!!Ee,e.checked=Me?e.checked:!!Ee,e.defaultChecked=!!Ee,Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"&&(e.name=Te),track(e)}function setDefaultValue(e,t,n){t==="number"&&getActiveElement(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function updateOptions(e,t,n,Ee){if(e=e.options,t){t={};for(var Re=0;Re<n.length;Re++)t["$"+n[Re]]=!0;for(n=0;n<e.length;n++)Re=t.hasOwnProperty("$"+e[n].value),e[n].selected!==Re&&(e[n].selected=Re),Re&&Ee&&(e[n].defaultSelected=!0)}else{for(n=""+getToStringValue(n),t=null,Re=0;Re<e.length;Re++){if(e[Re].value===n){e[Re].selected=!0,Ee&&(e[Re].defaultSelected=!0);return}t!==null||e[Re].disabled||(t=e[Re])}t!==null&&(t.selected=!0)}}function updateTextarea(e,t,n){if(t!=null&&(t=""+getToStringValue(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+getToStringValue(n):""}function initTextarea(e,t,n,Ee){if(t==null){if(Ee!=null){if(n!=null)throw Error(formatProdErrorMessage(92));if(isArrayImpl(Ee)){if(1<Ee.length)throw Error(formatProdErrorMessage(93));Ee=Ee[0]}n=Ee}n==null&&(n=""),t=n}n=getToStringValue(t),e.defaultValue=n,Ee=e.textContent,Ee===n&&Ee!==""&&Ee!==null&&(e.value=Ee),track(e)}function setTextContent(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var unitlessNumbers=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function setValueForStyle(e,t,n){var Ee=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?Ee?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":Ee?e.setProperty(t,n):typeof n!="number"||n===0||unitlessNumbers.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function setValueForStyles(e,t,n){if(t!=null&&typeof t!="object")throw Error(formatProdErrorMessage(62));if(e=e.style,n!=null){for(var Ee in n)!n.hasOwnProperty(Ee)||t!=null&&t.hasOwnProperty(Ee)||(Ee.indexOf("--")===0?e.setProperty(Ee,""):Ee==="float"?e.cssFloat="":e[Ee]="");for(var Re in t)Ee=t[Re],t.hasOwnProperty(Re)&&n[Re]!==Ee&&setValueForStyle(e,Re,Ee)}else for(var Ce in t)t.hasOwnProperty(Ce)&&setValueForStyle(e,Ce,t[Ce])}function isCustomElement(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aliases=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),isJavaScriptProtocol=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sanitizeURL(e){return isJavaScriptProtocol.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function noop$1$1(){}var currentReplayingEvent=null;function getEventTarget(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var restoreTarget=null,restoreQueue=null;function restoreStateOfTarget(e){var t=getInstanceFromNode(e);if(t&&(e=t.stateNode)){var n=e[internalPropsKey]||null;e:switch(e=t.stateNode,t.type){case"input":if(updateInput(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+escapeSelectorAttributeValueInsideDoubleQuotes(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var Ee=n[t];if(Ee!==e&&Ee.form===e.form){var Re=Ee[internalPropsKey]||null;if(!Re)throw Error(formatProdErrorMessage(90));updateInput(Ee,Re.value,Re.defaultValue,Re.defaultValue,Re.checked,Re.defaultChecked,Re.type,Re.name)}}for(t=0;t<n.length;t++)Ee=n[t],Ee.form===e.form&&updateValueIfChanged(Ee)}break e;case"textarea":updateTextarea(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&updateOptions(e,!!n.multiple,t,!1)}}}var isInsideEventHandler=!1;function batchedUpdates$1(e,t,n){if(isInsideEventHandler)return e(t,n);isInsideEventHandler=!0;try{var Ee=e(t);return Ee}finally{if(isInsideEventHandler=!1,(restoreTarget!==null||restoreQueue!==null)&&(flushSyncWork$1(),restoreTarget&&(t=restoreTarget,e=restoreQueue,restoreQueue=restoreTarget=null,restoreStateOfTarget(t),e)))for(t=0;t<e.length;t++)restoreStateOfTarget(e[t])}}function getListener(e,t){var n=e.stateNode;if(n===null)return null;var Ee=n[internalPropsKey]||null;if(Ee===null)return null;n=Ee[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ee=!Ee.disabled)||(e=e.type,Ee=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!Ee;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(formatProdErrorMessage(231,t,typeof n));return n}var canUseDOM=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),passiveBrowserEventsSupported=!1;if(canUseDOM)try{var options={};Object.defineProperty(options,"passive",{get:function(){passiveBrowserEventsSupported=!0}}),window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveBrowserEventsSupported=!1}var root=null,startText=null,fallbackText=null;function getData(){if(fallbackText)return fallbackText;var e,t=startText,n=t.length,Ee,Re="value"in root?root.value:root.textContent,Ce=Re.length;for(e=0;e<n&&t[e]===Re[e];e++);var Te=n-e;for(Ee=1;Ee<=Te&&t[n-Ee]===Re[Ce-Ee];Ee++);return fallbackText=Re.slice(e,1<Ee?1-Ee:void 0)}function getEventCharCode(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function functionThatReturnsTrue(){return!0}function functionThatReturnsFalse(){return!1}function createSyntheticEvent(e){function t(n,Ee,Re,Ce,Te){this._reactName=n,this._targetInst=Re,this.type=Ee,this.nativeEvent=Ce,this.target=Te,this.currentTarget=null;for(var Me in e)e.hasOwnProperty(Me)&&(n=e[Me],this[Me]=n?n(Ce):Ce[Me]);return this.isDefaultPrevented=(Ce.defaultPrevented!=null?Ce.defaultPrevented:Ce.returnValue===!1)?functionThatReturnsTrue:functionThatReturnsFalse,this.isPropagationStopped=functionThatReturnsFalse,this}return assign$3(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=functionThatReturnsTrue)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=functionThatReturnsTrue)},persist:function(){},isPersistent:functionThatReturnsTrue}),t}var EventInterface={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SyntheticEvent=createSyntheticEvent(EventInterface),UIEventInterface=assign$3({},EventInterface,{view:0,detail:0}),SyntheticUIEvent=createSyntheticEvent(UIEventInterface),lastMovementX,lastMovementY,lastMouseEvent,MouseEventInterface=assign$3({},UIEventInterface,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:getEventModifierState,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lastMouseEvent&&(lastMouseEvent&&e.type==="mousemove"?(lastMovementX=e.screenX-lastMouseEvent.screenX,lastMovementY=e.screenY-lastMouseEvent.screenY):lastMovementY=lastMovementX=0,lastMouseEvent=e),lastMovementX)},movementY:function(e){return"movementY"in e?e.movementY:lastMovementY}}),SyntheticMouseEvent=createSyntheticEvent(MouseEventInterface),DragEventInterface=assign$3({},MouseEventInterface,{dataTransfer:0}),SyntheticDragEvent=createSyntheticEvent(DragEventInterface),FocusEventInterface=assign$3({},UIEventInterface,{relatedTarget:0}),SyntheticFocusEvent=createSyntheticEvent(FocusEventInterface),AnimationEventInterface=assign$3({},EventInterface,{animationName:0,elapsedTime:0,pseudoElement:0}),SyntheticAnimationEvent=createSyntheticEvent(AnimationEventInterface),ClipboardEventInterface=assign$3({},EventInterface,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),SyntheticClipboardEvent=createSyntheticEvent(ClipboardEventInterface),CompositionEventInterface=assign$3({},EventInterface,{data:0}),SyntheticCompositionEvent=createSyntheticEvent(CompositionEventInterface),normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function modifierStateGetter(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=modifierKeyToProp[e])?!!t[e]:!1}function getEventModifierState(){return modifierStateGetter}var KeyboardEventInterface=assign$3({},UIEventInterface,{key:function(e){if(e.key){var t=normalizeKey[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=getEventCharCode(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?translateToKey[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:getEventModifierState,charCode:function(e){return e.type==="keypress"?getEventCharCode(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?getEventCharCode(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),SyntheticKeyboardEvent=createSyntheticEvent(KeyboardEventInterface),PointerEventInterface=assign$3({},MouseEventInterface,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SyntheticPointerEvent=createSyntheticEvent(PointerEventInterface),TouchEventInterface=assign$3({},UIEventInterface,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:getEventModifierState}),SyntheticTouchEvent=createSyntheticEvent(TouchEventInterface),TransitionEventInterface=assign$3({},EventInterface,{propertyName:0,elapsedTime:0,pseudoElement:0}),SyntheticTransitionEvent=createSyntheticEvent(TransitionEventInterface),WheelEventInterface=assign$3({},MouseEventInterface,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),SyntheticWheelEvent=createSyntheticEvent(WheelEventInterface),ToggleEventInterface=assign$3({},EventInterface,{newState:0,oldState:0}),SyntheticToggleEvent=createSyntheticEvent(ToggleEventInterface),END_KEYCODES=[9,13,27,32],canUseCompositionEvent=canUseDOM&&"CompositionEvent"in window,documentMode=null;canUseDOM&&"documentMode"in document&&(documentMode=document.documentMode);var canUseTextInputEvent=canUseDOM&&"TextEvent"in window&&!documentMode,useFallbackCompositionData=canUseDOM&&(!canUseCompositionEvent||documentMode&&8<documentMode&&11>=documentMode),SPACEBAR_CHAR=" ",hasSpaceKeypress=!1;function isFallbackCompositionEnd(e,t){switch(e){case"keyup":return END_KEYCODES.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function getDataFromCustomEvent(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var isComposing=!1;function getNativeBeforeInputChars(e,t){switch(e){case"compositionend":return getDataFromCustomEvent(t);case"keypress":return t.which!==32?null:(hasSpaceKeypress=!0,SPACEBAR_CHAR);case"textInput":return e=t.data,e===SPACEBAR_CHAR&&hasSpaceKeypress?null:e;default:return null}}function getFallbackBeforeInputChars(e,t){if(isComposing)return e==="compositionend"||!canUseCompositionEvent&&isFallbackCompositionEnd(e,t)?(e=getData(),fallbackText=startText=root=null,isComposing=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return useFallbackCompositionData&&t.locale!=="ko"?null:t.data;default:return null}}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function isTextInputElement(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!supportedInputTypes[e.type]:t==="textarea"}function createAndAccumulateChangeEvent(e,t,n,Ee){restoreTarget?restoreQueue?restoreQueue.push(Ee):restoreQueue=[Ee]:restoreTarget=Ee,t=accumulateTwoPhaseListeners(t,"onChange"),0<t.length&&(n=new SyntheticEvent("onChange","change",null,n,Ee),e.push({event:n,listeners:t}))}var activeElement$1=null,activeElementInst$1=null;function runEventInBatch(e){processDispatchQueue(e,0)}function getInstIfValueChanged(e){var t=getNodeFromInstance(e);if(updateValueIfChanged(t))return e}function getTargetInstForChangeEvent(e,t){if(e==="change")return t}var isInputEventSupported=!1;if(canUseDOM){var JSCompiler_inline_result$jscomp$286;if(canUseDOM){var isSupported$jscomp$inline_427="oninput"in document;if(!isSupported$jscomp$inline_427){var element$jscomp$inline_428=document.createElement("div");element$jscomp$inline_428.setAttribute("oninput","return;"),isSupported$jscomp$inline_427=typeof element$jscomp$inline_428.oninput=="function"}JSCompiler_inline_result$jscomp$286=isSupported$jscomp$inline_427}else JSCompiler_inline_result$jscomp$286=!1;isInputEventSupported=JSCompiler_inline_result$jscomp$286&&(!document.documentMode||9<document.documentMode)}function stopWatchingForValueChange(){activeElement$1&&(activeElement$1.detachEvent("onpropertychange",handlePropertyChange),activeElementInst$1=activeElement$1=null)}function handlePropertyChange(e){if(e.propertyName==="value"&&getInstIfValueChanged(activeElementInst$1)){var t=[];createAndAccumulateChangeEvent(t,activeElementInst$1,e,getEventTarget(e)),batchedUpdates$1(runEventInBatch,t)}}function handleEventsForInputEventPolyfill(e,t,n){e==="focusin"?(stopWatchingForValueChange(),activeElement$1=t,activeElementInst$1=n,activeElement$1.attachEvent("onpropertychange",handlePropertyChange)):e==="focusout"&&stopWatchingForValueChange()}function getTargetInstForInputEventPolyfill(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return getInstIfValueChanged(activeElementInst$1)}function getTargetInstForClickEvent(e,t){if(e==="click")return getInstIfValueChanged(t)}function getTargetInstForInputOrChangeEvent(e,t){if(e==="input"||e==="change")return getInstIfValueChanged(t)}function is$2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var objectIs$2=typeof Object.is=="function"?Object.is:is$2;function shallowEqual(e,t){if(objectIs$2(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),Ee=Object.keys(t);if(n.length!==Ee.length)return!1;for(Ee=0;Ee<n.length;Ee++){var Re=n[Ee];if(!hasOwnProperty$1.call(t,Re)||!objectIs$2(e[Re],t[Re]))return!1}return!0}function getLeafNode(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function getNodeForCharacterOffset(e,t){var n=getLeafNode(e);e=0;for(var Ee;n;){if(n.nodeType===3){if(Ee=e+n.textContent.length,e<=t&&Ee>=t)return{node:n,offset:t-e};e=Ee}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=getLeafNode(n)}}function containsNode(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?containsNode(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function getActiveElementDeep(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=getActiveElement(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=getActiveElement(e.document)}return t}function hasSelectionCapabilities(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var skipSelectionChangeEvent=canUseDOM&&"documentMode"in document&&11>=document.documentMode,activeElement=null,activeElementInst=null,lastSelection=null,mouseDown=!1;function constructSelectEvent(e,t,n){var Ee=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mouseDown||activeElement==null||activeElement!==getActiveElement(Ee)||(Ee=activeElement,"selectionStart"in Ee&&hasSelectionCapabilities(Ee)?Ee={start:Ee.selectionStart,end:Ee.selectionEnd}:(Ee=(Ee.ownerDocument&&Ee.ownerDocument.defaultView||window).getSelection(),Ee={anchorNode:Ee.anchorNode,anchorOffset:Ee.anchorOffset,focusNode:Ee.focusNode,focusOffset:Ee.focusOffset}),lastSelection&&shallowEqual(lastSelection,Ee)||(lastSelection=Ee,Ee=accumulateTwoPhaseListeners(activeElementInst,"onSelect"),0<Ee.length&&(t=new SyntheticEvent("onSelect","select",null,t,n),e.push({event:t,listeners:Ee}),t.target=activeElement)))}function makePrefixMap(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vendorPrefixes={animationend:makePrefixMap("Animation","AnimationEnd"),animationiteration:makePrefixMap("Animation","AnimationIteration"),animationstart:makePrefixMap("Animation","AnimationStart"),transitionrun:makePrefixMap("Transition","TransitionRun"),transitionstart:makePrefixMap("Transition","TransitionStart"),transitioncancel:makePrefixMap("Transition","TransitionCancel"),transitionend:makePrefixMap("Transition","TransitionEnd")},prefixedEventNames={},style$1={};canUseDOM&&(style$1=document.createElement("div").style,"AnimationEvent"in window||(delete vendorPrefixes.animationend.animation,delete vendorPrefixes.animationiteration.animation,delete vendorPrefixes.animationstart.animation),"TransitionEvent"in window||delete vendorPrefixes.transitionend.transition);function getVendorPrefixedEventName(e){if(prefixedEventNames[e])return prefixedEventNames[e];if(!vendorPrefixes[e])return e;var t=vendorPrefixes[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in style$1)return prefixedEventNames[e]=t[n];return e}var ANIMATION_END=getVendorPrefixedEventName("animationend"),ANIMATION_ITERATION=getVendorPrefixedEventName("animationiteration"),ANIMATION_START=getVendorPrefixedEventName("animationstart"),TRANSITION_RUN=getVendorPrefixedEventName("transitionrun"),TRANSITION_START=getVendorPrefixedEventName("transitionstart"),TRANSITION_CANCEL=getVendorPrefixedEventName("transitioncancel"),TRANSITION_END=getVendorPrefixedEventName("transitionend"),topLevelEventsToReactNames=new Map,simpleEventPluginEvents="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");simpleEventPluginEvents.push("scrollEnd");function registerSimpleEvent(e,t){topLevelEventsToReactNames.set(e,t),registerTwoPhaseEvent(t,[e])}var reportGlobalError=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},concurrentQueues=[],concurrentQueuesIndex=0,concurrentlyUpdatedLanes=0;function finishQueueingConcurrentUpdates(){for(var e=concurrentQueuesIndex,t=concurrentlyUpdatedLanes=concurrentQueuesIndex=0;t<e;){var n=concurrentQueues[t];concurrentQueues[t++]=null;var Ee=concurrentQueues[t];concurrentQueues[t++]=null;var Re=concurrentQueues[t];concurrentQueues[t++]=null;var Ce=concurrentQueues[t];if(concurrentQueues[t++]=null,Ee!==null&&Re!==null){var Te=Ee.pending;Te===null?Re.next=Re:(Re.next=Te.next,Te.next=Re),Ee.pending=Re}Ce!==0&&markUpdateLaneFromFiberToRoot(n,Re,Ce)}}function enqueueUpdate$1(e,t,n,Ee){concurrentQueues[concurrentQueuesIndex++]=e,concurrentQueues[concurrentQueuesIndex++]=t,concurrentQueues[concurrentQueuesIndex++]=n,concurrentQueues[concurrentQueuesIndex++]=Ee,concurrentlyUpdatedLanes|=Ee,e.lanes|=Ee,e=e.alternate,e!==null&&(e.lanes|=Ee)}function enqueueConcurrentHookUpdate(e,t,n,Ee){return enqueueUpdate$1(e,t,n,Ee),getRootForUpdatedFiber(e)}function enqueueConcurrentRenderForLane(e,t){return enqueueUpdate$1(e,null,null,t),getRootForUpdatedFiber(e)}function markUpdateLaneFromFiberToRoot(e,t,n){e.lanes|=n;var Ee=e.alternate;Ee!==null&&(Ee.lanes|=n);for(var Re=!1,Ce=e.return;Ce!==null;)Ce.childLanes|=n,Ee=Ce.alternate,Ee!==null&&(Ee.childLanes|=n),Ce.tag===22&&(e=Ce.stateNode,e===null||e._visibility&1||(Re=!0)),e=Ce,Ce=Ce.return;return e.tag===3?(Ce=e.stateNode,Re&&t!==null&&(Re=31-clz32(n),e=Ce.hiddenUpdates,Ee=e[Re],Ee===null?e[Re]=[t]:Ee.push(t),t.lane=n|536870912),Ce):null}function getRootForUpdatedFiber(e){if(50<nestedUpdateCount)throw nestedUpdateCount=0,rootWithNestedUpdates=null,Error(formatProdErrorMessage(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var emptyContextObject={};function FiberNode(e,t,n,Ee){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ee,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function createFiberImplClass(e,t,n,Ee){return new FiberNode(e,t,n,Ee)}function shouldConstruct(e){return e=e.prototype,!(!e||!e.isReactComponent)}function createWorkInProgress(e,t){var n=e.alternate;return n===null?(n=createFiberImplClass(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function resetWorkInProgress(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function createFiberFromTypeAndProps(e,t,n,Ee,Re,Ce){var Te=0;if(Ee=e,typeof e=="function")shouldConstruct(e)&&(Te=1);else if(typeof e=="string")Te=isHostHoistableType(e,n,contextStackCursor.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case REACT_ACTIVITY_TYPE:return e=createFiberImplClass(31,n,t,Re),e.elementType=REACT_ACTIVITY_TYPE,e.lanes=Ce,e;case REACT_FRAGMENT_TYPE:return createFiberFromFragment(n.children,Re,Ce,t);case REACT_STRICT_MODE_TYPE:Te=8,Re|=24;break;case REACT_PROFILER_TYPE:return e=createFiberImplClass(12,n,t,Re|2),e.elementType=REACT_PROFILER_TYPE,e.lanes=Ce,e;case REACT_SUSPENSE_TYPE:return e=createFiberImplClass(13,n,t,Re),e.elementType=REACT_SUSPENSE_TYPE,e.lanes=Ce,e;case REACT_SUSPENSE_LIST_TYPE:return e=createFiberImplClass(19,n,t,Re),e.elementType=REACT_SUSPENSE_LIST_TYPE,e.lanes=Ce,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case REACT_CONTEXT_TYPE:Te=10;break e;case REACT_CONSUMER_TYPE:Te=9;break e;case REACT_FORWARD_REF_TYPE:Te=11;break e;case REACT_MEMO_TYPE:Te=14;break e;case REACT_LAZY_TYPE:Te=16,Ee=null;break e}Te=29,n=Error(formatProdErrorMessage(130,e===null?"null":typeof e,"")),Ee=null}return t=createFiberImplClass(Te,n,t,Re),t.elementType=e,t.type=Ee,t.lanes=Ce,t}function createFiberFromFragment(e,t,n,Ee){return e=createFiberImplClass(7,e,Ee,t),e.lanes=n,e}function createFiberFromText(e,t,n){return e=createFiberImplClass(6,e,null,t),e.lanes=n,e}function createFiberFromDehydratedFragment(e){var t=createFiberImplClass(18,null,null,0);return t.stateNode=e,t}function createFiberFromPortal(e,t,n){return t=createFiberImplClass(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var CapturedStacks=new WeakMap;function createCapturedValueAtFiber(e,t){if(typeof e=="object"&&e!==null){var n=CapturedStacks.get(e);return n!==void 0?n:(t={value:e,source:t,stack:getStackByFiberInDevAndProd(t)},CapturedStacks.set(e,t),t)}return{value:e,source:t,stack:getStackByFiberInDevAndProd(t)}}var forkStack=[],forkStackIndex=0,treeForkProvider=null,treeForkCount=0,idStack=[],idStackIndex=0,treeContextProvider=null,treeContextId=1,treeContextOverflow="";function pushTreeFork(e,t){forkStack[forkStackIndex++]=treeForkCount,forkStack[forkStackIndex++]=treeForkProvider,treeForkProvider=e,treeForkCount=t}function pushTreeId(e,t,n){idStack[idStackIndex++]=treeContextId,idStack[idStackIndex++]=treeContextOverflow,idStack[idStackIndex++]=treeContextProvider,treeContextProvider=e;var Ee=treeContextId;e=treeContextOverflow;var Re=32-clz32(Ee)-1;Ee&=~(1<<Re),n+=1;var Ce=32-clz32(t)+Re;if(30<Ce){var Te=Re-Re%5;Ce=(Ee&(1<<Te)-1).toString(32),Ee>>=Te,Re-=Te,treeContextId=1<<32-clz32(t)+Re|n<<Re|Ee,treeContextOverflow=Ce+e}else treeContextId=1<<Ce|n<<Re|Ee,treeContextOverflow=e}function pushMaterializedTreeId(e){e.return!==null&&(pushTreeFork(e,1),pushTreeId(e,1,0))}function popTreeContext(e){for(;e===treeForkProvider;)treeForkProvider=forkStack[--forkStackIndex],forkStack[forkStackIndex]=null,treeForkCount=forkStack[--forkStackIndex],forkStack[forkStackIndex]=null;for(;e===treeContextProvider;)treeContextProvider=idStack[--idStackIndex],idStack[idStackIndex]=null,treeContextOverflow=idStack[--idStackIndex],idStack[idStackIndex]=null,treeContextId=idStack[--idStackIndex],idStack[idStackIndex]=null}function restoreSuspendedTreeContext(e,t){idStack[idStackIndex++]=treeContextId,idStack[idStackIndex++]=treeContextOverflow,idStack[idStackIndex++]=treeContextProvider,treeContextId=t.id,treeContextOverflow=t.overflow,treeContextProvider=e}var hydrationParentFiber=null,nextHydratableInstance=null,isHydrating=!1,hydrationErrors=null,rootOrSingletonContext=!1,HydrationMismatchException=Error(formatProdErrorMessage(519));function throwOnHydrationMismatch(e){var t=Error(formatProdErrorMessage(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw queueHydrationError(createCapturedValueAtFiber(t,e)),HydrationMismatchException}function prepareToHydrateHostInstance(e){var t=e.stateNode,n=e.type,Ee=e.memoizedProps;switch(t[internalInstanceKey]=e,t[internalPropsKey]=Ee,n){case"dialog":listenToNonDelegatedEvent("cancel",t),listenToNonDelegatedEvent("close",t);break;case"iframe":case"object":case"embed":listenToNonDelegatedEvent("load",t);break;case"video":case"audio":for(n=0;n<mediaEventTypes.length;n++)listenToNonDelegatedEvent(mediaEventTypes[n],t);break;case"source":listenToNonDelegatedEvent("error",t);break;case"img":case"image":case"link":listenToNonDelegatedEvent("error",t),listenToNonDelegatedEvent("load",t);break;case"details":listenToNonDelegatedEvent("toggle",t);break;case"input":listenToNonDelegatedEvent("invalid",t),initInput$1(t,Ee.value,Ee.defaultValue,Ee.checked,Ee.defaultChecked,Ee.type,Ee.name,!0);break;case"select":listenToNonDelegatedEvent("invalid",t);break;case"textarea":listenToNonDelegatedEvent("invalid",t),initTextarea(t,Ee.value,Ee.defaultValue,Ee.children)}n=Ee.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||Ee.suppressHydrationWarning===!0||checkForUnmatchedText(t.textContent,n)?(Ee.popover!=null&&(listenToNonDelegatedEvent("beforetoggle",t),listenToNonDelegatedEvent("toggle",t)),Ee.onScroll!=null&&listenToNonDelegatedEvent("scroll",t),Ee.onScrollEnd!=null&&listenToNonDelegatedEvent("scrollend",t),Ee.onClick!=null&&(t.onclick=noop$1$1),t=!0):t=!1,t||throwOnHydrationMismatch(e,!0)}function popToNextHostParent(e){for(hydrationParentFiber=e.return;hydrationParentFiber;)switch(hydrationParentFiber.tag){case 5:case 31:case 13:rootOrSingletonContext=!1;return;case 27:case 3:rootOrSingletonContext=!0;return;default:hydrationParentFiber=hydrationParentFiber.return}}function popHydrationState(e){if(e!==hydrationParentFiber)return!1;if(!isHydrating)return popToNextHostParent(e),isHydrating=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||shouldSetTextContent(e.type,e.memoizedProps)),n=!n),n&&nextHydratableInstance&&throwOnHydrationMismatch(e),popToNextHostParent(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(formatProdErrorMessage(317));nextHydratableInstance=getNextHydratableInstanceAfterHydrationBoundary(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(formatProdErrorMessage(317));nextHydratableInstance=getNextHydratableInstanceAfterHydrationBoundary(e)}else t===27?(t=nextHydratableInstance,isSingletonScope(e.type)?(e=previousHydratableOnEnteringScopedSingleton,previousHydratableOnEnteringScopedSingleton=null,nextHydratableInstance=e):nextHydratableInstance=t):nextHydratableInstance=hydrationParentFiber?getNextHydratable(e.stateNode.nextSibling):null;return!0}function resetHydrationState(){nextHydratableInstance=hydrationParentFiber=null,isHydrating=!1}function upgradeHydrationErrorsToRecoverable(){var e=hydrationErrors;return e!==null&&(workInProgressRootRecoverableErrors===null?workInProgressRootRecoverableErrors=e:workInProgressRootRecoverableErrors.push.apply(workInProgressRootRecoverableErrors,e),hydrationErrors=null),e}function queueHydrationError(e){hydrationErrors===null?hydrationErrors=[e]:hydrationErrors.push(e)}var valueCursor=createCursor(null),currentlyRenderingFiber$1=null,lastContextDependency=null;function pushProvider(e,t,n){push(valueCursor,t._currentValue),t._currentValue=n}function popProvider(e){e._currentValue=valueCursor.current,pop(valueCursor)}function scheduleContextWorkOnParentPath(e,t,n){for(;e!==null;){var Ee=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,Ee!==null&&(Ee.childLanes|=t)):Ee!==null&&(Ee.childLanes&t)!==t&&(Ee.childLanes|=t),e===n)break;e=e.return}}function propagateContextChanges(e,t,n,Ee){var Re=e.child;for(Re!==null&&(Re.return=e);Re!==null;){var Ce=Re.dependencies;if(Ce!==null){var Te=Re.child;Ce=Ce.firstContext;e:for(;Ce!==null;){var Me=Ce;Ce=Re;for(var De=0;De<t.length;De++)if(Me.context===t[De]){Ce.lanes|=n,Me=Ce.alternate,Me!==null&&(Me.lanes|=n),scheduleContextWorkOnParentPath(Ce.return,n,e),Ee||(Te=null);break e}Ce=Me.next}}else if(Re.tag===18){if(Te=Re.return,Te===null)throw Error(formatProdErrorMessage(341));Te.lanes|=n,Ce=Te.alternate,Ce!==null&&(Ce.lanes|=n),scheduleContextWorkOnParentPath(Te,n,e),Te=null}else Te=Re.child;if(Te!==null)Te.return=Re;else for(Te=Re;Te!==null;){if(Te===e){Te=null;break}if(Re=Te.sibling,Re!==null){Re.return=Te.return,Te=Re;break}Te=Te.return}Re=Te}}function propagateParentContextChanges(e,t,n,Ee){e=null;for(var Re=t,Ce=!1;Re!==null;){if(!Ce){if(Re.flags&524288)Ce=!0;else if(Re.flags&262144)break}if(Re.tag===10){var Te=Re.alternate;if(Te===null)throw Error(formatProdErrorMessage(387));if(Te=Te.memoizedProps,Te!==null){var Me=Re.type;objectIs$2(Re.pendingProps.value,Te.value)||(e!==null?e.push(Me):e=[Me])}}else if(Re===hostTransitionProviderCursor.current){if(Te=Re.alternate,Te===null)throw Error(formatProdErrorMessage(387));Te.memoizedState.memoizedState!==Re.memoizedState.memoizedState&&(e!==null?e.push(HostTransitionContext):e=[HostTransitionContext])}Re=Re.return}e!==null&&propagateContextChanges(t,e,n,Ee),t.flags|=262144}function checkIfContextChanged(e){for(e=e.firstContext;e!==null;){if(!objectIs$2(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function prepareToReadContext(e){currentlyRenderingFiber$1=e,lastContextDependency=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function readContext(e){return readContextForConsumer(currentlyRenderingFiber$1,e)}function readContextDuringReconciliation(e,t){return currentlyRenderingFiber$1===null&&prepareToReadContext(e),readContextForConsumer(e,t)}function readContextForConsumer(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},lastContextDependency===null){if(e===null)throw Error(formatProdErrorMessage(308));lastContextDependency=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else lastContextDependency=lastContextDependency.next=t;return n}var AbortControllerLocal=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,Ee){e.push(Ee)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},scheduleCallback$2=Scheduler.unstable_scheduleCallback,NormalPriority=Scheduler.unstable_NormalPriority,CacheContext={$$typeof:REACT_CONTEXT_TYPE,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function createCache(){return{controller:new AbortControllerLocal,data:new Map,refCount:0}}function releaseCache(e){e.refCount--,e.refCount===0&&scheduleCallback$2(NormalPriority,function(){e.controller.abort()})}var currentEntangledListeners=null,currentEntangledPendingCount=0,currentEntangledLane=0,currentEntangledActionThenable=null;function entangleAsyncAction(e,t){if(currentEntangledListeners===null){var n=currentEntangledListeners=[];currentEntangledPendingCount=0,currentEntangledLane=requestTransitionLane(),currentEntangledActionThenable={status:"pending",value:void 0,then:function(Ee){n.push(Ee)}}}return currentEntangledPendingCount++,t.then(pingEngtangledActionScope,pingEngtangledActionScope),t}function pingEngtangledActionScope(){if(--currentEntangledPendingCount===0&&currentEntangledListeners!==null){currentEntangledActionThenable!==null&&(currentEntangledActionThenable.status="fulfilled");var e=currentEntangledListeners;currentEntangledListeners=null,currentEntangledLane=0,currentEntangledActionThenable=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function chainThenableValue(e,t){var n=[],Ee={status:"pending",value:null,reason:null,then:function(Re){n.push(Re)}};return e.then(function(){Ee.status="fulfilled",Ee.value=t;for(var Re=0;Re<n.length;Re++)(0,n[Re])(t)},function(Re){for(Ee.status="rejected",Ee.reason=Re,Re=0;Re<n.length;Re++)(0,n[Re])(void 0)}),Ee}var prevOnStartTransitionFinish=ReactSharedInternals.S;ReactSharedInternals.S=function(e,t){globalMostRecentTransitionTime=now(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&entangleAsyncAction(e,t),prevOnStartTransitionFinish!==null&&prevOnStartTransitionFinish(e,t)};var resumedCache=createCursor(null);function peekCacheFromPool(){var e=resumedCache.current;return e!==null?e:workInProgressRoot.pooledCache}function pushTransition(e,t){t===null?push(resumedCache,resumedCache.current):push(resumedCache,t.pool)}function getSuspendedCache(){var e=peekCacheFromPool();return e===null?null:{parent:CacheContext._currentValue,pool:e}}var SuspenseException=Error(formatProdErrorMessage(460)),SuspenseyCommitException=Error(formatProdErrorMessage(474)),SuspenseActionException=Error(formatProdErrorMessage(542)),noopSuspenseyCommitThenable={then:function(){}};function isThenableResolved(e){return e=e.status,e==="fulfilled"||e==="rejected"}function trackUsedThenable(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(noop$1$1,noop$1$1),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,checkIfUseWrappedInAsyncCatch(e),e;default:if(typeof t.status=="string")t.then(noop$1$1,noop$1$1);else{if(e=workInProgressRoot,e!==null&&100<e.shellSuspendCounter)throw Error(formatProdErrorMessage(482));e=t,e.status="pending",e.then(function(Ee){if(t.status==="pending"){var Re=t;Re.status="fulfilled",Re.value=Ee}},function(Ee){if(t.status==="pending"){var Re=t;Re.status="rejected",Re.reason=Ee}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,checkIfUseWrappedInAsyncCatch(e),e}throw suspendedThenable=t,SuspenseException}}function resolveLazy(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(suspendedThenable=n,SuspenseException):n}}var suspendedThenable=null;function getSuspendedThenable(){if(suspendedThenable===null)throw Error(formatProdErrorMessage(459));var e=suspendedThenable;return suspendedThenable=null,e}function checkIfUseWrappedInAsyncCatch(e){if(e===SuspenseException||e===SuspenseActionException)throw Error(formatProdErrorMessage(483))}var thenableState$1=null,thenableIndexCounter$1=0;function unwrapThenable(e){var t=thenableIndexCounter$1;return thenableIndexCounter$1+=1,thenableState$1===null&&(thenableState$1=[]),trackUsedThenable(thenableState$1,e,t)}function coerceRef(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function throwOnInvalidObjectTypeImpl(e,t){throw t.$$typeof===REACT_LEGACY_ELEMENT_TYPE?Error(formatProdErrorMessage(525)):(e=Object.prototype.toString.call(t),Error(formatProdErrorMessage(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function createChildReconciler(e){function t(qe,Ge){if(e){var Ye=qe.deletions;Ye===null?(qe.deletions=[Ge],qe.flags|=16):Ye.push(Ge)}}function n(qe,Ge){if(!e)return null;for(;Ge!==null;)t(qe,Ge),Ge=Ge.sibling;return null}function Ee(qe){for(var Ge=new Map;qe!==null;)qe.key!==null?Ge.set(qe.key,qe):Ge.set(qe.index,qe),qe=qe.sibling;return Ge}function Re(qe,Ge){return qe=createWorkInProgress(qe,Ge),qe.index=0,qe.sibling=null,qe}function Ce(qe,Ge,Ye){return qe.index=Ye,e?(Ye=qe.alternate,Ye!==null?(Ye=Ye.index,Ye<Ge?(qe.flags|=67108866,Ge):Ye):(qe.flags|=67108866,Ge)):(qe.flags|=1048576,Ge)}function Te(qe){return e&&qe.alternate===null&&(qe.flags|=67108866),qe}function Me(qe,Ge,Ye,Ke){return Ge===null||Ge.tag!==6?(Ge=createFiberFromText(Ye,qe.mode,Ke),Ge.return=qe,Ge):(Ge=Re(Ge,Ye),Ge.return=qe,Ge)}function De(qe,Ge,Ye,Ke){var Xe=Ye.type;return Xe===REACT_FRAGMENT_TYPE?Be(qe,Ge,Ye.props.children,Ke,Ye.key):Ge!==null&&(Ge.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===REACT_LAZY_TYPE&&resolveLazy(Xe)===Ge.type)?(Ge=Re(Ge,Ye.props),coerceRef(Ge,Ye),Ge.return=qe,Ge):(Ge=createFiberFromTypeAndProps(Ye.type,Ye.key,Ye.props,null,qe.mode,Ke),coerceRef(Ge,Ye),Ge.return=qe,Ge)}function Oe(qe,Ge,Ye,Ke){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==Ye.containerInfo||Ge.stateNode.implementation!==Ye.implementation?(Ge=createFiberFromPortal(Ye,qe.mode,Ke),Ge.return=qe,Ge):(Ge=Re(Ge,Ye.children||[]),Ge.return=qe,Ge)}function Be(qe,Ge,Ye,Ke,Xe){return Ge===null||Ge.tag!==7?(Ge=createFiberFromFragment(Ye,qe.mode,Ke,Xe),Ge.return=qe,Ge):(Ge=Re(Ge,Ye),Ge.return=qe,Ge)}function ze(qe,Ge,Ye){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=createFiberFromText(""+Ge,qe.mode,Ye),Ge.return=qe,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case REACT_ELEMENT_TYPE:return Ye=createFiberFromTypeAndProps(Ge.type,Ge.key,Ge.props,null,qe.mode,Ye),coerceRef(Ye,Ge),Ye.return=qe,Ye;case REACT_PORTAL_TYPE:return Ge=createFiberFromPortal(Ge,qe.mode,Ye),Ge.return=qe,Ge;case REACT_LAZY_TYPE:return Ge=resolveLazy(Ge),ze(qe,Ge,Ye)}if(isArrayImpl(Ge)||getIteratorFn(Ge))return Ge=createFiberFromFragment(Ge,qe.mode,Ye,null),Ge.return=qe,Ge;if(typeof Ge.then=="function")return ze(qe,unwrapThenable(Ge),Ye);if(Ge.$$typeof===REACT_CONTEXT_TYPE)return ze(qe,readContextDuringReconciliation(qe,Ge),Ye);throwOnInvalidObjectTypeImpl(qe,Ge)}return null}function $e(qe,Ge,Ye,Ke){var Xe=Ge!==null?Ge.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Xe!==null?null:Me(qe,Ge,""+Ye,Ke);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case REACT_ELEMENT_TYPE:return Ye.key===Xe?De(qe,Ge,Ye,Ke):null;case REACT_PORTAL_TYPE:return Ye.key===Xe?Oe(qe,Ge,Ye,Ke):null;case REACT_LAZY_TYPE:return Ye=resolveLazy(Ye),$e(qe,Ge,Ye,Ke)}if(isArrayImpl(Ye)||getIteratorFn(Ye))return Xe!==null?null:Be(qe,Ge,Ye,Ke,null);if(typeof Ye.then=="function")return $e(qe,Ge,unwrapThenable(Ye),Ke);if(Ye.$$typeof===REACT_CONTEXT_TYPE)return $e(qe,Ge,readContextDuringReconciliation(qe,Ye),Ke);throwOnInvalidObjectTypeImpl(qe,Ye)}return null}function He(qe,Ge,Ye,Ke,Xe){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return qe=qe.get(Ye)||null,Me(Ge,qe,""+Ke,Xe);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case REACT_ELEMENT_TYPE:return qe=qe.get(Ke.key===null?Ye:Ke.key)||null,De(Ge,qe,Ke,Xe);case REACT_PORTAL_TYPE:return qe=qe.get(Ke.key===null?Ye:Ke.key)||null,Oe(Ge,qe,Ke,Xe);case REACT_LAZY_TYPE:return Ke=resolveLazy(Ke),He(qe,Ge,Ye,Ke,Xe)}if(isArrayImpl(Ke)||getIteratorFn(Ke))return qe=qe.get(Ye)||null,Be(Ge,qe,Ke,Xe,null);if(typeof Ke.then=="function")return He(qe,Ge,Ye,unwrapThenable(Ke),Xe);if(Ke.$$typeof===REACT_CONTEXT_TYPE)return He(qe,Ge,Ye,readContextDuringReconciliation(Ge,Ke),Xe);throwOnInvalidObjectTypeImpl(Ge,Ke)}return null}function Ue(qe,Ge,Ye,Ke){for(var Xe=null,Ze=null,er=Ge,St=Ge=0,ar=null;er!==null&&St<Ye.length;St++){er.index>St?(ar=er,er=null):ar=er.sibling;var hr=$e(qe,er,Ye[St],Ke);if(hr===null){er===null&&(er=ar);break}e&&er&&hr.alternate===null&&t(qe,er),Ge=Ce(hr,Ge,St),Ze===null?Xe=hr:Ze.sibling=hr,Ze=hr,er=ar}if(St===Ye.length)return n(qe,er),isHydrating&&pushTreeFork(qe,St),Xe;if(er===null){for(;St<Ye.length;St++)er=ze(qe,Ye[St],Ke),er!==null&&(Ge=Ce(er,Ge,St),Ze===null?Xe=er:Ze.sibling=er,Ze=er);return isHydrating&&pushTreeFork(qe,St),Xe}for(er=Ee(er);St<Ye.length;St++)ar=He(er,qe,St,Ye[St],Ke),ar!==null&&(e&&ar.alternate!==null&&er.delete(ar.key===null?St:ar.key),Ge=Ce(ar,Ge,St),Ze===null?Xe=ar:Ze.sibling=ar,Ze=ar);return e&&er.forEach(function(ur){return t(qe,ur)}),isHydrating&&pushTreeFork(qe,St),Xe}function Ve(qe,Ge,Ye,Ke){if(Ye==null)throw Error(formatProdErrorMessage(151));for(var Xe=null,Ze=null,er=Ge,St=Ge=0,ar=null,hr=Ye.next();er!==null&&!hr.done;St++,hr=Ye.next()){er.index>St?(ar=er,er=null):ar=er.sibling;var ur=$e(qe,er,hr.value,Ke);if(ur===null){er===null&&(er=ar);break}e&&er&&ur.alternate===null&&t(qe,er),Ge=Ce(ur,Ge,St),Ze===null?Xe=ur:Ze.sibling=ur,Ze=ur,er=ar}if(hr.done)return n(qe,er),isHydrating&&pushTreeFork(qe,St),Xe;if(er===null){for(;!hr.done;St++,hr=Ye.next())hr=ze(qe,hr.value,Ke),hr!==null&&(Ge=Ce(hr,Ge,St),Ze===null?Xe=hr:Ze.sibling=hr,Ze=hr);return isHydrating&&pushTreeFork(qe,St),Xe}for(er=Ee(er);!hr.done;St++,hr=Ye.next())hr=He(er,qe,St,hr.value,Ke),hr!==null&&(e&&hr.alternate!==null&&er.delete(hr.key===null?St:hr.key),Ge=Ce(hr,Ge,St),Ze===null?Xe=hr:Ze.sibling=hr,Ze=hr);return e&&er.forEach(function(dr){return t(qe,dr)}),isHydrating&&pushTreeFork(qe,St),Xe}function We(qe,Ge,Ye,Ke){if(typeof Ye=="object"&&Ye!==null&&Ye.type===REACT_FRAGMENT_TYPE&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case REACT_ELEMENT_TYPE:e:{for(var Xe=Ye.key;Ge!==null;){if(Ge.key===Xe){if(Xe=Ye.type,Xe===REACT_FRAGMENT_TYPE){if(Ge.tag===7){n(qe,Ge.sibling),Ke=Re(Ge,Ye.props.children),Ke.return=qe,qe=Ke;break e}}else if(Ge.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===REACT_LAZY_TYPE&&resolveLazy(Xe)===Ge.type){n(qe,Ge.sibling),Ke=Re(Ge,Ye.props),coerceRef(Ke,Ye),Ke.return=qe,qe=Ke;break e}n(qe,Ge);break}else t(qe,Ge);Ge=Ge.sibling}Ye.type===REACT_FRAGMENT_TYPE?(Ke=createFiberFromFragment(Ye.props.children,qe.mode,Ke,Ye.key),Ke.return=qe,qe=Ke):(Ke=createFiberFromTypeAndProps(Ye.type,Ye.key,Ye.props,null,qe.mode,Ke),coerceRef(Ke,Ye),Ke.return=qe,qe=Ke)}return Te(qe);case REACT_PORTAL_TYPE:e:{for(Xe=Ye.key;Ge!==null;){if(Ge.key===Xe)if(Ge.tag===4&&Ge.stateNode.containerInfo===Ye.containerInfo&&Ge.stateNode.implementation===Ye.implementation){n(qe,Ge.sibling),Ke=Re(Ge,Ye.children||[]),Ke.return=qe,qe=Ke;break e}else{n(qe,Ge);break}else t(qe,Ge);Ge=Ge.sibling}Ke=createFiberFromPortal(Ye,qe.mode,Ke),Ke.return=qe,qe=Ke}return Te(qe);case REACT_LAZY_TYPE:return Ye=resolveLazy(Ye),We(qe,Ge,Ye,Ke)}if(isArrayImpl(Ye))return Ue(qe,Ge,Ye,Ke);if(getIteratorFn(Ye)){if(Xe=getIteratorFn(Ye),typeof Xe!="function")throw Error(formatProdErrorMessage(150));return Ye=Xe.call(Ye),Ve(qe,Ge,Ye,Ke)}if(typeof Ye.then=="function")return We(qe,Ge,unwrapThenable(Ye),Ke);if(Ye.$$typeof===REACT_CONTEXT_TYPE)return We(qe,Ge,readContextDuringReconciliation(qe,Ye),Ke);throwOnInvalidObjectTypeImpl(qe,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint"?(Ye=""+Ye,Ge!==null&&Ge.tag===6?(n(qe,Ge.sibling),Ke=Re(Ge,Ye),Ke.return=qe,qe=Ke):(n(qe,Ge),Ke=createFiberFromText(Ye,qe.mode,Ke),Ke.return=qe,qe=Ke),Te(qe)):n(qe,Ge)}return function(qe,Ge,Ye,Ke){try{thenableIndexCounter$1=0;var Xe=We(qe,Ge,Ye,Ke);return thenableState$1=null,Xe}catch(er){if(er===SuspenseException||er===SuspenseActionException)throw er;var Ze=createFiberImplClass(29,er,null,qe.mode);return Ze.lanes=Ke,Ze.return=qe,Ze}finally{}}}var reconcileChildFibers=createChildReconciler(!0),mountChildFibers=createChildReconciler(!1),hasForceUpdate=!1;function initializeUpdateQueue(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cloneUpdateQueue(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function createUpdate(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function enqueueUpdate(e,t,n){var Ee=e.updateQueue;if(Ee===null)return null;if(Ee=Ee.shared,executionContext&2){var Re=Ee.pending;return Re===null?t.next=t:(t.next=Re.next,Re.next=t),Ee.pending=t,t=getRootForUpdatedFiber(e),markUpdateLaneFromFiberToRoot(e,null,n),t}return enqueueUpdate$1(e,Ee,t,n),getRootForUpdatedFiber(e)}function entangleTransitions(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var Ee=t.lanes;Ee&=e.pendingLanes,n|=Ee,t.lanes=n,markRootEntangled(e,n)}}function enqueueCapturedUpdate(e,t){var n=e.updateQueue,Ee=e.alternate;if(Ee!==null&&(Ee=Ee.updateQueue,n===Ee)){var Re=null,Ce=null;if(n=n.firstBaseUpdate,n!==null){do{var Te={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};Ce===null?Re=Ce=Te:Ce=Ce.next=Te,n=n.next}while(n!==null);Ce===null?Re=Ce=t:Ce=Ce.next=t}else Re=Ce=t;n={baseState:Ee.baseState,firstBaseUpdate:Re,lastBaseUpdate:Ce,shared:Ee.shared,callbacks:Ee.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var didReadFromEntangledAsyncAction=!1;function suspendIfUpdateReadFromEntangledAsyncAction(){if(didReadFromEntangledAsyncAction){var e=currentEntangledActionThenable;if(e!==null)throw e}}function processUpdateQueue(e,t,n,Ee){didReadFromEntangledAsyncAction=!1;var Re=e.updateQueue;hasForceUpdate=!1;var Ce=Re.firstBaseUpdate,Te=Re.lastBaseUpdate,Me=Re.shared.pending;if(Me!==null){Re.shared.pending=null;var De=Me,Oe=De.next;De.next=null,Te===null?Ce=Oe:Te.next=Oe,Te=De;var Be=e.alternate;Be!==null&&(Be=Be.updateQueue,Me=Be.lastBaseUpdate,Me!==Te&&(Me===null?Be.firstBaseUpdate=Oe:Me.next=Oe,Be.lastBaseUpdate=De))}if(Ce!==null){var ze=Re.baseState;Te=0,Be=Oe=De=null,Me=Ce;do{var $e=Me.lane&-536870913,He=$e!==Me.lane;if(He?(workInProgressRootRenderLanes&$e)===$e:(Ee&$e)===$e){$e!==0&&$e===currentEntangledLane&&(didReadFromEntangledAsyncAction=!0),Be!==null&&(Be=Be.next={lane:0,tag:Me.tag,payload:Me.payload,callback:null,next:null});e:{var Ue=e,Ve=Me;$e=t;var We=n;switch(Ve.tag){case 1:if(Ue=Ve.payload,typeof Ue=="function"){ze=Ue.call(We,ze,$e);break e}ze=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Ve.payload,$e=typeof Ue=="function"?Ue.call(We,ze,$e):Ue,$e==null)break e;ze=assign$3({},ze,$e);break e;case 2:hasForceUpdate=!0}}$e=Me.callback,$e!==null&&(e.flags|=64,He&&(e.flags|=8192),He=Re.callbacks,He===null?Re.callbacks=[$e]:He.push($e))}else He={lane:$e,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},Be===null?(Oe=Be=He,De=ze):Be=Be.next=He,Te|=$e;if(Me=Me.next,Me===null){if(Me=Re.shared.pending,Me===null)break;He=Me,Me=He.next,He.next=null,Re.lastBaseUpdate=He,Re.shared.pending=null}}while(!0);Be===null&&(De=ze),Re.baseState=De,Re.firstBaseUpdate=Oe,Re.lastBaseUpdate=Be,Ce===null&&(Re.shared.lanes=0),workInProgressRootSkippedLanes|=Te,e.lanes=Te,e.memoizedState=ze}}function callCallback(e,t){if(typeof e!="function")throw Error(formatProdErrorMessage(191,e));e.call(t)}function commitCallbacks(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)callCallback(n[e],t)}var currentTreeHiddenStackCursor=createCursor(null),prevEntangledRenderLanesCursor=createCursor(0);function pushHiddenContext(e,t){e=entangledRenderLanes,push(prevEntangledRenderLanesCursor,e),push(currentTreeHiddenStackCursor,t),entangledRenderLanes=e|t.baseLanes}function reuseHiddenContextOnStack(){push(prevEntangledRenderLanesCursor,entangledRenderLanes),push(currentTreeHiddenStackCursor,currentTreeHiddenStackCursor.current)}function popHiddenContext(){entangledRenderLanes=prevEntangledRenderLanesCursor.current,pop(currentTreeHiddenStackCursor),pop(prevEntangledRenderLanesCursor)}var suspenseHandlerStackCursor=createCursor(null),shellBoundary=null;function pushPrimaryTreeSuspenseHandler(e){var t=e.alternate;push(suspenseStackCursor,suspenseStackCursor.current&1),push(suspenseHandlerStackCursor,e),shellBoundary===null&&(t===null||currentTreeHiddenStackCursor.current!==null||t.memoizedState!==null)&&(shellBoundary=e)}function pushDehydratedActivitySuspenseHandler(e){push(suspenseStackCursor,suspenseStackCursor.current),push(suspenseHandlerStackCursor,e),shellBoundary===null&&(shellBoundary=e)}function pushOffscreenSuspenseHandler(e){e.tag===22?(push(suspenseStackCursor,suspenseStackCursor.current),push(suspenseHandlerStackCursor,e),shellBoundary===null&&(shellBoundary=e)):reuseSuspenseHandlerOnStack()}function reuseSuspenseHandlerOnStack(){push(suspenseStackCursor,suspenseStackCursor.current),push(suspenseHandlerStackCursor,suspenseHandlerStackCursor.current)}function popSuspenseHandler(e){pop(suspenseHandlerStackCursor),shellBoundary===e&&(shellBoundary=null),pop(suspenseStackCursor)}var suspenseStackCursor=createCursor(0);function findFirstSuspended(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||isSuspenseInstancePending(n)||isSuspenseInstanceFallback(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var renderLanes=0,currentlyRenderingFiber=null,currentHook=null,workInProgressHook=null,didScheduleRenderPhaseUpdate=!1,didScheduleRenderPhaseUpdateDuringThisPass=!1,shouldDoubleInvokeUserFnsInHooksDEV=!1,localIdCounter=0,thenableIndexCounter=0,thenableState=null,globalClientIdCounter=0;function throwInvalidHookError(){throw Error(formatProdErrorMessage(321))}function areHookInputsEqual(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!objectIs$2(e[n],t[n]))return!1;return!0}function renderWithHooks(e,t,n,Ee,Re,Ce){return renderLanes=Ce,currentlyRenderingFiber=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ReactSharedInternals.H=e===null||e.memoizedState===null?HooksDispatcherOnMount:HooksDispatcherOnUpdate,shouldDoubleInvokeUserFnsInHooksDEV=!1,Ce=n(Ee,Re),shouldDoubleInvokeUserFnsInHooksDEV=!1,didScheduleRenderPhaseUpdateDuringThisPass&&(Ce=renderWithHooksAgain(t,n,Ee,Re)),finishRenderingHooks(e),Ce}function finishRenderingHooks(e){ReactSharedInternals.H=ContextOnlyDispatcher;var t=currentHook!==null&&currentHook.next!==null;if(renderLanes=0,workInProgressHook=currentHook=currentlyRenderingFiber=null,didScheduleRenderPhaseUpdate=!1,thenableIndexCounter=0,thenableState=null,t)throw Error(formatProdErrorMessage(300));e===null||didReceiveUpdate||(e=e.dependencies,e!==null&&checkIfContextChanged(e)&&(didReceiveUpdate=!0))}function renderWithHooksAgain(e,t,n,Ee){currentlyRenderingFiber=e;var Re=0;do{if(didScheduleRenderPhaseUpdateDuringThisPass&&(thenableState=null),thenableIndexCounter=0,didScheduleRenderPhaseUpdateDuringThisPass=!1,25<=Re)throw Error(formatProdErrorMessage(301));if(Re+=1,workInProgressHook=currentHook=null,e.updateQueue!=null){var Ce=e.updateQueue;Ce.lastEffect=null,Ce.events=null,Ce.stores=null,Ce.memoCache!=null&&(Ce.memoCache.index=0)}ReactSharedInternals.H=HooksDispatcherOnRerender,Ce=t(n,Ee)}while(didScheduleRenderPhaseUpdateDuringThisPass);return Ce}function TransitionAwareHostComponent(){var e=ReactSharedInternals.H,t=e.useState()[0];return t=typeof t.then=="function"?useThenable(t):t,e=e.useState()[0],(currentHook!==null?currentHook.memoizedState:null)!==e&&(currentlyRenderingFiber.flags|=1024),t}function checkDidRenderIdHook(){var e=localIdCounter!==0;return localIdCounter=0,e}function bailoutHooks(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function resetHooksOnUnwind(e){if(didScheduleRenderPhaseUpdate){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}didScheduleRenderPhaseUpdate=!1}renderLanes=0,workInProgressHook=currentHook=currentlyRenderingFiber=null,didScheduleRenderPhaseUpdateDuringThisPass=!1,thenableIndexCounter=localIdCounter=0,thenableState=null}function mountWorkInProgressHook(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return workInProgressHook===null?currentlyRenderingFiber.memoizedState=workInProgressHook=e:workInProgressHook=workInProgressHook.next=e,workInProgressHook}function updateWorkInProgressHook(){if(currentHook===null){var e=currentlyRenderingFiber.alternate;e=e!==null?e.memoizedState:null}else e=currentHook.next;var t=workInProgressHook===null?currentlyRenderingFiber.memoizedState:workInProgressHook.next;if(t!==null)workInProgressHook=t,currentHook=e;else{if(e===null)throw currentlyRenderingFiber.alternate===null?Error(formatProdErrorMessage(467)):Error(formatProdErrorMessage(310));currentHook=e,e={memoizedState:currentHook.memoizedState,baseState:currentHook.baseState,baseQueue:currentHook.baseQueue,queue:currentHook.queue,next:null},workInProgressHook===null?currentlyRenderingFiber.memoizedState=workInProgressHook=e:workInProgressHook=workInProgressHook.next=e}return workInProgressHook}function createFunctionComponentUpdateQueue(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function useThenable(e){var t=thenableIndexCounter;return thenableIndexCounter+=1,thenableState===null&&(thenableState=[]),e=trackUsedThenable(thenableState,e,t),t=currentlyRenderingFiber,(workInProgressHook===null?t.memoizedState:workInProgressHook.next)===null&&(t=t.alternate,ReactSharedInternals.H=t===null||t.memoizedState===null?HooksDispatcherOnMount:HooksDispatcherOnUpdate),e}function use(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return useThenable(e);if(e.$$typeof===REACT_CONTEXT_TYPE)return readContext(e)}throw Error(formatProdErrorMessage(438,String(e)))}function useMemoCache(e){var t=null,n=currentlyRenderingFiber.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var Ee=currentlyRenderingFiber.alternate;Ee!==null&&(Ee=Ee.updateQueue,Ee!==null&&(Ee=Ee.memoCache,Ee!=null&&(t={data:Ee.data.map(function(Re){return Re.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),Ee=0;Ee<e;Ee++)n[Ee]=REACT_MEMO_CACHE_SENTINEL;return t.index++,n}function basicStateReducer(e,t){return typeof t=="function"?t(e):t}function updateReducer(e){var t=updateWorkInProgressHook();return updateReducerImpl(t,currentHook,e)}function updateReducerImpl(e,t,n){var Ee=e.queue;if(Ee===null)throw Error(formatProdErrorMessage(311));Ee.lastRenderedReducer=n;var Re=e.baseQueue,Ce=Ee.pending;if(Ce!==null){if(Re!==null){var Te=Re.next;Re.next=Ce.next,Ce.next=Te}t.baseQueue=Re=Ce,Ee.pending=null}if(Ce=e.baseState,Re===null)e.memoizedState=Ce;else{t=Re.next;var Me=Te=null,De=null,Oe=t,Be=!1;do{var ze=Oe.lane&-536870913;if(ze!==Oe.lane?(workInProgressRootRenderLanes&ze)===ze:(renderLanes&ze)===ze){var $e=Oe.revertLane;if($e===0)De!==null&&(De=De.next={lane:0,revertLane:0,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),ze===currentEntangledLane&&(Be=!0);else if((renderLanes&$e)===$e){Oe=Oe.next,$e===currentEntangledLane&&(Be=!0);continue}else ze={lane:0,revertLane:Oe.revertLane,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},De===null?(Me=De=ze,Te=Ce):De=De.next=ze,currentlyRenderingFiber.lanes|=$e,workInProgressRootSkippedLanes|=$e;ze=Oe.action,shouldDoubleInvokeUserFnsInHooksDEV&&n(Ce,ze),Ce=Oe.hasEagerState?Oe.eagerState:n(Ce,ze)}else $e={lane:ze,revertLane:Oe.revertLane,gesture:Oe.gesture,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},De===null?(Me=De=$e,Te=Ce):De=De.next=$e,currentlyRenderingFiber.lanes|=ze,workInProgressRootSkippedLanes|=ze;Oe=Oe.next}while(Oe!==null&&Oe!==t);if(De===null?Te=Ce:De.next=Me,!objectIs$2(Ce,e.memoizedState)&&(didReceiveUpdate=!0,Be&&(n=currentEntangledActionThenable,n!==null)))throw n;e.memoizedState=Ce,e.baseState=Te,e.baseQueue=De,Ee.lastRenderedState=Ce}return Re===null&&(Ee.lanes=0),[e.memoizedState,Ee.dispatch]}function rerenderReducer(e){var t=updateWorkInProgressHook(),n=t.queue;if(n===null)throw Error(formatProdErrorMessage(311));n.lastRenderedReducer=e;var Ee=n.dispatch,Re=n.pending,Ce=t.memoizedState;if(Re!==null){n.pending=null;var Te=Re=Re.next;do Ce=e(Ce,Te.action),Te=Te.next;while(Te!==Re);objectIs$2(Ce,t.memoizedState)||(didReceiveUpdate=!0),t.memoizedState=Ce,t.baseQueue===null&&(t.baseState=Ce),n.lastRenderedState=Ce}return[Ce,Ee]}function updateSyncExternalStore(e,t,n){var Ee=currentlyRenderingFiber,Re=updateWorkInProgressHook(),Ce=isHydrating;if(Ce){if(n===void 0)throw Error(formatProdErrorMessage(407));n=n()}else n=t();var Te=!objectIs$2((currentHook||Re).memoizedState,n);if(Te&&(Re.memoizedState=n,didReceiveUpdate=!0),Re=Re.queue,updateEffect(subscribeToStore.bind(null,Ee,Re,e),[e]),Re.getSnapshot!==t||Te||workInProgressHook!==null&&workInProgressHook.memoizedState.tag&1){if(Ee.flags|=2048,pushSimpleEffect(9,{destroy:void 0},updateStoreInstance.bind(null,Ee,Re,n,t),null),workInProgressRoot===null)throw Error(formatProdErrorMessage(349));Ce||renderLanes&127||pushStoreConsistencyCheck(Ee,t,n)}return n}function pushStoreConsistencyCheck(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=currentlyRenderingFiber.updateQueue,t===null?(t=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function updateStoreInstance(e,t,n,Ee){t.value=n,t.getSnapshot=Ee,checkIfSnapshotChanged$1(t)&&forceStoreRerender(e)}function subscribeToStore(e,t,n){return n(function(){checkIfSnapshotChanged$1(t)&&forceStoreRerender(e)})}function checkIfSnapshotChanged$1(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!objectIs$2(e,n)}catch{return!0}}function forceStoreRerender(e){var t=enqueueConcurrentRenderForLane(e,2);t!==null&&scheduleUpdateOnFiber(t,e,2)}function mountStateImpl(e){var t=mountWorkInProgressHook();if(typeof e=="function"){var n=e;if(e=n(),shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{n()}finally{setIsStrictModeForDevtools(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:e},t}function updateOptimisticImpl(e,t,n,Ee){return e.baseState=n,updateReducerImpl(e,currentHook,typeof Ee=="function"?Ee:basicStateReducer)}function dispatchActionState(e,t,n,Ee,Re){if(isRenderPhaseUpdate(e))throw Error(formatProdErrorMessage(485));if(e=t.action,e!==null){var Ce={payload:Re,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Te){Ce.listeners.push(Te)}};ReactSharedInternals.T!==null?n(!0):Ce.isTransition=!1,Ee(Ce),n=t.pending,n===null?(Ce.next=t.pending=Ce,runActionStateAction(t,Ce)):(Ce.next=n.next,t.pending=n.next=Ce)}}function runActionStateAction(e,t){var n=t.action,Ee=t.payload,Re=e.state;if(t.isTransition){var Ce=ReactSharedInternals.T,Te={};ReactSharedInternals.T=Te;try{var Me=n(Re,Ee),De=ReactSharedInternals.S;De!==null&&De(Te,Me),handleActionReturnValue(e,t,Me)}catch(Oe){onActionError(e,t,Oe)}finally{Ce!==null&&Te.types!==null&&(Ce.types=Te.types),ReactSharedInternals.T=Ce}}else try{Ce=n(Re,Ee),handleActionReturnValue(e,t,Ce)}catch(Oe){onActionError(e,t,Oe)}}function handleActionReturnValue(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(Ee){onActionSuccess(e,t,Ee)},function(Ee){return onActionError(e,t,Ee)}):onActionSuccess(e,t,n)}function onActionSuccess(e,t,n){t.status="fulfilled",t.value=n,notifyActionListeners(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,runActionStateAction(e,n)))}function onActionError(e,t,n){var Ee=e.pending;if(e.pending=null,Ee!==null){Ee=Ee.next;do t.status="rejected",t.reason=n,notifyActionListeners(t),t=t.next;while(t!==Ee)}e.action=null}function notifyActionListeners(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function actionStateReducer(e,t){return t}function mountActionState(e,t){if(isHydrating){var n=workInProgressRoot.formState;if(n!==null){e:{var Ee=currentlyRenderingFiber;if(isHydrating){if(nextHydratableInstance){t:{for(var Re=nextHydratableInstance,Ce=rootOrSingletonContext;Re.nodeType!==8;){if(!Ce){Re=null;break t}if(Re=getNextHydratable(Re.nextSibling),Re===null){Re=null;break t}}Ce=Re.data,Re=Ce==="F!"||Ce==="F"?Re:null}if(Re){nextHydratableInstance=getNextHydratable(Re.nextSibling),Ee=Re.data==="F!";break e}}throwOnHydrationMismatch(Ee)}Ee=!1}Ee&&(t=n[0])}}return n=mountWorkInProgressHook(),n.memoizedState=n.baseState=t,Ee={pending:null,lanes:0,dispatch:null,lastRenderedReducer:actionStateReducer,lastRenderedState:t},n.queue=Ee,n=dispatchSetState.bind(null,currentlyRenderingFiber,Ee),Ee.dispatch=n,Ee=mountStateImpl(!1),Ce=dispatchOptimisticSetState.bind(null,currentlyRenderingFiber,!1,Ee.queue),Ee=mountWorkInProgressHook(),Re={state:t,dispatch:null,action:e,pending:null},Ee.queue=Re,n=dispatchActionState.bind(null,currentlyRenderingFiber,Re,Ce,n),Re.dispatch=n,Ee.memoizedState=e,[t,n,!1]}function updateActionState(e){var t=updateWorkInProgressHook();return updateActionStateImpl(t,currentHook,e)}function updateActionStateImpl(e,t,n){if(t=updateReducerImpl(e,t,actionStateReducer)[0],e=updateReducer(basicStateReducer)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var Ee=useThenable(t)}catch(Te){throw Te===SuspenseException?SuspenseActionException:Te}else Ee=t;t=updateWorkInProgressHook();var Re=t.queue,Ce=Re.dispatch;return n!==t.memoizedState&&(currentlyRenderingFiber.flags|=2048,pushSimpleEffect(9,{destroy:void 0},actionStateActionEffect.bind(null,Re,n),null)),[Ee,Ce,e]}function actionStateActionEffect(e,t){e.action=t}function rerenderActionState(e){var t=updateWorkInProgressHook(),n=currentHook;if(n!==null)return updateActionStateImpl(t,n,e);updateWorkInProgressHook(),t=t.memoizedState,n=updateWorkInProgressHook();var Ee=n.queue.dispatch;return n.memoizedState=e,[t,Ee,!1]}function pushSimpleEffect(e,t,n,Ee){return e={tag:e,create:n,deps:Ee,inst:t,next:null},t=currentlyRenderingFiber.updateQueue,t===null&&(t=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(Ee=n.next,n.next=e,e.next=Ee,t.lastEffect=e),e}function updateRef(){return updateWorkInProgressHook().memoizedState}function mountEffectImpl(e,t,n,Ee){var Re=mountWorkInProgressHook();currentlyRenderingFiber.flags|=e,Re.memoizedState=pushSimpleEffect(1|t,{destroy:void 0},n,Ee===void 0?null:Ee)}function updateEffectImpl(e,t,n,Ee){var Re=updateWorkInProgressHook();Ee=Ee===void 0?null:Ee;var Ce=Re.memoizedState.inst;currentHook!==null&&Ee!==null&&areHookInputsEqual(Ee,currentHook.memoizedState.deps)?Re.memoizedState=pushSimpleEffect(t,Ce,n,Ee):(currentlyRenderingFiber.flags|=e,Re.memoizedState=pushSimpleEffect(1|t,Ce,n,Ee))}function mountEffect(e,t){mountEffectImpl(8390656,8,e,t)}function updateEffect(e,t){updateEffectImpl(2048,8,e,t)}function useEffectEventImpl(e){currentlyRenderingFiber.flags|=4;var t=currentlyRenderingFiber.updateQueue;if(t===null)t=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function updateEvent(e){var t=updateWorkInProgressHook().memoizedState;return useEffectEventImpl({ref:t,nextImpl:e}),function(){if(executionContext&2)throw Error(formatProdErrorMessage(440));return t.impl.apply(void 0,arguments)}}function updateInsertionEffect(e,t){return updateEffectImpl(4,2,e,t)}function updateLayoutEffect(e,t){return updateEffectImpl(4,4,e,t)}function imperativeHandleEffect(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function updateImperativeHandle(e,t,n){n=n!=null?n.concat([e]):null,updateEffectImpl(4,4,imperativeHandleEffect.bind(null,t,e),n)}function mountDebugValue(){}function updateCallback(e,t){var n=updateWorkInProgressHook();t=t===void 0?null:t;var Ee=n.memoizedState;return t!==null&&areHookInputsEqual(t,Ee[1])?Ee[0]:(n.memoizedState=[e,t],e)}function updateMemo(e,t){var n=updateWorkInProgressHook();t=t===void 0?null:t;var Ee=n.memoizedState;if(t!==null&&areHookInputsEqual(t,Ee[1]))return Ee[0];if(Ee=e(),shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{e()}finally{setIsStrictModeForDevtools(!1)}}return n.memoizedState=[Ee,t],Ee}function mountDeferredValueImpl(e,t,n){return n===void 0||renderLanes&1073741824&&!(workInProgressRootRenderLanes&261930)?e.memoizedState=t:(e.memoizedState=n,e=requestDeferredLane(),currentlyRenderingFiber.lanes|=e,workInProgressRootSkippedLanes|=e,n)}function updateDeferredValueImpl(e,t,n,Ee){return objectIs$2(n,t)?n:currentTreeHiddenStackCursor.current!==null?(e=mountDeferredValueImpl(e,n,Ee),objectIs$2(e,t)||(didReceiveUpdate=!0),e):!(renderLanes&42)||renderLanes&1073741824&&!(workInProgressRootRenderLanes&261930)?(didReceiveUpdate=!0,e.memoizedState=n):(e=requestDeferredLane(),currentlyRenderingFiber.lanes|=e,workInProgressRootSkippedLanes|=e,t)}function startTransition(e,t,n,Ee,Re){var Ce=ReactDOMSharedInternals.p;ReactDOMSharedInternals.p=Ce!==0&&8>Ce?Ce:8;var Te=ReactSharedInternals.T,Me={};ReactSharedInternals.T=Me,dispatchOptimisticSetState(e,!1,t,n);try{var De=Re(),Oe=ReactSharedInternals.S;if(Oe!==null&&Oe(Me,De),De!==null&&typeof De=="object"&&typeof De.then=="function"){var Be=chainThenableValue(De,Ee);dispatchSetStateInternal(e,t,Be,requestUpdateLane(e))}else dispatchSetStateInternal(e,t,Ee,requestUpdateLane(e))}catch(ze){dispatchSetStateInternal(e,t,{then:function(){},status:"rejected",reason:ze},requestUpdateLane())}finally{ReactDOMSharedInternals.p=Ce,Te!==null&&Me.types!==null&&(Te.types=Me.types),ReactSharedInternals.T=Te}}function noop$3(){}function startHostTransition(e,t,n,Ee){if(e.tag!==5)throw Error(formatProdErrorMessage(476));var Re=ensureFormComponentIsStateful(e).queue;startTransition(e,Re,t,sharedNotPendingObject,n===null?noop$3:function(){return requestFormReset$1(e),n(Ee)})}function ensureFormComponentIsStateful(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:sharedNotPendingObject,baseState:sharedNotPendingObject,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:sharedNotPendingObject},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function requestFormReset$1(e){var t=ensureFormComponentIsStateful(e);t.next===null&&(t=e.alternate.memoizedState),dispatchSetStateInternal(e,t.next.queue,{},requestUpdateLane())}function useHostTransitionStatus(){return readContext(HostTransitionContext)}function updateId(){return updateWorkInProgressHook().memoizedState}function updateRefresh(){return updateWorkInProgressHook().memoizedState}function refreshCache(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=requestUpdateLane();e=createUpdate(n);var Ee=enqueueUpdate(t,e,n);Ee!==null&&(scheduleUpdateOnFiber(Ee,t,n),entangleTransitions(Ee,t,n)),t={cache:createCache()},e.payload=t;return}t=t.return}}function dispatchReducerAction(e,t,n){var Ee=requestUpdateLane();n={lane:Ee,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},isRenderPhaseUpdate(e)?enqueueRenderPhaseUpdate(t,n):(n=enqueueConcurrentHookUpdate(e,t,n,Ee),n!==null&&(scheduleUpdateOnFiber(n,e,Ee),entangleTransitionUpdate(n,t,Ee)))}function dispatchSetState(e,t,n){var Ee=requestUpdateLane();dispatchSetStateInternal(e,t,n,Ee)}function dispatchSetStateInternal(e,t,n,Ee){var Re={lane:Ee,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(isRenderPhaseUpdate(e))enqueueRenderPhaseUpdate(t,Re);else{var Ce=e.alternate;if(e.lanes===0&&(Ce===null||Ce.lanes===0)&&(Ce=t.lastRenderedReducer,Ce!==null))try{var Te=t.lastRenderedState,Me=Ce(Te,n);if(Re.hasEagerState=!0,Re.eagerState=Me,objectIs$2(Me,Te))return enqueueUpdate$1(e,t,Re,0),workInProgressRoot===null&&finishQueueingConcurrentUpdates(),!1}catch{}finally{}if(n=enqueueConcurrentHookUpdate(e,t,Re,Ee),n!==null)return scheduleUpdateOnFiber(n,e,Ee),entangleTransitionUpdate(n,t,Ee),!0}return!1}function dispatchOptimisticSetState(e,t,n,Ee){if(Ee={lane:2,revertLane:requestTransitionLane(),gesture:null,action:Ee,hasEagerState:!1,eagerState:null,next:null},isRenderPhaseUpdate(e)){if(t)throw Error(formatProdErrorMessage(479))}else t=enqueueConcurrentHookUpdate(e,n,Ee,2),t!==null&&scheduleUpdateOnFiber(t,e,2)}function isRenderPhaseUpdate(e){var t=e.alternate;return e===currentlyRenderingFiber||t!==null&&t===currentlyRenderingFiber}function enqueueRenderPhaseUpdate(e,t){didScheduleRenderPhaseUpdateDuringThisPass=didScheduleRenderPhaseUpdate=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function entangleTransitionUpdate(e,t,n){if(n&4194048){var Ee=t.lanes;Ee&=e.pendingLanes,n|=Ee,t.lanes=n,markRootEntangled(e,n)}}var ContextOnlyDispatcher={readContext,use,useCallback:throwInvalidHookError,useContext:throwInvalidHookError,useEffect:throwInvalidHookError,useImperativeHandle:throwInvalidHookError,useLayoutEffect:throwInvalidHookError,useInsertionEffect:throwInvalidHookError,useMemo:throwInvalidHookError,useReducer:throwInvalidHookError,useRef:throwInvalidHookError,useState:throwInvalidHookError,useDebugValue:throwInvalidHookError,useDeferredValue:throwInvalidHookError,useTransition:throwInvalidHookError,useSyncExternalStore:throwInvalidHookError,useId:throwInvalidHookError,useHostTransitionStatus:throwInvalidHookError,useFormState:throwInvalidHookError,useActionState:throwInvalidHookError,useOptimistic:throwInvalidHookError,useMemoCache:throwInvalidHookError,useCacheRefresh:throwInvalidHookError};ContextOnlyDispatcher.useEffectEvent=throwInvalidHookError;var HooksDispatcherOnMount={readContext,use,useCallback:function(e,t){return mountWorkInProgressHook().memoizedState=[e,t===void 0?null:t],e},useContext:readContext,useEffect:mountEffect,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,mountEffectImpl(4194308,4,imperativeHandleEffect.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mountEffectImpl(4194308,4,e,t)},useInsertionEffect:function(e,t){mountEffectImpl(4,2,e,t)},useMemo:function(e,t){var n=mountWorkInProgressHook();t=t===void 0?null:t;var Ee=e();if(shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{e()}finally{setIsStrictModeForDevtools(!1)}}return n.memoizedState=[Ee,t],Ee},useReducer:function(e,t,n){var Ee=mountWorkInProgressHook();if(n!==void 0){var Re=n(t);if(shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{n(t)}finally{setIsStrictModeForDevtools(!1)}}}else Re=t;return Ee.memoizedState=Ee.baseState=Re,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:Re},Ee.queue=e,e=e.dispatch=dispatchReducerAction.bind(null,currentlyRenderingFiber,e),[Ee.memoizedState,e]},useRef:function(e){var t=mountWorkInProgressHook();return e={current:e},t.memoizedState=e},useState:function(e){e=mountStateImpl(e);var t=e.queue,n=dispatchSetState.bind(null,currentlyRenderingFiber,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:mountDebugValue,useDeferredValue:function(e,t){var n=mountWorkInProgressHook();return mountDeferredValueImpl(n,e,t)},useTransition:function(){var e=mountStateImpl(!1);return e=startTransition.bind(null,currentlyRenderingFiber,e.queue,!0,!1),mountWorkInProgressHook().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var Ee=currentlyRenderingFiber,Re=mountWorkInProgressHook();if(isHydrating){if(n===void 0)throw Error(formatProdErrorMessage(407));n=n()}else{if(n=t(),workInProgressRoot===null)throw Error(formatProdErrorMessage(349));workInProgressRootRenderLanes&127||pushStoreConsistencyCheck(Ee,t,n)}Re.memoizedState=n;var Ce={value:n,getSnapshot:t};return Re.queue=Ce,mountEffect(subscribeToStore.bind(null,Ee,Ce,e),[e]),Ee.flags|=2048,pushSimpleEffect(9,{destroy:void 0},updateStoreInstance.bind(null,Ee,Ce,n,t),null),n},useId:function(){var e=mountWorkInProgressHook(),t=workInProgressRoot.identifierPrefix;if(isHydrating){var n=treeContextOverflow,Ee=treeContextId;n=(Ee&~(1<<32-clz32(Ee)-1)).toString(32)+n,t="_"+t+"R_"+n,n=localIdCounter++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=globalClientIdCounter++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus,useFormState:mountActionState,useActionState:mountActionState,useOptimistic:function(e){var t=mountWorkInProgressHook();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=dispatchOptimisticSetState.bind(null,currentlyRenderingFiber,!0,n),n.dispatch=t,[e,t]},useMemoCache,useCacheRefresh:function(){return mountWorkInProgressHook().memoizedState=refreshCache.bind(null,currentlyRenderingFiber)},useEffectEvent:function(e){var t=mountWorkInProgressHook(),n={impl:e};return t.memoizedState=n,function(){if(executionContext&2)throw Error(formatProdErrorMessage(440));return n.impl.apply(void 0,arguments)}}},HooksDispatcherOnUpdate={readContext,use,useCallback:updateCallback,useContext:readContext,useEffect:updateEffect,useImperativeHandle:updateImperativeHandle,useInsertionEffect:updateInsertionEffect,useLayoutEffect:updateLayoutEffect,useMemo:updateMemo,useReducer:updateReducer,useRef:updateRef,useState:function(){return updateReducer(basicStateReducer)},useDebugValue:mountDebugValue,useDeferredValue:function(e,t){var n=updateWorkInProgressHook();return updateDeferredValueImpl(n,currentHook.memoizedState,e,t)},useTransition:function(){var e=updateReducer(basicStateReducer)[0],t=updateWorkInProgressHook().memoizedState;return[typeof e=="boolean"?e:useThenable(e),t]},useSyncExternalStore:updateSyncExternalStore,useId:updateId,useHostTransitionStatus,useFormState:updateActionState,useActionState:updateActionState,useOptimistic:function(e,t){var n=updateWorkInProgressHook();return updateOptimisticImpl(n,currentHook,e,t)},useMemoCache,useCacheRefresh:updateRefresh};HooksDispatcherOnUpdate.useEffectEvent=updateEvent;var HooksDispatcherOnRerender={readContext,use,useCallback:updateCallback,useContext:readContext,useEffect:updateEffect,useImperativeHandle:updateImperativeHandle,useInsertionEffect:updateInsertionEffect,useLayoutEffect:updateLayoutEffect,useMemo:updateMemo,useReducer:rerenderReducer,useRef:updateRef,useState:function(){return rerenderReducer(basicStateReducer)},useDebugValue:mountDebugValue,useDeferredValue:function(e,t){var n=updateWorkInProgressHook();return currentHook===null?mountDeferredValueImpl(n,e,t):updateDeferredValueImpl(n,currentHook.memoizedState,e,t)},useTransition:function(){var e=rerenderReducer(basicStateReducer)[0],t=updateWorkInProgressHook().memoizedState;return[typeof e=="boolean"?e:useThenable(e),t]},useSyncExternalStore:updateSyncExternalStore,useId:updateId,useHostTransitionStatus,useFormState:rerenderActionState,useActionState:rerenderActionState,useOptimistic:function(e,t){var n=updateWorkInProgressHook();return currentHook!==null?updateOptimisticImpl(n,currentHook,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache,useCacheRefresh:updateRefresh};HooksDispatcherOnRerender.useEffectEvent=updateEvent;function applyDerivedStateFromProps(e,t,n,Ee){t=e.memoizedState,n=n(Ee,t),n=n==null?t:assign$3({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var classComponentUpdater={enqueueSetState:function(e,t,n){e=e._reactInternals;var Ee=requestUpdateLane(),Re=createUpdate(Ee);Re.payload=t,n!=null&&(Re.callback=n),t=enqueueUpdate(e,Re,Ee),t!==null&&(scheduleUpdateOnFiber(t,e,Ee),entangleTransitions(t,e,Ee))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var Ee=requestUpdateLane(),Re=createUpdate(Ee);Re.tag=1,Re.payload=t,n!=null&&(Re.callback=n),t=enqueueUpdate(e,Re,Ee),t!==null&&(scheduleUpdateOnFiber(t,e,Ee),entangleTransitions(t,e,Ee))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=requestUpdateLane(),Ee=createUpdate(n);Ee.tag=2,t!=null&&(Ee.callback=t),t=enqueueUpdate(e,Ee,n),t!==null&&(scheduleUpdateOnFiber(t,e,n),entangleTransitions(t,e,n))}};function checkShouldComponentUpdate(e,t,n,Ee,Re,Ce,Te){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(Ee,Ce,Te):t.prototype&&t.prototype.isPureReactComponent?!shallowEqual(n,Ee)||!shallowEqual(Re,Ce):!0}function callComponentWillReceiveProps(e,t,n,Ee){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,Ee),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,Ee),t.state!==e&&classComponentUpdater.enqueueReplaceState(t,t.state,null)}function resolveClassComponentProps(e,t){var n=t;if("ref"in t){n={};for(var Ee in t)Ee!=="ref"&&(n[Ee]=t[Ee])}if(e=e.defaultProps){n===t&&(n=assign$3({},n));for(var Re in e)n[Re]===void 0&&(n[Re]=e[Re])}return n}function defaultOnUncaughtError(e){reportGlobalError(e)}function defaultOnCaughtError(e){console.error(e)}function defaultOnRecoverableError(e){reportGlobalError(e)}function logUncaughtError(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(Ee){setTimeout(function(){throw Ee})}}function logCaughtError(e,t,n){try{var Ee=e.onCaughtError;Ee(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(Re){setTimeout(function(){throw Re})}}function createRootErrorUpdate(e,t,n){return n=createUpdate(n),n.tag=3,n.payload={element:null},n.callback=function(){logUncaughtError(e,t)},n}function createClassErrorUpdate(e){return e=createUpdate(e),e.tag=3,e}function initializeClassErrorUpdate(e,t,n,Ee){var Re=n.type.getDerivedStateFromError;if(typeof Re=="function"){var Ce=Ee.value;e.payload=function(){return Re(Ce)},e.callback=function(){logCaughtError(t,n,Ee)}}var Te=n.stateNode;Te!==null&&typeof Te.componentDidCatch=="function"&&(e.callback=function(){logCaughtError(t,n,Ee),typeof Re!="function"&&(legacyErrorBoundariesThatAlreadyFailed===null?legacyErrorBoundariesThatAlreadyFailed=new Set([this]):legacyErrorBoundariesThatAlreadyFailed.add(this));var Me=Ee.stack;this.componentDidCatch(Ee.value,{componentStack:Me!==null?Me:""})})}function throwException(e,t,n,Ee,Re){if(n.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){if(t=n.alternate,t!==null&&propagateParentContextChanges(t,n,Re,!0),n=suspenseHandlerStackCursor.current,n!==null){switch(n.tag){case 31:case 13:return shellBoundary===null?renderDidSuspendDelayIfPossible():n.alternate===null&&workInProgressRootExitStatus===0&&(workInProgressRootExitStatus=3),n.flags&=-257,n.flags|=65536,n.lanes=Re,Ee===noopSuspenseyCommitThenable?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([Ee]):t.add(Ee),attachPingListener(e,Ee,Re)),!1;case 22:return n.flags|=65536,Ee===noopSuspenseyCommitThenable?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([Ee])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([Ee]):n.add(Ee)),attachPingListener(e,Ee,Re)),!1}throw Error(formatProdErrorMessage(435,n.tag))}return attachPingListener(e,Ee,Re),renderDidSuspendDelayIfPossible(),!1}if(isHydrating)return t=suspenseHandlerStackCursor.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=Re,Ee!==HydrationMismatchException&&(e=Error(formatProdErrorMessage(422),{cause:Ee}),queueHydrationError(createCapturedValueAtFiber(e,n)))):(Ee!==HydrationMismatchException&&(t=Error(formatProdErrorMessage(423),{cause:Ee}),queueHydrationError(createCapturedValueAtFiber(t,n))),e=e.current.alternate,e.flags|=65536,Re&=-Re,e.lanes|=Re,Ee=createCapturedValueAtFiber(Ee,n),Re=createRootErrorUpdate(e.stateNode,Ee,Re),enqueueCapturedUpdate(e,Re),workInProgressRootExitStatus!==4&&(workInProgressRootExitStatus=2)),!1;var Ce=Error(formatProdErrorMessage(520),{cause:Ee});if(Ce=createCapturedValueAtFiber(Ce,n),workInProgressRootConcurrentErrors===null?workInProgressRootConcurrentErrors=[Ce]:workInProgressRootConcurrentErrors.push(Ce),workInProgressRootExitStatus!==4&&(workInProgressRootExitStatus=2),t===null)return!0;Ee=createCapturedValueAtFiber(Ee,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=Re&-Re,n.lanes|=e,e=createRootErrorUpdate(n.stateNode,Ee,e),enqueueCapturedUpdate(n,e),!1;case 1:if(t=n.type,Ce=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||Ce!==null&&typeof Ce.componentDidCatch=="function"&&(legacyErrorBoundariesThatAlreadyFailed===null||!legacyErrorBoundariesThatAlreadyFailed.has(Ce))))return n.flags|=65536,Re&=-Re,n.lanes|=Re,Re=createClassErrorUpdate(Re),initializeClassErrorUpdate(Re,e,n,Ee),enqueueCapturedUpdate(n,Re),!1}n=n.return}while(n!==null);return!1}var SelectiveHydrationException=Error(formatProdErrorMessage(461)),didReceiveUpdate=!1;function reconcileChildren(e,t,n,Ee){t.child=e===null?mountChildFibers(t,null,n,Ee):reconcileChildFibers(t,e.child,n,Ee)}function updateForwardRef(e,t,n,Ee,Re){n=n.render;var Ce=t.ref;if("ref"in Ee){var Te={};for(var Me in Ee)Me!=="ref"&&(Te[Me]=Ee[Me])}else Te=Ee;return prepareToReadContext(t),Ee=renderWithHooks(e,t,n,Te,Ce,Re),Me=checkDidRenderIdHook(),e!==null&&!didReceiveUpdate?(bailoutHooks(e,t,Re),bailoutOnAlreadyFinishedWork(e,t,Re)):(isHydrating&&Me&&pushMaterializedTreeId(t),t.flags|=1,reconcileChildren(e,t,Ee,Re),t.child)}function updateMemoComponent(e,t,n,Ee,Re){if(e===null){var Ce=n.type;return typeof Ce=="function"&&!shouldConstruct(Ce)&&Ce.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=Ce,updateSimpleMemoComponent(e,t,Ce,Ee,Re)):(e=createFiberFromTypeAndProps(n.type,null,Ee,t,t.mode,Re),e.ref=t.ref,e.return=t,t.child=e)}if(Ce=e.child,!checkScheduledUpdateOrContext(e,Re)){var Te=Ce.memoizedProps;if(n=n.compare,n=n!==null?n:shallowEqual,n(Te,Ee)&&e.ref===t.ref)return bailoutOnAlreadyFinishedWork(e,t,Re)}return t.flags|=1,e=createWorkInProgress(Ce,Ee),e.ref=t.ref,e.return=t,t.child=e}function updateSimpleMemoComponent(e,t,n,Ee,Re){if(e!==null){var Ce=e.memoizedProps;if(shallowEqual(Ce,Ee)&&e.ref===t.ref)if(didReceiveUpdate=!1,t.pendingProps=Ee=Ce,checkScheduledUpdateOrContext(e,Re))e.flags&131072&&(didReceiveUpdate=!0);else return t.lanes=e.lanes,bailoutOnAlreadyFinishedWork(e,t,Re)}return updateFunctionComponent(e,t,n,Ee,Re)}function updateOffscreenComponent(e,t,n,Ee){var Re=Ee.children,Ce=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),Ee.mode==="hidden"){if(t.flags&128){if(Ce=Ce!==null?Ce.baseLanes|n:n,e!==null){for(Ee=t.child=e.child,Re=0;Ee!==null;)Re=Re|Ee.lanes|Ee.childLanes,Ee=Ee.sibling;Ee=Re&~Ce}else Ee=0,t.child=null;return deferHiddenOffscreenComponent(e,t,Ce,n,Ee)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&pushTransition(t,Ce!==null?Ce.cachePool:null),Ce!==null?pushHiddenContext(t,Ce):reuseHiddenContextOnStack(),pushOffscreenSuspenseHandler(t);else return Ee=t.lanes=536870912,deferHiddenOffscreenComponent(e,t,Ce!==null?Ce.baseLanes|n:n,n,Ee)}else Ce!==null?(pushTransition(t,Ce.cachePool),pushHiddenContext(t,Ce),reuseSuspenseHandlerOnStack(),t.memoizedState=null):(e!==null&&pushTransition(t,null),reuseHiddenContextOnStack(),reuseSuspenseHandlerOnStack());return reconcileChildren(e,t,Re,n),t.child}function bailoutOffscreenComponent(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function deferHiddenOffscreenComponent(e,t,n,Ee,Re){var Ce=peekCacheFromPool();return Ce=Ce===null?null:{parent:CacheContext._currentValue,pool:Ce},t.memoizedState={baseLanes:n,cachePool:Ce},e!==null&&pushTransition(t,null),reuseHiddenContextOnStack(),pushOffscreenSuspenseHandler(t),e!==null&&propagateParentContextChanges(e,t,Ee,!0),t.childLanes=Re,null}function mountActivityChildren(e,t){return t=mountWorkInProgressOffscreenFiber({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function retryActivityComponentWithoutHydrating(e,t,n){return reconcileChildFibers(t,e.child,null,n),e=mountActivityChildren(t,t.pendingProps),e.flags|=2,popSuspenseHandler(t),t.memoizedState=null,e}function updateActivityComponent(e,t,n){var Ee=t.pendingProps,Re=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(isHydrating){if(Ee.mode==="hidden")return e=mountActivityChildren(t,Ee),t.lanes=536870912,bailoutOffscreenComponent(null,e);if(pushDehydratedActivitySuspenseHandler(t),(e=nextHydratableInstance)?(e=canHydrateHydrationBoundary(e,rootOrSingletonContext),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:treeContextProvider!==null?{id:treeContextId,overflow:treeContextOverflow}:null,retryLane:536870912,hydrationErrors:null},n=createFiberFromDehydratedFragment(e),n.return=t,t.child=n,hydrationParentFiber=t,nextHydratableInstance=null)):e=null,e===null)throw throwOnHydrationMismatch(t);return t.lanes=536870912,null}return mountActivityChildren(t,Ee)}var Ce=e.memoizedState;if(Ce!==null){var Te=Ce.dehydrated;if(pushDehydratedActivitySuspenseHandler(t),Re)if(t.flags&256)t.flags&=-257,t=retryActivityComponentWithoutHydrating(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(formatProdErrorMessage(558));else if(didReceiveUpdate||propagateParentContextChanges(e,t,n,!1),Re=(n&e.childLanes)!==0,didReceiveUpdate||Re){if(Ee=workInProgressRoot,Ee!==null&&(Te=getBumpedLaneForHydration(Ee,n),Te!==0&&Te!==Ce.retryLane))throw Ce.retryLane=Te,enqueueConcurrentRenderForLane(e,Te),scheduleUpdateOnFiber(Ee,e,Te),SelectiveHydrationException;renderDidSuspendDelayIfPossible(),t=retryActivityComponentWithoutHydrating(e,t,n)}else e=Ce.treeContext,nextHydratableInstance=getNextHydratable(Te.nextSibling),hydrationParentFiber=t,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!1,e!==null&&restoreSuspendedTreeContext(t,e),t=mountActivityChildren(t,Ee),t.flags|=4096;return t}return e=createWorkInProgress(e.child,{mode:Ee.mode,children:Ee.children}),e.ref=t.ref,t.child=e,e.return=t,e}function markRef(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(formatProdErrorMessage(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function updateFunctionComponent(e,t,n,Ee,Re){return prepareToReadContext(t),n=renderWithHooks(e,t,n,Ee,void 0,Re),Ee=checkDidRenderIdHook(),e!==null&&!didReceiveUpdate?(bailoutHooks(e,t,Re),bailoutOnAlreadyFinishedWork(e,t,Re)):(isHydrating&&Ee&&pushMaterializedTreeId(t),t.flags|=1,reconcileChildren(e,t,n,Re),t.child)}function replayFunctionComponent(e,t,n,Ee,Re,Ce){return prepareToReadContext(t),t.updateQueue=null,n=renderWithHooksAgain(t,Ee,n,Re),finishRenderingHooks(e),Ee=checkDidRenderIdHook(),e!==null&&!didReceiveUpdate?(bailoutHooks(e,t,Ce),bailoutOnAlreadyFinishedWork(e,t,Ce)):(isHydrating&&Ee&&pushMaterializedTreeId(t),t.flags|=1,reconcileChildren(e,t,n,Ce),t.child)}function updateClassComponent(e,t,n,Ee,Re){if(prepareToReadContext(t),t.stateNode===null){var Ce=emptyContextObject,Te=n.contextType;typeof Te=="object"&&Te!==null&&(Ce=readContext(Te)),Ce=new n(Ee,Ce),t.memoizedState=Ce.state!==null&&Ce.state!==void 0?Ce.state:null,Ce.updater=classComponentUpdater,t.stateNode=Ce,Ce._reactInternals=t,Ce=t.stateNode,Ce.props=Ee,Ce.state=t.memoizedState,Ce.refs={},initializeUpdateQueue(t),Te=n.contextType,Ce.context=typeof Te=="object"&&Te!==null?readContext(Te):emptyContextObject,Ce.state=t.memoizedState,Te=n.getDerivedStateFromProps,typeof Te=="function"&&(applyDerivedStateFromProps(t,n,Te,Ee),Ce.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof Ce.getSnapshotBeforeUpdate=="function"||typeof Ce.UNSAFE_componentWillMount!="function"&&typeof Ce.componentWillMount!="function"||(Te=Ce.state,typeof Ce.componentWillMount=="function"&&Ce.componentWillMount(),typeof Ce.UNSAFE_componentWillMount=="function"&&Ce.UNSAFE_componentWillMount(),Te!==Ce.state&&classComponentUpdater.enqueueReplaceState(Ce,Ce.state,null),processUpdateQueue(t,Ee,Ce,Re),suspendIfUpdateReadFromEntangledAsyncAction(),Ce.state=t.memoizedState),typeof Ce.componentDidMount=="function"&&(t.flags|=4194308),Ee=!0}else if(e===null){Ce=t.stateNode;var Me=t.memoizedProps,De=resolveClassComponentProps(n,Me);Ce.props=De;var Oe=Ce.context,Be=n.contextType;Te=emptyContextObject,typeof Be=="object"&&Be!==null&&(Te=readContext(Be));var ze=n.getDerivedStateFromProps;Be=typeof ze=="function"||typeof Ce.getSnapshotBeforeUpdate=="function",Me=t.pendingProps!==Me,Be||typeof Ce.UNSAFE_componentWillReceiveProps!="function"&&typeof Ce.componentWillReceiveProps!="function"||(Me||Oe!==Te)&&callComponentWillReceiveProps(t,Ce,Ee,Te),hasForceUpdate=!1;var $e=t.memoizedState;Ce.state=$e,processUpdateQueue(t,Ee,Ce,Re),suspendIfUpdateReadFromEntangledAsyncAction(),Oe=t.memoizedState,Me||$e!==Oe||hasForceUpdate?(typeof ze=="function"&&(applyDerivedStateFromProps(t,n,ze,Ee),Oe=t.memoizedState),(De=hasForceUpdate||checkShouldComponentUpdate(t,n,De,Ee,$e,Oe,Te))?(Be||typeof Ce.UNSAFE_componentWillMount!="function"&&typeof Ce.componentWillMount!="function"||(typeof Ce.componentWillMount=="function"&&Ce.componentWillMount(),typeof Ce.UNSAFE_componentWillMount=="function"&&Ce.UNSAFE_componentWillMount()),typeof Ce.componentDidMount=="function"&&(t.flags|=4194308)):(typeof Ce.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=Ee,t.memoizedState=Oe),Ce.props=Ee,Ce.state=Oe,Ce.context=Te,Ee=De):(typeof Ce.componentDidMount=="function"&&(t.flags|=4194308),Ee=!1)}else{Ce=t.stateNode,cloneUpdateQueue(e,t),Te=t.memoizedProps,Be=resolveClassComponentProps(n,Te),Ce.props=Be,ze=t.pendingProps,$e=Ce.context,Oe=n.contextType,De=emptyContextObject,typeof Oe=="object"&&Oe!==null&&(De=readContext(Oe)),Me=n.getDerivedStateFromProps,(Oe=typeof Me=="function"||typeof Ce.getSnapshotBeforeUpdate=="function")||typeof Ce.UNSAFE_componentWillReceiveProps!="function"&&typeof Ce.componentWillReceiveProps!="function"||(Te!==ze||$e!==De)&&callComponentWillReceiveProps(t,Ce,Ee,De),hasForceUpdate=!1,$e=t.memoizedState,Ce.state=$e,processUpdateQueue(t,Ee,Ce,Re),suspendIfUpdateReadFromEntangledAsyncAction();var He=t.memoizedState;Te!==ze||$e!==He||hasForceUpdate||e!==null&&e.dependencies!==null&&checkIfContextChanged(e.dependencies)?(typeof Me=="function"&&(applyDerivedStateFromProps(t,n,Me,Ee),He=t.memoizedState),(Be=hasForceUpdate||checkShouldComponentUpdate(t,n,Be,Ee,$e,He,De)||e!==null&&e.dependencies!==null&&checkIfContextChanged(e.dependencies))?(Oe||typeof Ce.UNSAFE_componentWillUpdate!="function"&&typeof Ce.componentWillUpdate!="function"||(typeof Ce.componentWillUpdate=="function"&&Ce.componentWillUpdate(Ee,He,De),typeof Ce.UNSAFE_componentWillUpdate=="function"&&Ce.UNSAFE_componentWillUpdate(Ee,He,De)),typeof Ce.componentDidUpdate=="function"&&(t.flags|=4),typeof Ce.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof Ce.componentDidUpdate!="function"||Te===e.memoizedProps&&$e===e.memoizedState||(t.flags|=4),typeof Ce.getSnapshotBeforeUpdate!="function"||Te===e.memoizedProps&&$e===e.memoizedState||(t.flags|=1024),t.memoizedProps=Ee,t.memoizedState=He),Ce.props=Ee,Ce.state=He,Ce.context=De,Ee=Be):(typeof Ce.componentDidUpdate!="function"||Te===e.memoizedProps&&$e===e.memoizedState||(t.flags|=4),typeof Ce.getSnapshotBeforeUpdate!="function"||Te===e.memoizedProps&&$e===e.memoizedState||(t.flags|=1024),Ee=!1)}return Ce=Ee,markRef(e,t),Ee=(t.flags&128)!==0,Ce||Ee?(Ce=t.stateNode,n=Ee&&typeof n.getDerivedStateFromError!="function"?null:Ce.render(),t.flags|=1,e!==null&&Ee?(t.child=reconcileChildFibers(t,e.child,null,Re),t.child=reconcileChildFibers(t,null,n,Re)):reconcileChildren(e,t,n,Re),t.memoizedState=Ce.state,e=t.child):e=bailoutOnAlreadyFinishedWork(e,t,Re),e}function mountHostRootWithoutHydrating(e,t,n,Ee){return resetHydrationState(),t.flags|=256,reconcileChildren(e,t,n,Ee),t.child}var SUSPENDED_MARKER={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mountSuspenseOffscreenState(e){return{baseLanes:e,cachePool:getSuspendedCache()}}function getRemainingWorkInPrimaryTree(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=workInProgressDeferredLane),e}function updateSuspenseComponent(e,t,n){var Ee=t.pendingProps,Re=!1,Ce=(t.flags&128)!==0,Te;if((Te=Ce)||(Te=e!==null&&e.memoizedState===null?!1:(suspenseStackCursor.current&2)!==0),Te&&(Re=!0,t.flags&=-129),Te=(t.flags&32)!==0,t.flags&=-33,e===null){if(isHydrating){if(Re?pushPrimaryTreeSuspenseHandler(t):reuseSuspenseHandlerOnStack(),(e=nextHydratableInstance)?(e=canHydrateHydrationBoundary(e,rootOrSingletonContext),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:treeContextProvider!==null?{id:treeContextId,overflow:treeContextOverflow}:null,retryLane:536870912,hydrationErrors:null},n=createFiberFromDehydratedFragment(e),n.return=t,t.child=n,hydrationParentFiber=t,nextHydratableInstance=null)):e=null,e===null)throw throwOnHydrationMismatch(t);return isSuspenseInstanceFallback(e)?t.lanes=32:t.lanes=536870912,null}var Me=Ee.children;return Ee=Ee.fallback,Re?(reuseSuspenseHandlerOnStack(),Re=t.mode,Me=mountWorkInProgressOffscreenFiber({mode:"hidden",children:Me},Re),Ee=createFiberFromFragment(Ee,Re,n,null),Me.return=t,Ee.return=t,Me.sibling=Ee,t.child=Me,Ee=t.child,Ee.memoizedState=mountSuspenseOffscreenState(n),Ee.childLanes=getRemainingWorkInPrimaryTree(e,Te,n),t.memoizedState=SUSPENDED_MARKER,bailoutOffscreenComponent(null,Ee)):(pushPrimaryTreeSuspenseHandler(t),mountSuspensePrimaryChildren(t,Me))}var De=e.memoizedState;if(De!==null&&(Me=De.dehydrated,Me!==null)){if(Ce)t.flags&256?(pushPrimaryTreeSuspenseHandler(t),t.flags&=-257,t=retrySuspenseComponentWithoutHydrating(e,t,n)):t.memoizedState!==null?(reuseSuspenseHandlerOnStack(),t.child=e.child,t.flags|=128,t=null):(reuseSuspenseHandlerOnStack(),Me=Ee.fallback,Re=t.mode,Ee=mountWorkInProgressOffscreenFiber({mode:"visible",children:Ee.children},Re),Me=createFiberFromFragment(Me,Re,n,null),Me.flags|=2,Ee.return=t,Me.return=t,Ee.sibling=Me,t.child=Ee,reconcileChildFibers(t,e.child,null,n),Ee=t.child,Ee.memoizedState=mountSuspenseOffscreenState(n),Ee.childLanes=getRemainingWorkInPrimaryTree(e,Te,n),t.memoizedState=SUSPENDED_MARKER,t=bailoutOffscreenComponent(null,Ee));else if(pushPrimaryTreeSuspenseHandler(t),isSuspenseInstanceFallback(Me)){if(Te=Me.nextSibling&&Me.nextSibling.dataset,Te)var Oe=Te.dgst;Te=Oe,Ee=Error(formatProdErrorMessage(419)),Ee.stack="",Ee.digest=Te,queueHydrationError({value:Ee,source:null,stack:null}),t=retrySuspenseComponentWithoutHydrating(e,t,n)}else if(didReceiveUpdate||propagateParentContextChanges(e,t,n,!1),Te=(n&e.childLanes)!==0,didReceiveUpdate||Te){if(Te=workInProgressRoot,Te!==null&&(Ee=getBumpedLaneForHydration(Te,n),Ee!==0&&Ee!==De.retryLane))throw De.retryLane=Ee,enqueueConcurrentRenderForLane(e,Ee),scheduleUpdateOnFiber(Te,e,Ee),SelectiveHydrationException;isSuspenseInstancePending(Me)||renderDidSuspendDelayIfPossible(),t=retrySuspenseComponentWithoutHydrating(e,t,n)}else isSuspenseInstancePending(Me)?(t.flags|=192,t.child=e.child,t=null):(e=De.treeContext,nextHydratableInstance=getNextHydratable(Me.nextSibling),hydrationParentFiber=t,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!1,e!==null&&restoreSuspendedTreeContext(t,e),t=mountSuspensePrimaryChildren(t,Ee.children),t.flags|=4096);return t}return Re?(reuseSuspenseHandlerOnStack(),Me=Ee.fallback,Re=t.mode,De=e.child,Oe=De.sibling,Ee=createWorkInProgress(De,{mode:"hidden",children:Ee.children}),Ee.subtreeFlags=De.subtreeFlags&65011712,Oe!==null?Me=createWorkInProgress(Oe,Me):(Me=createFiberFromFragment(Me,Re,n,null),Me.flags|=2),Me.return=t,Ee.return=t,Ee.sibling=Me,t.child=Ee,bailoutOffscreenComponent(null,Ee),Ee=t.child,Me=e.child.memoizedState,Me===null?Me=mountSuspenseOffscreenState(n):(Re=Me.cachePool,Re!==null?(De=CacheContext._currentValue,Re=Re.parent!==De?{parent:De,pool:De}:Re):Re=getSuspendedCache(),Me={baseLanes:Me.baseLanes|n,cachePool:Re}),Ee.memoizedState=Me,Ee.childLanes=getRemainingWorkInPrimaryTree(e,Te,n),t.memoizedState=SUSPENDED_MARKER,bailoutOffscreenComponent(e.child,Ee)):(pushPrimaryTreeSuspenseHandler(t),n=e.child,e=n.sibling,n=createWorkInProgress(n,{mode:"visible",children:Ee.children}),n.return=t,n.sibling=null,e!==null&&(Te=t.deletions,Te===null?(t.deletions=[e],t.flags|=16):Te.push(e)),t.child=n,t.memoizedState=null,n)}function mountSuspensePrimaryChildren(e,t){return t=mountWorkInProgressOffscreenFiber({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function mountWorkInProgressOffscreenFiber(e,t){return e=createFiberImplClass(22,e,null,t),e.lanes=0,e}function retrySuspenseComponentWithoutHydrating(e,t,n){return reconcileChildFibers(t,e.child,null,n),e=mountSuspensePrimaryChildren(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function scheduleSuspenseWorkOnFiber(e,t,n){e.lanes|=t;var Ee=e.alternate;Ee!==null&&(Ee.lanes|=t),scheduleContextWorkOnParentPath(e.return,t,n)}function initSuspenseListRenderState(e,t,n,Ee,Re,Ce){var Te=e.memoizedState;Te===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:Ee,tail:n,tailMode:Re,treeForkCount:Ce}:(Te.isBackwards=t,Te.rendering=null,Te.renderingStartTime=0,Te.last=Ee,Te.tail=n,Te.tailMode=Re,Te.treeForkCount=Ce)}function updateSuspenseListComponent(e,t,n){var Ee=t.pendingProps,Re=Ee.revealOrder,Ce=Ee.tail;Ee=Ee.children;var Te=suspenseStackCursor.current,Me=(Te&2)!==0;if(Me?(Te=Te&1|2,t.flags|=128):Te&=1,push(suspenseStackCursor,Te),reconcileChildren(e,t,Ee,n),Ee=isHydrating?treeForkCount:0,!Me&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&scheduleSuspenseWorkOnFiber(e,n,t);else if(e.tag===19)scheduleSuspenseWorkOnFiber(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(Re){case"forwards":for(n=t.child,Re=null;n!==null;)e=n.alternate,e!==null&&findFirstSuspended(e)===null&&(Re=n),n=n.sibling;n=Re,n===null?(Re=t.child,t.child=null):(Re=n.sibling,n.sibling=null),initSuspenseListRenderState(t,!1,Re,n,Ce,Ee);break;case"backwards":case"unstable_legacy-backwards":for(n=null,Re=t.child,t.child=null;Re!==null;){if(e=Re.alternate,e!==null&&findFirstSuspended(e)===null){t.child=Re;break}e=Re.sibling,Re.sibling=n,n=Re,Re=e}initSuspenseListRenderState(t,!0,n,null,Ce,Ee);break;case"together":initSuspenseListRenderState(t,!1,null,null,void 0,Ee);break;default:t.memoizedState=null}return t.child}function bailoutOnAlreadyFinishedWork(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),workInProgressRootSkippedLanes|=t.lanes,!(n&t.childLanes))if(e!==null){if(propagateParentContextChanges(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(formatProdErrorMessage(153));if(t.child!==null){for(e=t.child,n=createWorkInProgress(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=createWorkInProgress(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function checkScheduledUpdateOrContext(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&checkIfContextChanged(e)))}function attemptEarlyBailoutIfNoScheduledUpdate(e,t,n){switch(t.tag){case 3:pushHostContainer(t,t.stateNode.containerInfo),pushProvider(t,CacheContext,e.memoizedState.cache),resetHydrationState();break;case 27:case 5:pushHostContext(t);break;case 4:pushHostContainer(t,t.stateNode.containerInfo);break;case 10:pushProvider(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,pushDehydratedActivitySuspenseHandler(t),null;break;case 13:var Ee=t.memoizedState;if(Ee!==null)return Ee.dehydrated!==null?(pushPrimaryTreeSuspenseHandler(t),t.flags|=128,null):n&t.child.childLanes?updateSuspenseComponent(e,t,n):(pushPrimaryTreeSuspenseHandler(t),e=bailoutOnAlreadyFinishedWork(e,t,n),e!==null?e.sibling:null);pushPrimaryTreeSuspenseHandler(t);break;case 19:var Re=(e.flags&128)!==0;if(Ee=(n&t.childLanes)!==0,Ee||(propagateParentContextChanges(e,t,n,!1),Ee=(n&t.childLanes)!==0),Re){if(Ee)return updateSuspenseListComponent(e,t,n);t.flags|=128}if(Re=t.memoizedState,Re!==null&&(Re.rendering=null,Re.tail=null,Re.lastEffect=null),push(suspenseStackCursor,suspenseStackCursor.current),Ee)break;return null;case 22:return t.lanes=0,updateOffscreenComponent(e,t,n,t.pendingProps);case 24:pushProvider(t,CacheContext,e.memoizedState.cache)}return bailoutOnAlreadyFinishedWork(e,t,n)}function beginWork(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)didReceiveUpdate=!0;else{if(!checkScheduledUpdateOrContext(e,n)&&!(t.flags&128))return didReceiveUpdate=!1,attemptEarlyBailoutIfNoScheduledUpdate(e,t,n);didReceiveUpdate=!!(e.flags&131072)}else didReceiveUpdate=!1,isHydrating&&t.flags&1048576&&pushTreeId(t,treeForkCount,t.index);switch(t.lanes=0,t.tag){case 16:e:{var Ee=t.pendingProps;if(e=resolveLazy(t.elementType),t.type=e,typeof e=="function")shouldConstruct(e)?(Ee=resolveClassComponentProps(e,Ee),t.tag=1,t=updateClassComponent(null,t,e,Ee,n)):(t.tag=0,t=updateFunctionComponent(null,t,e,Ee,n));else{if(e!=null){var Re=e.$$typeof;if(Re===REACT_FORWARD_REF_TYPE){t.tag=11,t=updateForwardRef(null,t,e,Ee,n);break e}else if(Re===REACT_MEMO_TYPE){t.tag=14,t=updateMemoComponent(null,t,e,Ee,n);break e}}throw t=getComponentNameFromType(e)||e,Error(formatProdErrorMessage(306,t,""))}}return t;case 0:return updateFunctionComponent(e,t,t.type,t.pendingProps,n);case 1:return Ee=t.type,Re=resolveClassComponentProps(Ee,t.pendingProps),updateClassComponent(e,t,Ee,Re,n);case 3:e:{if(pushHostContainer(t,t.stateNode.containerInfo),e===null)throw Error(formatProdErrorMessage(387));Ee=t.pendingProps;var Ce=t.memoizedState;Re=Ce.element,cloneUpdateQueue(e,t),processUpdateQueue(t,Ee,null,n);var Te=t.memoizedState;if(Ee=Te.cache,pushProvider(t,CacheContext,Ee),Ee!==Ce.cache&&propagateContextChanges(t,[CacheContext],n,!0),suspendIfUpdateReadFromEntangledAsyncAction(),Ee=Te.element,Ce.isDehydrated)if(Ce={element:Ee,isDehydrated:!1,cache:Te.cache},t.updateQueue.baseState=Ce,t.memoizedState=Ce,t.flags&256){t=mountHostRootWithoutHydrating(e,t,Ee,n);break e}else if(Ee!==Re){Re=createCapturedValueAtFiber(Error(formatProdErrorMessage(424)),t),queueHydrationError(Re),t=mountHostRootWithoutHydrating(e,t,Ee,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(nextHydratableInstance=getNextHydratable(e.firstChild),hydrationParentFiber=t,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!0,n=mountChildFibers(t,null,Ee,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(resetHydrationState(),Ee===Re){t=bailoutOnAlreadyFinishedWork(e,t,n);break e}reconcileChildren(e,t,Ee,n)}t=t.child}return t;case 26:return markRef(e,t),e===null?(n=getResource(t.type,null,t.pendingProps,null))?t.memoizedState=n:isHydrating||(n=t.type,e=t.pendingProps,Ee=getOwnerDocumentFromRootContainer(rootInstanceStackCursor.current).createElement(n),Ee[internalInstanceKey]=t,Ee[internalPropsKey]=e,setInitialProperties(Ee,n,e),markNodeAsHoistable(Ee),t.stateNode=Ee):t.memoizedState=getResource(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return pushHostContext(t),e===null&&isHydrating&&(Ee=t.stateNode=resolveSingletonInstance(t.type,t.pendingProps,rootInstanceStackCursor.current),hydrationParentFiber=t,rootOrSingletonContext=!0,Re=nextHydratableInstance,isSingletonScope(t.type)?(previousHydratableOnEnteringScopedSingleton=Re,nextHydratableInstance=getNextHydratable(Ee.firstChild)):nextHydratableInstance=Re),reconcileChildren(e,t,t.pendingProps.children,n),markRef(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&isHydrating&&((Re=Ee=nextHydratableInstance)&&(Ee=canHydrateInstance(Ee,t.type,t.pendingProps,rootOrSingletonContext),Ee!==null?(t.stateNode=Ee,hydrationParentFiber=t,nextHydratableInstance=getNextHydratable(Ee.firstChild),rootOrSingletonContext=!1,Re=!0):Re=!1),Re||throwOnHydrationMismatch(t)),pushHostContext(t),Re=t.type,Ce=t.pendingProps,Te=e!==null?e.memoizedProps:null,Ee=Ce.children,shouldSetTextContent(Re,Ce)?Ee=null:Te!==null&&shouldSetTextContent(Re,Te)&&(t.flags|=32),t.memoizedState!==null&&(Re=renderWithHooks(e,t,TransitionAwareHostComponent,null,null,n),HostTransitionContext._currentValue=Re),markRef(e,t),reconcileChildren(e,t,Ee,n),t.child;case 6:return e===null&&isHydrating&&((e=n=nextHydratableInstance)&&(n=canHydrateTextInstance(n,t.pendingProps,rootOrSingletonContext),n!==null?(t.stateNode=n,hydrationParentFiber=t,nextHydratableInstance=null,e=!0):e=!1),e||throwOnHydrationMismatch(t)),null;case 13:return updateSuspenseComponent(e,t,n);case 4:return pushHostContainer(t,t.stateNode.containerInfo),Ee=t.pendingProps,e===null?t.child=reconcileChildFibers(t,null,Ee,n):reconcileChildren(e,t,Ee,n),t.child;case 11:return updateForwardRef(e,t,t.type,t.pendingProps,n);case 7:return reconcileChildren(e,t,t.pendingProps,n),t.child;case 8:return reconcileChildren(e,t,t.pendingProps.children,n),t.child;case 12:return reconcileChildren(e,t,t.pendingProps.children,n),t.child;case 10:return Ee=t.pendingProps,pushProvider(t,t.type,Ee.value),reconcileChildren(e,t,Ee.children,n),t.child;case 9:return Re=t.type._context,Ee=t.pendingProps.children,prepareToReadContext(t),Re=readContext(Re),Ee=Ee(Re),t.flags|=1,reconcileChildren(e,t,Ee,n),t.child;case 14:return updateMemoComponent(e,t,t.type,t.pendingProps,n);case 15:return updateSimpleMemoComponent(e,t,t.type,t.pendingProps,n);case 19:return updateSuspenseListComponent(e,t,n);case 31:return updateActivityComponent(e,t,n);case 22:return updateOffscreenComponent(e,t,n,t.pendingProps);case 24:return prepareToReadContext(t),Ee=readContext(CacheContext),e===null?(Re=peekCacheFromPool(),Re===null&&(Re=workInProgressRoot,Ce=createCache(),Re.pooledCache=Ce,Ce.refCount++,Ce!==null&&(Re.pooledCacheLanes|=n),Re=Ce),t.memoizedState={parent:Ee,cache:Re},initializeUpdateQueue(t),pushProvider(t,CacheContext,Re)):(e.lanes&n&&(cloneUpdateQueue(e,t),processUpdateQueue(t,null,null,n),suspendIfUpdateReadFromEntangledAsyncAction()),Re=e.memoizedState,Ce=t.memoizedState,Re.parent!==Ee?(Re={parent:Ee,cache:Ee},t.memoizedState=Re,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=Re),pushProvider(t,CacheContext,Ee)):(Ee=Ce.cache,pushProvider(t,CacheContext,Ee),Ee!==Re.cache&&propagateContextChanges(t,[CacheContext],n,!0))),reconcileChildren(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(formatProdErrorMessage(156,t.tag))}function markUpdate(e){e.flags|=4}function preloadInstanceAndSuspendIfNeeded(e,t,n,Ee,Re){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(Re&335544128)===Re)if(e.stateNode.complete)e.flags|=8192;else if(shouldRemainOnPreviousScreen())e.flags|=8192;else throw suspendedThenable=noopSuspenseyCommitThenable,SuspenseyCommitException}else e.flags&=-16777217}function preloadResourceAndSuspendIfNeeded(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!preloadResource(t))if(shouldRemainOnPreviousScreen())e.flags|=8192;else throw suspendedThenable=noopSuspenseyCommitThenable,SuspenseyCommitException}function scheduleRetryEffect(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?claimNextRetryLane():536870912,e.lanes|=t,workInProgressSuspendedRetryLanes|=t)}function cutOffTailIfNeeded(e,t){if(!isHydrating)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var Ee=null;n!==null;)n.alternate!==null&&(Ee=n),n=n.sibling;Ee===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:Ee.sibling=null}}function bubbleProperties(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,Ee=0;if(t)for(var Re=e.child;Re!==null;)n|=Re.lanes|Re.childLanes,Ee|=Re.subtreeFlags&65011712,Ee|=Re.flags&65011712,Re.return=e,Re=Re.sibling;else for(Re=e.child;Re!==null;)n|=Re.lanes|Re.childLanes,Ee|=Re.subtreeFlags,Ee|=Re.flags,Re.return=e,Re=Re.sibling;return e.subtreeFlags|=Ee,e.childLanes=n,t}function completeWork(e,t,n){var Ee=t.pendingProps;switch(popTreeContext(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bubbleProperties(t),null;case 1:return bubbleProperties(t),null;case 3:return n=t.stateNode,Ee=null,e!==null&&(Ee=e.memoizedState.cache),t.memoizedState.cache!==Ee&&(t.flags|=2048),popProvider(CacheContext),popHostContainer(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(popHydrationState(t)?markUpdate(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,upgradeHydrationErrorsToRecoverable())),bubbleProperties(t),null;case 26:var Re=t.type,Ce=t.memoizedState;return e===null?(markUpdate(t),Ce!==null?(bubbleProperties(t),preloadResourceAndSuspendIfNeeded(t,Ce)):(bubbleProperties(t),preloadInstanceAndSuspendIfNeeded(t,Re,null,Ee,n))):Ce?Ce!==e.memoizedState?(markUpdate(t),bubbleProperties(t),preloadResourceAndSuspendIfNeeded(t,Ce)):(bubbleProperties(t),t.flags&=-16777217):(e=e.memoizedProps,e!==Ee&&markUpdate(t),bubbleProperties(t),preloadInstanceAndSuspendIfNeeded(t,Re,e,Ee,n)),null;case 27:if(popHostContext(t),n=rootInstanceStackCursor.current,Re=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==Ee&&markUpdate(t);else{if(!Ee){if(t.stateNode===null)throw Error(formatProdErrorMessage(166));return bubbleProperties(t),null}e=contextStackCursor.current,popHydrationState(t)?prepareToHydrateHostInstance(t):(e=resolveSingletonInstance(Re,Ee,n),t.stateNode=e,markUpdate(t))}return bubbleProperties(t),null;case 5:if(popHostContext(t),Re=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==Ee&&markUpdate(t);else{if(!Ee){if(t.stateNode===null)throw Error(formatProdErrorMessage(166));return bubbleProperties(t),null}if(Ce=contextStackCursor.current,popHydrationState(t))prepareToHydrateHostInstance(t);else{var Te=getOwnerDocumentFromRootContainer(rootInstanceStackCursor.current);switch(Ce){case 1:Ce=Te.createElementNS("http://www.w3.org/2000/svg",Re);break;case 2:Ce=Te.createElementNS("http://www.w3.org/1998/Math/MathML",Re);break;default:switch(Re){case"svg":Ce=Te.createElementNS("http://www.w3.org/2000/svg",Re);break;case"math":Ce=Te.createElementNS("http://www.w3.org/1998/Math/MathML",Re);break;case"script":Ce=Te.createElement("div"),Ce.innerHTML="<script><\/script>",Ce=Ce.removeChild(Ce.firstChild);break;case"select":Ce=typeof Ee.is=="string"?Te.createElement("select",{is:Ee.is}):Te.createElement("select"),Ee.multiple?Ce.multiple=!0:Ee.size&&(Ce.size=Ee.size);break;default:Ce=typeof Ee.is=="string"?Te.createElement(Re,{is:Ee.is}):Te.createElement(Re)}}Ce[internalInstanceKey]=t,Ce[internalPropsKey]=Ee;e:for(Te=t.child;Te!==null;){if(Te.tag===5||Te.tag===6)Ce.appendChild(Te.stateNode);else if(Te.tag!==4&&Te.tag!==27&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===t)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===t)break e;Te=Te.return}Te.sibling.return=Te.return,Te=Te.sibling}t.stateNode=Ce;e:switch(setInitialProperties(Ce,Re,Ee),Re){case"button":case"input":case"select":case"textarea":Ee=!!Ee.autoFocus;break e;case"img":Ee=!0;break e;default:Ee=!1}Ee&&markUpdate(t)}}return bubbleProperties(t),preloadInstanceAndSuspendIfNeeded(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==Ee&&markUpdate(t);else{if(typeof Ee!="string"&&t.stateNode===null)throw Error(formatProdErrorMessage(166));if(e=rootInstanceStackCursor.current,popHydrationState(t)){if(e=t.stateNode,n=t.memoizedProps,Ee=null,Re=hydrationParentFiber,Re!==null)switch(Re.tag){case 27:case 5:Ee=Re.memoizedProps}e[internalInstanceKey]=t,e=!!(e.nodeValue===n||Ee!==null&&Ee.suppressHydrationWarning===!0||checkForUnmatchedText(e.nodeValue,n)),e||throwOnHydrationMismatch(t,!0)}else e=getOwnerDocumentFromRootContainer(e).createTextNode(Ee),e[internalInstanceKey]=t,t.stateNode=e}return bubbleProperties(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(Ee=popHydrationState(t),n!==null){if(e===null){if(!Ee)throw Error(formatProdErrorMessage(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(formatProdErrorMessage(557));e[internalInstanceKey]=t}else resetHydrationState(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bubbleProperties(t),e=!1}else n=upgradeHydrationErrorsToRecoverable(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(popSuspenseHandler(t),t):(popSuspenseHandler(t),null);if(t.flags&128)throw Error(formatProdErrorMessage(558))}return bubbleProperties(t),null;case 13:if(Ee=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re=popHydrationState(t),Ee!==null&&Ee.dehydrated!==null){if(e===null){if(!Re)throw Error(formatProdErrorMessage(318));if(Re=t.memoizedState,Re=Re!==null?Re.dehydrated:null,!Re)throw Error(formatProdErrorMessage(317));Re[internalInstanceKey]=t}else resetHydrationState(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bubbleProperties(t),Re=!1}else Re=upgradeHydrationErrorsToRecoverable(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=Re),Re=!0;if(!Re)return t.flags&256?(popSuspenseHandler(t),t):(popSuspenseHandler(t),null)}return popSuspenseHandler(t),t.flags&128?(t.lanes=n,t):(n=Ee!==null,e=e!==null&&e.memoizedState!==null,n&&(Ee=t.child,Re=null,Ee.alternate!==null&&Ee.alternate.memoizedState!==null&&Ee.alternate.memoizedState.cachePool!==null&&(Re=Ee.alternate.memoizedState.cachePool.pool),Ce=null,Ee.memoizedState!==null&&Ee.memoizedState.cachePool!==null&&(Ce=Ee.memoizedState.cachePool.pool),Ce!==Re&&(Ee.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),scheduleRetryEffect(t,t.updateQueue),bubbleProperties(t),null);case 4:return popHostContainer(),e===null&&listenToAllSupportedEvents(t.stateNode.containerInfo),bubbleProperties(t),null;case 10:return popProvider(t.type),bubbleProperties(t),null;case 19:if(pop(suspenseStackCursor),Ee=t.memoizedState,Ee===null)return bubbleProperties(t),null;if(Re=(t.flags&128)!==0,Ce=Ee.rendering,Ce===null)if(Re)cutOffTailIfNeeded(Ee,!1);else{if(workInProgressRootExitStatus!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(Ce=findFirstSuspended(e),Ce!==null){for(t.flags|=128,cutOffTailIfNeeded(Ee,!1),e=Ce.updateQueue,t.updateQueue=e,scheduleRetryEffect(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)resetWorkInProgress(n,e),n=n.sibling;return push(suspenseStackCursor,suspenseStackCursor.current&1|2),isHydrating&&pushTreeFork(t,Ee.treeForkCount),t.child}e=e.sibling}Ee.tail!==null&&now()>workInProgressRootRenderTargetTime&&(t.flags|=128,Re=!0,cutOffTailIfNeeded(Ee,!1),t.lanes=4194304)}else{if(!Re)if(e=findFirstSuspended(Ce),e!==null){if(t.flags|=128,Re=!0,e=e.updateQueue,t.updateQueue=e,scheduleRetryEffect(t,e),cutOffTailIfNeeded(Ee,!0),Ee.tail===null&&Ee.tailMode==="hidden"&&!Ce.alternate&&!isHydrating)return bubbleProperties(t),null}else 2*now()-Ee.renderingStartTime>workInProgressRootRenderTargetTime&&n!==536870912&&(t.flags|=128,Re=!0,cutOffTailIfNeeded(Ee,!1),t.lanes=4194304);Ee.isBackwards?(Ce.sibling=t.child,t.child=Ce):(e=Ee.last,e!==null?e.sibling=Ce:t.child=Ce,Ee.last=Ce)}return Ee.tail!==null?(e=Ee.tail,Ee.rendering=e,Ee.tail=e.sibling,Ee.renderingStartTime=now(),e.sibling=null,n=suspenseStackCursor.current,push(suspenseStackCursor,Re?n&1|2:n&1),isHydrating&&pushTreeFork(t,Ee.treeForkCount),e):(bubbleProperties(t),null);case 22:case 23:return popSuspenseHandler(t),popHiddenContext(),Ee=t.memoizedState!==null,e!==null?e.memoizedState!==null!==Ee&&(t.flags|=8192):Ee&&(t.flags|=8192),Ee?n&536870912&&!(t.flags&128)&&(bubbleProperties(t),t.subtreeFlags&6&&(t.flags|=8192)):bubbleProperties(t),n=t.updateQueue,n!==null&&scheduleRetryEffect(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),Ee=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(Ee=t.memoizedState.cachePool.pool),Ee!==n&&(t.flags|=2048),e!==null&&pop(resumedCache),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),popProvider(CacheContext),bubbleProperties(t),null;case 25:return null;case 30:return null}throw Error(formatProdErrorMessage(156,t.tag))}function unwindWork(e,t){switch(popTreeContext(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return popProvider(CacheContext),popHostContainer(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return popHostContext(t),null;case 31:if(t.memoizedState!==null){if(popSuspenseHandler(t),t.alternate===null)throw Error(formatProdErrorMessage(340));resetHydrationState()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(popSuspenseHandler(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(formatProdErrorMessage(340));resetHydrationState()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pop(suspenseStackCursor),null;case 4:return popHostContainer(),null;case 10:return popProvider(t.type),null;case 22:case 23:return popSuspenseHandler(t),popHiddenContext(),e!==null&&pop(resumedCache),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return popProvider(CacheContext),null;case 25:return null;default:return null}}function unwindInterruptedWork(e,t){switch(popTreeContext(t),t.tag){case 3:popProvider(CacheContext),popHostContainer();break;case 26:case 27:case 5:popHostContext(t);break;case 4:popHostContainer();break;case 31:t.memoizedState!==null&&popSuspenseHandler(t);break;case 13:popSuspenseHandler(t);break;case 19:pop(suspenseStackCursor);break;case 10:popProvider(t.type);break;case 22:case 23:popSuspenseHandler(t),popHiddenContext(),e!==null&&pop(resumedCache);break;case 24:popProvider(CacheContext)}}function commitHookEffectListMount(e,t){try{var n=t.updateQueue,Ee=n!==null?n.lastEffect:null;if(Ee!==null){var Re=Ee.next;n=Re;do{if((n.tag&e)===e){Ee=void 0;var Ce=n.create,Te=n.inst;Ee=Ce(),Te.destroy=Ee}n=n.next}while(n!==Re)}}catch(Me){captureCommitPhaseError(t,t.return,Me)}}function commitHookEffectListUnmount(e,t,n){try{var Ee=t.updateQueue,Re=Ee!==null?Ee.lastEffect:null;if(Re!==null){var Ce=Re.next;Ee=Ce;do{if((Ee.tag&e)===e){var Te=Ee.inst,Me=Te.destroy;if(Me!==void 0){Te.destroy=void 0,Re=t;var De=n,Oe=Me;try{Oe()}catch(Be){captureCommitPhaseError(Re,De,Be)}}}Ee=Ee.next}while(Ee!==Ce)}}catch(Be){captureCommitPhaseError(t,t.return,Be)}}function commitClassCallbacks(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{commitCallbacks(t,n)}catch(Ee){captureCommitPhaseError(e,e.return,Ee)}}}function safelyCallComponentWillUnmount(e,t,n){n.props=resolveClassComponentProps(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(Ee){captureCommitPhaseError(e,t,Ee)}}function safelyAttachRef(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var Ee=e.stateNode;break;case 30:Ee=e.stateNode;break;default:Ee=e.stateNode}typeof n=="function"?e.refCleanup=n(Ee):n.current=Ee}}catch(Re){captureCommitPhaseError(e,t,Re)}}function safelyDetachRef(e,t){var n=e.ref,Ee=e.refCleanup;if(n!==null)if(typeof Ee=="function")try{Ee()}catch(Re){captureCommitPhaseError(e,t,Re)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(Re){captureCommitPhaseError(e,t,Re)}else n.current=null}function commitHostMount(e){var t=e.type,n=e.memoizedProps,Ee=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&Ee.focus();break e;case"img":n.src?Ee.src=n.src:n.srcSet&&(Ee.srcset=n.srcSet)}}catch(Re){captureCommitPhaseError(e,e.return,Re)}}function commitHostUpdate(e,t,n){try{var Ee=e.stateNode;updateProperties(Ee,e.type,n,t),Ee[internalPropsKey]=t}catch(Re){captureCommitPhaseError(e,e.return,Re)}}function isHostParent(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&isSingletonScope(e.type)||e.tag===4}function getHostSibling(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||isHostParent(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&isSingletonScope(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function insertOrAppendPlacementNodeIntoContainer(e,t,n){var Ee=e.tag;if(Ee===5||Ee===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=noop$1$1));else if(Ee!==4&&(Ee===27&&isSingletonScope(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(insertOrAppendPlacementNodeIntoContainer(e,t,n),e=e.sibling;e!==null;)insertOrAppendPlacementNodeIntoContainer(e,t,n),e=e.sibling}function insertOrAppendPlacementNode(e,t,n){var Ee=e.tag;if(Ee===5||Ee===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(Ee!==4&&(Ee===27&&isSingletonScope(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(insertOrAppendPlacementNode(e,t,n),e=e.sibling;e!==null;)insertOrAppendPlacementNode(e,t,n),e=e.sibling}function commitHostSingletonAcquisition(e){var t=e.stateNode,n=e.memoizedProps;try{for(var Ee=e.type,Re=t.attributes;Re.length;)t.removeAttributeNode(Re[0]);setInitialProperties(t,Ee,n),t[internalInstanceKey]=e,t[internalPropsKey]=n}catch(Ce){captureCommitPhaseError(e,e.return,Ce)}}var offscreenSubtreeIsHidden=!1,offscreenSubtreeWasHidden=!1,needsFormReset=!1,PossiblyWeakSet=typeof WeakSet=="function"?WeakSet:Set,nextEffect=null;function commitBeforeMutationEffects(e,t){if(e=e.containerInfo,eventsEnabled=_enabled,e=getActiveElementDeep(e),hasSelectionCapabilities(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var Ee=n.getSelection&&n.getSelection();if(Ee&&Ee.rangeCount!==0){n=Ee.anchorNode;var Re=Ee.anchorOffset,Ce=Ee.focusNode;Ee=Ee.focusOffset;try{n.nodeType,Ce.nodeType}catch{n=null;break e}var Te=0,Me=-1,De=-1,Oe=0,Be=0,ze=e,$e=null;t:for(;;){for(var He;ze!==n||Re!==0&&ze.nodeType!==3||(Me=Te+Re),ze!==Ce||Ee!==0&&ze.nodeType!==3||(De=Te+Ee),ze.nodeType===3&&(Te+=ze.nodeValue.length),(He=ze.firstChild)!==null;)$e=ze,ze=He;for(;;){if(ze===e)break t;if($e===n&&++Oe===Re&&(Me=Te),$e===Ce&&++Be===Ee&&(De=Te),(He=ze.nextSibling)!==null)break;ze=$e,$e=ze.parentNode}ze=He}n=Me===-1||De===-1?null:{start:Me,end:De}}else n=null}n=n||{start:0,end:0}}else n=null;for(selectionInformation={focusedElem:e,selectionRange:n},_enabled=!1,nextEffect=t;nextEffect!==null;)if(t=nextEffect,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nextEffect=e;else for(;nextEffect!==null;){switch(t=nextEffect,Ce=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)Re=e[n],Re.ref.impl=Re.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&Ce!==null){e=void 0,n=t,Re=Ce.memoizedProps,Ce=Ce.memoizedState,Ee=n.stateNode;try{var Ue=resolveClassComponentProps(n.type,Re);e=Ee.getSnapshotBeforeUpdate(Ue,Ce),Ee.__reactInternalSnapshotBeforeUpdate=e}catch(Ve){captureCommitPhaseError(n,n.return,Ve)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)clearContainerSparingly(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":clearContainerSparingly(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(formatProdErrorMessage(163))}if(e=t.sibling,e!==null){e.return=t.return,nextEffect=e;break}nextEffect=t.return}}function commitLayoutEffectOnFiber(e,t,n){var Ee=n.flags;switch(n.tag){case 0:case 11:case 15:recursivelyTraverseLayoutEffects(e,n),Ee&4&&commitHookEffectListMount(5,n);break;case 1:if(recursivelyTraverseLayoutEffects(e,n),Ee&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(Te){captureCommitPhaseError(n,n.return,Te)}else{var Re=resolveClassComponentProps(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(Re,t,e.__reactInternalSnapshotBeforeUpdate)}catch(Te){captureCommitPhaseError(n,n.return,Te)}}Ee&64&&commitClassCallbacks(n),Ee&512&&safelyAttachRef(n,n.return);break;case 3:if(recursivelyTraverseLayoutEffects(e,n),Ee&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{commitCallbacks(e,t)}catch(Te){captureCommitPhaseError(n,n.return,Te)}}break;case 27:t===null&&Ee&4&&commitHostSingletonAcquisition(n);case 26:case 5:recursivelyTraverseLayoutEffects(e,n),t===null&&Ee&4&&commitHostMount(n),Ee&512&&safelyAttachRef(n,n.return);break;case 12:recursivelyTraverseLayoutEffects(e,n);break;case 31:recursivelyTraverseLayoutEffects(e,n),Ee&4&&commitActivityHydrationCallbacks(e,n);break;case 13:recursivelyTraverseLayoutEffects(e,n),Ee&4&&commitSuspenseHydrationCallbacks(e,n),Ee&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=retryDehydratedSuspenseBoundary.bind(null,n),registerSuspenseInstanceRetry(e,n))));break;case 22:if(Ee=n.memoizedState!==null||offscreenSubtreeIsHidden,!Ee){t=t!==null&&t.memoizedState!==null||offscreenSubtreeWasHidden,Re=offscreenSubtreeIsHidden;var Ce=offscreenSubtreeWasHidden;offscreenSubtreeIsHidden=Ee,(offscreenSubtreeWasHidden=t)&&!Ce?recursivelyTraverseReappearLayoutEffects(e,n,(n.subtreeFlags&8772)!==0):recursivelyTraverseLayoutEffects(e,n),offscreenSubtreeIsHidden=Re,offscreenSubtreeWasHidden=Ce}break;case 30:break;default:recursivelyTraverseLayoutEffects(e,n)}}function detachFiberAfterEffects(e){var t=e.alternate;t!==null&&(e.alternate=null,detachFiberAfterEffects(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&detachDeletedInstance(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var hostParent=null,hostParentIsContainer=!1;function recursivelyTraverseDeletionEffects(e,t,n){for(n=n.child;n!==null;)commitDeletionEffectsOnFiber(e,t,n),n=n.sibling}function commitDeletionEffectsOnFiber(e,t,n){if(injectedHook&&typeof injectedHook.onCommitFiberUnmount=="function")try{injectedHook.onCommitFiberUnmount(rendererID,n)}catch{}switch(n.tag){case 26:offscreenSubtreeWasHidden||safelyDetachRef(n,t),recursivelyTraverseDeletionEffects(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:offscreenSubtreeWasHidden||safelyDetachRef(n,t);var Ee=hostParent,Re=hostParentIsContainer;isSingletonScope(n.type)&&(hostParent=n.stateNode,hostParentIsContainer=!1),recursivelyTraverseDeletionEffects(e,t,n),releaseSingletonInstance(n.stateNode),hostParent=Ee,hostParentIsContainer=Re;break;case 5:offscreenSubtreeWasHidden||safelyDetachRef(n,t);case 6:if(Ee=hostParent,Re=hostParentIsContainer,hostParent=null,recursivelyTraverseDeletionEffects(e,t,n),hostParent=Ee,hostParentIsContainer=Re,hostParent!==null)if(hostParentIsContainer)try{(hostParent.nodeType===9?hostParent.body:hostParent.nodeName==="HTML"?hostParent.ownerDocument.body:hostParent).removeChild(n.stateNode)}catch(Ce){captureCommitPhaseError(n,t,Ce)}else try{hostParent.removeChild(n.stateNode)}catch(Ce){captureCommitPhaseError(n,t,Ce)}break;case 18:hostParent!==null&&(hostParentIsContainer?(e=hostParent,clearHydrationBoundary(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),retryIfBlockedOn(e)):clearHydrationBoundary(hostParent,n.stateNode));break;case 4:Ee=hostParent,Re=hostParentIsContainer,hostParent=n.stateNode.containerInfo,hostParentIsContainer=!0,recursivelyTraverseDeletionEffects(e,t,n),hostParent=Ee,hostParentIsContainer=Re;break;case 0:case 11:case 14:case 15:commitHookEffectListUnmount(2,n,t),offscreenSubtreeWasHidden||commitHookEffectListUnmount(4,n,t),recursivelyTraverseDeletionEffects(e,t,n);break;case 1:offscreenSubtreeWasHidden||(safelyDetachRef(n,t),Ee=n.stateNode,typeof Ee.componentWillUnmount=="function"&&safelyCallComponentWillUnmount(n,t,Ee)),recursivelyTraverseDeletionEffects(e,t,n);break;case 21:recursivelyTraverseDeletionEffects(e,t,n);break;case 22:offscreenSubtreeWasHidden=(Ee=offscreenSubtreeWasHidden)||n.memoizedState!==null,recursivelyTraverseDeletionEffects(e,t,n),offscreenSubtreeWasHidden=Ee;break;default:recursivelyTraverseDeletionEffects(e,t,n)}}function commitActivityHydrationCallbacks(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{retryIfBlockedOn(e)}catch(n){captureCommitPhaseError(t,t.return,n)}}}function commitSuspenseHydrationCallbacks(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{retryIfBlockedOn(e)}catch(n){captureCommitPhaseError(t,t.return,n)}}function getRetryCache(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new PossiblyWeakSet),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new PossiblyWeakSet),t;default:throw Error(formatProdErrorMessage(435,e.tag))}}function attachSuspenseRetryListeners(e,t){var n=getRetryCache(e);t.forEach(function(Ee){if(!n.has(Ee)){n.add(Ee);var Re=resolveRetryWakeable.bind(null,e,Ee);Ee.then(Re,Re)}})}function recursivelyTraverseMutationEffects(e,t){var n=t.deletions;if(n!==null)for(var Ee=0;Ee<n.length;Ee++){var Re=n[Ee],Ce=e,Te=t,Me=Te;e:for(;Me!==null;){switch(Me.tag){case 27:if(isSingletonScope(Me.type)){hostParent=Me.stateNode,hostParentIsContainer=!1;break e}break;case 5:hostParent=Me.stateNode,hostParentIsContainer=!1;break e;case 3:case 4:hostParent=Me.stateNode.containerInfo,hostParentIsContainer=!0;break e}Me=Me.return}if(hostParent===null)throw Error(formatProdErrorMessage(160));commitDeletionEffectsOnFiber(Ce,Te,Re),hostParent=null,hostParentIsContainer=!1,Ce=Re.alternate,Ce!==null&&(Ce.return=null),Re.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)commitMutationEffectsOnFiber(t,e),t=t.sibling}var currentHoistableRoot=null;function commitMutationEffectsOnFiber(e,t){var n=e.alternate,Ee=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e),Ee&4&&(commitHookEffectListUnmount(3,e,e.return),commitHookEffectListMount(3,e),commitHookEffectListUnmount(5,e,e.return));break;case 1:recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e),Ee&512&&(offscreenSubtreeWasHidden||n===null||safelyDetachRef(n,n.return)),Ee&64&&offscreenSubtreeIsHidden&&(e=e.updateQueue,e!==null&&(Ee=e.callbacks,Ee!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?Ee:n.concat(Ee))));break;case 26:var Re=currentHoistableRoot;if(recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e),Ee&512&&(offscreenSubtreeWasHidden||n===null||safelyDetachRef(n,n.return)),Ee&4){var Ce=n!==null?n.memoizedState:null;if(Ee=e.memoizedState,n===null)if(Ee===null)if(e.stateNode===null){e:{Ee=e.type,n=e.memoizedProps,Re=Re.ownerDocument||Re;t:switch(Ee){case"title":Ce=Re.getElementsByTagName("title")[0],(!Ce||Ce[internalHoistableMarker]||Ce[internalInstanceKey]||Ce.namespaceURI==="http://www.w3.org/2000/svg"||Ce.hasAttribute("itemprop"))&&(Ce=Re.createElement(Ee),Re.head.insertBefore(Ce,Re.querySelector("head > title"))),setInitialProperties(Ce,Ee,n),Ce[internalInstanceKey]=e,markNodeAsHoistable(Ce),Ee=Ce;break e;case"link":var Te=getHydratableHoistableCache("link","href",Re).get(Ee+(n.href||""));if(Te){for(var Me=0;Me<Te.length;Me++)if(Ce=Te[Me],Ce.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&Ce.getAttribute("rel")===(n.rel==null?null:n.rel)&&Ce.getAttribute("title")===(n.title==null?null:n.title)&&Ce.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){Te.splice(Me,1);break t}}Ce=Re.createElement(Ee),setInitialProperties(Ce,Ee,n),Re.head.appendChild(Ce);break;case"meta":if(Te=getHydratableHoistableCache("meta","content",Re).get(Ee+(n.content||""))){for(Me=0;Me<Te.length;Me++)if(Ce=Te[Me],Ce.getAttribute("content")===(n.content==null?null:""+n.content)&&Ce.getAttribute("name")===(n.name==null?null:n.name)&&Ce.getAttribute("property")===(n.property==null?null:n.property)&&Ce.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&Ce.getAttribute("charset")===(n.charSet==null?null:n.charSet)){Te.splice(Me,1);break t}}Ce=Re.createElement(Ee),setInitialProperties(Ce,Ee,n),Re.head.appendChild(Ce);break;default:throw Error(formatProdErrorMessage(468,Ee))}Ce[internalInstanceKey]=e,markNodeAsHoistable(Ce),Ee=Ce}e.stateNode=Ee}else mountHoistable(Re,e.type,e.stateNode);else e.stateNode=acquireResource(Re,Ee,e.memoizedProps);else Ce!==Ee?(Ce===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):Ce.count--,Ee===null?mountHoistable(Re,e.type,e.stateNode):acquireResource(Re,Ee,e.memoizedProps)):Ee===null&&e.stateNode!==null&&commitHostUpdate(e,e.memoizedProps,n.memoizedProps)}break;case 27:recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e),Ee&512&&(offscreenSubtreeWasHidden||n===null||safelyDetachRef(n,n.return)),n!==null&&Ee&4&&commitHostUpdate(e,e.memoizedProps,n.memoizedProps);break;case 5:if(recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e),Ee&512&&(offscreenSubtreeWasHidden||n===null||safelyDetachRef(n,n.return)),e.flags&32){Re=e.stateNode;try{setTextContent(Re,"")}catch(Ue){captureCommitPhaseError(e,e.return,Ue)}}Ee&4&&e.stateNode!=null&&(Re=e.memoizedProps,commitHostUpdate(e,Re,n!==null?n.memoizedProps:Re)),Ee&1024&&(needsFormReset=!0);break;case 6:if(recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e),Ee&4){if(e.stateNode===null)throw Error(formatProdErrorMessage(162));Ee=e.memoizedProps,n=e.stateNode;try{n.nodeValue=Ee}catch(Ue){captureCommitPhaseError(e,e.return,Ue)}}break;case 3:if(tagCaches=null,Re=currentHoistableRoot,currentHoistableRoot=getHoistableRoot(t.containerInfo),recursivelyTraverseMutationEffects(t,e),currentHoistableRoot=Re,commitReconciliationEffects(e),Ee&4&&n!==null&&n.memoizedState.isDehydrated)try{retryIfBlockedOn(t.containerInfo)}catch(Ue){captureCommitPhaseError(e,e.return,Ue)}needsFormReset&&(needsFormReset=!1,recursivelyResetForms(e));break;case 4:Ee=currentHoistableRoot,currentHoistableRoot=getHoistableRoot(e.stateNode.containerInfo),recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e),currentHoistableRoot=Ee;break;case 12:recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e);break;case 31:recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e),Ee&4&&(Ee=e.updateQueue,Ee!==null&&(e.updateQueue=null,attachSuspenseRetryListeners(e,Ee)));break;case 13:recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(globalMostRecentFallbackTime=now()),Ee&4&&(Ee=e.updateQueue,Ee!==null&&(e.updateQueue=null,attachSuspenseRetryListeners(e,Ee)));break;case 22:Re=e.memoizedState!==null;var De=n!==null&&n.memoizedState!==null,Oe=offscreenSubtreeIsHidden,Be=offscreenSubtreeWasHidden;if(offscreenSubtreeIsHidden=Oe||Re,offscreenSubtreeWasHidden=Be||De,recursivelyTraverseMutationEffects(t,e),offscreenSubtreeWasHidden=Be,offscreenSubtreeIsHidden=Oe,commitReconciliationEffects(e),Ee&8192)e:for(t=e.stateNode,t._visibility=Re?t._visibility&-2:t._visibility|1,Re&&(n===null||De||offscreenSubtreeIsHidden||offscreenSubtreeWasHidden||recursivelyTraverseDisappearLayoutEffects(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){De=n=t;try{if(Ce=De.stateNode,Re)Te=Ce.style,typeof Te.setProperty=="function"?Te.setProperty("display","none","important"):Te.display="none";else{Me=De.stateNode;var ze=De.memoizedProps.style,$e=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;Me.style.display=$e==null||typeof $e=="boolean"?"":(""+$e).trim()}}catch(Ue){captureCommitPhaseError(De,De.return,Ue)}}}else if(t.tag===6){if(n===null){De=t;try{De.stateNode.nodeValue=Re?"":De.memoizedProps}catch(Ue){captureCommitPhaseError(De,De.return,Ue)}}}else if(t.tag===18){if(n===null){De=t;try{var He=De.stateNode;Re?hideOrUnhideDehydratedBoundary(He,!0):hideOrUnhideDehydratedBoundary(De.stateNode,!1)}catch(Ue){captureCommitPhaseError(De,De.return,Ue)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}Ee&4&&(Ee=e.updateQueue,Ee!==null&&(n=Ee.retryQueue,n!==null&&(Ee.retryQueue=null,attachSuspenseRetryListeners(e,n))));break;case 19:recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e),Ee&4&&(Ee=e.updateQueue,Ee!==null&&(e.updateQueue=null,attachSuspenseRetryListeners(e,Ee)));break;case 30:break;case 21:break;default:recursivelyTraverseMutationEffects(t,e),commitReconciliationEffects(e)}}function commitReconciliationEffects(e){var t=e.flags;if(t&2){try{for(var n,Ee=e.return;Ee!==null;){if(isHostParent(Ee)){n=Ee;break}Ee=Ee.return}if(n==null)throw Error(formatProdErrorMessage(160));switch(n.tag){case 27:var Re=n.stateNode,Ce=getHostSibling(e);insertOrAppendPlacementNode(e,Ce,Re);break;case 5:var Te=n.stateNode;n.flags&32&&(setTextContent(Te,""),n.flags&=-33);var Me=getHostSibling(e);insertOrAppendPlacementNode(e,Me,Te);break;case 3:case 4:var De=n.stateNode.containerInfo,Oe=getHostSibling(e);insertOrAppendPlacementNodeIntoContainer(e,Oe,De);break;default:throw Error(formatProdErrorMessage(161))}}catch(Be){captureCommitPhaseError(e,e.return,Be)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function recursivelyResetForms(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;recursivelyResetForms(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function recursivelyTraverseLayoutEffects(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)commitLayoutEffectOnFiber(e,t.alternate,t),t=t.sibling}function recursivelyTraverseDisappearLayoutEffects(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:commitHookEffectListUnmount(4,t,t.return),recursivelyTraverseDisappearLayoutEffects(t);break;case 1:safelyDetachRef(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&safelyCallComponentWillUnmount(t,t.return,n),recursivelyTraverseDisappearLayoutEffects(t);break;case 27:releaseSingletonInstance(t.stateNode);case 26:case 5:safelyDetachRef(t,t.return),recursivelyTraverseDisappearLayoutEffects(t);break;case 22:t.memoizedState===null&&recursivelyTraverseDisappearLayoutEffects(t);break;case 30:recursivelyTraverseDisappearLayoutEffects(t);break;default:recursivelyTraverseDisappearLayoutEffects(t)}e=e.sibling}}function recursivelyTraverseReappearLayoutEffects(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var Ee=t.alternate,Re=e,Ce=t,Te=Ce.flags;switch(Ce.tag){case 0:case 11:case 15:recursivelyTraverseReappearLayoutEffects(Re,Ce,n),commitHookEffectListMount(4,Ce);break;case 1:if(recursivelyTraverseReappearLayoutEffects(Re,Ce,n),Ee=Ce,Re=Ee.stateNode,typeof Re.componentDidMount=="function")try{Re.componentDidMount()}catch(Oe){captureCommitPhaseError(Ee,Ee.return,Oe)}if(Ee=Ce,Re=Ee.updateQueue,Re!==null){var Me=Ee.stateNode;try{var De=Re.shared.hiddenCallbacks;if(De!==null)for(Re.shared.hiddenCallbacks=null,Re=0;Re<De.length;Re++)callCallback(De[Re],Me)}catch(Oe){captureCommitPhaseError(Ee,Ee.return,Oe)}}n&&Te&64&&commitClassCallbacks(Ce),safelyAttachRef(Ce,Ce.return);break;case 27:commitHostSingletonAcquisition(Ce);case 26:case 5:recursivelyTraverseReappearLayoutEffects(Re,Ce,n),n&&Ee===null&&Te&4&&commitHostMount(Ce),safelyAttachRef(Ce,Ce.return);break;case 12:recursivelyTraverseReappearLayoutEffects(Re,Ce,n);break;case 31:recursivelyTraverseReappearLayoutEffects(Re,Ce,n),n&&Te&4&&commitActivityHydrationCallbacks(Re,Ce);break;case 13:recursivelyTraverseReappearLayoutEffects(Re,Ce,n),n&&Te&4&&commitSuspenseHydrationCallbacks(Re,Ce);break;case 22:Ce.memoizedState===null&&recursivelyTraverseReappearLayoutEffects(Re,Ce,n),safelyAttachRef(Ce,Ce.return);break;case 30:break;default:recursivelyTraverseReappearLayoutEffects(Re,Ce,n)}t=t.sibling}}function commitOffscreenPassiveMountEffects(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&releaseCache(n))}function commitCachePassiveMountEffect(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&releaseCache(e))}function recursivelyTraversePassiveMountEffects(e,t,n,Ee){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)commitPassiveMountOnFiber(e,t,n,Ee),t=t.sibling}function commitPassiveMountOnFiber(e,t,n,Ee){var Re=t.flags;switch(t.tag){case 0:case 11:case 15:recursivelyTraversePassiveMountEffects(e,t,n,Ee),Re&2048&&commitHookEffectListMount(9,t);break;case 1:recursivelyTraversePassiveMountEffects(e,t,n,Ee);break;case 3:recursivelyTraversePassiveMountEffects(e,t,n,Ee),Re&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&releaseCache(e)));break;case 12:if(Re&2048){recursivelyTraversePassiveMountEffects(e,t,n,Ee),e=t.stateNode;try{var Ce=t.memoizedProps,Te=Ce.id,Me=Ce.onPostCommit;typeof Me=="function"&&Me(Te,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(De){captureCommitPhaseError(t,t.return,De)}}else recursivelyTraversePassiveMountEffects(e,t,n,Ee);break;case 31:recursivelyTraversePassiveMountEffects(e,t,n,Ee);break;case 13:recursivelyTraversePassiveMountEffects(e,t,n,Ee);break;case 23:break;case 22:Ce=t.stateNode,Te=t.alternate,t.memoizedState!==null?Ce._visibility&2?recursivelyTraversePassiveMountEffects(e,t,n,Ee):recursivelyTraverseAtomicPassiveEffects(e,t):Ce._visibility&2?recursivelyTraversePassiveMountEffects(e,t,n,Ee):(Ce._visibility|=2,recursivelyTraverseReconnectPassiveEffects(e,t,n,Ee,(t.subtreeFlags&10256)!==0||!1)),Re&2048&&commitOffscreenPassiveMountEffects(Te,t);break;case 24:recursivelyTraversePassiveMountEffects(e,t,n,Ee),Re&2048&&commitCachePassiveMountEffect(t.alternate,t);break;default:recursivelyTraversePassiveMountEffects(e,t,n,Ee)}}function recursivelyTraverseReconnectPassiveEffects(e,t,n,Ee,Re){for(Re=Re&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var Ce=e,Te=t,Me=n,De=Ee,Oe=Te.flags;switch(Te.tag){case 0:case 11:case 15:recursivelyTraverseReconnectPassiveEffects(Ce,Te,Me,De,Re),commitHookEffectListMount(8,Te);break;case 23:break;case 22:var Be=Te.stateNode;Te.memoizedState!==null?Be._visibility&2?recursivelyTraverseReconnectPassiveEffects(Ce,Te,Me,De,Re):recursivelyTraverseAtomicPassiveEffects(Ce,Te):(Be._visibility|=2,recursivelyTraverseReconnectPassiveEffects(Ce,Te,Me,De,Re)),Re&&Oe&2048&&commitOffscreenPassiveMountEffects(Te.alternate,Te);break;case 24:recursivelyTraverseReconnectPassiveEffects(Ce,Te,Me,De,Re),Re&&Oe&2048&&commitCachePassiveMountEffect(Te.alternate,Te);break;default:recursivelyTraverseReconnectPassiveEffects(Ce,Te,Me,De,Re)}t=t.sibling}}function recursivelyTraverseAtomicPassiveEffects(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,Ee=t,Re=Ee.flags;switch(Ee.tag){case 22:recursivelyTraverseAtomicPassiveEffects(n,Ee),Re&2048&&commitOffscreenPassiveMountEffects(Ee.alternate,Ee);break;case 24:recursivelyTraverseAtomicPassiveEffects(n,Ee),Re&2048&&commitCachePassiveMountEffect(Ee.alternate,Ee);break;default:recursivelyTraverseAtomicPassiveEffects(n,Ee)}t=t.sibling}}var suspenseyCommitFlag=8192;function recursivelyAccumulateSuspenseyCommit(e,t,n){if(e.subtreeFlags&suspenseyCommitFlag)for(e=e.child;e!==null;)accumulateSuspenseyCommitOnFiber(e,t,n),e=e.sibling}function accumulateSuspenseyCommitOnFiber(e,t,n){switch(e.tag){case 26:recursivelyAccumulateSuspenseyCommit(e,t,n),e.flags&suspenseyCommitFlag&&e.memoizedState!==null&&suspendResource(n,currentHoistableRoot,e.memoizedState,e.memoizedProps);break;case 5:recursivelyAccumulateSuspenseyCommit(e,t,n);break;case 3:case 4:var Ee=currentHoistableRoot;currentHoistableRoot=getHoistableRoot(e.stateNode.containerInfo),recursivelyAccumulateSuspenseyCommit(e,t,n),currentHoistableRoot=Ee;break;case 22:e.memoizedState===null&&(Ee=e.alternate,Ee!==null&&Ee.memoizedState!==null?(Ee=suspenseyCommitFlag,suspenseyCommitFlag=16777216,recursivelyAccumulateSuspenseyCommit(e,t,n),suspenseyCommitFlag=Ee):recursivelyAccumulateSuspenseyCommit(e,t,n));break;default:recursivelyAccumulateSuspenseyCommit(e,t,n)}}function detachAlternateSiblings(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function recursivelyTraversePassiveUnmountEffects(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var Ee=t[n];nextEffect=Ee,commitPassiveUnmountEffectsInsideOfDeletedTree_begin(Ee,e)}detachAlternateSiblings(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)commitPassiveUnmountOnFiber(e),e=e.sibling}function commitPassiveUnmountOnFiber(e){switch(e.tag){case 0:case 11:case 15:recursivelyTraversePassiveUnmountEffects(e),e.flags&2048&&commitHookEffectListUnmount(9,e,e.return);break;case 3:recursivelyTraversePassiveUnmountEffects(e);break;case 12:recursivelyTraversePassiveUnmountEffects(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,recursivelyTraverseDisconnectPassiveEffects(e)):recursivelyTraversePassiveUnmountEffects(e);break;default:recursivelyTraversePassiveUnmountEffects(e)}}function recursivelyTraverseDisconnectPassiveEffects(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var Ee=t[n];nextEffect=Ee,commitPassiveUnmountEffectsInsideOfDeletedTree_begin(Ee,e)}detachAlternateSiblings(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:commitHookEffectListUnmount(8,t,t.return),recursivelyTraverseDisconnectPassiveEffects(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,recursivelyTraverseDisconnectPassiveEffects(t));break;default:recursivelyTraverseDisconnectPassiveEffects(t)}e=e.sibling}}function commitPassiveUnmountEffectsInsideOfDeletedTree_begin(e,t){for(;nextEffect!==null;){var n=nextEffect;switch(n.tag){case 0:case 11:case 15:commitHookEffectListUnmount(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var Ee=n.memoizedState.cachePool.pool;Ee!=null&&Ee.refCount++}break;case 24:releaseCache(n.memoizedState.cache)}if(Ee=n.child,Ee!==null)Ee.return=n,nextEffect=Ee;else e:for(n=e;nextEffect!==null;){Ee=nextEffect;var Re=Ee.sibling,Ce=Ee.return;if(detachFiberAfterEffects(Ee),Ee===n){nextEffect=null;break e}if(Re!==null){Re.return=Ce,nextEffect=Re;break e}nextEffect=Ce}}}var DefaultAsyncDispatcher={getCacheForType:function(e){var t=readContext(CacheContext),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return readContext(CacheContext).controller.signal}},PossiblyWeakMap=typeof WeakMap=="function"?WeakMap:Map,executionContext=0,workInProgressRoot=null,workInProgress=null,workInProgressRootRenderLanes=0,workInProgressSuspendedReason=0,workInProgressThrownValue=null,workInProgressRootDidSkipSuspendedSiblings=!1,workInProgressRootIsPrerendering=!1,workInProgressRootDidAttachPingListener=!1,entangledRenderLanes=0,workInProgressRootExitStatus=0,workInProgressRootSkippedLanes=0,workInProgressRootInterleavedUpdatedLanes=0,workInProgressRootPingedLanes=0,workInProgressDeferredLane=0,workInProgressSuspendedRetryLanes=0,workInProgressRootConcurrentErrors=null,workInProgressRootRecoverableErrors=null,workInProgressRootDidIncludeRecursiveRenderUpdate=!1,globalMostRecentFallbackTime=0,globalMostRecentTransitionTime=0,workInProgressRootRenderTargetTime=1/0,workInProgressTransitions=null,legacyErrorBoundariesThatAlreadyFailed=null,pendingEffectsStatus=0,pendingEffectsRoot=null,pendingFinishedWork=null,pendingEffectsLanes=0,pendingEffectsRemainingLanes=0,pendingPassiveTransitions=null,pendingRecoverableErrors=null,nestedUpdateCount=0,rootWithNestedUpdates=null;function requestUpdateLane(){return executionContext&2&&workInProgressRootRenderLanes!==0?workInProgressRootRenderLanes&-workInProgressRootRenderLanes:ReactSharedInternals.T!==null?requestTransitionLane():resolveUpdatePriority()}function requestDeferredLane(){if(workInProgressDeferredLane===0)if(!(workInProgressRootRenderLanes&536870912)||isHydrating){var e=nextTransitionDeferredLane;nextTransitionDeferredLane<<=1,!(nextTransitionDeferredLane&3932160)&&(nextTransitionDeferredLane=262144),workInProgressDeferredLane=e}else workInProgressDeferredLane=536870912;return e=suspenseHandlerStackCursor.current,e!==null&&(e.flags|=32),workInProgressDeferredLane}function scheduleUpdateOnFiber(e,t,n){(e===workInProgressRoot&&(workInProgressSuspendedReason===2||workInProgressSuspendedReason===9)||e.cancelPendingCommit!==null)&&(prepareFreshStack(e,0),markRootSuspended(e,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)),markRootUpdated$1(e,n),(!(executionContext&2)||e!==workInProgressRoot)&&(e===workInProgressRoot&&(!(executionContext&2)&&(workInProgressRootInterleavedUpdatedLanes|=n),workInProgressRootExitStatus===4&&markRootSuspended(e,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)),ensureRootIsScheduled(e))}function performWorkOnRoot(e,t,n){if(executionContext&6)throw Error(formatProdErrorMessage(327));var Ee=!n&&(t&127)===0&&(t&e.expiredLanes)===0||checkIfRootIsPrerendering(e,t),Re=Ee?renderRootConcurrent(e,t):renderRootSync(e,t,!0),Ce=Ee;do{if(Re===0){workInProgressRootIsPrerendering&&!Ee&&markRootSuspended(e,t,0,!1);break}else{if(n=e.current.alternate,Ce&&!isRenderConsistentWithExternalStores(n)){Re=renderRootSync(e,t,!1),Ce=!1;continue}if(Re===2){if(Ce=t,e.errorRecoveryDisabledLanes&Ce)var Te=0;else Te=e.pendingLanes&-536870913,Te=Te!==0?Te:Te&536870912?536870912:0;if(Te!==0){t=Te;e:{var Me=e;Re=workInProgressRootConcurrentErrors;var De=Me.current.memoizedState.isDehydrated;if(De&&(prepareFreshStack(Me,Te).flags|=256),Te=renderRootSync(Me,Te,!1),Te!==2){if(workInProgressRootDidAttachPingListener&&!De){Me.errorRecoveryDisabledLanes|=Ce,workInProgressRootInterleavedUpdatedLanes|=Ce,Re=4;break e}Ce=workInProgressRootRecoverableErrors,workInProgressRootRecoverableErrors=Re,Ce!==null&&(workInProgressRootRecoverableErrors===null?workInProgressRootRecoverableErrors=Ce:workInProgressRootRecoverableErrors.push.apply(workInProgressRootRecoverableErrors,Ce))}Re=Te}if(Ce=!1,Re!==2)continue}}if(Re===1){prepareFreshStack(e,0),markRootSuspended(e,t,0,!0);break}e:{switch(Ee=e,Ce=Re,Ce){case 0:case 1:throw Error(formatProdErrorMessage(345));case 4:if((t&4194048)!==t)break;case 6:markRootSuspended(Ee,t,workInProgressDeferredLane,!workInProgressRootDidSkipSuspendedSiblings);break e;case 2:workInProgressRootRecoverableErrors=null;break;case 3:case 5:break;default:throw Error(formatProdErrorMessage(329))}if((t&62914560)===t&&(Re=globalMostRecentFallbackTime+300-now(),10<Re)){if(markRootSuspended(Ee,t,workInProgressDeferredLane,!workInProgressRootDidSkipSuspendedSiblings),getNextLanes(Ee,0,!0)!==0)break e;pendingEffectsLanes=t,Ee.timeoutHandle=scheduleTimeout(commitRootWhenReady.bind(null,Ee,n,workInProgressRootRecoverableErrors,workInProgressTransitions,workInProgressRootDidIncludeRecursiveRenderUpdate,t,workInProgressDeferredLane,workInProgressRootInterleavedUpdatedLanes,workInProgressSuspendedRetryLanes,workInProgressRootDidSkipSuspendedSiblings,Ce,"Throttled",-0,0),Re);break e}commitRootWhenReady(Ee,n,workInProgressRootRecoverableErrors,workInProgressTransitions,workInProgressRootDidIncludeRecursiveRenderUpdate,t,workInProgressDeferredLane,workInProgressRootInterleavedUpdatedLanes,workInProgressSuspendedRetryLanes,workInProgressRootDidSkipSuspendedSiblings,Ce,null,-0,0)}}break}while(!0);ensureRootIsScheduled(e)}function commitRootWhenReady(e,t,n,Ee,Re,Ce,Te,Me,De,Oe,Be,ze,$e,He){if(e.timeoutHandle=-1,ze=t.subtreeFlags,ze&8192||(ze&16785408)===16785408){ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:noop$1$1},accumulateSuspenseyCommitOnFiber(t,Ce,ze);var Ue=(Ce&62914560)===Ce?globalMostRecentFallbackTime-now():(Ce&4194048)===Ce?globalMostRecentTransitionTime-now():0;if(Ue=waitForCommitToBeReady(ze,Ue),Ue!==null){pendingEffectsLanes=Ce,e.cancelPendingCommit=Ue(commitRoot.bind(null,e,t,Ce,n,Ee,Re,Te,Me,De,Be,ze,null,$e,He)),markRootSuspended(e,Ce,Te,!Oe);return}}commitRoot(e,t,Ce,n,Ee,Re,Te,Me,De)}function isRenderConsistentWithExternalStores(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var Ee=0;Ee<n.length;Ee++){var Re=n[Ee],Ce=Re.getSnapshot;Re=Re.value;try{if(!objectIs$2(Ce(),Re))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function markRootSuspended(e,t,n,Ee){t&=~workInProgressRootPingedLanes,t&=~workInProgressRootInterleavedUpdatedLanes,e.suspendedLanes|=t,e.pingedLanes&=~t,Ee&&(e.warmLanes|=t),Ee=e.expirationTimes;for(var Re=t;0<Re;){var Ce=31-clz32(Re),Te=1<<Ce;Ee[Ce]=-1,Re&=~Te}n!==0&&markSpawnedDeferredLane(e,n,t)}function flushSyncWork$1(){return executionContext&6?!0:(flushSyncWorkAcrossRoots_impl(0),!1)}function resetWorkInProgressStack(){if(workInProgress!==null){if(workInProgressSuspendedReason===0)var e=workInProgress.return;else e=workInProgress,lastContextDependency=currentlyRenderingFiber$1=null,resetHooksOnUnwind(e),thenableState$1=null,thenableIndexCounter$1=0,e=workInProgress;for(;e!==null;)unwindInterruptedWork(e.alternate,e),e=e.return;workInProgress=null}}function prepareFreshStack(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,cancelTimeout(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),pendingEffectsLanes=0,resetWorkInProgressStack(),workInProgressRoot=e,workInProgress=n=createWorkInProgress(e.current,null),workInProgressRootRenderLanes=t,workInProgressSuspendedReason=0,workInProgressThrownValue=null,workInProgressRootDidSkipSuspendedSiblings=!1,workInProgressRootIsPrerendering=checkIfRootIsPrerendering(e,t),workInProgressRootDidAttachPingListener=!1,workInProgressSuspendedRetryLanes=workInProgressDeferredLane=workInProgressRootPingedLanes=workInProgressRootInterleavedUpdatedLanes=workInProgressRootSkippedLanes=workInProgressRootExitStatus=0,workInProgressRootRecoverableErrors=workInProgressRootConcurrentErrors=null,workInProgressRootDidIncludeRecursiveRenderUpdate=!1,t&8&&(t|=t&32);var Ee=e.entangledLanes;if(Ee!==0)for(e=e.entanglements,Ee&=t;0<Ee;){var Re=31-clz32(Ee),Ce=1<<Re;t|=e[Re],Ee&=~Ce}return entangledRenderLanes=t,finishQueueingConcurrentUpdates(),n}function handleThrow(e,t){currentlyRenderingFiber=null,ReactSharedInternals.H=ContextOnlyDispatcher,t===SuspenseException||t===SuspenseActionException?(t=getSuspendedThenable(),workInProgressSuspendedReason=3):t===SuspenseyCommitException?(t=getSuspendedThenable(),workInProgressSuspendedReason=4):workInProgressSuspendedReason=t===SelectiveHydrationException?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,workInProgressThrownValue=t,workInProgress===null&&(workInProgressRootExitStatus=1,logUncaughtError(e,createCapturedValueAtFiber(t,e.current)))}function shouldRemainOnPreviousScreen(){var e=suspenseHandlerStackCursor.current;return e===null?!0:(workInProgressRootRenderLanes&4194048)===workInProgressRootRenderLanes?shellBoundary===null:(workInProgressRootRenderLanes&62914560)===workInProgressRootRenderLanes||workInProgressRootRenderLanes&536870912?e===shellBoundary:!1}function pushDispatcher(){var e=ReactSharedInternals.H;return ReactSharedInternals.H=ContextOnlyDispatcher,e===null?ContextOnlyDispatcher:e}function pushAsyncDispatcher(){var e=ReactSharedInternals.A;return ReactSharedInternals.A=DefaultAsyncDispatcher,e}function renderDidSuspendDelayIfPossible(){workInProgressRootExitStatus=4,workInProgressRootDidSkipSuspendedSiblings||(workInProgressRootRenderLanes&4194048)!==workInProgressRootRenderLanes&&suspenseHandlerStackCursor.current!==null||(workInProgressRootIsPrerendering=!0),!(workInProgressRootSkippedLanes&134217727)&&!(workInProgressRootInterleavedUpdatedLanes&134217727)||workInProgressRoot===null||markRootSuspended(workInProgressRoot,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)}function renderRootSync(e,t,n){var Ee=executionContext;executionContext|=2;var Re=pushDispatcher(),Ce=pushAsyncDispatcher();(workInProgressRoot!==e||workInProgressRootRenderLanes!==t)&&(workInProgressTransitions=null,prepareFreshStack(e,t)),t=!1;var Te=workInProgressRootExitStatus;e:do try{if(workInProgressSuspendedReason!==0&&workInProgress!==null){var Me=workInProgress,De=workInProgressThrownValue;switch(workInProgressSuspendedReason){case 8:resetWorkInProgressStack(),Te=6;break e;case 3:case 2:case 9:case 6:suspenseHandlerStackCursor.current===null&&(t=!0);var Oe=workInProgressSuspendedReason;if(workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(e,Me,De,Oe),n&&workInProgressRootIsPrerendering){Te=0;break e}break;default:Oe=workInProgressSuspendedReason,workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(e,Me,De,Oe)}}workLoopSync(),Te=workInProgressRootExitStatus;break}catch(Be){handleThrow(e,Be)}while(!0);return t&&e.shellSuspendCounter++,lastContextDependency=currentlyRenderingFiber$1=null,executionContext=Ee,ReactSharedInternals.H=Re,ReactSharedInternals.A=Ce,workInProgress===null&&(workInProgressRoot=null,workInProgressRootRenderLanes=0,finishQueueingConcurrentUpdates()),Te}function workLoopSync(){for(;workInProgress!==null;)performUnitOfWork(workInProgress)}function renderRootConcurrent(e,t){var n=executionContext;executionContext|=2;var Ee=pushDispatcher(),Re=pushAsyncDispatcher();workInProgressRoot!==e||workInProgressRootRenderLanes!==t?(workInProgressTransitions=null,workInProgressRootRenderTargetTime=now()+500,prepareFreshStack(e,t)):workInProgressRootIsPrerendering=checkIfRootIsPrerendering(e,t);e:do try{if(workInProgressSuspendedReason!==0&&workInProgress!==null){t=workInProgress;var Ce=workInProgressThrownValue;t:switch(workInProgressSuspendedReason){case 1:workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(e,t,Ce,1);break;case 2:case 9:if(isThenableResolved(Ce)){workInProgressSuspendedReason=0,workInProgressThrownValue=null,replaySuspendedUnitOfWork(t);break}t=function(){workInProgressSuspendedReason!==2&&workInProgressSuspendedReason!==9||workInProgressRoot!==e||(workInProgressSuspendedReason=7),ensureRootIsScheduled(e)},Ce.then(t,t);break e;case 3:workInProgressSuspendedReason=7;break e;case 4:workInProgressSuspendedReason=5;break e;case 7:isThenableResolved(Ce)?(workInProgressSuspendedReason=0,workInProgressThrownValue=null,replaySuspendedUnitOfWork(t)):(workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(e,t,Ce,7));break;case 5:var Te=null;switch(workInProgress.tag){case 26:Te=workInProgress.memoizedState;case 5:case 27:var Me=workInProgress;if(Te?preloadResource(Te):Me.stateNode.complete){workInProgressSuspendedReason=0,workInProgressThrownValue=null;var De=Me.sibling;if(De!==null)workInProgress=De;else{var Oe=Me.return;Oe!==null?(workInProgress=Oe,completeUnitOfWork(Oe)):workInProgress=null}break t}}workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(e,t,Ce,5);break;case 6:workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(e,t,Ce,6);break;case 8:resetWorkInProgressStack(),workInProgressRootExitStatus=6;break e;default:throw Error(formatProdErrorMessage(462))}}workLoopConcurrentByScheduler();break}catch(Be){handleThrow(e,Be)}while(!0);return lastContextDependency=currentlyRenderingFiber$1=null,ReactSharedInternals.H=Ee,ReactSharedInternals.A=Re,executionContext=n,workInProgress!==null?0:(workInProgressRoot=null,workInProgressRootRenderLanes=0,finishQueueingConcurrentUpdates(),workInProgressRootExitStatus)}function workLoopConcurrentByScheduler(){for(;workInProgress!==null&&!shouldYield();)performUnitOfWork(workInProgress)}function performUnitOfWork(e){var t=beginWork(e.alternate,e,entangledRenderLanes);e.memoizedProps=e.pendingProps,t===null?completeUnitOfWork(e):workInProgress=t}function replaySuspendedUnitOfWork(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=replayFunctionComponent(n,t,t.pendingProps,t.type,void 0,workInProgressRootRenderLanes);break;case 11:t=replayFunctionComponent(n,t,t.pendingProps,t.type.render,t.ref,workInProgressRootRenderLanes);break;case 5:resetHooksOnUnwind(t);default:unwindInterruptedWork(n,t),t=workInProgress=resetWorkInProgress(t,entangledRenderLanes),t=beginWork(n,t,entangledRenderLanes)}e.memoizedProps=e.pendingProps,t===null?completeUnitOfWork(e):workInProgress=t}function throwAndUnwindWorkLoop(e,t,n,Ee){lastContextDependency=currentlyRenderingFiber$1=null,resetHooksOnUnwind(t),thenableState$1=null,thenableIndexCounter$1=0;var Re=t.return;try{if(throwException(e,Re,t,n,workInProgressRootRenderLanes)){workInProgressRootExitStatus=1,logUncaughtError(e,createCapturedValueAtFiber(n,e.current)),workInProgress=null;return}}catch(Ce){if(Re!==null)throw workInProgress=Re,Ce;workInProgressRootExitStatus=1,logUncaughtError(e,createCapturedValueAtFiber(n,e.current)),workInProgress=null;return}t.flags&32768?(isHydrating||Ee===1?e=!0:workInProgressRootIsPrerendering||workInProgressRootRenderLanes&536870912?e=!1:(workInProgressRootDidSkipSuspendedSiblings=e=!0,(Ee===2||Ee===9||Ee===3||Ee===6)&&(Ee=suspenseHandlerStackCursor.current,Ee!==null&&Ee.tag===13&&(Ee.flags|=16384))),unwindUnitOfWork(t,e)):completeUnitOfWork(t)}function completeUnitOfWork(e){var t=e;do{if(t.flags&32768){unwindUnitOfWork(t,workInProgressRootDidSkipSuspendedSiblings);return}e=t.return;var n=completeWork(t.alternate,t,entangledRenderLanes);if(n!==null){workInProgress=n;return}if(t=t.sibling,t!==null){workInProgress=t;return}workInProgress=t=e}while(t!==null);workInProgressRootExitStatus===0&&(workInProgressRootExitStatus=5)}function unwindUnitOfWork(e,t){do{var n=unwindWork(e.alternate,e);if(n!==null){n.flags&=32767,workInProgress=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){workInProgress=e;return}workInProgress=e=n}while(e!==null);workInProgressRootExitStatus=6,workInProgress=null}function commitRoot(e,t,n,Ee,Re,Ce,Te,Me,De){e.cancelPendingCommit=null;do flushPendingEffects();while(pendingEffectsStatus!==0);if(executionContext&6)throw Error(formatProdErrorMessage(327));if(t!==null){if(t===e.current)throw Error(formatProdErrorMessage(177));if(Ce=t.lanes|t.childLanes,Ce|=concurrentlyUpdatedLanes,markRootFinished(e,n,Ce,Te,Me,De),e===workInProgressRoot&&(workInProgress=workInProgressRoot=null,workInProgressRootRenderLanes=0),pendingFinishedWork=t,pendingEffectsRoot=e,pendingEffectsLanes=n,pendingEffectsRemainingLanes=Ce,pendingPassiveTransitions=Re,pendingRecoverableErrors=Ee,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,scheduleCallback$1(NormalPriority$1,function(){return flushPassiveEffects(),null})):(e.callbackNode=null,e.callbackPriority=0),Ee=(t.flags&13878)!==0,t.subtreeFlags&13878||Ee){Ee=ReactSharedInternals.T,ReactSharedInternals.T=null,Re=ReactDOMSharedInternals.p,ReactDOMSharedInternals.p=2,Te=executionContext,executionContext|=4;try{commitBeforeMutationEffects(e,t,n)}finally{executionContext=Te,ReactDOMSharedInternals.p=Re,ReactSharedInternals.T=Ee}}pendingEffectsStatus=1,flushMutationEffects(),flushLayoutEffects(),flushSpawnedWork()}}function flushMutationEffects(){if(pendingEffectsStatus===1){pendingEffectsStatus=0;var e=pendingEffectsRoot,t=pendingFinishedWork,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=ReactSharedInternals.T,ReactSharedInternals.T=null;var Ee=ReactDOMSharedInternals.p;ReactDOMSharedInternals.p=2;var Re=executionContext;executionContext|=4;try{commitMutationEffectsOnFiber(t,e);var Ce=selectionInformation,Te=getActiveElementDeep(e.containerInfo),Me=Ce.focusedElem,De=Ce.selectionRange;if(Te!==Me&&Me&&Me.ownerDocument&&containsNode(Me.ownerDocument.documentElement,Me)){if(De!==null&&hasSelectionCapabilities(Me)){var Oe=De.start,Be=De.end;if(Be===void 0&&(Be=Oe),"selectionStart"in Me)Me.selectionStart=Oe,Me.selectionEnd=Math.min(Be,Me.value.length);else{var ze=Me.ownerDocument||document,$e=ze&&ze.defaultView||window;if($e.getSelection){var He=$e.getSelection(),Ue=Me.textContent.length,Ve=Math.min(De.start,Ue),We=De.end===void 0?Ve:Math.min(De.end,Ue);!He.extend&&Ve>We&&(Te=We,We=Ve,Ve=Te);var qe=getNodeForCharacterOffset(Me,Ve),Ge=getNodeForCharacterOffset(Me,We);if(qe&&Ge&&(He.rangeCount!==1||He.anchorNode!==qe.node||He.anchorOffset!==qe.offset||He.focusNode!==Ge.node||He.focusOffset!==Ge.offset)){var Ye=ze.createRange();Ye.setStart(qe.node,qe.offset),He.removeAllRanges(),Ve>We?(He.addRange(Ye),He.extend(Ge.node,Ge.offset)):(Ye.setEnd(Ge.node,Ge.offset),He.addRange(Ye))}}}}for(ze=[],He=Me;He=He.parentNode;)He.nodeType===1&&ze.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof Me.focus=="function"&&Me.focus(),Me=0;Me<ze.length;Me++){var Ke=ze[Me];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}_enabled=!!eventsEnabled,selectionInformation=eventsEnabled=null}finally{executionContext=Re,ReactDOMSharedInternals.p=Ee,ReactSharedInternals.T=n}}e.current=t,pendingEffectsStatus=2}}function flushLayoutEffects(){if(pendingEffectsStatus===2){pendingEffectsStatus=0;var e=pendingEffectsRoot,t=pendingFinishedWork,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=ReactSharedInternals.T,ReactSharedInternals.T=null;var Ee=ReactDOMSharedInternals.p;ReactDOMSharedInternals.p=2;var Re=executionContext;executionContext|=4;try{commitLayoutEffectOnFiber(e,t.alternate,t)}finally{executionContext=Re,ReactDOMSharedInternals.p=Ee,ReactSharedInternals.T=n}}pendingEffectsStatus=3}}function flushSpawnedWork(){if(pendingEffectsStatus===4||pendingEffectsStatus===3){pendingEffectsStatus=0,requestPaint();var e=pendingEffectsRoot,t=pendingFinishedWork,n=pendingEffectsLanes,Ee=pendingRecoverableErrors;t.subtreeFlags&10256||t.flags&10256?pendingEffectsStatus=5:(pendingEffectsStatus=0,pendingFinishedWork=pendingEffectsRoot=null,releaseRootPooledCache(e,e.pendingLanes));var Re=e.pendingLanes;if(Re===0&&(legacyErrorBoundariesThatAlreadyFailed=null),lanesToEventPriority(n),t=t.stateNode,injectedHook&&typeof injectedHook.onCommitFiberRoot=="function")try{injectedHook.onCommitFiberRoot(rendererID,t,void 0,(t.current.flags&128)===128)}catch{}if(Ee!==null){t=ReactSharedInternals.T,Re=ReactDOMSharedInternals.p,ReactDOMSharedInternals.p=2,ReactSharedInternals.T=null;try{for(var Ce=e.onRecoverableError,Te=0;Te<Ee.length;Te++){var Me=Ee[Te];Ce(Me.value,{componentStack:Me.stack})}}finally{ReactSharedInternals.T=t,ReactDOMSharedInternals.p=Re}}pendingEffectsLanes&3&&flushPendingEffects(),ensureRootIsScheduled(e),Re=e.pendingLanes,n&261930&&Re&42?e===rootWithNestedUpdates?nestedUpdateCount++:(nestedUpdateCount=0,rootWithNestedUpdates=e):nestedUpdateCount=0,flushSyncWorkAcrossRoots_impl(0)}}function releaseRootPooledCache(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,releaseCache(t)))}function flushPendingEffects(){return flushMutationEffects(),flushLayoutEffects(),flushSpawnedWork(),flushPassiveEffects()}function flushPassiveEffects(){if(pendingEffectsStatus!==5)return!1;var e=pendingEffectsRoot,t=pendingEffectsRemainingLanes;pendingEffectsRemainingLanes=0;var n=lanesToEventPriority(pendingEffectsLanes),Ee=ReactSharedInternals.T,Re=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=32>n?32:n,ReactSharedInternals.T=null,n=pendingPassiveTransitions,pendingPassiveTransitions=null;var Ce=pendingEffectsRoot,Te=pendingEffectsLanes;if(pendingEffectsStatus=0,pendingFinishedWork=pendingEffectsRoot=null,pendingEffectsLanes=0,executionContext&6)throw Error(formatProdErrorMessage(331));var Me=executionContext;if(executionContext|=4,commitPassiveUnmountOnFiber(Ce.current),commitPassiveMountOnFiber(Ce,Ce.current,Te,n),executionContext=Me,flushSyncWorkAcrossRoots_impl(0,!1),injectedHook&&typeof injectedHook.onPostCommitFiberRoot=="function")try{injectedHook.onPostCommitFiberRoot(rendererID,Ce)}catch{}return!0}finally{ReactDOMSharedInternals.p=Re,ReactSharedInternals.T=Ee,releaseRootPooledCache(e,t)}}function captureCommitPhaseErrorOnRoot(e,t,n){t=createCapturedValueAtFiber(n,t),t=createRootErrorUpdate(e.stateNode,t,2),e=enqueueUpdate(e,t,2),e!==null&&(markRootUpdated$1(e,2),ensureRootIsScheduled(e))}function captureCommitPhaseError(e,t,n){if(e.tag===3)captureCommitPhaseErrorOnRoot(e,e,n);else for(;t!==null;){if(t.tag===3){captureCommitPhaseErrorOnRoot(t,e,n);break}else if(t.tag===1){var Ee=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof Ee.componentDidCatch=="function"&&(legacyErrorBoundariesThatAlreadyFailed===null||!legacyErrorBoundariesThatAlreadyFailed.has(Ee))){e=createCapturedValueAtFiber(n,e),n=createClassErrorUpdate(2),Ee=enqueueUpdate(t,n,2),Ee!==null&&(initializeClassErrorUpdate(n,Ee,t,e),markRootUpdated$1(Ee,2),ensureRootIsScheduled(Ee));break}}t=t.return}}function attachPingListener(e,t,n){var Ee=e.pingCache;if(Ee===null){Ee=e.pingCache=new PossiblyWeakMap;var Re=new Set;Ee.set(t,Re)}else Re=Ee.get(t),Re===void 0&&(Re=new Set,Ee.set(t,Re));Re.has(n)||(workInProgressRootDidAttachPingListener=!0,Re.add(n),e=pingSuspendedRoot.bind(null,e,t,n),t.then(e,e))}function pingSuspendedRoot(e,t,n){var Ee=e.pingCache;Ee!==null&&Ee.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,workInProgressRoot===e&&(workInProgressRootRenderLanes&n)===n&&(workInProgressRootExitStatus===4||workInProgressRootExitStatus===3&&(workInProgressRootRenderLanes&62914560)===workInProgressRootRenderLanes&&300>now()-globalMostRecentFallbackTime?!(executionContext&2)&&prepareFreshStack(e,0):workInProgressRootPingedLanes|=n,workInProgressSuspendedRetryLanes===workInProgressRootRenderLanes&&(workInProgressSuspendedRetryLanes=0)),ensureRootIsScheduled(e)}function retryTimedOutBoundary(e,t){t===0&&(t=claimNextRetryLane()),e=enqueueConcurrentRenderForLane(e,t),e!==null&&(markRootUpdated$1(e,t),ensureRootIsScheduled(e))}function retryDehydratedSuspenseBoundary(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),retryTimedOutBoundary(e,n)}function resolveRetryWakeable(e,t){var n=0;switch(e.tag){case 31:case 13:var Ee=e.stateNode,Re=e.memoizedState;Re!==null&&(n=Re.retryLane);break;case 19:Ee=e.stateNode;break;case 22:Ee=e.stateNode._retryCache;break;default:throw Error(formatProdErrorMessage(314))}Ee!==null&&Ee.delete(t),retryTimedOutBoundary(e,n)}function scheduleCallback$1(e,t){return scheduleCallback$3(e,t)}var firstScheduledRoot=null,lastScheduledRoot=null,didScheduleMicrotask=!1,mightHavePendingSyncWork=!1,isFlushingWork=!1,currentEventTransitionLane=0;function ensureRootIsScheduled(e){e!==lastScheduledRoot&&e.next===null&&(lastScheduledRoot===null?firstScheduledRoot=lastScheduledRoot=e:lastScheduledRoot=lastScheduledRoot.next=e),mightHavePendingSyncWork=!0,didScheduleMicrotask||(didScheduleMicrotask=!0,scheduleImmediateRootScheduleTask())}function flushSyncWorkAcrossRoots_impl(e,t){if(!isFlushingWork&&mightHavePendingSyncWork){isFlushingWork=!0;do for(var n=!1,Ee=firstScheduledRoot;Ee!==null;){if(e!==0){var Re=Ee.pendingLanes;if(Re===0)var Ce=0;else{var Te=Ee.suspendedLanes,Me=Ee.pingedLanes;Ce=(1<<31-clz32(42|e)+1)-1,Ce&=Re&~(Te&~Me),Ce=Ce&201326741?Ce&201326741|1:Ce?Ce|2:0}Ce!==0&&(n=!0,performSyncWorkOnRoot(Ee,Ce))}else Ce=workInProgressRootRenderLanes,Ce=getNextLanes(Ee,Ee===workInProgressRoot?Ce:0,Ee.cancelPendingCommit!==null||Ee.timeoutHandle!==-1),!(Ce&3)||checkIfRootIsPrerendering(Ee,Ce)||(n=!0,performSyncWorkOnRoot(Ee,Ce));Ee=Ee.next}while(n);isFlushingWork=!1}}function processRootScheduleInImmediateTask(){processRootScheduleInMicrotask()}function processRootScheduleInMicrotask(){mightHavePendingSyncWork=didScheduleMicrotask=!1;var e=0;currentEventTransitionLane!==0&&shouldAttemptEagerTransition()&&(e=currentEventTransitionLane);for(var t=now(),n=null,Ee=firstScheduledRoot;Ee!==null;){var Re=Ee.next,Ce=scheduleTaskForRootDuringMicrotask(Ee,t);Ce===0?(Ee.next=null,n===null?firstScheduledRoot=Re:n.next=Re,Re===null&&(lastScheduledRoot=n)):(n=Ee,(e!==0||Ce&3)&&(mightHavePendingSyncWork=!0)),Ee=Re}pendingEffectsStatus!==0&&pendingEffectsStatus!==5||flushSyncWorkAcrossRoots_impl(e),currentEventTransitionLane!==0&&(currentEventTransitionLane=0)}function scheduleTaskForRootDuringMicrotask(e,t){for(var n=e.suspendedLanes,Ee=e.pingedLanes,Re=e.expirationTimes,Ce=e.pendingLanes&-62914561;0<Ce;){var Te=31-clz32(Ce),Me=1<<Te,De=Re[Te];De===-1?(!(Me&n)||Me&Ee)&&(Re[Te]=computeExpirationTime(Me,t)):De<=t&&(e.expiredLanes|=Me),Ce&=~Me}if(t=workInProgressRoot,n=workInProgressRootRenderLanes,n=getNextLanes(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),Ee=e.callbackNode,n===0||e===t&&(workInProgressSuspendedReason===2||workInProgressSuspendedReason===9)||e.cancelPendingCommit!==null)return Ee!==null&&Ee!==null&&cancelCallback$1(Ee),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||checkIfRootIsPrerendering(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(Ee!==null&&cancelCallback$1(Ee),lanesToEventPriority(n)){case 2:case 8:n=UserBlockingPriority;break;case 32:n=NormalPriority$1;break;case 268435456:n=IdlePriority;break;default:n=NormalPriority$1}return Ee=performWorkOnRootViaSchedulerTask.bind(null,e),n=scheduleCallback$3(n,Ee),e.callbackPriority=t,e.callbackNode=n,t}return Ee!==null&&Ee!==null&&cancelCallback$1(Ee),e.callbackPriority=2,e.callbackNode=null,2}function performWorkOnRootViaSchedulerTask(e,t){if(pendingEffectsStatus!==0&&pendingEffectsStatus!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(flushPendingEffects()&&e.callbackNode!==n)return null;var Ee=workInProgressRootRenderLanes;return Ee=getNextLanes(e,e===workInProgressRoot?Ee:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),Ee===0?null:(performWorkOnRoot(e,Ee,t),scheduleTaskForRootDuringMicrotask(e,now()),e.callbackNode!=null&&e.callbackNode===n?performWorkOnRootViaSchedulerTask.bind(null,e):null)}function performSyncWorkOnRoot(e,t){if(flushPendingEffects())return null;performWorkOnRoot(e,t,!0)}function scheduleImmediateRootScheduleTask(){scheduleMicrotask(function(){executionContext&6?scheduleCallback$3(ImmediatePriority,processRootScheduleInImmediateTask):processRootScheduleInMicrotask()})}function requestTransitionLane(){if(currentEventTransitionLane===0){var e=currentEntangledLane;e===0&&(e=nextTransitionUpdateLane,nextTransitionUpdateLane<<=1,!(nextTransitionUpdateLane&261888)&&(nextTransitionUpdateLane=256)),currentEventTransitionLane=e}return currentEventTransitionLane}function coerceFormActionProp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:sanitizeURL(""+e)}function createFormDataWithSubmitter(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function extractEvents$1(e,t,n,Ee,Re){if(t==="submit"&&n&&n.stateNode===Re){var Ce=coerceFormActionProp((Re[internalPropsKey]||null).action),Te=Ee.submitter;Te&&(t=(t=Te[internalPropsKey]||null)?coerceFormActionProp(t.formAction):Te.getAttribute("formAction"),t!==null&&(Ce=t,Te=null));var Me=new SyntheticEvent("action","action",null,Ee,Re);e.push({event:Me,listeners:[{instance:null,listener:function(){if(Ee.defaultPrevented){if(currentEventTransitionLane!==0){var De=Te?createFormDataWithSubmitter(Re,Te):new FormData(Re);startHostTransition(n,{pending:!0,data:De,method:Re.method,action:Ce},null,De)}}else typeof Ce=="function"&&(Me.preventDefault(),De=Te?createFormDataWithSubmitter(Re,Te):new FormData(Re),startHostTransition(n,{pending:!0,data:De,method:Re.method,action:Ce},Ce,De))},currentTarget:Re}]})}}for(var i$jscomp$inline_1577=0;i$jscomp$inline_1577<simpleEventPluginEvents.length;i$jscomp$inline_1577++){var eventName$jscomp$inline_1578=simpleEventPluginEvents[i$jscomp$inline_1577],domEventName$jscomp$inline_1579=eventName$jscomp$inline_1578.toLowerCase(),capitalizedEvent$jscomp$inline_1580=eventName$jscomp$inline_1578[0].toUpperCase()+eventName$jscomp$inline_1578.slice(1);registerSimpleEvent(domEventName$jscomp$inline_1579,"on"+capitalizedEvent$jscomp$inline_1580)}registerSimpleEvent(ANIMATION_END,"onAnimationEnd");registerSimpleEvent(ANIMATION_ITERATION,"onAnimationIteration");registerSimpleEvent(ANIMATION_START,"onAnimationStart");registerSimpleEvent("dblclick","onDoubleClick");registerSimpleEvent("focusin","onFocus");registerSimpleEvent("focusout","onBlur");registerSimpleEvent(TRANSITION_RUN,"onTransitionRun");registerSimpleEvent(TRANSITION_START,"onTransitionStart");registerSimpleEvent(TRANSITION_CANCEL,"onTransitionCancel");registerSimpleEvent(TRANSITION_END,"onTransitionEnd");registerDirectEvent("onMouseEnter",["mouseout","mouseover"]);registerDirectEvent("onMouseLeave",["mouseout","mouseover"]);registerDirectEvent("onPointerEnter",["pointerout","pointerover"]);registerDirectEvent("onPointerLeave",["pointerout","pointerover"]);registerTwoPhaseEvent("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));registerTwoPhaseEvent("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));registerTwoPhaseEvent("onBeforeInput",["compositionend","keypress","textInput","paste"]);registerTwoPhaseEvent("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));registerTwoPhaseEvent("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));registerTwoPhaseEvent("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mediaEventTypes="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nonDelegatedEvents=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mediaEventTypes));function processDispatchQueue(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var Ee=e[n],Re=Ee.event;Ee=Ee.listeners;e:{var Ce=void 0;if(t)for(var Te=Ee.length-1;0<=Te;Te--){var Me=Ee[Te],De=Me.instance,Oe=Me.currentTarget;if(Me=Me.listener,De!==Ce&&Re.isPropagationStopped())break e;Ce=Me,Re.currentTarget=Oe;try{Ce(Re)}catch(Be){reportGlobalError(Be)}Re.currentTarget=null,Ce=De}else for(Te=0;Te<Ee.length;Te++){if(Me=Ee[Te],De=Me.instance,Oe=Me.currentTarget,Me=Me.listener,De!==Ce&&Re.isPropagationStopped())break e;Ce=Me,Re.currentTarget=Oe;try{Ce(Re)}catch(Be){reportGlobalError(Be)}Re.currentTarget=null,Ce=De}}}}function listenToNonDelegatedEvent(e,t){var n=t[internalEventHandlersKey];n===void 0&&(n=t[internalEventHandlersKey]=new Set);var Ee=e+"__bubble";n.has(Ee)||(addTrappedEventListener(t,e,2,!1),n.add(Ee))}function listenToNativeEvent(e,t,n){var Ee=0;t&&(Ee|=4),addTrappedEventListener(n,e,Ee,t)}var listeningMarker="_reactListening"+Math.random().toString(36).slice(2);function listenToAllSupportedEvents(e){if(!e[listeningMarker]){e[listeningMarker]=!0,allNativeEvents.forEach(function(n){n!=="selectionchange"&&(nonDelegatedEvents.has(n)||listenToNativeEvent(n,!1,e),listenToNativeEvent(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[listeningMarker]||(t[listeningMarker]=!0,listenToNativeEvent("selectionchange",!1,t))}}function addTrappedEventListener(e,t,n,Ee){switch(getEventPriority(t)){case 2:var Re=dispatchDiscreteEvent;break;case 8:Re=dispatchContinuousEvent;break;default:Re=dispatchEvent$1}n=Re.bind(null,t,n,e),Re=void 0,!passiveBrowserEventsSupported||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(Re=!0),Ee?Re!==void 0?e.addEventListener(t,n,{capture:!0,passive:Re}):e.addEventListener(t,n,!0):Re!==void 0?e.addEventListener(t,n,{passive:Re}):e.addEventListener(t,n,!1)}function dispatchEventForPluginEventSystem(e,t,n,Ee,Re){var Ce=Ee;if(!(t&1)&&!(t&2)&&Ee!==null)e:for(;;){if(Ee===null)return;var Te=Ee.tag;if(Te===3||Te===4){var Me=Ee.stateNode.containerInfo;if(Me===Re)break;if(Te===4)for(Te=Ee.return;Te!==null;){var De=Te.tag;if((De===3||De===4)&&Te.stateNode.containerInfo===Re)return;Te=Te.return}for(;Me!==null;){if(Te=getClosestInstanceFromNode(Me),Te===null)return;if(De=Te.tag,De===5||De===6||De===26||De===27){Ee=Ce=Te;continue e}Me=Me.parentNode}}Ee=Ee.return}batchedUpdates$1(function(){var Oe=Ce,Be=getEventTarget(n),ze=[];e:{var $e=topLevelEventsToReactNames.get(e);if($e!==void 0){var He=SyntheticEvent,Ue=e;switch(e){case"keypress":if(getEventCharCode(n)===0)break e;case"keydown":case"keyup":He=SyntheticKeyboardEvent;break;case"focusin":Ue="focus",He=SyntheticFocusEvent;break;case"focusout":Ue="blur",He=SyntheticFocusEvent;break;case"beforeblur":case"afterblur":He=SyntheticFocusEvent;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=SyntheticMouseEvent;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=SyntheticDragEvent;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=SyntheticTouchEvent;break;case ANIMATION_END:case ANIMATION_ITERATION:case ANIMATION_START:He=SyntheticAnimationEvent;break;case TRANSITION_END:He=SyntheticTransitionEvent;break;case"scroll":case"scrollend":He=SyntheticUIEvent;break;case"wheel":He=SyntheticWheelEvent;break;case"copy":case"cut":case"paste":He=SyntheticClipboardEvent;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=SyntheticPointerEvent;break;case"toggle":case"beforetoggle":He=SyntheticToggleEvent}var Ve=(t&4)!==0,We=!Ve&&(e==="scroll"||e==="scrollend"),qe=Ve?$e!==null?$e+"Capture":null:$e;Ve=[];for(var Ge=Oe,Ye;Ge!==null;){var Ke=Ge;if(Ye=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Ye===null||qe===null||(Ke=getListener(Ge,qe),Ke!=null&&Ve.push(createDispatchListener(Ge,Ke,Ye))),We)break;Ge=Ge.return}0<Ve.length&&($e=new He($e,Ue,null,n,Be),ze.push({event:$e,listeners:Ve}))}}if(!(t&7)){e:{if($e=e==="mouseover"||e==="pointerover",He=e==="mouseout"||e==="pointerout",$e&&n!==currentReplayingEvent&&(Ue=n.relatedTarget||n.fromElement)&&(getClosestInstanceFromNode(Ue)||Ue[internalContainerInstanceKey]))break e;if((He||$e)&&($e=Be.window===Be?Be:($e=Be.ownerDocument)?$e.defaultView||$e.parentWindow:window,He?(Ue=n.relatedTarget||n.toElement,He=Oe,Ue=Ue?getClosestInstanceFromNode(Ue):null,Ue!==null&&(We=getNearestMountedFiber(Ue),Ve=Ue.tag,Ue!==We||Ve!==5&&Ve!==27&&Ve!==6)&&(Ue=null)):(He=null,Ue=Oe),He!==Ue)){if(Ve=SyntheticMouseEvent,Ke="onMouseLeave",qe="onMouseEnter",Ge="mouse",(e==="pointerout"||e==="pointerover")&&(Ve=SyntheticPointerEvent,Ke="onPointerLeave",qe="onPointerEnter",Ge="pointer"),We=He==null?$e:getNodeFromInstance(He),Ye=Ue==null?$e:getNodeFromInstance(Ue),$e=new Ve(Ke,Ge+"leave",He,n,Be),$e.target=We,$e.relatedTarget=Ye,Ke=null,getClosestInstanceFromNode(Be)===Oe&&(Ve=new Ve(qe,Ge+"enter",Ue,n,Be),Ve.target=Ye,Ve.relatedTarget=We,Ke=Ve),We=Ke,He&&Ue)t:{for(Ve=getParent,qe=He,Ge=Ue,Ye=0,Ke=qe;Ke;Ke=Ve(Ke))Ye++;Ke=0;for(var Xe=Ge;Xe;Xe=Ve(Xe))Ke++;for(;0<Ye-Ke;)qe=Ve(qe),Ye--;for(;0<Ke-Ye;)Ge=Ve(Ge),Ke--;for(;Ye--;){if(qe===Ge||Ge!==null&&qe===Ge.alternate){Ve=qe;break t}qe=Ve(qe),Ge=Ve(Ge)}Ve=null}else Ve=null;He!==null&&accumulateEnterLeaveListenersForEvent(ze,$e,He,Ve,!1),Ue!==null&&We!==null&&accumulateEnterLeaveListenersForEvent(ze,We,Ue,Ve,!0)}}e:{if($e=Oe?getNodeFromInstance(Oe):window,He=$e.nodeName&&$e.nodeName.toLowerCase(),He==="select"||He==="input"&&$e.type==="file")var Ze=getTargetInstForChangeEvent;else if(isTextInputElement($e))if(isInputEventSupported)Ze=getTargetInstForInputOrChangeEvent;else{Ze=getTargetInstForInputEventPolyfill;var er=handleEventsForInputEventPolyfill}else He=$e.nodeName,!He||He.toLowerCase()!=="input"||$e.type!=="checkbox"&&$e.type!=="radio"?Oe&&isCustomElement(Oe.elementType)&&(Ze=getTargetInstForChangeEvent):Ze=getTargetInstForClickEvent;if(Ze&&(Ze=Ze(e,Oe))){createAndAccumulateChangeEvent(ze,Ze,n,Be);break e}er&&er(e,$e,Oe),e==="focusout"&&Oe&&$e.type==="number"&&Oe.memoizedProps.value!=null&&setDefaultValue($e,"number",$e.value)}switch(er=Oe?getNodeFromInstance(Oe):window,e){case"focusin":(isTextInputElement(er)||er.contentEditable==="true")&&(activeElement=er,activeElementInst=Oe,lastSelection=null);break;case"focusout":lastSelection=activeElementInst=activeElement=null;break;case"mousedown":mouseDown=!0;break;case"contextmenu":case"mouseup":case"dragend":mouseDown=!1,constructSelectEvent(ze,n,Be);break;case"selectionchange":if(skipSelectionChangeEvent)break;case"keydown":case"keyup":constructSelectEvent(ze,n,Be)}var St;if(canUseCompositionEvent)e:{switch(e){case"compositionstart":var ar="onCompositionStart";break e;case"compositionend":ar="onCompositionEnd";break e;case"compositionupdate":ar="onCompositionUpdate";break e}ar=void 0}else isComposing?isFallbackCompositionEnd(e,n)&&(ar="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ar="onCompositionStart");ar&&(useFallbackCompositionData&&n.locale!=="ko"&&(isComposing||ar!=="onCompositionStart"?ar==="onCompositionEnd"&&isComposing&&(St=getData()):(root=Be,startText="value"in root?root.value:root.textContent,isComposing=!0)),er=accumulateTwoPhaseListeners(Oe,ar),0<er.length&&(ar=new SyntheticCompositionEvent(ar,e,null,n,Be),ze.push({event:ar,listeners:er}),St?ar.data=St:(St=getDataFromCustomEvent(n),St!==null&&(ar.data=St)))),(St=canUseTextInputEvent?getNativeBeforeInputChars(e,n):getFallbackBeforeInputChars(e,n))&&(ar=accumulateTwoPhaseListeners(Oe,"onBeforeInput"),0<ar.length&&(er=new SyntheticCompositionEvent("onBeforeInput","beforeinput",null,n,Be),ze.push({event:er,listeners:ar}),er.data=St)),extractEvents$1(ze,e,Oe,n,Be)}processDispatchQueue(ze,t)})}function createDispatchListener(e,t,n){return{instance:e,listener:t,currentTarget:n}}function accumulateTwoPhaseListeners(e,t){for(var n=t+"Capture",Ee=[];e!==null;){var Re=e,Ce=Re.stateNode;if(Re=Re.tag,Re!==5&&Re!==26&&Re!==27||Ce===null||(Re=getListener(e,n),Re!=null&&Ee.unshift(createDispatchListener(e,Re,Ce)),Re=getListener(e,t),Re!=null&&Ee.push(createDispatchListener(e,Re,Ce))),e.tag===3)return Ee;e=e.return}return[]}function getParent(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function accumulateEnterLeaveListenersForEvent(e,t,n,Ee,Re){for(var Ce=t._reactName,Te=[];n!==null&&n!==Ee;){var Me=n,De=Me.alternate,Oe=Me.stateNode;if(Me=Me.tag,De!==null&&De===Ee)break;Me!==5&&Me!==26&&Me!==27||Oe===null||(De=Oe,Re?(Oe=getListener(n,Ce),Oe!=null&&Te.unshift(createDispatchListener(n,Oe,De))):Re||(Oe=getListener(n,Ce),Oe!=null&&Te.push(createDispatchListener(n,Oe,De)))),n=n.return}Te.length!==0&&e.push({event:t,listeners:Te})}var NORMALIZE_NEWLINES_REGEX=/\r\n?/g,NORMALIZE_NULL_AND_REPLACEMENT_REGEX=/\u0000|\uFFFD/g;function normalizeMarkupForTextOrAttribute(e){return(typeof e=="string"?e:""+e).replace(NORMALIZE_NEWLINES_REGEX,`
`).replace(NORMALIZE_NULL_AND_REPLACEMENT_REGEX,"")}function checkForUnmatchedText(e,t){return t=normalizeMarkupForTextOrAttribute(t),normalizeMarkupForTextOrAttribute(e)===t}function setProp(e,t,n,Ee,Re,Ce){switch(n){case"children":typeof Ee=="string"?t==="body"||t==="textarea"&&Ee===""||setTextContent(e,Ee):(typeof Ee=="number"||typeof Ee=="bigint")&&t!=="body"&&setTextContent(e,""+Ee);break;case"className":setValueForKnownAttribute(e,"class",Ee);break;case"tabIndex":setValueForKnownAttribute(e,"tabindex",Ee);break;case"dir":case"role":case"viewBox":case"width":case"height":setValueForKnownAttribute(e,n,Ee);break;case"style":setValueForStyles(e,Ee,Ce);break;case"data":if(t!=="object"){setValueForKnownAttribute(e,"data",Ee);break}case"src":case"href":if(Ee===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(Ee==null||typeof Ee=="function"||typeof Ee=="symbol"||typeof Ee=="boolean"){e.removeAttribute(n);break}Ee=sanitizeURL(""+Ee),e.setAttribute(n,Ee);break;case"action":case"formAction":if(typeof Ee=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Ce=="function"&&(n==="formAction"?(t!=="input"&&setProp(e,t,"name",Re.name,Re,null),setProp(e,t,"formEncType",Re.formEncType,Re,null),setProp(e,t,"formMethod",Re.formMethod,Re,null),setProp(e,t,"formTarget",Re.formTarget,Re,null)):(setProp(e,t,"encType",Re.encType,Re,null),setProp(e,t,"method",Re.method,Re,null),setProp(e,t,"target",Re.target,Re,null)));if(Ee==null||typeof Ee=="symbol"||typeof Ee=="boolean"){e.removeAttribute(n);break}Ee=sanitizeURL(""+Ee),e.setAttribute(n,Ee);break;case"onClick":Ee!=null&&(e.onclick=noop$1$1);break;case"onScroll":Ee!=null&&listenToNonDelegatedEvent("scroll",e);break;case"onScrollEnd":Ee!=null&&listenToNonDelegatedEvent("scrollend",e);break;case"dangerouslySetInnerHTML":if(Ee!=null){if(typeof Ee!="object"||!("__html"in Ee))throw Error(formatProdErrorMessage(61));if(n=Ee.__html,n!=null){if(Re.children!=null)throw Error(formatProdErrorMessage(60));e.innerHTML=n}}break;case"multiple":e.multiple=Ee&&typeof Ee!="function"&&typeof Ee!="symbol";break;case"muted":e.muted=Ee&&typeof Ee!="function"&&typeof Ee!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(Ee==null||typeof Ee=="function"||typeof Ee=="boolean"||typeof Ee=="symbol"){e.removeAttribute("xlink:href");break}n=sanitizeURL(""+Ee),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"?e.setAttribute(n,""+Ee):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":Ee&&typeof Ee!="function"&&typeof Ee!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":Ee===!0?e.setAttribute(n,""):Ee!==!1&&Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"?e.setAttribute(n,Ee):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"&&!isNaN(Ee)&&1<=Ee?e.setAttribute(n,Ee):e.removeAttribute(n);break;case"rowSpan":case"start":Ee==null||typeof Ee=="function"||typeof Ee=="symbol"||isNaN(Ee)?e.removeAttribute(n):e.setAttribute(n,Ee);break;case"popover":listenToNonDelegatedEvent("beforetoggle",e),listenToNonDelegatedEvent("toggle",e),setValueForAttribute(e,"popover",Ee);break;case"xlinkActuate":setValueForNamespacedAttribute(e,"http://www.w3.org/1999/xlink","xlink:actuate",Ee);break;case"xlinkArcrole":setValueForNamespacedAttribute(e,"http://www.w3.org/1999/xlink","xlink:arcrole",Ee);break;case"xlinkRole":setValueForNamespacedAttribute(e,"http://www.w3.org/1999/xlink","xlink:role",Ee);break;case"xlinkShow":setValueForNamespacedAttribute(e,"http://www.w3.org/1999/xlink","xlink:show",Ee);break;case"xlinkTitle":setValueForNamespacedAttribute(e,"http://www.w3.org/1999/xlink","xlink:title",Ee);break;case"xlinkType":setValueForNamespacedAttribute(e,"http://www.w3.org/1999/xlink","xlink:type",Ee);break;case"xmlBase":setValueForNamespacedAttribute(e,"http://www.w3.org/XML/1998/namespace","xml:base",Ee);break;case"xmlLang":setValueForNamespacedAttribute(e,"http://www.w3.org/XML/1998/namespace","xml:lang",Ee);break;case"xmlSpace":setValueForNamespacedAttribute(e,"http://www.w3.org/XML/1998/namespace","xml:space",Ee);break;case"is":setValueForAttribute(e,"is",Ee);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=aliases.get(n)||n,setValueForAttribute(e,n,Ee))}}function setPropOnCustomElement(e,t,n,Ee,Re,Ce){switch(n){case"style":setValueForStyles(e,Ee,Ce);break;case"dangerouslySetInnerHTML":if(Ee!=null){if(typeof Ee!="object"||!("__html"in Ee))throw Error(formatProdErrorMessage(61));if(n=Ee.__html,n!=null){if(Re.children!=null)throw Error(formatProdErrorMessage(60));e.innerHTML=n}}break;case"children":typeof Ee=="string"?setTextContent(e,Ee):(typeof Ee=="number"||typeof Ee=="bigint")&&setTextContent(e,""+Ee);break;case"onScroll":Ee!=null&&listenToNonDelegatedEvent("scroll",e);break;case"onScrollEnd":Ee!=null&&listenToNonDelegatedEvent("scrollend",e);break;case"onClick":Ee!=null&&(e.onclick=noop$1$1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!registrationNameDependencies.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(Re=n.endsWith("Capture"),t=n.slice(2,Re?n.length-7:void 0),Ce=e[internalPropsKey]||null,Ce=Ce!=null?Ce[n]:null,typeof Ce=="function"&&e.removeEventListener(t,Ce,Re),typeof Ee=="function")){typeof Ce!="function"&&Ce!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,Ee,Re);break e}n in e?e[n]=Ee:Ee===!0?e.setAttribute(n,""):setValueForAttribute(e,n,Ee)}}}function setInitialProperties(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":listenToNonDelegatedEvent("error",e),listenToNonDelegatedEvent("load",e);var Ee=!1,Re=!1,Ce;for(Ce in n)if(n.hasOwnProperty(Ce)){var Te=n[Ce];if(Te!=null)switch(Ce){case"src":Ee=!0;break;case"srcSet":Re=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(formatProdErrorMessage(137,t));default:setProp(e,t,Ce,Te,n,null)}}Re&&setProp(e,t,"srcSet",n.srcSet,n,null),Ee&&setProp(e,t,"src",n.src,n,null);return;case"input":listenToNonDelegatedEvent("invalid",e);var Me=Ce=Te=Re=null,De=null,Oe=null;for(Ee in n)if(n.hasOwnProperty(Ee)){var Be=n[Ee];if(Be!=null)switch(Ee){case"name":Re=Be;break;case"type":Te=Be;break;case"checked":De=Be;break;case"defaultChecked":Oe=Be;break;case"value":Ce=Be;break;case"defaultValue":Me=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(formatProdErrorMessage(137,t));break;default:setProp(e,t,Ee,Be,n,null)}}initInput$1(e,Ce,Me,De,Oe,Te,Re,!1);return;case"select":listenToNonDelegatedEvent("invalid",e),Ee=Te=Ce=null;for(Re in n)if(n.hasOwnProperty(Re)&&(Me=n[Re],Me!=null))switch(Re){case"value":Ce=Me;break;case"defaultValue":Te=Me;break;case"multiple":Ee=Me;default:setProp(e,t,Re,Me,n,null)}t=Ce,n=Te,e.multiple=!!Ee,t!=null?updateOptions(e,!!Ee,t,!1):n!=null&&updateOptions(e,!!Ee,n,!0);return;case"textarea":listenToNonDelegatedEvent("invalid",e),Ce=Re=Ee=null;for(Te in n)if(n.hasOwnProperty(Te)&&(Me=n[Te],Me!=null))switch(Te){case"value":Ee=Me;break;case"defaultValue":Re=Me;break;case"children":Ce=Me;break;case"dangerouslySetInnerHTML":if(Me!=null)throw Error(formatProdErrorMessage(91));break;default:setProp(e,t,Te,Me,n,null)}initTextarea(e,Ee,Re,Ce);return;case"option":for(De in n)if(n.hasOwnProperty(De)&&(Ee=n[De],Ee!=null))switch(De){case"selected":e.selected=Ee&&typeof Ee!="function"&&typeof Ee!="symbol";break;default:setProp(e,t,De,Ee,n,null)}return;case"dialog":listenToNonDelegatedEvent("beforetoggle",e),listenToNonDelegatedEvent("toggle",e),listenToNonDelegatedEvent("cancel",e),listenToNonDelegatedEvent("close",e);break;case"iframe":case"object":listenToNonDelegatedEvent("load",e);break;case"video":case"audio":for(Ee=0;Ee<mediaEventTypes.length;Ee++)listenToNonDelegatedEvent(mediaEventTypes[Ee],e);break;case"image":listenToNonDelegatedEvent("error",e),listenToNonDelegatedEvent("load",e);break;case"details":listenToNonDelegatedEvent("toggle",e);break;case"embed":case"source":case"link":listenToNonDelegatedEvent("error",e),listenToNonDelegatedEvent("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in n)if(n.hasOwnProperty(Oe)&&(Ee=n[Oe],Ee!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(formatProdErrorMessage(137,t));default:setProp(e,t,Oe,Ee,n,null)}return;default:if(isCustomElement(t)){for(Be in n)n.hasOwnProperty(Be)&&(Ee=n[Be],Ee!==void 0&&setPropOnCustomElement(e,t,Be,Ee,n,void 0));return}}for(Me in n)n.hasOwnProperty(Me)&&(Ee=n[Me],Ee!=null&&setProp(e,t,Me,Ee,n,null))}function updateProperties(e,t,n,Ee){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Re=null,Ce=null,Te=null,Me=null,De=null,Oe=null,Be=null;for(He in n){var ze=n[He];if(n.hasOwnProperty(He)&&ze!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":De=ze;default:Ee.hasOwnProperty(He)||setProp(e,t,He,null,Ee,ze)}}for(var $e in Ee){var He=Ee[$e];if(ze=n[$e],Ee.hasOwnProperty($e)&&(He!=null||ze!=null))switch($e){case"type":Ce=He;break;case"name":Re=He;break;case"checked":Oe=He;break;case"defaultChecked":Be=He;break;case"value":Te=He;break;case"defaultValue":Me=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(formatProdErrorMessage(137,t));break;default:He!==ze&&setProp(e,t,$e,He,Ee,ze)}}updateInput(e,Te,Me,De,Oe,Be,Ce,Re);return;case"select":He=Te=Me=$e=null;for(Ce in n)if(De=n[Ce],n.hasOwnProperty(Ce)&&De!=null)switch(Ce){case"value":break;case"multiple":He=De;default:Ee.hasOwnProperty(Ce)||setProp(e,t,Ce,null,Ee,De)}for(Re in Ee)if(Ce=Ee[Re],De=n[Re],Ee.hasOwnProperty(Re)&&(Ce!=null||De!=null))switch(Re){case"value":$e=Ce;break;case"defaultValue":Me=Ce;break;case"multiple":Te=Ce;default:Ce!==De&&setProp(e,t,Re,Ce,Ee,De)}t=Me,n=Te,Ee=He,$e!=null?updateOptions(e,!!n,$e,!1):!!Ee!=!!n&&(t!=null?updateOptions(e,!!n,t,!0):updateOptions(e,!!n,n?[]:"",!1));return;case"textarea":He=$e=null;for(Me in n)if(Re=n[Me],n.hasOwnProperty(Me)&&Re!=null&&!Ee.hasOwnProperty(Me))switch(Me){case"value":break;case"children":break;default:setProp(e,t,Me,null,Ee,Re)}for(Te in Ee)if(Re=Ee[Te],Ce=n[Te],Ee.hasOwnProperty(Te)&&(Re!=null||Ce!=null))switch(Te){case"value":$e=Re;break;case"defaultValue":He=Re;break;case"children":break;case"dangerouslySetInnerHTML":if(Re!=null)throw Error(formatProdErrorMessage(91));break;default:Re!==Ce&&setProp(e,t,Te,Re,Ee,Ce)}updateTextarea(e,$e,He);return;case"option":for(var Ue in n)if($e=n[Ue],n.hasOwnProperty(Ue)&&$e!=null&&!Ee.hasOwnProperty(Ue))switch(Ue){case"selected":e.selected=!1;break;default:setProp(e,t,Ue,null,Ee,$e)}for(De in Ee)if($e=Ee[De],He=n[De],Ee.hasOwnProperty(De)&&$e!==He&&($e!=null||He!=null))switch(De){case"selected":e.selected=$e&&typeof $e!="function"&&typeof $e!="symbol";break;default:setProp(e,t,De,$e,Ee,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in n)$e=n[Ve],n.hasOwnProperty(Ve)&&$e!=null&&!Ee.hasOwnProperty(Ve)&&setProp(e,t,Ve,null,Ee,$e);for(Oe in Ee)if($e=Ee[Oe],He=n[Oe],Ee.hasOwnProperty(Oe)&&$e!==He&&($e!=null||He!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(formatProdErrorMessage(137,t));break;default:setProp(e,t,Oe,$e,Ee,He)}return;default:if(isCustomElement(t)){for(var We in n)$e=n[We],n.hasOwnProperty(We)&&$e!==void 0&&!Ee.hasOwnProperty(We)&&setPropOnCustomElement(e,t,We,void 0,Ee,$e);for(Be in Ee)$e=Ee[Be],He=n[Be],!Ee.hasOwnProperty(Be)||$e===He||$e===void 0&&He===void 0||setPropOnCustomElement(e,t,Be,$e,Ee,He);return}}for(var qe in n)$e=n[qe],n.hasOwnProperty(qe)&&$e!=null&&!Ee.hasOwnProperty(qe)&&setProp(e,t,qe,null,Ee,$e);for(ze in Ee)$e=Ee[ze],He=n[ze],!Ee.hasOwnProperty(ze)||$e===He||$e==null&&He==null||setProp(e,t,ze,$e,Ee,He)}function isLikelyStaticResource(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function estimateBandwidth(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),Ee=0;Ee<n.length;Ee++){var Re=n[Ee],Ce=Re.transferSize,Te=Re.initiatorType,Me=Re.duration;if(Ce&&Me&&isLikelyStaticResource(Te)){for(Te=0,Me=Re.responseEnd,Ee+=1;Ee<n.length;Ee++){var De=n[Ee],Oe=De.startTime;if(Oe>Me)break;var Be=De.transferSize,ze=De.initiatorType;Be&&isLikelyStaticResource(ze)&&(De=De.responseEnd,Te+=Be*(De<Me?1:(Me-Oe)/(De-Oe)))}if(--Ee,t+=8*(Ce+Te)/(Re.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var eventsEnabled=null,selectionInformation=null;function getOwnerDocumentFromRootContainer(e){return e.nodeType===9?e:e.ownerDocument}function getOwnHostContext(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function getChildHostContextProd(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function shouldSetTextContent(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var currentPopstateTransitionEvent=null;function shouldAttemptEagerTransition(){var e=window.event;return e&&e.type==="popstate"?e===currentPopstateTransitionEvent?!1:(currentPopstateTransitionEvent=e,!0):(currentPopstateTransitionEvent=null,!1)}var scheduleTimeout=typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout=typeof clearTimeout=="function"?clearTimeout:void 0,localPromise=typeof Promise=="function"?Promise:void 0,scheduleMicrotask=typeof queueMicrotask=="function"?queueMicrotask:typeof localPromise<"u"?function(e){return localPromise.resolve(null).then(e).catch(handleErrorInNextTick)}:scheduleTimeout;function handleErrorInNextTick(e){setTimeout(function(){throw e})}function isSingletonScope(e){return e==="head"}function clearHydrationBoundary(e,t){var n=t,Ee=0;do{var Re=n.nextSibling;if(e.removeChild(n),Re&&Re.nodeType===8)if(n=Re.data,n==="/$"||n==="/&"){if(Ee===0){e.removeChild(Re),retryIfBlockedOn(t);return}Ee--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")Ee++;else if(n==="html")releaseSingletonInstance(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,releaseSingletonInstance(n);for(var Ce=n.firstChild;Ce;){var Te=Ce.nextSibling,Me=Ce.nodeName;Ce[internalHoistableMarker]||Me==="SCRIPT"||Me==="STYLE"||Me==="LINK"&&Ce.rel.toLowerCase()==="stylesheet"||n.removeChild(Ce),Ce=Te}}else n==="body"&&releaseSingletonInstance(e.ownerDocument.body);n=Re}while(n);retryIfBlockedOn(t)}function hideOrUnhideDehydratedBoundary(e,t){var n=e;e=0;do{var Ee=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),Ee&&Ee.nodeType===8)if(n=Ee.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=Ee}while(n)}function clearContainerSparingly(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":clearContainerSparingly(n),detachDeletedInstance(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function canHydrateInstance(e,t,n,Ee){for(;e.nodeType===1;){var Re=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!Ee&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(Ee){if(!e[internalHoistableMarker])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(Ce=e.getAttribute("rel"),Ce==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(Ce!==Re.rel||e.getAttribute("href")!==(Re.href==null||Re.href===""?null:Re.href)||e.getAttribute("crossorigin")!==(Re.crossOrigin==null?null:Re.crossOrigin)||e.getAttribute("title")!==(Re.title==null?null:Re.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(Ce=e.getAttribute("src"),(Ce!==(Re.src==null?null:Re.src)||e.getAttribute("type")!==(Re.type==null?null:Re.type)||e.getAttribute("crossorigin")!==(Re.crossOrigin==null?null:Re.crossOrigin))&&Ce&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var Ce=Re.name==null?null:""+Re.name;if(Re.type==="hidden"&&e.getAttribute("name")===Ce)return e}else return e;if(e=getNextHydratable(e.nextSibling),e===null)break}return null}function canHydrateTextInstance(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=getNextHydratable(e.nextSibling),e===null))return null;return e}function canHydrateHydrationBoundary(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=getNextHydratable(e.nextSibling),e===null))return null;return e}function isSuspenseInstancePending(e){return e.data==="$?"||e.data==="$~"}function isSuspenseInstanceFallback(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function registerSuspenseInstanceRetry(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var Ee=function(){t(),n.removeEventListener("DOMContentLoaded",Ee)};n.addEventListener("DOMContentLoaded",Ee),e._reactRetry=Ee}}function getNextHydratable(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var previousHydratableOnEnteringScopedSingleton=null;function getNextHydratableInstanceAfterHydrationBoundary(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return getNextHydratable(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function getParentHydrationBoundary(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function resolveSingletonInstance(e,t,n){switch(t=getOwnerDocumentFromRootContainer(n),e){case"html":if(e=t.documentElement,!e)throw Error(formatProdErrorMessage(452));return e;case"head":if(e=t.head,!e)throw Error(formatProdErrorMessage(453));return e;case"body":if(e=t.body,!e)throw Error(formatProdErrorMessage(454));return e;default:throw Error(formatProdErrorMessage(451))}}function releaseSingletonInstance(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);detachDeletedInstance(e)}var preloadPropsMap=new Map,preconnectsSet=new Set;function getHoistableRoot(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var previousDispatcher=ReactDOMSharedInternals.d;ReactDOMSharedInternals.d={f:flushSyncWork,r:requestFormReset,D:prefetchDNS,C:preconnect,L:preload,m:preloadModule,X:preinitScript,S:preinitStyle,M:preinitModuleScript};function flushSyncWork(){var e=previousDispatcher.f(),t=flushSyncWork$1();return e||t}function requestFormReset(e){var t=getInstanceFromNode(e);t!==null&&t.tag===5&&t.type==="form"?requestFormReset$1(t):previousDispatcher.r(e)}var globalDocument=typeof document>"u"?null:document;function preconnectAs(e,t,n){var Ee=globalDocument;if(Ee&&typeof t=="string"&&t){var Re=escapeSelectorAttributeValueInsideDoubleQuotes(t);Re='link[rel="'+e+'"][href="'+Re+'"]',typeof n=="string"&&(Re+='[crossorigin="'+n+'"]'),preconnectsSet.has(Re)||(preconnectsSet.add(Re),e={rel:e,crossOrigin:n,href:t},Ee.querySelector(Re)===null&&(t=Ee.createElement("link"),setInitialProperties(t,"link",e),markNodeAsHoistable(t),Ee.head.appendChild(t)))}}function prefetchDNS(e){previousDispatcher.D(e),preconnectAs("dns-prefetch",e,null)}function preconnect(e,t){previousDispatcher.C(e,t),preconnectAs("preconnect",e,t)}function preload(e,t,n){previousDispatcher.L(e,t,n);var Ee=globalDocument;if(Ee&&e&&t){var Re='link[rel="preload"][as="'+escapeSelectorAttributeValueInsideDoubleQuotes(t)+'"]';t==="image"&&n&&n.imageSrcSet?(Re+='[imagesrcset="'+escapeSelectorAttributeValueInsideDoubleQuotes(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(Re+='[imagesizes="'+escapeSelectorAttributeValueInsideDoubleQuotes(n.imageSizes)+'"]')):Re+='[href="'+escapeSelectorAttributeValueInsideDoubleQuotes(e)+'"]';var Ce=Re;switch(t){case"style":Ce=getStyleKey(e);break;case"script":Ce=getScriptKey(e)}preloadPropsMap.has(Ce)||(e=assign$3({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),preloadPropsMap.set(Ce,e),Ee.querySelector(Re)!==null||t==="style"&&Ee.querySelector(getStylesheetSelectorFromKey(Ce))||t==="script"&&Ee.querySelector(getScriptSelectorFromKey(Ce))||(t=Ee.createElement("link"),setInitialProperties(t,"link",e),markNodeAsHoistable(t),Ee.head.appendChild(t)))}}function preloadModule(e,t){previousDispatcher.m(e,t);var n=globalDocument;if(n&&e){var Ee=t&&typeof t.as=="string"?t.as:"script",Re='link[rel="modulepreload"][as="'+escapeSelectorAttributeValueInsideDoubleQuotes(Ee)+'"][href="'+escapeSelectorAttributeValueInsideDoubleQuotes(e)+'"]',Ce=Re;switch(Ee){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Ce=getScriptKey(e)}if(!preloadPropsMap.has(Ce)&&(e=assign$3({rel:"modulepreload",href:e},t),preloadPropsMap.set(Ce,e),n.querySelector(Re)===null)){switch(Ee){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(getScriptSelectorFromKey(Ce)))return}Ee=n.createElement("link"),setInitialProperties(Ee,"link",e),markNodeAsHoistable(Ee),n.head.appendChild(Ee)}}}function preinitStyle(e,t,n){previousDispatcher.S(e,t,n);var Ee=globalDocument;if(Ee&&e){var Re=getResourcesFromRoot(Ee).hoistableStyles,Ce=getStyleKey(e);t=t||"default";var Te=Re.get(Ce);if(!Te){var Me={loading:0,preload:null};if(Te=Ee.querySelector(getStylesheetSelectorFromKey(Ce)))Me.loading=5;else{e=assign$3({rel:"stylesheet",href:e,"data-precedence":t},n),(n=preloadPropsMap.get(Ce))&&adoptPreloadPropsForStylesheet(e,n);var De=Te=Ee.createElement("link");markNodeAsHoistable(De),setInitialProperties(De,"link",e),De._p=new Promise(function(Oe,Be){De.onload=Oe,De.onerror=Be}),De.addEventListener("load",function(){Me.loading|=1}),De.addEventListener("error",function(){Me.loading|=2}),Me.loading|=4,insertStylesheet(Te,t,Ee)}Te={type:"stylesheet",instance:Te,count:1,state:Me},Re.set(Ce,Te)}}}function preinitScript(e,t){previousDispatcher.X(e,t);var n=globalDocument;if(n&&e){var Ee=getResourcesFromRoot(n).hoistableScripts,Re=getScriptKey(e),Ce=Ee.get(Re);Ce||(Ce=n.querySelector(getScriptSelectorFromKey(Re)),Ce||(e=assign$3({src:e,async:!0},t),(t=preloadPropsMap.get(Re))&&adoptPreloadPropsForScript(e,t),Ce=n.createElement("script"),markNodeAsHoistable(Ce),setInitialProperties(Ce,"link",e),n.head.appendChild(Ce)),Ce={type:"script",instance:Ce,count:1,state:null},Ee.set(Re,Ce))}}function preinitModuleScript(e,t){previousDispatcher.M(e,t);var n=globalDocument;if(n&&e){var Ee=getResourcesFromRoot(n).hoistableScripts,Re=getScriptKey(e),Ce=Ee.get(Re);Ce||(Ce=n.querySelector(getScriptSelectorFromKey(Re)),Ce||(e=assign$3({src:e,async:!0,type:"module"},t),(t=preloadPropsMap.get(Re))&&adoptPreloadPropsForScript(e,t),Ce=n.createElement("script"),markNodeAsHoistable(Ce),setInitialProperties(Ce,"link",e),n.head.appendChild(Ce)),Ce={type:"script",instance:Ce,count:1,state:null},Ee.set(Re,Ce))}}function getResource(e,t,n,Ee){var Re=(Re=rootInstanceStackCursor.current)?getHoistableRoot(Re):null;if(!Re)throw Error(formatProdErrorMessage(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=getStyleKey(n.href),n=getResourcesFromRoot(Re).hoistableStyles,Ee=n.get(t),Ee||(Ee={type:"style",instance:null,count:0,state:null},n.set(t,Ee)),Ee):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=getStyleKey(n.href);var Ce=getResourcesFromRoot(Re).hoistableStyles,Te=Ce.get(e);if(Te||(Re=Re.ownerDocument||Re,Te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Ce.set(e,Te),(Ce=Re.querySelector(getStylesheetSelectorFromKey(e)))&&!Ce._p&&(Te.instance=Ce,Te.state.loading=5),preloadPropsMap.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},preloadPropsMap.set(e,n),Ce||preloadStylesheet(Re,e,n,Te.state))),t&&Ee===null)throw Error(formatProdErrorMessage(528,""));return Te}if(t&&Ee!==null)throw Error(formatProdErrorMessage(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=getScriptKey(n),n=getResourcesFromRoot(Re).hoistableScripts,Ee=n.get(t),Ee||(Ee={type:"script",instance:null,count:0,state:null},n.set(t,Ee)),Ee):{type:"void",instance:null,count:0,state:null};default:throw Error(formatProdErrorMessage(444,e))}}function getStyleKey(e){return'href="'+escapeSelectorAttributeValueInsideDoubleQuotes(e)+'"'}function getStylesheetSelectorFromKey(e){return'link[rel="stylesheet"]['+e+"]"}function stylesheetPropsFromRawProps(e){return assign$3({},e,{"data-precedence":e.precedence,precedence:null})}function preloadStylesheet(e,t,n,Ee){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?Ee.loading=1:(t=e.createElement("link"),Ee.preload=t,t.addEventListener("load",function(){return Ee.loading|=1}),t.addEventListener("error",function(){return Ee.loading|=2}),setInitialProperties(t,"link",n),markNodeAsHoistable(t),e.head.appendChild(t))}function getScriptKey(e){return'[src="'+escapeSelectorAttributeValueInsideDoubleQuotes(e)+'"]'}function getScriptSelectorFromKey(e){return"script[async]"+e}function acquireResource(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var Ee=e.querySelector('style[data-href~="'+escapeSelectorAttributeValueInsideDoubleQuotes(n.href)+'"]');if(Ee)return t.instance=Ee,markNodeAsHoistable(Ee),Ee;var Re=assign$3({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ee=(e.ownerDocument||e).createElement("style"),markNodeAsHoistable(Ee),setInitialProperties(Ee,"style",Re),insertStylesheet(Ee,n.precedence,e),t.instance=Ee;case"stylesheet":Re=getStyleKey(n.href);var Ce=e.querySelector(getStylesheetSelectorFromKey(Re));if(Ce)return t.state.loading|=4,t.instance=Ce,markNodeAsHoistable(Ce),Ce;Ee=stylesheetPropsFromRawProps(n),(Re=preloadPropsMap.get(Re))&&adoptPreloadPropsForStylesheet(Ee,Re),Ce=(e.ownerDocument||e).createElement("link"),markNodeAsHoistable(Ce);var Te=Ce;return Te._p=new Promise(function(Me,De){Te.onload=Me,Te.onerror=De}),setInitialProperties(Ce,"link",Ee),t.state.loading|=4,insertStylesheet(Ce,n.precedence,e),t.instance=Ce;case"script":return Ce=getScriptKey(n.src),(Re=e.querySelector(getScriptSelectorFromKey(Ce)))?(t.instance=Re,markNodeAsHoistable(Re),Re):(Ee=n,(Re=preloadPropsMap.get(Ce))&&(Ee=assign$3({},n),adoptPreloadPropsForScript(Ee,Re)),e=e.ownerDocument||e,Re=e.createElement("script"),markNodeAsHoistable(Re),setInitialProperties(Re,"link",Ee),e.head.appendChild(Re),t.instance=Re);case"void":return null;default:throw Error(formatProdErrorMessage(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(Ee=t.instance,t.state.loading|=4,insertStylesheet(Ee,n.precedence,e));return t.instance}function insertStylesheet(e,t,n){for(var Ee=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Re=Ee.length?Ee[Ee.length-1]:null,Ce=Re,Te=0;Te<Ee.length;Te++){var Me=Ee[Te];if(Me.dataset.precedence===t)Ce=Me;else if(Ce!==Re)break}Ce?Ce.parentNode.insertBefore(e,Ce.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function adoptPreloadPropsForStylesheet(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function adoptPreloadPropsForScript(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var tagCaches=null;function getHydratableHoistableCache(e,t,n){if(tagCaches===null){var Ee=new Map,Re=tagCaches=new Map;Re.set(n,Ee)}else Re=tagCaches,Ee=Re.get(n),Ee||(Ee=new Map,Re.set(n,Ee));if(Ee.has(e))return Ee;for(Ee.set(e,null),n=n.getElementsByTagName(e),Re=0;Re<n.length;Re++){var Ce=n[Re];if(!(Ce[internalHoistableMarker]||Ce[internalInstanceKey]||e==="link"&&Ce.getAttribute("rel")==="stylesheet")&&Ce.namespaceURI!=="http://www.w3.org/2000/svg"){var Te=Ce.getAttribute(t)||"";Te=e+Te;var Me=Ee.get(Te);Me?Me.push(Ce):Ee.set(Te,[Ce])}}return Ee}function mountHoistable(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function isHostHoistableType(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function preloadResource(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function suspendResource(e,t,n,Ee){if(n.type==="stylesheet"&&(typeof Ee.media!="string"||matchMedia(Ee.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var Re=getStyleKey(Ee.href),Ce=t.querySelector(getStylesheetSelectorFromKey(Re));if(Ce){t=Ce._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=onUnsuspend.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=Ce,markNodeAsHoistable(Ce);return}Ce=t.ownerDocument||t,Ee=stylesheetPropsFromRawProps(Ee),(Re=preloadPropsMap.get(Re))&&adoptPreloadPropsForStylesheet(Ee,Re),Ce=Ce.createElement("link"),markNodeAsHoistable(Ce);var Te=Ce;Te._p=new Promise(function(Me,De){Te.onload=Me,Te.onerror=De}),setInitialProperties(Ce,"link",Ee),n.instance=Ce}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=onUnsuspend.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var estimatedBytesWithinLimit=0;function waitForCommitToBeReady(e,t){return e.stylesheets&&e.count===0&&insertSuspendedStylesheets(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var Ee=setTimeout(function(){if(e.stylesheets&&insertSuspendedStylesheets(e,e.stylesheets),e.unsuspend){var Ce=e.unsuspend;e.unsuspend=null,Ce()}},6e4+t);0<e.imgBytes&&estimatedBytesWithinLimit===0&&(estimatedBytesWithinLimit=62500*estimateBandwidth());var Re=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&insertSuspendedStylesheets(e,e.stylesheets),e.unsuspend)){var Ce=e.unsuspend;e.unsuspend=null,Ce()}},(e.imgBytes>estimatedBytesWithinLimit?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(Ee),clearTimeout(Re)}}:null}function onUnsuspend(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)insertSuspendedStylesheets(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var precedencesByRoot=null;function insertSuspendedStylesheets(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,precedencesByRoot=new Map,t.forEach(insertStylesheetIntoRoot,e),precedencesByRoot=null,onUnsuspend.call(e))}function insertStylesheetIntoRoot(e,t){if(!(t.state.loading&4)){var n=precedencesByRoot.get(e);if(n)var Ee=n.get(null);else{n=new Map,precedencesByRoot.set(e,n);for(var Re=e.querySelectorAll("link[data-precedence],style[data-precedence]"),Ce=0;Ce<Re.length;Ce++){var Te=Re[Ce];(Te.nodeName==="LINK"||Te.getAttribute("media")!=="not all")&&(n.set(Te.dataset.precedence,Te),Ee=Te)}Ee&&n.set(null,Ee)}Re=t.instance,Te=Re.getAttribute("data-precedence"),Ce=n.get(Te)||Ee,Ce===Ee&&n.set(null,Re),n.set(Te,Re),this.count++,Ee=onUnsuspend.bind(this),Re.addEventListener("load",Ee),Re.addEventListener("error",Ee),Ce?Ce.parentNode.insertBefore(Re,Ce.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(Re,e.firstChild)),t.state.loading|=4}}var HostTransitionContext={$$typeof:REACT_CONTEXT_TYPE,Provider:null,Consumer:null,_currentValue:sharedNotPendingObject,_currentValue2:sharedNotPendingObject,_threadCount:0};function FiberRootNode(e,t,n,Ee,Re,Ce,Te,Me,De){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=createLaneMap(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=createLaneMap(0),this.hiddenUpdates=createLaneMap(null),this.identifierPrefix=Ee,this.onUncaughtError=Re,this.onCaughtError=Ce,this.onRecoverableError=Te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=De,this.incompleteTransitions=new Map}function createFiberRoot(e,t,n,Ee,Re,Ce,Te,Me,De,Oe,Be,ze){return e=new FiberRootNode(e,t,n,Te,De,Oe,Be,ze,Me),t=1,Ce===!0&&(t|=24),Ce=createFiberImplClass(3,null,null,t),e.current=Ce,Ce.stateNode=e,t=createCache(),t.refCount++,e.pooledCache=t,t.refCount++,Ce.memoizedState={element:Ee,isDehydrated:n,cache:t},initializeUpdateQueue(Ce),e}function getContextForSubtree(e){return e?(e=emptyContextObject,e):emptyContextObject}function updateContainerImpl(e,t,n,Ee,Re,Ce){Re=getContextForSubtree(Re),Ee.context===null?Ee.context=Re:Ee.pendingContext=Re,Ee=createUpdate(t),Ee.payload={element:n},Ce=Ce===void 0?null:Ce,Ce!==null&&(Ee.callback=Ce),n=enqueueUpdate(e,Ee,t),n!==null&&(scheduleUpdateOnFiber(n,e,t),entangleTransitions(n,e,t))}function markRetryLaneImpl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function markRetryLaneIfNotHydrated(e,t){markRetryLaneImpl(e,t),(e=e.alternate)&&markRetryLaneImpl(e,t)}function attemptContinuousHydration(e){if(e.tag===13||e.tag===31){var t=enqueueConcurrentRenderForLane(e,67108864);t!==null&&scheduleUpdateOnFiber(t,e,67108864),markRetryLaneIfNotHydrated(e,67108864)}}function attemptHydrationAtCurrentPriority(e){if(e.tag===13||e.tag===31){var t=requestUpdateLane();t=getBumpedLaneForHydrationByLane(t);var n=enqueueConcurrentRenderForLane(e,t);n!==null&&scheduleUpdateOnFiber(n,e,t),markRetryLaneIfNotHydrated(e,t)}}var _enabled=!0;function dispatchDiscreteEvent(e,t,n,Ee){var Re=ReactSharedInternals.T;ReactSharedInternals.T=null;var Ce=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=2,dispatchEvent$1(e,t,n,Ee)}finally{ReactDOMSharedInternals.p=Ce,ReactSharedInternals.T=Re}}function dispatchContinuousEvent(e,t,n,Ee){var Re=ReactSharedInternals.T;ReactSharedInternals.T=null;var Ce=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=8,dispatchEvent$1(e,t,n,Ee)}finally{ReactDOMSharedInternals.p=Ce,ReactSharedInternals.T=Re}}function dispatchEvent$1(e,t,n,Ee){if(_enabled){var Re=findInstanceBlockingEvent(Ee);if(Re===null)dispatchEventForPluginEventSystem(e,t,Ee,return_targetInst,n),clearIfContinuousEvent(e,Ee);else if(queueIfContinuousEvent(Re,e,t,n,Ee))Ee.stopPropagation();else if(clearIfContinuousEvent(e,Ee),t&4&&-1<discreteReplayableEvents.indexOf(e)){for(;Re!==null;){var Ce=getInstanceFromNode(Re);if(Ce!==null)switch(Ce.tag){case 3:if(Ce=Ce.stateNode,Ce.current.memoizedState.isDehydrated){var Te=getHighestPriorityLanes(Ce.pendingLanes);if(Te!==0){var Me=Ce;for(Me.pendingLanes|=2,Me.entangledLanes|=2;Te;){var De=1<<31-clz32(Te);Me.entanglements[1]|=De,Te&=~De}ensureRootIsScheduled(Ce),!(executionContext&6)&&(workInProgressRootRenderTargetTime=now()+500,flushSyncWorkAcrossRoots_impl(0))}}break;case 31:case 13:Me=enqueueConcurrentRenderForLane(Ce,2),Me!==null&&scheduleUpdateOnFiber(Me,Ce,2),flushSyncWork$1(),markRetryLaneIfNotHydrated(Ce,2)}if(Ce=findInstanceBlockingEvent(Ee),Ce===null&&dispatchEventForPluginEventSystem(e,t,Ee,return_targetInst,n),Ce===Re)break;Re=Ce}Re!==null&&Ee.stopPropagation()}else dispatchEventForPluginEventSystem(e,t,Ee,null,n)}}function findInstanceBlockingEvent(e){return e=getEventTarget(e),findInstanceBlockingTarget(e)}var return_targetInst=null;function findInstanceBlockingTarget(e){if(return_targetInst=null,e=getClosestInstanceFromNode(e),e!==null){var t=getNearestMountedFiber(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=getSuspenseInstanceFromFiber(t),e!==null)return e;e=null}else if(n===31){if(e=getActivityInstanceFromFiber(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return return_targetInst=e,null}function getEventPriority(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(getCurrentPriorityLevel()){case ImmediatePriority:return 2;case UserBlockingPriority:return 8;case NormalPriority$1:case LowPriority:return 32;case IdlePriority:return 268435456;default:return 32}default:return 32}}var hasScheduledReplayAttempt=!1,queuedFocus=null,queuedDrag=null,queuedMouse=null,queuedPointers=new Map,queuedPointerCaptures=new Map,queuedExplicitHydrationTargets=[],discreteReplayableEvents="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function clearIfContinuousEvent(e,t){switch(e){case"focusin":case"focusout":queuedFocus=null;break;case"dragenter":case"dragleave":queuedDrag=null;break;case"mouseover":case"mouseout":queuedMouse=null;break;case"pointerover":case"pointerout":queuedPointers.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":queuedPointerCaptures.delete(t.pointerId)}}function accumulateOrCreateContinuousQueuedReplayableEvent(e,t,n,Ee,Re,Ce){return e===null||e.nativeEvent!==Ce?(e={blockedOn:t,domEventName:n,eventSystemFlags:Ee,nativeEvent:Ce,targetContainers:[Re]},t!==null&&(t=getInstanceFromNode(t),t!==null&&attemptContinuousHydration(t)),e):(e.eventSystemFlags|=Ee,t=e.targetContainers,Re!==null&&t.indexOf(Re)===-1&&t.push(Re),e)}function queueIfContinuousEvent(e,t,n,Ee,Re){switch(t){case"focusin":return queuedFocus=accumulateOrCreateContinuousQueuedReplayableEvent(queuedFocus,e,t,n,Ee,Re),!0;case"dragenter":return queuedDrag=accumulateOrCreateContinuousQueuedReplayableEvent(queuedDrag,e,t,n,Ee,Re),!0;case"mouseover":return queuedMouse=accumulateOrCreateContinuousQueuedReplayableEvent(queuedMouse,e,t,n,Ee,Re),!0;case"pointerover":var Ce=Re.pointerId;return queuedPointers.set(Ce,accumulateOrCreateContinuousQueuedReplayableEvent(queuedPointers.get(Ce)||null,e,t,n,Ee,Re)),!0;case"gotpointercapture":return Ce=Re.pointerId,queuedPointerCaptures.set(Ce,accumulateOrCreateContinuousQueuedReplayableEvent(queuedPointerCaptures.get(Ce)||null,e,t,n,Ee,Re)),!0}return!1}function attemptExplicitHydrationTarget(e){var t=getClosestInstanceFromNode(e.target);if(t!==null){var n=getNearestMountedFiber(t);if(n!==null){if(t=n.tag,t===13){if(t=getSuspenseInstanceFromFiber(n),t!==null){e.blockedOn=t,runWithPriority(e.priority,function(){attemptHydrationAtCurrentPriority(n)});return}}else if(t===31){if(t=getActivityInstanceFromFiber(n),t!==null){e.blockedOn=t,runWithPriority(e.priority,function(){attemptHydrationAtCurrentPriority(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function attemptReplayContinuousQueuedEvent(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=findInstanceBlockingEvent(e.nativeEvent);if(n===null){n=e.nativeEvent;var Ee=new n.constructor(n.type,n);currentReplayingEvent=Ee,n.target.dispatchEvent(Ee),currentReplayingEvent=null}else return t=getInstanceFromNode(n),t!==null&&attemptContinuousHydration(t),e.blockedOn=n,!1;t.shift()}return!0}function attemptReplayContinuousQueuedEventInMap(e,t,n){attemptReplayContinuousQueuedEvent(e)&&n.delete(t)}function replayUnblockedEvents(){hasScheduledReplayAttempt=!1,queuedFocus!==null&&attemptReplayContinuousQueuedEvent(queuedFocus)&&(queuedFocus=null),queuedDrag!==null&&attemptReplayContinuousQueuedEvent(queuedDrag)&&(queuedDrag=null),queuedMouse!==null&&attemptReplayContinuousQueuedEvent(queuedMouse)&&(queuedMouse=null),queuedPointers.forEach(attemptReplayContinuousQueuedEventInMap),queuedPointerCaptures.forEach(attemptReplayContinuousQueuedEventInMap)}function scheduleCallbackIfUnblocked(e,t){e.blockedOn===t&&(e.blockedOn=null,hasScheduledReplayAttempt||(hasScheduledReplayAttempt=!0,Scheduler.unstable_scheduleCallback(Scheduler.unstable_NormalPriority,replayUnblockedEvents)))}var lastScheduledReplayQueue=null;function scheduleReplayQueueIfNeeded(e){lastScheduledReplayQueue!==e&&(lastScheduledReplayQueue=e,Scheduler.unstable_scheduleCallback(Scheduler.unstable_NormalPriority,function(){lastScheduledReplayQueue===e&&(lastScheduledReplayQueue=null);for(var t=0;t<e.length;t+=3){var n=e[t],Ee=e[t+1],Re=e[t+2];if(typeof Ee!="function"){if(findInstanceBlockingTarget(Ee||n)===null)continue;break}var Ce=getInstanceFromNode(n);Ce!==null&&(e.splice(t,3),t-=3,startHostTransition(Ce,{pending:!0,data:Re,method:n.method,action:Ee},Ee,Re))}}))}function retryIfBlockedOn(e){function t(De){return scheduleCallbackIfUnblocked(De,e)}queuedFocus!==null&&scheduleCallbackIfUnblocked(queuedFocus,e),queuedDrag!==null&&scheduleCallbackIfUnblocked(queuedDrag,e),queuedMouse!==null&&scheduleCallbackIfUnblocked(queuedMouse,e),queuedPointers.forEach(t),queuedPointerCaptures.forEach(t);for(var n=0;n<queuedExplicitHydrationTargets.length;n++){var Ee=queuedExplicitHydrationTargets[n];Ee.blockedOn===e&&(Ee.blockedOn=null)}for(;0<queuedExplicitHydrationTargets.length&&(n=queuedExplicitHydrationTargets[0],n.blockedOn===null);)attemptExplicitHydrationTarget(n),n.blockedOn===null&&queuedExplicitHydrationTargets.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(Ee=0;Ee<n.length;Ee+=3){var Re=n[Ee],Ce=n[Ee+1],Te=Re[internalPropsKey]||null;if(typeof Ce=="function")Te||scheduleReplayQueueIfNeeded(n);else if(Te){var Me=null;if(Ce&&Ce.hasAttribute("formAction")){if(Re=Ce,Te=Ce[internalPropsKey]||null)Me=Te.formAction;else if(findInstanceBlockingTarget(Re)!==null)continue}else Me=Te.action;typeof Me=="function"?n[Ee+1]=Me:(n.splice(Ee,3),Ee-=3),scheduleReplayQueueIfNeeded(n)}}}function defaultOnDefaultTransitionIndicator(){function e(Ce){Ce.canIntercept&&Ce.info==="react-transition"&&Ce.intercept({handler:function(){return new Promise(function(Te){return Re=Te})},focusReset:"manual",scroll:"manual"})}function t(){Re!==null&&(Re(),Re=null),Ee||setTimeout(n,20)}function n(){if(!Ee&&!navigation.transition){var Ce=navigation.currentEntry;Ce&&Ce.url!=null&&navigation.navigate(Ce.url,{state:Ce.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var Ee=!1,Re=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){Ee=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),Re!==null&&(Re(),Re=null)}}}function ReactDOMRoot(e){this._internalRoot=e}ReactDOMHydrationRoot.prototype.render=ReactDOMRoot.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(formatProdErrorMessage(409));var n=t.current,Ee=requestUpdateLane();updateContainerImpl(n,Ee,e,t,null,null)};ReactDOMHydrationRoot.prototype.unmount=ReactDOMRoot.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;updateContainerImpl(e.current,2,null,e,null,null),flushSyncWork$1(),t[internalContainerInstanceKey]=null}};function ReactDOMHydrationRoot(e){this._internalRoot=e}ReactDOMHydrationRoot.prototype.unstable_scheduleHydration=function(e){if(e){var t=resolveUpdatePriority();e={blockedOn:null,target:e,priority:t};for(var n=0;n<queuedExplicitHydrationTargets.length&&t!==0&&t<queuedExplicitHydrationTargets[n].priority;n++);queuedExplicitHydrationTargets.splice(n,0,e),n===0&&attemptExplicitHydrationTarget(e)}};var isomorphicReactPackageVersion$jscomp$inline_1840=React$2.version;if(isomorphicReactPackageVersion$jscomp$inline_1840!=="19.2.0")throw Error(formatProdErrorMessage(527,isomorphicReactPackageVersion$jscomp$inline_1840,"19.2.0"));ReactDOMSharedInternals.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(formatProdErrorMessage(188)):(e=Object.keys(e).join(","),Error(formatProdErrorMessage(268,e)));return e=findCurrentFiberUsingSlowPath(t),e=e!==null?findCurrentHostFiberImpl(e):null,e=e===null?null:e.stateNode,e};var internals$jscomp$inline_2347={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ReactSharedInternals,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hook$jscomp$inline_2348=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hook$jscomp$inline_2348.isDisabled&&hook$jscomp$inline_2348.supportsFiber)try{rendererID=hook$jscomp$inline_2348.inject(internals$jscomp$inline_2347),injectedHook=hook$jscomp$inline_2348}catch{}}reactDomClient_production.createRoot=function(e,t){if(!isValidContainer(e))throw Error(formatProdErrorMessage(299));var n=!1,Ee="",Re=defaultOnUncaughtError,Ce=defaultOnCaughtError,Te=defaultOnRecoverableError;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(Ee=t.identifierPrefix),t.onUncaughtError!==void 0&&(Re=t.onUncaughtError),t.onCaughtError!==void 0&&(Ce=t.onCaughtError),t.onRecoverableError!==void 0&&(Te=t.onRecoverableError)),t=createFiberRoot(e,1,!1,null,null,n,Ee,null,Re,Ce,Te,defaultOnDefaultTransitionIndicator),e[internalContainerInstanceKey]=t.current,listenToAllSupportedEvents(e),new ReactDOMRoot(t)};reactDomClient_production.hydrateRoot=function(e,t,n){if(!isValidContainer(e))throw Error(formatProdErrorMessage(299));var Ee=!1,Re="",Ce=defaultOnUncaughtError,Te=defaultOnCaughtError,Me=defaultOnRecoverableError,De=null;return n!=null&&(n.unstable_strictMode===!0&&(Ee=!0),n.identifierPrefix!==void 0&&(Re=n.identifierPrefix),n.onUncaughtError!==void 0&&(Ce=n.onUncaughtError),n.onCaughtError!==void 0&&(Te=n.onCaughtError),n.onRecoverableError!==void 0&&(Me=n.onRecoverableError),n.formState!==void 0&&(De=n.formState)),t=createFiberRoot(e,1,!0,t,n??null,Ee,Re,De,Ce,Te,Me,defaultOnDefaultTransitionIndicator),t.context=getContextForSubtree(null),n=t.current,Ee=requestUpdateLane(),Ee=getBumpedLaneForHydrationByLane(Ee),Re=createUpdate(Ee),Re.callback=null,enqueueUpdate(n,Re,Ee),n=Ee,t.current.lanes=n,markRootUpdated$1(t,n),ensureRootIsScheduled(t),e[internalContainerInstanceKey]=t.current,listenToAllSupportedEvents(e),new ReactDOMHydrationRoot(t)};reactDomClient_production.version="19.2.0";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),client.exports=reactDomClient_production;var clientExports=client.exports;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var Ee in n)Object.prototype.hasOwnProperty.call(n,Ee)&&(e[Ee]=n[Ee])}return e},_extends$2.apply(this,arguments)}var Action;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(e){e===void 0&&(e={});function t(Ee,Re){let{pathname:Ce,search:Te,hash:Me}=Ee.location;return createLocation("",{pathname:Ce,search:Te,hash:Me},Re.state&&Re.state.usr||null,Re.state&&Re.state.key||"default")}function n(Ee,Re){return typeof Re=="string"?Re:createPath(Re)}return getUrlBasedHistory(t,n,null,e)}function invariant(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function warning(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function getHistoryState(e,t){return{usr:e.state,key:e.key,idx:t}}function createLocation(e,t,n,Ee){return n===void 0&&(n=null),_extends$2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?parsePath(t):t,{state:n,key:t&&t.key||Ee||createKey$1()})}function createPath(e){let{pathname:t="/",search:n="",hash:Ee=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),Ee&&Ee!=="#"&&(t+=Ee.charAt(0)==="#"?Ee:"#"+Ee),t}function parsePath(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let Ee=e.indexOf("?");Ee>=0&&(t.search=e.substr(Ee),e=e.substr(0,Ee)),e&&(t.pathname=e)}return t}function getUrlBasedHistory(e,t,n,Ee){Ee===void 0&&(Ee={});let{window:Re=document.defaultView,v5Compat:Ce=!1}=Ee,Te=Re.history,Me=Action.Pop,De=null,Oe=Be();Oe==null&&(Oe=0,Te.replaceState(_extends$2({},Te.state,{idx:Oe}),""));function Be(){return(Te.state||{idx:null}).idx}function ze(){Me=Action.Pop;let We=Be(),qe=We==null?null:We-Oe;Oe=We,De&&De({action:Me,location:Ve.location,delta:qe})}function $e(We,qe){Me=Action.Push;let Ge=createLocation(Ve.location,We,qe);Oe=Be()+1;let Ye=getHistoryState(Ge,Oe),Ke=Ve.createHref(Ge);try{Te.pushState(Ye,"",Ke)}catch(Xe){if(Xe instanceof DOMException&&Xe.name==="DataCloneError")throw Xe;Re.location.assign(Ke)}Ce&&De&&De({action:Me,location:Ve.location,delta:1})}function He(We,qe){Me=Action.Replace;let Ge=createLocation(Ve.location,We,qe);Oe=Be();let Ye=getHistoryState(Ge,Oe),Ke=Ve.createHref(Ge);Te.replaceState(Ye,"",Ke),Ce&&De&&De({action:Me,location:Ve.location,delta:0})}function Ue(We){let qe=Re.location.origin!=="null"?Re.location.origin:Re.location.href,Ge=typeof We=="string"?We:createPath(We);return Ge=Ge.replace(/ $/,"%20"),invariant(qe,"No window.location.(origin|href) available to create URL for href: "+Ge),new URL(Ge,qe)}let Ve={get action(){return Me},get location(){return e(Re,Te)},listen(We){if(De)throw new Error("A history only accepts one active listener");return Re.addEventListener(PopStateEventType,ze),De=We,()=>{Re.removeEventListener(PopStateEventType,ze),De=null}},createHref(We){return t(Re,We)},createURL:Ue,encodeLocation(We){let qe=Ue(We);return{pathname:qe.pathname,search:qe.search,hash:qe.hash}},push:$e,replace:He,go(We){return Te.go(We)}};return Ve}var ResultType;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(e){return e.index===!0}function convertRoutesToDataRoutes(e,t,n,Ee){return n===void 0&&(n=[]),Ee===void 0&&(Ee={}),e.map((Re,Ce)=>{let Te=[...n,String(Ce)],Me=typeof Re.id=="string"?Re.id:Te.join("-");if(invariant(Re.index!==!0||!Re.children,"Cannot specify children on an index route"),invariant(!Ee[Me],'Found a route id collision on id "'+Me+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(Re)){let De=_extends$2({},Re,t(Re),{id:Me});return Ee[Me]=De,De}else{let De=_extends$2({},Re,t(Re),{id:Me,children:void 0});return Ee[Me]=De,Re.children&&(De.children=convertRoutesToDataRoutes(Re.children,t,Te,Ee)),De}})}function matchRoutes(e,t,n){return n===void 0&&(n="/"),matchRoutesImpl(e,t,n,!1)}function matchRoutesImpl(e,t,n,Ee){let Re=typeof t=="string"?parsePath(t):t,Ce=stripBasename(Re.pathname||"/",n);if(Ce==null)return null;let Te=flattenRoutes(e);rankRouteBranches(Te);let Me=null;for(let De=0;Me==null&&De<Te.length;++De){let Oe=decodePath(Ce);Me=matchRouteBranch(Te[De],Oe,Ee)}return Me}function convertRouteMatchToUiMatch(e,t){let{route:n,pathname:Ee,params:Re}=e;return{id:n.id,pathname:Ee,params:Re,data:t[n.id],handle:n.handle}}function flattenRoutes(e,t,n,Ee){t===void 0&&(t=[]),n===void 0&&(n=[]),Ee===void 0&&(Ee="");let Re=(Ce,Te,Me)=>{let De={relativePath:Me===void 0?Ce.path||"":Me,caseSensitive:Ce.caseSensitive===!0,childrenIndex:Te,route:Ce};De.relativePath.startsWith("/")&&(invariant(De.relativePath.startsWith(Ee),'Absolute route path "'+De.relativePath+'" nested under path '+('"'+Ee+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),De.relativePath=De.relativePath.slice(Ee.length));let Oe=joinPaths([Ee,De.relativePath]),Be=n.concat(De);Ce.children&&Ce.children.length>0&&(invariant(Ce.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+Oe+'".')),flattenRoutes(Ce.children,t,Be,Oe)),!(Ce.path==null&&!Ce.index)&&t.push({path:Oe,score:computeScore(Oe,Ce.index),routesMeta:Be})};return e.forEach((Ce,Te)=>{var Me;if(Ce.path===""||!((Me=Ce.path)!=null&&Me.includes("?")))Re(Ce,Te);else for(let De of explodeOptionalSegments(Ce.path))Re(Ce,Te,De)}),t}function explodeOptionalSegments(e){let t=e.split("/");if(t.length===0)return[];let[n,...Ee]=t,Re=n.endsWith("?"),Ce=n.replace(/\?$/,"");if(Ee.length===0)return Re?[Ce,""]:[Ce];let Te=explodeOptionalSegments(Ee.join("/")),Me=[];return Me.push(...Te.map(De=>De===""?Ce:[Ce,De].join("/"))),Re&&Me.push(...Te),Me.map(De=>e.startsWith("/")&&De===""?"/":De)}function rankRouteBranches(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:compareIndexes(t.routesMeta.map(Ee=>Ee.childrenIndex),n.routesMeta.map(Ee=>Ee.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,t){let n=e.split("/"),Ee=n.length;return n.some(isSplat)&&(Ee+=splatPenalty),t&&(Ee+=indexRouteValue),n.filter(Re=>!isSplat(Re)).reduce((Re,Ce)=>Re+(paramRe.test(Ce)?dynamicSegmentValue:Ce===""?emptySegmentValue:staticSegmentValue),Ee)}function compareIndexes(e,t){return e.length===t.length&&e.slice(0,-1).every((Ee,Re)=>Ee===t[Re])?e[e.length-1]-t[t.length-1]:0}function matchRouteBranch(e,t,n){n===void 0&&(n=!1);let{routesMeta:Ee}=e,Re={},Ce="/",Te=[];for(let Me=0;Me<Ee.length;++Me){let De=Ee[Me],Oe=Me===Ee.length-1,Be=Ce==="/"?t:t.slice(Ce.length)||"/",ze=matchPath({path:De.relativePath,caseSensitive:De.caseSensitive,end:Oe},Be),$e=De.route;if(!ze&&Oe&&n&&!Ee[Ee.length-1].route.index&&(ze=matchPath({path:De.relativePath,caseSensitive:De.caseSensitive,end:!1},Be)),!ze)return null;Object.assign(Re,ze.params),Te.push({params:Re,pathname:joinPaths([Ce,ze.pathname]),pathnameBase:normalizePathname(joinPaths([Ce,ze.pathnameBase])),route:$e}),ze.pathnameBase!=="/"&&(Ce=joinPaths([Ce,ze.pathnameBase]))}return Te}function matchPath(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,Ee]=compilePath(e.path,e.caseSensitive,e.end),Re=t.match(n);if(!Re)return null;let Ce=Re[0],Te=Ce.replace(/(.)\/+$/,"$1"),Me=Re.slice(1);return{params:Ee.reduce((Oe,Be,ze)=>{let{paramName:$e,isOptional:He}=Be;if($e==="*"){let Ve=Me[ze]||"";Te=Ce.slice(0,Ce.length-Ve.length).replace(/(.)\/+$/,"$1")}const Ue=Me[ze];return He&&!Ue?Oe[$e]=void 0:Oe[$e]=(Ue||"").replace(/%2F/g,"/"),Oe},{}),pathname:Ce,pathnameBase:Te,pattern:e}}function compilePath(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let Ee=[],Re="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(Te,Me,De)=>(Ee.push({paramName:Me,isOptional:De!=null}),De?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(Ee.push({paramName:"*"}),Re+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?Re+="\\/*$":e!==""&&e!=="/"&&(Re+="(?:(?=\\/|$))"),[new RegExp(Re,t?void 0:"i"),Ee]}function decodePath(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return warning(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function stripBasename(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,Ee=e.charAt(n);return Ee&&Ee!=="/"?null:e.slice(n)||"/"}const ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=e=>ABSOLUTE_URL_REGEX$1.test(e);function resolvePath(e,t){t===void 0&&(t="/");let{pathname:n,search:Ee="",hash:Re=""}=typeof e=="string"?parsePath(e):e,Ce;if(n)if(isAbsoluteUrl(n))Ce=n;else{if(n.includes("//")){let Te=n;n=n.replace(/\/\/+/g,"/"),warning(!1,"Pathnames cannot have embedded double slashes - normalizing "+(Te+" -> "+n))}n.startsWith("/")?Ce=resolvePathname(n.substring(1),"/"):Ce=resolvePathname(n,t)}else Ce=t;return{pathname:Ce,search:normalizeSearch(Ee),hash:normalizeHash(Re)}}function resolvePathname(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(Re=>{Re===".."?n.length>1&&n.pop():Re!=="."&&n.push(Re)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(e,t,n,Ee){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(Ee)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function getResolveToMatches(e,t){let n=getPathContributingMatches(e);return t?n.map((Ee,Re)=>Re===n.length-1?Ee.pathname:Ee.pathnameBase):n.map(Ee=>Ee.pathnameBase)}function resolveTo(e,t,n,Ee){Ee===void 0&&(Ee=!1);let Re;typeof e=="string"?Re=parsePath(e):(Re=_extends$2({},e),invariant(!Re.pathname||!Re.pathname.includes("?"),getInvalidPathError("?","pathname","search",Re)),invariant(!Re.pathname||!Re.pathname.includes("#"),getInvalidPathError("#","pathname","hash",Re)),invariant(!Re.search||!Re.search.includes("#"),getInvalidPathError("#","search","hash",Re)));let Ce=e===""||Re.pathname==="",Te=Ce?"/":Re.pathname,Me;if(Te==null)Me=n;else{let ze=t.length-1;if(!Ee&&Te.startsWith("..")){let $e=Te.split("/");for(;$e[0]==="..";)$e.shift(),ze-=1;Re.pathname=$e.join("/")}Me=ze>=0?t[ze]:"/"}let De=resolvePath(Re,Me),Oe=Te&&Te!=="/"&&Te.endsWith("/"),Be=(Ce||Te===".")&&n.endsWith("/");return!De.pathname.endsWith("/")&&(Oe||Be)&&(De.pathname+="/"),De}const joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class ErrorResponseImpl{constructor(t,n,Ee,Re){Re===void 0&&(Re=!1),this.status=t,this.statusText=n||"",this.internal=Re,Ee instanceof Error?(this.data=Ee.toString(),this.error=Ee):this.data=Ee}}function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions";function createRouter(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",Ee=!n;invariant(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let Re;if(e.mapRouteProperties)Re=e.mapRouteProperties;else if(e.detectErrorBoundary){let Br=e.detectErrorBoundary;Re=Vr=>({hasErrorBoundary:Br(Vr)})}else Re=defaultMapRouteProperties;let Ce={},Te=convertRoutesToDataRoutes(e.routes,Re,void 0,Ce),Me,De=e.basename||"/",Oe=e.dataStrategy||defaultDataStrategy,Be=e.patchRoutesOnNavigation,ze=_extends$2({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),$e=null,He=new Set,Ue=null,Ve=null,We=null,qe=e.hydrationData!=null,Ge=matchRoutes(Te,e.history.location,De),Ye=!1,Ke=null;if(Ge==null&&!Be){let Br=getInternalRouterError(404,{pathname:e.history.location.pathname}),{matches:Vr,route:Jr}=getShortCircuitMatches(Te);Ge=Vr,Ke={[Jr.id]:Br}}Ge&&!e.hydrationData&&oa(Ge,Te,e.history.location.pathname).active&&(Ge=null);let Xe;if(Ge)if(Ge.some(Br=>Br.route.lazy))Xe=!1;else if(!Ge.some(Br=>Br.route.loader))Xe=!0;else if(ze.v7_partialHydration){let Br=e.hydrationData?e.hydrationData.loaderData:null,Vr=e.hydrationData?e.hydrationData.errors:null;if(Vr){let Jr=Ge.findIndex(dn=>Vr[dn.route.id]!==void 0);Xe=Ge.slice(0,Jr+1).every(dn=>!shouldLoadRouteOnHydration(dn.route,Br,Vr))}else Xe=Ge.every(Jr=>!shouldLoadRouteOnHydration(Jr.route,Br,Vr))}else Xe=e.hydrationData!=null;else if(Xe=!1,Ge=[],ze.v7_partialHydration){let Br=oa(null,Te,e.history.location.pathname);Br.active&&Br.matches&&(Ye=!0,Ge=Br.matches)}let Ze,er={historyAction:e.history.action,location:e.history.location,matches:Ge,initialized:Xe,navigation:IDLE_NAVIGATION,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||Ke,fetchers:new Map,blockers:new Map},St=Action.Pop,ar=!1,hr,ur=!1,dr=new Map,vr=null,yr=!1,br=!1,lr=[],cr=new Set,rr=new Map,pr=0,mr=-1,ir=new Map,nr=new Set,gr=new Map,Er=new Map,Cr=new Set,Nr=new Map,Mr=new Map,Fr;function $r(){if($e=e.history.listen(Br=>{let{action:Vr,location:Jr,delta:dn}=Br;if(Fr){Fr(),Fr=void 0;return}warning(Mr.size===0||dn!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let bn=Yn({currentLocation:er.location,nextLocation:Jr,historyAction:Vr});if(bn&&dn!=null){let Cn=new Promise(zn=>{Fr=zn});e.history.go(dn*-1),Hn(bn,{state:"blocked",location:Jr,proceed(){Hn(bn,{state:"proceeding",proceed:void 0,reset:void 0,location:Jr}),Cn.then(()=>e.history.go(dn))},reset(){let zn=new Map(er.blockers);zn.set(bn,IDLE_BLOCKER),nn({blockers:zn})}});return}return Xr(Vr,Jr)}),n){restoreAppliedTransitions(t,dr);let Br=()=>persistAppliedTransitions(t,dr);t.addEventListener("pagehide",Br),vr=()=>t.removeEventListener("pagehide",Br)}return er.initialized||Xr(Action.Pop,er.location,{initialHydration:!0}),Ze}function Wr(){$e&&$e(),vr&&vr(),He.clear(),hr&&hr.abort(),er.fetchers.forEach((Br,Vr)=>Nn(Vr)),er.blockers.forEach((Br,Vr)=>fs(Vr))}function Zr(Br){return He.add(Br),()=>He.delete(Br)}function nn(Br,Vr){Vr===void 0&&(Vr={}),er=_extends$2({},er,Br);let Jr=[],dn=[];ze.v7_fetcherPersist&&er.fetchers.forEach((bn,Cn)=>{bn.state==="idle"&&(Cr.has(Cn)?dn.push(Cn):Jr.push(Cn))}),Cr.forEach(bn=>{!er.fetchers.has(bn)&&!rr.has(bn)&&dn.push(bn)}),[...He].forEach(bn=>bn(er,{deletedFetchers:dn,viewTransitionOpts:Vr.viewTransitionOpts,flushSync:Vr.flushSync===!0})),ze.v7_fetcherPersist?(Jr.forEach(bn=>er.fetchers.delete(bn)),dn.forEach(bn=>Nn(bn))):dn.forEach(bn=>Cr.delete(bn))}function an(Br,Vr,Jr){var dn,bn;let{flushSync:Cn}=Jr===void 0?{}:Jr,zn=er.actionData!=null&&er.navigation.formMethod!=null&&isMutationMethod(er.navigation.formMethod)&&er.navigation.state==="loading"&&((dn=Br.state)==null?void 0:dn._isRedirect)!==!0,Tn;Vr.actionData?Object.keys(Vr.actionData).length>0?Tn=Vr.actionData:Tn=null:zn?Tn=er.actionData:Tn=null;let An=Vr.loaderData?mergeLoaderData(er.loaderData,Vr.loaderData,Vr.matches||[],Vr.errors):er.loaderData,kn=er.blockers;kn.size>0&&(kn=new Map(kn),kn.forEach((Wn,Cs)=>kn.set(Cs,IDLE_BLOCKER)));let _n=ar===!0||er.navigation.formMethod!=null&&isMutationMethod(er.navigation.formMethod)&&((bn=Br.state)==null?void 0:bn._isRedirect)!==!0;Me&&(Te=Me,Me=void 0),yr||St===Action.Pop||(St===Action.Push?e.history.push(Br,Br.state):St===Action.Replace&&e.history.replace(Br,Br.state));let $n;if(St===Action.Pop){let Wn=dr.get(er.location.pathname);Wn&&Wn.has(Br.pathname)?$n={currentLocation:er.location,nextLocation:Br}:dr.has(Br.pathname)&&($n={currentLocation:Br,nextLocation:er.location})}else if(ur){let Wn=dr.get(er.location.pathname);Wn?Wn.add(Br.pathname):(Wn=new Set([Br.pathname]),dr.set(er.location.pathname,Wn)),$n={currentLocation:er.location,nextLocation:Br}}nn(_extends$2({},Vr,{actionData:Tn,loaderData:An,historyAction:St,location:Br,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:zs(Br,Vr.matches||er.matches),preventScrollReset:_n,blockers:kn}),{viewTransitionOpts:$n,flushSync:Cn===!0}),St=Action.Pop,ar=!1,ur=!1,yr=!1,br=!1,lr=[]}async function Yr(Br,Vr){if(typeof Br=="number"){e.history.go(Br);return}let Jr=normalizeTo(er.location,er.matches,De,ze.v7_prependBasename,Br,ze.v7_relativeSplatPath,Vr==null?void 0:Vr.fromRouteId,Vr==null?void 0:Vr.relative),{path:dn,submission:bn,error:Cn}=normalizeNavigateOptions(ze.v7_normalizeFormMethod,!1,Jr,Vr),zn=er.location,Tn=createLocation(er.location,dn,Vr&&Vr.state);Tn=_extends$2({},Tn,e.history.encodeLocation(Tn));let An=Vr&&Vr.replace!=null?Vr.replace:void 0,kn=Action.Push;An===!0?kn=Action.Replace:An===!1||bn!=null&&isMutationMethod(bn.formMethod)&&bn.formAction===er.location.pathname+er.location.search&&(kn=Action.Replace);let _n=Vr&&"preventScrollReset"in Vr?Vr.preventScrollReset===!0:void 0,$n=(Vr&&Vr.flushSync)===!0,Wn=Yn({currentLocation:zn,nextLocation:Tn,historyAction:kn});if(Wn){Hn(Wn,{state:"blocked",location:Tn,proceed(){Hn(Wn,{state:"proceeding",proceed:void 0,reset:void 0,location:Tn}),Yr(Br,Vr)},reset(){let Cs=new Map(er.blockers);Cs.set(Wn,IDLE_BLOCKER),nn({blockers:Cs})}});return}return await Xr(kn,Tn,{submission:bn,pendingError:Cn,preventScrollReset:_n,replace:Vr&&Vr.replace,enableViewTransition:Vr&&Vr.viewTransition,flushSync:$n})}function Rr(){if(Sn(),nn({revalidation:"loading"}),er.navigation.state!=="submitting"){if(er.navigation.state==="idle"){Xr(er.historyAction,er.location,{startUninterruptedRevalidation:!0});return}Xr(St||er.historyAction,er.navigation.location,{overrideNavigation:er.navigation,enableViewTransition:ur===!0})}}async function Xr(Br,Vr,Jr){hr&&hr.abort(),hr=null,St=Br,yr=(Jr&&Jr.startUninterruptedRevalidation)===!0,Ua(er.location,er.matches),ar=(Jr&&Jr.preventScrollReset)===!0,ur=(Jr&&Jr.enableViewTransition)===!0;let dn=Me||Te,bn=Jr&&Jr.overrideNavigation,Cn=Jr!=null&&Jr.initialHydration&&er.matches&&er.matches.length>0&&!Ye?er.matches:matchRoutes(dn,Vr,De),zn=(Jr&&Jr.flushSync)===!0;if(Cn&&er.initialized&&!br&&isHashChangeOnly(er.location,Vr)&&!(Jr&&Jr.submission&&isMutationMethod(Jr.submission.formMethod))){an(Vr,{matches:Cn},{flushSync:zn});return}let Tn=oa(Cn,dn,Vr.pathname);if(Tn.active&&Tn.matches&&(Cn=Tn.matches),!Cn){let{error:ls,notFoundMatches:ss,route:ys}=Es(Vr.pathname);an(Vr,{matches:ss,loaderData:{},errors:{[ys.id]:ls}},{flushSync:zn});return}hr=new AbortController;let An=createClientSideRequest(e.history,Vr,hr.signal,Jr&&Jr.submission),kn;if(Jr&&Jr.pendingError)kn=[findNearestBoundary(Cn).route.id,{type:ResultType.error,error:Jr.pendingError}];else if(Jr&&Jr.submission&&isMutationMethod(Jr.submission.formMethod)){let ls=await mn(An,Vr,Jr.submission,Cn,Tn.active,{replace:Jr.replace,flushSync:zn});if(ls.shortCircuited)return;if(ls.pendingActionResult){let[ss,ys]=ls.pendingActionResult;if(isErrorResult(ys)&&isRouteErrorResponse(ys.error)&&ys.error.status===404){hr=null,an(Vr,{matches:ls.matches,loaderData:{},errors:{[ss]:ys.error}});return}}Cn=ls.matches||Cn,kn=ls.pendingActionResult,bn=getLoadingNavigation(Vr,Jr.submission),zn=!1,Tn.active=!1,An=createClientSideRequest(e.history,An.url,An.signal)}let{shortCircuited:_n,matches:$n,loaderData:Wn,errors:Cs}=await En(An,Vr,Cn,Tn.active,bn,Jr&&Jr.submission,Jr&&Jr.fetcherSubmission,Jr&&Jr.replace,Jr&&Jr.initialHydration===!0,zn,kn);_n||(hr=null,an(Vr,_extends$2({matches:$n||Cn},getActionDataForCommit(kn),{loaderData:Wn,errors:Cs})))}async function mn(Br,Vr,Jr,dn,bn,Cn){Cn===void 0&&(Cn={}),Sn();let zn=getSubmittingNavigation(Vr,Jr);if(nn({navigation:zn},{flushSync:Cn.flushSync===!0}),bn){let kn=await ra(dn,Vr.pathname,Br.signal);if(kn.type==="aborted")return{shortCircuited:!0};if(kn.type==="error"){let _n=findNearestBoundary(kn.partialMatches).route.id;return{matches:kn.partialMatches,pendingActionResult:[_n,{type:ResultType.error,error:kn.error}]}}else if(kn.matches)dn=kn.matches;else{let{notFoundMatches:_n,error:$n,route:Wn}=Es(Vr.pathname);return{matches:_n,pendingActionResult:[Wn.id,{type:ResultType.error,error:$n}]}}}let Tn,An=getTargetMatch(dn,Vr);if(!An.route.action&&!An.route.lazy)Tn={type:ResultType.error,error:getInternalRouterError(405,{method:Br.method,pathname:Vr.pathname,routeId:An.route.id})};else if(Tn=(await en("action",er,Br,[An],dn,null))[An.route.id],Br.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(Tn)){let kn;return Cn&&Cn.replace!=null?kn=Cn.replace:kn=normalizeRedirectLocation(Tn.response.headers.get("Location"),new URL(Br.url),De)===er.location.pathname+er.location.search,await sn(Br,Tn,!0,{submission:Jr,replace:kn}),{shortCircuited:!0}}if(isDeferredResult(Tn))throw getInternalRouterError(400,{type:"defer-action"});if(isErrorResult(Tn)){let kn=findNearestBoundary(dn,An.route.id);return(Cn&&Cn.replace)!==!0&&(St=Action.Push),{matches:dn,pendingActionResult:[kn.route.id,Tn]}}return{matches:dn,pendingActionResult:[An.route.id,Tn]}}async function En(Br,Vr,Jr,dn,bn,Cn,zn,Tn,An,kn,_n){let $n=bn||getLoadingNavigation(Vr,Cn),Wn=Cn||zn||getSubmissionFromNavigation($n),Cs=!yr&&(!ze.v7_partialHydration||!An);if(dn){if(Cs){let Ss=rn(_n);nn(_extends$2({navigation:$n},Ss!==void 0?{actionData:Ss}:{}),{flushSync:kn})}let as=await ra(Jr,Vr.pathname,Br.signal);if(as.type==="aborted")return{shortCircuited:!0};if(as.type==="error"){let Ss=findNearestBoundary(as.partialMatches).route.id;return{matches:as.partialMatches,loaderData:{},errors:{[Ss]:as.error}}}else if(as.matches)Jr=as.matches;else{let{error:Ss,notFoundMatches:Ca,route:Oa}=Es(Vr.pathname);return{matches:Ca,loaderData:{},errors:{[Oa.id]:Ss}}}}let ls=Me||Te,[ss,ys]=getMatchesToLoad(e.history,er,Jr,Wn,Vr,ze.v7_partialHydration&&An===!0,ze.v7_skipActionErrorRevalidation,br,lr,cr,Cr,gr,nr,ls,De,_n);if(Zn(as=>!(Jr&&Jr.some(Ss=>Ss.route.id===as))||ss&&ss.some(Ss=>Ss.route.id===as)),mr=++pr,ss.length===0&&ys.length===0){let as=Xn();return an(Vr,_extends$2({matches:Jr,loaderData:{},errors:_n&&isErrorResult(_n[1])?{[_n[0]]:_n[1].error}:null},getActionDataForCommit(_n),as?{fetchers:new Map(er.fetchers)}:{}),{flushSync:kn}),{shortCircuited:!0}}if(Cs){let as={};if(!dn){as.navigation=$n;let Ss=rn(_n);Ss!==void 0&&(as.actionData=Ss)}ys.length>0&&(as.fetchers=_r(ys)),nn(as,{flushSync:kn})}ys.forEach(as=>{qn(as.key),as.controller&&rr.set(as.key,as.controller)});let ua=()=>ys.forEach(as=>qn(as.key));hr&&hr.signal.addEventListener("abort",ua);let{loaderResults:Ea,fetcherResults:da}=await fn(er,Jr,ss,ys,Br);if(Br.signal.aborted)return{shortCircuited:!0};hr&&hr.signal.removeEventListener("abort",ua),ys.forEach(as=>rr.delete(as.key));let Zs=findRedirect(Ea);if(Zs)return await sn(Br,Zs.result,!0,{replace:Tn}),{shortCircuited:!0};if(Zs=findRedirect(da),Zs)return nr.add(Zs.key),await sn(Br,Zs.result,!0,{replace:Tn}),{shortCircuited:!0};let{loaderData:ii,errors:Ia}=processLoaderData(er,Jr,Ea,_n,ys,da,Nr);Nr.forEach((as,Ss)=>{as.subscribe(Ca=>{(Ca||as.done)&&Nr.delete(Ss)})}),ze.v7_partialHydration&&An&&er.errors&&(Ia=_extends$2({},er.errors,Ia));let Fs=Xn(),La=xs(mr),Va=Fs||La||ys.length>0;return _extends$2({matches:Jr,loaderData:ii,errors:Ia},Va?{fetchers:new Map(er.fetchers)}:{})}function rn(Br){if(Br&&!isErrorResult(Br[1]))return{[Br[0]]:Br[1].data};if(er.actionData)return Object.keys(er.actionData).length===0?null:er.actionData}function _r(Br){return Br.forEach(Vr=>{let Jr=er.fetchers.get(Vr.key),dn=getLoadingFetcher(void 0,Jr?Jr.data:void 0);er.fetchers.set(Vr.key,dn)}),new Map(er.fetchers)}function Lr(Br,Vr,Jr,dn){if(Ee)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");qn(Br);let bn=(dn&&dn.flushSync)===!0,Cn=Me||Te,zn=normalizeTo(er.location,er.matches,De,ze.v7_prependBasename,Jr,ze.v7_relativeSplatPath,Vr,dn==null?void 0:dn.relative),Tn=matchRoutes(Cn,zn,De),An=oa(Tn,Cn,zn);if(An.active&&An.matches&&(Tn=An.matches),!Tn){jn(Br,Vr,getInternalRouterError(404,{pathname:zn}),{flushSync:bn});return}let{path:kn,submission:_n,error:$n}=normalizeNavigateOptions(ze.v7_normalizeFormMethod,!0,zn,dn);if($n){jn(Br,Vr,$n,{flushSync:bn});return}let Wn=getTargetMatch(Tn,kn),Cs=(dn&&dn.preventScrollReset)===!0;if(_n&&isMutationMethod(_n.formMethod)){Or(Br,Vr,kn,Wn,Tn,An.active,bn,Cs,_n);return}gr.set(Br,{routeId:Vr,path:kn}),tn(Br,Vr,kn,Wn,Tn,An.active,bn,Cs,_n)}async function Or(Br,Vr,Jr,dn,bn,Cn,zn,Tn,An){Sn(),gr.delete(Br);function kn(ms){if(!ms.route.action&&!ms.route.lazy){let pa=getInternalRouterError(405,{method:An.formMethod,pathname:Jr,routeId:Vr});return jn(Br,Vr,pa,{flushSync:zn}),!0}return!1}if(!Cn&&kn(dn))return;let _n=er.fetchers.get(Br);Rn(Br,getSubmittingFetcher(An,_n),{flushSync:zn});let $n=new AbortController,Wn=createClientSideRequest(e.history,Jr,$n.signal,An);if(Cn){let ms=await ra(bn,new URL(Wn.url).pathname,Wn.signal,Br);if(ms.type==="aborted")return;if(ms.type==="error"){jn(Br,Vr,ms.error,{flushSync:zn});return}else if(ms.matches){if(bn=ms.matches,dn=getTargetMatch(bn,Jr),kn(dn))return}else{jn(Br,Vr,getInternalRouterError(404,{pathname:Jr}),{flushSync:zn});return}}rr.set(Br,$n);let Cs=pr,ss=(await en("action",er,Wn,[dn],bn,Br))[dn.route.id];if(Wn.signal.aborted){rr.get(Br)===$n&&rr.delete(Br);return}if(ze.v7_fetcherPersist&&Cr.has(Br)){if(isRedirectResult(ss)||isErrorResult(ss)){Rn(Br,getDoneFetcher(void 0));return}}else{if(isRedirectResult(ss))if(rr.delete(Br),mr>Cs){Rn(Br,getDoneFetcher(void 0));return}else return nr.add(Br),Rn(Br,getLoadingFetcher(An)),sn(Wn,ss,!1,{fetcherSubmission:An,preventScrollReset:Tn});if(isErrorResult(ss)){jn(Br,Vr,ss.error);return}}if(isDeferredResult(ss))throw getInternalRouterError(400,{type:"defer-action"});let ys=er.navigation.location||er.location,ua=createClientSideRequest(e.history,ys,$n.signal),Ea=Me||Te,da=er.navigation.state!=="idle"?matchRoutes(Ea,er.navigation.location,De):er.matches;invariant(da,"Didn't find any matches after fetcher action");let Zs=++pr;ir.set(Br,Zs);let ii=getLoadingFetcher(An,ss.data);er.fetchers.set(Br,ii);let[Ia,Fs]=getMatchesToLoad(e.history,er,da,An,ys,!1,ze.v7_skipActionErrorRevalidation,br,lr,cr,Cr,gr,nr,Ea,De,[dn.route.id,ss]);Fs.filter(ms=>ms.key!==Br).forEach(ms=>{let pa=ms.key,Li=er.fetchers.get(pa),_s=getLoadingFetcher(void 0,Li?Li.data:void 0);er.fetchers.set(pa,_s),qn(pa),ms.controller&&rr.set(pa,ms.controller)}),nn({fetchers:new Map(er.fetchers)});let La=()=>Fs.forEach(ms=>qn(ms.key));$n.signal.addEventListener("abort",La);let{loaderResults:Va,fetcherResults:as}=await fn(er,da,Ia,Fs,ua);if($n.signal.aborted)return;$n.signal.removeEventListener("abort",La),ir.delete(Br),rr.delete(Br),Fs.forEach(ms=>rr.delete(ms.key));let Ss=findRedirect(Va);if(Ss)return sn(ua,Ss.result,!1,{preventScrollReset:Tn});if(Ss=findRedirect(as),Ss)return nr.add(Ss.key),sn(ua,Ss.result,!1,{preventScrollReset:Tn});let{loaderData:Ca,errors:Oa}=processLoaderData(er,da,Va,void 0,Fs,as,Nr);if(er.fetchers.has(Br)){let ms=getDoneFetcher(ss.data);er.fetchers.set(Br,ms)}xs(Zs),er.navigation.state==="loading"&&Zs>mr?(invariant(St,"Expected pending action"),hr&&hr.abort(),an(er.navigation.location,{matches:da,loaderData:Ca,errors:Oa,fetchers:new Map(er.fetchers)})):(nn({errors:Oa,loaderData:mergeLoaderData(er.loaderData,Ca,da,Oa),fetchers:new Map(er.fetchers)}),br=!1)}async function tn(Br,Vr,Jr,dn,bn,Cn,zn,Tn,An){let kn=er.fetchers.get(Br);Rn(Br,getLoadingFetcher(An,kn?kn.data:void 0),{flushSync:zn});let _n=new AbortController,$n=createClientSideRequest(e.history,Jr,_n.signal);if(Cn){let ss=await ra(bn,new URL($n.url).pathname,$n.signal,Br);if(ss.type==="aborted")return;if(ss.type==="error"){jn(Br,Vr,ss.error,{flushSync:zn});return}else if(ss.matches)bn=ss.matches,dn=getTargetMatch(bn,Jr);else{jn(Br,Vr,getInternalRouterError(404,{pathname:Jr}),{flushSync:zn});return}}rr.set(Br,_n);let Wn=pr,ls=(await en("loader",er,$n,[dn],bn,Br))[dn.route.id];if(isDeferredResult(ls)&&(ls=await resolveDeferredData(ls,$n.signal,!0)||ls),rr.get(Br)===_n&&rr.delete(Br),!$n.signal.aborted){if(Cr.has(Br)){Rn(Br,getDoneFetcher(void 0));return}if(isRedirectResult(ls))if(mr>Wn){Rn(Br,getDoneFetcher(void 0));return}else{nr.add(Br),await sn($n,ls,!1,{preventScrollReset:Tn});return}if(isErrorResult(ls)){jn(Br,Vr,ls.error);return}invariant(!isDeferredResult(ls),"Unhandled fetcher deferred data"),Rn(Br,getDoneFetcher(ls.data))}}async function sn(Br,Vr,Jr,dn){let{submission:bn,fetcherSubmission:Cn,preventScrollReset:zn,replace:Tn}=dn===void 0?{}:dn;Vr.response.headers.has("X-Remix-Revalidate")&&(br=!0);let An=Vr.response.headers.get("Location");invariant(An,"Expected a Location header on the redirect Response"),An=normalizeRedirectLocation(An,new URL(Br.url),De);let kn=createLocation(er.location,An,{_isRedirect:!0});if(n){let ss=!1;if(Vr.response.headers.has("X-Remix-Reload-Document"))ss=!0;else if(ABSOLUTE_URL_REGEX$2.test(An)){const ys=e.history.createURL(An);ss=ys.origin!==t.location.origin||stripBasename(ys.pathname,De)==null}if(ss){Tn?t.location.replace(An):t.location.assign(An);return}}hr=null;let _n=Tn===!0||Vr.response.headers.has("X-Remix-Replace")?Action.Replace:Action.Push,{formMethod:$n,formAction:Wn,formEncType:Cs}=er.navigation;!bn&&!Cn&&$n&&Wn&&Cs&&(bn=getSubmissionFromNavigation(er.navigation));let ls=bn||Cn;if(redirectPreserveMethodStatusCodes.has(Vr.response.status)&&ls&&isMutationMethod(ls.formMethod))await Xr(_n,kn,{submission:_extends$2({},ls,{formAction:An}),preventScrollReset:zn||ar,enableViewTransition:Jr?ur:void 0});else{let ss=getLoadingNavigation(kn,bn);await Xr(_n,kn,{overrideNavigation:ss,fetcherSubmission:Cn,preventScrollReset:zn||ar,enableViewTransition:Jr?ur:void 0})}}async function en(Br,Vr,Jr,dn,bn,Cn){let zn,Tn={};try{zn=await callDataStrategyImpl(Oe,Br,Vr,Jr,dn,bn,Cn,Ce,Re)}catch(An){return dn.forEach(kn=>{Tn[kn.route.id]={type:ResultType.error,error:An}}),Tn}for(let[An,kn]of Object.entries(zn))if(isRedirectDataStrategyResultResult(kn)){let _n=kn.result;Tn[An]={type:ResultType.redirect,response:normalizeRelativeRoutingRedirectResponse(_n,Jr,An,bn,De,ze.v7_relativeSplatPath)}}else Tn[An]=await convertDataStrategyResultToDataResult(kn);return Tn}async function fn(Br,Vr,Jr,dn,bn){let Cn=Br.matches,zn=en("loader",Br,bn,Jr,Vr,null),Tn=Promise.all(dn.map(async _n=>{if(_n.matches&&_n.match&&_n.controller){let Wn=(await en("loader",Br,createClientSideRequest(e.history,_n.path,_n.controller.signal),[_n.match],_n.matches,_n.key))[_n.match.route.id];return{[_n.key]:Wn}}else return Promise.resolve({[_n.key]:{type:ResultType.error,error:getInternalRouterError(404,{pathname:_n.path})}})})),An=await zn,kn=(await Tn).reduce((_n,$n)=>Object.assign(_n,$n),{});return await Promise.all([resolveNavigationDeferredResults(Vr,An,bn.signal,Cn,Br.loaderData),resolveFetcherDeferredResults(Vr,kn,dn)]),{loaderResults:An,fetcherResults:kn}}function Sn(){br=!0,lr.push(...Zn()),gr.forEach((Br,Vr)=>{rr.has(Vr)&&cr.add(Vr),qn(Vr)})}function Rn(Br,Vr,Jr){Jr===void 0&&(Jr={}),er.fetchers.set(Br,Vr),nn({fetchers:new Map(er.fetchers)},{flushSync:(Jr&&Jr.flushSync)===!0})}function jn(Br,Vr,Jr,dn){dn===void 0&&(dn={});let bn=findNearestBoundary(er.matches,Vr);Nn(Br),nn({errors:{[bn.route.id]:Jr},fetchers:new Map(er.fetchers)},{flushSync:(dn&&dn.flushSync)===!0})}function On(Br){return Er.set(Br,(Er.get(Br)||0)+1),Cr.has(Br)&&Cr.delete(Br),er.fetchers.get(Br)||IDLE_FETCHER}function Nn(Br){let Vr=er.fetchers.get(Br);rr.has(Br)&&!(Vr&&Vr.state==="loading"&&ir.has(Br))&&qn(Br),gr.delete(Br),ir.delete(Br),nr.delete(Br),ze.v7_fetcherPersist&&Cr.delete(Br),cr.delete(Br),er.fetchers.delete(Br)}function js(Br){let Vr=(Er.get(Br)||0)-1;Vr<=0?(Er.delete(Br),Cr.add(Br),ze.v7_fetcherPersist||Nn(Br)):Er.set(Br,Vr),nn({fetchers:new Map(er.fetchers)})}function qn(Br){let Vr=rr.get(Br);Vr&&(Vr.abort(),rr.delete(Br))}function Gn(Br){for(let Vr of Br){let Jr=On(Vr),dn=getDoneFetcher(Jr.data);er.fetchers.set(Vr,dn)}}function Xn(){let Br=[],Vr=!1;for(let Jr of nr){let dn=er.fetchers.get(Jr);invariant(dn,"Expected fetcher: "+Jr),dn.state==="loading"&&(nr.delete(Jr),Br.push(Jr),Vr=!0)}return Gn(Br),Vr}function xs(Br){let Vr=[];for(let[Jr,dn]of ir)if(dn<Br){let bn=er.fetchers.get(Jr);invariant(bn,"Expected fetcher: "+Jr),bn.state==="loading"&&(qn(Jr),ir.delete(Jr),Vr.push(Jr))}return Gn(Vr),Vr.length>0}function Bn(Br,Vr){let Jr=er.blockers.get(Br)||IDLE_BLOCKER;return Mr.get(Br)!==Vr&&Mr.set(Br,Vr),Jr}function fs(Br){er.blockers.delete(Br),Mr.delete(Br)}function Hn(Br,Vr){let Jr=er.blockers.get(Br)||IDLE_BLOCKER;invariant(Jr.state==="unblocked"&&Vr.state==="blocked"||Jr.state==="blocked"&&Vr.state==="blocked"||Jr.state==="blocked"&&Vr.state==="proceeding"||Jr.state==="blocked"&&Vr.state==="unblocked"||Jr.state==="proceeding"&&Vr.state==="unblocked","Invalid blocker state transition: "+Jr.state+" -> "+Vr.state);let dn=new Map(er.blockers);dn.set(Br,Vr),nn({blockers:dn})}function Yn(Br){let{currentLocation:Vr,nextLocation:Jr,historyAction:dn}=Br;if(Mr.size===0)return;Mr.size>1&&warning(!1,"A router only supports one blocker at a time");let bn=Array.from(Mr.entries()),[Cn,zn]=bn[bn.length-1],Tn=er.blockers.get(Cn);if(!(Tn&&Tn.state==="proceeding")&&zn({currentLocation:Vr,nextLocation:Jr,historyAction:dn}))return Cn}function Es(Br){let Vr=getInternalRouterError(404,{pathname:Br}),Jr=Me||Te,{matches:dn,route:bn}=getShortCircuitMatches(Jr);return Zn(),{notFoundMatches:dn,route:bn,error:Vr}}function Zn(Br){let Vr=[];return Nr.forEach((Jr,dn)=>{(!Br||Br(dn))&&(Jr.cancel(),Vr.push(dn),Nr.delete(dn))}),Vr}function Un(Br,Vr,Jr){if(Ue=Br,We=Vr,Ve=Jr||null,!qe&&er.navigation===IDLE_NAVIGATION){qe=!0;let dn=zs(er.location,er.matches);dn!=null&&nn({restoreScrollPosition:dn})}return()=>{Ue=null,We=null,Ve=null}}function ds(Br,Vr){return Ve&&Ve(Br,Vr.map(dn=>convertRouteMatchToUiMatch(dn,er.loaderData)))||Br.key}function Ua(Br,Vr){if(Ue&&We){let Jr=ds(Br,Vr);Ue[Jr]=We()}}function zs(Br,Vr){if(Ue){let Jr=ds(Br,Vr),dn=Ue[Jr];if(typeof dn=="number")return dn}return null}function oa(Br,Vr,Jr){if(Be)if(Br){if(Object.keys(Br[0].params).length>0)return{active:!0,matches:matchRoutesImpl(Vr,Jr,De,!0)}}else return{active:!0,matches:matchRoutesImpl(Vr,Jr,De,!0)||[]};return{active:!1,matches:null}}async function ra(Br,Vr,Jr,dn){if(!Be)return{type:"success",matches:Br};let bn=Br;for(;;){let Cn=Me==null,zn=Me||Te,Tn=Ce;try{await Be({signal:Jr,path:Vr,matches:bn,fetcherKey:dn,patch:(_n,$n)=>{Jr.aborted||patchRoutesImpl(_n,$n,zn,Tn,Re)}})}catch(_n){return{type:"error",error:_n,partialMatches:bn}}finally{Cn&&!Jr.aborted&&(Te=[...Te])}if(Jr.aborted)return{type:"aborted"};let An=matchRoutes(zn,Vr,De);if(An)return{type:"success",matches:An};let kn=matchRoutesImpl(zn,Vr,De,!0);if(!kn||bn.length===kn.length&&bn.every((_n,$n)=>_n.route.id===kn[$n].route.id))return{type:"success",matches:null};bn=kn}}function Vn(Br){Ce={},Me=convertRoutesToDataRoutes(Br,Re,void 0,Ce)}function ka(Br,Vr){let Jr=Me==null;patchRoutesImpl(Br,Vr,Me||Te,Ce,Re),Jr&&(Te=[...Te],nn({}))}return Ze={get basename(){return De},get future(){return ze},get state(){return er},get routes(){return Te},get window(){return t},initialize:$r,subscribe:Zr,enableScrollRestoration:Un,navigate:Yr,fetch:Lr,revalidate:Rr,createHref:Br=>e.history.createHref(Br),encodeLocation:Br=>e.history.encodeLocation(Br),getFetcher:On,deleteFetcher:js,dispose:Wr,getBlocker:Bn,deleteBlocker:fs,patchRoutes:ka,_internalFetchControllers:rr,_internalActiveDeferreds:Nr,_internalSetRoutes:Vn},Ze}function isSubmissionNavigation(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function normalizeTo(e,t,n,Ee,Re,Ce,Te,Me){let De,Oe;if(Te){De=[];for(let ze of t)if(De.push(ze),ze.route.id===Te){Oe=ze;break}}else De=t,Oe=t[t.length-1];let Be=resolveTo(Re||".",getResolveToMatches(De,Ce),stripBasename(e.pathname,n)||e.pathname,Me==="path");if(Re==null&&(Be.search=e.search,Be.hash=e.hash),(Re==null||Re===""||Re===".")&&Oe){let ze=hasNakedIndexQuery(Be.search);if(Oe.route.index&&!ze)Be.search=Be.search?Be.search.replace(/^\?/,"?index&"):"?index";else if(!Oe.route.index&&ze){let $e=new URLSearchParams(Be.search),He=$e.getAll("index");$e.delete("index"),He.filter(Ve=>Ve).forEach(Ve=>$e.append("index",Ve));let Ue=$e.toString();Be.search=Ue?"?"+Ue:""}}return Ee&&n!=="/"&&(Be.pathname=Be.pathname==="/"?n:joinPaths([n,Be.pathname])),createPath(Be)}function normalizeNavigateOptions(e,t,n,Ee){if(!Ee||!isSubmissionNavigation(Ee))return{path:n};if(Ee.formMethod&&!isValidMethod(Ee.formMethod))return{path:n,error:getInternalRouterError(405,{method:Ee.formMethod})};let Re=()=>({path:n,error:getInternalRouterError(400,{type:"invalid-body"})}),Ce=Ee.formMethod||"get",Te=e?Ce.toUpperCase():Ce.toLowerCase(),Me=stripHashFromPath(n);if(Ee.body!==void 0){if(Ee.formEncType==="text/plain"){if(!isMutationMethod(Te))return Re();let $e=typeof Ee.body=="string"?Ee.body:Ee.body instanceof FormData||Ee.body instanceof URLSearchParams?Array.from(Ee.body.entries()).reduce((He,Ue)=>{let[Ve,We]=Ue;return""+He+Ve+"="+We+`
`},""):String(Ee.body);return{path:n,submission:{formMethod:Te,formAction:Me,formEncType:Ee.formEncType,formData:void 0,json:void 0,text:$e}}}else if(Ee.formEncType==="application/json"){if(!isMutationMethod(Te))return Re();try{let $e=typeof Ee.body=="string"?JSON.parse(Ee.body):Ee.body;return{path:n,submission:{formMethod:Te,formAction:Me,formEncType:Ee.formEncType,formData:void 0,json:$e,text:void 0}}}catch{return Re()}}}invariant(typeof FormData=="function","FormData is not available in this environment");let De,Oe;if(Ee.formData)De=convertFormDataToSearchParams(Ee.formData),Oe=Ee.formData;else if(Ee.body instanceof FormData)De=convertFormDataToSearchParams(Ee.body),Oe=Ee.body;else if(Ee.body instanceof URLSearchParams)De=Ee.body,Oe=convertSearchParamsToFormData(De);else if(Ee.body==null)De=new URLSearchParams,Oe=new FormData;else try{De=new URLSearchParams(Ee.body),Oe=convertSearchParamsToFormData(De)}catch{return Re()}let Be={formMethod:Te,formAction:Me,formEncType:Ee&&Ee.formEncType||"application/x-www-form-urlencoded",formData:Oe,json:void 0,text:void 0};if(isMutationMethod(Be.formMethod))return{path:n,submission:Be};let ze=parsePath(n);return t&&ze.search&&hasNakedIndexQuery(ze.search)&&De.append("index",""),ze.search="?"+De,{path:createPath(ze),submission:Be}}function getLoaderMatchesUntilBoundary(e,t,n){n===void 0&&(n=!1);let Ee=e.findIndex(Re=>Re.route.id===t);return Ee>=0?e.slice(0,n?Ee+1:Ee):e}function getMatchesToLoad(e,t,n,Ee,Re,Ce,Te,Me,De,Oe,Be,ze,$e,He,Ue,Ve){let We=Ve?isErrorResult(Ve[1])?Ve[1].error:Ve[1].data:void 0,qe=e.createURL(t.location),Ge=e.createURL(Re),Ye=n;Ce&&t.errors?Ye=getLoaderMatchesUntilBoundary(n,Object.keys(t.errors)[0],!0):Ve&&isErrorResult(Ve[1])&&(Ye=getLoaderMatchesUntilBoundary(n,Ve[0]));let Ke=Ve?Ve[1].statusCode:void 0,Xe=Te&&Ke&&Ke>=400,Ze=Ye.filter((St,ar)=>{let{route:hr}=St;if(hr.lazy)return!0;if(hr.loader==null)return!1;if(Ce)return shouldLoadRouteOnHydration(hr,t.loaderData,t.errors);if(isNewLoader(t.loaderData,t.matches[ar],St)||De.some(vr=>vr===St.route.id))return!0;let ur=t.matches[ar],dr=St;return shouldRevalidateLoader(St,_extends$2({currentUrl:qe,currentParams:ur.params,nextUrl:Ge,nextParams:dr.params},Ee,{actionResult:We,actionStatus:Ke,defaultShouldRevalidate:Xe?!1:Me||qe.pathname+qe.search===Ge.pathname+Ge.search||qe.search!==Ge.search||isNewRouteInstance(ur,dr)}))}),er=[];return ze.forEach((St,ar)=>{if(Ce||!n.some(yr=>yr.route.id===St.routeId)||Be.has(ar))return;let hr=matchRoutes(He,St.path,Ue);if(!hr){er.push({key:ar,routeId:St.routeId,path:St.path,matches:null,match:null,controller:null});return}let ur=t.fetchers.get(ar),dr=getTargetMatch(hr,St.path),vr=!1;$e.has(ar)?vr=!1:Oe.has(ar)?(Oe.delete(ar),vr=!0):ur&&ur.state!=="idle"&&ur.data===void 0?vr=Me:vr=shouldRevalidateLoader(dr,_extends$2({currentUrl:qe,currentParams:t.matches[t.matches.length-1].params,nextUrl:Ge,nextParams:n[n.length-1].params},Ee,{actionResult:We,actionStatus:Ke,defaultShouldRevalidate:Xe?!1:Me})),vr&&er.push({key:ar,routeId:St.routeId,path:St.path,matches:hr,match:dr,controller:new AbortController})}),[Ze,er]}function shouldLoadRouteOnHydration(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let Ee=t!=null&&t[e.id]!==void 0,Re=n!=null&&n[e.id]!==void 0;return!Ee&&Re?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!Ee&&!Re}function isNewLoader(e,t,n){let Ee=!t||n.route.id!==t.route.id,Re=e[n.route.id]===void 0;return Ee||Re}function isNewRouteInstance(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function shouldRevalidateLoader(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function patchRoutesImpl(e,t,n,Ee,Re){var Ce;let Te;if(e){let Oe=Ee[e];invariant(Oe,"No route found to patch children into: routeId = "+e),Oe.children||(Oe.children=[]),Te=Oe.children}else Te=n;let Me=t.filter(Oe=>!Te.some(Be=>isSameRoute(Oe,Be))),De=convertRoutesToDataRoutes(Me,Re,[e||"_","patch",String(((Ce=Te)==null?void 0:Ce.length)||"0")],Ee);Te.push(...De)}function isSameRoute(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,Ee)=>{var Re;return(Re=t.children)==null?void 0:Re.some(Ce=>isSameRoute(n,Ce))}):!1}async function loadLazyRouteModule(e,t,n){if(!e.lazy)return;let Ee=await e.lazy();if(!e.lazy)return;let Re=n[e.id];invariant(Re,"No route found in manifest");let Ce={};for(let Te in Ee){let De=Re[Te]!==void 0&&Te!=="hasErrorBoundary";warning(!De,'Route "'+Re.id+'" has a static property "'+Te+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+Te+'" will be ignored.')),!De&&!immutableRouteKeys.has(Te)&&(Ce[Te]=Ee[Te])}Object.assign(Re,Ce),Object.assign(Re,_extends$2({},t(Re),{lazy:void 0}))}async function defaultDataStrategy(e){let{matches:t}=e,n=t.filter(Re=>Re.shouldLoad);return(await Promise.all(n.map(Re=>Re.resolve()))).reduce((Re,Ce,Te)=>Object.assign(Re,{[n[Te].route.id]:Ce}),{})}async function callDataStrategyImpl(e,t,n,Ee,Re,Ce,Te,Me,De,Oe){let Be=Ce.map(He=>He.route.lazy?loadLazyRouteModule(He.route,De,Me):void 0),ze=Ce.map((He,Ue)=>{let Ve=Be[Ue],We=Re.some(Ge=>Ge.route.id===He.route.id);return _extends$2({},He,{shouldLoad:We,resolve:async Ge=>(Ge&&Ee.method==="GET"&&(He.route.lazy||He.route.loader)&&(We=!0),We?callLoaderOrAction(t,Ee,He,Ve,Ge,Oe):Promise.resolve({type:ResultType.data,result:void 0}))})}),$e=await e({matches:ze,request:Ee,params:Ce[0].params,fetcherKey:Te,context:Oe});try{await Promise.all(Be)}catch{}return $e}async function callLoaderOrAction(e,t,n,Ee,Re,Ce){let Te,Me,De=Oe=>{let Be,ze=new Promise((Ue,Ve)=>Be=Ve);Me=()=>Be(),t.signal.addEventListener("abort",Me);let $e=Ue=>typeof Oe!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):Oe({request:t,params:n.params,context:Ce},...Ue!==void 0?[Ue]:[]),He=(async()=>{try{return{type:"data",result:await(Re?Re(Ve=>$e(Ve)):$e())}}catch(Ue){return{type:"error",result:Ue}}})();return Promise.race([He,ze])};try{let Oe=n.route[e];if(Ee)if(Oe){let Be,[ze]=await Promise.all([De(Oe).catch($e=>{Be=$e}),Ee]);if(Be!==void 0)throw Be;Te=ze}else if(await Ee,Oe=n.route[e],Oe)Te=await De(Oe);else if(e==="action"){let Be=new URL(t.url),ze=Be.pathname+Be.search;throw getInternalRouterError(405,{method:t.method,pathname:ze,routeId:n.route.id})}else return{type:ResultType.data,result:void 0};else if(Oe)Te=await De(Oe);else{let Be=new URL(t.url),ze=Be.pathname+Be.search;throw getInternalRouterError(404,{pathname:ze})}invariant(Te.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(Oe){return{type:ResultType.error,result:Oe}}finally{Me&&t.signal.removeEventListener("abort",Me)}return Te}async function convertDataStrategyResultToDataResult(e){let{result:t,type:n}=e;if(isResponse(t)){let ze;try{let $e=t.headers.get("Content-Type");$e&&/\bapplication\/json\b/.test($e)?t.body==null?ze=null:ze=await t.json():ze=await t.text()}catch($e){return{type:ResultType.error,error:$e}}return n===ResultType.error?{type:ResultType.error,error:new ErrorResponseImpl(t.status,t.statusText,ze),statusCode:t.status,headers:t.headers}:{type:ResultType.data,data:ze,statusCode:t.status,headers:t.headers}}if(n===ResultType.error){if(isDataWithResponseInit(t)){var Ee,Re;if(t.data instanceof Error){var Ce,Te;return{type:ResultType.error,error:t.data,statusCode:(Ce=t.init)==null?void 0:Ce.status,headers:(Te=t.init)!=null&&Te.headers?new Headers(t.init.headers):void 0}}return{type:ResultType.error,error:new ErrorResponseImpl(((Ee=t.init)==null?void 0:Ee.status)||500,void 0,t.data),statusCode:isRouteErrorResponse(t)?t.status:void 0,headers:(Re=t.init)!=null&&Re.headers?new Headers(t.init.headers):void 0}}return{type:ResultType.error,error:t,statusCode:isRouteErrorResponse(t)?t.status:void 0}}if(isDeferredData(t)){var Me,De;return{type:ResultType.deferred,deferredData:t,statusCode:(Me=t.init)==null?void 0:Me.status,headers:((De=t.init)==null?void 0:De.headers)&&new Headers(t.init.headers)}}if(isDataWithResponseInit(t)){var Oe,Be;return{type:ResultType.data,data:t.data,statusCode:(Oe=t.init)==null?void 0:Oe.status,headers:(Be=t.init)!=null&&Be.headers?new Headers(t.init.headers):void 0}}return{type:ResultType.data,data:t}}function normalizeRelativeRoutingRedirectResponse(e,t,n,Ee,Re,Ce){let Te=e.headers.get("Location");if(invariant(Te,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$2.test(Te)){let Me=Ee.slice(0,Ee.findIndex(De=>De.route.id===n)+1);Te=normalizeTo(new URL(t.url),Me,Re,!0,Te,Ce),e.headers.set("Location",Te)}return e}function normalizeRedirectLocation(e,t,n){if(ABSOLUTE_URL_REGEX$2.test(e)){let Ee=e,Re=Ee.startsWith("//")?new URL(t.protocol+Ee):new URL(Ee),Ce=stripBasename(Re.pathname,n)!=null;if(Re.origin===t.origin&&Ce)return Re.pathname+Re.search+Re.hash}return e}function createClientSideRequest(e,t,n,Ee){let Re=e.createURL(stripHashFromPath(t)).toString(),Ce={signal:n};if(Ee&&isMutationMethod(Ee.formMethod)){let{formMethod:Te,formEncType:Me}=Ee;Ce.method=Te.toUpperCase(),Me==="application/json"?(Ce.headers=new Headers({"Content-Type":Me}),Ce.body=JSON.stringify(Ee.json)):Me==="text/plain"?Ce.body=Ee.text:Me==="application/x-www-form-urlencoded"&&Ee.formData?Ce.body=convertFormDataToSearchParams(Ee.formData):Ce.body=Ee.formData}return new Request(Re,Ce)}function convertFormDataToSearchParams(e){let t=new URLSearchParams;for(let[n,Ee]of e.entries())t.append(n,typeof Ee=="string"?Ee:Ee.name);return t}function convertSearchParamsToFormData(e){let t=new FormData;for(let[n,Ee]of e.entries())t.append(n,Ee);return t}function processRouteLoaderData(e,t,n,Ee,Re){let Ce={},Te=null,Me,De=!1,Oe={},Be=n&&isErrorResult(n[1])?n[1].error:void 0;return e.forEach(ze=>{if(!(ze.route.id in t))return;let $e=ze.route.id,He=t[$e];if(invariant(!isRedirectResult(He),"Cannot handle redirect results in processLoaderData"),isErrorResult(He)){let Ue=He.error;Be!==void 0&&(Ue=Be,Be=void 0),Te=Te||{};{let Ve=findNearestBoundary(e,$e);Te[Ve.route.id]==null&&(Te[Ve.route.id]=Ue)}Ce[$e]=void 0,De||(De=!0,Me=isRouteErrorResponse(He.error)?He.error.status:500),He.headers&&(Oe[$e]=He.headers)}else isDeferredResult(He)?(Ee.set($e,He.deferredData),Ce[$e]=He.deferredData.data,He.statusCode!=null&&He.statusCode!==200&&!De&&(Me=He.statusCode),He.headers&&(Oe[$e]=He.headers)):(Ce[$e]=He.data,He.statusCode&&He.statusCode!==200&&!De&&(Me=He.statusCode),He.headers&&(Oe[$e]=He.headers))}),Be!==void 0&&n&&(Te={[n[0]]:Be},Ce[n[0]]=void 0),{loaderData:Ce,errors:Te,statusCode:Me||200,loaderHeaders:Oe}}function processLoaderData(e,t,n,Ee,Re,Ce,Te){let{loaderData:Me,errors:De}=processRouteLoaderData(t,n,Ee,Te);return Re.forEach(Oe=>{let{key:Be,match:ze,controller:$e}=Oe,He=Ce[Be];if(invariant(He,"Did not find corresponding fetcher result"),!($e&&$e.signal.aborted))if(isErrorResult(He)){let Ue=findNearestBoundary(e.matches,ze==null?void 0:ze.route.id);De&&De[Ue.route.id]||(De=_extends$2({},De,{[Ue.route.id]:He.error})),e.fetchers.delete(Be)}else if(isRedirectResult(He))invariant(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(He))invariant(!1,"Unhandled fetcher deferred data");else{let Ue=getDoneFetcher(He.data);e.fetchers.set(Be,Ue)}}),{loaderData:Me,errors:De}}function mergeLoaderData(e,t,n,Ee){let Re=_extends$2({},t);for(let Ce of n){let Te=Ce.route.id;if(t.hasOwnProperty(Te)?t[Te]!==void 0&&(Re[Te]=t[Te]):e[Te]!==void 0&&Ce.route.loader&&(Re[Te]=e[Te]),Ee&&Ee.hasOwnProperty(Te))break}return Re}function getActionDataForCommit(e){return e?isErrorResult(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function findNearestBoundary(e,t){return(t?e.slice(0,e.findIndex(Ee=>Ee.route.id===t)+1):[...e]).reverse().find(Ee=>Ee.route.hasErrorBoundary===!0)||e[0]}function getShortCircuitMatches(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function getInternalRouterError(e,t){let{pathname:n,routeId:Ee,method:Re,type:Ce,message:Te}=t===void 0?{}:t,Me="Unknown Server Error",De="Unknown @remix-run/router error";return e===400?(Me="Bad Request",Re&&n&&Ee?De="You made a "+Re+' request to "'+n+'" but '+('did not provide a `loader` for route "'+Ee+'", ')+"so there is no way to handle the request.":Ce==="defer-action"?De="defer() is not supported in actions":Ce==="invalid-body"&&(De="Unable to encode submission body")):e===403?(Me="Forbidden",De='Route "'+Ee+'" does not match URL "'+n+'"'):e===404?(Me="Not Found",De='No route matches URL "'+n+'"'):e===405&&(Me="Method Not Allowed",Re&&n&&Ee?De="You made a "+Re.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+Ee+'", ')+"so there is no way to handle the request.":Re&&(De='Invalid request method "'+Re.toUpperCase()+'"')),new ErrorResponseImpl(e||500,Me,new Error(De),!0)}function findRedirect(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[Ee,Re]=t[n];if(isRedirectResult(Re))return{key:Ee,result:Re}}}function stripHashFromPath(e){let t=typeof e=="string"?parsePath(e):e;return createPath(_extends$2({},t,{hash:""}))}function isHashChangeOnly(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function isRedirectDataStrategyResultResult(e){return isResponse(e.result)&&redirectStatusCodes.has(e.result.status)}function isDeferredResult(e){return e.type===ResultType.deferred}function isErrorResult(e){return e.type===ResultType.error}function isRedirectResult(e){return(e&&e.type)===ResultType.redirect}function isDataWithResponseInit(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function isDeferredData(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function isResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function isValidMethod(e){return validRequestMethods.has(e.toLowerCase())}function isMutationMethod(e){return validMutationMethods.has(e.toLowerCase())}async function resolveNavigationDeferredResults(e,t,n,Ee,Re){let Ce=Object.entries(t);for(let Te=0;Te<Ce.length;Te++){let[Me,De]=Ce[Te],Oe=e.find($e=>($e==null?void 0:$e.route.id)===Me);if(!Oe)continue;let Be=Ee.find($e=>$e.route.id===Oe.route.id),ze=Be!=null&&!isNewRouteInstance(Be,Oe)&&(Re&&Re[Oe.route.id])!==void 0;isDeferredResult(De)&&ze&&await resolveDeferredData(De,n,!1).then($e=>{$e&&(t[Me]=$e)})}}async function resolveFetcherDeferredResults(e,t,n){for(let Ee=0;Ee<n.length;Ee++){let{key:Re,routeId:Ce,controller:Te}=n[Ee],Me=t[Re];e.find(Oe=>(Oe==null?void 0:Oe.route.id)===Ce)&&isDeferredResult(Me)&&(invariant(Te,"Expected an AbortController for revalidating fetcher deferred result"),await resolveDeferredData(Me,Te.signal,!0).then(Oe=>{Oe&&(t[Re]=Oe)}))}}async function resolveDeferredData(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:ResultType.data,data:e.deferredData.unwrappedData}}catch(Re){return{type:ResultType.error,error:Re}}return{type:ResultType.data,data:e.deferredData.data}}}function hasNakedIndexQuery(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function getTargetMatch(e,t){let n=typeof t=="string"?parsePath(t).search:t.search;if(e[e.length-1].route.index&&hasNakedIndexQuery(n||""))return e[e.length-1];let Ee=getPathContributingMatches(e);return Ee[Ee.length-1]}function getSubmissionFromNavigation(e){let{formMethod:t,formAction:n,formEncType:Ee,text:Re,formData:Ce,json:Te}=e;if(!(!t||!n||!Ee)){if(Re!=null)return{formMethod:t,formAction:n,formEncType:Ee,formData:void 0,json:void 0,text:Re};if(Ce!=null)return{formMethod:t,formAction:n,formEncType:Ee,formData:Ce,json:void 0,text:void 0};if(Te!==void 0)return{formMethod:t,formAction:n,formEncType:Ee,formData:void 0,json:Te,text:void 0}}}function getLoadingNavigation(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function getLoadingFetcher(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function getSubmittingFetcher(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function getDoneFetcher(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function restoreAppliedTransitions(e,t){try{let n=e.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(n){let Ee=JSON.parse(n);for(let[Re,Ce]of Object.entries(Ee||{}))Ce&&Array.isArray(Ce)&&t.set(Re,new Set(Ce||[]))}}catch{}}function persistAppliedTransitions(e,t){if(t.size>0){let n={};for(let[Ee,Re]of t)n[Ee]=[...Re];try{e.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(n))}catch(Ee){warning(!1,"Failed to save applied view transitions in sessionStorage ("+Ee+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var Ee in n)Object.prototype.hasOwnProperty.call(n,Ee)&&(e[Ee]=n[Ee])}return e},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(e,t){let{relative:n}=t===void 0?{}:t;useInRouterContext()||invariant(!1);let{basename:Ee,navigator:Re}=reactExports.useContext(NavigationContext),{hash:Ce,pathname:Te,search:Me}=useResolvedPath(e,{relative:n}),De=Te;return Ee!=="/"&&(De=Te==="/"?Ee:joinPaths([Ee,Te])),Re.createHref({pathname:De,search:Me,hash:Ce})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let e=reactExports.useContext(DataRouterContext),{basename:t,future:n,navigator:Ee}=reactExports.useContext(NavigationContext),{matches:Re}=reactExports.useContext(RouteContext),{pathname:Ce}=useLocation(),Te=JSON.stringify(getResolveToMatches(Re,n.v7_relativeSplatPath)),Me=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{Me.current=!0}),reactExports.useCallback(function(Oe,Be){if(Be===void 0&&(Be={}),!Me.current)return;if(typeof Oe=="number"){Ee.go(Oe);return}let ze=resolveTo(Oe,JSON.parse(Te),Ce,Be.relative==="path");e==null&&t!=="/"&&(ze.pathname=ze.pathname==="/"?t:joinPaths([t,ze.pathname])),(Be.replace?Ee.replace:Ee.push)(ze,Be.state,Be)},[t,Ee,Te,Ce,e])}const OutletContext=reactExports.createContext(null);function useOutlet(e){let t=reactExports.useContext(RouteContext).outlet;return t&&reactExports.createElement(OutletContext.Provider,{value:e},t)}function useParams(){let{matches:e}=reactExports.useContext(RouteContext),t=e[e.length-1];return t?t.params:{}}function useResolvedPath(e,t){let{relative:n}=t===void 0?{}:t,{future:Ee}=reactExports.useContext(NavigationContext),{matches:Re}=reactExports.useContext(RouteContext),{pathname:Ce}=useLocation(),Te=JSON.stringify(getResolveToMatches(Re,Ee.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(Te),Ce,n==="path"),[e,Te,Ce,n])}function useRoutesImpl(e,t,n,Ee){useInRouterContext()||invariant(!1);let{navigator:Re}=reactExports.useContext(NavigationContext),{matches:Ce}=reactExports.useContext(RouteContext),Te=Ce[Ce.length-1],Me=Te?Te.params:{};Te&&Te.pathname;let De=Te?Te.pathnameBase:"/";Te&&Te.route;let Oe=useLocation(),Be;Be=Oe;let ze=Be.pathname||"/",$e=ze;if(De!=="/"){let Ve=De.replace(/^\//,"").split("/");$e="/"+ze.replace(/^\//,"").split("/").slice(Ve.length).join("/")}let He=matchRoutes(e,{pathname:$e});return _renderMatches(He&&He.map(Ve=>Object.assign({},Ve,{params:Object.assign({},Me,Ve.params),pathname:joinPaths([De,Re.encodeLocation?Re.encodeLocation(Ve.pathname).pathname:Ve.pathname]),pathnameBase:Ve.pathnameBase==="/"?De:joinPaths([De,Re.encodeLocation?Re.encodeLocation(Ve.pathnameBase).pathname:Ve.pathnameBase])})),Ce,n,Ee)}function DefaultErrorComponent(){let e=useRouteError(),t=isRouteErrorResponse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,Re={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},t),n?reactExports.createElement("pre",{style:Re},n):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(e){let{routeContext:t,match:n,children:Ee}=e,Re=reactExports.useContext(DataRouterContext);return Re&&Re.static&&Re.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(Re.staticContext._deepestRenderedBoundaryId=n.route.id),reactExports.createElement(RouteContext.Provider,{value:t},Ee)}function _renderMatches(e,t,n,Ee){var Re;if(t===void 0&&(t=[]),n===void 0&&(n=null),Ee===void 0&&(Ee=null),e==null){var Ce;if(!n)return null;if(n.errors)e=n.matches;else if((Ce=Ee)!=null&&Ce.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let Te=e,Me=(Re=n)==null?void 0:Re.errors;if(Me!=null){let Be=Te.findIndex(ze=>ze.route.id&&(Me==null?void 0:Me[ze.route.id])!==void 0);Be>=0||invariant(!1),Te=Te.slice(0,Math.min(Te.length,Be+1))}let De=!1,Oe=-1;if(n&&Ee&&Ee.v7_partialHydration)for(let Be=0;Be<Te.length;Be++){let ze=Te[Be];if((ze.route.HydrateFallback||ze.route.hydrateFallbackElement)&&(Oe=Be),ze.route.id){let{loaderData:$e,errors:He}=n,Ue=ze.route.loader&&$e[ze.route.id]===void 0&&(!He||He[ze.route.id]===void 0);if(ze.route.lazy||Ue){De=!0,Oe>=0?Te=Te.slice(0,Oe+1):Te=[Te[0]];break}}}return Te.reduceRight((Be,ze,$e)=>{let He,Ue=!1,Ve=null,We=null;n&&(He=Me&&ze.route.id?Me[ze.route.id]:void 0,Ve=ze.route.errorElement||defaultErrorElement,De&&(Oe<0&&$e===0?(warningOnce("route-fallback"),Ue=!0,We=null):Oe===$e&&(Ue=!0,We=ze.route.hydrateFallbackElement||null)));let qe=t.concat(Te.slice(0,$e+1)),Ge=()=>{let Ye;return He?Ye=Ve:Ue?Ye=We:ze.route.Component?Ye=reactExports.createElement(ze.route.Component,null):ze.route.element?Ye=ze.route.element:Ye=Be,reactExports.createElement(RenderedRoute,{match:ze,routeContext:{outlet:Be,matches:qe,isDataRoute:n!=null},children:Ye})};return n&&(ze.route.ErrorBoundary||ze.route.errorElement||$e===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:Ve,error:He,children:Ge(),routeContext:{outlet:null,matches:qe,isDataRoute:!0}}):Ge()},null)}var DataRouterHook$1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(DataRouterHook$1||{}),DataRouterStateHook$1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DataRouterStateHook$1||{});function useDataRouterContext$1(e){let t=reactExports.useContext(DataRouterContext);return t||invariant(!1),t}function useDataRouterState(e){let t=reactExports.useContext(DataRouterStateContext);return t||invariant(!1),t}function useRouteContext(e){let t=reactExports.useContext(RouteContext);return t||invariant(!1),t}function useCurrentRouteId(e){let t=useRouteContext(),n=t.matches[t.matches.length-1];return n.route.id||invariant(!1),n.route.id}function useRouteError(){var e;let t=reactExports.useContext(RouteErrorContext),n=useDataRouterState(DataRouterStateHook$1.UseRouteError),Ee=useCurrentRouteId();return t!==void 0?t:(e=n.errors)==null?void 0:e[Ee]}function useNavigateStable(){let{router:e}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),t=useCurrentRouteId(),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{n.current=!0}),reactExports.useCallback(function(Re,Ce){Ce===void 0&&(Ce={}),n.current&&(typeof Re=="number"?e.navigate(Re):e.navigate(Re,_extends$1({fromRouteId:t},Ce)))},[e,t])}const alreadyWarned$1={};function warningOnce(e,t,n){alreadyWarned$1[e]||(alreadyWarned$1[e]=!0)}function logV6DeprecationWarnings(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Navigate(e){let{to:t,replace:n,state:Ee,relative:Re}=e;useInRouterContext()||invariant(!1);let{future:Ce,static:Te}=reactExports.useContext(NavigationContext),{matches:Me}=reactExports.useContext(RouteContext),{pathname:De}=useLocation(),Oe=useNavigate(),Be=resolveTo(t,getResolveToMatches(Me,Ce.v7_relativeSplatPath),De,Re==="path"),ze=JSON.stringify(Be);return reactExports.useEffect(()=>Oe(JSON.parse(ze),{replace:n,state:Ee,relative:Re}),[Oe,ze,Re,n,Ee]),null}function Outlet(e){return useOutlet(e.context)}function Router(e){let{basename:t="/",children:n=null,location:Ee,navigationType:Re=Action.Pop,navigator:Ce,static:Te=!1,future:Me}=e;useInRouterContext()&&invariant(!1);let De=t.replace(/^\/*/,"/"),Oe=reactExports.useMemo(()=>({basename:De,navigator:Ce,static:Te,future:_extends$1({v7_relativeSplatPath:!1},Me)}),[De,Me,Ce,Te]);typeof Ee=="string"&&(Ee=parsePath(Ee));let{pathname:Be="/",search:ze="",hash:$e="",state:He=null,key:Ue="default"}=Ee,Ve=reactExports.useMemo(()=>{let We=stripBasename(Be,De);return We==null?null:{location:{pathname:We,search:ze,hash:$e,state:He,key:Ue},navigationType:Re}},[De,Be,ze,$e,He,Ue,Re]);return Ve==null?null:reactExports.createElement(NavigationContext.Provider,{value:Oe},reactExports.createElement(LocationContext.Provider,{children:n,value:Ve}))}new Promise(()=>{});function mapRouteProperties(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:reactExports.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:reactExports.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:reactExports.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var Ee in n)Object.prototype.hasOwnProperty.call(n,Ee)&&(e[Ee]=n[Ee])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(e,t){if(e==null)return{};var n={},Ee=Object.keys(e),Re,Ce;for(Ce=0;Ce<Ee.length;Ce++)Re=Ee[Ce],!(t.indexOf(Re)>=0)&&(n[Re]=e[Re]);return n}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,t){return e.button===0&&(!t||t==="_self")&&!isModifiedEvent(e)}const _excluded$2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}function createBrowserRouter(e,t){return createRouter({basename:void 0,future:_extends({},void 0,{v7_prependBasename:!0}),history:createBrowserHistory({window:void 0}),hydrationData:parseHydrationData(),routes:e,mapRouteProperties,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function parseHydrationData(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=_extends({},t,{errors:deserializeErrors(t.errors)})),t}function deserializeErrors(e){if(!e)return null;let t=Object.entries(e),n={};for(let[Ee,Re]of t)if(Re&&Re.__type==="RouteErrorResponse")n[Ee]=new ErrorResponseImpl(Re.status,Re.statusText,Re.data,Re.internal===!0);else if(Re&&Re.__type==="Error"){if(Re.__subType){let Ce=window[Re.__subType];if(typeof Ce=="function")try{let Te=new Ce(Re.message);Te.stack="",n[Ee]=Te}catch{}}if(n[Ee]==null){let Ce=new Error(Re.message);Ce.stack="",n[Ee]=Ce}}else n[Ee]=Re;return n}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),FetchersContext=reactExports.createContext(new Map),START_TRANSITION="startTransition",startTransitionImpl=React$4[START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=ReactDOM$2[FLUSH_SYNC];function startTransitionSafe(e){startTransitionImpl?startTransitionImpl(e):e()}function flushSyncSafe(e){flushSyncImpl?flushSyncImpl(e):e()}class Deferred{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=Ee=>{this.status==="pending"&&(this.status="resolved",t(Ee))},this.reject=Ee=>{this.status==="pending"&&(this.status="rejected",n(Ee))}})}}function RouterProvider(e){let{fallbackElement:t,router:n,future:Ee}=e,[Re,Ce]=reactExports.useState(n.state),[Te,Me]=reactExports.useState(),[De,Oe]=reactExports.useState({isTransitioning:!1}),[Be,ze]=reactExports.useState(),[$e,He]=reactExports.useState(),[Ue,Ve]=reactExports.useState(),We=reactExports.useRef(new Map),{v7_startTransition:qe}=Ee||{},Ge=reactExports.useCallback(St=>{qe?startTransitionSafe(St):St()},[qe]),Ye=reactExports.useCallback((St,ar)=>{let{deletedFetchers:hr,flushSync:ur,viewTransitionOpts:dr}=ar;St.fetchers.forEach((yr,br)=>{yr.data!==void 0&&We.current.set(br,yr.data)}),hr.forEach(yr=>We.current.delete(yr));let vr=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!dr||vr){ur?flushSyncSafe(()=>Ce(St)):Ge(()=>Ce(St));return}if(ur){flushSyncSafe(()=>{$e&&(Be&&Be.resolve(),$e.skipTransition()),Oe({isTransitioning:!0,flushSync:!0,currentLocation:dr.currentLocation,nextLocation:dr.nextLocation})});let yr=n.window.document.startViewTransition(()=>{flushSyncSafe(()=>Ce(St))});yr.finished.finally(()=>{flushSyncSafe(()=>{ze(void 0),He(void 0),Me(void 0),Oe({isTransitioning:!1})})}),flushSyncSafe(()=>He(yr));return}$e?(Be&&Be.resolve(),$e.skipTransition(),Ve({state:St,currentLocation:dr.currentLocation,nextLocation:dr.nextLocation})):(Me(St),Oe({isTransitioning:!0,flushSync:!1,currentLocation:dr.currentLocation,nextLocation:dr.nextLocation}))},[n.window,$e,Be,We,Ge]);reactExports.useLayoutEffect(()=>n.subscribe(Ye),[n,Ye]),reactExports.useEffect(()=>{De.isTransitioning&&!De.flushSync&&ze(new Deferred)},[De]),reactExports.useEffect(()=>{if(Be&&Te&&n.window){let St=Te,ar=Be.promise,hr=n.window.document.startViewTransition(async()=>{Ge(()=>Ce(St)),await ar});hr.finished.finally(()=>{ze(void 0),He(void 0),Me(void 0),Oe({isTransitioning:!1})}),He(hr)}},[Ge,Te,Be,n.window]),reactExports.useEffect(()=>{Be&&Te&&Re.location.key===Te.location.key&&Be.resolve()},[Be,$e,Re.location,Te]),reactExports.useEffect(()=>{!De.isTransitioning&&Ue&&(Me(Ue.state),Oe({isTransitioning:!0,flushSync:!1,currentLocation:Ue.currentLocation,nextLocation:Ue.nextLocation}),Ve(void 0))},[De.isTransitioning,Ue]),reactExports.useEffect(()=>{},[]);let Ke=reactExports.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:St=>n.navigate(St),push:(St,ar,hr)=>n.navigate(St,{state:ar,preventScrollReset:hr==null?void 0:hr.preventScrollReset}),replace:(St,ar,hr)=>n.navigate(St,{replace:!0,state:ar,preventScrollReset:hr==null?void 0:hr.preventScrollReset})}),[n]),Xe=n.basename||"/",Ze=reactExports.useMemo(()=>({router:n,navigator:Ke,static:!1,basename:Xe}),[n,Ke,Xe]),er=reactExports.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return reactExports.useEffect(()=>logV6DeprecationWarnings(Ee,n.future),[Ee,n.future]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:Ze},reactExports.createElement(DataRouterStateContext.Provider,{value:Re},reactExports.createElement(FetchersContext.Provider,{value:We.current},reactExports.createElement(ViewTransitionContext.Provider,{value:De},reactExports.createElement(Router,{basename:Xe,location:Re.location,navigationType:Re.historyAction,navigator:Ke,future:er},Re.initialized||n.future.v7_partialHydration?reactExports.createElement(MemoizedDataRoutes,{routes:n.routes,future:n.future,state:Re}):t))))),null)}const MemoizedDataRoutes=reactExports.memo(DataRoutes);function DataRoutes(e){let{routes:t,future:n,state:Ee}=e;return useRoutesImpl(t,void 0,Ee,n)}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(t,n){let{onClick:Ee,relative:Re,reloadDocument:Ce,replace:Te,state:Me,target:De,to:Oe,preventScrollReset:Be,viewTransition:ze}=t,$e=_objectWithoutPropertiesLoose$1(t,_excluded$2),{basename:He}=reactExports.useContext(NavigationContext),Ue,Ve=!1;if(typeof Oe=="string"&&ABSOLUTE_URL_REGEX.test(Oe)&&(Ue=Oe,isBrowser))try{let Ye=new URL(window.location.href),Ke=Oe.startsWith("//")?new URL(Ye.protocol+Oe):new URL(Oe),Xe=stripBasename(Ke.pathname,He);Ke.origin===Ye.origin&&Xe!=null?Oe=Xe+Ke.search+Ke.hash:Ve=!0}catch{}let We=useHref(Oe,{relative:Re}),qe=useLinkClickHandler(Oe,{replace:Te,state:Me,target:De,preventScrollReset:Be,relative:Re,viewTransition:ze});function Ge(Ye){Ee&&Ee(Ye),Ye.defaultPrevented||qe(Ye)}return reactExports.createElement("a",_extends({},$e,{href:Ue||We,onClick:Ve||Ce?Ee:Ge,ref:n,target:De}))}),NavLink=reactExports.forwardRef(function(t,n){let{"aria-current":Ee="page",caseSensitive:Re=!1,className:Ce="",end:Te=!1,style:Me,to:De,viewTransition:Oe,children:Be}=t,ze=_objectWithoutPropertiesLoose$1(t,_excluded2),$e=useResolvedPath(De,{relative:ze.relative}),He=useLocation(),Ue=reactExports.useContext(DataRouterStateContext),{navigator:Ve,basename:We}=reactExports.useContext(NavigationContext),qe=Ue!=null&&useViewTransitionState($e)&&Oe===!0,Ge=Ve.encodeLocation?Ve.encodeLocation($e).pathname:$e.pathname,Ye=He.pathname,Ke=Ue&&Ue.navigation&&Ue.navigation.location?Ue.navigation.location.pathname:null;Re||(Ye=Ye.toLowerCase(),Ke=Ke?Ke.toLowerCase():null,Ge=Ge.toLowerCase()),Ke&&We&&(Ke=stripBasename(Ke,We)||Ke);const Xe=Ge!=="/"&&Ge.endsWith("/")?Ge.length-1:Ge.length;let Ze=Ye===Ge||!Te&&Ye.startsWith(Ge)&&Ye.charAt(Xe)==="/",er=Ke!=null&&(Ke===Ge||!Te&&Ke.startsWith(Ge)&&Ke.charAt(Ge.length)==="/"),St={isActive:Ze,isPending:er,isTransitioning:qe},ar=Ze?Ee:void 0,hr;typeof Ce=="function"?hr=Ce(St):hr=[Ce,Ze?"active":null,er?"pending":null,qe?"transitioning":null].filter(Boolean).join(" ");let ur=typeof Me=="function"?Me(St):Me;return reactExports.createElement(Link$1,_extends({},ze,{"aria-current":ar,className:hr,ref:n,style:ur,to:De,viewTransition:Oe}),typeof Be=="function"?Be(St):Be)});var DataRouterHook;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(e){let t=reactExports.useContext(DataRouterContext);return t||invariant(!1),t}function useLinkClickHandler(e,t){let{target:n,replace:Ee,state:Re,preventScrollReset:Ce,relative:Te,viewTransition:Me}=t===void 0?{}:t,De=useNavigate(),Oe=useLocation(),Be=useResolvedPath(e,{relative:Te});return reactExports.useCallback(ze=>{if(shouldProcessLinkClick(ze,n)){ze.preventDefault();let $e=Ee!==void 0?Ee:createPath(Oe)===createPath(Be);De(e,{replace:$e,state:Re,preventScrollReset:Ce,relative:Te,viewTransition:Me})}},[Oe,De,Be,Ee,Re,n,e,Ce,Te,Me])}function useViewTransitionState(e,t){t===void 0&&(t={});let n=reactExports.useContext(ViewTransitionContext);n==null&&invariant(!1);let{basename:Ee}=useDataRouterContext(DataRouterHook.useViewTransitionState),Re=useResolvedPath(e,{relative:t.relative});if(!n.isTransitioning)return!1;let Ce=stripBasename(n.currentLocation.pathname,Ee)||n.currentLocation.pathname,Te=stripBasename(n.nextLocation.pathname,Ee)||n.nextLocation.pathname;return matchPath(Re.pathname,Te)!=null||matchPath(Re.pathname,Ce)!=null}/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,Ee)=>Ee?Ee.toUpperCase():n.toLowerCase()),toPascalCase=e=>{const t=toCamelCase(e);return t.charAt(0).toUpperCase()+t.slice(1)},mergeClasses=(...e)=>e.filter((t,n,Ee)=>!!t&&t.trim()!==""&&Ee.indexOf(t)===n).join(" ").trim(),hasA11yProp=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:Ee,className:Re="",children:Ce,iconNode:Te,...Me},De)=>reactExports.createElement("svg",{ref:De,...defaultAttributes,width:t,height:t,stroke:e,strokeWidth:Ee?Number(n)*24/Number(t):n,className:mergeClasses("lucide",Re),...!Ce&&!hasA11yProp(Me)&&{"aria-hidden":"true"},...Me},[...Te.map(([Oe,Be])=>reactExports.createElement(Oe,Be)),...Array.isArray(Ce)?Ce:[Ce]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(e,t)=>{const n=reactExports.forwardRef(({className:Ee,...Re},Ce)=>reactExports.createElement(Icon,{ref:Ce,iconNode:t,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(e))}`,`lucide-${e}`,Ee),...Re}));return n.displayName=toPascalCase(e),n};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1S=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Activity=createLucideIcon("activity",__iconNode$1S);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1R=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$1R);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1Q=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],ArrowRightLeft=createLucideIcon("arrow-right-left",__iconNode$1Q);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1P=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],ArrowUpDown=createLucideIcon("arrow-up-down",__iconNode$1P);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1O=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Award=createLucideIcon("award",__iconNode$1O);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1N=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]],Badge$1=createLucideIcon("badge",__iconNode$1N);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1M=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ban=createLucideIcon("ban",__iconNode$1M);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1L=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Banknote=createLucideIcon("banknote",__iconNode$1L);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1K=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$1K);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1J=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Bold$1=createLucideIcon("bold",__iconNode$1J);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1I=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$1I);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1H=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Bot=createLucideIcon("bot",__iconNode$1H);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1G=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Box=createLucideIcon("box",__iconNode$1G);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1F=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Briefcase=createLucideIcon("briefcase",__iconNode$1F);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1E=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Building2=createLucideIcon("building-2",__iconNode$1E);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1D=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Building=createLucideIcon("building",__iconNode$1D);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1C=[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]],Cake=createLucideIcon("cake",__iconNode$1C);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1B=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],CalendarClock=createLucideIcon("calendar-clock",__iconNode$1B);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1A=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],CalendarDays=createLucideIcon("calendar-days",__iconNode$1A);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1z=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar$1=createLucideIcon("calendar",__iconNode$1z);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1y=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ChartColumn=createLucideIcon("chart-column",__iconNode$1y);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1x=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],ChartNoAxesColumn=createLucideIcon("chart-no-axes-column",__iconNode$1x);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1w=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ChartPie=createLucideIcon("chart-pie",__iconNode$1w);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1v=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$1v);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1u=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$1u);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1t=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$1t);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1s=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ChevronLeft=createLucideIcon("chevron-left",__iconNode$1s);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1r=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$1r);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1q=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$1q);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1p=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],CirclePlay=createLucideIcon("circle-play",__iconNode$1p);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1o=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],CircleUserRound=createLucideIcon("circle-user-round",__iconNode$1o);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1n=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],CircleUser=createLucideIcon("circle-user",__iconNode$1n);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1m=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$1m);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1l=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ClipboardList=createLucideIcon("clipboard-list",__iconNode$1l);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1k=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock=createLucideIcon("clock",__iconNode$1k);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1j=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],CloudUpload=createLucideIcon("cloud-upload",__iconNode$1j);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1i=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Code$1=createLucideIcon("code",__iconNode$1i);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1h=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Coffee=createLucideIcon("coffee",__iconNode$1h);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1g=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],CreditCard=createLucideIcon("credit-card",__iconNode$1g);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1f=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Database=createLucideIcon("database",__iconNode$1f);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1e=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1d=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$1d);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1c=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],EllipsisVertical=createLucideIcon("ellipsis-vertical",__iconNode$1c);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1b=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$1b);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1a=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$1a);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$19=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Factory=createLucideIcon("factory",__iconNode$19);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$18=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$18);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$17=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],FingerprintPattern=createLucideIcon("fingerprint-pattern",__iconNode$17);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$16=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Funnel=createLucideIcon("funnel",__iconNode$16);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$15=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],GitPullRequest=createLucideIcon("git-pull-request",__iconNode$15);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$14=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$14);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$13=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],GraduationCap=createLucideIcon("graduation-cap",__iconNode$13);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$12=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Grid3x3=createLucideIcon("grid-3x3",__iconNode$12);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$11=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Hash=createLucideIcon("hash",__iconNode$11);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$10=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Heart=createLucideIcon("heart",__iconNode$10);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$$=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],History=createLucideIcon("history",__iconNode$$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$_=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],IdCard=createLucideIcon("id-card",__iconNode$_);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Z=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$2=createLucideIcon("image",__iconNode$Z);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Y=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],IndianRupee=createLucideIcon("indian-rupee",__iconNode$Y);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$X);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$W=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Italic$1=createLucideIcon("italic",__iconNode$W);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$V=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],Landmark=createLucideIcon("landmark",__iconNode$V);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$U=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],Laptop=createLucideIcon("laptop",__iconNode$U);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$T=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$T);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$S=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],LayoutDashboard=createLucideIcon("layout-dashboard",__iconNode$S);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$R=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],LayoutGrid=createLucideIcon("layout-grid",__iconNode$R);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Q=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ListOrdered=createLucideIcon("list-ordered",__iconNode$Q);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$P=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],List=createLucideIcon("list",__iconNode$P);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$O=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$O);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$N=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$N);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$M);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$L);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],MapPin=createLucideIcon("map-pin",__iconNode$K);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$J);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],MessageCircle=createLucideIcon("message-circle",__iconNode$I);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],MessageSquarePlus=createLucideIcon("message-square-plus",__iconNode$H);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"M14 14a2 2 0 0 0 2-2V8h-2",key:"1r06pg"}],["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M8 14a2 2 0 0 0 2-2V8H8",key:"1jzu5j"}]],MessageSquareQuote=createLucideIcon("message-square-quote",__iconNode$G);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],MessagesSquare=createLucideIcon("messages-square",__iconNode$F);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Monitor=createLucideIcon("monitor",__iconNode$E);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Moon=createLucideIcon("moon",__iconNode$D);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Network=createLucideIcon("network",__iconNode$C);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Package=createLucideIcon("package",__iconNode$B);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],PartyPopper=createLucideIcon("party-popper",__iconNode$A);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pen=createLucideIcon("pen",__iconNode$z);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$y);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Phone=createLucideIcon("phone",__iconNode$x);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Pill=createLucideIcon("pill",__iconNode$w);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],Plane=createLucideIcon("plane",__iconNode$v);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Play=createLucideIcon("play",__iconNode$u);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$t);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],Redo=createLucideIcon("redo",__iconNode$s);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Save=createLucideIcon("save",__iconNode$r);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$q);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Send=createLucideIcon("send",__iconNode$p);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$o);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ShieldAlert=createLucideIcon("shield-alert",__iconNode$n);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$m);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],SlidersHorizontal=createLucideIcon("sliders-horizontal",__iconNode$l);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Smartphone=createLucideIcon("smartphone",__iconNode$k);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sparkles=createLucideIcon("sparkles",__iconNode$j);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],SquareCheckBig=createLucideIcon("square-check-big",__iconNode$i);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],SquarePen=createLucideIcon("square-pen",__iconNode$h);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$g);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],TextAlignCenter=createLucideIcon("text-align-center",__iconNode$f);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],TextAlignEnd=createLucideIcon("text-align-end",__iconNode$e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],TextAlignStart=createLucideIcon("text-align-start",__iconNode$d);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Timer=createLucideIcon("timer",__iconNode$c);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$b);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$a);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$9);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Undo=createLucideIcon("undo",__iconNode$8);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$7);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],UserCheck=createLucideIcon("user-check",__iconNode$6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],UserPlus=createLucideIcon("user-plus",__iconNode$5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],UserX=createLucideIcon("user-x",__iconNode$4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],UsersRound=createLucideIcon("users-round",__iconNode$2);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$1=createLucideIcon("x",__iconNode);function useTheme(){const[e,t]=reactExports.useState(()=>{const Ee=localStorage.getItem("theme");return Ee==="light"||Ee==="dark"?Ee:window.matchMedia("(prefers-color-scheme: light)").matches?"dark":"light"});return reactExports.useEffect(()=>{const Ee=window.document.documentElement;Ee.classList.remove("light","dark"),Ee.classList.add(e),localStorage.setItem("theme",e)},[e]),{theme:e,toggleTheme:()=>{t(Ee=>Ee==="light"?"dark":"light")}}}function r(e){var t,n,Ee="";if(typeof e=="string"||typeof e=="number")Ee+=e;else if(typeof e=="object")if(Array.isArray(e)){var Re=e.length;for(t=0;t<Re;t++)e[t]&&(n=r(e[t]))&&(Ee&&(Ee+=" "),Ee+=n)}else for(n in e)e[n]&&(Ee&&(Ee+=" "),Ee+=n);return Ee}function clsx(){for(var e,t,n=0,Ee="",Re=arguments.length;n<Re;n++)(e=arguments[n])&&(t=r(e))&&(Ee&&(Ee+=" "),Ee+=t);return Ee}const concatArrays=(e,t)=>{const n=new Array(e.length+t.length);for(let Ee=0;Ee<e.length;Ee++)n[Ee]=e[Ee];for(let Ee=0;Ee<t.length;Ee++)n[e.length+Ee]=t[Ee];return n},createClassValidatorObject=(e,t)=>({classGroupId:e,validator:t}),createClassPartObject=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),CLASS_PART_SEPARATOR="-",EMPTY_CONFLICTS=[],ARBITRARY_PROPERTY_PREFIX="arbitrary..",createClassGroupUtils=e=>{const t=createClassMap(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:Ee}=e;return{getClassGroupId:Te=>{if(Te.startsWith("[")&&Te.endsWith("]"))return getGroupIdForArbitraryProperty(Te);const Me=Te.split(CLASS_PART_SEPARATOR),De=Me[0]===""&&Me.length>1?1:0;return getGroupRecursive(Me,De,t)},getConflictingClassGroupIds:(Te,Me)=>{if(Me){const De=Ee[Te],Oe=n[Te];return De?Oe?concatArrays(Oe,De):De:Oe||EMPTY_CONFLICTS}return n[Te]||EMPTY_CONFLICTS}}},getGroupRecursive=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const Re=e[t],Ce=n.nextPart.get(Re);if(Ce){const Oe=getGroupRecursive(e,t+1,Ce);if(Oe)return Oe}const Te=n.validators;if(Te===null)return;const Me=t===0?e.join(CLASS_PART_SEPARATOR):e.slice(t).join(CLASS_PART_SEPARATOR),De=Te.length;for(let Oe=0;Oe<De;Oe++){const Be=Te[Oe];if(Be.validator(Me))return Be.classGroupId}},getGroupIdForArbitraryProperty=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),Ee=t.slice(0,n);return Ee?ARBITRARY_PROPERTY_PREFIX+Ee:void 0})(),createClassMap=e=>{const{theme:t,classGroups:n}=e;return processClassGroups(n,t)},processClassGroups=(e,t)=>{const n=createClassPartObject();for(const Ee in e){const Re=e[Ee];processClassesRecursively(Re,n,Ee,t)}return n},processClassesRecursively=(e,t,n,Ee)=>{const Re=e.length;for(let Ce=0;Ce<Re;Ce++){const Te=e[Ce];processClassDefinition(Te,t,n,Ee)}},processClassDefinition=(e,t,n,Ee)=>{if(typeof e=="string"){processStringDefinition(e,t,n);return}if(typeof e=="function"){processFunctionDefinition(e,t,n,Ee);return}processObjectDefinition(e,t,n,Ee)},processStringDefinition=(e,t,n)=>{const Ee=e===""?t:getPart(t,e);Ee.classGroupId=n},processFunctionDefinition=(e,t,n,Ee)=>{if(isThemeGetter(e)){processClassesRecursively(e(Ee),t,n,Ee);return}t.validators===null&&(t.validators=[]),t.validators.push(createClassValidatorObject(n,e))},processObjectDefinition=(e,t,n,Ee)=>{const Re=Object.entries(e),Ce=Re.length;for(let Te=0;Te<Ce;Te++){const[Me,De]=Re[Te];processClassesRecursively(De,getPart(t,Me),n,Ee)}},getPart=(e,t)=>{let n=e;const Ee=t.split(CLASS_PART_SEPARATOR),Re=Ee.length;for(let Ce=0;Ce<Re;Ce++){const Te=Ee[Ce];let Me=n.nextPart.get(Te);Me||(Me=createClassPartObject(),n.nextPart.set(Te,Me)),n=Me}return n},isThemeGetter=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,createLruCache=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),Ee=Object.create(null);const Re=(Ce,Te)=>{n[Ce]=Te,t++,t>e&&(t=0,Ee=n,n=Object.create(null))};return{get(Ce){let Te=n[Ce];if(Te!==void 0)return Te;if((Te=Ee[Ce])!==void 0)return Re(Ce,Te),Te},set(Ce,Te){Ce in n?n[Ce]=Te:Re(Ce,Te)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",EMPTY_MODIFIERS=[],createResultObject=(e,t,n,Ee,Re)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:Ee,isExternal:Re}),createParseClassName=e=>{const{prefix:t,experimentalParseClassName:n}=e;let Ee=Re=>{const Ce=[];let Te=0,Me=0,De=0,Oe;const Be=Re.length;for(let Ve=0;Ve<Be;Ve++){const We=Re[Ve];if(Te===0&&Me===0){if(We===MODIFIER_SEPARATOR){Ce.push(Re.slice(De,Ve)),De=Ve+1;continue}if(We==="/"){Oe=Ve;continue}}We==="["?Te++:We==="]"?Te--:We==="("?Me++:We===")"&&Me--}const ze=Ce.length===0?Re:Re.slice(De);let $e=ze,He=!1;ze.endsWith(IMPORTANT_MODIFIER)?($e=ze.slice(0,-1),He=!0):ze.startsWith(IMPORTANT_MODIFIER)&&($e=ze.slice(1),He=!0);const Ue=Oe&&Oe>De?Oe-De:void 0;return createResultObject(Ce,He,$e,Ue)};if(t){const Re=t+MODIFIER_SEPARATOR,Ce=Ee;Ee=Te=>Te.startsWith(Re)?Ce(Te.slice(Re.length)):createResultObject(EMPTY_MODIFIERS,!1,Te,void 0,!0)}if(n){const Re=Ee;Ee=Ce=>n({className:Ce,parseClassName:Re})}return Ee},createSortModifiers=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,Ee)=>{t.set(n,1e6+Ee)}),n=>{const Ee=[];let Re=[];for(let Ce=0;Ce<n.length;Ce++){const Te=n[Ce],Me=Te[0]==="[",De=t.has(Te);Me||De?(Re.length>0&&(Re.sort(),Ee.push(...Re),Re=[]),Ee.push(Te)):Re.push(Te)}return Re.length>0&&(Re.sort(),Ee.push(...Re)),Ee}},createConfigUtils=e=>({cache:createLruCache(e.cacheSize),parseClassName:createParseClassName(e),sortModifiers:createSortModifiers(e),...createClassGroupUtils(e)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(e,t)=>{const{parseClassName:n,getClassGroupId:Ee,getConflictingClassGroupIds:Re,sortModifiers:Ce}=t,Te=[],Me=e.trim().split(SPLIT_CLASSES_REGEX);let De="";for(let Oe=Me.length-1;Oe>=0;Oe-=1){const Be=Me[Oe],{isExternal:ze,modifiers:$e,hasImportantModifier:He,baseClassName:Ue,maybePostfixModifierPosition:Ve}=n(Be);if(ze){De=Be+(De.length>0?" "+De:De);continue}let We=!!Ve,qe=Ee(We?Ue.substring(0,Ve):Ue);if(!qe){if(!We){De=Be+(De.length>0?" "+De:De);continue}if(qe=Ee(Ue),!qe){De=Be+(De.length>0?" "+De:De);continue}We=!1}const Ge=$e.length===0?"":$e.length===1?$e[0]:Ce($e).join(":"),Ye=He?Ge+IMPORTANT_MODIFIER:Ge,Ke=Ye+qe;if(Te.indexOf(Ke)>-1)continue;Te.push(Ke);const Xe=Re(qe,We);for(let Ze=0;Ze<Xe.length;++Ze){const er=Xe[Ze];Te.push(Ye+er)}De=Be+(De.length>0?" "+De:De)}return De},twJoin=(...e)=>{let t=0,n,Ee,Re="";for(;t<e.length;)(n=e[t++])&&(Ee=toValue(n))&&(Re&&(Re+=" "),Re+=Ee);return Re},toValue=e=>{if(typeof e=="string")return e;let t,n="";for(let Ee=0;Ee<e.length;Ee++)e[Ee]&&(t=toValue(e[Ee]))&&(n&&(n+=" "),n+=t);return n},createTailwindMerge=(e,...t)=>{let n,Ee,Re,Ce;const Te=De=>{const Oe=t.reduce((Be,ze)=>ze(Be),e());return n=createConfigUtils(Oe),Ee=n.cache.get,Re=n.cache.set,Ce=Me,Me(De)},Me=De=>{const Oe=Ee(De);if(Oe)return Oe;const Be=mergeClassList(De,n);return Re(De,Be),Be};return Ce=Te,(...De)=>Ce(twJoin(...De))},fallbackThemeArr=[],fromTheme=e=>{const t=n=>n[e]||fallbackThemeArr;return t.isThemeGetter=!0,t},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=e=>fractionRegex.test(e),isNumber$1=e=>!!e&&!Number.isNaN(Number(e)),isInteger=e=>!!e&&Number.isInteger(Number(e)),isPercent=e=>e.endsWith("%")&&isNumber$1(e.slice(0,-1)),isTshirtSize=e=>tshirtUnitRegex.test(e),isAny=()=>!0,isLengthOnly=e=>lengthUnitRegex.test(e)&&!colorFunctionRegex.test(e),isNever=()=>!1,isShadow=e=>shadowRegex.test(e),isImage=e=>imageRegex.test(e),isAnyNonArbitrary=e=>!isArbitraryValue(e)&&!isArbitraryVariable(e),isArbitrarySize=e=>getIsArbitraryValue(e,isLabelSize,isNever),isArbitraryValue=e=>arbitraryValueRegex.test(e),isArbitraryLength=e=>getIsArbitraryValue(e,isLabelLength,isLengthOnly),isArbitraryNumber=e=>getIsArbitraryValue(e,isLabelNumber,isNumber$1),isArbitraryPosition=e=>getIsArbitraryValue(e,isLabelPosition,isNever),isArbitraryImage=e=>getIsArbitraryValue(e,isLabelImage,isImage),isArbitraryShadow=e=>getIsArbitraryValue(e,isLabelShadow,isShadow),isArbitraryVariable=e=>arbitraryVariableRegex.test(e),isArbitraryVariableLength=e=>getIsArbitraryVariable(e,isLabelLength),isArbitraryVariableFamilyName=e=>getIsArbitraryVariable(e,isLabelFamilyName),isArbitraryVariablePosition=e=>getIsArbitraryVariable(e,isLabelPosition),isArbitraryVariableSize=e=>getIsArbitraryVariable(e,isLabelSize),isArbitraryVariableImage=e=>getIsArbitraryVariable(e,isLabelImage),isArbitraryVariableShadow=e=>getIsArbitraryVariable(e,isLabelShadow,!0),getIsArbitraryValue=(e,t,n)=>{const Ee=arbitraryValueRegex.exec(e);return Ee?Ee[1]?t(Ee[1]):n(Ee[2]):!1},getIsArbitraryVariable=(e,t,n=!1)=>{const Ee=arbitraryVariableRegex.exec(e);return Ee?Ee[1]?t(Ee[1]):n:!1},isLabelPosition=e=>e==="position"||e==="percentage",isLabelImage=e=>e==="image"||e==="url",isLabelSize=e=>e==="length"||e==="size"||e==="bg-size",isLabelLength=e=>e==="length",isLabelNumber=e=>e==="number",isLabelFamilyName=e=>e==="family-name",isLabelShadow=e=>e==="shadow",getDefaultConfig=()=>{const e=fromTheme("color"),t=fromTheme("font"),n=fromTheme("text"),Ee=fromTheme("font-weight"),Re=fromTheme("tracking"),Ce=fromTheme("leading"),Te=fromTheme("breakpoint"),Me=fromTheme("container"),De=fromTheme("spacing"),Oe=fromTheme("radius"),Be=fromTheme("shadow"),ze=fromTheme("inset-shadow"),$e=fromTheme("text-shadow"),He=fromTheme("drop-shadow"),Ue=fromTheme("blur"),Ve=fromTheme("perspective"),We=fromTheme("aspect"),qe=fromTheme("ease"),Ge=fromTheme("animate"),Ye=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ke=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Xe=()=>[...Ke(),isArbitraryVariable,isArbitraryValue],Ze=()=>["auto","hidden","clip","visible","scroll"],er=()=>["auto","contain","none"],St=()=>[isArbitraryVariable,isArbitraryValue,De],ar=()=>[isFraction,"full","auto",...St()],hr=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],ur=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],dr=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],vr=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],yr=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],br=()=>["start","end","center","stretch","center-safe","end-safe"],lr=()=>["auto",...St()],cr=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...St()],rr=()=>[e,isArbitraryVariable,isArbitraryValue],pr=()=>[...Ke(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],mr=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ir=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],nr=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],gr=()=>["","none","full",Oe,isArbitraryVariable,isArbitraryValue],Er=()=>["",isNumber$1,isArbitraryVariableLength,isArbitraryLength],Cr=()=>["solid","dashed","dotted","double"],Nr=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Mr=()=>[isNumber$1,isPercent,isArbitraryVariablePosition,isArbitraryPosition],Fr=()=>["","none",Ue,isArbitraryVariable,isArbitraryValue],$r=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],Wr=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],Zr=()=>[isNumber$1,isArbitraryVariable,isArbitraryValue],nn=()=>[isFraction,"full",...St()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber$1],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,We]}],container:["container"],columns:[{columns:[isNumber$1,isArbitraryValue,isArbitraryVariable,Me]}],"break-after":[{"break-after":Ye()}],"break-before":[{"break-before":Ye()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Xe()}],overflow:[{overflow:Ze()}],"overflow-x":[{"overflow-x":Ze()}],"overflow-y":[{"overflow-y":Ze()}],overscroll:[{overscroll:er()}],"overscroll-x":[{"overscroll-x":er()}],"overscroll-y":[{"overscroll-y":er()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ar()}],"inset-x":[{"inset-x":ar()}],"inset-y":[{"inset-y":ar()}],start:[{start:ar()}],end:[{end:ar()}],top:[{top:ar()}],right:[{right:ar()}],bottom:[{bottom:ar()}],left:[{left:ar()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",Me,...St()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber$1,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":hr()}],"col-start-end":[{col:ur()}],"col-start":[{"col-start":dr()}],"col-end":[{"col-end":dr()}],"grid-rows":[{"grid-rows":hr()}],"row-start-end":[{row:ur()}],"row-start":[{"row-start":dr()}],"row-end":[{"row-end":dr()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":vr()}],"auto-rows":[{"auto-rows":vr()}],gap:[{gap:St()}],"gap-x":[{"gap-x":St()}],"gap-y":[{"gap-y":St()}],"justify-content":[{justify:[...yr(),"normal"]}],"justify-items":[{"justify-items":[...br(),"normal"]}],"justify-self":[{"justify-self":["auto",...br()]}],"align-content":[{content:["normal",...yr()]}],"align-items":[{items:[...br(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...br(),{baseline:["","last"]}]}],"place-content":[{"place-content":yr()}],"place-items":[{"place-items":[...br(),"baseline"]}],"place-self":[{"place-self":["auto",...br()]}],p:[{p:St()}],px:[{px:St()}],py:[{py:St()}],ps:[{ps:St()}],pe:[{pe:St()}],pt:[{pt:St()}],pr:[{pr:St()}],pb:[{pb:St()}],pl:[{pl:St()}],m:[{m:lr()}],mx:[{mx:lr()}],my:[{my:lr()}],ms:[{ms:lr()}],me:[{me:lr()}],mt:[{mt:lr()}],mr:[{mr:lr()}],mb:[{mb:lr()}],ml:[{ml:lr()}],"space-x":[{"space-x":St()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":St()}],"space-y-reverse":["space-y-reverse"],size:[{size:cr()}],w:[{w:[Me,"screen",...cr()]}],"min-w":[{"min-w":[Me,"screen","none",...cr()]}],"max-w":[{"max-w":[Me,"screen","none","prose",{screen:[Te]},...cr()]}],h:[{h:["screen","lh",...cr()]}],"min-h":[{"min-h":["screen","lh","none",...cr()]}],"max-h":[{"max-h":["screen","lh",...cr()]}],"font-size":[{text:["base",n,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[Ee,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[Re,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber$1,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[Ce,...St()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:rr()}],"text-color":[{text:rr()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Cr(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber$1,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:rr()}],"underline-offset":[{"underline-offset":[isNumber$1,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:St()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:pr()}],"bg-repeat":[{bg:mr()}],"bg-size":[{bg:ir()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:rr()}],"gradient-from-pos":[{from:nr()}],"gradient-via-pos":[{via:nr()}],"gradient-to-pos":[{to:nr()}],"gradient-from":[{from:rr()}],"gradient-via":[{via:rr()}],"gradient-to":[{to:rr()}],rounded:[{rounded:gr()}],"rounded-s":[{"rounded-s":gr()}],"rounded-e":[{"rounded-e":gr()}],"rounded-t":[{"rounded-t":gr()}],"rounded-r":[{"rounded-r":gr()}],"rounded-b":[{"rounded-b":gr()}],"rounded-l":[{"rounded-l":gr()}],"rounded-ss":[{"rounded-ss":gr()}],"rounded-se":[{"rounded-se":gr()}],"rounded-ee":[{"rounded-ee":gr()}],"rounded-es":[{"rounded-es":gr()}],"rounded-tl":[{"rounded-tl":gr()}],"rounded-tr":[{"rounded-tr":gr()}],"rounded-br":[{"rounded-br":gr()}],"rounded-bl":[{"rounded-bl":gr()}],"border-w":[{border:Er()}],"border-w-x":[{"border-x":Er()}],"border-w-y":[{"border-y":Er()}],"border-w-s":[{"border-s":Er()}],"border-w-e":[{"border-e":Er()}],"border-w-t":[{"border-t":Er()}],"border-w-r":[{"border-r":Er()}],"border-w-b":[{"border-b":Er()}],"border-w-l":[{"border-l":Er()}],"divide-x":[{"divide-x":Er()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Er()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Cr(),"hidden","none"]}],"divide-style":[{divide:[...Cr(),"hidden","none"]}],"border-color":[{border:rr()}],"border-color-x":[{"border-x":rr()}],"border-color-y":[{"border-y":rr()}],"border-color-s":[{"border-s":rr()}],"border-color-e":[{"border-e":rr()}],"border-color-t":[{"border-t":rr()}],"border-color-r":[{"border-r":rr()}],"border-color-b":[{"border-b":rr()}],"border-color-l":[{"border-l":rr()}],"divide-color":[{divide:rr()}],"outline-style":[{outline:[...Cr(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:rr()}],shadow:[{shadow:["","none",Be,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:rr()}],"inset-shadow":[{"inset-shadow":["none",ze,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":rr()}],"ring-w":[{ring:Er()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:rr()}],"ring-offset-w":[{"ring-offset":[isNumber$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":rr()}],"inset-ring-w":[{"inset-ring":Er()}],"inset-ring-color":[{"inset-ring":rr()}],"text-shadow":[{"text-shadow":["none",$e,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":rr()}],opacity:[{opacity:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...Nr(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Nr()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber$1]}],"mask-image-linear-from-pos":[{"mask-linear-from":Mr()}],"mask-image-linear-to-pos":[{"mask-linear-to":Mr()}],"mask-image-linear-from-color":[{"mask-linear-from":rr()}],"mask-image-linear-to-color":[{"mask-linear-to":rr()}],"mask-image-t-from-pos":[{"mask-t-from":Mr()}],"mask-image-t-to-pos":[{"mask-t-to":Mr()}],"mask-image-t-from-color":[{"mask-t-from":rr()}],"mask-image-t-to-color":[{"mask-t-to":rr()}],"mask-image-r-from-pos":[{"mask-r-from":Mr()}],"mask-image-r-to-pos":[{"mask-r-to":Mr()}],"mask-image-r-from-color":[{"mask-r-from":rr()}],"mask-image-r-to-color":[{"mask-r-to":rr()}],"mask-image-b-from-pos":[{"mask-b-from":Mr()}],"mask-image-b-to-pos":[{"mask-b-to":Mr()}],"mask-image-b-from-color":[{"mask-b-from":rr()}],"mask-image-b-to-color":[{"mask-b-to":rr()}],"mask-image-l-from-pos":[{"mask-l-from":Mr()}],"mask-image-l-to-pos":[{"mask-l-to":Mr()}],"mask-image-l-from-color":[{"mask-l-from":rr()}],"mask-image-l-to-color":[{"mask-l-to":rr()}],"mask-image-x-from-pos":[{"mask-x-from":Mr()}],"mask-image-x-to-pos":[{"mask-x-to":Mr()}],"mask-image-x-from-color":[{"mask-x-from":rr()}],"mask-image-x-to-color":[{"mask-x-to":rr()}],"mask-image-y-from-pos":[{"mask-y-from":Mr()}],"mask-image-y-to-pos":[{"mask-y-to":Mr()}],"mask-image-y-from-color":[{"mask-y-from":rr()}],"mask-image-y-to-color":[{"mask-y-to":rr()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":Mr()}],"mask-image-radial-to-pos":[{"mask-radial-to":Mr()}],"mask-image-radial-from-color":[{"mask-radial-from":rr()}],"mask-image-radial-to-color":[{"mask-radial-to":rr()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Ke()}],"mask-image-conic-pos":[{"mask-conic":[isNumber$1]}],"mask-image-conic-from-pos":[{"mask-conic-from":Mr()}],"mask-image-conic-to-pos":[{"mask-conic-to":Mr()}],"mask-image-conic-from-color":[{"mask-conic-from":rr()}],"mask-image-conic-to-color":[{"mask-conic-to":rr()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:pr()}],"mask-repeat":[{mask:mr()}],"mask-size":[{mask:ir()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:Fr()}],brightness:[{brightness:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",He,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":rr()}],grayscale:[{grayscale:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":Fr()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":St()}],"border-spacing-x":[{"border-spacing-x":St()}],"border-spacing-y":[{"border-spacing-y":St()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber$1,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",qe,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",Ge,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[Ve,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":Xe()}],rotate:[{rotate:$r()}],"rotate-x":[{"rotate-x":$r()}],"rotate-y":[{"rotate-y":$r()}],"rotate-z":[{"rotate-z":$r()}],scale:[{scale:Wr()}],"scale-x":[{"scale-x":Wr()}],"scale-y":[{"scale-y":Wr()}],"scale-z":[{"scale-z":Wr()}],"scale-3d":["scale-3d"],skew:[{skew:Zr()}],"skew-x":[{"skew-x":Zr()}],"skew-y":[{"skew-y":Zr()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:Xe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:nn()}],"translate-x":[{"translate-x":nn()}],"translate-y":[{"translate-y":nn()}],"translate-z":[{"translate-z":nn()}],"translate-none":["translate-none"],accent:[{accent:rr()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:rr()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":St()}],"scroll-mx":[{"scroll-mx":St()}],"scroll-my":[{"scroll-my":St()}],"scroll-ms":[{"scroll-ms":St()}],"scroll-me":[{"scroll-me":St()}],"scroll-mt":[{"scroll-mt":St()}],"scroll-mr":[{"scroll-mr":St()}],"scroll-mb":[{"scroll-mb":St()}],"scroll-ml":[{"scroll-ml":St()}],"scroll-p":[{"scroll-p":St()}],"scroll-px":[{"scroll-px":St()}],"scroll-py":[{"scroll-py":St()}],"scroll-ps":[{"scroll-ps":St()}],"scroll-pe":[{"scroll-pe":St()}],"scroll-pt":[{"scroll-pt":St()}],"scroll-pr":[{"scroll-pr":St()}],"scroll-pb":[{"scroll-pb":St()}],"scroll-pl":[{"scroll-pl":St()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...rr()]}],"stroke-w":[{stroke:[isNumber$1,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...rr()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn$2(...e){return twMerge(clsx(e))}const API_BASE_URL="http://localhost:5001/api",ASSET_BASE_URL="http://localhost:5001";class ApiService{getAuthHeaders(){const t=localStorage.getItem("authToken");return console.log("[ApiService Debug] getAuthHeaders. Token found:",!!t),{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}async registerUser(t){const n=await fetch(`${API_BASE_URL}/auth/register`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to register user")}return n.json()}async login(t,n,Ee){const Re=await fetch(`${API_BASE_URL}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,location:Ee})});if(!Re.ok){const Te=await Re.json();throw new Error(Te.message||"Login failed")}const Ce=await Re.json();return Ce.token&&localStorage.setItem("authToken",Ce.token),Ce}async getCurrentUser(){const t=await fetch(`${API_BASE_URL}/auth/me`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch user")}return t.json()}async updateCurrentUser(t){const n=await fetch(`${API_BASE_URL}/auth/me`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to update profile")}return n.json()}async getAllEmployees(){const t=await fetch(`${API_BASE_URL}/employees`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch employees")}return t.json()}async getEmployeesOnLeave(){const t=await fetch(`${API_BASE_URL}/leave/active`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch employees on leave");return t.json()}async getAllTenants(t){const n=t?`?${new URLSearchParams(t).toString()}`:"",Ee=await fetch(`${API_BASE_URL}/superadmin/tenants${n}`,{headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch tenants");return Ee.json()}async createTenant(t){const n=t instanceof FormData,Ee=n?t:JSON.stringify(t),Re=this.getAuthHeaders();n&&delete Re["Content-Type"];const Ce=await fetch(`${API_BASE_URL}/superadmin/tenants`,{method:"POST",headers:Re,body:Ee});if(!Ce.ok){const Te=await Ce.json();throw new Error(Te.message||"Failed to create tenant")}return Ce.json()}async updateTenant(t,n){const Ee=n instanceof FormData,Re=Ee?n:JSON.stringify(n),Ce=this.getAuthHeaders();Ee&&delete Ce["Content-Type"];const Te=await fetch(`${API_BASE_URL}/superadmin/tenants/${t}`,{method:"PATCH",headers:Ce,body:Re});if(!Te.ok){const Me=await Te.json();throw new Error(Me.message||"Failed to update tenant")}return Te.json()}async deleteTenant(t){const n=await fetch(`${API_BASE_URL}/superadmin/tenants/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete tenant");return n.json()}async updateTenantStatus(t,n){const Ee=await fetch(`${API_BASE_URL}/superadmin/tenants/${t}/status`,{method:"PATCH",headers:this.getAuthHeaders(),body:JSON.stringify({status:n})});if(!Ee.ok)throw new Error("Failed to update tenant status");return Ee.json()}async getPlatformAnalytics(){const t=await fetch(`${API_BASE_URL}/superadmin/analytics/overview`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch analytics");return t.json()}async registerCompany(t){const n=await fetch(`${API_BASE_URL}/registration/register-company`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to register company")}return n.json()}async getCompanySettings(){const t=await fetch(`${API_BASE_URL}/settings/company`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch company settings");return t.json()}async getSubscriptionDetails(){const t=await fetch(`${API_BASE_URL}/settings/subscription`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch subscription");return t.json()}async getUsageAnalytics(){const t=await fetch(`${API_BASE_URL}/settings/usage`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch usage analytics");return t.json()}async getAllGlobalUsers(t){const n=new URLSearchParams(t).toString(),Ee=await fetch(`${API_BASE_URL}/superadmin/users?${n}`,{headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch global users");return Ee.json()}async updateGlobalUserStatus(t,n){const Ee=await fetch(`${API_BASE_URL}/superadmin/users/${t}/status`,{method:"PATCH",headers:this.getAuthHeaders(),body:JSON.stringify({status:n})});if(!Ee.ok)throw new Error("Failed to update user status");return Ee.json()}async deleteGlobalUser(t){const n=await fetch(`${API_BASE_URL}/superadmin/users/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json().catch(()=>({}));throw new Error(Ee.message||"Failed to delete user")}return n.json()}async updateProfile(t){const n=await fetch(`${API_BASE_URL}/auth/me`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to update profile")}return n.json()}async getAllUsers(){const t=await fetch(`${API_BASE_URL}/admin/users`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch users")}return t.json()}async getAIConfig(){const t=await fetch(`${API_BASE_URL}/ai/config`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch AI config");return t.json()}async getMyFeedbacks(){const t=await fetch(`${API_BASE_URL}/feedback/my`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch feedbacks");return t.json()}async createFeedback(t){const n=await fetch(`${API_BASE_URL}/feedback`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to send feedback")}return n.json()}async getRoles(){const t=await fetch(`${API_BASE_URL}/admin/roles`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch roles");return t.json()}async createUser(t){const n=await fetch(`${API_BASE_URL}/admin/users`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to create user")}return n.json()}async deleteUser(t){const n=await fetch(`${API_BASE_URL}/admin/users/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to delete user")}return n.json()}async getDesignations(){const t=await fetch(`${API_BASE_URL}/designations`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch designations")}return t.json()}async createDesignation(t){const n=await fetch(`${API_BASE_URL}/designations`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to create designation")}return n.json()}async updateDesignation(t,n){const Ee=await fetch(`${API_BASE_URL}/designations/${t}`,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(n)});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to update designation")}return Ee.json()}async deleteDesignation(t){const n=await fetch(`${API_BASE_URL}/designations/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to delete designation")}return n.json()}async getShifts(){const t=await fetch(`${API_BASE_URL}/shifts`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch shifts")}return t.json()}async createShift(t){const n=await fetch(`${API_BASE_URL}/shifts`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to create shift")}return n.json()}async updateShift(t,n){const Ee=await fetch(`${API_BASE_URL}/shifts/${t}`,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(n)});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to update shift")}return Ee.json()}async deleteShift(t){const n=await fetch(`${API_BASE_URL}/shifts/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to delete shift")}return n.json()}async createRole(t){const n=await fetch(`${API_BASE_URL}/admin/roles`,{method:"POST",headers:{"Content-Type":"application/json",...this.getAuthHeaders()},body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to create role")}return n.json()}async updateRole(t,n){const Ee=await fetch(`${API_BASE_URL}/admin/roles/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",...this.getAuthHeaders()},body:JSON.stringify(n)});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to update role")}return Ee.json()}async deleteRole(t){const n=await fetch(`${API_BASE_URL}/admin/roles/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to delete role")}return n.json()}async updateUserStatus(t,n){const Ee=await fetch(`${API_BASE_URL}/admin/users/${t}/status`,{method:"PATCH",headers:this.getAuthHeaders(),body:JSON.stringify({status:n})});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to update user status")}return Ee.json()}async resetUserPassword(t){const n=await fetch(`${API_BASE_URL}/admin/users/${t}/reset-password`,{method:"POST",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to reset password")}return n.json()}async getPermissions(){const t=await fetch(`${API_BASE_URL}/admin/permissions`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch permissions")}return t.json()}async getAssetCategories(t=!1){const n=await fetch(`${API_BASE_URL}/asset-categories?includeInactive=${t}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to fetch asset categories")}return n.json()}async createAssetCategory(t){const n=await fetch(`${API_BASE_URL}/asset-categories`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to create asset category")}return n.json()}async updateAssetCategory(t,n){const Ee=await fetch(`${API_BASE_URL}/asset-categories/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to update asset category")}return Ee.json()}async deleteAssetCategory(t){const n=await fetch(`${API_BASE_URL}/asset-categories/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to delete asset category")}return n.json()}async toggleAssetCategoryStatus(t){const n=await fetch(`${API_BASE_URL}/asset-categories/${t}/toggle-status`,{method:"PATCH",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to toggle asset category status")}return n.json()}async getAssets(t){const n=t?"?"+new URLSearchParams(t).toString():"",Ee=await fetch(`${API_BASE_URL}/assets${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to fetch assets")}return Ee.json()}async createAsset(t){const n=t instanceof FormData,Ee=this.getAuthHeaders();n&&delete Ee["Content-Type"];const Re=await fetch(`${API_BASE_URL}/assets`,{method:"POST",headers:Ee,body:n?t:JSON.stringify(t)});if(!Re.ok){const Ce=await Re.json();throw new Error(Ce.message||"Failed to create asset")}return Re.json()}async updateAsset(t,n){const Ee=n instanceof FormData,Re=this.getAuthHeaders();Ee&&delete Re["Content-Type"];const Ce=await fetch(`${API_BASE_URL}/assets/${t}`,{method:"PUT",headers:Re,body:Ee?n:JSON.stringify(n)});if(!Ce.ok){const Te=await Ce.json();throw new Error(Te.message||"Failed to update asset")}return Ce.json()}async deleteAsset(t){const n=await fetch(`${API_BASE_URL}/assets/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to delete asset")}return n.json()}async getAssetStats(){const t=await fetch(`${API_BASE_URL}/assets/stats`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch asset statistics")}return t.json()}async uploadAssetInvoice(t,n){const Ee=new FormData;Ee.append("invoice",n);const Re=localStorage.getItem("authToken"),Ce=await fetch(`${API_BASE_URL}/assets/${t}/upload-invoice`,{method:"POST",headers:{...Re&&{Authorization:`Bearer ${Re}`}},body:Ee});if(!Ce.ok){const Te=await Ce.json();throw new Error(Te.message||"Failed to upload invoice")}return Ce.json()}async disposeAsset(t,n){const Ee=await fetch(`${API_BASE_URL}/assets/${t}/dispose`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to dispose asset")}return Ee.json()}async assignAsset(t){const n=await fetch(`${API_BASE_URL}/asset-assignments/assign`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to assign asset")}return n.json()}async acknowledgeAsset(t){const n=await fetch(`${API_BASE_URL}/asset-assignments/${t}/acknowledge`,{method:"POST",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to acknowledge asset")}return n.json()}async returnAsset(t,n){const Ee=await fetch(`${API_BASE_URL}/asset-assignments/${t}/return`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to return asset")}return Ee.json()}async getMyAssets(){const t=await fetch(`${API_BASE_URL}/asset-assignments/employee`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch assigned assets")}return t.json()}async getAssetAssignments(t){const n=t?"?"+new URLSearchParams(t).toString():"",Ee=await fetch(`${API_BASE_URL}/asset-assignments${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to fetch asset assignments")}return Ee.json()}async reportAssetIncident(t,n){const Ee=new FormData;Object.keys(t).forEach(Te=>{t[Te]!==void 0&&t[Te]!==null&&Ee.append(Te,t[Te])}),n&&n.length>0&&n.forEach(Te=>{Ee.append("photos",Te)});const Re=localStorage.getItem("authToken"),Ce=await fetch(`${API_BASE_URL}/asset-incidents/report`,{method:"POST",headers:{...Re&&{Authorization:`Bearer ${Re}`}},body:Ee});if(!Ce.ok){const Te=await Ce.json();throw new Error(Te.message||"Failed to report incident")}return Ce.json()}async getAssetIncidents(t){const n=t?"?"+new URLSearchParams(t).toString():"",Ee=await fetch(`${API_BASE_URL}/asset-incidents${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to fetch incidents")}return Ee.json()}async resolveAssetIncident(t,n){const Ee=await fetch(`${API_BASE_URL}/asset-incidents/${t}/resolve`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to resolve incident")}return Ee.json()}async getAssetHistory(t){const n=await fetch(`${API_BASE_URL}/asset-history/asset/${t}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to fetch asset history")}return n.json()}async getAllAssetHistory(t){const n=t?"?"+new URLSearchParams(t).toString():"",Ee=await fetch(`${API_BASE_URL}/asset-history${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to fetch history logs")}return Ee.json()}async createLeavePolicy(t){const n=t instanceof FormData,Ee=await fetch(`${API_BASE_URL}/leave-policies`,{method:"POST",headers:n?{Authorization:`Bearer ${localStorage.getItem("authToken")}`}:this.getAuthHeaders(),body:n?t:JSON.stringify(t)});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||Re.error||"Failed to create leave policy")}return Ee.json()}async getLeavePolicies(){const t=await fetch(`${API_BASE_URL}/leave-policies`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch leave policies");return t.json()}async getLeavePolicy(t){const n=await fetch(`${API_BASE_URL}/leave-policies/${t}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch leave policy");return n.json()}async updateLeavePolicy(t,n){const Ee=n instanceof FormData,Re=await fetch(`${API_BASE_URL}/leave-policies/${t}`,{method:"PUT",headers:Ee?{Authorization:`Bearer ${localStorage.getItem("token")}`}:this.getAuthHeaders(),body:Ee?n:JSON.stringify(n)});if(!Re.ok)throw new Error("Failed to update leave policy");return Re.json()}async deleteLeavePolicy(t){const n=await fetch(`${API_BASE_URL}/leave-policies/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete leave policy");return n.json()}async getLeaveStats(){const t=await fetch(`${API_BASE_URL}/leave/stats`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch leave stats");return t.json()}async applyLeave(t){const n=await fetch(`${API_BASE_URL}/leave/apply`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to apply for leave")}return n.json()}async getMyLeaves(){const t=await fetch(`${API_BASE_URL}/leave/my-leaves`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch my leaves");return t.json()}async getPendingLeaveApprovals(){const t=await fetch(`${API_BASE_URL}/leave/pending-approvals`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending leave approvals");return t.json()}async approveLeave(t,n){const Ee=await fetch(`${API_BASE_URL}/leave/${t}/approve`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!Ee.ok)throw new Error("Failed to approve leave");return Ee.json()}async rejectLeave(t,n){const Ee=await fetch(`${API_BASE_URL}/leave/${t}/reject`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!Ee.ok)throw new Error("Failed to reject leave");return Ee.json()}async upsertSalaryStructure(t){const n=await fetch(`${API_BASE_URL}/payroll/structure`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to save salary structure");return n.json()}async getSalaryStructure(t){const n=await fetch(`${API_BASE_URL}/payroll/structure/${t}`,{headers:this.getAuthHeaders()});if(!n.ok){if(n.status===404)return{structure:null};throw new Error("Failed to fetch salary structure")}return n.json()}async calculatePayroll(t){const n=await fetch(`${API_BASE_URL}/payroll/calculate`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to calculate payroll")}return n.json()}async getPayrollList(t){const n=new URLSearchParams(t).toString(),Ee=await fetch(`${API_BASE_URL}/payroll/list?${n}`,{headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch payroll list");return Ee.json()}async updatePayrollStatus(t,n){const Ee=await fetch(`${API_BASE_URL}/payroll/${t}/status`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({status:n})});if(!Ee.ok)throw new Error("Failed to update payroll status");return Ee.json()}async getMyPayslips(){const t=await fetch(`${API_BASE_URL}/payroll/my-payslips`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch payslips");return t.json()}async getProjects(t){const n=new URLSearchParams(t).toString(),Ee=await fetch(`${API_BASE_URL}/projects?${n}`,{headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch projects");return Ee.json()}async getProjectById(t){const n=await fetch(`${API_BASE_URL}/projects/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch project");return n.json()}async createProject(t){const n=await fetch(`${API_BASE_URL}/projects`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to create project");return n.json()}async updateProject(t,n){const Ee=await fetch(`${API_BASE_URL}/projects/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!Ee.ok)throw new Error("Failed to update project");return Ee.json()}async clearAuditLogs(){if(!(await fetch(`${API_BASE_URL}/audit`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to clear audit logs")}async getTasks(t){const n=new URLSearchParams(t).toString(),Ee=await fetch(`${API_BASE_URL}/tasks?${n}`,{headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch tasks");return Ee.json()}async createTask(t){const n=await fetch(`${API_BASE_URL}/tasks`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to create task");return n.json()}async updateTask(t,n){const Ee=await fetch(`${API_BASE_URL}/tasks/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!Ee.ok)throw new Error("Failed to update task");return Ee.json()}async updateCompanySettings(t){const n=t instanceof FormData,Ee=this.getAuthHeaders();n&&delete Ee["Content-Type"];const Re=await fetch(`${API_BASE_URL}/settings/company`,{method:"PUT",headers:Ee,body:n?t:JSON.stringify(t)});if(!Re.ok)throw new Error("Failed to update settings");return Re.json()}async getEmployees(){const t=await fetch(`${API_BASE_URL}/employees`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch employees")}return t.json()}async getEmployeeById(t){const n=await fetch(`${API_BASE_URL}/employees/${t}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to fetch employee")}return n.json()}async createEmployee(t){const n=t instanceof FormData,Ee=this.getAuthHeaders();n&&delete Ee["Content-Type"];const Re=await fetch(`${API_BASE_URL}/employees`,{method:"POST",headers:Ee,body:n?t:JSON.stringify(t)});if(!Re.ok){const Ce=await Re.json();throw new Error(Ce.message||"Failed to create employee")}return Re.json()}async updateEmployee(t,n){const Ee=n instanceof FormData,Re=this.getAuthHeaders();Ee&&delete Re["Content-Type"];const Ce=await fetch(`${API_BASE_URL}/employees/${t}`,{method:"PUT",headers:Re,body:Ee?n:JSON.stringify(n)});if(!Ce.ok){const Te=await Ce.json();throw new Error(Te.message||"Failed to update employee")}return Ce.json()}async getUpcomingEvents(){const t=await fetch(`${API_BASE_URL}/employees/upcoming-events`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch upcoming events")}return t.json()}async getHierarchy(){const t=await fetch(`${API_BASE_URL}/employees/hierarchy`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch hierarchy")}return t.json()}async clockIn(){const t=await fetch(`${API_BASE_URL}/attendance/clock-in`,{method:"POST",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to clock in")}return t.json()}async clockOut(t){const n=await fetch(`${API_BASE_URL}/attendance/clock-out`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({completedTasks:t})});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to clock out")}return n.json()}async startBreak(){const t=await fetch(`${API_BASE_URL}/attendance/break-start`,{method:"POST",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to start break")}return t.json()}async endBreak(){const t=await fetch(`${API_BASE_URL}/attendance/break-end`,{method:"POST",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to end break")}return t.json()}async getAttendanceStatus(){const t=await fetch(`${API_BASE_URL}/attendance/status`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch status");return t.json()}async getAttendanceHistory(t){const n=new URLSearchParams(t).toString(),Ee=await fetch(`${API_BASE_URL}/attendance/history?${n}`,{headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch history");return Ee.json()}async getHolidays(t){const n=t?`?year=${t}`:"",Ee=await fetch(`${API_BASE_URL}/holidays${n}`,{headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch holidays");return Ee.json()}async addHoliday(t){const n=await fetch(`${API_BASE_URL}/holidays`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to add holiday")}return n.json()}async deleteHoliday(t){const n=await fetch(`${API_BASE_URL}/holidays/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete holiday");return n.json()}async createTimesheetEntry(t){const n=await fetch(`${API_BASE_URL}/timesheet/entry`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to create timesheet entry")}return n.json()}async getTimesheetEntries(t){const n=new URLSearchParams(t).toString(),Ee=await fetch(`${API_BASE_URL}/timesheet/entries?${n}`,{headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch timesheet entries");return Ee.json()}async updateTimesheetEntry(t,n){const Ee=await fetch(`${API_BASE_URL}/timesheet/entry/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to update timesheet entry")}return Ee.json()}async deleteTimesheetEntry(t){const n=await fetch(`${API_BASE_URL}/timesheet/entry/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete timesheet entry");return n.json()}async requestTimeCorrection(t){const n=await fetch(`${API_BASE_URL}/time-correction/request`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to request correction")}return n.json()}async getMyCorrections(){const t=await fetch(`${API_BASE_URL}/time-correction/my-requests`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch corrections");return t.json()}async getPendingCorrections(){const t=await fetch(`${API_BASE_URL}/time-correction/pending`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending corrections");return t.json()}async approveCorrection(t,n){const Ee=await fetch(`${API_BASE_URL}/time-correction/${t}/approve`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!Ee.ok)throw new Error("Failed to approve correction");return Ee.json()}async getNotifications(){const t=await fetch(`${API_BASE_URL}/notifications`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch notifications");return t.json()}async markNotificationRead(t){const n=await fetch(`${API_BASE_URL}/notifications/${t}/read`,{method:"PUT",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to mark notification as read");return n.json()}async rejectCorrection(t,n){const Ee=await fetch(`${API_BASE_URL}/time-correction/${t}/reject`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!Ee.ok)throw new Error("Failed to reject correction");return Ee.json()}async getTeamStatus(){const t=await fetch(`${API_BASE_URL}/attendance/team-status`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch team status");return t.json()}async submitTimesheets(t){const n=await fetch(`${API_BASE_URL}/timesheet/submit`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({weekEnding:t})});if(!n.ok)throw new Error("Failed to submit timesheets");return n.json()}async getPendingTimesheetApprovals(){const t=await fetch(`${API_BASE_URL}/timesheet/pending-approvals`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending approvals");return t.json()}async approveTimesheet(t,n){const Ee=await fetch(`${API_BASE_URL}/timesheet/${t}/approve`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!Ee.ok)throw new Error("Failed to approve timesheet");return Ee.json()}async rejectTimesheet(t,n){const Ee=await fetch(`${API_BASE_URL}/timesheet/${t}/reject`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({comments:n})});if(!Ee.ok)throw new Error("Failed to reject timesheet");return Ee.json()}async getAuditLogs(t){const n=new URLSearchParams(t).toString(),Ee=await fetch(`${API_BASE_URL}/audit?${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch audit logs");return Ee.json()}async deleteAuditLog(t){if(!(await fetch(`${API_BASE_URL}/audit/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete audit log")}async getEntityAuditLogs(t,n){const Ee=await fetch(`${API_BASE_URL}/audit/${t}/${n}`,{headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch entity audit logs");return Ee.json()}async getPolicyStatus(){const t=await fetch(`${API_BASE_URL}/ai/policy-status`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch policy status");return t.json()}async uploadPolicy(t){const n=new FormData;Array.from(t).forEach(Te=>{n.append("policyFiles",Te)});const Re=this.getAuthHeaders();delete Re["Content-Type"];const Ce=await fetch(`${API_BASE_URL}/ai/upload-policy`,{method:"POST",headers:Re,body:n});if(!Ce.ok){const Te=await Ce.json();throw new Error(Te.message||"Failed to upload policy")}return Ce.json()}async deletePolicy(t){const n=await fetch(`${API_BASE_URL}/ai/policy/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to delete policy")}return n.json()}async askAi(t){const n=await fetch(`${API_BASE_URL}/ai/chat`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({question:t})});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to get AI response")}return n.json()}async getBadges(){const t=await fetch(`${API_BASE_URL}/badges`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch badges");return t.json()}async createBadge(t){const n=this.getAuthHeaders();delete n["Content-Type"];const Ee=await fetch(`${API_BASE_URL}/badges`,{method:"POST",headers:n,body:t});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to create badge")}return Ee.json()}async deleteBadge(t){const n=await fetch(`${API_BASE_URL}/badges/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete badge");return n.json()}async getAppreciations(t){const n=t&&t.recipientId?`?recipientId=${t.recipientId}`:"",Ee=await fetch(`${API_BASE_URL}/appreciation${n}`,{method:"GET",headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch appreciations");return Ee.json()}async createAppreciation(t){const n=await fetch(`${API_BASE_URL}/appreciation`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to send appreciation")}return n.json()}async markAppreciationsAsSeen(t){const n=await fetch(`${API_BASE_URL}/appreciation/mark-seen`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({ids:t})});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to mark appreciations as seen")}return n.json()}async updateBadge(t,n){const Ee=localStorage.getItem("authToken"),Re=await fetch(`${API_BASE_URL}/badges/${t}`,{method:"PUT",headers:{...Ee&&{Authorization:`Bearer ${Ee}`}},body:n});if(!Re.ok){const Ce=await Re.json();throw new Error(Ce.message||"Failed to update badge")}return Re.json()}async getHRLeaveOverview(t){const n=localStorage.getItem("hrms_token"),Ee=new URLSearchParams;Object.keys(t).forEach(Ce=>{t[Ce]&&Ee.append(Ce,t[Ce])});const Re=await fetch(`${API_BASE_URL}/leave/hr-overview?${Ee.toString()}`,{headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`}}});if(!Re.ok){const Ce=await Re.json();throw new Error(Ce.message||"Failed to fetch HR leave overview")}return Re.json()}async getEmailSettings(){const t=await fetch(`${API_BASE_URL}/email-automation/settings`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok){const n=await t.text();throw new Error(`Failed to fetch email settings: ${t.status} ${n}`)}return t.json()}async updateEmailSettings(t){const n=await fetch(`${API_BASE_URL}/email-automation/settings`,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to update email settings");return n.json()}async triggerEmailAutomation(){const t=await fetch(`${API_BASE_URL}/email-automation/trigger`,{method:"POST",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to trigger email automation");return t.json()}async getEmailAuditLogs(){const t=await fetch(`${API_BASE_URL}/email-automation/audit-logs`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch audit logs");return t.json()}async getSocialFeed(t){const n=t?"?"+new URLSearchParams(t).toString():"",Ee=await fetch(`${API_BASE_URL}/social/feed${n}`,{headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to fetch social feed");return Ee.json()}async createPost(t){const n=await fetch(`${API_BASE_URL}/social/posts`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to create post");return n.json()}async updatePost(t,n){const Ee=await fetch(`${API_BASE_URL}/social/posts/${t}`,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({content:n})});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to update post")}return Ee.json()}async deletePost(t){const n=await fetch(`${API_BASE_URL}/social/posts/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete post");return n.json()}async toggleReaction(t,n){const Ee=await fetch(`${API_BASE_URL}/social/posts/${t}/react`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({type:n})});if(!Ee.ok)throw new Error("Failed to toggle reaction");return Ee.json()}async votePoll(t,n){const Ee=await fetch(`${API_BASE_URL}/social/posts/${t}/vote`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({optionIndex:n})});if(!Ee.ok)throw new Error("Failed to vote");return Ee.json()}async getComments(t){const n=await fetch(`${API_BASE_URL}/social/posts/${t}/comments`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch comments");return n.json()}async addComment(t,n,Ee){const Re=await fetch(`${API_BASE_URL}/social/posts/${t}/comments`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({content:n,parentId:Ee})});if(!Re.ok)throw new Error("Failed to add comment");return Re.json()}async toggleCommentReaction(t,n){const Ee=await fetch(`${API_BASE_URL}/social/comments/${t}/react`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({type:n})});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to toggle comment reaction")}return Ee.json()}async uploadSocialMedia(t){const n=new FormData;n.append("file",t);const Ee=localStorage.getItem("authToken"),Re=await fetch(`${API_BASE_URL}/social/upload-media`,{method:"POST",headers:{...Ee&&{Authorization:`Bearer ${Ee}`}},body:n});if(!Re.ok)throw new Error("Failed to upload media");return Re.json()}async checkNewSocialPosts(t){const n=await fetch(`${API_BASE_URL}/social/check-new?lastChecked=${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to check new posts");return n.json()}async createDocumentType(t){const n=await fetch(`${API_BASE_URL}/documents/types`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const Ee=await n.json();throw new Error(Ee.message||"Failed to create document type")}return n.json()}async getAllDocumentTypes(){const t=await fetch(`${API_BASE_URL}/documents/types`,{method:"GET",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch document types");return t.json()}async updateDocumentType(t,n){const Ee=await fetch(`${API_BASE_URL}/documents/types/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to update document type")}return Ee.json()}async deleteDocumentType(t){const n=await fetch(`${API_BASE_URL}/documents/types/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to delete document type");return n.json()}async uploadEmployeeDocument(t){const n=localStorage.getItem("authToken"),Ee=await fetch(`${API_BASE_URL}/documents/employee/upload`,{method:"POST",headers:{...n&&{Authorization:`Bearer ${n}`}},body:t});if(!Ee.ok){const Re=await Ee.json();throw new Error(Re.message||"Failed to upload document")}return Ee.json()}async getEmployeeDocuments(t){const n=await fetch(`${API_BASE_URL}/documents/employee/${t}`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch employee documents");return n.json()}async restoreDocumentVersion(t,n){const Ee=await fetch(`${API_BASE_URL}/documents/employee/restore/${t}/${n}`,{method:"POST",headers:this.getAuthHeaders()});if(!Ee.ok)throw new Error("Failed to restore document version");return Ee.json()}}const apiService=new ApiService,AuthContext=reactExports.createContext(void 0);function AuthProvider({children:e}){const[t,n]=reactExports.useState(null),[Ee,Re]=reactExports.useState(!1),[Ce,Te]=reactExports.useState(!0);reactExports.useEffect(()=>{const $e=localStorage.getItem("hrms_user"),He=localStorage.getItem("authToken");if($e&&He)try{const Ue=JSON.parse($e);Ue&&(Ue.id||Ue._id)?(n(Ue),Re(!0)):(console.warn("[AuthContext] Stored user missing ID. Clearing session."),localStorage.removeItem("hrms_user"),localStorage.removeItem("authToken"))}catch(Ue){console.error("Failed to parse stored user",Ue),localStorage.removeItem("hrms_user"),localStorage.removeItem("authToken")}Te(!1)},[]);const Me=$e=>{const He=typeof $e=="object"&&($e!=null&&$e.name)?$e.name:$e;if(typeof He!="string")return"Employee";const Ue={admin:"Admin",hr:"HR",accountant:"Accountant",pm:"Project Manager",employee:"Employee",intern:"Intern",contractor:"Consultant",consultant:"Consultant"};return Object.values(Ue).includes(He)?He:Ue[He.toLowerCase()]||"Employee"},De=()=>{n(null),Re(!1),localStorage.removeItem("hrms_user"),localStorage.removeItem("authToken")};reactExports.useEffect(()=>{localStorage.getItem("authToken")&&Oe()},[]);const Oe=async()=>{var $e,He,Ue,Ve;try{const qe=(await apiService.getCurrentUser()).user,Ge={id:qe.id||qe._id,email:qe.email,name:qe.name||qe.email.split("@")[0],employeeId:qe.employeeId,department:qe.department,designation:qe.designation,role:qe.isSuperAdmin?"Super Admin":($e=qe.roles)!=null&&$e[0]?Me(qe.roles[0]):"Employee",roles:((He=qe.roles)==null?void 0:He.map(Me))||["Employee"],avatar:qe.avatar,tenantId:qe.tenantId,isSuperAdmin:qe.isSuperAdmin||!1,isCompanyAdmin:qe.isCompanyAdmin||!1,doj:qe.doj,pan:qe.pan,bankName:qe.bankName,bankAccountNo:qe.bankAccountNo,accessibleModules:((Ve=(Ue=qe.roles)==null?void 0:Ue[0])==null?void 0:Ve.accessibleModules)||qe.accessibleModules};return Ge.id||console.error("[AuthContext] CRITICAL: Missing ID in updated user!"),n(Ge),localStorage.setItem("hrms_user",JSON.stringify(Ge)),Ge}catch(We){return console.error("Failed to refresh user data",We),De(),null}},Be=async($e,He,Ue)=>{var Ve,We,qe;Te(!0);try{const Ge=await apiService.login($e,He,Ue);Ge.token&&localStorage.setItem("authToken",Ge.token);const Ye=await apiService.getCurrentUser(),Ke={id:Ye.user.id||Ye.user._id,email:Ye.user.email,name:Ye.user.name||Ye.user.email.split("@")[0],role:Ye.user.isSuperAdmin?"Super Admin":Me(((Ve=Ye.user.roles[0])==null?void 0:Ve.name)||Ye.user.roles[0]||"employee"),department:Ye.user.department,designation:Ye.user.employeeId,avatar:Ye.user.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(Ye.user.name||Ye.user.email)}&background=random`,employeeId:Ye.user.employeeId,doj:Ye.user.doj,pan:Ye.user.pan,bankName:Ye.user.bankName,bankAccountNo:Ye.user.bankAccountNo,tenantId:Ye.user.tenantId,isSuperAdmin:Ye.user.isSuperAdmin||!1,isCompanyAdmin:Ye.user.isCompanyAdmin||!1,accessibleModules:((qe=(We=Ye.user.roles)==null?void 0:We[0])==null?void 0:qe.accessibleModules)||Ye.user.accessibleModules};return n(Ke),Re(!0),localStorage.setItem("hrms_user",JSON.stringify(Ke)),Ke}catch(Ge){console.error("API login failed, trying dummy credentials...",Ge);const Ye=ze($e);if(Ye)return n(Ye),Re(!0),localStorage.setItem("hrms_user",JSON.stringify(Ye)),localStorage.setItem("authToken","dummy-token"),Ye;throw Ge}finally{Te(!1)}};console.log(t,"user");const ze=($e,He)=>({"admin@sys.com":{id:"admin-1",email:"admin@sys.com",name:"System Admin",role:"Admin",department:"IT",designation:"System Administrator",avatar:"SA",employeeId:"EMP-001",doj:"2023-01-01",pan:"ABCDE1234F",bankName:"HDFC Bank",bankAccountNo:"1234567890"},"hr@company.com":{id:"hr-1",email:"hr@company.com",name:"HR Executive",role:"HR",department:"Human Resources",designation:"HR Executive",avatar:"HR",employeeId:"EMP-002",doj:"2023-02-01",pan:"FGHIJ5678K",bankName:"ICICI Bank",bankAccountNo:"0987654321"},"pm@company.com":{id:"pm-1",email:"pm@company.com",name:"Project Manager",role:"Project Manager",department:"Engineering",designation:"Project Manager",avatar:"PM",employeeId:"EMP-003",doj:"2023-03-01",pan:"LMNOP9012Q",bankName:"SBI",bankAccountNo:"1122334455"},"employee@company.com":{id:"emp-1",email:"employee@company.com",name:"John Employee",role:"Employee",department:"Engineering",designation:"Software Engineer",avatar:"JE",employeeId:"EMP-004",doj:"2023-04-01",pan:"RSTUV3456W",bankName:"Axis Bank",bankAccountNo:"5566778899"},"acc@company.com":{id:"acc-1",email:"acc@company.com",name:"Accountant",role:"Accountant",department:"Finance",designation:"Senior Accountant",avatar:"AC",employeeId:"EMP-005",doj:"2023-05-01",pan:"XYZAB7890C",bankName:"Kotak Bank",bankAccountNo:"9988776655"},"intern@company.com":{id:"int-1",email:"intern@company.com",name:"Intern",role:"Intern",department:"Engineering",designation:"Software Intern",avatar:"IN",employeeId:"EMP-006",doj:"2024-01-01",pan:"DEFGH1234I",bankName:"Canara Bank",bankAccountNo:"6655443322"},"contract@company.com":{id:"con-1",email:"contract@company.com",name:"Contractor",role:"Consultant",department:"Engineering",designation:"Contract Developer",avatar:"CO",employeeId:"EMP-007",doj:"2023-06-01",pan:"JKLMN5678O",bankName:"Union Bank",bankAccountNo:"2233445566"}})[$e.toLowerCase()]||null;return jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:t,isAuthenticated:Ee,isLoading:Ce,login:Be,logout:De,refreshUser:Oe},children:e})}function useAuth(){const e=reactExports.useContext(AuthContext);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const menuItems=[{to:"/",label:"Dashboard",roles:["Admin","HR","Accountant","Project Manager","Employee","Intern"]},{to:"/employee-management",label:"Employee Management",roles:["Admin","HR"]},{to:"/roles",label:"Role Management",roles:["Admin","HR"]},{to:"/designations",label:"Designation Management",roles:["Admin","HR"],module:"employees"},{to:"/shifts",label:"Shift Management",roles:["Admin","HR"],module:"shifts"},{to:"/settings/documents",label:"Document Management",roles:["Admin","HR"],module:"documents"},{to:"/assets",label:"Asset Management",roles:["Admin","HR"]},{to:"/my-assets",label:"My Assets",roles:["Accountant","Project Manager","Employee","Intern","Consultant"]},{to:"/ai-configuration",label:"AI Chatbot Configuration",roles:["Admin","HR"]},{to:"/attendance",label:"Attendance & Time Tracking",roles:["Admin","Employee","HR","Project Manager","Intern","Consultant"]},{to:"/audit",label:"Audit Trail",roles:["Admin","HR"]},{to:"/leave",label:"Leave Management",roles:["Admin","HR","Project Manager","Employee","Intern","Consultant"]},{to:"/payroll",label:"Payroll & Finance",roles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"]},{to:"/projects",label:"Project Management",roles:["Admin","Project Manager","Employee","Intern","Consultant","Accountant"]},{to:"/organization",label:"Hierarchy",roles:["Admin","HR","Project Manager","Employee","Intern","Consultant"]},{to:"/superadmin/analytics",label:"Platform Analytics",roles:["Super Admin"]},{to:"/superadmin/tenants",label:"Tenant Management",roles:["Super Admin"]},{to:"/superadmin/users",label:"User Management",roles:["Super Admin"]},{to:"/superadmin/settings",label:"Platform Settings",roles:["Super Admin"]},{to:"/settings",label:"System Settings",roles:["Admin"]},{to:"/miscellaneous",label:"Miscellaneous",roles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"]},{to:"/social",label:"Social Wall",roles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"]}];function getFirstAccessibleRoute(e){const t=menuItems.find(n=>n.roles.includes(e));return(t==null?void 0:t.to)||"/"}function getAccessibleMenuItems(e){return menuItems.filter(t=>t.roles.includes(e))}function Tooltip({content:e,children:t,position:n="bottom",trigger:Ee="hover"}){const[Re,Ce]=reactExports.useState(!1),Te=reactExports.useRef(null),Me=reactExports.useRef(null),[De,Oe]=reactExports.useState({top:0,left:0}),[Be,ze]=reactExports.useState(0),$e=reactExports.useRef(null),He=()=>{if(!Te.current)return;const Ge=Te.current.getBoundingClientRect(),Ye=window.scrollX,Ke=window.scrollY,Xe=window.innerWidth;let Ze=0,er=0,St=0;switch(n){case"top":Ze=Ge.top+Ke-8,er=Ge.left+Ye+Ge.width/2;break;case"bottom":Ze=Ge.bottom+Ke+8,er=Ge.left+Ye+Ge.width/2;break;case"left":Ze=Ge.top+Ke+Ge.height/2,er=Ge.left+Ye-8;break;case"right":Ze=Ge.top+Ke+Ge.height/2,er=Ge.right+Ye+8;break}if((n==="top"||n==="bottom")&&Me.current){const hr=Me.current.getBoundingClientRect().width/2,ur=10,dr=er-Ye;let vr=dr;dr+hr>Xe-ur&&(vr=Xe-ur-hr),dr-hr<ur&&(vr=ur+hr);const yr=vr+Ye;St=er-yr,er=yr}Oe({top:Ze,left:er}),ze(St)},Ue=()=>{He(),Ee==="hover"?$e.current=setTimeout(()=>Ce(!0),200):Ce(!0)},Ve=()=>{$e.current&&clearTimeout($e.current),Ce(!1)},We=Ge=>{Ge.stopPropagation(),Re?Ve():Ue()};reactExports.useEffect(()=>{if(Ee==="click"&&Re){const Ge=Ye=>{Te.current&&!Te.current.contains(Ye.target)&&Me.current&&!Me.current.contains(Ye.target)&&Ve()};return document.addEventListener("mousedown",Ge),()=>{document.removeEventListener("mousedown",Ge)}}},[Ee,Re]),reactExports.useLayoutEffect(()=>{Re&&He()},[Re]),reactExports.useEffect(()=>{if(Re)return window.addEventListener("scroll",He),window.addEventListener("resize",He),()=>{window.removeEventListener("scroll",He),window.removeEventListener("resize",He)}},[Re]);const qe=jsxRuntimeExports.jsxs("div",{ref:Me,className:"fixed z-[9999] px-3 py-1.5 text-xs font-medium text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded shadow-lg animate-in fade-in zoom-in-95 duration-200",style:{top:De.top,left:De.left,transform:n==="top"?"translate(-50%, -100%)":n==="bottom"?"translate(-50%, 0)":n==="left"?"translate(-100%, -50%)":"translate(0, -50%)"},children:[e,jsxRuntimeExports.jsx("div",{className:`absolute w-2 h-2 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 transform rotate-45 ${n==="top"?"bottom-[-5px] left-1/2 -translate-x-1/2 -rotate-135 border-l-0 border-t-0 border-r border-b":n==="bottom"?"top-[-5px] left-1/2 -translate-x-1/2 border-l border-t":n==="left"?"right-[-5px] top-1/2 -translate-y-1/2 rotate-135 border-l-0 border-t-0 border-r border-b":"left-[-5px] top-1/2 -translate-y-1/2 -rotate-45"}`,style:{marginLeft:Be?`${Be}px`:void 0}})]});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:Te,className:"relative flex items-center justify-center cursor-pointer",onMouseEnter:Ee==="hover"?Ue:void 0,onMouseLeave:Ee==="hover"?Ve:void 0,onClick:Ee==="click"?We:void 0,children:t}),Re&&reactDomExports.createPortal(qe,document.body)]})}const createStoreImpl=e=>{let t;const n=new Set,Ee=(Oe,Be)=>{const ze=typeof Oe=="function"?Oe(t):Oe;if(!Object.is(ze,t)){const $e=t;t=Be??(typeof ze!="object"||ze===null)?ze:Object.assign({},t,ze),n.forEach(He=>He(t,$e))}},Re=()=>t,Me={setState:Ee,getState:Re,getInitialState:()=>De,subscribe:Oe=>(n.add(Oe),()=>n.delete(Oe))},De=t=e(Ee,Re,Me);return Me},createStore=e=>e?createStoreImpl(e):createStoreImpl,identity=e=>e;function useStore(e,t=identity){const n=React4.useSyncExternalStore(e.subscribe,React4.useCallback(()=>t(e.getState()),[e,t]),React4.useCallback(()=>t(e.getInitialState()),[e,t]));return React4.useDebugValue(n),n}const createImpl=e=>{const t=createStore(e),n=Ee=>useStore(t,Ee);return Object.assign(n,t),n},create=e=>e?createImpl(e):createImpl,useAppStore=create((e,t)=>({leaveStats:null,workStats:null,holidays:null,widgetAnimationPlayed:!1,notifications:[],unreadCount:0,setWidgetAnimationPlayed:()=>e({widgetAnimationPlayed:!0}),fetchDashboardData:async()=>{await Promise.all([t().fetchLeaveStats(),t().fetchHolidays()]);try{const n=new Date,Ee=new Date(n.getFullYear(),n.getMonth(),1).toISOString(),Re=new Date(n.getFullYear(),n.getMonth()+1,0).toISOString(),[Ce,Te]=await Promise.all([apiService.getTimesheetEntries({startDate:Ee,endDate:Re}),apiService.getAttendanceHistory({startDate:Ee,endDate:Re})]),De=(Array.isArray(Ce)?Ce:Ce.data||[]).reduce((He,Ue)=>He+(Number(Ue.duration)||0),0),Oe=Array.isArray(Te)?Te:Te.data||Te.history||[];let Be=0,ze=0;Oe.forEach(He=>{if(He.clockIn){ze++;const Ue=new Date(He.clockIn),Ve=Ue.getHours(),We=Ue.getMinutes();(Ve<9||Ve===9&&We<=30)&&Be++}});const $e=ze>0?Math.round(Be/ze*100):0;e({workStats:{totalHours:Math.round(De),onTimePercentage:$e}})}catch(n){console.error("Failed to fetch dashboard work stats",n)}},fetchLeaveStats:async()=>{try{if(t().leaveStats)return;const n=await apiService.getLeaveStats();e({leaveStats:n.stats})}catch(n){console.error("Failed to fetch leave stats:",n)}},fetchHolidays:async()=>{try{if(t().holidays)return;const n=await apiService.getHolidays();e({holidays:n.data||[]})}catch(n){console.error("Failed to fetch holidays:",n)}},fetchNotifications:async()=>{try{const n=await apiService.getNotifications(),Ee=Array.isArray(n)?n:[],Re=Ee.filter(Ce=>!Ce.read).length;e({notifications:Ee,unreadCount:Re})}catch(n){console.error("Failed to fetch notifications",n)}},markNotificationRead:async n=>{try{const{notifications:Ee}=t();if(n==="all"){const Re=Ee.map(Ce=>({...Ce,read:!0}));e({notifications:Re,unreadCount:0}),await apiService.markNotificationRead("all")}else{const Re=Ee.map(Te=>Te._id===n?{...Te,read:!0}:Te),Ce=Re.filter(Te=>!Te.read).length;e({notifications:Re,unreadCount:Ce}),await apiService.markNotificationRead(n)}}catch(Ee){console.error("Failed to mark notification read",Ee),t().fetchNotifications()}},resetStore:()=>{e({leaveStats:null,workStats:null,holidays:null,notifications:[],unreadCount:0})}}));function NotificationDropdown(){const{notifications:e,unreadCount:t,fetchNotifications:n,markNotificationRead:Ee}=useAppStore(),[Re,Ce]=reactExports.useState(!1),Te=reactExports.useRef(null),Me=useNavigate();reactExports.useEffect(()=>{n();const ze=setInterval(()=>{n()},6e4);return()=>clearInterval(ze)},[]),reactExports.useEffect(()=>{const ze=$e=>{Te.current&&!Te.current.contains($e.target)&&Ce(!1)};return document.addEventListener("mousedown",ze),()=>document.removeEventListener("mousedown",ze)},[]);const De=ze=>{ze.stopPropagation(),Ee("all")},Oe=ze=>{ze.read||Ee(ze._id),Ce(!1),ze.type==="LEAVE"?Me("/leave"):ze.type==="TIMESHEET"?Me("/attendance"):ze.type==="PAYROLL"&&Me("/payroll")},Be=ze=>{switch(ze){case"LEAVE":return"text-orange-500 bg-orange-50";case"TIMESHEET":return"text-blue-500 bg-blue-50";case"PAYROLL":return"text-green-500 bg-green-50";default:return"text-gray-500 bg-gray-50"}};return jsxRuntimeExports.jsxs("div",{className:"relative",ref:Te,children:[jsxRuntimeExports.jsx(Tooltip,{content:"Notifications",children:jsxRuntimeExports.jsxs("button",{onClick:()=>Ce(!Re),className:"relative p-2 text-text-secondary hover:text-text-primary hover:bg-bg-hover rounded-lg transition-colors",children:[jsxRuntimeExports.jsx(Bell,{size:20}),t>0&&jsxRuntimeExports.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-status-error rounded-full ring-2 ring-white animate-pulse"})]})}),Re&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-bg-card rounded-lg shadow-lg border border-border animate-in fade-in slide-in-from-top-2 duration-200",style:{zIndex:99999},children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-text-primary",children:"Notifications"}),t>0&&jsxRuntimeExports.jsxs("button",{onClick:De,className:"text-xs text-brand-primary hover:text-brand-dark flex items-center gap-1",children:[jsxRuntimeExports.jsx(Check,{size:12})," Mark all read"]})]}),jsxRuntimeExports.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length===0?jsxRuntimeExports.jsx("div",{className:"p-8 text-center text-text-secondary text-sm",children:"No notifications yet"}):e.map(ze=>jsxRuntimeExports.jsx("div",{onClick:()=>Oe(ze),className:`p-4 border-b border-border last:border-0 cursor-pointer hover:bg-bg-hover transition-colors ${ze.read?"":"bg-brand-primary/5"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs("div",{className:`p-2 rounded-lg h-fit ${Be(ze.type)}`,children:[jsxRuntimeExports.jsx(Bell,{size:16})," "]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:`text-sm ${ze.read?"font-medium":"font-semibold"} text-text-primary`,children:ze.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mt-1 line-clamp-2",children:ze.message}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-text-tertiary mt-2",children:new Date(ze.createdAt).toLocaleString()})]})]})},ze._id))})]})]})}const Input=reactExports.forwardRef(({label:e,error:t,helperText:n,className:Ee="",leftIcon:Re,rightIcon:Ce,id:Te,required:Me,...De},Oe)=>{const Be=Te||De.name||Math.random().toString(36).substr(2,9);return jsxRuntimeExports.jsxs("div",{className:"w-full",children:[e&&jsxRuntimeExports.jsxs("label",{htmlFor:Be,className:"block text-sm font-medium text-text-secondary mb-1",children:[e," ",Me&&jsxRuntimeExports.jsx("span",{className:"text-status-error",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[Re&&jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-text-muted",children:Re}),jsxRuntimeExports.jsx("input",{ref:Oe,id:Be,disabled:De.disabled,required:Me,className:`
            w-full rounded-lg border bg-bg-card
            ${t?"border-status-error focus:ring-status-error":"border-border focus:ring-brand-primary"}
            ${Re?"pl-10":"px-3"}
            ${Ce?"pr-10":"px-3"}
            py-2 text-sm placeholder-text-muted text-text-primary
            focus:outline-none focus:ring-2 focus:border-transparent
            disabled:bg-bg-main disabled:text-text-muted
            h-[38px]
            ${Ee}
          `,...De}),Ce&&jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-text-muted",children:Ce})]}),t&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-status-error",children:t}),!t&&n&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-text-muted",children:n})]})});Input.displayName="Input";function ChatWidget(){const{user:e}=useAuth(),[t,n]=reactExports.useState(!1),[Ee,Re]=reactExports.useState([{id:"welcome",sender:"bot",text:"Hello! I am your HR AI Assistant. How can I help you regarding company policies today?",timestamp:new Date}]),[Ce,Te]=reactExports.useState(""),[Me,De]=reactExports.useState(!1),Oe=reactExports.useRef(null),Be=()=>{var $e;($e=Oe.current)==null||$e.scrollIntoView({behavior:"smooth"})};if(reactExports.useEffect(()=>{Be()},[Ee,t]),!e)return null;const ze=async $e=>{if($e==null||$e.preventDefault(),!Ce.trim()||Me)return;const He={id:Date.now().toString(),sender:"user",text:Ce,timestamp:new Date};Re(Ue=>[...Ue,He]),Te(""),De(!0);try{const Ue=await apiService.askAi(He.text),Ve={id:(Date.now()+1).toString(),sender:"bot",text:Ue.answer,timestamp:new Date};Re(We=>[...We,Ve])}catch{const Ve={id:(Date.now()+1).toString(),sender:"bot",text:"Sorry, I encountered an error while processing your request. Please try again later.",timestamp:new Date};Re(We=>[...We,Ve])}finally{De(!1)}};return jsxRuntimeExports.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end",children:[t&&jsxRuntimeExports.jsxs("div",{className:"mb-4 w-[350px] md:w-[400px] h-[500px] bg-bg-card rounded-2xl shadow-xl border border-border flex flex-col overflow-hidden animate-in slide-in-from-bottom-5 fade-in duration-200",children:[jsxRuntimeExports.jsxs("div",{className:"bg-brand-primary p-4 flex justify-between items-center text-white",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 bg-white/20 rounded-full",children:jsxRuntimeExports.jsx(Bot,{size:20})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-sm",children:"HR Assistant"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-brand-primary-foreground/80 flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 bg-status-success rounded-full"}),"Online"]})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>n(!1),className:"text-white/80 hover:text-white transition-colors",children:jsxRuntimeExports.jsx(X$1,{size:20})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-bg-main/50",children:[Ee.map($e=>jsxRuntimeExports.jsxs("div",{className:`flex gap-3 ${$e.sender==="user"?"flex-row-reverse":"flex-row"}`,children:[jsxRuntimeExports.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${$e.sender==="user"?"bg-brand-secondary text-white":"bg-brand-primary/10 text-brand-primary"}`,children:$e.sender==="user"?jsxRuntimeExports.jsx(User,{size:14}):jsxRuntimeExports.jsx(Bot,{size:14})}),jsxRuntimeExports.jsxs("div",{className:`max-w-[80%] px-4 py-2.5 rounded-2xl text-sm ${$e.sender==="user"?"bg-brand-primary text-white rounded-tr-none":"bg-bg-card border border-border text-text-primary rounded-tl-none shadow-sm"}`,children:[jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:$e.text}),jsxRuntimeExports.jsx("span",{className:`text-[10px] block mt-1 ${$e.sender==="user"?"text-white/70":"text-text-muted"}`,children:$e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},$e.id)),Me&&jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary/10 text-brand-primary flex items-center justify-center shrink-0",children:jsxRuntimeExports.jsx(Bot,{size:14})}),jsxRuntimeExports.jsx("div",{className:"bg-bg-card border border-border px-4 py-3 rounded-2xl rounded-tl-none shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-brand-primary rounded-full animate-bounce [animation-delay:-0.3s]"}),jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-brand-primary rounded-full animate-bounce [animation-delay:-0.15s]"}),jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-brand-primary rounded-full animate-bounce"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-text-muted animate-pulse font-medium",children:"Thinking..."})]})})]}),jsxRuntimeExports.jsx("div",{ref:Oe})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ze,className:"p-4 bg-bg-card border-t border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Input,{value:Ce,onChange:$e=>Te($e.target.value),placeholder:"Ask about HR policies...",className:"bg-bg-main rounded-full px-4 py-2.5 text-sm"})}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:!Ce.trim()||Me,className:"p-2.5 bg-brand-primary text-white rounded-full hover:bg-brand-secondary disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",children:jsxRuntimeExports.jsx(Send,{size:18})})]}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-text-muted mt-2 ml-2",children:"AI can make mistakes. Please verify important info with HR."})]})]}),!t&&jsxRuntimeExports.jsx("button",{onClick:()=>n(!0),className:"bg-brand-primary hover:bg-brand-secondary text-white h-14 w-14 rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",children:jsxRuntimeExports.jsx(MessagesSquare,{size:22})})]})}function Avatar({src:e,alt:t,name:n,className:Ee,size:Re="md",fallbackColor:Ce="bg-brand-secondary"}){const[Te,Me]=reactExports.useState(!1);reactExports.useEffect(()=>{Me(!1)},[e]);const De=Be=>Be?Be.split(" ").map(ze=>ze[0]).slice(0,2).join("").toUpperCase():"",Oe=()=>{switch(Re){case"sm":return"w-8 h-8 text-xs";case"md":return"w-10 h-10 text-sm";case"lg":return"w-16 h-16 text-lg";case"xl":return"w-24 h-24 text-2xl";default:return"w-10 h-10 text-sm"}};return!e||Te?jsxRuntimeExports.jsx("div",{className:cn$2("rounded-full flex items-center justify-center text-white font-bold overflow-hidden",Ce,Oe(),Ee),children:n?De(n):jsxRuntimeExports.jsx(User,{size:16})}):jsxRuntimeExports.jsx("div",{className:cn$2("rounded-full overflow-hidden",Oe(),Ee),children:jsxRuntimeExports.jsx("img",{src:e,alt:t||n||"Avatar",className:"w-full h-full object-cover",onError:()=>Me(!0)})})}const icons={success:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-500"}),error:jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-red-500"}),warning:jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-yellow-500"}),info:jsxRuntimeExports.jsx(Info,{className:"w-5 h-5 text-blue-500"})},styles={success:"border-l-4 border-green-500",error:"border-l-4 border-red-500",warning:"border-l-4 border-yellow-500",info:"border-l-4 border-blue-500"};function Toast({id:e,message:t,type:n="info",onClose:Ee,duration:Re=5e3}){return reactExports.useEffect(()=>{const Ce=setTimeout(()=>{Ee(e)},Re);return()=>clearTimeout(Ce)},[e,Re,Ee]),jsxRuntimeExports.jsxs("div",{className:`flex items-center w-full max-w-sm p-4 text-gray-800 bg-white rounded-lg shadow-lg dark:text-gray-400 dark:bg-gray-800 transition-all transform translate-x-0 ${styles[n]}`,role:"alert",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:icons[n]}),jsxRuntimeExports.jsx("div",{className:"ml-3 text-sm font-normal mr-2 flex-1",children:t}),jsxRuntimeExports.jsxs("button",{type:"button",className:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700",onClick:()=>Ee(e),"aria-label":"Close",children:[jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"}),jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})]})]})}const NotificationContext=reactExports.createContext(void 0);function NotificationProvider({children:e}){const{user:t}=useAuth(),[n,Ee]=reactExports.useState(0),Re=reactExports.useRef(new Date().toISOString()),[Ce,Te]=reactExports.useState([]),Me=()=>{try{const ze=window.AudioContext||window.webkitAudioContext;if(!ze)return;const $e=new ze,He=$e.createOscillator(),Ue=$e.createGain();He.connect(Ue),Ue.connect($e.destination),He.type="sine",He.frequency.setValueAtTime(500,$e.currentTime),Ue.gain.setValueAtTime(.1,$e.currentTime),Ue.gain.exponentialRampToValueAtTime(1e-5,$e.currentTime+.5),He.start(),He.stop($e.currentTime+.5)}catch(ze){console.error("Audio play failed",ze)}};reactExports.useEffect(()=>{if(!t)return;console.log("Starting Social Wall polling...");const ze=setInterval(async()=>{var $e,He;try{const Ue=Re.current,Ve=new Date().toISOString(),We=await apiService.checkNewSocialPosts(Ue);if(Re.current=Ve,We.count>0&&(console.log("New posts found:",We.count),Ee(qe=>qe+We.count),We.latestPost)){const qe=`${($e=We.latestPost.author)==null?void 0:$e.firstName} ${((He=We.latestPost.author)==null?void 0:He.lastName)||""}`.trim();We.latestPost.author._id!==t.employeeId&&We.latestPost.author!==t.employeeId&&(De(`New post from ${qe}`,"info"),Me())}}catch(Ue){console.error("Polling error",Ue)}},15e3);return()=>clearInterval(ze)},[t]);const De=(ze,$e)=>{const He=Date.now().toString();Te(Ue=>[...Ue,{id:He,message:ze,type:$e}])},Oe=ze=>{Te($e=>$e.filter(He=>He.id!==ze))},Be=()=>{Ee(0)};return jsxRuntimeExports.jsxs(NotificationContext.Provider,{value:{unreadSocialCount:n,clearSocialNotifications:Be,showToast:De},children:[e,jsxRuntimeExports.jsx("div",{className:"fixed top-24 right-4 z-50 space-y-2",children:Ce.map(ze=>jsxRuntimeExports.jsx(Toast,{id:ze.id,message:ze.message,type:ze.type,onClose:Oe},ze.id))})]})}function useNotification(){const e=reactExports.useContext(NotificationContext);if(e===void 0)throw new Error("useNotification must be used within a NotificationProvider");return e}function useOnClickOutside(e,t){reactExports.useEffect(()=>{const n=Ee=>{const Re=e==null?void 0:e.current;!Re||Re.contains((Ee==null?void 0:Ee.target)||null)||t(Ee)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[e,t])}function MainLayout(){var ar,hr,ur,dr,vr,yr,br,lr;const{user:e,logout:t}=useAuth(),{theme:n,toggleTheme:Ee}=useTheme(),{unreadSocialCount:Re,clearSocialNotifications:Ce}=useNotification(),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(!1),Be=useLocation(),ze=useNavigate(),$e=reactExports.useRef(null);useOnClickOutside($e,()=>Oe(!1)),reactExports.useEffect(()=>{if(e!=null&&e.tenantId&&typeof e.tenantId=="object"){const cr=e.tenantId.settings;if(cr!=null&&cr.favicon){const rr=document.querySelector("link[rel~='icon']");if(rr)rr.href=cr.favicon;else{const pr=document.createElement("link");pr.rel="icon",pr.href=cr.favicon,document.head.appendChild(pr)}}}},[e]);const He=()=>Me(!Te),Ue=[{to:"/",icon:LayoutDashboard,label:"Dashboard"},{to:"/employee-management",icon:Users,label:"Employee Management"},{to:"/roles",icon:Shield,label:"Role Management"},{to:"/settings/documents",icon:FileText,label:"Document Management"},{to:"/attendance",icon:Clock,label:"Attendance & Time Tracking"},{to:"/shifts",icon:CalendarClock,label:"Shift Management"},{to:"/designations",icon:Badge$1,label:"Designation Management"},{to:"/audit",icon:ClipboardList,label:"Audit Trail"},{to:"/leave",icon:CalendarDays,label:"Leave Management"},{to:"/payroll",icon:Banknote,label:"Payroll & Finance"},{to:"/projects",icon:Briefcase,label:"Project Management"},{to:"/organization",icon:Network,label:"Hierarchy"},{to:"/social",icon:Hash,label:"Social Wall"},{to:"/ai-configuration",icon:Sparkles,label:"AI Chatbot Configuration"},{to:"/superadmin/tenants",icon:Building2,label:"Tenant Management"},{to:"/superadmin/analytics",icon:ChartColumn,label:"Platform Analytics"},{to:"/superadmin/users",icon:Users,label:"User Management"},{to:"/superadmin/settings",icon:Settings,label:"Platform Settings"},{to:"/miscellaneous",icon:Grid3x3,label:"Miscellaneous"},{to:"/assets",icon:Package,label:"Asset Management"},{to:"/my-assets",icon:Package,label:"My Assets"},{to:"/settings",icon:Settings,label:"System Settings"}],Ve=[{title:"Overview",items:["/"]},{title:"People Management",items:["/employee-management","/roles","/designations"]},{title:"Time & Attendance",items:["/attendance","/shifts","/leave"]},{title:"Work & Payroll",items:["/projects","/payroll"]},{title:"Resources",items:["/settings/documents","/assets"]},{title:"Intelligence & Monitoring",items:["/ai-configuration","/audit"]},{title:"Organization Structure",items:["/organization"]},{title:"System",items:["/settings","/miscellaneous"]},{title:"Platform Administration",items:["/superadmin/analytics","/superadmin/tenants","/superadmin/users","/superadmin/settings"]}],We=e?getAccessibleMenuItems(e.role):[],qe=e!=null&&e.tenantId&&typeof e.tenantId=="object"&&"limits"in e.tenantId?e.tenantId.limits:null,Ge=qe==null?void 0:qe.enabledModules,Ye={"/attendance":"attendance","/leave":"leave","/payroll":"payroll","/projects":"projects","/social":"social","/assets":"assets","/my-assets":"assets","/employees":"employees","/employee-management":"employees","/roles":"roles","/designations":"employees","/settings/documents":"documents","/audit":"audit","/organization":"organization","/miscellaneous/feedback":"feedback","/miscellaneous/appreciation":"appreciation","/miscellaneous/email-automation":"email_automation","/tasks":"tasks","/ai-configuration":"ai_chatbot","/shifts":"shifts"},Ke=We.filter(cr=>{if((e==null?void 0:e.role)==="Super Admin"||!Ge)return!0;if(cr.to==="/social"&&!Ge.includes("social"))return!1;const rr=Ye[cr.to];if(rr&&!Ge.includes(rr))return!1;if((e==null?void 0:e.role)!=="Super Admin"&&(e!=null&&e.accessibleModules)){if(cr.to==="/social"&&!e.accessibleModules.includes("social"))return!1;const pr=Ye[cr.to];if((e.role==="Admin"||e.isCompanyAdmin)&&(pr==="roles"||pr==="employees"))return!0;if(pr&&!e.accessibleModules.includes(pr))return!1}return!0}),Xe=()=>{const cr=Be.pathname,rr={"/":["Dashboard"],"/miscellaneous":["Miscellaneous"],"/miscellaneous/feedback":["Miscellaneous","Feedback"],"/miscellaneous/appreciation":["Miscellaneous","Appreciation"],"/miscellaneous/email-automation":["Miscellaneous","Email Automation"],"/miscellaneous/asset-categories":["Miscellaneous","Asset Categories"],"/assets":["Asset Management","Dashboard"],"/assets/inventory":["Asset Management","Inventory"],"/my-assets":["My Assets"],"/social":["Social Wall"],"/shifts":["Shift Management"],"/ai-configuration":["AI Chatbot Configuration"]};if(rr[cr])return rr[cr];const pr=Ue.find(mr=>mr.to===cr);return pr?[pr.label]:["Page"]},[Ze,er]=reactExports.useState(!1),St=reactExports.useRef(null);return useOnClickOutside(St,()=>er(!1)),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-bg-main flex flex-col md:flex-row transition-colors duration-200",children:[jsxRuntimeExports.jsxs("header",{className:"md:hidden bg-bg-sidebar border-b border-border p-4 flex justify-between items-center sticky top-0 z-20",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:He,className:"text-text-primary p-1",children:Te?jsxRuntimeExports.jsx(X$1,{size:24}):jsxRuntimeExports.jsx(Menu,{size:24})}),(hr=(ar=e==null?void 0:e.tenantId)==null?void 0:ar.settings)!=null&&hr.logo?jsxRuntimeExports.jsx("img",{src:(e==null?void 0:e.tenantId).settings.logo,alt:"Company Logo",className:"h-8 w-auto object-contain"}):jsxRuntimeExports.jsx("span",{className:"font-bold text-xl text-brand-primary",children:"NeointeractionHR"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[We.some(cr=>cr.to==="/social")&&(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||((dr=(ur=e.tenantId.limits)==null?void 0:ur.enabledModules)==null?void 0:dr.includes("social")))&&jsxRuntimeExports.jsxs("button",{onClick:()=>{Ce(),ze("/social")},className:"p-1 text-text-secondary relative",children:[jsxRuntimeExports.jsx(Hash,{size:20}),Re>0&&jsxRuntimeExports.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full border border-white"})]}),jsxRuntimeExports.jsx(NotificationDropdown,{}),jsxRuntimeExports.jsxs("div",{className:"relative",ref:St,children:[jsxRuntimeExports.jsx("button",{onClick:()=>er(!Ze),className:"focus:outline-none",children:jsxRuntimeExports.jsx(Avatar,{src:e==null?void 0:e.avatar,name:e==null?void 0:e.name,alt:e==null?void 0:e.name,size:"sm"})}),Ze&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-bg-card rounded-lg shadow-lg border border-border py-1 z-50",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 border-b border-border",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:e==null?void 0:e.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted truncate",children:e==null?void 0:e.designation})]}),(e==null?void 0:e.role)!=="Super Admin"&&jsxRuntimeExports.jsxs("button",{onClick:()=>{er(!1),ze("/profile")},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-bg-hover flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleUserRound,{size:16}),"My Profile"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{t(),er(!1),ze("/login",{replace:!0})},className:"w-full px-4 py-2 text-left text-sm text-status-error hover:bg-bg-hover flex items-center gap-2",children:[jsxRuntimeExports.jsx(LogOut,{size:16}),"Logout"]})]})]})]})]}),jsxRuntimeExports.jsxs("aside",{className:cn$2("fixed inset-y-0 left-0 z-50 w-[280px] bg-bg-sidebar border-r border-border transform transition-transform duration-200 ease-in-out md:translate-x-0 md:static md:h-screen flex flex-col",Te?"translate-x-0":"-translate-x-full"),children:[jsxRuntimeExports.jsx("div",{className:"p-6 flex items-center justify-between border-b border-border h-16",children:(yr=(vr=e==null?void 0:e.tenantId)==null?void 0:vr.settings)!=null&&yr.logo?jsxRuntimeExports.jsx("img",{src:(e==null?void 0:e.tenantId).settings.logo,alt:"Company Logo",className:"h-10 w-auto object-contain"}):jsxRuntimeExports.jsx("span",{className:"font-bold text-2xl text-brand-primary",children:"NeointeractionHR"})}),jsxRuntimeExports.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto custom-scrollbar",children:Ve.map(cr=>{const rr=cr.items.map(pr=>Ke.some(ir=>ir.to===pr)?Ue.find(ir=>ir.to===pr):null).filter(Boolean);return rr.length===0?null:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"px-4 text-[10px] font-semibold text-text-muted uppercase tracking-wider mb-2 mt-2",children:cr.title}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:rr.map(pr=>jsxRuntimeExports.jsxs(NavLink,{to:pr.to,onClick:()=>Me(!1),className:({isActive:mr})=>cn$2("flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium transition-all group",mr?"bg-brand-primary/10 text-brand-primary":"text-text-secondary hover:bg-bg-hover hover:text-text-primary"),children:[jsxRuntimeExports.jsx(pr.icon,{size:18,className:cn$2("transition-colors","group-hover:text-current")}),pr.label]},pr.to))})]},cr.title)})}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-border space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"space-y-2"}),jsxRuntimeExports.jsxs("button",{onClick:Ee,className:"flex items-center gap-2 text-text-secondary hover:text-text-primary text-sm w-full px-4 py-2 rounded-lg hover:bg-bg-hover transition-colors",children:[n==="dark"?jsxRuntimeExports.jsx(Sun,{size:18}):jsxRuntimeExports.jsx(Moon,{size:18}),jsxRuntimeExports.jsx("span",{children:n==="dark"?"Light Mode":"Dark Mode"})]})]})]}),Te&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>Me(!1)}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col h-[calc(100vh-64px)] md:h-screen overflow-hidden",children:[jsxRuntimeExports.jsxs("header",{className:"hidden md:flex bg-bg-sidebar border-b border-border h-16 px-8 items-center justify-between sticky top-0 z-10",style:{zIndex:999},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-muted",children:"Home"}),Xe().map((cr,rr)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ChevronRight,{size:16}),jsxRuntimeExports.jsx("span",{className:rr===Xe().length-1?"font-medium text-text-primary":"text-text-muted",children:cr})]},rr))]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[We.some(cr=>cr.to==="/social")&&(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||((lr=(br=e.tenantId.limits)==null?void 0:br.enabledModules)==null?void 0:lr.includes("social")))&&jsxRuntimeExports.jsx(Tooltip,{content:"Social Wall",children:jsxRuntimeExports.jsxs("button",{onClick:()=>{Ce(),ze("/social")},className:"relative p-2 text-text-secondary hover:text-brand-primary hover:bg-bg-hover rounded-full transition-colors",children:[jsxRuntimeExports.jsx(Hash,{size:20}),Re>0&&jsxRuntimeExports.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border border-white"})]})}),jsxRuntimeExports.jsx(NotificationDropdown,{}),jsxRuntimeExports.jsxs("div",{className:"relative",ref:$e,children:[jsxRuntimeExports.jsx(Tooltip,{content:"User Profile",children:jsxRuntimeExports.jsxs("button",{onClick:()=>Oe(!De),className:"flex items-center gap-3 pl-4 border-l border-border hover:opacity-80 transition-opacity",children:[jsxRuntimeExports.jsxs("div",{className:"text-right hidden md:block",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-text-primary",children:e==null?void 0:e.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted",children:e==null?void 0:e.designation})]}),jsxRuntimeExports.jsx(Avatar,{src:e==null?void 0:e.avatar,name:e==null?void 0:e.name,alt:e==null?void 0:e.name,size:"md"})]})}),De&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-bg-card rounded-lg shadow-lg border border-border py-1 z-20",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 border-b border-border md:hidden",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-text-primary",children:e==null?void 0:e.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted",children:e==null?void 0:e.designation})]}),(e==null?void 0:e.role)!=="Super Admin"&&jsxRuntimeExports.jsxs("button",{onClick:()=>{Oe(!1),ze("/profile")},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-bg-hover flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleUserRound,{size:16}),"My Profile"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{t(),Oe(!1),ze("/login",{replace:!0})},className:"w-full px-4 py-2 text-left text-sm text-status-error hover:bg-bg-hover flex items-center gap-2",children:[jsxRuntimeExports.jsx(LogOut,{size:16}),"Logout"]})]})})]})]})]}),jsxRuntimeExports.jsx("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:jsxRuntimeExports.jsx("div",{className:"max-w-8xl mx-auto",children:jsxRuntimeExports.jsx(Outlet,{})})})]}),(e==null?void 0:e.role)!=="Super Admin"&&(e==null?void 0:e.role)!=="Admin"&&jsxRuntimeExports.jsx(ChatWidget,{})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function createColumnHelper(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function functionalUpdate(e,t){return typeof e=="function"?e(t):e}function makeStateUpdater(e,t){return n=>{t.setState(Ee=>({...Ee,[e]:functionalUpdate(n,Ee[e])}))}}function isFunction$2(e){return e instanceof Function}function isNumberArray(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function flattenBy(e,t){const n=[],Ee=Re=>{Re.forEach(Ce=>{n.push(Ce);const Te=t(Ce);Te!=null&&Te.length&&Ee(Te)})};return Ee(e),n}function memo(e,t,n){let Ee=[],Re;return Ce=>{let Te;n.key&&n.debug&&(Te=Date.now());const Me=e(Ce);if(!(Me.length!==Ee.length||Me.some((Be,ze)=>Ee[ze]!==Be)))return Re;Ee=Me;let Oe;if(n.key&&n.debug&&(Oe=Date.now()),Re=t(...Me),n==null||n.onChange==null||n.onChange(Re),n.key&&n.debug&&n!=null&&n.debug()){const Be=Math.round((Date.now()-Te)*100)/100,ze=Math.round((Date.now()-Oe)*100)/100,$e=ze/16,He=(Ue,Ve)=>{for(Ue=String(Ue);Ue.length<Ve;)Ue=" "+Ue;return Ue};console.info(`%c ${He(ze,5)} /${He(Be,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*$e,120))}deg 100% 31%);`,n==null?void 0:n.key)}return Re}}function getMemoOptions(e,t,n,Ee){return{debug:()=>{var Re;return(Re=e==null?void 0:e.debugAll)!=null?Re:e[t]},key:!1,onChange:Ee}}function createCell(e,t,n,Ee){const Re=()=>{var Te;return(Te=Ce.getValue())!=null?Te:e.options.renderFallbackValue},Ce={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(Ee),renderValue:Re,getContext:memo(()=>[e,n,t,Ce],(Te,Me,De,Oe)=>({table:Te,column:Me,row:De,cell:Oe,getValue:Oe.getValue,renderValue:Oe.renderValue}),getMemoOptions(e.options,"debugCells"))};return e._features.forEach(Te=>{Te.createCell==null||Te.createCell(Ce,n,t,e)},{}),Ce}function createColumn(e,t,n,Ee){var Re,Ce;const Me={...e._getDefaultColumnDef(),...t},De=Me.accessorKey;let Oe=(Re=(Ce=Me.id)!=null?Ce:De?typeof String.prototype.replaceAll=="function"?De.replaceAll(".","_"):De.replace(/\./g,"_"):void 0)!=null?Re:typeof Me.header=="string"?Me.header:void 0,Be;if(Me.accessorFn?Be=Me.accessorFn:De&&(De.includes(".")?Be=$e=>{let He=$e;for(const Ve of De.split(".")){var Ue;He=(Ue=He)==null?void 0:Ue[Ve]}return He}:Be=$e=>$e[Me.accessorKey]),!Oe)throw new Error;let ze={id:`${String(Oe)}`,accessorFn:Be,parent:Ee,depth:n,columnDef:Me,columns:[],getFlatColumns:memo(()=>[!0],()=>{var $e;return[ze,...($e=ze.columns)==null?void 0:$e.flatMap(He=>He.getFlatColumns())]},getMemoOptions(e.options,"debugColumns")),getLeafColumns:memo(()=>[e._getOrderColumnsFn()],$e=>{var He;if((He=ze.columns)!=null&&He.length){let Ue=ze.columns.flatMap(Ve=>Ve.getLeafColumns());return $e(Ue)}return[ze]},getMemoOptions(e.options,"debugColumns"))};for(const $e of e._features)$e.createColumn==null||$e.createColumn(ze,e);return ze}const debug="debugHeaders";function createHeader(e,t,n){var Ee;let Ce={id:(Ee=n.id)!=null?Ee:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const Te=[],Me=De=>{De.subHeaders&&De.subHeaders.length&&De.subHeaders.map(Me),Te.push(De)};return Me(Ce),Te},getContext:()=>({table:e,header:Ce,column:t})};return e._features.forEach(Te=>{Te.createHeader==null||Te.createHeader(Ce,e)}),Ce}const Headers$1={createTable:e=>{e.getHeaderGroups=memo(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,Ee,Re)=>{var Ce,Te;const Me=(Ce=Ee==null?void 0:Ee.map(ze=>n.find($e=>$e.id===ze)).filter(Boolean))!=null?Ce:[],De=(Te=Re==null?void 0:Re.map(ze=>n.find($e=>$e.id===ze)).filter(Boolean))!=null?Te:[],Oe=n.filter(ze=>!(Ee!=null&&Ee.includes(ze.id))&&!(Re!=null&&Re.includes(ze.id)));return buildHeaderGroups(t,[...Me,...Oe,...De],e)},getMemoOptions(e.options,debug)),e.getCenterHeaderGroups=memo(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,Ee,Re)=>(n=n.filter(Ce=>!(Ee!=null&&Ee.includes(Ce.id))&&!(Re!=null&&Re.includes(Ce.id))),buildHeaderGroups(t,n,e,"center")),getMemoOptions(e.options,debug)),e.getLeftHeaderGroups=memo(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,Ee)=>{var Re;const Ce=(Re=Ee==null?void 0:Ee.map(Te=>n.find(Me=>Me.id===Te)).filter(Boolean))!=null?Re:[];return buildHeaderGroups(t,Ce,e,"left")},getMemoOptions(e.options,debug)),e.getRightHeaderGroups=memo(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,Ee)=>{var Re;const Ce=(Re=Ee==null?void 0:Ee.map(Te=>n.find(Me=>Me.id===Te)).filter(Boolean))!=null?Re:[];return buildHeaderGroups(t,Ce,e,"right")},getMemoOptions(e.options,debug)),e.getFooterGroups=memo(()=>[e.getHeaderGroups()],t=>[...t].reverse(),getMemoOptions(e.options,debug)),e.getLeftFooterGroups=memo(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),getMemoOptions(e.options,debug)),e.getCenterFooterGroups=memo(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),getMemoOptions(e.options,debug)),e.getRightFooterGroups=memo(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),getMemoOptions(e.options,debug)),e.getFlatHeaders=memo(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),getMemoOptions(e.options,debug)),e.getLeftFlatHeaders=memo(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),getMemoOptions(e.options,debug)),e.getCenterFlatHeaders=memo(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),getMemoOptions(e.options,debug)),e.getRightFlatHeaders=memo(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),getMemoOptions(e.options,debug)),e.getCenterLeafHeaders=memo(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var Ee;return!((Ee=n.subHeaders)!=null&&Ee.length)}),getMemoOptions(e.options,debug)),e.getLeftLeafHeaders=memo(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var Ee;return!((Ee=n.subHeaders)!=null&&Ee.length)}),getMemoOptions(e.options,debug)),e.getRightLeafHeaders=memo(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var Ee;return!((Ee=n.subHeaders)!=null&&Ee.length)}),getMemoOptions(e.options,debug)),e.getLeafHeaders=memo(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,Ee)=>{var Re,Ce,Te,Me,De,Oe;return[...(Re=(Ce=t[0])==null?void 0:Ce.headers)!=null?Re:[],...(Te=(Me=n[0])==null?void 0:Me.headers)!=null?Te:[],...(De=(Oe=Ee[0])==null?void 0:Oe.headers)!=null?De:[]].map(Be=>Be.getLeafHeaders()).flat()},getMemoOptions(e.options,debug))}};function buildHeaderGroups(e,t,n,Ee){var Re,Ce;let Te=0;const Me=function($e,He){He===void 0&&(He=1),Te=Math.max(Te,He),$e.filter(Ue=>Ue.getIsVisible()).forEach(Ue=>{var Ve;(Ve=Ue.columns)!=null&&Ve.length&&Me(Ue.columns,He+1)},0)};Me(e);let De=[];const Oe=($e,He)=>{const Ue={depth:He,id:[Ee,`${He}`].filter(Boolean).join("_"),headers:[]},Ve=[];$e.forEach(We=>{const qe=[...Ve].reverse()[0],Ge=We.column.depth===Ue.depth;let Ye,Ke=!1;if(Ge&&We.column.parent?Ye=We.column.parent:(Ye=We.column,Ke=!0),qe&&(qe==null?void 0:qe.column)===Ye)qe.subHeaders.push(We);else{const Xe=createHeader(n,Ye,{id:[Ee,He,Ye.id,We==null?void 0:We.id].filter(Boolean).join("_"),isPlaceholder:Ke,placeholderId:Ke?`${Ve.filter(Ze=>Ze.column===Ye).length}`:void 0,depth:He,index:Ve.length});Xe.subHeaders.push(We),Ve.push(Xe)}Ue.headers.push(We),We.headerGroup=Ue}),De.push(Ue),He>0&&Oe(Ve,He-1)},Be=t.map(($e,He)=>createHeader(n,$e,{depth:Te,index:He}));Oe(Be,Te-1),De.reverse();const ze=$e=>$e.filter(Ue=>Ue.column.getIsVisible()).map(Ue=>{let Ve=0,We=0,qe=[0];Ue.subHeaders&&Ue.subHeaders.length?(qe=[],ze(Ue.subHeaders).forEach(Ye=>{let{colSpan:Ke,rowSpan:Xe}=Ye;Ve+=Ke,qe.push(Xe)})):Ve=1;const Ge=Math.min(...qe);return We=We+Ge,Ue.colSpan=Ve,Ue.rowSpan=We,{colSpan:Ve,rowSpan:We}});return ze((Re=(Ce=De[0])==null?void 0:Ce.headers)!=null?Re:[]),De}const createRow=(e,t,n,Ee,Re,Ce,Te)=>{let Me={id:t,index:Ee,original:n,depth:Re,parentId:Te,_valuesCache:{},_uniqueValuesCache:{},getValue:De=>{if(Me._valuesCache.hasOwnProperty(De))return Me._valuesCache[De];const Oe=e.getColumn(De);if(Oe!=null&&Oe.accessorFn)return Me._valuesCache[De]=Oe.accessorFn(Me.original,Ee),Me._valuesCache[De]},getUniqueValues:De=>{if(Me._uniqueValuesCache.hasOwnProperty(De))return Me._uniqueValuesCache[De];const Oe=e.getColumn(De);if(Oe!=null&&Oe.accessorFn)return Oe.columnDef.getUniqueValues?(Me._uniqueValuesCache[De]=Oe.columnDef.getUniqueValues(Me.original,Ee),Me._uniqueValuesCache[De]):(Me._uniqueValuesCache[De]=[Me.getValue(De)],Me._uniqueValuesCache[De])},renderValue:De=>{var Oe;return(Oe=Me.getValue(De))!=null?Oe:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>flattenBy(Me.subRows,De=>De.subRows),getParentRow:()=>Me.parentId?e.getRow(Me.parentId,!0):void 0,getParentRows:()=>{let De=[],Oe=Me;for(;;){const Be=Oe.getParentRow();if(!Be)break;De.push(Be),Oe=Be}return De.reverse()},getAllCells:memo(()=>[e.getAllLeafColumns()],De=>De.map(Oe=>createCell(e,Me,Oe,Oe.id)),getMemoOptions(e.options,"debugRows")),_getAllCellsByColumnId:memo(()=>[Me.getAllCells()],De=>De.reduce((Oe,Be)=>(Oe[Be.column.id]=Be,Oe),{}),getMemoOptions(e.options,"debugRows"))};for(let De=0;De<e._features.length;De++){const Oe=e._features[De];Oe==null||Oe.createRow==null||Oe.createRow(Me,e)}return Me},ColumnFaceting={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},includesString=(e,t,n)=>{var Ee,Re;const Ce=n==null||(Ee=n.toString())==null?void 0:Ee.toLowerCase();return!!(!((Re=e.getValue(t))==null||(Re=Re.toString())==null||(Re=Re.toLowerCase())==null)&&Re.includes(Ce))};includesString.autoRemove=e=>testFalsey(e);const includesStringSensitive=(e,t,n)=>{var Ee;return!!(!((Ee=e.getValue(t))==null||(Ee=Ee.toString())==null)&&Ee.includes(n))};includesStringSensitive.autoRemove=e=>testFalsey(e);const equalsString=(e,t,n)=>{var Ee;return((Ee=e.getValue(t))==null||(Ee=Ee.toString())==null?void 0:Ee.toLowerCase())===(n==null?void 0:n.toLowerCase())};equalsString.autoRemove=e=>testFalsey(e);const arrIncludes=(e,t,n)=>{var Ee;return(Ee=e.getValue(t))==null?void 0:Ee.includes(n)};arrIncludes.autoRemove=e=>testFalsey(e);const arrIncludesAll=(e,t,n)=>!n.some(Ee=>{var Re;return!((Re=e.getValue(t))!=null&&Re.includes(Ee))});arrIncludesAll.autoRemove=e=>testFalsey(e)||!(e!=null&&e.length);const arrIncludesSome=(e,t,n)=>n.some(Ee=>{var Re;return(Re=e.getValue(t))==null?void 0:Re.includes(Ee)});arrIncludesSome.autoRemove=e=>testFalsey(e)||!(e!=null&&e.length);const equals=(e,t,n)=>e.getValue(t)===n;equals.autoRemove=e=>testFalsey(e);const weakEquals=(e,t,n)=>e.getValue(t)==n;weakEquals.autoRemove=e=>testFalsey(e);const inNumberRange=(e,t,n)=>{let[Ee,Re]=n;const Ce=e.getValue(t);return Ce>=Ee&&Ce<=Re};inNumberRange.resolveFilterValue=e=>{let[t,n]=e,Ee=typeof t!="number"?parseFloat(t):t,Re=typeof n!="number"?parseFloat(n):n,Ce=t===null||Number.isNaN(Ee)?-1/0:Ee,Te=n===null||Number.isNaN(Re)?1/0:Re;if(Ce>Te){const Me=Ce;Ce=Te,Te=Me}return[Ce,Te]};inNumberRange.autoRemove=e=>testFalsey(e)||testFalsey(e[0])&&testFalsey(e[1]);const filterFns={includesString,includesStringSensitive,equalsString,arrIncludes,arrIncludesAll,arrIncludesSome,equals,weakEquals,inNumberRange};function testFalsey(e){return e==null||e===""}const ColumnFiltering={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:makeStateUpdater("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],Ee=n==null?void 0:n.getValue(e.id);return typeof Ee=="string"?filterFns.includesString:typeof Ee=="number"?filterFns.inNumberRange:typeof Ee=="boolean"||Ee!==null&&typeof Ee=="object"?filterFns.equals:Array.isArray(Ee)?filterFns.arrIncludes:filterFns.weakEquals},e.getFilterFn=()=>{var n,Ee;return isFunction$2(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(Ee=t.options.filterFns)==null?void 0:Ee[e.columnDef.filterFn])!=null?n:filterFns[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,Ee,Re;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((Ee=t.options.enableColumnFilters)!=null?Ee:!0)&&((Re=t.options.enableFilters)!=null?Re:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(Ee=>Ee.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,Ee;return(n=(Ee=t.getState().columnFilters)==null?void 0:Ee.findIndex(Re=>Re.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(Ee=>{const Re=e.getFilterFn(),Ce=Ee==null?void 0:Ee.find(Be=>Be.id===e.id),Te=functionalUpdate(n,Ce?Ce.value:void 0);if(shouldAutoRemoveFilter(Re,Te,e)){var Me;return(Me=Ee==null?void 0:Ee.filter(Be=>Be.id!==e.id))!=null?Me:[]}const De={id:e.id,value:Te};if(Ce){var Oe;return(Oe=Ee==null?void 0:Ee.map(Be=>Be.id===e.id?De:Be))!=null?Oe:[]}return Ee!=null&&Ee.length?[...Ee,De]:[De]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),Ee=Re=>{var Ce;return(Ce=functionalUpdate(t,Re))==null?void 0:Ce.filter(Te=>{const Me=n.find(De=>De.id===Te.id);if(Me){const De=Me.getFilterFn();if(shouldAutoRemoveFilter(De,Te.value,Me))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(Ee)},e.resetColumnFilters=t=>{var n,Ee;e.setColumnFilters(t?[]:(n=(Ee=e.initialState)==null?void 0:Ee.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function shouldAutoRemoveFilter(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const sum=(e,t,n)=>n.reduce((Ee,Re)=>{const Ce=Re.getValue(e);return Ee+(typeof Ce=="number"?Ce:0)},0),min$2=(e,t,n)=>{let Ee;return n.forEach(Re=>{const Ce=Re.getValue(e);Ce!=null&&(Ee>Ce||Ee===void 0&&Ce>=Ce)&&(Ee=Ce)}),Ee},max$2=(e,t,n)=>{let Ee;return n.forEach(Re=>{const Ce=Re.getValue(e);Ce!=null&&(Ee<Ce||Ee===void 0&&Ce>=Ce)&&(Ee=Ce)}),Ee},extent=(e,t,n)=>{let Ee,Re;return n.forEach(Ce=>{const Te=Ce.getValue(e);Te!=null&&(Ee===void 0?Te>=Te&&(Ee=Re=Te):(Ee>Te&&(Ee=Te),Re<Te&&(Re=Te)))}),[Ee,Re]},mean=(e,t)=>{let n=0,Ee=0;if(t.forEach(Re=>{let Ce=Re.getValue(e);Ce!=null&&(Ce=+Ce)>=Ce&&(++n,Ee+=Ce)}),n)return Ee/n},median=(e,t)=>{if(!t.length)return;const n=t.map(Ce=>Ce.getValue(e));if(!isNumberArray(n))return;if(n.length===1)return n[0];const Ee=Math.floor(n.length/2),Re=n.sort((Ce,Te)=>Ce-Te);return n.length%2!==0?Re[Ee]:(Re[Ee-1]+Re[Ee])/2},unique=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),uniqueCount=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,count$1=(e,t)=>t.length,aggregationFns={sum,min:min$2,max:max$2,extent,mean,median,unique,uniqueCount,count:count$1},ColumnGrouping={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:makeStateUpdater("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(Ee=>Ee!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,Ee;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((Ee=t.options.enableGrouping)!=null?Ee:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],Ee=n==null?void 0:n.getValue(e.id);if(typeof Ee=="number")return aggregationFns.sum;if(Object.prototype.toString.call(Ee)==="[object Date]")return aggregationFns.extent},e.getAggregationFn=()=>{var n,Ee;if(!e)throw new Error;return isFunction$2(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(Ee=t.options.aggregationFns)==null?void 0:Ee[e.columnDef.aggregationFn])!=null?n:aggregationFns[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,Ee;e.setGrouping(t?[]:(n=(Ee=e.initialState)==null?void 0:Ee.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const Ee=t.getColumn(n);return Ee!=null&&Ee.columnDef.getGroupingValue?(e._groupingValuesCache[n]=Ee.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,Ee)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var Re;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((Re=n.subRows)!=null&&Re.length)}}};function orderColumns(e,t,n){if(!(t!=null&&t.length)||!n)return e;const Ee=e.filter(Ce=>!t.includes(Ce.id));return n==="remove"?Ee:[...t.map(Ce=>e.find(Te=>Te.id===Ce)).filter(Boolean),...Ee]}const ColumnOrdering={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:makeStateUpdater("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=memo(n=>[_getVisibleLeafColumns(t,n)],n=>n.findIndex(Ee=>Ee.id===e.id),getMemoOptions(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var Ee;return((Ee=_getVisibleLeafColumns(t,n)[0])==null?void 0:Ee.id)===e.id},e.getIsLastColumn=n=>{var Ee;const Re=_getVisibleLeafColumns(t,n);return((Ee=Re[Re.length-1])==null?void 0:Ee.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=memo(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,Ee)=>Re=>{let Ce=[];if(!(t!=null&&t.length))Ce=Re;else{const Te=[...t],Me=[...Re];for(;Me.length&&Te.length;){const De=Te.shift(),Oe=Me.findIndex(Be=>Be.id===De);Oe>-1&&Ce.push(Me.splice(Oe,1)[0])}Ce=[...Ce,...Me]}return orderColumns(Ce,n,Ee)},getMemoOptions(e.options,"debugTable"))}},getDefaultColumnPinningState=()=>({left:[],right:[]}),ColumnPinning={getInitialState:e=>({columnPinning:getDefaultColumnPinningState(),...e}),getDefaultOptions:e=>({onColumnPinningChange:makeStateUpdater("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const Ee=e.getLeafColumns().map(Re=>Re.id).filter(Boolean);t.setColumnPinning(Re=>{var Ce,Te;if(n==="right"){var Me,De;return{left:((Me=Re==null?void 0:Re.left)!=null?Me:[]).filter(ze=>!(Ee!=null&&Ee.includes(ze))),right:[...((De=Re==null?void 0:Re.right)!=null?De:[]).filter(ze=>!(Ee!=null&&Ee.includes(ze))),...Ee]}}if(n==="left"){var Oe,Be;return{left:[...((Oe=Re==null?void 0:Re.left)!=null?Oe:[]).filter(ze=>!(Ee!=null&&Ee.includes(ze))),...Ee],right:((Be=Re==null?void 0:Re.right)!=null?Be:[]).filter(ze=>!(Ee!=null&&Ee.includes(ze)))}}return{left:((Ce=Re==null?void 0:Re.left)!=null?Ce:[]).filter(ze=>!(Ee!=null&&Ee.includes(ze))),right:((Te=Re==null?void 0:Re.right)!=null?Te:[]).filter(ze=>!(Ee!=null&&Ee.includes(ze)))}})},e.getCanPin=()=>e.getLeafColumns().some(Ee=>{var Re,Ce,Te;return((Re=Ee.columnDef.enablePinning)!=null?Re:!0)&&((Ce=(Te=t.options.enableColumnPinning)!=null?Te:t.options.enablePinning)!=null?Ce:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(Me=>Me.id),{left:Ee,right:Re}=t.getState().columnPinning,Ce=n.some(Me=>Ee==null?void 0:Ee.includes(Me)),Te=n.some(Me=>Re==null?void 0:Re.includes(Me));return Ce?"left":Te?"right":!1},e.getPinnedIndex=()=>{var n,Ee;const Re=e.getIsPinned();return Re?(n=(Ee=t.getState().columnPinning)==null||(Ee=Ee[Re])==null?void 0:Ee.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=memo(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,Ee,Re)=>{const Ce=[...Ee??[],...Re??[]];return n.filter(Te=>!Ce.includes(Te.column.id))},getMemoOptions(t.options,"debugRows")),e.getLeftVisibleCells=memo(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,Ee)=>(Ee??[]).map(Ce=>n.find(Te=>Te.column.id===Ce)).filter(Boolean).map(Ce=>({...Ce,position:"left"})),getMemoOptions(t.options,"debugRows")),e.getRightVisibleCells=memo(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,Ee)=>(Ee??[]).map(Ce=>n.find(Te=>Te.column.id===Ce)).filter(Boolean).map(Ce=>({...Ce,position:"right"})),getMemoOptions(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,Ee;return e.setColumnPinning(t?getDefaultColumnPinningState():(n=(Ee=e.initialState)==null?void 0:Ee.columnPinning)!=null?n:getDefaultColumnPinningState())},e.getIsSomeColumnsPinned=t=>{var n;const Ee=e.getState().columnPinning;if(!t){var Re,Ce;return!!((Re=Ee.left)!=null&&Re.length||(Ce=Ee.right)!=null&&Ce.length)}return!!((n=Ee[t])!=null&&n.length)},e.getLeftLeafColumns=memo(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(Ee=>t.find(Re=>Re.id===Ee)).filter(Boolean),getMemoOptions(e.options,"debugColumns")),e.getRightLeafColumns=memo(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(Ee=>t.find(Re=>Re.id===Ee)).filter(Boolean),getMemoOptions(e.options,"debugColumns")),e.getCenterLeafColumns=memo(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,Ee)=>{const Re=[...n??[],...Ee??[]];return t.filter(Ce=>!Re.includes(Ce.id))},getMemoOptions(e.options,"debugColumns"))}};function safelyAccessDocument(e){return e||(typeof document<"u"?document:null)}const defaultColumnSizing={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},getDefaultColumnSizingInfoState=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),ColumnSizing={getDefaultColumnDef:()=>defaultColumnSizing,getInitialState:e=>({columnSizing:{},columnSizingInfo:getDefaultColumnSizingInfoState(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:makeStateUpdater("columnSizing",e),onColumnSizingInfoChange:makeStateUpdater("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,Ee,Re;const Ce=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:defaultColumnSizing.minSize,(Ee=Ce??e.columnDef.size)!=null?Ee:defaultColumnSizing.size),(Re=e.columnDef.maxSize)!=null?Re:defaultColumnSizing.maxSize)},e.getStart=memo(n=>[n,_getVisibleLeafColumns(t,n),t.getState().columnSizing],(n,Ee)=>Ee.slice(0,e.getIndex(n)).reduce((Re,Ce)=>Re+Ce.getSize(),0),getMemoOptions(t.options,"debugColumns")),e.getAfter=memo(n=>[n,_getVisibleLeafColumns(t,n),t.getState().columnSizing],(n,Ee)=>Ee.slice(e.getIndex(n)+1).reduce((Re,Ce)=>Re+Ce.getSize(),0),getMemoOptions(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:Ee,...Re}=n;return Re})},e.getCanResize=()=>{var n,Ee;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((Ee=t.options.enableColumnResizing)!=null?Ee:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const Ee=Re=>{if(Re.subHeaders.length)Re.subHeaders.forEach(Ee);else{var Ce;n+=(Ce=Re.column.getSize())!=null?Ce:0}};return Ee(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const Ee=t.getColumn(e.column.id),Re=Ee==null?void 0:Ee.getCanResize();return Ce=>{if(!Ee||!Re||(Ce.persist==null||Ce.persist(),isTouchStartEvent(Ce)&&Ce.touches&&Ce.touches.length>1))return;const Te=e.getSize(),Me=e?e.getLeafHeaders().map(qe=>[qe.column.id,qe.column.getSize()]):[[Ee.id,Ee.getSize()]],De=isTouchStartEvent(Ce)?Math.round(Ce.touches[0].clientX):Ce.clientX,Oe={},Be=(qe,Ge)=>{typeof Ge=="number"&&(t.setColumnSizingInfo(Ye=>{var Ke,Xe;const Ze=t.options.columnResizeDirection==="rtl"?-1:1,er=(Ge-((Ke=Ye==null?void 0:Ye.startOffset)!=null?Ke:0))*Ze,St=Math.max(er/((Xe=Ye==null?void 0:Ye.startSize)!=null?Xe:0),-.999999);return Ye.columnSizingStart.forEach(ar=>{let[hr,ur]=ar;Oe[hr]=Math.round(Math.max(ur+ur*St,0)*100)/100}),{...Ye,deltaOffset:er,deltaPercentage:St}}),(t.options.columnResizeMode==="onChange"||qe==="end")&&t.setColumnSizing(Ye=>({...Ye,...Oe})))},ze=qe=>Be("move",qe),$e=qe=>{Be("end",qe),t.setColumnSizingInfo(Ge=>({...Ge,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},He=safelyAccessDocument(n),Ue={moveHandler:qe=>ze(qe.clientX),upHandler:qe=>{He==null||He.removeEventListener("mousemove",Ue.moveHandler),He==null||He.removeEventListener("mouseup",Ue.upHandler),$e(qe.clientX)}},Ve={moveHandler:qe=>(qe.cancelable&&(qe.preventDefault(),qe.stopPropagation()),ze(qe.touches[0].clientX),!1),upHandler:qe=>{var Ge;He==null||He.removeEventListener("touchmove",Ve.moveHandler),He==null||He.removeEventListener("touchend",Ve.upHandler),qe.cancelable&&(qe.preventDefault(),qe.stopPropagation()),$e((Ge=qe.touches[0])==null?void 0:Ge.clientX)}},We=passiveEventSupported()?{passive:!1}:!1;isTouchStartEvent(Ce)?(He==null||He.addEventListener("touchmove",Ve.moveHandler,We),He==null||He.addEventListener("touchend",Ve.upHandler,We)):(He==null||He.addEventListener("mousemove",Ue.moveHandler,We),He==null||He.addEventListener("mouseup",Ue.upHandler,We)),t.setColumnSizingInfo(qe=>({...qe,startOffset:De,startSize:Te,deltaOffset:0,deltaPercentage:0,columnSizingStart:Me,isResizingColumn:Ee.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?getDefaultColumnSizingInfoState():(n=e.initialState.columnSizingInfo)!=null?n:getDefaultColumnSizingInfoState())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((Ee,Re)=>Ee+Re.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((Ee,Re)=>Ee+Re.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((Ee,Re)=>Ee+Re.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((Ee,Re)=>Ee+Re.getSize(),0))!=null?t:0}}};let passiveSupported=null;function passiveEventSupported(){if(typeof passiveSupported=="boolean")return passiveSupported;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return passiveSupported=e,passiveSupported}function isTouchStartEvent(e){return e.type==="touchstart"}const ColumnVisibility={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:makeStateUpdater("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(Ee=>({...Ee,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,Ee;const Re=e.columns;return(n=Re.length?Re.some(Ce=>Ce.getIsVisible()):(Ee=t.getState().columnVisibility)==null?void 0:Ee[e.id])!=null?n:!0},e.getCanHide=()=>{var n,Ee;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((Ee=t.options.enableHiding)!=null?Ee:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=memo(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(Ee=>Ee.column.getIsVisible()),getMemoOptions(t.options,"debugRows")),e.getVisibleCells=memo(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,Ee,Re)=>[...n,...Ee,...Re],getMemoOptions(t.options,"debugRows"))},createTable:e=>{const t=(n,Ee)=>memo(()=>[Ee(),Ee().filter(Re=>Re.getIsVisible()).map(Re=>Re.id).join("_")],Re=>Re.filter(Ce=>Ce.getIsVisible==null?void 0:Ce.getIsVisible()),getMemoOptions(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var Ee;e.setColumnVisibility(n?{}:(Ee=e.initialState.columnVisibility)!=null?Ee:{})},e.toggleAllColumnsVisible=n=>{var Ee;n=(Ee=n)!=null?Ee:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((Re,Ce)=>({...Re,[Ce.id]:n||!(Ce.getCanHide!=null&&Ce.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var Ee;e.toggleAllColumnsVisible((Ee=n.target)==null?void 0:Ee.checked)}}};function _getVisibleLeafColumns(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const GlobalFaceting={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},GlobalFiltering={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:makeStateUpdater("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const Ee=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof Ee=="string"||typeof Ee=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,Ee,Re,Ce;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((Ee=t.options.enableGlobalFilter)!=null?Ee:!0)&&((Re=t.options.enableFilters)!=null?Re:!0)&&((Ce=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?Ce:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>filterFns.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:Ee}=e.options;return isFunction$2(Ee)?Ee:Ee==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[Ee])!=null?t:filterFns[Ee]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},RowExpanding={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:makeStateUpdater("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var Ee,Re;if(!t){e._queue(()=>{t=!0});return}if((Ee=(Re=e.options.autoResetAll)!=null?Re:e.options.autoResetExpanded)!=null?Ee:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=Ee=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(Ee),e.toggleAllRowsExpanded=Ee=>{Ee??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=Ee=>{var Re,Ce;e.setExpanded(Ee?{}:(Re=(Ce=e.initialState)==null?void 0:Ce.expanded)!=null?Re:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(Ee=>Ee.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>Ee=>{Ee.persist==null||Ee.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const Ee=e.getState().expanded;return Ee===!0||Object.values(Ee).some(Boolean)},e.getIsAllRowsExpanded=()=>{const Ee=e.getState().expanded;return typeof Ee=="boolean"?Ee===!0:!(!Object.keys(Ee).length||e.getRowModel().flatRows.some(Re=>!Re.getIsExpanded()))},e.getExpandedDepth=()=>{let Ee=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(Ce=>{const Te=Ce.split(".");Ee=Math.max(Ee,Te.length)}),Ee},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(Ee=>{var Re;const Ce=Ee===!0?!0:!!(Ee!=null&&Ee[e.id]);let Te={};if(Ee===!0?Object.keys(t.getRowModel().rowsById).forEach(Me=>{Te[Me]=!0}):Te=Ee,n=(Re=n)!=null?Re:!Ce,!Ce&&n)return{...Te,[e.id]:!0};if(Ce&&!n){const{[e.id]:Me,...De}=Te;return De}return Ee})},e.getIsExpanded=()=>{var n;const Ee=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:Ee===!0||Ee!=null&&Ee[e.id])},e.getCanExpand=()=>{var n,Ee,Re;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((Ee=t.options.enableExpanding)!=null?Ee:!0)&&!!((Re=e.subRows)!=null&&Re.length)},e.getIsAllParentsExpanded=()=>{let n=!0,Ee=e;for(;n&&Ee.parentId;)Ee=t.getRow(Ee.parentId,!0),n=Ee.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},defaultPageIndex=0,defaultPageSize=10,getDefaultPaginationState=()=>({pageIndex:defaultPageIndex,pageSize:defaultPageSize}),RowPagination={getInitialState:e=>({...e,pagination:{...getDefaultPaginationState(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:makeStateUpdater("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var Ee,Re;if(!t){e._queue(()=>{t=!0});return}if((Ee=(Re=e.options.autoResetAll)!=null?Re:e.options.autoResetPageIndex)!=null?Ee:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=Ee=>{const Re=Ce=>functionalUpdate(Ee,Ce);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(Re)},e.resetPagination=Ee=>{var Re;e.setPagination(Ee?getDefaultPaginationState():(Re=e.initialState.pagination)!=null?Re:getDefaultPaginationState())},e.setPageIndex=Ee=>{e.setPagination(Re=>{let Ce=functionalUpdate(Ee,Re.pageIndex);const Te=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return Ce=Math.max(0,Math.min(Ce,Te)),{...Re,pageIndex:Ce}})},e.resetPageIndex=Ee=>{var Re,Ce;e.setPageIndex(Ee?defaultPageIndex:(Re=(Ce=e.initialState)==null||(Ce=Ce.pagination)==null?void 0:Ce.pageIndex)!=null?Re:defaultPageIndex)},e.resetPageSize=Ee=>{var Re,Ce;e.setPageSize(Ee?defaultPageSize:(Re=(Ce=e.initialState)==null||(Ce=Ce.pagination)==null?void 0:Ce.pageSize)!=null?Re:defaultPageSize)},e.setPageSize=Ee=>{e.setPagination(Re=>{const Ce=Math.max(1,functionalUpdate(Ee,Re.pageSize)),Te=Re.pageSize*Re.pageIndex,Me=Math.floor(Te/Ce);return{...Re,pageIndex:Me,pageSize:Ce}})},e.setPageCount=Ee=>e.setPagination(Re=>{var Ce;let Te=functionalUpdate(Ee,(Ce=e.options.pageCount)!=null?Ce:-1);return typeof Te=="number"&&(Te=Math.max(-1,Te)),{...Re,pageCount:Te}}),e.getPageOptions=memo(()=>[e.getPageCount()],Ee=>{let Re=[];return Ee&&Ee>0&&(Re=[...new Array(Ee)].fill(null).map((Ce,Te)=>Te)),Re},getMemoOptions(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:Ee}=e.getState().pagination,Re=e.getPageCount();return Re===-1?!0:Re===0?!1:Ee<Re-1},e.previousPage=()=>e.setPageIndex(Ee=>Ee-1),e.nextPage=()=>e.setPageIndex(Ee=>Ee+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var Ee;return(Ee=e.options.pageCount)!=null?Ee:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var Ee;return(Ee=e.options.rowCount)!=null?Ee:e.getPrePaginationRowModel().rows.length}}},getDefaultRowPinningState=()=>({top:[],bottom:[]}),RowPinning={getInitialState:e=>({rowPinning:getDefaultRowPinningState(),...e}),getDefaultOptions:e=>({onRowPinningChange:makeStateUpdater("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,Ee,Re)=>{const Ce=Ee?e.getLeafRows().map(De=>{let{id:Oe}=De;return Oe}):[],Te=Re?e.getParentRows().map(De=>{let{id:Oe}=De;return Oe}):[],Me=new Set([...Te,e.id,...Ce]);t.setRowPinning(De=>{var Oe,Be;if(n==="bottom"){var ze,$e;return{top:((ze=De==null?void 0:De.top)!=null?ze:[]).filter(Ve=>!(Me!=null&&Me.has(Ve))),bottom:[...(($e=De==null?void 0:De.bottom)!=null?$e:[]).filter(Ve=>!(Me!=null&&Me.has(Ve))),...Array.from(Me)]}}if(n==="top"){var He,Ue;return{top:[...((He=De==null?void 0:De.top)!=null?He:[]).filter(Ve=>!(Me!=null&&Me.has(Ve))),...Array.from(Me)],bottom:((Ue=De==null?void 0:De.bottom)!=null?Ue:[]).filter(Ve=>!(Me!=null&&Me.has(Ve)))}}return{top:((Oe=De==null?void 0:De.top)!=null?Oe:[]).filter(Ve=>!(Me!=null&&Me.has(Ve))),bottom:((Be=De==null?void 0:De.bottom)!=null?Be:[]).filter(Ve=>!(Me!=null&&Me.has(Ve)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:Ee,enablePinning:Re}=t.options;return typeof Ee=="function"?Ee(e):(n=Ee??Re)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:Ee,bottom:Re}=t.getState().rowPinning,Ce=n.some(Me=>Ee==null?void 0:Ee.includes(Me)),Te=n.some(Me=>Re==null?void 0:Re.includes(Me));return Ce?"top":Te?"bottom":!1},e.getPinnedIndex=()=>{var n,Ee;const Re=e.getIsPinned();if(!Re)return-1;const Ce=(n=Re==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(Te=>{let{id:Me}=Te;return Me});return(Ee=Ce==null?void 0:Ce.indexOf(e.id))!=null?Ee:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,Ee;return e.setRowPinning(t?getDefaultRowPinningState():(n=(Ee=e.initialState)==null?void 0:Ee.rowPinning)!=null?n:getDefaultRowPinningState())},e.getIsSomeRowsPinned=t=>{var n;const Ee=e.getState().rowPinning;if(!t){var Re,Ce;return!!((Re=Ee.top)!=null&&Re.length||(Ce=Ee.bottom)!=null&&Ce.length)}return!!((n=Ee[t])!=null&&n.length)},e._getPinnedRows=(t,n,Ee)=>{var Re;return((Re=e.options.keepPinnedRows)==null||Re?(n??[]).map(Te=>{const Me=e.getRow(Te,!0);return Me.getIsAllParentsExpanded()?Me:null}):(n??[]).map(Te=>t.find(Me=>Me.id===Te))).filter(Boolean).map(Te=>({...Te,position:Ee}))},e.getTopRows=memo(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),getMemoOptions(e.options,"debugRows")),e.getBottomRows=memo(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),getMemoOptions(e.options,"debugRows")),e.getCenterRows=memo(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,Ee)=>{const Re=new Set([...n??[],...Ee??[]]);return t.filter(Ce=>!Re.has(Ce.id))},getMemoOptions(e.options,"debugRows"))}},RowSelection={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:makeStateUpdater("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const Ee={...n},Re=e.getPreGroupedRowModel().flatRows;return t?Re.forEach(Ce=>{Ce.getCanSelect()&&(Ee[Ce.id]=!0)}):Re.forEach(Ce=>{delete Ee[Ce.id]}),Ee})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const Ee=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),Re={...n};return e.getRowModel().rows.forEach(Ce=>{mutateRowIsSelected(Re,Ce.id,Ee,!0,e)}),Re}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=memo(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?selectRowsFn(e,n):{rows:[],flatRows:[],rowsById:{}},getMemoOptions(e.options,"debugTable")),e.getFilteredSelectedRowModel=memo(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?selectRowsFn(e,n):{rows:[],flatRows:[],rowsById:{}},getMemoOptions(e.options,"debugTable")),e.getGroupedSelectedRowModel=memo(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?selectRowsFn(e,n):{rows:[],flatRows:[],rowsById:{}},getMemoOptions(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let Ee=!!(t.length&&Object.keys(n).length);return Ee&&t.some(Re=>Re.getCanSelect()&&!n[Re.id])&&(Ee=!1),Ee},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(Re=>Re.getCanSelect()),{rowSelection:n}=e.getState();let Ee=!!t.length;return Ee&&t.some(Re=>!n[Re.id])&&(Ee=!1),Ee},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,Ee)=>{const Re=e.getIsSelected();t.setRowSelection(Ce=>{var Te;if(n=typeof n<"u"?n:!Re,e.getCanSelect()&&Re===n)return Ce;const Me={...Ce};return mutateRowIsSelected(Me,e.id,n,(Te=Ee==null?void 0:Ee.selectChildren)!=null?Te:!0,t),Me})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return isRowSelected(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return isSubRowSelected(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return isSubRowSelected(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return Ee=>{var Re;n&&e.toggleSelected((Re=Ee.target)==null?void 0:Re.checked)}}}},mutateRowIsSelected=(e,t,n,Ee,Re)=>{var Ce;const Te=Re.getRow(t,!0);n?(Te.getCanMultiSelect()||Object.keys(e).forEach(Me=>delete e[Me]),Te.getCanSelect()&&(e[t]=!0)):delete e[t],Ee&&(Ce=Te.subRows)!=null&&Ce.length&&Te.getCanSelectSubRows()&&Te.subRows.forEach(Me=>mutateRowIsSelected(e,Me.id,n,Ee,Re))};function selectRowsFn(e,t){const n=e.getState().rowSelection,Ee=[],Re={},Ce=function(Te,Me){return Te.map(De=>{var Oe;const Be=isRowSelected(De,n);if(Be&&(Ee.push(De),Re[De.id]=De),(Oe=De.subRows)!=null&&Oe.length&&(De={...De,subRows:Ce(De.subRows)}),Be)return De}).filter(Boolean)};return{rows:Ce(t.rows),flatRows:Ee,rowsById:Re}}function isRowSelected(e,t){var n;return(n=t[e.id])!=null?n:!1}function isSubRowSelected(e,t,n){var Ee;if(!((Ee=e.subRows)!=null&&Ee.length))return!1;let Re=!0,Ce=!1;return e.subRows.forEach(Te=>{if(!(Ce&&!Re)&&(Te.getCanSelect()&&(isRowSelected(Te,t)?Ce=!0:Re=!1),Te.subRows&&Te.subRows.length)){const Me=isSubRowSelected(Te,t);Me==="all"?Ce=!0:(Me==="some"&&(Ce=!0),Re=!1)}}),Re?"all":Ce?"some":!1}const reSplitAlphaNumeric=/([0-9]+)/gm,alphanumeric$1=(e,t,n)=>compareAlphanumeric(toString$1(e.getValue(n)).toLowerCase(),toString$1(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive=(e,t,n)=>compareAlphanumeric(toString$1(e.getValue(n)),toString$1(t.getValue(n))),text=(e,t,n)=>compareBasic(toString$1(e.getValue(n)).toLowerCase(),toString$1(t.getValue(n)).toLowerCase()),textCaseSensitive=(e,t,n)=>compareBasic(toString$1(e.getValue(n)),toString$1(t.getValue(n))),datetime=(e,t,n)=>{const Ee=e.getValue(n),Re=t.getValue(n);return Ee>Re?1:Ee<Re?-1:0},basic=(e,t,n)=>compareBasic(e.getValue(n),t.getValue(n));function compareBasic(e,t){return e===t?0:e>t?1:-1}function toString$1(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function compareAlphanumeric(e,t){const n=e.split(reSplitAlphaNumeric).filter(Boolean),Ee=t.split(reSplitAlphaNumeric).filter(Boolean);for(;n.length&&Ee.length;){const Re=n.shift(),Ce=Ee.shift(),Te=parseInt(Re,10),Me=parseInt(Ce,10),De=[Te,Me].sort();if(isNaN(De[0])){if(Re>Ce)return 1;if(Ce>Re)return-1;continue}if(isNaN(De[1]))return isNaN(Te)?-1:1;if(Te>Me)return 1;if(Me>Te)return-1}return n.length-Ee.length}const sortingFns={alphanumeric:alphanumeric$1,alphanumericCaseSensitive,text,textCaseSensitive,datetime,basic},RowSorting={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:makeStateUpdater("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let Ee=!1;for(const Re of n){const Ce=Re==null?void 0:Re.getValue(e.id);if(Object.prototype.toString.call(Ce)==="[object Date]")return sortingFns.datetime;if(typeof Ce=="string"&&(Ee=!0,Ce.split(reSplitAlphaNumeric).length>1))return sortingFns.alphanumeric}return Ee?sortingFns.text:sortingFns.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,Ee;if(!e)throw new Error;return isFunction$2(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(Ee=t.options.sortingFns)==null?void 0:Ee[e.columnDef.sortingFn])!=null?n:sortingFns[e.columnDef.sortingFn]},e.toggleSorting=(n,Ee)=>{const Re=e.getNextSortingOrder(),Ce=typeof n<"u"&&n!==null;t.setSorting(Te=>{const Me=Te==null?void 0:Te.find(He=>He.id===e.id),De=Te==null?void 0:Te.findIndex(He=>He.id===e.id);let Oe=[],Be,ze=Ce?n:Re==="desc";if(Te!=null&&Te.length&&e.getCanMultiSort()&&Ee?Me?Be="toggle":Be="add":Te!=null&&Te.length&&De!==Te.length-1?Be="replace":Me?Be="toggle":Be="replace",Be==="toggle"&&(Ce||Re||(Be="remove")),Be==="add"){var $e;Oe=[...Te,{id:e.id,desc:ze}],Oe.splice(0,Oe.length-(($e=t.options.maxMultiSortColCount)!=null?$e:Number.MAX_SAFE_INTEGER))}else Be==="toggle"?Oe=Te.map(He=>He.id===e.id?{...He,desc:ze}:He):Be==="remove"?Oe=Te.filter(He=>He.id!==e.id):Oe=[{id:e.id,desc:ze}];return Oe})},e.getFirstSortDir=()=>{var n,Ee;return((n=(Ee=e.columnDef.sortDescFirst)!=null?Ee:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var Ee,Re;const Ce=e.getFirstSortDir(),Te=e.getIsSorted();return Te?Te!==Ce&&((Ee=t.options.enableSortingRemoval)==null||Ee)&&(!(n&&(Re=t.options.enableMultiRemove)!=null)||Re)?!1:Te==="desc"?"asc":"desc":Ce},e.getCanSort=()=>{var n,Ee;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((Ee=t.options.enableSorting)!=null?Ee:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,Ee;return(n=(Ee=e.columnDef.enableMultiSort)!=null?Ee:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const Ee=(n=t.getState().sorting)==null?void 0:n.find(Re=>Re.id===e.id);return Ee?Ee.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,Ee;return(n=(Ee=t.getState().sorting)==null?void 0:Ee.findIndex(Re=>Re.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(Ee=>Ee.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return Ee=>{n&&(Ee.persist==null||Ee.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(Ee):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,Ee;e.setSorting(t?[]:(n=(Ee=e.initialState)==null?void 0:Ee.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},builtInFeatures=[Headers$1,ColumnVisibility,ColumnOrdering,ColumnPinning,ColumnFaceting,ColumnFiltering,GlobalFaceting,GlobalFiltering,RowSorting,ColumnGrouping,RowExpanding,RowPagination,RowPinning,RowSelection,ColumnSizing];function createTable$1(e){var t,n;const Ee=[...builtInFeatures,...(t=e._features)!=null?t:[]];let Re={_features:Ee};const Ce=Re._features.reduce(($e,He)=>Object.assign($e,He.getDefaultOptions==null?void 0:He.getDefaultOptions(Re)),{}),Te=$e=>Re.options.mergeOptions?Re.options.mergeOptions(Ce,$e):{...Ce,...$e};let De={...{},...(n=e.initialState)!=null?n:{}};Re._features.forEach($e=>{var He;De=(He=$e.getInitialState==null?void 0:$e.getInitialState(De))!=null?He:De});const Oe=[];let Be=!1;const ze={_features:Ee,options:{...Ce,...e},initialState:De,_queue:$e=>{Oe.push($e),Be||(Be=!0,Promise.resolve().then(()=>{for(;Oe.length;)Oe.shift()();Be=!1}).catch(He=>setTimeout(()=>{throw He})))},reset:()=>{Re.setState(Re.initialState)},setOptions:$e=>{const He=functionalUpdate($e,Re.options);Re.options=Te(He)},getState:()=>Re.options.state,setState:$e=>{Re.options.onStateChange==null||Re.options.onStateChange($e)},_getRowId:($e,He,Ue)=>{var Ve;return(Ve=Re.options.getRowId==null?void 0:Re.options.getRowId($e,He,Ue))!=null?Ve:`${Ue?[Ue.id,He].join("."):He}`},getCoreRowModel:()=>(Re._getCoreRowModel||(Re._getCoreRowModel=Re.options.getCoreRowModel(Re)),Re._getCoreRowModel()),getRowModel:()=>Re.getPaginationRowModel(),getRow:($e,He)=>{let Ue=(He?Re.getPrePaginationRowModel():Re.getRowModel()).rowsById[$e];if(!Ue&&(Ue=Re.getCoreRowModel().rowsById[$e],!Ue))throw new Error;return Ue},_getDefaultColumnDef:memo(()=>[Re.options.defaultColumn],$e=>{var He;return $e=(He=$e)!=null?He:{},{header:Ue=>{const Ve=Ue.header.column.columnDef;return Ve.accessorKey?Ve.accessorKey:Ve.accessorFn?Ve.id:null},cell:Ue=>{var Ve,We;return(Ve=(We=Ue.renderValue())==null||We.toString==null?void 0:We.toString())!=null?Ve:null},...Re._features.reduce((Ue,Ve)=>Object.assign(Ue,Ve.getDefaultColumnDef==null?void 0:Ve.getDefaultColumnDef()),{}),...$e}},getMemoOptions(e,"debugColumns")),_getColumnDefs:()=>Re.options.columns,getAllColumns:memo(()=>[Re._getColumnDefs()],$e=>{const He=function(Ue,Ve,We){return We===void 0&&(We=0),Ue.map(qe=>{const Ge=createColumn(Re,qe,We,Ve),Ye=qe;return Ge.columns=Ye.columns?He(Ye.columns,Ge,We+1):[],Ge})};return He($e)},getMemoOptions(e,"debugColumns")),getAllFlatColumns:memo(()=>[Re.getAllColumns()],$e=>$e.flatMap(He=>He.getFlatColumns()),getMemoOptions(e,"debugColumns")),_getAllFlatColumnsById:memo(()=>[Re.getAllFlatColumns()],$e=>$e.reduce((He,Ue)=>(He[Ue.id]=Ue,He),{}),getMemoOptions(e,"debugColumns")),getAllLeafColumns:memo(()=>[Re.getAllColumns(),Re._getOrderColumnsFn()],($e,He)=>{let Ue=$e.flatMap(Ve=>Ve.getLeafColumns());return He(Ue)},getMemoOptions(e,"debugColumns")),getColumn:$e=>Re._getAllFlatColumnsById()[$e]};Object.assign(Re,ze);for(let $e=0;$e<Re._features.length;$e++){const He=Re._features[$e];He==null||He.createTable==null||He.createTable(Re)}return Re}function getCoreRowModel(){return e=>memo(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},Ee=function(Re,Ce,Te){Ce===void 0&&(Ce=0);const Me=[];for(let Oe=0;Oe<Re.length;Oe++){const Be=createRow(e,e._getRowId(Re[Oe],Oe,Te),Re[Oe],Oe,Ce,void 0,Te==null?void 0:Te.id);if(n.flatRows.push(Be),n.rowsById[Be.id]=Be,Me.push(Be),e.options.getSubRows){var De;Be.originalSubRows=e.options.getSubRows(Re[Oe],Oe),(De=Be.originalSubRows)!=null&&De.length&&(Be.subRows=Ee(Be.originalSubRows,Ce+1,Be))}}return Me};return n.rows=Ee(t),n},getMemoOptions(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function expandRows(e){const t=[],n=Ee=>{var Re;t.push(Ee),(Re=Ee.subRows)!=null&&Re.length&&Ee.getIsExpanded()&&Ee.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function filterRows(e,t,n){return n.options.filterFromLeafRows?filterRowModelFromLeafs(e,t,n):filterRowModelFromRoot(e,t,n)}function filterRowModelFromLeafs(e,t,n){var Ee;const Re=[],Ce={},Te=(Ee=n.options.maxLeafRowFilterDepth)!=null?Ee:100,Me=function(De,Oe){Oe===void 0&&(Oe=0);const Be=[];for(let $e=0;$e<De.length;$e++){var ze;let He=De[$e];const Ue=createRow(n,He.id,He.original,He.index,He.depth,void 0,He.parentId);if(Ue.columnFilters=He.columnFilters,(ze=He.subRows)!=null&&ze.length&&Oe<Te){if(Ue.subRows=Me(He.subRows,Oe+1),He=Ue,t(He)&&!Ue.subRows.length){Be.push(He),Ce[He.id]=He,Re.push(He);continue}if(t(He)||Ue.subRows.length){Be.push(He),Ce[He.id]=He,Re.push(He);continue}}else He=Ue,t(He)&&(Be.push(He),Ce[He.id]=He,Re.push(He))}return Be};return{rows:Me(e),flatRows:Re,rowsById:Ce}}function filterRowModelFromRoot(e,t,n){var Ee;const Re=[],Ce={},Te=(Ee=n.options.maxLeafRowFilterDepth)!=null?Ee:100,Me=function(De,Oe){Oe===void 0&&(Oe=0);const Be=[];for(let $e=0;$e<De.length;$e++){let He=De[$e];if(t(He)){var ze;if((ze=He.subRows)!=null&&ze.length&&Oe<Te){const Ve=createRow(n,He.id,He.original,He.index,He.depth,void 0,He.parentId);Ve.subRows=Me(He.subRows,Oe+1),He=Ve}Be.push(He),Re.push(He),Ce[He.id]=He}}return Be};return{rows:Me(e),flatRows:Re,rowsById:Ce}}function getFilteredRowModel(){return e=>memo(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,Ee)=>{if(!t.rows.length||!(n!=null&&n.length)&&!Ee){for(let $e=0;$e<t.flatRows.length;$e++)t.flatRows[$e].columnFilters={},t.flatRows[$e].columnFiltersMeta={};return t}const Re=[],Ce=[];(n??[]).forEach($e=>{var He;const Ue=e.getColumn($e.id);if(!Ue)return;const Ve=Ue.getFilterFn();Ve&&Re.push({id:$e.id,filterFn:Ve,resolvedValue:(He=Ve.resolveFilterValue==null?void 0:Ve.resolveFilterValue($e.value))!=null?He:$e.value})});const Te=(n??[]).map($e=>$e.id),Me=e.getGlobalFilterFn(),De=e.getAllLeafColumns().filter($e=>$e.getCanGlobalFilter());Ee&&Me&&De.length&&(Te.push("__global__"),De.forEach($e=>{var He;Ce.push({id:$e.id,filterFn:Me,resolvedValue:(He=Me.resolveFilterValue==null?void 0:Me.resolveFilterValue(Ee))!=null?He:Ee})}));let Oe,Be;for(let $e=0;$e<t.flatRows.length;$e++){const He=t.flatRows[$e];if(He.columnFilters={},Re.length)for(let Ue=0;Ue<Re.length;Ue++){Oe=Re[Ue];const Ve=Oe.id;He.columnFilters[Ve]=Oe.filterFn(He,Ve,Oe.resolvedValue,We=>{He.columnFiltersMeta[Ve]=We})}if(Ce.length){for(let Ue=0;Ue<Ce.length;Ue++){Be=Ce[Ue];const Ve=Be.id;if(Be.filterFn(He,Ve,Be.resolvedValue,We=>{He.columnFiltersMeta[Ve]=We})){He.columnFilters.__global__=!0;break}}He.columnFilters.__global__!==!0&&(He.columnFilters.__global__=!1)}}const ze=$e=>{for(let He=0;He<Te.length;He++)if($e.columnFilters[Te[He]]===!1)return!1;return!0};return filterRows(t.rows,ze,e)},getMemoOptions(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function getPaginationRowModel(e){return t=>memo(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,Ee)=>{if(!Ee.rows.length)return Ee;const{pageSize:Re,pageIndex:Ce}=n;let{rows:Te,flatRows:Me,rowsById:De}=Ee;const Oe=Re*Ce,Be=Oe+Re;Te=Te.slice(Oe,Be);let ze;t.options.paginateExpandedRows?ze={rows:Te,flatRows:Me,rowsById:De}:ze=expandRows({rows:Te,flatRows:Me,rowsById:De}),ze.flatRows=[];const $e=He=>{ze.flatRows.push(He),He.subRows.length&&He.subRows.forEach($e)};return ze.rows.forEach($e),ze},getMemoOptions(t.options,"debugTable"))}function getSortedRowModel(){return e=>memo(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const Ee=e.getState().sorting,Re=[],Ce=Ee.filter(De=>{var Oe;return(Oe=e.getColumn(De.id))==null?void 0:Oe.getCanSort()}),Te={};Ce.forEach(De=>{const Oe=e.getColumn(De.id);Oe&&(Te[De.id]={sortUndefined:Oe.columnDef.sortUndefined,invertSorting:Oe.columnDef.invertSorting,sortingFn:Oe.getSortingFn()})});const Me=De=>{const Oe=De.map(Be=>({...Be}));return Oe.sort((Be,ze)=>{for(let He=0;He<Ce.length;He+=1){var $e;const Ue=Ce[He],Ve=Te[Ue.id],We=Ve.sortUndefined,qe=($e=Ue==null?void 0:Ue.desc)!=null?$e:!1;let Ge=0;if(We){const Ye=Be.getValue(Ue.id),Ke=ze.getValue(Ue.id),Xe=Ye===void 0,Ze=Ke===void 0;if(Xe||Ze){if(We==="first")return Xe?-1:1;if(We==="last")return Xe?1:-1;Ge=Xe&&Ze?0:Xe?We:-We}}if(Ge===0&&(Ge=Ve.sortingFn(Be,ze,Ue.id)),Ge!==0)return qe&&(Ge*=-1),Ve.invertSorting&&(Ge*=-1),Ge}return Be.index-ze.index}),Oe.forEach(Be=>{var ze;Re.push(Be),(ze=Be.subRows)!=null&&ze.length&&(Be.subRows=Me(Be.subRows))}),Oe};return{rows:Me(n.rows),flatRows:Re,rowsById:n.rowsById}},getMemoOptions(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function flexRender(e,t){return e?isReactComponent(e)?reactExports.createElement(e,t):e:null}function isReactComponent(e){return isClassComponent(e)||typeof e=="function"||isExoticComponent(e)}function isClassComponent(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function isExoticComponent(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function useReactTable(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=reactExports.useState(()=>({current:createTable$1(t)})),[Ee,Re]=reactExports.useState(()=>n.current.initialState);return n.current.setOptions(Ce=>({...Ce,...e,state:{...Ee,...e.state},onStateChange:Te=>{Re(Te),e.onStateChange==null||e.onStateChange(Te)}})),n.current}function cn$1(...e){return twMerge(clsx(e))}function Skeleton({className:e,...t}){return jsxRuntimeExports.jsx("div",{className:cn$1("animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",e),...t})}function Table$1({columns:e,data:t,isLoading:n,emptyMessage:Ee="No data found.",onRowClick:Re,enableSearch:Ce=!0,pageSize:Te=6}){const[Me,De]=reactExports.useState([]),[Oe,Be]=reactExports.useState(""),ze=createColumnHelper(),$e=reactExports.useMemo(()=>e.map(Ue=>{const Ve=Ue.accessorKey||Ue.searchKey||Ue.header;return ze.accessor(We=>Ue.accessorKey?We[Ue.accessorKey]:Ue.searchKey?We[Ue.searchKey]:null,{id:Ve,header:Ue.header,enableSorting:Ue.enableSorting??!!Ue.accessorKey,enableGlobalFilter:!!(Ue.accessorKey||Ue.searchKey),cell:We=>Ue.render?Ue.render(We.row.original):We.getValue()})}),[e]),He=useReactTable({data:t,columns:$e,state:{sorting:Me,globalFilter:Oe},initialState:{pagination:{pageSize:Te}},onSortingChange:De,onGlobalFilterChange:Be,getCoreRowModel:getCoreRowModel(),getSortedRowModel:getSortedRowModel(),getFilteredRowModel:getFilteredRowModel(),getPaginationRowModel:getPaginationRowModel()});return n?jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-lg border border-border overflow-hidden",children:[Ce&&jsxRuntimeExports.jsx("div",{className:"p-4 border-b border-border",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-9 w-full max-w-sm rounded-lg"})}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-left border-collapse",children:[jsxRuntimeExports.jsx("thead",{className:"bg-bg-main",children:jsxRuntimeExports.jsx("tr",{className:"border-b border-border",children:e.map((Ue,Ve)=>jsxRuntimeExports.jsx("th",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"})},Ve))})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-border",children:[1,2,3,4,5].map(Ue=>jsxRuntimeExports.jsx("tr",{children:e.map((Ve,We)=>jsxRuntimeExports.jsx("td",{className:"px-6 py-3",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"})},We))},Ue))})]})})]}):jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-lg border border-border overflow-hidden",children:[Ce&&jsxRuntimeExports.jsx("div",{className:"p-4 border-b border-border",children:jsxRuntimeExports.jsxs("div",{className:"relative max-w-sm",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",size:18}),jsxRuntimeExports.jsx("input",{type:"text",value:Oe??"",onChange:Ue=>Be(Ue.target.value),placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 text-sm border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 bg-bg-main text-text-primary placeholder:text-text-muted transition-all"})]})}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-left border-collapse",children:[jsxRuntimeExports.jsx("thead",{className:"bg-bg-main text-text-secondary text-xs uppercase font-semibold",children:He.getHeaderGroups().map(Ue=>jsxRuntimeExports.jsx("tr",{children:Ue.headers.map(Ve=>{const We=e.find(qe=>qe.accessorKey===Ve.id||qe.header===Ve.id);return jsxRuntimeExports.jsx("th",{className:`px-6 py-4 cursor-pointer select-none group ${(We==null?void 0:We.className)||""}`,onClick:Ve.column.getToggleSortingHandler(),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[flexRender(Ve.column.columnDef.header,Ve.getContext()),{asc:jsxRuntimeExports.jsx(ArrowUpDown,{size:14,className:"opacity-100 rotate-180"}),desc:jsxRuntimeExports.jsx(ArrowUpDown,{size:14,className:"opacity-100"})}[Ve.column.getIsSorted()]??(Ve.column.getCanSort()&&jsxRuntimeExports.jsx(ArrowUpDown,{size:14,className:"opacity-0 group-hover:opacity-50 transition-opacity"}))]})},Ve.id)})},Ue.id))}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-border",children:He.getRowModel().rows.length===0?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:e.length,className:"px-6 py-8 text-center text-text-muted",children:Ee})}):He.getRowModel().rows.map(Ue=>jsxRuntimeExports.jsx("tr",{className:`hover:bg-bg-hover transition-colors ${Re?"cursor-pointer":""}`,onClick:()=>Re&&Re(Ue.original),children:Ue.getVisibleCells().map(Ve=>jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-text-primary",children:flexRender(Ve.column.columnDef.cell,Ve.getContext())},Ve.id))},Ue.id))})]})}),He.getPageCount()>1&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-border bg-bg-main/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{className:"p-1 rounded hover:bg-bg-hover text-text-secondary disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>He.previousPage(),disabled:!He.getCanPreviousPage(),children:jsxRuntimeExports.jsx(ChevronLeft,{size:18})}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-text-secondary",children:["Page ",He.getState().pagination.pageIndex+1," of"," ",He.getPageCount()]}),jsxRuntimeExports.jsx("button",{className:"p-1 rounded hover:bg-bg-hover text-text-secondary disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>He.nextPage(),disabled:!He.getCanNextPage(),children:jsxRuntimeExports.jsx(ChevronRight,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-text-muted",children:["Showing ",He.getRowModel().rows.length," rows"]})]})]})}function Modal({isOpen:e,onClose:t,title:n,children:Ee,footer:Re,maxWidth:Ce="max-w-md",hideHeader:Te=!1,padding:Me="p-6",bodyClassName:De}){return e?reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:`bg-bg-card rounded-xl shadow-2xl w-full ${Ce} mx-4 animate-in fade-in zoom-in-95 duration-300 ease-out border border-border flex flex-col max-h-[90vh]`,children:[!Te&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border shrink-0",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:n}),jsxRuntimeExports.jsx("button",{onClick:t,className:"text-text-muted hover:text-text-primary p-1 rounded hover:bg-bg-hover transition-colors",children:jsxRuntimeExports.jsx(X$1,{size:20})})]}),jsxRuntimeExports.jsx("div",{className:De||`${Me} space-y-4 overflow-y-auto`,children:Ee}),Re&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-bg-main/50 rounded-b-xl shrink-0",children:Re})]})}),document.body):null}function ConfirmationModal({isOpen:e,onClose:t,onConfirm:n,title:Ee,message:Re,confirmText:Ce="Confirm",cancelText:Te="Cancel",variant:Me="danger",isLoading:De=!1,showCancel:Oe=!0}){const Be=()=>{switch(Me){case"danger":return jsxRuntimeExports.jsx(TriangleAlert,{size:28,className:"text-status-error"});case"warning":return jsxRuntimeExports.jsx(CircleAlert,{size:28,className:"text-status-warning"});case"success":return jsxRuntimeExports.jsx(CircleCheckBig,{size:28,className:"text-status-success"});case"info":default:return jsxRuntimeExports.jsx(Info,{size:28,className:"text-brand-primary"})}},ze=()=>{switch(Me){case"danger":return"bg-status-error/10";case"warning":return"bg-status-warning/10";case"success":return"bg-status-success/10";case"info":default:return"bg-brand-primary/10"}},$e=()=>{switch(Me){case"danger":return"bg-status-error hover:bg-status-error/90";case"warning":return"bg-status-warning hover:bg-status-warning/90";case"success":return"bg-status-success hover:bg-status-success/90";case"info":default:return"bg-brand-primary hover:bg-brand-primary/90"}};return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:t,title:Ee,maxWidth:"max-w-sm",hideHeader:!0,padding:"p-4",footer:jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 w-full",children:[Oe&&jsxRuntimeExports.jsx("button",{onClick:t,className:"px-3 py-1.5 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",disabled:De,children:Te}),jsxRuntimeExports.jsx("button",{onClick:n,className:`px-3 py-1.5 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 ${$e()}`,disabled:De,children:De?"Processing...":Ce})]}),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-center p-0",children:[jsxRuntimeExports.jsx("div",{className:`p-3 rounded-full mb-3 ${ze()} animate-in zoom-in-50 duration-300`,children:Be()}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-text-primary mb-1",children:Ee}),jsxRuntimeExports.jsx("p",{className:"text-base text-text-secondary leading-relaxed",children:Re})]})})}function Loader({size:e=24,className:t,variant:n="primary"}){const Ee={primary:"text-brand-primary",secondary:"text-text-secondary",white:"text-white",muted:"text-text-muted"};return jsxRuntimeExports.jsx(LoaderCircle,{size:e,className:cn$2("animate-spin",Ee[n],t)})}const Button=({children:e,className:t="",variant:n="primary",size:Ee="md",isLoading:Re=!1,leftIcon:Ce,rightIcon:Te,disabled:Me,...De})=>{const Oe="inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",Be={primary:"bg-brand-primary text-white hover:bg-brand-secondary focus:ring-brand-primary shadow-lg shadow-brand-primary/20",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 text-gray-700 focus:ring-brand-primary",ghost:"bg-transparent hover:bg-gray-100 text-gray-700 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-500 text-white hover:bg-yellow-600 focus:ring-yellow-500"},ze={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return jsxRuntimeExports.jsxs("button",{className:`${Oe} ${Be[n]} ${ze[Ee]} ${t}`,disabled:Me||Re,...De,children:[Re&&jsxRuntimeExports.jsx(Loader,{size:16,className:"mr-2",variant:"white"}),!Re&&Ce&&jsxRuntimeExports.jsx("span",{className:"mr-2",children:Ce}),e,!Re&&Te&&jsxRuntimeExports.jsx("span",{className:"ml-2",children:Te})]})};function PasswordInput({className:e,icon:t=Lock,...n}){const[Ee,Re]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"relative",children:[t&&jsxRuntimeExports.jsx(t,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted pointer-events-none",size:18}),jsxRuntimeExports.jsx("input",{type:Ee?"text":"password",className:cn$2("w-full rounded-lg border bg-bg-card text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:border-transparent focus:ring-brand-primary h-[38px]",t?"pl-10":"px-3","pr-10 py-2 text-sm",e),...n}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Re(!Ee),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors focus:outline-none",tabIndex:-1,children:Ee?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]})}function cn(...e){return twMerge(clsx(e))}const Select=({label:e,options:t,value:n,onChange:Ee,error:Re,helperText:Ce,className:Te="",placeholder:Me="Select an option",disabled:De=!1,required:Oe=!1,id:Be})=>{const[ze,$e]=reactExports.useState(!1),He=reactExports.useRef(null),Ue=t.find(qe=>qe.value===n);reactExports.useEffect(()=>{const qe=Ge=>{He.current&&!He.current.contains(Ge.target)&&$e(!1)};return document.addEventListener("mousedown",qe),()=>{document.removeEventListener("mousedown",qe)}},[]);const Ve=qe=>{Ee(qe),$e(!1)},We=()=>{De||$e(!ze)};return jsxRuntimeExports.jsxs("div",{className:cn("w-full",Te),ref:He,children:[e&&jsxRuntimeExports.jsxs("label",{htmlFor:Be,className:"block text-sm font-medium text-text-secondary mb-1",children:[e," ",Oe&&jsxRuntimeExports.jsx("span",{className:"text-status-error",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{onClick:We,className:cn("w-full rounded-lg border bg-bg-card px-3 py-2 text-sm cursor-pointer flex items-center justify-between transition-colors h-[38px]",Re?"border-status-error focus:ring-status-error":"border-border hover:border-text-muted focus:ring-brand-primary",ze&&"ring-2 ring-brand-primary/20 border-brand-primary",De&&"bg-bg-main text-text-muted cursor-not-allowed opacity-70"),children:[jsxRuntimeExports.jsx("span",{className:cn("block truncate text-text-primary",!Ue&&"text-text-muted"),children:Ue?Ue.label:Me}),jsxRuntimeExports.jsx(ChevronDown,{size:16,className:cn("text-text-muted transition-transform duration-200",ze&&"transform rotate-180")})]}),ze&&jsxRuntimeExports.jsx("div",{className:"absolute z-50 w-full mt-1 bg-bg-card border border-border rounded-lg shadow-lg max-h-60 overflow-auto animate-in fade-in zoom-in-95 duration-100",children:t.length===0?jsxRuntimeExports.jsx("div",{className:"px-3 py-2 text-sm text-text-muted text-center",children:"No options available"}):jsxRuntimeExports.jsx("ul",{className:"py-1",children:t.map(qe=>jsxRuntimeExports.jsxs("li",{onClick:()=>Ve(qe.value),className:cn("px-3 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-bg-hover transition-colors text-text-primary",qe.value===n&&"bg-brand-primary/5 text-brand-primary font-medium"),children:[jsxRuntimeExports.jsx("span",{className:"truncate",children:qe.label}),qe.value===n&&jsxRuntimeExports.jsx(Check,{size:14})]},qe.value))})})]}),Re&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-status-error",children:Re}),!Re&&Ce&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-text-muted",children:Ce})]})},millisecondsInWeek=6048e5,millisecondsInDay=864e5,millisecondsInMinute=6e4,millisecondsInHour=36e5,millisecondsInSecond=1e3,minutesInMonth=43200,minutesInDay=1440,constructFromSymbol=Symbol.for("constructDateFrom");function constructFrom(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&constructFromSymbol in e?e[constructFromSymbol](t):e instanceof Date?new e.constructor(t):new Date(t)}function toDate(e,t){return constructFrom(t||e,e)}function addDays(e,t,n){const Ee=toDate(e,n==null?void 0:n.in);return isNaN(t)?constructFrom((n==null?void 0:n.in)||e,NaN):(t&&Ee.setDate(Ee.getDate()+t),Ee)}function addMonths(e,t,n){const Ee=toDate(e,n==null?void 0:n.in);if(isNaN(t))return constructFrom(e,NaN);if(!t)return Ee;const Re=Ee.getDate(),Ce=constructFrom(e,Ee.getTime());Ce.setMonth(Ee.getMonth()+t+1,0);const Te=Ce.getDate();return Re>=Te?Ce:(Ee.setFullYear(Ce.getFullYear(),Ce.getMonth(),Re),Ee)}function addMilliseconds(e,t,n){return constructFrom(e,+toDate(e)+t)}function addHours(e,t,n){return addMilliseconds(e,t*millisecondsInHour)}let defaultOptions$1={};function getDefaultOptions$1(){return defaultOptions$1}function startOfWeek(e,t){var Me,De,Oe,Be;const n=getDefaultOptions$1(),Ee=(t==null?void 0:t.weekStartsOn)??((De=(Me=t==null?void 0:t.locale)==null?void 0:Me.options)==null?void 0:De.weekStartsOn)??n.weekStartsOn??((Be=(Oe=n.locale)==null?void 0:Oe.options)==null?void 0:Be.weekStartsOn)??0,Re=toDate(e,t==null?void 0:t.in),Ce=Re.getDay(),Te=(Ce<Ee?7:0)+Ce-Ee;return Re.setDate(Re.getDate()-Te),Re.setHours(0,0,0,0),Re}function startOfISOWeek(e,t){return startOfWeek(e,{...t,weekStartsOn:1})}function getISOWeekYear(e,t){const n=toDate(e,t==null?void 0:t.in),Ee=n.getFullYear(),Re=constructFrom(n,0);Re.setFullYear(Ee+1,0,4),Re.setHours(0,0,0,0);const Ce=startOfISOWeek(Re),Te=constructFrom(n,0);Te.setFullYear(Ee,0,4),Te.setHours(0,0,0,0);const Me=startOfISOWeek(Te);return n.getTime()>=Ce.getTime()?Ee+1:n.getTime()>=Me.getTime()?Ee:Ee-1}function getTimezoneOffsetInMilliseconds(e){const t=toDate(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function normalizeDates(e,...t){const n=constructFrom.bind(null,e||t.find(Ee=>typeof Ee=="object"));return t.map(n)}function startOfDay(e,t){const n=toDate(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function differenceInCalendarDays(e,t,n){const[Ee,Re]=normalizeDates(n==null?void 0:n.in,e,t),Ce=startOfDay(Ee),Te=startOfDay(Re),Me=+Ce-getTimezoneOffsetInMilliseconds(Ce),De=+Te-getTimezoneOffsetInMilliseconds(Te);return Math.round((Me-De)/millisecondsInDay)}function startOfISOWeekYear(e,t){const n=getISOWeekYear(e,t),Ee=constructFrom(e,0);return Ee.setFullYear(n,0,4),Ee.setHours(0,0,0,0),startOfISOWeek(Ee)}function addMinutes(e,t,n){const Ee=toDate(e,n==null?void 0:n.in);return Ee.setTime(Ee.getTime()+t*millisecondsInMinute),Ee}function addQuarters(e,t,n){return addMonths(e,t*3,n)}function addSeconds(e,t,n){return addMilliseconds(e,t*1e3)}function addWeeks(e,t,n){return addDays(e,t*7,n)}function addYears(e,t,n){return addMonths(e,t*12,n)}function max$1(e,t){let n,Ee=t==null?void 0:t.in;return e.forEach(Re=>{!Ee&&typeof Re=="object"&&(Ee=constructFrom.bind(null,Re));const Ce=toDate(Re,Ee);(!n||n<Ce||isNaN(+Ce))&&(n=Ce)}),constructFrom(Ee,n||NaN)}function min$1(e,t){let n,Ee=t==null?void 0:t.in;return e.forEach(Re=>{!Ee&&typeof Re=="object"&&(Ee=constructFrom.bind(null,Re));const Ce=toDate(Re,Ee);(!n||n>Ce||isNaN(+Ce))&&(n=Ce)}),constructFrom(Ee,n||NaN)}function compareAsc(e,t){const n=+toDate(e)-+toDate(t);return n<0?-1:n>0?1:n}function constructNow(e){return constructFrom(e,Date.now())}function isSameDay$1(e,t,n){const[Ee,Re]=normalizeDates(n==null?void 0:n.in,e,t);return+startOfDay(Ee)==+startOfDay(Re)}function isDate(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function isValid$1(e){return!(!isDate(e)&&typeof e!="number"||isNaN(+toDate(e)))}function differenceInCalendarMonths(e,t,n){const[Ee,Re]=normalizeDates(n==null?void 0:n.in,e,t),Ce=Ee.getFullYear()-Re.getFullYear(),Te=Ee.getMonth()-Re.getMonth();return Ce*12+Te}function getQuarter(e,t){const n=toDate(e,t==null?void 0:t.in);return Math.trunc(n.getMonth()/3)+1}function differenceInCalendarQuarters(e,t,n){const[Ee,Re]=normalizeDates(n==null?void 0:n.in,e,t),Ce=Ee.getFullYear()-Re.getFullYear(),Te=getQuarter(Ee)-getQuarter(Re);return Ce*4+Te}function differenceInCalendarYears(e,t,n){const[Ee,Re]=normalizeDates(n==null?void 0:n.in,e,t);return Ee.getFullYear()-Re.getFullYear()}function differenceInDays(e,t,n){const[Ee,Re]=normalizeDates(n==null?void 0:n.in,e,t),Ce=compareLocalAsc(Ee,Re),Te=Math.abs(differenceInCalendarDays(Ee,Re));Ee.setDate(Ee.getDate()-Ce*Te);const Me=+(compareLocalAsc(Ee,Re)===-Ce),De=Ce*(Te-Me);return De===0?0:De}function compareLocalAsc(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function getRoundingMethod(e){return t=>{const Ee=(e?Math[e]:Math.trunc)(t);return Ee===0?0:Ee}}function differenceInMilliseconds(e,t){return+toDate(e)-+toDate(t)}function endOfDay(e,t){const n=toDate(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function endOfMonth(e,t){const n=toDate(e,t==null?void 0:t.in),Ee=n.getMonth();return n.setFullYear(n.getFullYear(),Ee+1,0),n.setHours(23,59,59,999),n}function isLastDayOfMonth(e,t){const n=toDate(e,t==null?void 0:t.in);return+endOfDay(n,t)==+endOfMonth(n,t)}function differenceInMonths(e,t,n){const[Ee,Re,Ce]=normalizeDates(n==null?void 0:n.in,e,e,t),Te=compareAsc(Re,Ce),Me=Math.abs(differenceInCalendarMonths(Re,Ce));if(Me<1)return 0;Re.getMonth()===1&&Re.getDate()>27&&Re.setDate(30),Re.setMonth(Re.getMonth()-Te*Me);let De=compareAsc(Re,Ce)===-Te;isLastDayOfMonth(Ee)&&Me===1&&compareAsc(Ee,Ce)===1&&(De=!1);const Oe=Te*(Me-+De);return Oe===0?0:Oe}function differenceInSeconds(e,t,n){const Ee=differenceInMilliseconds(e,t)/1e3;return getRoundingMethod(n==null?void 0:n.roundingMethod)(Ee)}function startOfQuarter(e,t){const n=toDate(e,t==null?void 0:t.in),Ee=n.getMonth(),Re=Ee-Ee%3;return n.setMonth(Re,1),n.setHours(0,0,0,0),n}function startOfMonth(e,t){const n=toDate(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function endOfYear(e,t){const n=toDate(e,t==null?void 0:t.in),Ee=n.getFullYear();return n.setFullYear(Ee+1,0,0),n.setHours(23,59,59,999),n}function startOfYear(e,t){const n=toDate(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function endOfWeek(e,t){var Me,De;const n=getDefaultOptions$1(),Ee=n.weekStartsOn??((De=(Me=n.locale)==null?void 0:Me.options)==null?void 0:De.weekStartsOn)??0,Re=toDate(e,t==null?void 0:t.in),Ce=Re.getDay(),Te=(Ce<Ee?-7:0)+6-(Ce-Ee);return Re.setDate(Re.getDate()+Te),Re.setHours(23,59,59,999),Re}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance$1=(e,t,n)=>{let Ee;const Re=formatDistanceLocale[e];return typeof Re=="string"?Ee=Re:t===1?Ee=Re.one:Ee=Re.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+Ee:Ee+" ago":Ee};function buildFormatLongFn(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(e,t,n,Ee)=>formatRelativeLocale[e];function buildLocalizeFn(e){return(t,n)=>{const Ee=n!=null&&n.context?String(n.context):"standalone";let Re;if(Ee==="formatting"&&e.formattingValues){const Te=e.defaultFormattingWidth||e.defaultWidth,Me=n!=null&&n.width?String(n.width):Te;Re=e.formattingValues[Me]||e.formattingValues[Te]}else{const Te=e.defaultWidth,Me=n!=null&&n.width?String(n.width):e.defaultWidth;Re=e.values[Me]||e.values[Te]}const Ce=e.argumentCallback?e.argumentCallback(t):t;return Re[Ce]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(e,t)=>{const n=Number(e),Ee=n%100;if(Ee>20||Ee<10)switch(Ee%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:e=>e-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(e){return(t,n={})=>{const Ee=n.width,Re=Ee&&e.matchPatterns[Ee]||e.matchPatterns[e.defaultMatchWidth],Ce=t.match(Re);if(!Ce)return null;const Te=Ce[0],Me=Ee&&e.parsePatterns[Ee]||e.parsePatterns[e.defaultParseWidth],De=Array.isArray(Me)?findIndex(Me,ze=>ze.test(Te)):findKey(Me,ze=>ze.test(Te));let Oe;Oe=e.valueCallback?e.valueCallback(De):De,Oe=n.valueCallback?n.valueCallback(Oe):Oe;const Be=t.slice(Te.length);return{value:Oe,rest:Be}}}function findKey(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function findIndex(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function buildMatchPatternFn(e){return(t,n={})=>{const Ee=t.match(e.matchPattern);if(!Ee)return null;const Re=Ee[0],Ce=t.match(e.parsePattern);if(!Ce)return null;let Te=e.valueCallback?e.valueCallback(Ce[0]):Ce[0];Te=n.valueCallback?n.valueCallback(Te):Te;const Me=t.slice(Re.length);return{value:Te,rest:Me}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:e=>parseInt(e,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:e=>e+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance:formatDistance$1,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(e,t){const n=toDate(e,t==null?void 0:t.in);return differenceInCalendarDays(n,startOfYear(n))+1}function getISOWeek(e,t){const n=toDate(e,t==null?void 0:t.in),Ee=+startOfISOWeek(n)-+startOfISOWeekYear(n);return Math.round(Ee/millisecondsInWeek)+1}function getWeekYear(e,t){var Be,ze,$e,He;const n=toDate(e,t==null?void 0:t.in),Ee=n.getFullYear(),Re=getDefaultOptions$1(),Ce=(t==null?void 0:t.firstWeekContainsDate)??((ze=(Be=t==null?void 0:t.locale)==null?void 0:Be.options)==null?void 0:ze.firstWeekContainsDate)??Re.firstWeekContainsDate??((He=($e=Re.locale)==null?void 0:$e.options)==null?void 0:He.firstWeekContainsDate)??1,Te=constructFrom((t==null?void 0:t.in)||e,0);Te.setFullYear(Ee+1,0,Ce),Te.setHours(0,0,0,0);const Me=startOfWeek(Te,t),De=constructFrom((t==null?void 0:t.in)||e,0);De.setFullYear(Ee,0,Ce),De.setHours(0,0,0,0);const Oe=startOfWeek(De,t);return+n>=+Me?Ee+1:+n>=+Oe?Ee:Ee-1}function startOfWeekYear(e,t){var Me,De,Oe,Be;const n=getDefaultOptions$1(),Ee=(t==null?void 0:t.firstWeekContainsDate)??((De=(Me=t==null?void 0:t.locale)==null?void 0:Me.options)==null?void 0:De.firstWeekContainsDate)??n.firstWeekContainsDate??((Be=(Oe=n.locale)==null?void 0:Oe.options)==null?void 0:Be.firstWeekContainsDate)??1,Re=getWeekYear(e,t),Ce=constructFrom((t==null?void 0:t.in)||e,0);return Ce.setFullYear(Re,0,Ee),Ce.setHours(0,0,0,0),startOfWeek(Ce,t)}function getWeek$1(e,t){const n=toDate(e,t==null?void 0:t.in),Ee=+startOfWeek(n,t)-+startOfWeekYear(n,t);return Math.round(Ee/millisecondsInWeek)+1}function addLeadingZeros(e,t){const n=e<0?"-":"",Ee=Math.abs(e).toString().padStart(t,"0");return n+Ee}const lightFormatters={y(e,t){const n=e.getFullYear(),Ee=n>0?n:1-n;return addLeadingZeros(t==="yy"?Ee%100:Ee,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):addLeadingZeros(n+1,2)},d(e,t){return addLeadingZeros(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return addLeadingZeros(e.getHours()%12||12,t.length)},H(e,t){return addLeadingZeros(e.getHours(),t.length)},m(e,t){return addLeadingZeros(e.getMinutes(),t.length)},s(e,t){return addLeadingZeros(e.getSeconds(),t.length)},S(e,t){const n=t.length,Ee=e.getMilliseconds(),Re=Math.trunc(Ee*Math.pow(10,n-3));return addLeadingZeros(Re,t.length)}},dayPeriodEnum={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(e,t,n){const Ee=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(Ee,{width:"abbreviated"});case"GGGGG":return n.era(Ee,{width:"narrow"});case"GGGG":default:return n.era(Ee,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const Ee=e.getFullYear(),Re=Ee>0?Ee:1-Ee;return n.ordinalNumber(Re,{unit:"year"})}return lightFormatters.y(e,t)},Y:function(e,t,n,Ee){const Re=getWeekYear(e,Ee),Ce=Re>0?Re:1-Re;if(t==="YY"){const Te=Ce%100;return addLeadingZeros(Te,2)}return t==="Yo"?n.ordinalNumber(Ce,{unit:"year"}):addLeadingZeros(Ce,t.length)},R:function(e,t){const n=getISOWeekYear(e);return addLeadingZeros(n,t.length)},u:function(e,t){const n=e.getFullYear();return addLeadingZeros(n,t.length)},Q:function(e,t,n){const Ee=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(Ee);case"QQ":return addLeadingZeros(Ee,2);case"Qo":return n.ordinalNumber(Ee,{unit:"quarter"});case"QQQ":return n.quarter(Ee,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(Ee,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(Ee,{width:"wide",context:"formatting"})}},q:function(e,t,n){const Ee=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(Ee);case"qq":return addLeadingZeros(Ee,2);case"qo":return n.ordinalNumber(Ee,{unit:"quarter"});case"qqq":return n.quarter(Ee,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(Ee,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(Ee,{width:"wide",context:"standalone"})}},M:function(e,t,n){const Ee=e.getMonth();switch(t){case"M":case"MM":return lightFormatters.M(e,t);case"Mo":return n.ordinalNumber(Ee+1,{unit:"month"});case"MMM":return n.month(Ee,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(Ee,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(Ee,{width:"wide",context:"formatting"})}},L:function(e,t,n){const Ee=e.getMonth();switch(t){case"L":return String(Ee+1);case"LL":return addLeadingZeros(Ee+1,2);case"Lo":return n.ordinalNumber(Ee+1,{unit:"month"});case"LLL":return n.month(Ee,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(Ee,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(Ee,{width:"wide",context:"standalone"})}},w:function(e,t,n,Ee){const Re=getWeek$1(e,Ee);return t==="wo"?n.ordinalNumber(Re,{unit:"week"}):addLeadingZeros(Re,t.length)},I:function(e,t,n){const Ee=getISOWeek(e);return t==="Io"?n.ordinalNumber(Ee,{unit:"week"}):addLeadingZeros(Ee,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):lightFormatters.d(e,t)},D:function(e,t,n){const Ee=getDayOfYear(e);return t==="Do"?n.ordinalNumber(Ee,{unit:"dayOfYear"}):addLeadingZeros(Ee,t.length)},E:function(e,t,n){const Ee=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(Ee,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(Ee,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(Ee,{width:"short",context:"formatting"});case"EEEE":default:return n.day(Ee,{width:"wide",context:"formatting"})}},e:function(e,t,n,Ee){const Re=e.getDay(),Ce=(Re-Ee.weekStartsOn+8)%7||7;switch(t){case"e":return String(Ce);case"ee":return addLeadingZeros(Ce,2);case"eo":return n.ordinalNumber(Ce,{unit:"day"});case"eee":return n.day(Re,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(Re,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(Re,{width:"short",context:"formatting"});case"eeee":default:return n.day(Re,{width:"wide",context:"formatting"})}},c:function(e,t,n,Ee){const Re=e.getDay(),Ce=(Re-Ee.weekStartsOn+8)%7||7;switch(t){case"c":return String(Ce);case"cc":return addLeadingZeros(Ce,t.length);case"co":return n.ordinalNumber(Ce,{unit:"day"});case"ccc":return n.day(Re,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(Re,{width:"narrow",context:"standalone"});case"cccccc":return n.day(Re,{width:"short",context:"standalone"});case"cccc":default:return n.day(Re,{width:"wide",context:"standalone"})}},i:function(e,t,n){const Ee=e.getDay(),Re=Ee===0?7:Ee;switch(t){case"i":return String(Re);case"ii":return addLeadingZeros(Re,t.length);case"io":return n.ordinalNumber(Re,{unit:"day"});case"iii":return n.day(Ee,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(Ee,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(Ee,{width:"short",context:"formatting"});case"iiii":default:return n.day(Ee,{width:"wide",context:"formatting"})}},a:function(e,t,n){const Re=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(Re,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(Re,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(Re,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(Re,{width:"wide",context:"formatting"})}},b:function(e,t,n){const Ee=e.getHours();let Re;switch(Ee===12?Re=dayPeriodEnum.noon:Ee===0?Re=dayPeriodEnum.midnight:Re=Ee/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(Re,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(Re,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(Re,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(Re,{width:"wide",context:"formatting"})}},B:function(e,t,n){const Ee=e.getHours();let Re;switch(Ee>=17?Re=dayPeriodEnum.evening:Ee>=12?Re=dayPeriodEnum.afternoon:Ee>=4?Re=dayPeriodEnum.morning:Re=dayPeriodEnum.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(Re,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(Re,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(Re,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let Ee=e.getHours()%12;return Ee===0&&(Ee=12),n.ordinalNumber(Ee,{unit:"hour"})}return lightFormatters.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):lightFormatters.H(e,t)},K:function(e,t,n){const Ee=e.getHours()%12;return t==="Ko"?n.ordinalNumber(Ee,{unit:"hour"}):addLeadingZeros(Ee,t.length)},k:function(e,t,n){let Ee=e.getHours();return Ee===0&&(Ee=24),t==="ko"?n.ordinalNumber(Ee,{unit:"hour"}):addLeadingZeros(Ee,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):lightFormatters.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):lightFormatters.s(e,t)},S:function(e,t){return lightFormatters.S(e,t)},X:function(e,t,n){const Ee=e.getTimezoneOffset();if(Ee===0)return"Z";switch(t){case"X":return formatTimezoneWithOptionalMinutes(Ee);case"XXXX":case"XX":return formatTimezone(Ee);case"XXXXX":case"XXX":default:return formatTimezone(Ee,":")}},x:function(e,t,n){const Ee=e.getTimezoneOffset();switch(t){case"x":return formatTimezoneWithOptionalMinutes(Ee);case"xxxx":case"xx":return formatTimezone(Ee);case"xxxxx":case"xxx":default:return formatTimezone(Ee,":")}},O:function(e,t,n){const Ee=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(Ee,":");case"OOOO":default:return"GMT"+formatTimezone(Ee,":")}},z:function(e,t,n){const Ee=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(Ee,":");case"zzzz":default:return"GMT"+formatTimezone(Ee,":")}},t:function(e,t,n){const Ee=Math.trunc(+e/1e3);return addLeadingZeros(Ee,t.length)},T:function(e,t,n){return addLeadingZeros(+e,t.length)}};function formatTimezoneShort(e,t=""){const n=e>0?"-":"+",Ee=Math.abs(e),Re=Math.trunc(Ee/60),Ce=Ee%60;return Ce===0?n+String(Re):n+String(Re)+t+addLeadingZeros(Ce,2)}function formatTimezoneWithOptionalMinutes(e,t){return e%60===0?(e>0?"-":"+")+addLeadingZeros(Math.abs(e)/60,2):formatTimezone(e,t)}function formatTimezone(e,t=""){const n=e>0?"-":"+",Ee=Math.abs(e),Re=addLeadingZeros(Math.trunc(Ee/60),2),Ce=addLeadingZeros(Ee%60,2);return n+Re+t+Ce}const dateLongFormatter=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},timeLongFormatter=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},dateTimeLongFormatter=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],Ee=n[1],Re=n[2];if(!Re)return dateLongFormatter(e,t);let Ce;switch(Ee){case"P":Ce=t.dateTime({width:"short"});break;case"PP":Ce=t.dateTime({width:"medium"});break;case"PPP":Ce=t.dateTime({width:"long"});break;case"PPPP":default:Ce=t.dateTime({width:"full"});break}return Ce.replace("{{date}}",dateLongFormatter(Ee,t)).replace("{{time}}",timeLongFormatter(Re,t))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(e){return dayOfYearTokenRE.test(e)}function isProtectedWeekYearToken(e){return weekYearTokenRE.test(e)}function warnOrThrowProtectedError(e,t,n){const Ee=message(e,t,n);if(console.warn(Ee),throwTokens.includes(e))throw new RangeError(Ee)}function message(e,t,n){const Ee=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${Ee} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp$1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp$1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp$1=/^'([^]*?)'?$/,doubleQuoteRegExp$1=/''/g,unescapedLatinCharacterRegExp$1=/[a-zA-Z]/;function format(e,t,n){var Be,ze,$e,He,Ue,Ve,We,qe;const Ee=getDefaultOptions$1(),Re=(n==null?void 0:n.locale)??Ee.locale??enUS,Ce=(n==null?void 0:n.firstWeekContainsDate)??((ze=(Be=n==null?void 0:n.locale)==null?void 0:Be.options)==null?void 0:ze.firstWeekContainsDate)??Ee.firstWeekContainsDate??((He=($e=Ee.locale)==null?void 0:$e.options)==null?void 0:He.firstWeekContainsDate)??1,Te=(n==null?void 0:n.weekStartsOn)??((Ve=(Ue=n==null?void 0:n.locale)==null?void 0:Ue.options)==null?void 0:Ve.weekStartsOn)??Ee.weekStartsOn??((qe=(We=Ee.locale)==null?void 0:We.options)==null?void 0:qe.weekStartsOn)??0,Me=toDate(e,n==null?void 0:n.in);if(!isValid$1(Me))throw new RangeError("Invalid time value");let De=t.match(longFormattingTokensRegExp$1).map(Ge=>{const Ye=Ge[0];if(Ye==="p"||Ye==="P"){const Ke=longFormatters[Ye];return Ke(Ge,Re.formatLong)}return Ge}).join("").match(formattingTokensRegExp$1).map(Ge=>{if(Ge==="''")return{isToken:!1,value:"'"};const Ye=Ge[0];if(Ye==="'")return{isToken:!1,value:cleanEscapedString$1(Ge)};if(formatters[Ye])return{isToken:!0,value:Ge};if(Ye.match(unescapedLatinCharacterRegExp$1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ye+"`");return{isToken:!1,value:Ge}});Re.localize.preprocessor&&(De=Re.localize.preprocessor(Me,De));const Oe={firstWeekContainsDate:Ce,weekStartsOn:Te,locale:Re};return De.map(Ge=>{if(!Ge.isToken)return Ge.value;const Ye=Ge.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(Ye)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(Ye))&&warnOrThrowProtectedError(Ye,t,String(e));const Ke=formatters[Ye[0]];return Ke(Me,Ye,Re.localize,Oe)}).join("")}function cleanEscapedString$1(e){const t=e.match(escapedStringRegExp$1);return t?t[1].replace(doubleQuoteRegExp$1,"'"):e}function formatDistance(e,t,n){const Ee=getDefaultOptions$1(),Re=(n==null?void 0:n.locale)??Ee.locale??enUS,Ce=2520,Te=compareAsc(e,t);if(isNaN(Te))throw new RangeError("Invalid time value");const Me=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:Te}),[De,Oe]=normalizeDates(n==null?void 0:n.in,...Te>0?[t,e]:[e,t]),Be=differenceInSeconds(Oe,De),ze=(getTimezoneOffsetInMilliseconds(Oe)-getTimezoneOffsetInMilliseconds(De))/1e3,$e=Math.round((Be-ze)/60);let He;if($e<2)return n!=null&&n.includeSeconds?Be<5?Re.formatDistance("lessThanXSeconds",5,Me):Be<10?Re.formatDistance("lessThanXSeconds",10,Me):Be<20?Re.formatDistance("lessThanXSeconds",20,Me):Be<40?Re.formatDistance("halfAMinute",0,Me):Be<60?Re.formatDistance("lessThanXMinutes",1,Me):Re.formatDistance("xMinutes",1,Me):$e===0?Re.formatDistance("lessThanXMinutes",1,Me):Re.formatDistance("xMinutes",$e,Me);if($e<45)return Re.formatDistance("xMinutes",$e,Me);if($e<90)return Re.formatDistance("aboutXHours",1,Me);if($e<minutesInDay){const Ue=Math.round($e/60);return Re.formatDistance("aboutXHours",Ue,Me)}else{if($e<Ce)return Re.formatDistance("xDays",1,Me);if($e<minutesInMonth){const Ue=Math.round($e/minutesInDay);return Re.formatDistance("xDays",Ue,Me)}else if($e<minutesInMonth*2)return He=Math.round($e/minutesInMonth),Re.formatDistance("aboutXMonths",He,Me)}if(He=differenceInMonths(Oe,De),He<12){const Ue=Math.round($e/minutesInMonth);return Re.formatDistance("xMonths",Ue,Me)}else{const Ue=He%12,Ve=Math.trunc(He/12);return Ue<3?Re.formatDistance("aboutXYears",Ve,Me):Ue<9?Re.formatDistance("overXYears",Ve,Me):Re.formatDistance("almostXYears",Ve+1,Me)}}function formatDistanceToNow(e,t){return formatDistance(e,constructNow(e),t)}function getDate(e,t){return toDate(e,t==null?void 0:t.in).getDate()}function getDay(e,t){return toDate(e,t==null?void 0:t.in).getDay()}function getDaysInMonth(e,t){const n=toDate(e,t==null?void 0:t.in),Ee=n.getFullYear(),Re=n.getMonth(),Ce=constructFrom(n,0);return Ce.setFullYear(Ee,Re+1,0),Ce.setHours(0,0,0,0),Ce.getDate()}function getDefaultOptions(){return Object.assign({},getDefaultOptions$1())}function getHours(e,t){return toDate(e,t==null?void 0:t.in).getHours()}function getISODay(e,t){const n=toDate(e,t==null?void 0:t.in).getDay();return n===0?7:n}function getMinutes(e,t){return toDate(e,t==null?void 0:t.in).getMinutes()}function getMonth(e,t){return toDate(e,t==null?void 0:t.in).getMonth()}function getSeconds(e){return toDate(e).getSeconds()}function getTime(e){return+toDate(e)}function getYear(e,t){return toDate(e,t==null?void 0:t.in).getFullYear()}function isAfter(e,t){return+toDate(e)>+toDate(t)}function isBefore(e,t){return+toDate(e)<+toDate(t)}function isEqual$1(e,t){return+toDate(e)==+toDate(t)}function transpose(e,t){const n=isConstructor(t)?new t(0):constructFrom(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}function isConstructor(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const TIMEZONE_UNIT_PRIORITY=10;class Setter{constructor(){vn(this,"subPriority",0)}validate(t,n){return!0}}class ValueSetter extends Setter{constructor(t,n,Ee,Re,Ce){super(),this.value=t,this.validateValue=n,this.setValue=Ee,this.priority=Re,Ce&&(this.subPriority=Ce)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,Ee){return this.setValue(t,n,this.value,Ee)}}class DateTimezoneSetter extends Setter{constructor(n,Ee){super();vn(this,"priority",TIMEZONE_UNIT_PRIORITY);vn(this,"subPriority",-1);this.context=n||(Re=>constructFrom(Ee,Re))}set(n,Ee){return Ee.timestampIsSet?n:constructFrom(n,transpose(n,this.context))}}class Parser{run(t,n,Ee,Re){const Ce=this.parse(t,n,Ee,Re);return Ce?{setter:new ValueSetter(Ce.value,this.validate,this.set,this.priority,this.subPriority),rest:Ce.rest}:null}validate(t,n,Ee){return!0}}class EraParser extends Parser{constructor(){super(...arguments);vn(this,"priority",140);vn(this,"incompatibleTokens",["R","u","t","T"])}parse(n,Ee,Re){switch(Ee){case"G":case"GG":case"GGG":return Re.era(n,{width:"abbreviated"})||Re.era(n,{width:"narrow"});case"GGGGG":return Re.era(n,{width:"narrow"});case"GGGG":default:return Re.era(n,{width:"wide"})||Re.era(n,{width:"abbreviated"})||Re.era(n,{width:"narrow"})}}set(n,Ee,Re){return Ee.era=Re,n.setFullYear(Re,0,1),n.setHours(0,0,0,0),n}}const numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function mapValue(e,t){return e&&{value:t(e.value),rest:e.rest}}function parseNumericPattern(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function parseTimezonePattern(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const Ee=n[1]==="+"?1:-1,Re=n[2]?parseInt(n[2],10):0,Ce=n[3]?parseInt(n[3],10):0,Te=n[5]?parseInt(n[5],10):0;return{value:Ee*(Re*millisecondsInHour+Ce*millisecondsInMinute+Te*millisecondsInSecond),rest:t.slice(n[0].length)}}function parseAnyDigitsSigned(e){return parseNumericPattern(numericPatterns.anyDigitsSigned,e)}function parseNDigits(e,t){switch(e){case 1:return parseNumericPattern(numericPatterns.singleDigit,t);case 2:return parseNumericPattern(numericPatterns.twoDigits,t);case 3:return parseNumericPattern(numericPatterns.threeDigits,t);case 4:return parseNumericPattern(numericPatterns.fourDigits,t);default:return parseNumericPattern(new RegExp("^\\d{1,"+e+"}"),t)}}function parseNDigitsSigned(e,t){switch(e){case 1:return parseNumericPattern(numericPatterns.singleDigitSigned,t);case 2:return parseNumericPattern(numericPatterns.twoDigitsSigned,t);case 3:return parseNumericPattern(numericPatterns.threeDigitsSigned,t);case 4:return parseNumericPattern(numericPatterns.fourDigitsSigned,t);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+e+"}"),t)}}function dayPeriodEnumToHours(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function normalizeTwoDigitYear(e,t){const n=t>0,Ee=n?t:1-t;let Re;if(Ee<=50)Re=e||100;else{const Ce=Ee+50,Te=Math.trunc(Ce/100)*100,Me=e>=Ce%100;Re=e+Te-(Me?100:0)}return n?Re:1-Re}function isLeapYearIndex$1(e){return e%400===0||e%4===0&&e%100!==0}class YearParser extends Parser{constructor(){super(...arguments);vn(this,"priority",130);vn(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,Ee,Re){const Ce=Te=>({year:Te,isTwoDigitYear:Ee==="yy"});switch(Ee){case"y":return mapValue(parseNDigits(4,n),Ce);case"yo":return mapValue(Re.ordinalNumber(n,{unit:"year"}),Ce);default:return mapValue(parseNDigits(Ee.length,n),Ce)}}validate(n,Ee){return Ee.isTwoDigitYear||Ee.year>0}set(n,Ee,Re){const Ce=n.getFullYear();if(Re.isTwoDigitYear){const Me=normalizeTwoDigitYear(Re.year,Ce);return n.setFullYear(Me,0,1),n.setHours(0,0,0,0),n}const Te=!("era"in Ee)||Ee.era===1?Re.year:1-Re.year;return n.setFullYear(Te,0,1),n.setHours(0,0,0,0),n}}class LocalWeekYearParser extends Parser{constructor(){super(...arguments);vn(this,"priority",130);vn(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,Ee,Re){const Ce=Te=>({year:Te,isTwoDigitYear:Ee==="YY"});switch(Ee){case"Y":return mapValue(parseNDigits(4,n),Ce);case"Yo":return mapValue(Re.ordinalNumber(n,{unit:"year"}),Ce);default:return mapValue(parseNDigits(Ee.length,n),Ce)}}validate(n,Ee){return Ee.isTwoDigitYear||Ee.year>0}set(n,Ee,Re,Ce){const Te=getWeekYear(n,Ce);if(Re.isTwoDigitYear){const De=normalizeTwoDigitYear(Re.year,Te);return n.setFullYear(De,0,Ce.firstWeekContainsDate),n.setHours(0,0,0,0),startOfWeek(n,Ce)}const Me=!("era"in Ee)||Ee.era===1?Re.year:1-Re.year;return n.setFullYear(Me,0,Ce.firstWeekContainsDate),n.setHours(0,0,0,0),startOfWeek(n,Ce)}}class ISOWeekYearParser extends Parser{constructor(){super(...arguments);vn(this,"priority",130);vn(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,Ee){return parseNDigitsSigned(Ee==="R"?4:Ee.length,n)}set(n,Ee,Re){const Ce=constructFrom(n,0);return Ce.setFullYear(Re,0,4),Ce.setHours(0,0,0,0),startOfISOWeek(Ce)}}class ExtendedYearParser extends Parser{constructor(){super(...arguments);vn(this,"priority",130);vn(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,Ee){return parseNDigitsSigned(Ee==="u"?4:Ee.length,n)}set(n,Ee,Re){return n.setFullYear(Re,0,1),n.setHours(0,0,0,0),n}}class QuarterParser extends Parser{constructor(){super(...arguments);vn(this,"priority",120);vn(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,Ee,Re){switch(Ee){case"Q":case"QQ":return parseNDigits(Ee.length,n);case"Qo":return Re.ordinalNumber(n,{unit:"quarter"});case"QQQ":return Re.quarter(n,{width:"abbreviated",context:"formatting"})||Re.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return Re.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return Re.quarter(n,{width:"wide",context:"formatting"})||Re.quarter(n,{width:"abbreviated",context:"formatting"})||Re.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,Ee){return Ee>=1&&Ee<=4}set(n,Ee,Re){return n.setMonth((Re-1)*3,1),n.setHours(0,0,0,0),n}}class StandAloneQuarterParser extends Parser{constructor(){super(...arguments);vn(this,"priority",120);vn(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,Ee,Re){switch(Ee){case"q":case"qq":return parseNDigits(Ee.length,n);case"qo":return Re.ordinalNumber(n,{unit:"quarter"});case"qqq":return Re.quarter(n,{width:"abbreviated",context:"standalone"})||Re.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return Re.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return Re.quarter(n,{width:"wide",context:"standalone"})||Re.quarter(n,{width:"abbreviated",context:"standalone"})||Re.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,Ee){return Ee>=1&&Ee<=4}set(n,Ee,Re){return n.setMonth((Re-1)*3,1),n.setHours(0,0,0,0),n}}class MonthParser extends Parser{constructor(){super(...arguments);vn(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);vn(this,"priority",110)}parse(n,Ee,Re){const Ce=Te=>Te-1;switch(Ee){case"M":return mapValue(parseNumericPattern(numericPatterns.month,n),Ce);case"MM":return mapValue(parseNDigits(2,n),Ce);case"Mo":return mapValue(Re.ordinalNumber(n,{unit:"month"}),Ce);case"MMM":return Re.month(n,{width:"abbreviated",context:"formatting"})||Re.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return Re.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return Re.month(n,{width:"wide",context:"formatting"})||Re.month(n,{width:"abbreviated",context:"formatting"})||Re.month(n,{width:"narrow",context:"formatting"})}}validate(n,Ee){return Ee>=0&&Ee<=11}set(n,Ee,Re){return n.setMonth(Re,1),n.setHours(0,0,0,0),n}}class StandAloneMonthParser extends Parser{constructor(){super(...arguments);vn(this,"priority",110);vn(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,Ee,Re){const Ce=Te=>Te-1;switch(Ee){case"L":return mapValue(parseNumericPattern(numericPatterns.month,n),Ce);case"LL":return mapValue(parseNDigits(2,n),Ce);case"Lo":return mapValue(Re.ordinalNumber(n,{unit:"month"}),Ce);case"LLL":return Re.month(n,{width:"abbreviated",context:"standalone"})||Re.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return Re.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return Re.month(n,{width:"wide",context:"standalone"})||Re.month(n,{width:"abbreviated",context:"standalone"})||Re.month(n,{width:"narrow",context:"standalone"})}}validate(n,Ee){return Ee>=0&&Ee<=11}set(n,Ee,Re){return n.setMonth(Re,1),n.setHours(0,0,0,0),n}}function setWeek(e,t,n){const Ee=toDate(e,n==null?void 0:n.in),Re=getWeek$1(Ee,n)-t;return Ee.setDate(Ee.getDate()-Re*7),toDate(Ee,n==null?void 0:n.in)}class LocalWeekParser extends Parser{constructor(){super(...arguments);vn(this,"priority",100);vn(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,Ee,Re){switch(Ee){case"w":return parseNumericPattern(numericPatterns.week,n);case"wo":return Re.ordinalNumber(n,{unit:"week"});default:return parseNDigits(Ee.length,n)}}validate(n,Ee){return Ee>=1&&Ee<=53}set(n,Ee,Re,Ce){return startOfWeek(setWeek(n,Re,Ce),Ce)}}function setISOWeek(e,t,n){const Ee=toDate(e,n==null?void 0:n.in),Re=getISOWeek(Ee,n)-t;return Ee.setDate(Ee.getDate()-Re*7),Ee}class ISOWeekParser extends Parser{constructor(){super(...arguments);vn(this,"priority",100);vn(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,Ee,Re){switch(Ee){case"I":return parseNumericPattern(numericPatterns.week,n);case"Io":return Re.ordinalNumber(n,{unit:"week"});default:return parseNDigits(Ee.length,n)}}validate(n,Ee){return Ee>=1&&Ee<=53}set(n,Ee,Re){return startOfISOWeek(setISOWeek(n,Re))}}const DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31];class DateParser extends Parser{constructor(){super(...arguments);vn(this,"priority",90);vn(this,"subPriority",1);vn(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,Ee,Re){switch(Ee){case"d":return parseNumericPattern(numericPatterns.date,n);case"do":return Re.ordinalNumber(n,{unit:"date"});default:return parseNDigits(Ee.length,n)}}validate(n,Ee){const Re=n.getFullYear(),Ce=isLeapYearIndex$1(Re),Te=n.getMonth();return Ce?Ee>=1&&Ee<=DAYS_IN_MONTH_LEAP_YEAR[Te]:Ee>=1&&Ee<=DAYS_IN_MONTH[Te]}set(n,Ee,Re){return n.setDate(Re),n.setHours(0,0,0,0),n}}class DayOfYearParser extends Parser{constructor(){super(...arguments);vn(this,"priority",90);vn(this,"subpriority",1);vn(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,Ee,Re){switch(Ee){case"D":case"DD":return parseNumericPattern(numericPatterns.dayOfYear,n);case"Do":return Re.ordinalNumber(n,{unit:"date"});default:return parseNDigits(Ee.length,n)}}validate(n,Ee){const Re=n.getFullYear();return isLeapYearIndex$1(Re)?Ee>=1&&Ee<=366:Ee>=1&&Ee<=365}set(n,Ee,Re){return n.setMonth(0,Re),n.setHours(0,0,0,0),n}}function setDay(e,t,n){var ze,$e,He,Ue;const Ee=getDefaultOptions$1(),Re=(n==null?void 0:n.weekStartsOn)??(($e=(ze=n==null?void 0:n.locale)==null?void 0:ze.options)==null?void 0:$e.weekStartsOn)??Ee.weekStartsOn??((Ue=(He=Ee.locale)==null?void 0:He.options)==null?void 0:Ue.weekStartsOn)??0,Ce=toDate(e,n==null?void 0:n.in),Te=Ce.getDay(),De=(t%7+7)%7,Oe=7-Re,Be=t<0||t>6?t-(Te+Oe)%7:(De+Oe)%7-(Te+Oe)%7;return addDays(Ce,Be,n)}class DayParser extends Parser{constructor(){super(...arguments);vn(this,"priority",90);vn(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,Ee,Re){switch(Ee){case"E":case"EE":case"EEE":return Re.day(n,{width:"abbreviated",context:"formatting"})||Re.day(n,{width:"short",context:"formatting"})||Re.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return Re.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return Re.day(n,{width:"short",context:"formatting"})||Re.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return Re.day(n,{width:"wide",context:"formatting"})||Re.day(n,{width:"abbreviated",context:"formatting"})||Re.day(n,{width:"short",context:"formatting"})||Re.day(n,{width:"narrow",context:"formatting"})}}validate(n,Ee){return Ee>=0&&Ee<=6}set(n,Ee,Re,Ce){return n=setDay(n,Re,Ce),n.setHours(0,0,0,0),n}}class LocalDayParser extends Parser{constructor(){super(...arguments);vn(this,"priority",90);vn(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,Ee,Re,Ce){const Te=Me=>{const De=Math.floor((Me-1)/7)*7;return(Me+Ce.weekStartsOn+6)%7+De};switch(Ee){case"e":case"ee":return mapValue(parseNDigits(Ee.length,n),Te);case"eo":return mapValue(Re.ordinalNumber(n,{unit:"day"}),Te);case"eee":return Re.day(n,{width:"abbreviated",context:"formatting"})||Re.day(n,{width:"short",context:"formatting"})||Re.day(n,{width:"narrow",context:"formatting"});case"eeeee":return Re.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return Re.day(n,{width:"short",context:"formatting"})||Re.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return Re.day(n,{width:"wide",context:"formatting"})||Re.day(n,{width:"abbreviated",context:"formatting"})||Re.day(n,{width:"short",context:"formatting"})||Re.day(n,{width:"narrow",context:"formatting"})}}validate(n,Ee){return Ee>=0&&Ee<=6}set(n,Ee,Re,Ce){return n=setDay(n,Re,Ce),n.setHours(0,0,0,0),n}}class StandAloneLocalDayParser extends Parser{constructor(){super(...arguments);vn(this,"priority",90);vn(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,Ee,Re,Ce){const Te=Me=>{const De=Math.floor((Me-1)/7)*7;return(Me+Ce.weekStartsOn+6)%7+De};switch(Ee){case"c":case"cc":return mapValue(parseNDigits(Ee.length,n),Te);case"co":return mapValue(Re.ordinalNumber(n,{unit:"day"}),Te);case"ccc":return Re.day(n,{width:"abbreviated",context:"standalone"})||Re.day(n,{width:"short",context:"standalone"})||Re.day(n,{width:"narrow",context:"standalone"});case"ccccc":return Re.day(n,{width:"narrow",context:"standalone"});case"cccccc":return Re.day(n,{width:"short",context:"standalone"})||Re.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return Re.day(n,{width:"wide",context:"standalone"})||Re.day(n,{width:"abbreviated",context:"standalone"})||Re.day(n,{width:"short",context:"standalone"})||Re.day(n,{width:"narrow",context:"standalone"})}}validate(n,Ee){return Ee>=0&&Ee<=6}set(n,Ee,Re,Ce){return n=setDay(n,Re,Ce),n.setHours(0,0,0,0),n}}function setISODay(e,t,n){const Ee=toDate(e,n==null?void 0:n.in),Re=getISODay(Ee,n),Ce=t-Re;return addDays(Ee,Ce,n)}class ISODayParser extends Parser{constructor(){super(...arguments);vn(this,"priority",90);vn(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,Ee,Re){const Ce=Te=>Te===0?7:Te;switch(Ee){case"i":case"ii":return parseNDigits(Ee.length,n);case"io":return Re.ordinalNumber(n,{unit:"day"});case"iii":return mapValue(Re.day(n,{width:"abbreviated",context:"formatting"})||Re.day(n,{width:"short",context:"formatting"})||Re.day(n,{width:"narrow",context:"formatting"}),Ce);case"iiiii":return mapValue(Re.day(n,{width:"narrow",context:"formatting"}),Ce);case"iiiiii":return mapValue(Re.day(n,{width:"short",context:"formatting"})||Re.day(n,{width:"narrow",context:"formatting"}),Ce);case"iiii":default:return mapValue(Re.day(n,{width:"wide",context:"formatting"})||Re.day(n,{width:"abbreviated",context:"formatting"})||Re.day(n,{width:"short",context:"formatting"})||Re.day(n,{width:"narrow",context:"formatting"}),Ce)}}validate(n,Ee){return Ee>=1&&Ee<=7}set(n,Ee,Re){return n=setISODay(n,Re),n.setHours(0,0,0,0),n}}class AMPMParser extends Parser{constructor(){super(...arguments);vn(this,"priority",80);vn(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,Ee,Re){switch(Ee){case"a":case"aa":case"aaa":return Re.dayPeriod(n,{width:"abbreviated",context:"formatting"})||Re.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return Re.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return Re.dayPeriod(n,{width:"wide",context:"formatting"})||Re.dayPeriod(n,{width:"abbreviated",context:"formatting"})||Re.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,Ee,Re){return n.setHours(dayPeriodEnumToHours(Re),0,0,0),n}}class AMPMMidnightParser extends Parser{constructor(){super(...arguments);vn(this,"priority",80);vn(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,Ee,Re){switch(Ee){case"b":case"bb":case"bbb":return Re.dayPeriod(n,{width:"abbreviated",context:"formatting"})||Re.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return Re.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return Re.dayPeriod(n,{width:"wide",context:"formatting"})||Re.dayPeriod(n,{width:"abbreviated",context:"formatting"})||Re.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,Ee,Re){return n.setHours(dayPeriodEnumToHours(Re),0,0,0),n}}class DayPeriodParser extends Parser{constructor(){super(...arguments);vn(this,"priority",80);vn(this,"incompatibleTokens",["a","b","t","T"])}parse(n,Ee,Re){switch(Ee){case"B":case"BB":case"BBB":return Re.dayPeriod(n,{width:"abbreviated",context:"formatting"})||Re.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return Re.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return Re.dayPeriod(n,{width:"wide",context:"formatting"})||Re.dayPeriod(n,{width:"abbreviated",context:"formatting"})||Re.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,Ee,Re){return n.setHours(dayPeriodEnumToHours(Re),0,0,0),n}}class Hour1to12Parser extends Parser{constructor(){super(...arguments);vn(this,"priority",70);vn(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,Ee,Re){switch(Ee){case"h":return parseNumericPattern(numericPatterns.hour12h,n);case"ho":return Re.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(Ee.length,n)}}validate(n,Ee){return Ee>=1&&Ee<=12}set(n,Ee,Re){const Ce=n.getHours()>=12;return Ce&&Re<12?n.setHours(Re+12,0,0,0):!Ce&&Re===12?n.setHours(0,0,0,0):n.setHours(Re,0,0,0),n}}class Hour0to23Parser extends Parser{constructor(){super(...arguments);vn(this,"priority",70);vn(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,Ee,Re){switch(Ee){case"H":return parseNumericPattern(numericPatterns.hour23h,n);case"Ho":return Re.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(Ee.length,n)}}validate(n,Ee){return Ee>=0&&Ee<=23}set(n,Ee,Re){return n.setHours(Re,0,0,0),n}}class Hour0To11Parser extends Parser{constructor(){super(...arguments);vn(this,"priority",70);vn(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,Ee,Re){switch(Ee){case"K":return parseNumericPattern(numericPatterns.hour11h,n);case"Ko":return Re.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(Ee.length,n)}}validate(n,Ee){return Ee>=0&&Ee<=11}set(n,Ee,Re){return n.getHours()>=12&&Re<12?n.setHours(Re+12,0,0,0):n.setHours(Re,0,0,0),n}}class Hour1To24Parser extends Parser{constructor(){super(...arguments);vn(this,"priority",70);vn(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,Ee,Re){switch(Ee){case"k":return parseNumericPattern(numericPatterns.hour24h,n);case"ko":return Re.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(Ee.length,n)}}validate(n,Ee){return Ee>=1&&Ee<=24}set(n,Ee,Re){const Ce=Re<=24?Re%24:Re;return n.setHours(Ce,0,0,0),n}}class MinuteParser extends Parser{constructor(){super(...arguments);vn(this,"priority",60);vn(this,"incompatibleTokens",["t","T"])}parse(n,Ee,Re){switch(Ee){case"m":return parseNumericPattern(numericPatterns.minute,n);case"mo":return Re.ordinalNumber(n,{unit:"minute"});default:return parseNDigits(Ee.length,n)}}validate(n,Ee){return Ee>=0&&Ee<=59}set(n,Ee,Re){return n.setMinutes(Re,0,0),n}}class SecondParser extends Parser{constructor(){super(...arguments);vn(this,"priority",50);vn(this,"incompatibleTokens",["t","T"])}parse(n,Ee,Re){switch(Ee){case"s":return parseNumericPattern(numericPatterns.second,n);case"so":return Re.ordinalNumber(n,{unit:"second"});default:return parseNDigits(Ee.length,n)}}validate(n,Ee){return Ee>=0&&Ee<=59}set(n,Ee,Re){return n.setSeconds(Re,0),n}}class FractionOfSecondParser extends Parser{constructor(){super(...arguments);vn(this,"priority",30);vn(this,"incompatibleTokens",["t","T"])}parse(n,Ee){const Re=Ce=>Math.trunc(Ce*Math.pow(10,-Ee.length+3));return mapValue(parseNDigits(Ee.length,n),Re)}set(n,Ee,Re){return n.setMilliseconds(Re),n}}class ISOTimezoneWithZParser extends Parser{constructor(){super(...arguments);vn(this,"priority",10);vn(this,"incompatibleTokens",["t","T","x"])}parse(n,Ee){switch(Ee){case"X":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,n);case"XX":return parseTimezonePattern(timezonePatterns.basic,n);case"XXXX":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,n);case"XXXXX":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,n);case"XXX":default:return parseTimezonePattern(timezonePatterns.extended,n)}}set(n,Ee,Re){return Ee.timestampIsSet?n:constructFrom(n,n.getTime()-getTimezoneOffsetInMilliseconds(n)-Re)}}class ISOTimezoneParser extends Parser{constructor(){super(...arguments);vn(this,"priority",10);vn(this,"incompatibleTokens",["t","T","X"])}parse(n,Ee){switch(Ee){case"x":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,n);case"xx":return parseTimezonePattern(timezonePatterns.basic,n);case"xxxx":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,n);case"xxxxx":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,n);case"xxx":default:return parseTimezonePattern(timezonePatterns.extended,n)}}set(n,Ee,Re){return Ee.timestampIsSet?n:constructFrom(n,n.getTime()-getTimezoneOffsetInMilliseconds(n)-Re)}}class TimestampSecondsParser extends Parser{constructor(){super(...arguments);vn(this,"priority",40);vn(this,"incompatibleTokens","*")}parse(n){return parseAnyDigitsSigned(n)}set(n,Ee,Re){return[constructFrom(n,Re*1e3),{timestampIsSet:!0}]}}class TimestampMillisecondsParser extends Parser{constructor(){super(...arguments);vn(this,"priority",20);vn(this,"incompatibleTokens","*")}parse(n){return parseAnyDigitsSigned(n)}set(n,Ee,Re){return[constructFrom(n,Re),{timestampIsSet:!0}]}}const parsers={G:new EraParser,y:new YearParser,Y:new LocalWeekYearParser,R:new ISOWeekYearParser,u:new ExtendedYearParser,Q:new QuarterParser,q:new StandAloneQuarterParser,M:new MonthParser,L:new StandAloneMonthParser,w:new LocalWeekParser,I:new ISOWeekParser,d:new DateParser,D:new DayOfYearParser,E:new DayParser,e:new LocalDayParser,c:new StandAloneLocalDayParser,i:new ISODayParser,a:new AMPMParser,b:new AMPMMidnightParser,B:new DayPeriodParser,h:new Hour1to12Parser,H:new Hour0to23Parser,K:new Hour0To11Parser,k:new Hour1To24Parser,m:new MinuteParser,s:new SecondParser,S:new FractionOfSecondParser,X:new ISOTimezoneWithZParser,x:new ISOTimezoneParser,t:new TimestampSecondsParser,T:new TimestampMillisecondsParser},formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse(e,t,n,Ee){var We,qe,Ge,Ye,Ke,Xe,Ze,er;const Re=()=>constructFrom((Ee==null?void 0:Ee.in)||n,NaN),Ce=getDefaultOptions(),Te=(Ee==null?void 0:Ee.locale)??Ce.locale??enUS,Me=(Ee==null?void 0:Ee.firstWeekContainsDate)??((qe=(We=Ee==null?void 0:Ee.locale)==null?void 0:We.options)==null?void 0:qe.firstWeekContainsDate)??Ce.firstWeekContainsDate??((Ye=(Ge=Ce.locale)==null?void 0:Ge.options)==null?void 0:Ye.firstWeekContainsDate)??1,De=(Ee==null?void 0:Ee.weekStartsOn)??((Xe=(Ke=Ee==null?void 0:Ee.locale)==null?void 0:Ke.options)==null?void 0:Xe.weekStartsOn)??Ce.weekStartsOn??((er=(Ze=Ce.locale)==null?void 0:Ze.options)==null?void 0:er.weekStartsOn)??0;if(!t)return e?Re():toDate(n,Ee==null?void 0:Ee.in);const Oe={firstWeekContainsDate:Me,weekStartsOn:De,locale:Te},Be=[new DateTimezoneSetter(Ee==null?void 0:Ee.in,n)],ze=t.match(longFormattingTokensRegExp).map(St=>{const ar=St[0];if(ar in longFormatters){const hr=longFormatters[ar];return hr(St,Te.formatLong)}return St}).join("").match(formattingTokensRegExp),$e=[];for(let St of ze){const ar=St[0],hr=parsers[ar];if(hr){const{incompatibleTokens:ur}=hr;if(Array.isArray(ur)){const vr=$e.find(yr=>ur.includes(yr.token)||yr.token===ar);if(vr)throw new RangeError(`The format string mustn't contain \`${vr.fullToken}\` and \`${St}\` at the same time`)}else if(hr.incompatibleTokens==="*"&&$e.length>0)throw new RangeError(`The format string mustn't contain \`${St}\` and any other token at the same time`);$e.push({token:ar,fullToken:St});const dr=hr.run(e,St,Te.match,Oe);if(!dr)return Re();Be.push(dr.setter),e=dr.rest}else{if(ar.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ar+"`");if(St==="''"?St="'":ar==="'"&&(St=cleanEscapedString(St)),e.indexOf(St)===0)e=e.slice(St.length);else return Re()}}if(e.length>0&&notWhitespaceRegExp.test(e))return Re();const He=Be.map(St=>St.priority).sort((St,ar)=>ar-St).filter((St,ar,hr)=>hr.indexOf(St)===ar).map(St=>Be.filter(ar=>ar.priority===St).sort((ar,hr)=>hr.subPriority-ar.subPriority)).map(St=>St[0]);let Ue=toDate(n,Ee==null?void 0:Ee.in);if(isNaN(+Ue))return Re();const Ve={};for(const St of He){if(!St.validate(Ue,Oe))return Re();const ar=St.set(Ue,Ve,Oe);Array.isArray(ar)?(Ue=ar[0],Object.assign(Ve,ar[1])):Ue=ar}return Ue}function cleanEscapedString(e){return e.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}function isSameMonth$1(e,t,n){const[Ee,Re]=normalizeDates(n==null?void 0:n.in,e,t);return Ee.getFullYear()===Re.getFullYear()&&Ee.getMonth()===Re.getMonth()}function isSameQuarter$1(e,t,n){const[Ee,Re]=normalizeDates(n==null?void 0:n.in,e,t);return+startOfQuarter(Ee)==+startOfQuarter(Re)}function isSameYear$1(e,t,n){const[Ee,Re]=normalizeDates(n==null?void 0:n.in,e,t);return Ee.getFullYear()===Re.getFullYear()}function isWithinInterval(e,t,n){const Ee=+toDate(e,n==null?void 0:n.in),[Re,Ce]=[+toDate(t.start,n==null?void 0:n.in),+toDate(t.end,n==null?void 0:n.in)].sort((Te,Me)=>Te-Me);return Ee>=Re&&Ee<=Ce}function subDays(e,t,n){return addDays(e,-1,n)}function parseISO(e,t){const n=()=>constructFrom(t==null?void 0:t.in,NaN),Re=splitDateString(e);let Ce;if(Re.date){const Oe=parseYear(Re.date,2);Ce=parseDate$1(Oe.restDateString,Oe.year)}if(!Ce||isNaN(+Ce))return n();const Te=+Ce;let Me=0,De;if(Re.time&&(Me=parseTime(Re.time),isNaN(Me)))return n();if(Re.timezone){if(De=parseTimezone(Re.timezone),isNaN(De))return n()}else{const Oe=new Date(Te+Me),Be=toDate(0,t==null?void 0:t.in);return Be.setFullYear(Oe.getUTCFullYear(),Oe.getUTCMonth(),Oe.getUTCDate()),Be.setHours(Oe.getUTCHours(),Oe.getUTCMinutes(),Oe.getUTCSeconds(),Oe.getUTCMilliseconds()),Be}return toDate(Te+Me+De,t==null?void 0:t.in)}const patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function splitDateString(e){const t={},n=e.split(patterns.dateTimeDelimiter);let Ee;if(n.length>2)return t;if(/:/.test(n[0])?Ee=n[0]:(t.date=n[0],Ee=n[1],patterns.timeZoneDelimiter.test(t.date)&&(t.date=e.split(patterns.timeZoneDelimiter)[0],Ee=e.substr(t.date.length,e.length))),Ee){const Re=patterns.timezone.exec(Ee);Re?(t.time=Ee.replace(Re[1],""),t.timezone=Re[1]):t.time=Ee}return t}function parseYear(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),Ee=e.match(n);if(!Ee)return{year:NaN,restDateString:""};const Re=Ee[1]?parseInt(Ee[1]):null,Ce=Ee[2]?parseInt(Ee[2]):null;return{year:Ce===null?Re:Ce*100,restDateString:e.slice((Ee[1]||Ee[2]).length)}}function parseDate$1(e,t){if(t===null)return new Date(NaN);const n=e.match(dateRegex);if(!n)return new Date(NaN);const Ee=!!n[4],Re=parseDateUnit(n[1]),Ce=parseDateUnit(n[2])-1,Te=parseDateUnit(n[3]),Me=parseDateUnit(n[4]),De=parseDateUnit(n[5])-1;if(Ee)return validateWeekDate(t,Me,De)?dayOfISOWeekYear(t,Me,De):new Date(NaN);{const Oe=new Date(0);return!validateDate(t,Ce,Te)||!validateDayOfYearDate(t,Re)?new Date(NaN):(Oe.setUTCFullYear(t,Ce,Math.max(Re,Te)),Oe)}}function parseDateUnit(e){return e?parseInt(e):1}function parseTime(e){const t=e.match(timeRegex);if(!t)return NaN;const n=parseTimeUnit(t[1]),Ee=parseTimeUnit(t[2]),Re=parseTimeUnit(t[3]);return validateTime(n,Ee,Re)?n*millisecondsInHour+Ee*millisecondsInMinute+Re*1e3:NaN}function parseTimeUnit(e){return e&&parseFloat(e.replace(",","."))||0}function parseTimezone(e){if(e==="Z")return 0;const t=e.match(timezoneRegex);if(!t)return 0;const n=t[1]==="+"?-1:1,Ee=parseInt(t[2]),Re=t[3]&&parseInt(t[3])||0;return validateTimezone(Ee,Re)?n*(Ee*millisecondsInHour+Re*millisecondsInMinute):NaN}function dayOfISOWeekYear(e,t,n){const Ee=new Date(0);Ee.setUTCFullYear(e,0,4);const Re=Ee.getUTCDay()||7,Ce=(t-1)*7+n+1-Re;return Ee.setUTCDate(Ee.getUTCDate()+Ce),Ee}const daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(e){return e%400===0||e%4===0&&e%100!==0}function validateDate(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(daysInMonths[t]||(isLeapYearIndex(e)?29:28))}function validateDayOfYearDate(e,t){return t>=1&&t<=(isLeapYearIndex(e)?366:365)}function validateWeekDate(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function validateTime(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function validateTimezone(e,t){return t>=0&&t<=59}function setMonth(e,t,n){const Ee=toDate(e,n==null?void 0:n.in),Re=Ee.getFullYear(),Ce=Ee.getDate(),Te=constructFrom(e,0);Te.setFullYear(Re,t,15),Te.setHours(0,0,0,0);const Me=getDaysInMonth(Te);return Ee.setMonth(t,Math.min(Ce,Me)),Ee}function setHours(e,t,n){const Ee=toDate(e,n==null?void 0:n.in);return Ee.setHours(t),Ee}function setMinutes(e,t,n){const Ee=toDate(e,n==null?void 0:n.in);return Ee.setMinutes(t),Ee}function setQuarter(e,t,n){const Ee=toDate(e,n==null?void 0:n.in),Re=Math.trunc(Ee.getMonth()/3)+1,Ce=t-Re;return setMonth(Ee,Ee.getMonth()+Ce*3)}function setSeconds(e,t,n){const Ee=toDate(e,n==null?void 0:n.in);return Ee.setSeconds(t),Ee}function setYear(e,t,n){const Ee=toDate(e,n==null?void 0:n.in);return isNaN(+Ee)?constructFrom(e,NaN):(Ee.setFullYear(t),Ee)}function subMonths(e,t,n){return addMonths(e,-t,n)}function subQuarters(e,t,n){return addQuarters(e,-1,n)}function subWeeks(e,t,n){return addWeeks(e,-1,n)}function subYears(e,t,n){return addYears(e,-t,n)}function hasWindow(){return typeof window<"u"}function getNodeName(e){return isNode(e)?(e.nodeName||"").toLowerCase():"#document"}function getWindow(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function getDocumentElement(e){var t;return(t=(isNode(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function isNode(e){return hasWindow()?e instanceof Node||e instanceof getWindow(e).Node:!1}function isElement(e){return hasWindow()?e instanceof Element||e instanceof getWindow(e).Element:!1}function isHTMLElement$1(e){return hasWindow()?e instanceof HTMLElement||e instanceof getWindow(e).HTMLElement:!1}function isShadowRoot(e){return!hasWindow()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof getWindow(e).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(e){const{overflow:t,overflowX:n,overflowY:Ee,display:Re}=getComputedStyle$1(e);return/auto|scroll|overlay|hidden|clip/.test(t+Ee+n)&&!invalidOverflowDisplayValues.has(Re)}const tableElements=new Set(["table","td","th"]);function isTableElement(e){return tableElements.has(getNodeName(e))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(e){return topLayerSelectors.some(t=>{try{return e.matches(t)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(e){const t=isWebKit(),n=isElement(e)?getComputedStyle$1(e):e;return transformProperties.some(Ee=>n[Ee]?n[Ee]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||willChangeValues.some(Ee=>(n.willChange||"").includes(Ee))||containValues.some(Ee=>(n.contain||"").includes(Ee))}function getContainingBlock(e){let t=getParentNode(e);for(;isHTMLElement$1(t)&&!isLastTraversableNode(t);){if(isContainingBlock(t))return t;if(isTopLayer(t))return null;t=getParentNode(t)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(e){return lastTraversableNodeNames.has(getNodeName(e))}function getComputedStyle$1(e){return getWindow(e).getComputedStyle(e)}function getNodeScroll(e){return isElement(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function getParentNode(e){if(getNodeName(e)==="html")return e;const t=e.assignedSlot||e.parentNode||isShadowRoot(e)&&e.host||getDocumentElement(e);return isShadowRoot(t)?t.host:t}function getNearestOverflowAncestor(e){const t=getParentNode(e);return isLastTraversableNode(t)?e.ownerDocument?e.ownerDocument.body:e.body:isHTMLElement$1(t)&&isOverflowElement(t)?t:getNearestOverflowAncestor(t)}function getOverflowAncestors(e,t,n){var Ee;t===void 0&&(t=[]),n===void 0&&(n=!0);const Re=getNearestOverflowAncestor(e),Ce=Re===((Ee=e.ownerDocument)==null?void 0:Ee.body),Te=getWindow(Re);if(Ce){const Me=getFrameElement(Te);return t.concat(Te,Te.visualViewport||[],isOverflowElement(Re)?Re:[],Me&&n?getOverflowAncestors(Me):[])}return t.concat(Re,getOverflowAncestors(Re,[],n))}function getFrameElement(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=e=>({x:e,y:e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(e,t,n){return max(e,min(t,n))}function evaluate(e,t){return typeof e=="function"?e(t):e}function getSide$1(e){return e.split("-")[0]}function getAlignment(e){return e.split("-")[1]}function getOppositeAxis(e){return e==="x"?"y":"x"}function getAxisLength(e){return e==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(e){return yAxisSides.has(getSide$1(e))?"y":"x"}function getAlignmentAxis(e){return getOppositeAxis(getSideAxis(e))}function getAlignmentSides(e,t,n){n===void 0&&(n=!1);const Ee=getAlignment(e),Re=getAlignmentAxis(e),Ce=getAxisLength(Re);let Te=Re==="x"?Ee===(n?"end":"start")?"right":"left":Ee==="start"?"bottom":"top";return t.reference[Ce]>t.floating[Ce]&&(Te=getOppositePlacement(Te)),[Te,getOppositePlacement(Te)]}function getExpandedPlacements(e){const t=getOppositePlacement(e);return[getOppositeAlignmentPlacement(e),t,getOppositeAlignmentPlacement(t)]}function getOppositeAlignmentPlacement(e){return e.replace(/start|end/g,t=>oppositeAlignmentMap[t])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(e,t,n){switch(e){case"top":case"bottom":return n?t?rlPlacement:lrPlacement:t?lrPlacement:rlPlacement;case"left":case"right":return t?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(e,t,n,Ee){const Re=getAlignment(e);let Ce=getSideList(getSide$1(e),n==="start",Ee);return Re&&(Ce=Ce.map(Te=>Te+"-"+Re),t&&(Ce=Ce.concat(Ce.map(getOppositeAlignmentPlacement)))),Ce}function getOppositePlacement(e){return e.replace(/left|right|bottom|top/g,t=>oppositeSideMap[t])}function expandPaddingObject(e){return{top:0,right:0,bottom:0,left:0,...e}}function getPaddingObject(e){return typeof e!="number"?expandPaddingObject(e):{top:e,right:e,bottom:e,left:e}}function rectToClientRect(e){const{x:t,y:n,width:Ee,height:Re}=e;return{width:Ee,height:Re,top:n,left:t,right:t+Ee,bottom:n+Re,x:t,y:n}}var isClient$1=typeof document<"u",noop$2=function(){},index$1=isClient$1?reactExports.useLayoutEffect:noop$2;const SafeReact$1={...React$4},useInsertionEffect=SafeReact$1.useInsertionEffect,useSafeInsertionEffect=useInsertionEffect||(e=>e());function useEffectEvent(e){const t=reactExports.useRef(()=>{});return useSafeInsertionEffect(()=>{t.current=e}),reactExports.useCallback(function(){for(var n=arguments.length,Ee=new Array(n),Re=0;Re<n;Re++)Ee[Re]=arguments[Re];return t.current==null?void 0:t.current(...Ee)},[])}function computeCoordsFromPlacement(e,t,n){let{reference:Ee,floating:Re}=e;const Ce=getSideAxis(t),Te=getAlignmentAxis(t),Me=getAxisLength(Te),De=getSide$1(t),Oe=Ce==="y",Be=Ee.x+Ee.width/2-Re.width/2,ze=Ee.y+Ee.height/2-Re.height/2,$e=Ee[Me]/2-Re[Me]/2;let He;switch(De){case"top":He={x:Be,y:Ee.y-Re.height};break;case"bottom":He={x:Be,y:Ee.y+Ee.height};break;case"right":He={x:Ee.x+Ee.width,y:ze};break;case"left":He={x:Ee.x-Re.width,y:ze};break;default:He={x:Ee.x,y:Ee.y}}switch(getAlignment(t)){case"start":He[Te]-=$e*(n&&Oe?-1:1);break;case"end":He[Te]+=$e*(n&&Oe?-1:1);break}return He}const computePosition$1=async(e,t,n)=>{const{placement:Ee="bottom",strategy:Re="absolute",middleware:Ce=[],platform:Te}=n,Me=Ce.filter(Boolean),De=await(Te.isRTL==null?void 0:Te.isRTL(t));let Oe=await Te.getElementRects({reference:e,floating:t,strategy:Re}),{x:Be,y:ze}=computeCoordsFromPlacement(Oe,Ee,De),$e=Ee,He={},Ue=0;for(let Ve=0;Ve<Me.length;Ve++){const{name:We,fn:qe}=Me[Ve],{x:Ge,y:Ye,data:Ke,reset:Xe}=await qe({x:Be,y:ze,initialPlacement:Ee,placement:$e,strategy:Re,middlewareData:He,rects:Oe,platform:Te,elements:{reference:e,floating:t}});Be=Ge??Be,ze=Ye??ze,He={...He,[We]:{...He[We],...Ke}},Xe&&Ue<=50&&(Ue++,typeof Xe=="object"&&(Xe.placement&&($e=Xe.placement),Xe.rects&&(Oe=Xe.rects===!0?await Te.getElementRects({reference:e,floating:t,strategy:Re}):Xe.rects),{x:Be,y:ze}=computeCoordsFromPlacement(Oe,$e,De)),Ve=-1)}return{x:Be,y:ze,placement:$e,strategy:Re,middlewareData:He}};async function detectOverflow(e,t){var n;t===void 0&&(t={});const{x:Ee,y:Re,platform:Ce,rects:Te,elements:Me,strategy:De}=e,{boundary:Oe="clippingAncestors",rootBoundary:Be="viewport",elementContext:ze="floating",altBoundary:$e=!1,padding:He=0}=evaluate(t,e),Ue=getPaddingObject(He),We=Me[$e?ze==="floating"?"reference":"floating":ze],qe=rectToClientRect(await Ce.getClippingRect({element:(n=await(Ce.isElement==null?void 0:Ce.isElement(We)))==null||n?We:We.contextElement||await(Ce.getDocumentElement==null?void 0:Ce.getDocumentElement(Me.floating)),boundary:Oe,rootBoundary:Be,strategy:De})),Ge=ze==="floating"?{x:Ee,y:Re,width:Te.floating.width,height:Te.floating.height}:Te.reference,Ye=await(Ce.getOffsetParent==null?void 0:Ce.getOffsetParent(Me.floating)),Ke=await(Ce.isElement==null?void 0:Ce.isElement(Ye))?await(Ce.getScale==null?void 0:Ce.getScale(Ye))||{x:1,y:1}:{x:1,y:1},Xe=rectToClientRect(Ce.convertOffsetParentRelativeRectToViewportRelativeRect?await Ce.convertOffsetParentRelativeRectToViewportRelativeRect({elements:Me,rect:Ge,offsetParent:Ye,strategy:De}):Ge);return{top:(qe.top-Xe.top+Ue.top)/Ke.y,bottom:(Xe.bottom-qe.bottom+Ue.bottom)/Ke.y,left:(qe.left-Xe.left+Ue.left)/Ke.x,right:(Xe.right-qe.right+Ue.right)/Ke.x}}const arrow$4=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:Ee,placement:Re,rects:Ce,platform:Te,elements:Me,middlewareData:De}=t,{element:Oe,padding:Be=0}=evaluate(e,t)||{};if(Oe==null)return{};const ze=getPaddingObject(Be),$e={x:n,y:Ee},He=getAlignmentAxis(Re),Ue=getAxisLength(He),Ve=await Te.getDimensions(Oe),We=He==="y",qe=We?"top":"left",Ge=We?"bottom":"right",Ye=We?"clientHeight":"clientWidth",Ke=Ce.reference[Ue]+Ce.reference[He]-$e[He]-Ce.floating[Ue],Xe=$e[He]-Ce.reference[He],Ze=await(Te.getOffsetParent==null?void 0:Te.getOffsetParent(Oe));let er=Ze?Ze[Ye]:0;(!er||!await(Te.isElement==null?void 0:Te.isElement(Ze)))&&(er=Me.floating[Ye]||Ce.floating[Ue]);const St=Ke/2-Xe/2,ar=er/2-Ve[Ue]/2-1,hr=min(ze[qe],ar),ur=min(ze[Ge],ar),dr=hr,vr=er-Ve[Ue]-ur,yr=er/2-Ve[Ue]/2+St,br=clamp(dr,yr,vr),lr=!De.arrow&&getAlignment(Re)!=null&&yr!==br&&Ce.reference[Ue]/2-(yr<dr?hr:ur)-Ve[Ue]/2<0,cr=lr?yr<dr?yr-dr:yr-vr:0;return{[He]:$e[He]+cr,data:{[He]:br,centerOffset:yr-br-cr,...lr&&{alignmentOffset:cr}},reset:lr}}}),flip$2=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,Ee;const{placement:Re,middlewareData:Ce,rects:Te,initialPlacement:Me,platform:De,elements:Oe}=t,{mainAxis:Be=!0,crossAxis:ze=!0,fallbackPlacements:$e,fallbackStrategy:He="bestFit",fallbackAxisSideDirection:Ue="none",flipAlignment:Ve=!0,...We}=evaluate(e,t);if((n=Ce.arrow)!=null&&n.alignmentOffset)return{};const qe=getSide$1(Re),Ge=getSideAxis(Me),Ye=getSide$1(Me)===Me,Ke=await(De.isRTL==null?void 0:De.isRTL(Oe.floating)),Xe=$e||(Ye||!Ve?[getOppositePlacement(Me)]:getExpandedPlacements(Me)),Ze=Ue!=="none";!$e&&Ze&&Xe.push(...getOppositeAxisPlacements(Me,Ve,Ue,Ke));const er=[Me,...Xe],St=await detectOverflow(t,We),ar=[];let hr=((Ee=Ce.flip)==null?void 0:Ee.overflows)||[];if(Be&&ar.push(St[qe]),ze){const yr=getAlignmentSides(Re,Te,Ke);ar.push(St[yr[0]],St[yr[1]])}if(hr=[...hr,{placement:Re,overflows:ar}],!ar.every(yr=>yr<=0)){var ur,dr;const yr=(((ur=Ce.flip)==null?void 0:ur.index)||0)+1,br=er[yr];if(br&&(!(ze==="alignment"?Ge!==getSideAxis(br):!1)||hr.every(rr=>getSideAxis(rr.placement)===Ge?rr.overflows[0]>0:!0)))return{data:{index:yr,overflows:hr},reset:{placement:br}};let lr=(dr=hr.filter(cr=>cr.overflows[0]<=0).sort((cr,rr)=>cr.overflows[1]-rr.overflows[1])[0])==null?void 0:dr.placement;if(!lr)switch(He){case"bestFit":{var vr;const cr=(vr=hr.filter(rr=>{if(Ze){const pr=getSideAxis(rr.placement);return pr===Ge||pr==="y"}return!0}).map(rr=>[rr.placement,rr.overflows.filter(pr=>pr>0).reduce((pr,mr)=>pr+mr,0)]).sort((rr,pr)=>rr[1]-pr[1])[0])==null?void 0:vr[0];cr&&(lr=cr);break}case"initialPlacement":lr=Me;break}if(Re!==lr)return{reset:{placement:lr}}}return{}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(e,t){const{placement:n,platform:Ee,elements:Re}=e,Ce=await(Ee.isRTL==null?void 0:Ee.isRTL(Re.floating)),Te=getSide$1(n),Me=getAlignment(n),De=getSideAxis(n)==="y",Oe=originSides.has(Te)?-1:1,Be=Ce&&De?-1:1,ze=evaluate(t,e);let{mainAxis:$e,crossAxis:He,alignmentAxis:Ue}=typeof ze=="number"?{mainAxis:ze,crossAxis:0,alignmentAxis:null}:{mainAxis:ze.mainAxis||0,crossAxis:ze.crossAxis||0,alignmentAxis:ze.alignmentAxis};return Me&&typeof Ue=="number"&&(He=Me==="end"?Ue*-1:Ue),De?{x:He*Be,y:$e*Oe}:{x:$e*Oe,y:He*Be}}const offset$2=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,Ee;const{x:Re,y:Ce,placement:Te,middlewareData:Me}=t,De=await convertValueToCoords(t,e);return Te===((n=Me.offset)==null?void 0:n.placement)&&(Ee=Me.arrow)!=null&&Ee.alignmentOffset?{}:{x:Re+De.x,y:Ce+De.y,data:{...De,placement:Te}}}}};function getCssDimensions(e){const t=getComputedStyle$1(e);let n=parseFloat(t.width)||0,Ee=parseFloat(t.height)||0;const Re=isHTMLElement$1(e),Ce=Re?e.offsetWidth:n,Te=Re?e.offsetHeight:Ee,Me=round(n)!==Ce||round(Ee)!==Te;return Me&&(n=Ce,Ee=Te),{width:n,height:Ee,$:Me}}function unwrapElement(e){return isElement(e)?e:e.contextElement}function getScale(e){const t=unwrapElement(e);if(!isHTMLElement$1(t))return createCoords(1);const n=t.getBoundingClientRect(),{width:Ee,height:Re,$:Ce}=getCssDimensions(t);let Te=(Ce?round(n.width):n.width)/Ee,Me=(Ce?round(n.height):n.height)/Re;return(!Te||!Number.isFinite(Te))&&(Te=1),(!Me||!Number.isFinite(Me))&&(Me=1),{x:Te,y:Me}}const noOffsets=createCoords(0);function getVisualOffsets(e){const t=getWindow(e);return!isWebKit()||!t.visualViewport?noOffsets:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function shouldAddVisualOffsets(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==getWindow(e)?!1:t}function getBoundingClientRect(e,t,n,Ee){t===void 0&&(t=!1),n===void 0&&(n=!1);const Re=e.getBoundingClientRect(),Ce=unwrapElement(e);let Te=createCoords(1);t&&(Ee?isElement(Ee)&&(Te=getScale(Ee)):Te=getScale(e));const Me=shouldAddVisualOffsets(Ce,n,Ee)?getVisualOffsets(Ce):createCoords(0);let De=(Re.left+Me.x)/Te.x,Oe=(Re.top+Me.y)/Te.y,Be=Re.width/Te.x,ze=Re.height/Te.y;if(Ce){const $e=getWindow(Ce),He=Ee&&isElement(Ee)?getWindow(Ee):Ee;let Ue=$e,Ve=getFrameElement(Ue);for(;Ve&&Ee&&He!==Ue;){const We=getScale(Ve),qe=Ve.getBoundingClientRect(),Ge=getComputedStyle$1(Ve),Ye=qe.left+(Ve.clientLeft+parseFloat(Ge.paddingLeft))*We.x,Ke=qe.top+(Ve.clientTop+parseFloat(Ge.paddingTop))*We.y;De*=We.x,Oe*=We.y,Be*=We.x,ze*=We.y,De+=Ye,Oe+=Ke,Ue=getWindow(Ve),Ve=getFrameElement(Ue)}}return rectToClientRect({width:Be,height:ze,x:De,y:Oe})}function getWindowScrollBarX(e,t){const n=getNodeScroll(e).scrollLeft;return t?t.left+n:getBoundingClientRect(getDocumentElement(e)).left+n}function getHTMLOffset(e,t){const n=e.getBoundingClientRect(),Ee=n.left+t.scrollLeft-getWindowScrollBarX(e,n),Re=n.top+t.scrollTop;return{x:Ee,y:Re}}function convertOffsetParentRelativeRectToViewportRelativeRect(e){let{elements:t,rect:n,offsetParent:Ee,strategy:Re}=e;const Ce=Re==="fixed",Te=getDocumentElement(Ee),Me=t?isTopLayer(t.floating):!1;if(Ee===Te||Me&&Ce)return n;let De={scrollLeft:0,scrollTop:0},Oe=createCoords(1);const Be=createCoords(0),ze=isHTMLElement$1(Ee);if((ze||!ze&&!Ce)&&((getNodeName(Ee)!=="body"||isOverflowElement(Te))&&(De=getNodeScroll(Ee)),isHTMLElement$1(Ee))){const He=getBoundingClientRect(Ee);Oe=getScale(Ee),Be.x=He.x+Ee.clientLeft,Be.y=He.y+Ee.clientTop}const $e=Te&&!ze&&!Ce?getHTMLOffset(Te,De):createCoords(0);return{width:n.width*Oe.x,height:n.height*Oe.y,x:n.x*Oe.x-De.scrollLeft*Oe.x+Be.x+$e.x,y:n.y*Oe.y-De.scrollTop*Oe.y+Be.y+$e.y}}function getClientRects(e){return Array.from(e.getClientRects())}function getDocumentRect(e){const t=getDocumentElement(e),n=getNodeScroll(e),Ee=e.ownerDocument.body,Re=max(t.scrollWidth,t.clientWidth,Ee.scrollWidth,Ee.clientWidth),Ce=max(t.scrollHeight,t.clientHeight,Ee.scrollHeight,Ee.clientHeight);let Te=-n.scrollLeft+getWindowScrollBarX(e);const Me=-n.scrollTop;return getComputedStyle$1(Ee).direction==="rtl"&&(Te+=max(t.clientWidth,Ee.clientWidth)-Re),{width:Re,height:Ce,x:Te,y:Me}}const SCROLLBAR_MAX=25;function getViewportRect(e,t){const n=getWindow(e),Ee=getDocumentElement(e),Re=n.visualViewport;let Ce=Ee.clientWidth,Te=Ee.clientHeight,Me=0,De=0;if(Re){Ce=Re.width,Te=Re.height;const Be=isWebKit();(!Be||Be&&t==="fixed")&&(Me=Re.offsetLeft,De=Re.offsetTop)}const Oe=getWindowScrollBarX(Ee);if(Oe<=0){const Be=Ee.ownerDocument,ze=Be.body,$e=getComputedStyle(ze),He=Be.compatMode==="CSS1Compat"&&parseFloat($e.marginLeft)+parseFloat($e.marginRight)||0,Ue=Math.abs(Ee.clientWidth-ze.clientWidth-He);Ue<=SCROLLBAR_MAX&&(Ce-=Ue)}else Oe<=SCROLLBAR_MAX&&(Ce+=Oe);return{width:Ce,height:Te,x:Me,y:De}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(e,t){const n=getBoundingClientRect(e,!0,t==="fixed"),Ee=n.top+e.clientTop,Re=n.left+e.clientLeft,Ce=isHTMLElement$1(e)?getScale(e):createCoords(1),Te=e.clientWidth*Ce.x,Me=e.clientHeight*Ce.y,De=Re*Ce.x,Oe=Ee*Ce.y;return{width:Te,height:Me,x:De,y:Oe}}function getClientRectFromClippingAncestor(e,t,n){let Ee;if(t==="viewport")Ee=getViewportRect(e,n);else if(t==="document")Ee=getDocumentRect(getDocumentElement(e));else if(isElement(t))Ee=getInnerBoundingClientRect(t,n);else{const Re=getVisualOffsets(e);Ee={x:t.x-Re.x,y:t.y-Re.y,width:t.width,height:t.height}}return rectToClientRect(Ee)}function hasFixedPositionAncestor(e,t){const n=getParentNode(e);return n===t||!isElement(n)||isLastTraversableNode(n)?!1:getComputedStyle$1(n).position==="fixed"||hasFixedPositionAncestor(n,t)}function getClippingElementAncestors(e,t){const n=t.get(e);if(n)return n;let Ee=getOverflowAncestors(e,[],!1).filter(Me=>isElement(Me)&&getNodeName(Me)!=="body"),Re=null;const Ce=getComputedStyle$1(e).position==="fixed";let Te=Ce?getParentNode(e):e;for(;isElement(Te)&&!isLastTraversableNode(Te);){const Me=getComputedStyle$1(Te),De=isContainingBlock(Te);!De&&Me.position==="fixed"&&(Re=null),(Ce?!De&&!Re:!De&&Me.position==="static"&&!!Re&&absoluteOrFixed.has(Re.position)||isOverflowElement(Te)&&!De&&hasFixedPositionAncestor(e,Te))?Ee=Ee.filter(Be=>Be!==Te):Re=Me,Te=getParentNode(Te)}return t.set(e,Ee),Ee}function getClippingRect(e){let{element:t,boundary:n,rootBoundary:Ee,strategy:Re}=e;const Te=[...n==="clippingAncestors"?isTopLayer(t)?[]:getClippingElementAncestors(t,this._c):[].concat(n),Ee],Me=Te[0],De=Te.reduce((Oe,Be)=>{const ze=getClientRectFromClippingAncestor(t,Be,Re);return Oe.top=max(ze.top,Oe.top),Oe.right=min(ze.right,Oe.right),Oe.bottom=min(ze.bottom,Oe.bottom),Oe.left=max(ze.left,Oe.left),Oe},getClientRectFromClippingAncestor(t,Me,Re));return{width:De.right-De.left,height:De.bottom-De.top,x:De.left,y:De.top}}function getDimensions(e){const{width:t,height:n}=getCssDimensions(e);return{width:t,height:n}}function getRectRelativeToOffsetParent(e,t,n){const Ee=isHTMLElement$1(t),Re=getDocumentElement(t),Ce=n==="fixed",Te=getBoundingClientRect(e,!0,Ce,t);let Me={scrollLeft:0,scrollTop:0};const De=createCoords(0);function Oe(){De.x=getWindowScrollBarX(Re)}if(Ee||!Ee&&!Ce)if((getNodeName(t)!=="body"||isOverflowElement(Re))&&(Me=getNodeScroll(t)),Ee){const He=getBoundingClientRect(t,!0,Ce,t);De.x=He.x+t.clientLeft,De.y=He.y+t.clientTop}else Re&&Oe();Ce&&!Ee&&Re&&Oe();const Be=Re&&!Ee&&!Ce?getHTMLOffset(Re,Me):createCoords(0),ze=Te.left+Me.scrollLeft-De.x-Be.x,$e=Te.top+Me.scrollTop-De.y-Be.y;return{x:ze,y:$e,width:Te.width,height:Te.height}}function isStaticPositioned(e){return getComputedStyle$1(e).position==="static"}function getTrueOffsetParent(e,t){if(!isHTMLElement$1(e)||getComputedStyle$1(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return getDocumentElement(e)===n&&(n=n.ownerDocument.body),n}function getOffsetParent(e,t){const n=getWindow(e);if(isTopLayer(e))return n;if(!isHTMLElement$1(e)){let Re=getParentNode(e);for(;Re&&!isLastTraversableNode(Re);){if(isElement(Re)&&!isStaticPositioned(Re))return Re;Re=getParentNode(Re)}return n}let Ee=getTrueOffsetParent(e,t);for(;Ee&&isTableElement(Ee)&&isStaticPositioned(Ee);)Ee=getTrueOffsetParent(Ee,t);return Ee&&isLastTraversableNode(Ee)&&isStaticPositioned(Ee)&&!isContainingBlock(Ee)?n:Ee||getContainingBlock(e)||n}const getElementRects=async function(e){const t=this.getOffsetParent||getOffsetParent,n=this.getDimensions,Ee=await n(e.floating);return{reference:getRectRelativeToOffsetParent(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:Ee.width,height:Ee.height}}};function isRTL(e){return getComputedStyle$1(e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function observeMove(e,t){let n=null,Ee;const Re=getDocumentElement(e);function Ce(){var Me;clearTimeout(Ee),(Me=n)==null||Me.disconnect(),n=null}function Te(Me,De){Me===void 0&&(Me=!1),De===void 0&&(De=1),Ce();const Oe=e.getBoundingClientRect(),{left:Be,top:ze,width:$e,height:He}=Oe;if(Me||t(),!$e||!He)return;const Ue=floor(ze),Ve=floor(Re.clientWidth-(Be+$e)),We=floor(Re.clientHeight-(ze+He)),qe=floor(Be),Ye={rootMargin:-Ue+"px "+-Ve+"px "+-We+"px "+-qe+"px",threshold:max(0,min(1,De))||1};let Ke=!0;function Xe(Ze){const er=Ze[0].intersectionRatio;if(er!==De){if(!Ke)return Te();er?Te(!1,er):Ee=setTimeout(()=>{Te(!1,1e-7)},1e3)}er===1&&!rectsAreEqual(Oe,e.getBoundingClientRect())&&Te(),Ke=!1}try{n=new IntersectionObserver(Xe,{...Ye,root:Re.ownerDocument})}catch{n=new IntersectionObserver(Xe,Ye)}n.observe(e)}return Te(!0),Ce}function autoUpdate(e,t,n,Ee){Ee===void 0&&(Ee={});const{ancestorScroll:Re=!0,ancestorResize:Ce=!0,elementResize:Te=typeof ResizeObserver=="function",layoutShift:Me=typeof IntersectionObserver=="function",animationFrame:De=!1}=Ee,Oe=unwrapElement(e),Be=Re||Ce?[...Oe?getOverflowAncestors(Oe):[],...getOverflowAncestors(t)]:[];Be.forEach(qe=>{Re&&qe.addEventListener("scroll",n,{passive:!0}),Ce&&qe.addEventListener("resize",n)});const ze=Oe&&Me?observeMove(Oe,n):null;let $e=-1,He=null;Te&&(He=new ResizeObserver(qe=>{let[Ge]=qe;Ge&&Ge.target===Oe&&He&&(He.unobserve(t),cancelAnimationFrame($e),$e=requestAnimationFrame(()=>{var Ye;(Ye=He)==null||Ye.observe(t)})),n()}),Oe&&!De&&He.observe(Oe),He.observe(t));let Ue,Ve=De?getBoundingClientRect(e):null;De&&We();function We(){const qe=getBoundingClientRect(e);Ve&&!rectsAreEqual(Ve,qe)&&n(),Ve=qe,Ue=requestAnimationFrame(We)}return n(),()=>{var qe;Be.forEach(Ge=>{Re&&Ge.removeEventListener("scroll",n),Ce&&Ge.removeEventListener("resize",n)}),ze==null||ze(),(qe=He)==null||qe.disconnect(),He=null,De&&cancelAnimationFrame(Ue)}}const offset$1=offset$2,flip$1=flip$2,arrow$3=arrow$4,computePosition=(e,t,n)=>{const Ee=new Map,Re={platform,...n},Ce={...Re.platform,_c:Ee};return computePosition$1(e,t,{...Re,platform:Ce})};var isClient=typeof document<"u",noop$1=function(){},index=isClient?reactExports.useLayoutEffect:noop$1;function deepEqual$2(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,Ee,Re;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(Ee=n;Ee--!==0;)if(!deepEqual$2(e[Ee],t[Ee]))return!1;return!0}if(Re=Object.keys(e),n=Re.length,n!==Object.keys(t).length)return!1;for(Ee=n;Ee--!==0;)if(!{}.hasOwnProperty.call(t,Re[Ee]))return!1;for(Ee=n;Ee--!==0;){const Ce=Re[Ee];if(!(Ce==="_owner"&&e.$$typeof)&&!deepEqual$2(e[Ce],t[Ce]))return!1}return!0}return e!==e&&t!==t}function getDPR(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(e,t){const n=getDPR(e);return Math.round(t*n)/n}function useLatestRef(e){const t=reactExports.useRef(e);return index(()=>{t.current=e}),t}function useFloating$1(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:Ee=[],platform:Re,elements:{reference:Ce,floating:Te}={},transform:Me=!0,whileElementsMounted:De,open:Oe}=e,[Be,ze]=reactExports.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[$e,He]=reactExports.useState(Ee);deepEqual$2($e,Ee)||He(Ee);const[Ue,Ve]=reactExports.useState(null),[We,qe]=reactExports.useState(null),Ge=reactExports.useCallback(rr=>{rr!==Ze.current&&(Ze.current=rr,Ve(rr))},[]),Ye=reactExports.useCallback(rr=>{rr!==er.current&&(er.current=rr,qe(rr))},[]),Ke=Ce||Ue,Xe=Te||We,Ze=reactExports.useRef(null),er=reactExports.useRef(null),St=reactExports.useRef(Be),ar=De!=null,hr=useLatestRef(De),ur=useLatestRef(Re),dr=useLatestRef(Oe),vr=reactExports.useCallback(()=>{if(!Ze.current||!er.current)return;const rr={placement:t,strategy:n,middleware:$e};ur.current&&(rr.platform=ur.current),computePosition(Ze.current,er.current,rr).then(pr=>{const mr={...pr,isPositioned:dr.current!==!1};yr.current&&!deepEqual$2(St.current,mr)&&(St.current=mr,reactDomExports.flushSync(()=>{ze(mr)}))})},[$e,t,n,ur,dr]);index(()=>{Oe===!1&&St.current.isPositioned&&(St.current.isPositioned=!1,ze(rr=>({...rr,isPositioned:!1})))},[Oe]);const yr=reactExports.useRef(!1);index(()=>(yr.current=!0,()=>{yr.current=!1}),[]),index(()=>{if(Ke&&(Ze.current=Ke),Xe&&(er.current=Xe),Ke&&Xe){if(hr.current)return hr.current(Ke,Xe,vr);vr()}},[Ke,Xe,vr,hr,ar]);const br=reactExports.useMemo(()=>({reference:Ze,floating:er,setReference:Ge,setFloating:Ye}),[Ge,Ye]),lr=reactExports.useMemo(()=>({reference:Ke,floating:Xe}),[Ke,Xe]),cr=reactExports.useMemo(()=>{const rr={position:n,left:0,top:0};if(!lr.floating)return rr;const pr=roundByDPR(lr.floating,Be.x),mr=roundByDPR(lr.floating,Be.y);return Me?{...rr,transform:"translate("+pr+"px, "+mr+"px)",...getDPR(lr.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:pr,top:mr}},[n,Me,lr.floating,Be.x,Be.y]);return reactExports.useMemo(()=>({...Be,update:vr,refs:br,elements:lr,floatingStyles:cr}),[Be,vr,br,lr,cr])}const arrow$1=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:Ee,padding:Re}=typeof e=="function"?e(n):e;return Ee&&t(Ee)?Ee.current!=null?arrow$3({element:Ee.current,padding:Re}).fn(n):{}:Ee?arrow$3({element:Ee,padding:Re}).fn(n):{}}}},offset=(e,t)=>({...offset$1(e),options:[e,t]}),flip=(e,t)=>({...flip$1(e),options:[e,t]}),arrow$2=(e,t)=>({...arrow$1(e),options:[e,t]}),SafeReact={...React$4};let serverHandoffComplete=!1,count=0;const genId=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+count++;function useFloatingId(){const[e,t]=reactExports.useState(()=>serverHandoffComplete?genId():void 0);return index$1(()=>{e==null&&t(genId())},[]),reactExports.useEffect(()=>{serverHandoffComplete=!0},[]),e}const useReactId=SafeReact.useId,useId=useReactId||useFloatingId,FloatingArrow=reactExports.forwardRef(function(t,n){const{context:{placement:Ee,elements:{floating:Re},middlewareData:{arrow:Ce,shift:Te}},width:Me=14,height:De=7,tipRadius:Oe=0,strokeWidth:Be=0,staticOffset:ze,stroke:$e,d:He,style:{transform:Ue,...Ve}={},...We}=t,qe=useId(),[Ge,Ye]=reactExports.useState(!1);if(index$1(()=>{if(!Re)return;getComputedStyle$1(Re).direction==="rtl"&&Ye(!0)},[Re]),!Re)return null;const[Ke,Xe]=Ee.split("-"),Ze=Ke==="top"||Ke==="bottom";let er=ze;(Ze&&Te!=null&&Te.x||!Ze&&Te!=null&&Te.y)&&(er=null);const St=Be*2,ar=St/2,hr=Me/2*(Oe/-8+1),ur=De/2*Oe/4,dr=!!He,vr=er&&Xe==="end"?"bottom":"top";let yr=er&&Xe==="end"?"right":"left";er&&Ge&&(yr=Xe==="end"?"left":"right");const br=(Ce==null?void 0:Ce.x)!=null?er||Ce.x:"",lr=(Ce==null?void 0:Ce.y)!=null?er||Ce.y:"",cr=He||"M0,0"+(" H"+Me)+(" L"+(Me-hr)+","+(De-ur))+(" Q"+Me/2+","+De+" "+hr+","+(De-ur))+" Z",rr={top:dr?"rotate(180deg)":"",left:dr?"rotate(90deg)":"rotate(-90deg)",bottom:dr?"":"rotate(180deg)",right:dr?"rotate(-90deg)":"rotate(90deg)"}[Ke];return jsxRuntimeExports.jsxs("svg",{...We,"aria-hidden":!0,ref:n,width:dr?Me:Me+St,height:Me,viewBox:"0 0 "+Me+" "+(De>Me?De:Me),style:{position:"absolute",pointerEvents:"none",[yr]:br,[vr]:lr,[Ke]:Ze||dr?"100%":"calc(100% - "+St/2+"px)",transform:[rr,Ue].filter(pr=>!!pr).join(" "),...Ve},children:[St>0&&jsxRuntimeExports.jsx("path",{clipPath:"url(#"+qe+")",fill:"none",stroke:$e,strokeWidth:St+(He?0:1),d:cr}),jsxRuntimeExports.jsx("path",{stroke:St&&!He?We.fill:"none",d:cr}),jsxRuntimeExports.jsx("clipPath",{id:qe,children:jsxRuntimeExports.jsx("rect",{x:-ar,y:ar*(dr?-1:1),width:Me+St,height:Me})})]})});function createEventEmitter(){const e=new Map;return{emit(t,n){var Ee;(Ee=e.get(t))==null||Ee.forEach(Re=>Re(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var Ee;(Ee=e.get(t))==null||Ee.delete(n)}}}const FloatingNodeContext=reactExports.createContext(null),FloatingTreeContext=reactExports.createContext(null),useFloatingParentNodeId=()=>{var e;return((e=reactExports.useContext(FloatingNodeContext))==null?void 0:e.id)||null},useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function useFloatingRootContext(e){const{open:t=!1,onOpenChange:n,elements:Ee}=e,Re=useId(),Ce=reactExports.useRef({}),[Te]=reactExports.useState(()=>createEventEmitter()),Me=useFloatingParentNodeId()!=null,[De,Oe]=reactExports.useState(Ee.reference),Be=useEffectEvent((He,Ue,Ve)=>{Ce.current.openEvent=He?Ue:void 0,Te.emit("openchange",{open:He,event:Ue,reason:Ve,nested:Me}),n==null||n(He,Ue,Ve)}),ze=reactExports.useMemo(()=>({setPositionReference:Oe}),[]),$e=reactExports.useMemo(()=>({reference:De||Ee.reference||null,floating:Ee.floating||null,domReference:Ee.reference}),[De,Ee.reference,Ee.floating]);return reactExports.useMemo(()=>({dataRef:Ce,open:t,onOpenChange:Be,elements:$e,events:Te,floatingId:Re,refs:ze}),[t,Be,$e,Te,Re,ze])}function useFloating(e){e===void 0&&(e={});const{nodeId:t}=e,n=useFloatingRootContext({...e,elements:{reference:null,floating:null,...e.elements}}),Ee=e.rootContext||n,Re=Ee.elements,[Ce,Te]=reactExports.useState(null),[Me,De]=reactExports.useState(null),Be=(Re==null?void 0:Re.domReference)||Ce,ze=reactExports.useRef(null),$e=useFloatingTree();index$1(()=>{Be&&(ze.current=Be)},[Be]);const He=useFloating$1({...e,elements:{...Re,...Me&&{reference:Me}}}),Ue=reactExports.useCallback(Ye=>{const Ke=isElement(Ye)?{getBoundingClientRect:()=>Ye.getBoundingClientRect(),getClientRects:()=>Ye.getClientRects(),contextElement:Ye}:Ye;De(Ke),He.refs.setReference(Ke)},[He.refs]),Ve=reactExports.useCallback(Ye=>{(isElement(Ye)||Ye===null)&&(ze.current=Ye,Te(Ye)),(isElement(He.refs.reference.current)||He.refs.reference.current===null||Ye!==null&&!isElement(Ye))&&He.refs.setReference(Ye)},[He.refs]),We=reactExports.useMemo(()=>({...He.refs,setReference:Ve,setPositionReference:Ue,domReference:ze}),[He.refs,Ve,Ue]),qe=reactExports.useMemo(()=>({...He.elements,domReference:Be}),[He.elements,Be]),Ge=reactExports.useMemo(()=>({...He,...Ee,refs:We,elements:qe,nodeId:t}),[He,We,qe,t,Ee]);return index$1(()=>{Ee.dataRef.current.floatingContext=Ge;const Ye=$e==null?void 0:$e.nodesRef.current.find(Ke=>Ke.id===t);Ye&&(Ye.context=Ge)}),reactExports.useMemo(()=>({...He,context:Ge,refs:We,elements:qe}),[He,We,qe,Ge])}/*!
  react-datepicker v9.0.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var _extendStatics=function(t,n){return _extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ee,Re){Ee.__proto__=Re}||function(Ee,Re){for(var Ce in Re)Object.prototype.hasOwnProperty.call(Re,Ce)&&(Ee[Ce]=Re[Ce])},_extendStatics(t,n)};function __extends$1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_extendStatics(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var _assign=function(){return _assign=Object.assign||function(n){for(var Ee,Re=1,Ce=arguments.length;Re<Ce;Re++){Ee=arguments[Re];for(var Te in Ee)Object.prototype.hasOwnProperty.call(Ee,Te)&&(n[Te]=Ee[Te])}return n},_assign.apply(this,arguments)};function __spreadArray(e,t,n){if(n||arguments.length===2)for(var Ee=0,Re=t.length,Ce;Ee<Re;Ee++)(Ce||!(Ee in t))&&(Ce||(Ce=Array.prototype.slice.call(t,0,Ee)),Ce[Ee]=t[Ee]);return e.concat(Ce||Array.prototype.slice.call(t))}typeof SuppressedError=="function"&&SuppressedError;var CalendarContainer=function(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,Ee=e.showTime,Re=Ee===void 0?!1:Ee,Ce=e.className,Te=e.children,Me=e.inline,De=n?"Choose Time":"Choose Date".concat(Re?" and Time":"");return React4.createElement("div",{className:Ce,"aria-label":De,role:Me?void 0:"dialog","aria-modal":Me?void 0:"true"},Te)},useDetectClickOutside=function(e,t){var n=reactExports.useRef(null),Ee=reactExports.useRef(e);reactExports.useEffect(function(){Ee.current=e},[e]);var Re=reactExports.useCallback(function(Ce){var Te,Me=Ce.composed&&Ce.composedPath&&Ce.composedPath().find(function(De){return De instanceof Node})||Ce.target;n.current&&!n.current.contains(Me)&&(t&&Me instanceof HTMLElement&&Me.classList.contains(t)||(Te=Ee.current)===null||Te===void 0||Te.call(Ee,Ce))},[t]);return reactExports.useEffect(function(){return document.addEventListener("mousedown",Re),function(){document.removeEventListener("mousedown",Re)}},[Re]),n},ClickOutsideWrapper=function(e){var t=e.children,n=e.onClickOutside,Ee=e.className,Re=e.containerRef,Ce=e.style,Te=e.ignoreClass,Me=useDetectClickOutside(n,Te);return React4.createElement("div",{className:Ee,style:Ce,ref:function(De){Me.current=De,Re&&(Re.current=De)}},t)},dateFnsTz=null,dateFnsTzLoadAttempted=!1;function getDateFnsTz(){if(dateFnsTzLoadAttempted)return dateFnsTz;dateFnsTzLoadAttempted=!0;try{dateFnsTz=require("date-fns-tz")}catch{dateFnsTz=null}return dateFnsTz}function toZonedTime(e,t){if(!t)return e;var n=getDateFnsTz();return n?n.toZonedTime(e,t):e}function fromZonedTime(e,t){if(!t)return e;var n=getDateFnsTz();return n?n.fromZonedTime(e,t):e}var KeyType;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(KeyType||(KeyType={}));function getLocaleScope(){var e=typeof window<"u"?window:globalThis;return e}var DEFAULT_YEAR_ITEM_NUMBER=12;function newDate(e){if(e==null)return new Date;var t=typeof e=="string"?parseISO(e):toDate(e);return isValid(t)?t:new Date}function parseDate(e,t,n,Ee,Re){Re===void 0&&(Re=newDate());for(var Ce=getLocaleObject(n)||getLocaleObject(getDefaultLocale()),Te=Array.isArray(t)?t:[t],Me=0,De=Te;Me<De.length;Me++){var Oe=De[Me],Be=parse(e,Oe,Re,{locale:Ce});if(isValid(Be)&&(!Ee||e===formatDate(Be,Oe,n)))return Be}return null}function parseDateForNavigation(e,t){if(t===void 0&&(t=newDate()),!e)return null;var n=e.match(/\b(1\d{3}|2\d{3})\b/);if(!n||!n[1])return null;var Ee=parseInt(n[1],10),Re=e.match(/(?:^|[/\-\s])?(0?[1-9]|1[0-2])(?:[/\-\s]|$)/),Ce=Re&&Re[1]?parseInt(Re[1],10)-1:t.getMonth();return new Date(Ee,Ce,1)}function isValid(e){return isValid$1(e)}function formatDate(e,t,n){if(n==="en")return format(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var Ee=n?getLocaleObject(n):void 0;return n&&!Ee&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),Ee=Ee||getLocaleObject(getDefaultLocale()),format(e,t,{locale:Ee,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function safeDateFormat(e,t){var n=t.dateFormat,Ee=t.locale,Re=Array.isArray(n)&&n.length>0?n[0]:n;return e&&formatDate(e,Re,Ee)||""}var DATE_RANGE_SEPARATOR=" - ";function safeDateRangeFormat(e,t,n){if(!e&&!t)return"";var Ee=e?safeDateFormat(e,n):"",Re=t?safeDateFormat(t,n):"",Ce=n.rangeSeparator||DATE_RANGE_SEPARATOR;return"".concat(Ee).concat(Ce).concat(Re)}function safeMultipleDatesFormat(e,t){if(!(e!=null&&e.length))return"";var n=e[0]?safeDateFormat(e[0],t):"";if(e.length===1)return n;if(e.length===2&&e[1]){var Ee=safeDateFormat(e[1],t);return"".concat(n,", ").concat(Ee)}var Re=e.length-1;return"".concat(n," (+").concat(Re,")")}function setTime(e,t){var n=t.hour,Ee=n===void 0?0:n,Re=t.minute,Ce=Re===void 0?0:Re,Te=t.second,Me=Te===void 0?0:Te;return setHours(setMinutes(setSeconds(e,Me),Ce),Ee)}function getWeek(e){return getISOWeek(e)}function getDayOfWeekCode(e,t){return formatDate(e,"ddd",t)}function getStartOfDay(e){return startOfDay(e)}function getStartOfWeek(e,t,n){var Ee=getLocaleObject(t||getDefaultLocale());return startOfWeek(e,{locale:Ee,weekStartsOn:n})}function getStartOfMonth(e){return startOfMonth(e)}function getStartOfYear(e){return startOfYear(e)}function getStartOfQuarter(e){return startOfQuarter(e)}function getStartOfToday(){return startOfDay(newDate())}function getEndOfDay(e){return endOfDay(e)}function getEndOfWeek(e){return endOfWeek(e)}function getEndOfMonth(e){return endOfMonth(e)}function isSameYear(e,t){return e&&t?isSameYear$1(e,t):!e&&!t}function isSameMonth(e,t){return e&&t?isSameMonth$1(e,t):!e&&!t}function isSameQuarter(e,t){return e&&t?isSameQuarter$1(e,t):!e&&!t}function isSameDay(e,t){return e&&t?isSameDay$1(e,t):!e&&!t}function isEqual(e,t){return e&&t?isEqual$1(e,t):!e&&!t}function isDayInRange(e,t,n){var Ee,Re=startOfDay(t),Ce=endOfDay(n);try{Ee=isWithinInterval(e,{start:Re,end:Ce})}catch{Ee=!1}return Ee}function getDefaultLocale(){var e=getLocaleScope();return e.__localeId__}function getLocaleObject(e){if(typeof e=="string"){var t=getLocaleScope();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function getFormattedWeekdayInLocale(e,t,n){return t(formatDate(e,"EEEE",n))}function getWeekdayMinInLocale(e,t){return formatDate(e,"EEEEEE",t)}function getWeekdayShortInLocale(e,t){return formatDate(e,"EEE",t)}function getMonthInLocale(e,t){return formatDate(setMonth(newDate(),e),"LLLL",t)}function getMonthShortInLocale(e,t){return formatDate(setMonth(newDate(),e),"LLL",t)}function getQuarterShortInLocale(e,t){return formatDate(setQuarter(newDate(),e),"QQQ",t)}function isDayDisabled(e,t){var n=t===void 0?{}:t,Ee=n.minDate,Re=n.maxDate,Ce=n.excludeDates,Te=n.excludeDateIntervals,Me=n.includeDates,De=n.includeDateIntervals,Oe=n.filterDate,Be=n.disabled;return Be?!0:isOutOfBounds(e,{minDate:Ee,maxDate:Re})||Ce&&Ce.some(function(ze){return ze instanceof Date?isSameDay(e,ze):isSameDay(e,ze.date)})||Te&&Te.some(function(ze){var $e=ze.start,He=ze.end;return isWithinInterval(e,{start:$e,end:He})})||Me&&!Me.some(function(ze){return isSameDay(e,ze)})||De&&!De.some(function(ze){var $e=ze.start,He=ze.end;return isWithinInterval(e,{start:$e,end:He})})||Oe&&!Oe(newDate(e))||!1}function isDayExcluded(e,t){var n=t===void 0?{}:t,Ee=n.excludeDates,Re=n.excludeDateIntervals;return Re&&Re.length>0?Re.some(function(Ce){var Te=Ce.start,Me=Ce.end;return isWithinInterval(e,{start:Te,end:Me})}):Ee&&Ee.some(function(Ce){var Te;return Ce instanceof Date?isSameDay(e,Ce):isSameDay(e,(Te=Ce.date)!==null&&Te!==void 0?Te:new Date)})||!1}function isMonthDisabled(e,t){var n=t===void 0?{}:t,Ee=n.minDate,Re=n.maxDate,Ce=n.excludeDates,Te=n.includeDates,Me=n.filterDate;return isOutOfBounds(e,{minDate:Ee?startOfMonth(Ee):void 0,maxDate:Re?endOfMonth(Re):void 0})||(Ce==null?void 0:Ce.some(function(De){return isSameMonth(e,De instanceof Date?De:De.date)}))||Te&&!Te.some(function(De){return isSameMonth(e,De)})||Me&&!Me(newDate(e))||!1}function isMonthInRange(e,t,n,Ee){var Re=getYear(e),Ce=getMonth(e),Te=getYear(t),Me=getMonth(t),De=getYear(Ee);return Re===Te&&Re===De?Ce<=n&&n<=Me:Re<Te?De===Re&&Ce<=n||De===Te&&Me>=n||De<Te&&De>Re:!1}function isMonthYearDisabled(e,t){var n=t===void 0?{}:t,Ee=n.minDate,Re=n.maxDate,Ce=n.excludeDates,Te=n.includeDates;return isOutOfBounds(e,{minDate:Ee,maxDate:Re})||Ce&&Ce.some(function(Me){return isSameMonth(Me instanceof Date?Me:Me.date,e)})||Te&&!Te.some(function(Me){return isSameMonth(Me,e)})||!1}function isQuarterDisabled(e,t){var n=t===void 0?{}:t,Ee=n.minDate,Re=n.maxDate,Ce=n.excludeDates,Te=n.includeDates,Me=n.filterDate,De=n.disabled;return De?!0:isOutOfBounds(e,{minDate:Ee,maxDate:Re})||(Ce==null?void 0:Ce.some(function(Oe){return isSameQuarter(e,Oe instanceof Date?Oe:Oe.date)}))||Te&&!Te.some(function(Oe){return isSameQuarter(e,Oe)})||Me&&!Me(newDate(e))||!1}function isYearInRange(e,t,n){if(!t||!n||!isValid$1(t)||!isValid$1(n))return!1;var Ee=getYear(t),Re=getYear(n);return Ee<=e&&Re>=e}function isYearDisabled(e,t){var n=t===void 0?{}:t,Ee=n.minDate,Re=n.maxDate,Ce=n.excludeDates,Te=n.includeDates,Me=n.filterDate,De=n.disabled;if(De)return!0;var Oe=new Date(e,0,1);return isOutOfBounds(Oe,{minDate:Ee?startOfYear(Ee):void 0,maxDate:Re?endOfYear(Re):void 0})||(Ce==null?void 0:Ce.some(function(Be){return isSameYear(Oe,Be instanceof Date?Be:Be.date)}))||Te&&!Te.some(function(Be){return isSameYear(Oe,Be)})||Me&&!Me(newDate(Oe))||!1}function isQuarterInRange(e,t,n,Ee){var Re=getYear(e),Ce=getQuarter(e),Te=getYear(t),Me=getQuarter(t),De=getYear(Ee);return Re===Te&&Re===De?Ce<=n&&n<=Me:Re<Te?De===Re&&Ce<=n||De===Te&&Me>=n||De<Te&&De>Re:!1}function isOutOfBounds(e,t){var n,Ee=t===void 0?{}:t,Re=Ee.minDate,Ce=Ee.maxDate;return(n=Re&&differenceInCalendarDays(e,Re)<0||Ce&&differenceInCalendarDays(e,Ce)>0)!==null&&n!==void 0?n:!1}function isTimeInList(e,t){return t.some(function(n){return getHours(n)===getHours(e)&&getMinutes(n)===getMinutes(e)&&getSeconds(n)===getSeconds(e)})}function isTimeDisabled(e,t){var n=t===void 0?{}:t,Ee=n.excludeTimes,Re=n.includeTimes,Ce=n.filterTime;return Ee&&isTimeInList(e,Ee)||Re&&!isTimeInList(e,Re)||Ce&&!Ce(e)||!1}function isTimeInDisabledRange(e,t){var n=t.minTime,Ee=t.maxTime;if(!n||!Ee)throw new Error("Both minTime and maxTime props required");var Re=newDate();Re=setHours(Re,getHours(e)),Re=setMinutes(Re,getMinutes(e)),Re=setSeconds(Re,getSeconds(e));var Ce=newDate();Ce=setHours(Ce,getHours(n)),Ce=setMinutes(Ce,getMinutes(n)),Ce=setSeconds(Ce,getSeconds(n));var Te=newDate();Te=setHours(Te,getHours(Ee)),Te=setMinutes(Te,getMinutes(Ee)),Te=setSeconds(Te,getSeconds(Ee));var Me;try{Me=!isWithinInterval(Re,{start:Ce,end:Te})}catch{Me=!1}return Me}function monthDisabledBefore(e,t){var n=t===void 0?{}:t,Ee=n.minDate,Re=n.includeDates,Ce=subMonths(e,1);return Ee&&differenceInCalendarMonths(Ee,Ce)>0||Re&&Re.every(function(Te){return differenceInCalendarMonths(Te,Ce)>0})||!1}function monthDisabledAfter(e,t){var n=t===void 0?{}:t,Ee=n.maxDate,Re=n.includeDates,Ce=addMonths(e,1);return Ee&&differenceInCalendarMonths(Ce,Ee)>0||Re&&Re.every(function(Te){return differenceInCalendarMonths(Ce,Te)>0})||!1}function quarterDisabledBefore(e,t){var n=t===void 0?{}:t,Ee=n.minDate,Re=n.includeDates,Ce=startOfYear(e),Te=subQuarters(Ce);return Ee&&differenceInCalendarQuarters(Ee,Te)>0||Re&&Re.every(function(Me){return differenceInCalendarQuarters(Me,Te)>0})||!1}function quarterDisabledAfter(e,t){var n=t===void 0?{}:t,Ee=n.maxDate,Re=n.includeDates,Ce=endOfYear(e),Te=addQuarters(Ce,1);return Ee&&differenceInCalendarQuarters(Te,Ee)>0||Re&&Re.every(function(Me){return differenceInCalendarQuarters(Te,Me)>0})||!1}function yearDisabledBefore(e,t){var n=t===void 0?{}:t,Ee=n.minDate,Re=n.includeDates,Ce=subYears(e,1);return Ee&&differenceInCalendarYears(Ee,Ce)>0||Re&&Re.every(function(Te){return differenceInCalendarYears(Te,Ce)>0})||!1}function yearsDisabledBefore(e,t){var n=t===void 0?{}:t,Ee=n.minDate,Re=n.yearItemNumber,Ce=Re===void 0?DEFAULT_YEAR_ITEM_NUMBER:Re,Te=getStartOfYear(subYears(e,Ce)),Me=getYearsPeriod(Te,Ce).endPeriod,De=Ee&&getYear(Ee);return De&&De>Me||!1}function yearDisabledAfter(e,t){var n=t===void 0?{}:t,Ee=n.maxDate,Re=n.includeDates,Ce=addYears(e,1);return Ee&&differenceInCalendarYears(Ce,Ee)>0||Re&&Re.every(function(Te){return differenceInCalendarYears(Ce,Te)>0})||!1}function yearsDisabledAfter(e,t){var n=t===void 0?{}:t,Ee=n.maxDate,Re=n.yearItemNumber,Ce=Re===void 0?DEFAULT_YEAR_ITEM_NUMBER:Re,Te=addYears(e,Ce),Me=getYearsPeriod(Te,Ce).startPeriod,De=Ee&&getYear(Ee);return De&&De<Me||!1}function getEffectiveMinDate(e){var t=e.minDate,n=e.includeDates;if(n&&t){var Ee=n.filter(function(Re){return differenceInCalendarDays(Re,t)>=0});return min$1(Ee)}else return n?min$1(n):t}function getEffectiveMaxDate(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var Ee=n.filter(function(Re){return differenceInCalendarDays(Re,t)<=0});return max$1(Ee)}else return n?max$1(n):t}function getHighLightDaysMap(e,t){var n;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var Ee=new Map,Re=0,Ce=e.length;Re<Ce;Re++){var Te=e[Re];if(isDate(Te)){var Me=formatDate(Te,"MM.dd.yyyy"),De=Ee.get(Me)||[];De.includes(t)||(De.push(t),Ee.set(Me,De))}else if(typeof Te=="object"){var Oe=Object.keys(Te),Be=(n=Oe[0])!==null&&n!==void 0?n:"",ze=Te[Be];if(typeof Be=="string"&&Array.isArray(ze))for(var $e=0,He=ze.length;$e<He;$e++){var Ue=ze[$e];if(Ue){var Me=formatDate(Ue,"MM.dd.yyyy"),De=Ee.get(Me)||[];De.includes(Be)||(De.push(Be),Ee.set(Me,De))}}}}return Ee}function arraysAreEqual(e,t){return e.length!==t.length?!1:e.every(function(n,Ee){return n===t[Ee]})}function getHolidaysMap(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(Ee){var Re=Ee.date,Ce=Ee.holidayName;if(isDate(Re)){var Te=formatDate(Re,"MM.dd.yyyy"),Me=n.get(Te)||{className:"",holidayNames:[]};if(!("className"in Me&&Me.className===t&&arraysAreEqual(Me.holidayNames,[Ce]))){Me.className=t;var De=Me.holidayNames;Me.holidayNames=De?__spreadArray(__spreadArray([],De,!0),[Ce],!1):[Ce],n.set(Te,Me)}}}),n}function timesToInjectAfter(e,t,n,Ee,Re){for(var Ce=Re.length,Te=[],Me=0;Me<Ce;Me++){var De=e,Oe=Re[Me];Oe&&(De=addHours(De,getHours(Oe)),De=addMinutes(De,getMinutes(Oe)),De=addSeconds(De,getSeconds(Oe)));var Be=addMinutes(e,(n+1)*Ee);isAfter(De,t)&&isBefore(De,Be)&&Oe!=null&&Te.push(Oe)}return Te}function addZero(e){return e<10?"0".concat(e):"".concat(e)}function getYearsPeriod(e,t){t===void 0&&(t=DEFAULT_YEAR_ITEM_NUMBER);var n=Math.ceil(getYear(e)/t)*t,Ee=n-(t-1);return{startPeriod:Ee,endPeriod:n}}function getHoursInDay(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function startOfMinute(e){var t=e.getSeconds(),n=e.getMilliseconds();return toDate(e.getTime()-t*1e3-n)}function isSameMinute(e,t){return startOfMinute(e).getTime()===startOfMinute(t).getTime()}function getMidnightDate(e){if(!isDate(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function isDateBefore(e,t){if(!isDate(e)||!isDate(t))throw new Error("Invalid date received");var n=getMidnightDate(e),Ee=getMidnightDate(t);return isBefore(n,Ee)}function isSpaceKeyDown(e){return e.key===KeyType.Space}var InputTime=function(e){__extends$1(t,e);function t(n){var Ee=e.call(this,n)||this;return Ee.inputRef=React4.createRef(),Ee.onTimeChange=function(Re){var Ce,Te;Ee.setState({time:Re});var Me=Ee.props.date,De=Me instanceof Date&&!isNaN(+Me),Oe=De?Me:new Date;if(Re!=null&&Re.includes(":")){var Be=Re.split(":"),ze=Be[0],$e=Be[1];Oe.setHours(Number(ze)),Oe.setMinutes(Number($e))}(Te=(Ce=Ee.props).onChange)===null||Te===void 0||Te.call(Ce,Oe)},Ee.renderTimeInput=function(){var Re=Ee.state.time,Ce=Ee.props,Te=Ce.date,Me=Ce.timeString,De=Ce.customTimeInput;return De?reactExports.cloneElement(De,{date:Te,value:Re,onChange:Ee.onTimeChange}):React4.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:Ee.inputRef,onClick:function(){var Oe;(Oe=Ee.inputRef.current)===null||Oe===void 0||Oe.focus()},required:!0,value:Re,onChange:function(Oe){Ee.onTimeChange(Oe.target.value||Me)}})},Ee.state={time:Ee.props.timeString},Ee}return t.getDerivedStateFromProps=function(n,Ee){return n.timeString!==Ee.time?{time:n.timeString}:null},t.prototype.render=function(){return React4.createElement("div",{className:"react-datepicker__input-time-container"},React4.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),React4.createElement("div",{className:"react-datepicker-time__input-container"},React4.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(reactExports.Component),Day=function(e){__extends$1(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dayEl=reactExports.createRef(),n.handleClick=function(Ee){!n.isDisabled()&&n.props.onClick&&n.props.onClick(Ee)},n.handleMouseEnter=function(Ee){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(Ee)},n.handleOnKeyDown=function(Ee){var Re,Ce,Te=Ee.key;Te===KeyType.Space&&(Ee.preventDefault(),Ee.key=KeyType.Enter),(Ce=(Re=n.props).handleOnKeyDown)===null||Ce===void 0||Ce.call(Re,Ee)},n.isSameDay=function(Ee){return isSameDay(n.props.day,Ee)},n.isKeyboardSelected=function(){var Ee;if(n.props.disabledKeyboardNavigation)return!1;var Re=n.props.selectsMultiple?(Ee=n.props.selectedDates)===null||Ee===void 0?void 0:Ee.some(function(Te){return n.isSameDayOrWeek(Te)}):n.isSameDayOrWeek(n.props.selected),Ce=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!Re&&n.isSameDayOrWeek(n.props.preSelection)&&!Ce},n.isDisabled=function(Ee){return Ee===void 0&&(Ee=n.props.day),isDayDisabled(Ee,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate,disabled:n.props.disabled})},n.isExcluded=function(){return isDayExcluded(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return isSameDay(n.props.day,getStartOfWeek(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(Ee){return n.props.showWeekPicker&&isSameDay(Ee,getStartOfWeek(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(Ee){return n.isSameDay(Ee)||n.isSameWeek(Ee)},n.getHighLightedClass=function(){var Ee=n.props,Re=Ee.day,Ce=Ee.highlightDates;if(!Ce)return!1;var Te=formatDate(Re,"MM.dd.yyyy");return Ce.get(Te)},n.getHolidaysClass=function(){var Ee,Re=n.props,Ce=Re.day,Te=Re.holidays;if(!Te)return[void 0];var Me=formatDate(Ce,"MM.dd.yyyy");return Te.has(Me)?[(Ee=Te.get(Me))===null||Ee===void 0?void 0:Ee.className]:[void 0]},n.isInRange=function(){var Ee=n.props,Re=Ee.day,Ce=Ee.startDate,Te=Ee.endDate;return!Ce||!Te?!1:isDayInRange(Re,Ce,Te)},n.isInSelectingRange=function(){var Ee,Re=n.props,Ce=Re.day,Te=Re.selectsStart,Me=Re.selectsEnd,De=Re.selectsRange,Oe=Re.selectsDisabledDaysInRange,Be=Re.startDate,ze=Re.swapRange,$e=Re.endDate,He=(Ee=n.props.selectingDate)!==null&&Ee!==void 0?Ee:n.props.preSelection;if(n.isAfterMonth()||n.isBeforeMonth()||!(Te||Me||De)||!He||!Oe&&n.isDisabled())return!1;if(Te&&$e&&(isBefore(He,$e)||isEqual(He,$e)))return isDayInRange(Ce,He,$e);if(Me&&Be&&(isAfter(He,Be)||isEqual(He,Be)))return isDayInRange(Ce,Be,He);if(De&&Be&&!$e){if(isEqual(He,Be)||isAfter(He,Be))return isDayInRange(Ce,Be,He);if(ze&&isBefore(He,Be))return isDayInRange(Ce,He,Be)}return!1},n.isSelectingRangeStart=function(){var Ee;if(!n.isInSelectingRange())return!1;var Re=n.props,Ce=Re.day,Te=Re.startDate,Me=Re.selectsStart,De=Re.swapRange,Oe=Re.selectsRange,Be=(Ee=n.props.selectingDate)!==null&&Ee!==void 0?Ee:n.props.preSelection;return Me?isSameDay(Ce,Be):Oe&&De&&Te&&Be?isSameDay(Ce,isBefore(Be,Te)?Be:Te):isSameDay(Ce,Te)},n.isSelectingRangeEnd=function(){var Ee;if(!n.isInSelectingRange())return!1;var Re=n.props,Ce=Re.day,Te=Re.endDate,Me=Re.selectsEnd,De=Re.selectsRange,Oe=Re.swapRange,Be=Re.startDate,ze=(Ee=n.props.selectingDate)!==null&&Ee!==void 0?Ee:n.props.preSelection;return Me?isSameDay(Ce,ze):De&&Oe&&Be&&ze?isSameDay(Ce,isBefore(ze,Be)?Be:ze):De?isSameDay(Ce,ze):isSameDay(Ce,Te)},n.isRangeStart=function(){var Ee=n.props,Re=Ee.day,Ce=Ee.startDate,Te=Ee.endDate;return!Ce||!Te?!1:isSameDay(Ce,Re)},n.isRangeEnd=function(){var Ee=n.props,Re=Ee.day,Ce=Ee.startDate,Te=Ee.endDate;return!Ce||!Te?!1:isSameDay(Te,Re)},n.isWeekend=function(){var Ee=getDay(n.props.day);return Ee===0||Ee===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===getMonth(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(getMonth(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(newDate())},n.isSelected=function(){var Ee;return n.props.selectsMultiple?(Ee=n.props.selectedDates)===null||Ee===void 0?void 0:Ee.some(function(Re){return n.isSameDayOrWeek(Re)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(Ee){var Re=n.props.dayClassName?n.props.dayClassName(Ee):void 0;return clsx("react-datepicker__day",Re,"react-datepicker__day--"+getDayOfWeekCode(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var Ee=n.props,Re=Ee.day,Ce=Ee.ariaLabelPrefixWhenEnabled,Te=Ce===void 0?"Choose":Ce,Me=Ee.ariaLabelPrefixWhenDisabled,De=Me===void 0?"Not available":Me,Oe=n.isDisabled()||n.isExcluded()?De:Te;return"".concat(Oe," ").concat(formatDate(Re,"PPPP",n.props.locale))},n.getTitle=function(){var Ee=n.props,Re=Ee.day,Ce=Ee.holidays,Te=Ce===void 0?new Map:Ce,Me=Ee.excludeDates,De=formatDate(Re,"MM.dd.yyyy"),Oe=[];return Te.has(De)&&Oe.push.apply(Oe,Te.get(De).holidayNames),n.isExcluded()&&Oe.push(Me==null?void 0:Me.filter(function(Be){return Be instanceof Date?isSameDay(Be,Re):isSameDay(Be==null?void 0:Be.date,Re)}).map(function(Be){if(!(Be instanceof Date))return Be==null?void 0:Be.message})),Oe.join(", ")},n.getTabIndex=function(){var Ee=n.props.selected,Re=n.props.preSelection,Ce=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(Ee)&&isSameDay(Re,Ee))?0:-1;return Ce},n.handleFocusDay=function(){var Ee;n.shouldFocusDay()&&((Ee=n.dayEl.current)===null||Ee===void 0||Ee.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(getDate(n.props.day),n.props.day):getDate(n.props.day)},n.render=function(){return React4.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"gridcell",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&React4.createElement("span",{className:"overlay"},n.getTitle()))},n}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},t.prototype.isDayActiveElement=function(){var n,Ee,Re;return((Ee=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||Ee===void 0?void 0:Ee.contains(document.activeElement))&&((Re=document.activeElement)===null||Re===void 0?void 0:Re.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(reactExports.Component),WeekNumber=function(e){__extends$1(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.weekNumberEl=reactExports.createRef(),n.handleClick=function(Ee){n.props.onClick&&n.props.onClick(Ee)},n.handleOnKeyDown=function(Ee){var Re,Ce,Te=Ee.key;Te===KeyType.Space&&(Ee.preventDefault(),Ee.key=KeyType.Enter),(Ce=(Re=n.props).handleOnKeyDown)===null||Ce===void 0||Ce.call(Re,Ee)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!isSameDay(n.props.date,n.props.selected)&&isSameDay(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||isSameDay(n.props.date,n.props.selected)&&isSameDay(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(Ee){var Re=!1;n.getTabIndex()===0&&!(Ee!=null&&Ee.isInputFocused)&&isSameDay(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(Re=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(Re=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(Re=!0)),Re&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},t.prototype.render=function(){var n=this.props,Ee=n.weekNumber,Re=n.isWeekDisabled,Ce=n.ariaLabelPrefix,Te=Ce===void 0?t.defaultProps.ariaLabelPrefix:Ce,Me=n.onClick,De={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!Me&&!Re,"react-datepicker__week-number--selected":!!Me&&isSameDay(this.props.date,this.props.selected)};return React4.createElement("div",{ref:this.weekNumberEl,className:clsx(De),"aria-label":"".concat(Te," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},Ee)},t}(reactExports.Component),Week=function(e){__extends$1(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isDisabled=function(Ee){return isDayDisabled(Ee,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(Ee,Re){n.props.onDayClick&&n.props.onDayClick(Ee,Re)},n.handleDayMouseEnter=function(Ee){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(Ee)},n.handleWeekClick=function(Ee,Re,Ce){for(var Te,Me,De,Oe=new Date(Ee),Be=0;Be<7;Be++){var ze=new Date(Ee);ze.setDate(ze.getDate()+Be);var $e=!n.isDisabled(ze);if($e){Oe=ze;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(Oe,Re,Ce),n.props.showWeekPicker&&n.handleDayClick(Oe,Ce),((Te=n.props.shouldCloseOnSelect)!==null&&Te!==void 0?Te:t.defaultProps.shouldCloseOnSelect)&&((De=(Me=n.props).setOpen)===null||De===void 0||De.call(Me,!1))},n.formatWeekNumber=function(Ee){return n.props.formatWeekNumber?n.props.formatWeekNumber(Ee):getWeek(Ee)},n.isWeekDisabled=function(){for(var Ee=n.startOfWeek(),Re=addDays(Ee,6),Ce=new Date(Ee);Ce<=Re;){if(!n.isDisabled(Ce))return!1;Ce=addDays(Ce,1)}return!0},n.renderDays=function(){var Ee=n.startOfWeek(),Re=[],Ce=n.formatWeekNumber(Ee);if(n.props.showWeekNumber){var Te=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,Ee,Ce):void 0;Re.push(React4.createElement(WeekNumber,_assign({key:"W"},t.defaultProps,n.props,{weekNumber:Ce,isWeekDisabled:n.isWeekDisabled(),date:Ee,onClick:Te})))}return Re.concat([0,1,2,3,4,5,6].map(function(Me){var De=addDays(Ee,Me);return React4.createElement(Day,_assign({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:De.valueOf(),day:De,onClick:n.handleDayClick.bind(n,De),onMouseEnter:n.handleDayMouseEnter.bind(n,De)}))}))},n.startOfWeek=function(){return getStartOfWeek(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!isSameDay(n.startOfWeek(),n.props.selected)&&isSameDay(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":isSameDay(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},Ee=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return React4.createElement("div",{className:clsx(n,Ee),role:"row"},this.renderDays())},t}(reactExports.Component),_a$2,FIXED_HEIGHT_STANDARD_WEEK_COUNT=6,MONTH_COLUMNS_LAYOUT={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},MONTH_COLUMNS=(_a$2={},_a$2[MONTH_COLUMNS_LAYOUT.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},_a$2[MONTH_COLUMNS_LAYOUT.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},_a$2[MONTH_COLUMNS_LAYOUT.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},_a$2),MONTH_NAVIGATION_HORIZONTAL_OFFSET=1;function getMonthColumnsLayout(e,t){return e?MONTH_COLUMNS_LAYOUT.FOUR_COLUMNS:t?MONTH_COLUMNS_LAYOUT.TWO_COLUMNS:MONTH_COLUMNS_LAYOUT.THREE_COLUMNS}var Month=function(e){__extends$1(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.MONTH_REFS=__spreadArray([],Array(12),!0).map(function(){return reactExports.createRef()}),n.QUARTER_REFS=__spreadArray([],Array(4),!0).map(function(){return reactExports.createRef()}),n.isDisabled=function(Ee){return isDayDisabled(Ee,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate,disabled:n.props.disabled})},n.isExcluded=function(Ee){return isDayExcluded(Ee,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(Ee,Re){var Ce,Te;(Te=(Ce=n.props).onDayClick)===null||Te===void 0||Te.call(Ce,Ee,Re,n.props.orderInDisplay)},n.handleDayMouseEnter=function(Ee){var Re,Ce;(Ce=(Re=n.props).onDayMouseEnter)===null||Ce===void 0||Ce.call(Re,Ee)},n.handleMouseLeave=function(){var Ee,Re;(Re=(Ee=n.props).onMouseLeave)===null||Re===void 0||Re.call(Ee)},n.isRangeStartMonth=function(Ee){var Re=n.props,Ce=Re.day,Te=Re.startDate,Me=Re.endDate;return!Te||!Me?!1:isSameMonth(setMonth(Ce,Ee),Te)},n.isRangeStartQuarter=function(Ee){var Re=n.props,Ce=Re.day,Te=Re.startDate,Me=Re.endDate;return!Te||!Me?!1:isSameQuarter(setQuarter(Ce,Ee),Te)},n.isRangeEndMonth=function(Ee){var Re=n.props,Ce=Re.day,Te=Re.startDate,Me=Re.endDate;return!Te||!Me?!1:isSameMonth(setMonth(Ce,Ee),Me)},n.isRangeEndQuarter=function(Ee){var Re=n.props,Ce=Re.day,Te=Re.startDate,Me=Re.endDate;return!Te||!Me?!1:isSameQuarter(setQuarter(Ce,Ee),Me)},n.isInSelectingRangeMonth=function(Ee){var Re,Ce=n.props,Te=Ce.day,Me=Ce.selectsStart,De=Ce.selectsEnd,Oe=Ce.selectsRange,Be=Ce.startDate,ze=Ce.endDate,$e=(Re=n.props.selectingDate)!==null&&Re!==void 0?Re:n.props.preSelection;return!(Me||De||Oe)||!$e?!1:Me&&ze?isMonthInRange($e,ze,Ee,Te):De&&Be||Oe&&Be&&!ze?isMonthInRange(Be,$e,Ee,Te):!1},n.isSelectingMonthRangeStart=function(Ee){var Re;if(!n.isInSelectingRangeMonth(Ee))return!1;var Ce=n.props,Te=Ce.day,Me=Ce.startDate,De=Ce.selectsStart,Oe=setMonth(Te,Ee),Be=(Re=n.props.selectingDate)!==null&&Re!==void 0?Re:n.props.preSelection;return De?isSameMonth(Oe,Be):isSameMonth(Oe,Me)},n.isSelectingMonthRangeEnd=function(Ee){var Re;if(!n.isInSelectingRangeMonth(Ee))return!1;var Ce=n.props,Te=Ce.day,Me=Ce.endDate,De=Ce.selectsEnd,Oe=Ce.selectsRange,Be=setMonth(Te,Ee),ze=(Re=n.props.selectingDate)!==null&&Re!==void 0?Re:n.props.preSelection;return De||Oe?isSameMonth(Be,ze):isSameMonth(Be,Me)},n.isInSelectingRangeQuarter=function(Ee){var Re,Ce=n.props,Te=Ce.day,Me=Ce.selectsStart,De=Ce.selectsEnd,Oe=Ce.selectsRange,Be=Ce.startDate,ze=Ce.endDate,$e=(Re=n.props.selectingDate)!==null&&Re!==void 0?Re:n.props.preSelection;return!(Me||De||Oe)||!$e?!1:Me&&ze?isQuarterInRange($e,ze,Ee,Te):De&&Be||Oe&&Be&&!ze?isQuarterInRange(Be,$e,Ee,Te):!1},n.isWeekInMonth=function(Ee){var Re=n.props.day,Ce=addDays(Ee,6);return isSameMonth(Ee,Re)||isSameMonth(Ce,Re)},n.isCurrentMonth=function(Ee,Re){return getYear(Ee)===getYear(newDate())&&Re===getMonth(newDate())},n.isCurrentQuarter=function(Ee,Re){return getYear(Ee)===getYear(newDate())&&Re===getQuarter(newDate())},n.isSelectedMonth=function(Ee,Re,Ce){return getMonth(Ce)===Re&&getYear(Ee)===getYear(Ce)},n.isSelectMonthInList=function(Ee,Re,Ce){return Ce.some(function(Te){return n.isSelectedMonth(Ee,Re,Te)})},n.isSelectedQuarter=function(Ee,Re,Ce){return getQuarter(Ce)===Re&&getYear(Ee)===getYear(Ce)},n.isSelectQuarterInList=function(Ee,Re,Ce){return Ce.some(function(Te){return n.isSelectedQuarter(Ee,Re,Te)})},n.isMonthSelected=function(){var Ee=n.props,Re=Ee.day,Ce=Ee.selected,Te=Ee.selectedDates,Me=Ee.selectsMultiple,De=getMonth(Re);return Me?Te==null?void 0:Te.some(function(Oe){return n.isSelectedMonth(Re,De,Oe)}):!!Ce&&n.isSelectedMonth(Re,De,Ce)},n.isQuarterSelected=function(){var Ee=n.props,Re=Ee.day,Ce=Ee.selected,Te=Ee.selectedDates,Me=Ee.selectsMultiple,De=getQuarter(Re);return Me?Te==null?void 0:Te.some(function(Oe){return n.isSelectedQuarter(Re,De,Oe)}):!!Ce&&n.isSelectedQuarter(Re,De,Ce)},n.renderWeeks=function(){if(!isValid(n.props.day))return[];for(var Ee=[],Re=n.props.fixedHeight,Ce=0,Te=!1,Me=getStartOfWeek(getStartOfMonth(n.props.day),n.props.locale,n.props.calendarStartDay),De=function(Ue){return n.props.showWeekPicker?getStartOfWeek(Ue,n.props.locale,n.props.calendarStartDay):n.props.preSelection},Oe=function(Ue){return n.props.showWeekPicker?getStartOfWeek(Ue,n.props.locale,n.props.calendarStartDay):n.props.selected},Be=n.props.selected?Oe(n.props.selected):void 0,ze=n.props.preSelection?De(n.props.preSelection):void 0;Ee.push(React4.createElement(Week,_assign({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:Ce,day:Me,month:getMonth(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:Be,preSelection:ze,showWeekNumber:n.props.showWeekNumbers}))),!Te;){Ce++,Me=addWeeks(Me,1);var $e=Re&&Ce>=FIXED_HEIGHT_STANDARD_WEEK_COUNT,He=!Re&&!n.isWeekInMonth(Me);if($e||He)if(n.props.peekNextMonth)Te=!0;else break}return Ee},n.onMonthClick=function(Ee,Re){var Ce=n.isMonthDisabledForLabelDate(Re),Te=Ce.isDisabled,Me=Ce.labelDate;Te||n.handleDayClick(getStartOfMonth(Me),Ee)},n.onMonthMouseEnter=function(Ee){var Re=n.isMonthDisabledForLabelDate(Ee),Ce=Re.isDisabled,Te=Re.labelDate;Ce||n.handleDayMouseEnter(getStartOfMonth(Te))},n.handleMonthNavigation=function(Ee,Re){var Ce,Te,Me,De;(Te=(Ce=n.props).setPreSelection)===null||Te===void 0||Te.call(Ce,Re),(De=(Me=n.MONTH_REFS[Ee])===null||Me===void 0?void 0:Me.current)===null||De===void 0||De.focus()},n.handleKeyboardNavigation=function(Ee,Re,Ce){var Te,Me=n.props,De=Me.selected,Oe=Me.preSelection,Be=Me.setPreSelection,ze=Me.minDate,$e=Me.maxDate,He=Me.showFourColumnMonthYearPicker,Ue=Me.showTwoColumnMonthYearPicker;if(Oe){var Ve=getMonthColumnsLayout(He,Ue),We=n.getVerticalOffset(Ve),qe=(Te=MONTH_COLUMNS[Ve])===null||Te===void 0?void 0:Te.grid,Ge=function(er,St,ar){var hr,ur,dr=St,vr=ar;switch(er){case KeyType.ArrowRight:dr=addMonths(St,MONTH_NAVIGATION_HORIZONTAL_OFFSET),vr=ar===11?0:ar+MONTH_NAVIGATION_HORIZONTAL_OFFSET;break;case KeyType.ArrowLeft:dr=subMonths(St,MONTH_NAVIGATION_HORIZONTAL_OFFSET),vr=ar===0?11:ar-MONTH_NAVIGATION_HORIZONTAL_OFFSET;break;case KeyType.ArrowUp:dr=subMonths(St,We),vr=!((hr=qe==null?void 0:qe[0])===null||hr===void 0)&&hr.includes(ar)?ar+12-We:ar-We;break;case KeyType.ArrowDown:dr=addMonths(St,We),vr=!((ur=qe==null?void 0:qe[qe.length-1])===null||ur===void 0)&&ur.includes(ar)?ar-12+We:ar+We;break}return{newCalculatedDate:dr,newCalculatedMonth:vr}},Ye=function(er,St,ar){for(var hr=40,ur=er,dr=!1,vr=0,yr=Ge(ur,St,ar),br=yr.newCalculatedDate,lr=yr.newCalculatedMonth;!dr;){if(vr>=hr){br=St,lr=ar;break}if(ze&&br<ze){ur=KeyType.ArrowRight;var cr=Ge(ur,br,lr);br=cr.newCalculatedDate,lr=cr.newCalculatedMonth}if($e&&br>$e){ur=KeyType.ArrowLeft;var cr=Ge(ur,br,lr);br=cr.newCalculatedDate,lr=cr.newCalculatedMonth}if(isMonthYearDisabled(br,n.props)){var cr=Ge(ur,br,lr);br=cr.newCalculatedDate,lr=cr.newCalculatedMonth}else dr=!0;vr++}return{newCalculatedDate:br,newCalculatedMonth:lr}};if(Re===KeyType.Enter){n.isMonthDisabled(Ce)||(n.onMonthClick(Ee,Ce),Be==null||Be(De));return}var Ke=Ye(Re,Oe,Ce),Xe=Ke.newCalculatedDate,Ze=Ke.newCalculatedMonth;switch(Re){case KeyType.ArrowRight:case KeyType.ArrowLeft:case KeyType.ArrowUp:case KeyType.ArrowDown:n.handleMonthNavigation(Ze,Xe);break}}},n.getVerticalOffset=function(Ee){var Re,Ce;return(Ce=(Re=MONTH_COLUMNS[Ee])===null||Re===void 0?void 0:Re.verticalNavigationOffset)!==null&&Ce!==void 0?Ce:0},n.onMonthKeyDown=function(Ee,Re){var Ce=n.props,Te=Ce.disabledKeyboardNavigation,Me=Ce.handleOnMonthKeyDown,De=Ee.key;De!==KeyType.Tab&&Ee.preventDefault(),Te||n.handleKeyboardNavigation(Ee,De,Re),Me&&Me(Ee)},n.onQuarterClick=function(Ee,Re){var Ce=setQuarter(n.props.day,Re);isQuarterDisabled(Ce,n.props)||n.handleDayClick(getStartOfQuarter(Ce),Ee)},n.onQuarterMouseEnter=function(Ee){var Re=setQuarter(n.props.day,Ee);isQuarterDisabled(Re,n.props)||n.handleDayMouseEnter(getStartOfQuarter(Re))},n.handleQuarterNavigation=function(Ee,Re){var Ce,Te,Me,De;n.isDisabled(Re)||n.isExcluded(Re)||((Te=(Ce=n.props).setPreSelection)===null||Te===void 0||Te.call(Ce,Re),(De=(Me=n.QUARTER_REFS[Ee-1])===null||Me===void 0?void 0:Me.current)===null||De===void 0||De.focus())},n.onQuarterKeyDown=function(Ee,Re){var Ce,Te,Me=Ee.key;if(!n.props.disabledKeyboardNavigation)switch(Me){case KeyType.Enter:n.onQuarterClick(Ee,Re),(Te=(Ce=n.props).setPreSelection)===null||Te===void 0||Te.call(Ce,n.props.selected);break;case KeyType.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(Re===4?1:Re+1,addQuarters(n.props.preSelection,1));break;case KeyType.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(Re===1?4:Re-1,subQuarters(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(Ee){var Re,Ce=n.props,Te=Ce.day,Me=Ce.disabled,De=Ce.minDate,Oe=Ce.maxDate,Be=Ce.excludeDates,ze=Ce.includeDates,$e=setMonth(Te,Ee);return Me?{isDisabled:!0,labelDate:setMonth(Te,Ee)}:{isDisabled:(Re=(De||Oe||Be||ze)&&isMonthDisabled($e,n.props))!==null&&Re!==void 0?Re:!1,labelDate:$e}},n.isMonthDisabled=function(Ee){var Re=n.isMonthDisabledForLabelDate(Ee).isDisabled;return Re},n.getMonthClassNames=function(Ee){var Re=n.props,Ce=Re.day,Te=Re.startDate,Me=Re.endDate,De=Re.preSelection,Oe=Re.monthClassName,Be=Oe?Oe(setMonth(Ce,Ee)):void 0,ze=n.getSelection();return clsx("react-datepicker__month-text","react-datepicker__month-".concat(Ee),Be,{"react-datepicker__month-text--disabled":n.isMonthDisabled(Ee),"react-datepicker__month-text--selected":ze?n.isSelectMonthInList(Ce,Ee,ze):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&De&&n.isSelectedMonth(Ce,Ee,De)&&!n.isMonthSelected()&&!n.isMonthDisabled(Ee),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(Ee),"react-datepicker__month-text--in-range":Te&&Me?isMonthInRange(Te,Me,Ee,Ce):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(Ee),"react-datepicker__month-text--range-end":n.isRangeEndMonth(Ee),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(Ee),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(Ee),"react-datepicker__month-text--today":n.isCurrentMonth(Ce,Ee)})},n.getTabIndex=function(Ee){if(n.props.preSelection==null)return"-1";var Re=getMonth(n.props.preSelection),Ce=n.isMonthDisabledForLabelDate(Re).isDisabled,Te=Ee===Re&&!(Ce||n.props.disabledKeyboardNavigation)?"0":"-1";return Te},n.getQuarterTabIndex=function(Ee){if(n.props.preSelection==null)return"-1";var Re=getQuarter(n.props.preSelection),Ce=isQuarterDisabled(n.props.day,n.props),Te=Ee===Re&&!(Ce||n.props.disabledKeyboardNavigation)?"0":"-1";return Te},n.getAriaLabel=function(Ee){var Re=n.props,Ce=Re.chooseDayAriaLabelPrefix,Te=Ce===void 0?"Choose":Ce,Me=Re.disabledDayAriaLabelPrefix,De=Me===void 0?"Not available":Me,Oe=Re.day,Be=Re.locale,ze=setMonth(Oe,Ee),$e=n.isDisabled(ze)||n.isExcluded(ze)?De:Te;return"".concat($e," ").concat(formatDate(ze,"MMMM yyyy",Be))},n.getQuarterClassNames=function(Ee){var Re=n.props,Ce=Re.day,Te=Re.startDate,Me=Re.endDate,De=Re.minDate,Oe=Re.maxDate,Be=Re.excludeDates,ze=Re.includeDates,$e=Re.filterDate,He=Re.preSelection,Ue=Re.disabledKeyboardNavigation,Ve=Re.disabled,We=(De||Oe||Be||ze||$e||Ve)&&isQuarterDisabled(setQuarter(Ce,Ee),n.props),qe=n.getSelection();return clsx("react-datepicker__quarter-text","react-datepicker__quarter-".concat(Ee),{"react-datepicker__quarter-text--disabled":We,"react-datepicker__quarter-text--selected":qe?n.isSelectQuarterInList(Ce,Ee,qe):void 0,"react-datepicker__quarter-text--keyboard-selected":!Ue&&He&&n.isSelectedQuarter(Ce,Ee,He)&&!n.isQuarterSelected()&&!We,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(Ee),"react-datepicker__quarter-text--in-range":Te&&Me?isQuarterInRange(Te,Me,Ee,Ce):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(Ee),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(Ee),"react-datepicker__quarter-text--today":n.isCurrentQuarter(Ce,Ee)})},n.getMonthContent=function(Ee){var Re=n.props,Ce=Re.showFullMonthYearPicker,Te=Re.renderMonthContent,Me=Re.locale,De=Re.day,Oe=getMonthShortInLocale(Ee,Me),Be=getMonthInLocale(Ee,Me);return Te?Te(Ee,Oe,Be,De):Ce?Be:Oe},n.getQuarterContent=function(Ee){var Re,Ce=n.props,Te=Ce.renderQuarterContent,Me=Ce.locale,De=getQuarterShortInLocale(Ee,Me);return(Re=Te==null?void 0:Te(Ee,De))!==null&&Re!==void 0?Re:De},n.renderMonths=function(){var Ee,Re=n.props,Ce=Re.showTwoColumnMonthYearPicker,Te=Re.showFourColumnMonthYearPicker,Me=Re.day,De=Re.selected,Oe=(Ee=MONTH_COLUMNS[getMonthColumnsLayout(Te,Ce)])===null||Ee===void 0?void 0:Ee.grid;return Oe==null?void 0:Oe.map(function(Be,ze){return React4.createElement("div",{className:"react-datepicker__month-wrapper",key:ze},Be.map(function($e,He){return React4.createElement("div",{ref:n.MONTH_REFS[$e],key:He,onClick:function(Ue){n.onMonthClick(Ue,$e)},onKeyDown:function(Ue){isSpaceKeyDown(Ue)&&(Ue.preventDefault(),Ue.key=KeyType.Enter),n.onMonthKeyDown(Ue,$e)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter($e)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter($e)}:void 0,tabIndex:Number(n.getTabIndex($e)),className:n.getMonthClassNames($e),"aria-disabled":n.isMonthDisabled($e),role:"option","aria-label":n.getAriaLabel($e),"aria-current":n.isCurrentMonth(Me,$e)?"date":void 0,"aria-selected":De?n.isSelectedMonth(Me,$e,De):void 0},n.getMonthContent($e))}))})},n.renderQuarters=function(){var Ee=n.props,Re=Ee.day,Ce=Ee.selected,Te=[1,2,3,4];return React4.createElement("div",{className:"react-datepicker__quarter-wrapper"},Te.map(function(Me,De){return React4.createElement("div",{key:De,ref:n.QUARTER_REFS[De],role:"option",onClick:function(Oe){n.onQuarterClick(Oe,Me)},onKeyDown:function(Oe){n.onQuarterKeyDown(Oe,Me)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(Me)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(Me)}:void 0,className:n.getQuarterClassNames(Me),"aria-selected":Ce?n.isSelectedQuarter(Re,Me,Ce):void 0,tabIndex:Number(n.getQuarterTabIndex(Me)),"aria-current":n.isCurrentQuarter(Re,Me)?"date":void 0},n.getQuarterContent(Me))}))},n.getClassNames=function(){var Ee=n.props,Re=Ee.selectingDate,Ce=Ee.selectsStart,Te=Ee.selectsEnd,Me=Ee.showMonthYearPicker,De=Ee.showQuarterYearPicker,Oe=Ee.showWeekPicker;return clsx("react-datepicker__month",{"react-datepicker__month--selecting-range":Re&&(Ce||Te)},{"react-datepicker__monthPicker":Me},{"react-datepicker__quarterPicker":De},{"react-datepicker__weekPicker":Oe})},n}return t.prototype.getSelection=function(){var n=this.props,Ee=n.selected,Re=n.selectedDates,Ce=n.selectsMultiple;if(Ce)return Re;if(Ee)return[Ee]},t.prototype.render=function(){var n=this.props,Ee=n.showMonthYearPicker,Re=n.showQuarterYearPicker,Ce=n.day,Te=n.ariaLabelPrefix,Me=Te===void 0?"Month ":Te,De=Me?Me.trim()+" ":"",Oe=isValid(Ce)?"".concat(De).concat(formatDate(Ce,"MMMM, yyyy",this.props.locale)):"",Be=Ee||Re;return Be?React4.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":Oe,role:"listbox"},Ee?this.renderMonths():this.renderQuarters()):React4.createElement("div",{role:"table"},this.props.dayNamesHeader&&React4.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),this.props.monthHeader&&React4.createElement("div",{role:"rowgroup"},this.props.monthHeader),React4.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":Oe,role:"rowgroup"},this.renderWeeks()),this.props.monthFooter&&React4.createElement("div",{role:"rowgroup"},this.props.monthFooter))},t}(reactExports.Component),MonthDropdownOptions=function(e){__extends$1(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.monthOptionButtonsRef={},n.isSelectedMonth=function(Ee){return n.props.month===Ee},n.handleOptionKeyDown=function(Ee,Re){var Ce;switch(Re.key){case"Enter":Re.preventDefault(),n.onChange(Ee);break;case"Escape":Re.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{Re.preventDefault();var Te=(Ee+(Re.key==="ArrowUp"?-1:1)+n.props.monthNames.length)%n.props.monthNames.length;(Ce=n.monthOptionButtonsRef[Te])===null||Ce===void 0||Ce.focus();break}}},n.renderOptions=function(){return n.monthOptionButtonsRef={},n.props.monthNames.map(function(Ee,Re){return React4.createElement("div",{ref:function(Ce){n.monthOptionButtonsRef[Re]=Ce,n.isSelectedMonth(Re)&&(Ce==null||Ce.focus())},role:"button",tabIndex:0,className:n.isSelectedMonth(Re)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:Ee,onClick:n.onChange.bind(n,Re),onKeyDown:n.handleOptionKeyDown.bind(n,Re),"aria-selected":n.isSelectedMonth(Re)?"true":void 0},n.isSelectedMonth(Re)?React4.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",Ee)})},n.onChange=function(Ee){return n.props.onChange(Ee)},n.handleClickOutside=function(){return n.props.onCancel()},n}return t.prototype.render=function(){return React4.createElement(ClickOutsideWrapper,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(reactExports.Component),MonthDropdown=function(e){__extends$1(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(Ee){return Ee.map(function(Re,Ce){return React4.createElement("option",{key:Re,value:Ce},Re)})},n.renderSelectMode=function(Ee){return React4.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(Re){return n.onChange(parseInt(Re.target.value))}},n.renderSelectOptions(Ee))},n.renderReadView=function(Ee,Re){return React4.createElement("button",{key:"read",type:"button",style:{visibility:Ee?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},React4.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),React4.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},Re[n.props.month]))},n.renderDropdown=function(Ee){return React4.createElement(MonthDropdownOptions,_assign({key:"dropdown"},n.props,{monthNames:Ee,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(Ee){var Re=n.state.dropdownVisible,Ce=[n.renderReadView(!Re,Ee)];return Re&&Ce.unshift(n.renderDropdown(Ee)),Ce},n.onChange=function(Ee){n.toggleDropdown(),Ee!==n.props.month&&n.props.onChange(Ee)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n=this,Ee=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(Ce){return getMonthShortInLocale(Ce,n.props.locale)}:function(Ce){return getMonthInLocale(Ce,n.props.locale)}),Re;switch(this.props.dropdownMode){case"scroll":Re=this.renderScrollMode(Ee);break;case"select":Re=this.renderSelectMode(Ee);break}return React4.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},Re)},t}(reactExports.Component);function generateMonthYears(e,t){for(var n=[],Ee=getStartOfMonth(e),Re=getStartOfMonth(t);!isAfter(Ee,Re);)n.push(newDate(Ee)),Ee=addMonths(Ee,1);return n}var MonthYearDropdownOptions=function(e){__extends$1(t,e);function t(n){var Ee=e.call(this,n)||this;return Ee.renderOptions=function(){return Ee.state.monthYearsList.map(function(Re){var Ce=getTime(Re),Te=isSameYear(Ee.props.date,Re)&&isSameMonth(Ee.props.date,Re);return React4.createElement("div",{className:Te?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:Ce,onClick:Ee.onChange.bind(Ee,Ce),"aria-selected":Te?"true":void 0},Te?React4.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",formatDate(Re,Ee.props.dateFormat,Ee.props.locale))})},Ee.onChange=function(Re){return Ee.props.onChange(Re)},Ee.handleClickOutside=function(){Ee.props.onCancel()},Ee.state={monthYearsList:generateMonthYears(Ee.props.minDate,Ee.props.maxDate)},Ee}return t.prototype.render=function(){var n=clsx({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return React4.createElement(ClickOutsideWrapper,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(reactExports.Component),MonthYearDropdown=function(e){__extends$1(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var Ee=getStartOfMonth(n.props.minDate),Re=getStartOfMonth(n.props.maxDate),Ce=[];!isAfter(Ee,Re);){var Te=getTime(Ee);Ce.push(React4.createElement("option",{key:Te,value:Te},formatDate(Ee,n.props.dateFormat,n.props.locale))),Ee=addMonths(Ee,1)}return Ce},n.onSelectChange=function(Ee){n.onChange(parseInt(Ee.target.value))},n.renderSelectMode=function(){return React4.createElement("select",{value:getTime(getStartOfMonth(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(Ee){var Re=formatDate(n.props.date,n.props.dateFormat,n.props.locale);return React4.createElement("div",{key:"read",style:{visibility:Ee?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},React4.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),React4.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},Re))},n.renderDropdown=function(){return React4.createElement(MonthYearDropdownOptions,_assign({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var Ee=n.state.dropdownVisible,Re=[n.renderReadView(!Ee)];return Ee&&Re.unshift(n.renderDropdown()),Re},n.onChange=function(Ee){n.toggleDropdown();var Re=newDate(Ee);isSameYear(n.props.date,Re)&&isSameMonth(n.props.date,Re)||n.props.onChange(Re)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return React4.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(reactExports.Component),Time=function(e){__extends$1(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var Ee,Re,Ce;n.list&&(n.list.scrollTop=(Ce=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((Re=(Ee=n.header)===null||Ee===void 0?void 0:Ee.clientHeight)!==null&&Re!==void 0?Re:0):n.list.clientHeight,n.centerLi))!==null&&Ce!==void 0?Ce:0)})},n.handleClick=function(Ee){var Re,Ce;(n.props.minTime||n.props.maxTime)&&isTimeInDisabledRange(Ee,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&isTimeDisabled(Ee,n.props)||(Ce=(Re=n.props).onChange)===null||Ce===void 0||Ce.call(Re,Ee)},n.isSelectedTime=function(Ee){return n.props.selected&&isSameMinute(n.props.selected,Ee)},n.isDisabledTime=function(Ee){return(n.props.minTime||n.props.maxTime)&&isTimeInDisabledRange(Ee,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&isTimeDisabled(Ee,n.props)},n.liClasses=function(Ee){var Re,Ce=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(Ee):void 0];return n.isSelectedTime(Ee)&&Ce.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(Ee)&&Ce.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(getHours(Ee)*3600+getMinutes(Ee)*60+getSeconds(Ee))%(((Re=n.props.intervals)!==null&&Re!==void 0?Re:t.defaultProps.intervals)*60)!==0&&Ce.push("react-datepicker__time-list-item--injected"),Ce.join(" ")},n.handleOnKeyDown=function(Ee,Re){var Ce,Te;Ee.key===KeyType.Space&&(Ee.preventDefault(),Ee.key=KeyType.Enter),(Ee.key===KeyType.ArrowUp||Ee.key===KeyType.ArrowLeft)&&Ee.target instanceof HTMLElement&&Ee.target.previousSibling&&(Ee.preventDefault(),Ee.target.previousSibling instanceof HTMLElement&&Ee.target.previousSibling.focus()),(Ee.key===KeyType.ArrowDown||Ee.key===KeyType.ArrowRight)&&Ee.target instanceof HTMLElement&&Ee.target.nextSibling&&(Ee.preventDefault(),Ee.target.nextSibling instanceof HTMLElement&&Ee.target.nextSibling.focus()),Ee.key===KeyType.Enter&&n.handleClick(Re),(Te=(Ce=n.props).handleOnKeyDown)===null||Te===void 0||Te.call(Ce,Ee)},n.renderTimes=function(){for(var Ee,Re=[],Ce=typeof n.props.format=="string"?n.props.format:"p",Te=(Ee=n.props.intervals)!==null&&Ee!==void 0?Ee:t.defaultProps.intervals,Me=n.props.selected||n.props.openToDate||newDate(),De=getStartOfDay(Me),Oe=n.props.injectTimes&&n.props.injectTimes.sort(function(We,qe){return We.getTime()-qe.getTime()}),Be=60*getHoursInDay(Me),ze=Be/Te,$e=0;$e<ze;$e++){var He=addMinutes(De,$e*Te);if(Re.push(He),Oe){var Ue=timesToInjectAfter(De,He,$e,Te,Oe);Re=Re.concat(Ue)}}var Ve=Re.reduce(function(We,qe){return qe.getTime()<=Me.getTime()?qe:We},Re[0]);return Re.map(function(We){return React4.createElement("li",{key:We.valueOf(),onClick:n.handleClick.bind(n,We),className:n.liClasses(We),ref:function(qe){We===Ve&&(n.centerLi=qe)},onKeyDown:function(qe){n.handleOnKeyDown(qe,We)},tabIndex:We===Ve?0:-1,role:"option","aria-selected":n.isSelectedTime(We)?"true":void 0,"aria-disabled":n.isDisabledTime(We)?"true":void 0},formatDate(We,Ce,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?React4.createElement(React4.Fragment,null):React4.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(Ee){n.header=Ee}},React4.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var n=this,Ee=this.props.monthRef;this.updateContainerHeight(),Ee&&(this.resizeObserver=new ResizeObserver(function(){n.updateContainerHeight()}),this.resizeObserver.observe(Ee))},t.prototype.updateContainerHeight=function(){if(this.props.monthRef&&this.header){var n=this.props.monthRef.clientHeight-this.header.clientHeight;this.state.height!==n&&this.setState({height:n})}},t.prototype.render=function(){var n=this,Ee,Re=this.state.height;return React4.createElement("div",{className:"react-datepicker__time-container ".concat(((Ee=this.props.todayButton)!==null&&Ee!==void 0?Ee:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),React4.createElement("div",{className:"react-datepicker__time"},React4.createElement("div",{className:"react-datepicker__time-box"},React4.createElement("ul",{className:"react-datepicker__time-list",ref:function(Ce){n.list=Ce},style:Re?{height:Re}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(n,Ee){return Ee.offsetTop-(n/2-Ee.clientHeight/2)},t}(reactExports.Component),VERTICAL_NAVIGATION_OFFSET=3,Year=function(e){__extends$1(t,e);function t(n){var Ee=e.call(this,n)||this;return Ee.YEAR_REFS=__spreadArray([],Array(Ee.props.yearItemNumber),!0).map(function(){return reactExports.createRef()}),Ee.isDisabled=function(Re){return isDayDisabled(Re,{minDate:Ee.props.minDate,maxDate:Ee.props.maxDate,excludeDates:Ee.props.excludeDates,includeDates:Ee.props.includeDates,filterDate:Ee.props.filterDate})},Ee.isExcluded=function(Re){return isDayExcluded(Re,{excludeDates:Ee.props.excludeDates})},Ee.selectingDate=function(){var Re;return(Re=Ee.props.selectingDate)!==null&&Re!==void 0?Re:Ee.props.preSelection},Ee.updateFocusOnPaginate=function(Re){var Ce=function(){var Te,Me;(Me=(Te=Ee.YEAR_REFS[Re])===null||Te===void 0?void 0:Te.current)===null||Me===void 0||Me.focus()};window.requestAnimationFrame(Ce)},Ee.handleYearClick=function(Re,Ce){Ee.props.onDayClick&&Ee.props.onDayClick(Re,Ce)},Ee.handleYearNavigation=function(Re,Ce){var Te,Me,De,Oe,Be=Ee.props,ze=Be.date,$e=Be.yearItemNumber;if(!(ze===void 0||$e===void 0)){var He=getYearsPeriod(ze,$e).startPeriod;Ee.isDisabled(Ce)||Ee.isExcluded(Ce)||((Me=(Te=Ee.props).setPreSelection)===null||Me===void 0||Me.call(Te,Ce),Re-He<0?Ee.updateFocusOnPaginate($e-(He-Re)):Re-He>=$e?Ee.updateFocusOnPaginate(Math.abs($e-(Re-He))):(Oe=(De=Ee.YEAR_REFS[Re-He])===null||De===void 0?void 0:De.current)===null||Oe===void 0||Oe.focus())}},Ee.isSameDay=function(Re,Ce){return isSameDay(Re,Ce)},Ee.isCurrentYear=function(Re){return Re===getYear(newDate())},Ee.isRangeStart=function(Re){return Ee.props.startDate&&Ee.props.endDate&&isSameYear(setYear(newDate(),Re),Ee.props.startDate)},Ee.isRangeEnd=function(Re){return Ee.props.startDate&&Ee.props.endDate&&isSameYear(setYear(newDate(),Re),Ee.props.endDate)},Ee.isInRange=function(Re){return isYearInRange(Re,Ee.props.startDate,Ee.props.endDate)},Ee.isInSelectingRange=function(Re){var Ce=Ee.props,Te=Ce.selectsStart,Me=Ce.selectsEnd,De=Ce.selectsRange,Oe=Ce.startDate,Be=Ce.endDate;return!(Te||Me||De)||!Ee.selectingDate()?!1:Te&&Be?isYearInRange(Re,Ee.selectingDate(),Be):Me&&Oe||De&&Oe&&!Be?isYearInRange(Re,Oe,Ee.selectingDate()):!1},Ee.isSelectingRangeStart=function(Re){var Ce;if(!Ee.isInSelectingRange(Re))return!1;var Te=Ee.props,Me=Te.startDate,De=Te.selectsStart,Oe=setYear(newDate(),Re);return De?isSameYear(Oe,(Ce=Ee.selectingDate())!==null&&Ce!==void 0?Ce:null):isSameYear(Oe,Me??null)},Ee.isSelectingRangeEnd=function(Re){var Ce;if(!Ee.isInSelectingRange(Re))return!1;var Te=Ee.props,Me=Te.endDate,De=Te.selectsEnd,Oe=Te.selectsRange,Be=setYear(newDate(),Re);return De||Oe?isSameYear(Be,(Ce=Ee.selectingDate())!==null&&Ce!==void 0?Ce:null):isSameYear(Be,Me??null)},Ee.isKeyboardSelected=function(Re){if(!(Ee.props.disabledKeyboardNavigation||Ee.props.date===void 0||Ee.props.preSelection==null)){var Ce=Ee.props,Te=Ce.minDate,Me=Ce.maxDate,De=Ce.excludeDates,Oe=Ce.includeDates,Be=Ce.filterDate,ze=Ce.selected,$e=getStartOfYear(setYear(Ee.props.date,Re)),He=(Te||Me||De||Oe||Be)&&isYearDisabled(Re,Ee.props),Ue=!!ze&&isSameDay($e,getStartOfYear(ze)),Ve=isSameDay($e,getStartOfYear(Ee.props.preSelection));return!Ee.props.inline&&!Ue&&Ve&&!He}},Ee.isSelectedYear=function(Re){var Ce=Ee.props,Te=Ce.selectsMultiple,Me=Ce.selected,De=Ce.selectedDates;return Te?De==null?void 0:De.some(function(Oe){return Re===getYear(Oe)}):!!Me&&Re===getYear(Me)},Ee.onYearClick=function(Re,Ce){var Te=Ee.props.date;Te!==void 0&&Ee.handleYearClick(getStartOfYear(setYear(Te,Ce)),Re)},Ee.onYearKeyDown=function(Re,Ce){var Te,Me,De=Re.key,Oe=Ee.props,Be=Oe.date,ze=Oe.yearItemNumber,$e=Oe.handleOnKeyDown;if(De!==KeyType.Tab&&Re.preventDefault(),!Ee.props.disabledKeyboardNavigation)switch(De){case KeyType.Enter:if(Ee.props.selected==null)break;Ee.onYearClick(Re,Ce),(Me=(Te=Ee.props).setPreSelection)===null||Me===void 0||Me.call(Te,Ee.props.selected);break;case KeyType.ArrowRight:if(Ee.props.preSelection==null)break;Ee.handleYearNavigation(Ce+1,addYears(Ee.props.preSelection,1));break;case KeyType.ArrowLeft:if(Ee.props.preSelection==null)break;Ee.handleYearNavigation(Ce-1,subYears(Ee.props.preSelection,1));break;case KeyType.ArrowUp:{if(Be===void 0||ze===void 0||Ee.props.preSelection==null)break;var He=getYearsPeriod(Be,ze).startPeriod,Ue=VERTICAL_NAVIGATION_OFFSET,Ve=Ce-Ue;if(Ve<He){var We=ze%Ue;Ce>=He&&Ce<He+We?Ue=We:Ue+=We,Ve=Ce-Ue}Ee.handleYearNavigation(Ve,subYears(Ee.props.preSelection,Ue));break}case KeyType.ArrowDown:{if(Be===void 0||ze===void 0||Ee.props.preSelection==null)break;var qe=getYearsPeriod(Be,ze).endPeriod,Ue=VERTICAL_NAVIGATION_OFFSET,Ve=Ce+Ue;if(Ve>qe){var We=ze%Ue;Ce<=qe&&Ce>qe-We?Ue=We:Ue+=We,Ve=Ce+Ue}Ee.handleYearNavigation(Ve,addYears(Ee.props.preSelection,Ue));break}}$e&&$e(Re)},Ee.getYearClassNames=function(Re){var Ce=Ee.props,Te=Ce.date,Me=Ce.disabled,De=Ce.minDate,Oe=Ce.maxDate,Be=Ce.excludeDates,ze=Ce.includeDates,$e=Ce.filterDate,He=Ce.yearClassName;return clsx("react-datepicker__year-text","react-datepicker__year-".concat(Re),Te?He==null?void 0:He(setYear(Te,Re)):void 0,{"react-datepicker__year-text--selected":Ee.isSelectedYear(Re),"react-datepicker__year-text--disabled":(De||Oe||Be||ze||$e||Me)&&isYearDisabled(Re,Ee.props),"react-datepicker__year-text--keyboard-selected":Ee.isKeyboardSelected(Re),"react-datepicker__year-text--range-start":Ee.isRangeStart(Re),"react-datepicker__year-text--range-end":Ee.isRangeEnd(Re),"react-datepicker__year-text--in-range":Ee.isInRange(Re),"react-datepicker__year-text--in-selecting-range":Ee.isInSelectingRange(Re),"react-datepicker__year-text--selecting-range-start":Ee.isSelectingRangeStart(Re),"react-datepicker__year-text--selecting-range-end":Ee.isSelectingRangeEnd(Re),"react-datepicker__year-text--today":Ee.isCurrentYear(Re)})},Ee.getYearTabIndex=function(Re){if(Ee.props.disabledKeyboardNavigation||Ee.props.preSelection==null)return"-1";var Ce=getYear(Ee.props.preSelection),Te=isYearDisabled(Re,Ee.props);return Re===Ce&&!Te?"0":"-1"},Ee.getYearContent=function(Re){return Ee.props.renderYearContent?Ee.props.renderYearContent(Re):Re},Ee}return t.prototype.render=function(){var n=this,Ee=[],Re=this.props,Ce=Re.date,Te=Re.yearItemNumber,Me=Re.onYearMouseEnter,De=Re.onYearMouseLeave;if(Ce===void 0)return null;for(var Oe=getYearsPeriod(Ce,Te),Be=Oe.startPeriod,ze=Oe.endPeriod,$e=function(Ve){Ee.push(React4.createElement("div",{ref:He.YEAR_REFS[Ve-Be],onClick:function(We){n.onYearClick(We,Ve)},onKeyDown:function(We){isSpaceKeyDown(We)&&(We.preventDefault(),We.key=KeyType.Enter),n.onYearKeyDown(We,Ve)},tabIndex:Number(He.getYearTabIndex(Ve)),className:He.getYearClassNames(Ve),onMouseEnter:He.props.usePointerEvent?void 0:function(We){return Me(We,Ve)},onPointerEnter:He.props.usePointerEvent?function(We){return Me(We,Ve)}:void 0,onMouseLeave:He.props.usePointerEvent?void 0:function(We){return De(We,Ve)},onPointerLeave:He.props.usePointerEvent?function(We){return De(We,Ve)}:void 0,key:Ve,"aria-current":He.isCurrentYear(Ve)?"date":void 0},He.getYearContent(Ve)))},He=this,Ue=Be;Ue<=ze;Ue++)$e(Ue);return React4.createElement("div",{className:"react-datepicker__year"},React4.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},Ee))},t}(reactExports.Component);function generateYears(e,t,n,Ee){for(var Re=[],Ce=0;Ce<2*t+1;Ce++){var Te=e+t-Ce,Me=!0;n&&(Me=getYear(n)<=Te),Ee&&Me&&(Me=getYear(Ee)>=Te),Me&&Re.push(Te)}return Re}var YearDropdownOptions=function(e){__extends$1(t,e);function t(n){var Ee=e.call(this,n)||this;Ee.yearOptionButtonsRef={},Ee.handleOptionKeyDown=function(Me,De){var Oe;switch(De.key){case"Enter":De.preventDefault(),Ee.onChange(Me);break;case"Escape":De.preventDefault(),Ee.props.onCancel();break;case"ArrowUp":case"ArrowDown":{De.preventDefault();var Be=Me+(De.key==="ArrowUp"?1:-1);Ee.yearOptionButtonsRef[Be]&&((Oe=Ee.yearOptionButtonsRef[Be])===null||Oe===void 0||Oe.focus());break}}},Ee.renderOptions=function(){Ee.yearOptionButtonsRef={};var Me=Ee.props.year,De=Ee.state.yearsList.map(function(ze){return React4.createElement("div",{ref:function($e){Ee.yearOptionButtonsRef[ze]=$e,ze===Me&&($e==null||$e.focus())},role:"button",tabIndex:0,className:Me===ze?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:ze,onClick:Ee.onChange.bind(Ee,ze),onKeyDown:Ee.handleOptionKeyDown.bind(Ee,ze),"aria-selected":Me===ze?"true":void 0},Me===ze?React4.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",ze)}),Oe=Ee.props.minDate?getYear(Ee.props.minDate):null,Be=Ee.props.maxDate?getYear(Ee.props.maxDate):null;return(!Be||!Ee.state.yearsList.find(function(ze){return ze===Be}))&&De.unshift(React4.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:Ee.incrementYears},React4.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!Oe||!Ee.state.yearsList.find(function(ze){return ze===Oe}))&&De.push(React4.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:Ee.decrementYears},React4.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),De},Ee.onChange=function(Me){Ee.props.onChange(Me)},Ee.handleClickOutside=function(){Ee.props.onCancel()},Ee.shiftYears=function(Me){var De=Ee.state.yearsList.map(function(Oe){return Oe+Me});Ee.setState({yearsList:De})},Ee.incrementYears=function(){return Ee.shiftYears(1)},Ee.decrementYears=function(){return Ee.shiftYears(-1)};var Re=n.yearDropdownItemNumber,Ce=n.scrollableYearDropdown,Te=Re||(Ce?10:5);return Ee.state={yearsList:generateYears(Ee.props.year,Te,Ee.props.minDate,Ee.props.maxDate)},Ee.dropdownRef=reactExports.createRef(),Ee}return t.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var Ee=n.children?Array.from(n.children):null,Re=Ee?Ee.find(function(Ce){return Ce.ariaSelected}):null;n.scrollTop=Re&&Re instanceof HTMLElement?Re.offsetTop+(Re.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},t.prototype.render=function(){var n=clsx({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return React4.createElement(ClickOutsideWrapper,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(reactExports.Component),YearDropdown=function(e){__extends$1(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var Ee=n.props.minDate?getYear(n.props.minDate):1900,Re=n.props.maxDate?getYear(n.props.maxDate):2100,Ce=[],Te=Ee;Te<=Re;Te++)Ce.push(React4.createElement("option",{key:Te,value:Te},Te));return Ce},n.onSelectChange=function(Ee){n.onChange(parseInt(Ee.target.value))},n.renderSelectMode=function(){return React4.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(Ee){return React4.createElement("button",{key:"read",type:"button",style:{visibility:Ee?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:n.toggleDropdown},React4.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),React4.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return React4.createElement(YearDropdownOptions,_assign({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var Ee=n.state.dropdownVisible,Re=[n.renderReadView(!Ee)];return Ee&&Re.unshift(n.renderDropdown()),Re},n.onChange=function(Ee){n.toggleDropdown(),Ee!==n.props.year&&n.props.onChange(Ee)},n.toggleDropdown=function(Ee){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,Ee)})},n.handleYearChange=function(Ee,Re){var Ce;(Ce=n.onSelect)===null||Ce===void 0||Ce.call(n,Ee,Re),n.setOpen()},n.onSelect=function(Ee,Re){var Ce,Te;(Te=(Ce=n.props).onSelect)===null||Te===void 0||Te.call(Ce,Ee,Re)},n.setOpen=function(){var Ee,Re;(Re=(Ee=n.props).setOpen)===null||Re===void 0||Re.call(Ee,!0)},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return React4.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(reactExports.Component),DROPDOWN_FOCUS_CLASSNAMES=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],OUTSIDE_CLICK_IGNORE_CLASS="react-datepicker-ignore-onclickoutside",isDropdownSelect=function(e){var t=(e.className||"").split(/\s+/);return DROPDOWN_FOCUS_CLASSNAMES.some(function(n){return t.indexOf(n)>=0})},Calendar=function(e){__extends$1(t,e);function t(n){var Ee=e.call(this,n)||this;return Ee.monthContainer=void 0,Ee.handleClickOutside=function(Re){Ee.props.onClickOutside(Re)},Ee.setClickOutsideRef=function(){return Ee.containerRef.current},Ee.handleDropdownFocus=function(Re){var Ce,Te;isDropdownSelect(Re.target)&&((Te=(Ce=Ee.props).onDropdownFocus)===null||Te===void 0||Te.call(Ce,Re))},Ee.getDateInView=function(){var Re=Ee.props,Ce=Re.preSelection,Te=Re.selected,Me=Re.openToDate,De=getEffectiveMinDate(Ee.props),Oe=getEffectiveMaxDate(Ee.props),Be=newDate(),ze=Me||Te||Ce;return ze||(De&&isBefore(Be,De)?De:Oe&&isAfter(Be,Oe)?Oe:Be)},Ee.increaseMonth=function(){Ee.setState(function(Re){var Ce=Re.date;return{date:addMonths(Ce,1)}},function(){return Ee.handleMonthChange(Ee.state.date)})},Ee.decreaseMonth=function(){Ee.setState(function(Re){var Ce=Re.date;return{date:subMonths(Ce,1)}},function(){return Ee.handleMonthChange(Ee.state.date)})},Ee.handleDayClick=function(Re,Ce,Te){Ee.props.onSelect(Re,Ce,Te),Ee.props.setPreSelection&&Ee.props.setPreSelection(Re)},Ee.handleDayMouseEnter=function(Re){Ee.setState({selectingDate:Re}),Ee.props.onDayMouseEnter&&Ee.props.onDayMouseEnter(Re)},Ee.handleMonthMouseLeave=function(){Ee.setState({selectingDate:void 0}),Ee.props.onMonthMouseLeave&&Ee.props.onMonthMouseLeave()},Ee.handleYearMouseEnter=function(Re,Ce){Ee.setState({selectingDate:setYear(newDate(),Ce)}),Ee.props.onYearMouseEnter&&Ee.props.onYearMouseEnter(Re,Ce)},Ee.handleYearMouseLeave=function(Re,Ce){Ee.props.onYearMouseLeave&&Ee.props.onYearMouseLeave(Re,Ce)},Ee.handleYearChange=function(Re){var Ce,Te,Me,De;(Te=(Ce=Ee.props).onYearChange)===null||Te===void 0||Te.call(Ce,Re),Ee.setState({isRenderAriaLiveMessage:!0}),Ee.props.adjustDateOnChange&&(Ee.props.onSelect(Re),(De=(Me=Ee.props).setOpen)===null||De===void 0||De.call(Me,!0)),Ee.props.setPreSelection&&Ee.props.setPreSelection(Re)},Ee.getEnabledPreSelectionDateForMonth=function(Re){if(!isDayDisabled(Re,Ee.props))return Re;for(var Ce=getStartOfMonth(Re),Te=getEndOfMonth(Re),Me=differenceInDays(Te,Ce),De=null,Oe=0;Oe<=Me;Oe++){var Be=addDays(Ce,Oe);if(!isDayDisabled(Be,Ee.props)){De=Be;break}}return De},Ee.handleMonthChange=function(Re){var Ce,Te,Me,De=(Ce=Ee.getEnabledPreSelectionDateForMonth(Re))!==null&&Ce!==void 0?Ce:Re;Ee.handleCustomMonthChange(De),Ee.props.adjustDateOnChange&&(Ee.props.onSelect(De),(Me=(Te=Ee.props).setOpen)===null||Me===void 0||Me.call(Te,!0)),Ee.props.setPreSelection&&Ee.props.setPreSelection(De)},Ee.handleCustomMonthChange=function(Re){var Ce,Te;(Te=(Ce=Ee.props).onMonthChange)===null||Te===void 0||Te.call(Ce,Re),Ee.setState({isRenderAriaLiveMessage:!0})},Ee.handleMonthYearChange=function(Re){Ee.handleYearChange(Re),Ee.handleMonthChange(Re)},Ee.changeYear=function(Re){Ee.setState(function(Ce){var Te=Ce.date;return{date:setYear(Te,Number(Re))}},function(){return Ee.handleYearChange(Ee.state.date)})},Ee.changeMonth=function(Re){Ee.setState(function(Ce){var Te=Ce.date;return{date:setMonth(Te,Number(Re))}},function(){var Ce,Te;Ee.handleMonthChange(Ee.state.date),(Te=(Ce=Ee.props).onMonthSelectedInChange)===null||Te===void 0||Te.call(Ce,0)})},Ee.changeMonthYear=function(Re){Ee.setState(function(Ce){var Te=Ce.date;return{date:setYear(setMonth(Te,getMonth(Re)),getYear(Re))}},function(){return Ee.handleMonthYearChange(Ee.state.date)})},Ee.header=function(Re,Ce){if(Re===void 0&&(Re=Ee.state.date),Ce===void 0&&(Ce=0),!isValid(Re))return[];var Te=Ee.props.disabled,Me=getStartOfWeek(Re,Ee.props.locale,Ee.props.calendarStartDay),De=[];return Ee.props.showWeekNumbers&&De.push(React4.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(Te?"react-datepicker__day-name--disabled":""),role:"columnheader"},React4.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),React4.createElement("span",{"aria-hidden":"true"},Ee.props.weekLabel||"#"))),De.concat([0,1,2,3,4,5,6].map(function(Oe){var Be=addDays(Me,Oe),ze=Ee.formatWeekday(Be,Ee.props.locale),$e=formatDate(Be,"EEEE",Ee.props.locale),He=Ee.props.weekDayClassName?Ee.props.weekDayClassName(Be):void 0;if(Ee.props.renderCustomDayName){var Ue=Ee.props.renderCustomDayName({day:Be,shortName:ze,fullName:$e,locale:Ee.props.locale,customDayNameCount:Ce});return React4.createElement("div",{key:Oe,role:"columnheader",className:clsx("react-datepicker__day-name",He,Te?"react-datepicker__day-name--disabled":"")},Ue)}return React4.createElement("div",{key:Oe,role:"columnheader",className:clsx("react-datepicker__day-name",He,Te?"react-datepicker__day-name--disabled":"")},React4.createElement("span",{className:"react-datepicker__sr-only"},$e),React4.createElement("span",{"aria-hidden":"true"},ze))}))},Ee.formatWeekday=function(Re,Ce){return Ee.props.formatWeekDay?getFormattedWeekdayInLocale(Re,Ee.props.formatWeekDay,Ce):Ee.props.useWeekdaysShort?getWeekdayShortInLocale(Re,Ce):getWeekdayMinInLocale(Re,Ce)},Ee.decreaseYear=function(){Ee.setState(function(Re){var Ce,Te=Re.date;return{date:subYears(Te,Ee.props.showYearPicker?(Ce=Ee.props.yearItemNumber)!==null&&Ce!==void 0?Ce:t.defaultProps.yearItemNumber:1)}},function(){return Ee.handleYearChange(Ee.state.date)})},Ee.clearSelectingDate=function(){Ee.setState({selectingDate:void 0})},Ee.renderPreviousButton=function(){var Re,Ce,Te;if(!Ee.props.renderCustomHeader){var Me=(Re=Ee.props.monthsShown)!==null&&Re!==void 0?Re:t.defaultProps.monthsShown,De=Ee.props.showPreviousMonths?Me-1:0,Oe=(Ce=Ee.props.monthSelectedIn)!==null&&Ce!==void 0?Ce:De,Be=subMonths(Ee.state.date,Oe),ze;switch(!0){case Ee.props.disabled:ze=!0;break;case Ee.props.showMonthYearPicker:ze=yearDisabledBefore(Ee.state.date,Ee.props);break;case Ee.props.showYearPicker:ze=yearsDisabledBefore(Ee.state.date,Ee.props);break;case Ee.props.showQuarterYearPicker:ze=quarterDisabledBefore(Ee.state.date,Ee.props);break;default:ze=monthDisabledBefore(Be,Ee.props);break}if(!(!((Te=Ee.props.forceShowMonthNavigation)!==null&&Te!==void 0?Te:t.defaultProps.forceShowMonthNavigation)&&!Ee.props.showDisabledMonthNavigation&&ze||Ee.props.showTimeSelectOnly)){var $e=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],He=["react-datepicker__navigation","react-datepicker__navigation--previous"],Ue=Ee.decreaseMonth;(Ee.props.showMonthYearPicker||Ee.props.showQuarterYearPicker||Ee.props.showYearPicker)&&(Ue=Ee.decreaseYear),ze&&Ee.props.showDisabledMonthNavigation&&(He.push("react-datepicker__navigation--previous--disabled"),Ue=void 0);var Ve=Ee.props.showMonthYearPicker||Ee.props.showQuarterYearPicker||Ee.props.showYearPicker,We=Ee.props,qe=We.previousMonthButtonLabel,Ge=qe===void 0?t.defaultProps.previousMonthButtonLabel:qe,Ye=We.previousYearButtonLabel,Ke=Ye===void 0?t.defaultProps.previousYearButtonLabel:Ye,Xe=Ee.props,Ze=Xe.previousMonthAriaLabel,er=Ze===void 0?typeof Ge=="string"?Ge:"Previous Month":Ze,St=Xe.previousYearAriaLabel,ar=St===void 0?typeof Ke=="string"?Ke:"Previous Year":St;return React4.createElement("button",{type:"button",className:He.join(" "),onClick:Ue,onKeyDown:Ee.props.handleOnKeyDown,"aria-label":Ve?ar:er},React4.createElement("span",{className:$e.join(" ")},Ve?Ke:Ge))}}},Ee.increaseYear=function(){Ee.setState(function(Re){var Ce,Te=Re.date;return{date:addYears(Te,Ee.props.showYearPicker?(Ce=Ee.props.yearItemNumber)!==null&&Ce!==void 0?Ce:t.defaultProps.yearItemNumber:1)}},function(){return Ee.handleYearChange(Ee.state.date)})},Ee.renderNextButton=function(){var Re;if(!Ee.props.renderCustomHeader){var Ce;switch(!0){case Ee.props.disabled:Ce=!0;break;case Ee.props.showMonthYearPicker:Ce=yearDisabledAfter(Ee.state.date,Ee.props);break;case Ee.props.showYearPicker:Ce=yearsDisabledAfter(Ee.state.date,Ee.props);break;case Ee.props.showQuarterYearPicker:Ce=quarterDisabledAfter(Ee.state.date,Ee.props);break;default:Ce=monthDisabledAfter(Ee.state.date,Ee.props);break}if(!(!((Re=Ee.props.forceShowMonthNavigation)!==null&&Re!==void 0?Re:t.defaultProps.forceShowMonthNavigation)&&!Ee.props.showDisabledMonthNavigation&&Ce||Ee.props.showTimeSelectOnly)){var Te=["react-datepicker__navigation","react-datepicker__navigation--next"],Me=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];Ee.props.showTimeSelect&&Te.push("react-datepicker__navigation--next--with-time"),Ee.props.todayButton&&Te.push("react-datepicker__navigation--next--with-today-button");var De=Ee.increaseMonth;(Ee.props.showMonthYearPicker||Ee.props.showQuarterYearPicker||Ee.props.showYearPicker)&&(De=Ee.increaseYear),Ce&&Ee.props.showDisabledMonthNavigation&&(Te.push("react-datepicker__navigation--next--disabled"),De=void 0);var Oe=Ee.props.showMonthYearPicker||Ee.props.showQuarterYearPicker||Ee.props.showYearPicker,Be=Ee.props,ze=Be.nextMonthButtonLabel,$e=ze===void 0?t.defaultProps.nextMonthButtonLabel:ze,He=Be.nextYearButtonLabel,Ue=He===void 0?t.defaultProps.nextYearButtonLabel:He,Ve=Ee.props,We=Ve.nextMonthAriaLabel,qe=We===void 0?typeof $e=="string"?$e:"Next Month":We,Ge=Ve.nextYearAriaLabel,Ye=Ge===void 0?typeof Ue=="string"?Ue:"Next Year":Ge;return React4.createElement("button",{type:"button",className:Te.join(" "),onClick:De,onKeyDown:Ee.props.handleOnKeyDown,"aria-label":Oe?Ye:qe},React4.createElement("span",{className:Me.join(" ")},Oe?Ue:$e))}}},Ee.renderCurrentMonth=function(Re){Re===void 0&&(Re=Ee.state.date);var Ce=["react-datepicker__current-month"];return Ee.props.showYearDropdown&&Ce.push("react-datepicker__current-month--hasYearDropdown"),Ee.props.showMonthDropdown&&Ce.push("react-datepicker__current-month--hasMonthDropdown"),Ee.props.showMonthYearDropdown&&Ce.push("react-datepicker__current-month--hasMonthYearDropdown"),React4.createElement("h2",{className:Ce.join(" ")},isValid(Re)?formatDate(Re,Ee.props.dateFormat,Ee.props.locale):"")},Ee.renderYearDropdown=function(Re){if(Re===void 0&&(Re=!1),!(!Ee.props.showYearDropdown||Re))return React4.createElement(YearDropdown,_assign({},t.defaultProps,Ee.props,{date:Ee.state.date,onChange:Ee.changeYear,year:getYear(Ee.state.date)}))},Ee.renderMonthDropdown=function(Re){if(Re===void 0&&(Re=!1),!(!Ee.props.showMonthDropdown||Re))return React4.createElement(MonthDropdown,_assign({},t.defaultProps,Ee.props,{month:getMonth(Ee.state.date),onChange:Ee.changeMonth}))},Ee.renderMonthYearDropdown=function(Re){if(Re===void 0&&(Re=!1),!(!Ee.props.showMonthYearDropdown||Re))return React4.createElement(MonthYearDropdown,_assign({},t.defaultProps,Ee.props,{date:Ee.state.date,onChange:Ee.changeMonthYear}))},Ee.handleTodayButtonClick=function(Re){Ee.props.onSelect(getStartOfToday(),Re),Ee.props.setPreSelection&&Ee.props.setPreSelection(getStartOfToday())},Ee.renderTodayButton=function(){if(!(!Ee.props.todayButton||Ee.props.showTimeSelectOnly))return React4.createElement("div",{className:"react-datepicker__today-button",onClick:Ee.handleTodayButtonClick},Ee.props.todayButton)},Ee.renderDayNamesHeader=function(Re,Ce){return Ce===void 0&&(Ce=0),React4.createElement("div",{className:"react-datepicker__day-names",role:"row"},Ee.header(Re,Ce))},Ee.renderDefaultHeader=function(Re){var Ce=Re.monthDate,Te=Re.i,Me=React4.createElement("div",{className:clsx("react-datepicker__header",{"react-datepicker__header--has-time-select":Ee.props.showTimeSelect,"react-datepicker__header--middle":Ee.props.monthHeaderPosition==="middle","react-datepicker__header--bottom":Ee.props.monthHeaderPosition==="bottom"})},Ee.renderCurrentMonth(Ce),React4.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(Ee.props.dropdownMode),onFocus:Ee.handleDropdownFocus},Ee.renderMonthDropdown(Te!==0),Ee.renderMonthYearDropdown(Te!==0),Ee.renderYearDropdown(Te!==0)));return Ee.props.monthHeaderPosition==="top"?Me:React4.createElement("div",{className:"react-datepicker__header-wrapper"},Ee.renderPreviousButton()||null,Ee.renderNextButton()||null,Me)},Ee.renderCustomHeader=function(Re){var Ce,Te,Me=Re.monthDate,De=Re.i;if(Ee.props.showTimeSelect&&!Ee.state.monthContainer||Ee.props.showTimeSelectOnly)return null;var Oe=Ee.props,Be=Oe.showYearPicker,ze=Oe.yearItemNumber,$e;if(Be){var He=getYearsPeriod(Me,ze),Ue=He.startPeriod,Ve=He.endPeriod;$e={startYear:Ue,endYear:Ve}}var We=monthDisabledBefore(Ee.state.date,Ee.props),qe=monthDisabledAfter(Ee.state.date,Ee.props),Ge=yearDisabledBefore(Ee.state.date,Ee.props),Ye=yearDisabledAfter(Ee.state.date,Ee.props);return React4.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:Ee.props.onDropdownFocus},(Te=(Ce=Ee.props).renderCustomHeader)===null||Te===void 0?void 0:Te.call(Ce,_assign(_assign(_assign({},Ee.state),Be&&{visibleYearsRange:$e}),{customHeaderCount:De,monthDate:Me,changeMonth:Ee.changeMonth,changeYear:Ee.changeYear,decreaseMonth:Ee.decreaseMonth,increaseMonth:Ee.increaseMonth,decreaseYear:Ee.decreaseYear,increaseYear:Ee.increaseYear,prevMonthButtonDisabled:We,nextMonthButtonDisabled:qe,prevYearButtonDisabled:Ge,nextYearButtonDisabled:Ye})))},Ee.renderYearHeader=function(Re){var Ce=Re.monthDate,Te=Ee.props,Me=Te.showYearPicker,De=Te.yearItemNumber,Oe=De===void 0?t.defaultProps.yearItemNumber:De,Be=getYearsPeriod(Ce,Oe),ze=Be.startPeriod,$e=Be.endPeriod;return React4.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},Me?"".concat(ze," - ").concat($e):getYear(Ce))},Ee.renderHeader=function(Re){var Ce=Re.monthDate,Te=Re.i,Me=Te===void 0?0:Te,De={monthDate:Ce,i:Me};switch(!0){case Ee.props.renderCustomHeader!==void 0:return Ee.renderCustomHeader(De);case(Ee.props.showMonthYearPicker||Ee.props.showQuarterYearPicker||Ee.props.showYearPicker):return Ee.renderYearHeader(De);default:return Ee.renderDefaultHeader(De)}},Ee.renderMonths=function(){var Re,Ce;if(!(Ee.props.showTimeSelectOnly||Ee.props.showYearPicker)){for(var Te=[],Me=(Re=Ee.props.monthsShown)!==null&&Re!==void 0?Re:t.defaultProps.monthsShown,De=Ee.props.showPreviousMonths?Me-1:0,Oe=Ee.props.showMonthYearPicker||Ee.props.showQuarterYearPicker?addYears(Ee.state.date,De):subMonths(Ee.state.date,De),Be=(Ce=Ee.props.monthSelectedIn)!==null&&Ce!==void 0?Ce:De,ze=0;ze<Me;++ze){var $e=ze-Be+De,He=Ee.props.showMonthYearPicker||Ee.props.showQuarterYearPicker?addYears(Oe,$e):addMonths(Oe,$e),Ue="month-".concat(ze),Ve=ze<Me-1,We=ze>0;Te.push(React4.createElement("div",{key:Ue,ref:function(qe){Ee.monthContainer=qe??void 0},className:"react-datepicker__month-container"},Ee.props.monthHeaderPosition==="top"&&Ee.renderHeader({monthDate:He,i:ze}),React4.createElement(Month,_assign({},t.defaultProps,Ee.props,{containerRef:Ee.containerRef,ariaLabelPrefix:Ee.props.monthAriaLabelPrefix,day:He,onDayClick:Ee.handleDayClick,handleOnKeyDown:Ee.props.handleOnDayKeyDown,handleOnMonthKeyDown:Ee.props.handleOnKeyDown,onDayMouseEnter:Ee.handleDayMouseEnter,onMouseLeave:Ee.handleMonthMouseLeave,orderInDisplay:ze,selectingDate:Ee.state.selectingDate,monthShowsDuplicateDaysEnd:Ve,monthShowsDuplicateDaysStart:We,dayNamesHeader:Ee.renderDayNamesHeader(He,ze),monthHeader:Ee.props.monthHeaderPosition==="middle"?Ee.renderHeader({monthDate:He,i:ze}):void 0,monthFooter:Ee.props.monthHeaderPosition==="bottom"?Ee.renderHeader({monthDate:He,i:ze}):void 0}))))}return Te}},Ee.renderYears=function(){if(!Ee.props.showTimeSelectOnly&&Ee.props.showYearPicker)return React4.createElement("div",{className:"react-datepicker__year--container"},Ee.renderHeader({monthDate:Ee.state.date}),React4.createElement(Year,_assign({},t.defaultProps,Ee.props,{selectingDate:Ee.state.selectingDate,date:Ee.state.date,onDayClick:Ee.handleDayClick,clearSelectingDate:Ee.clearSelectingDate,onYearMouseEnter:Ee.handleYearMouseEnter,onYearMouseLeave:Ee.handleYearMouseLeave})))},Ee.renderTimeSection=function(){if(Ee.props.showTimeSelect&&(Ee.state.monthContainer||Ee.props.showTimeSelectOnly))return React4.createElement(Time,_assign({},t.defaultProps,Ee.props,{onChange:Ee.props.onTimeChange,format:Ee.props.timeFormat,intervals:Ee.props.timeIntervals,monthRef:Ee.state.monthContainer}))},Ee.renderInputTimeSection=function(){var Re,Ce;if(Ee.props.showTimeInput){if(Ee.props.selectsRange){var Te=Ee.props,Me=Te.startDate,De=Te.endDate,Oe=Me?new Date(Me):void 0,Be=Oe&&isValid(Oe)&&!!Me,ze=Be?"".concat(addZero(Oe.getHours()),":").concat(addZero(Oe.getMinutes())):"",$e=De?new Date(De):void 0,He=$e&&isValid($e)&&!!De,Ue=He?"".concat(addZero($e.getHours()),":").concat(addZero($e.getMinutes())):"";return React4.createElement(React4.Fragment,null,React4.createElement(InputTime,_assign({},t.defaultProps,Ee.props,{date:Oe,timeString:ze,onChange:function(Ge){var Ye,Ke;(Ke=(Ye=Ee.props).onTimeChange)===null||Ke===void 0||Ke.call(Ye,Ge,"start")},timeInputLabel:((Re=Ee.props.timeInputLabel)!==null&&Re!==void 0?Re:"Time")+" (Start)"})),React4.createElement(InputTime,_assign({},t.defaultProps,Ee.props,{date:$e,timeString:Ue,onChange:function(Ge){var Ye,Ke;(Ke=(Ye=Ee.props).onTimeChange)===null||Ke===void 0||Ke.call(Ye,Ge,"end")},timeInputLabel:((Ce=Ee.props.timeInputLabel)!==null&&Ce!==void 0?Ce:"Time")+" (End)"})))}var Ve=Ee.props.selected?new Date(Ee.props.selected):void 0,We=Ve&&isValid(Ve)&&!!Ee.props.selected,qe=We?"".concat(addZero(Ve.getHours()),":").concat(addZero(Ve.getMinutes())):"";return React4.createElement(InputTime,_assign({},t.defaultProps,Ee.props,{date:Ve,timeString:qe,onChange:function(Ge){var Ye,Ke;(Ke=(Ye=Ee.props).onTimeChange)===null||Ke===void 0||Ke.call(Ye,Ge)}}))}},Ee.renderAriaLiveRegion=function(){var Re;if(!isValid(Ee.state.date))return React4.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"});var Ce=getYearsPeriod(Ee.state.date,(Re=Ee.props.yearItemNumber)!==null&&Re!==void 0?Re:t.defaultProps.yearItemNumber),Te=Ce.startPeriod,Me=Ce.endPeriod,De;return Ee.props.showYearPicker?De="".concat(Te," - ").concat(Me):Ee.props.showMonthYearPicker||Ee.props.showQuarterYearPicker?De=getYear(Ee.state.date):De="".concat(getMonthInLocale(getMonth(Ee.state.date),Ee.props.locale)," ").concat(getYear(Ee.state.date)),React4.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},Ee.state.isRenderAriaLiveMessage&&De)},Ee.renderChildren=function(){if(Ee.props.children)return React4.createElement("div",{className:"react-datepicker__children-container"},Ee.props.children)},Ee.containerRef=reactExports.createRef(),Ee.state={date:Ee.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},Ee}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:OUTSIDE_CLICK_IGNORE_CLASS,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:DEFAULT_YEAR_ITEM_NUMBER,monthHeaderPosition:"top"}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){n.setState({monthContainer:n.monthContainer})}())},t.prototype.componentDidUpdate=function(n){var Ee=this;if(this.props.preSelection&&isValid(this.props.preSelection)&&(!isSameDay(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var Re=!isSameMonth(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return Re&&Ee.handleCustomMonthChange(Ee.state.date)})}else this.props.openToDate&&!isSameDay(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var n=this.props.container||CalendarContainer;return React4.createElement(ClickOutsideWrapper,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},React4.createElement("div",{style:{display:"contents"},ref:this.containerRef},React4.createElement(n,{className:clsx("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly,inline:this.props.inline},this.renderAriaLiveRegion(),this.props.monthHeaderPosition==="top"&&this.renderPreviousButton(),this.props.monthHeaderPosition==="top"&&this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(reactExports.Component),CalendarIcon=function(e){var t=e.icon,n=e.className,Ee=n===void 0?"":n,Re=e.onClick,Ce="react-datepicker__calendar-icon";if(typeof t=="string")return React4.createElement("i",{className:"".concat(Ce," ").concat(t," ").concat(Ee),"aria-hidden":"true",onClick:Re});if(React4.isValidElement(t)){var Te=t;return React4.cloneElement(Te,{className:"".concat(Te.props.className||""," ").concat(Ce," ").concat(Ee),onClick:function(Me){typeof Te.props.onClick=="function"&&Te.props.onClick(Me),typeof Re=="function"&&Re(Me)}})}return React4.createElement("svg",{className:"".concat(Ce," ").concat(Ee),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:Re},React4.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Portal=function(e){__extends$1(t,e);function t(n){var Ee=e.call(this,n)||this;return Ee.portalRoot=null,Ee.el=document.createElement("div"),Ee}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return ReactDOM$1.createPortal(this.props.children,this.el)},t}(reactExports.Component),focusableElementsSelector="[tabindex], a, button, input, select, textarea",focusableFilter=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},TabLoop=function(e){__extends$1(t,e);function t(n){var Ee=e.call(this,n)||this;return Ee.getTabChildren=function(){var Re;return Array.prototype.slice.call((Re=Ee.tabLoopRef.current)===null||Re===void 0?void 0:Re.querySelectorAll(focusableElementsSelector),1,-1).filter(focusableFilter)},Ee.handleFocusStart=function(){var Re=Ee.getTabChildren();Re&&Re.length>1&&Re[Re.length-1].focus()},Ee.handleFocusEnd=function(){var Re=Ee.getTabChildren();Re&&Re.length>1&&Re[0].focus()},Ee.tabLoopRef=reactExports.createRef(),Ee}return t.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:t.defaultProps.enableTabLoop)?React4.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},React4.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,React4.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(reactExports.Component);function withFloating(e){function t(n){var Ee,Re=typeof n.hidePopper=="boolean"?n.hidePopper:!0,Ce=reactExports.useRef(null),Te=useFloating(_assign({open:!Re,whileElementsMounted:autoUpdate,placement:n.popperPlacement,middleware:__spreadArray([flip({padding:15}),offset(10),arrow$2({element:Ce})],(Ee=n.popperModifiers)!==null&&Ee!==void 0?Ee:[],!0)},n.popperProps)),Me=_assign(_assign({},n),{hidePopper:Re,popperProps:_assign(_assign({},Te),{arrowRef:Ce})});return React4.createElement(e,_assign({},Me))}return t.displayName="withFloating(".concat(e.displayName||e.name||"Component",")"),t}var PopperComponent$1=function(e){var t=e.className,n=e.wrapperClassName,Ee=e.hidePopper,Re=Ee===void 0?!0:Ee,Ce=e.popperComponent,Te=e.targetComponent,Me=e.enableTabLoop,De=e.popperOnKeyDown,Oe=e.portalId,Be=e.portalHost,ze=e.popperProps,$e=e.showArrow,He=e.popperTargetRef,Ue=e.monthHeaderPosition;reactExports.useEffect(function(){He!=null&&He.current&&ze.refs.setPositionReference(He.current)},[He,ze.refs]);var Ve=void 0;if(!Re){var We=clsx("react-datepicker-popper",!$e&&"react-datepicker-popper-offset",Ue==="middle"&&"react-datepicker-popper--header-middle",Ue==="bottom"&&"react-datepicker-popper--header-bottom",t);Ve=React4.createElement(TabLoop,{enableTabLoop:Me},React4.createElement("div",{ref:ze.refs.setFloating,style:ze.floatingStyles,className:We,"data-placement":ze.placement,onKeyDown:De},Ce,$e&&React4.createElement(FloatingArrow,{ref:ze.arrowRef,context:ze.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}e.popperContainer&&(Ve=reactExports.createElement(e.popperContainer,{},Ve)),Oe&&!Re&&(Ve=React4.createElement(Portal,{portalId:Oe,portalHost:Be},Ve));var qe=clsx("react-datepicker-wrapper",n);return React4.createElement(React4.Fragment,null,React4.createElement("div",{ref:ze.refs.setReference,className:qe},Te),Ve)},PopperComponent=withFloating(PopperComponent$1);function hasPreSelectionChanged(e,t){return e&&t?getMonth(e)!==getMonth(t)||getYear(e)!==getYear(t):e!==t}var INPUT_ERR_1="Date input not valid.",DatePicker$1=function(e){__extends$1(t,e);function t(n){var Ee=e.call(this,n)||this;return Ee.calendar=null,Ee.input=null,Ee.getPreSelection=function(){var Re=Ee.props.timeZone,Ce=Ee.props.openToDate?Ee.props.openToDate:Ee.props.selectsEnd&&Ee.props.startDate?Ee.props.startDate:Ee.props.selectsStart&&Ee.props.endDate?Ee.props.endDate:newDate();return Re?toZonedTime(Ce,Re):Ce},Ee.modifyHolidays=function(){var Re;return(Re=Ee.props.holidays)===null||Re===void 0?void 0:Re.reduce(function(Ce,Te){var Me=parseDate(Te.date,"yyyy-MM-dd",void 0,!1);return Me?__spreadArray(__spreadArray([],Ce,!0),[_assign(_assign({},Te),{date:Me})],!1):Ce},[])},Ee.calcInitialState=function(){var Re=Ee.props.timeZone,Ce=Ee.getPreSelection(),Te=getEffectiveMinDate(Ee.props),Me=getEffectiveMaxDate(Ee.props),De=Te&&isBefore(Ce,getStartOfDay(Te))?Te:Me&&isAfter(Ce,getEndOfDay(Me))?Me:Ce,Oe=Ee.props.selectsRange?Ee.props.startDate:Ee.props.selected;return Oe&&Re&&(Oe=toZonedTime(Oe,Re)),{open:Ee.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:Oe??De,highlightDates:getHighLightDaysMap(Ee.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},Ee.getInputValue=function(){var Re,Ce=Ee.props,Te=Ce.locale,Me=Ce.startDate,De=Ce.endDate,Oe=Ce.rangeSeparator,Be=Ce.selected,ze=Ce.selectedDates,$e=Ce.selectsMultiple,He=Ce.selectsRange,Ue=Ce.formatMultipleDates,Ve=Ce.value,We=(Re=Ee.props.dateFormat)!==null&&Re!==void 0?Re:t.defaultProps.dateFormat,qe=Ee.state.inputValue;if(typeof Ve=="string")return Ve;if(typeof qe=="string")return qe;if(He)return safeDateRangeFormat(Me,De,{dateFormat:We,locale:Te,rangeSeparator:Oe});if($e){if(Ue){var Ge=function(Ye){return safeDateFormat(Ye,{dateFormat:We,locale:Te})};return Ue(ze??[],Ge)}return safeMultipleDatesFormat(ze??[],{dateFormat:We,locale:Te})}return safeDateFormat(Be,{dateFormat:We,locale:Te})},Ee.resetHiddenStatus=function(){Ee.setState(_assign(_assign({},Ee.state),{wasHidden:!1}))},Ee.setHiddenStatus=function(){Ee.setState(_assign(_assign({},Ee.state),{wasHidden:!0}))},Ee.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&Ee.setHiddenStatus()},Ee.clearPreventFocusTimeout=function(){Ee.preventFocusTimeout&&clearTimeout(Ee.preventFocusTimeout)},Ee.setFocus=function(){var Re,Ce;(Ce=(Re=Ee.input)===null||Re===void 0?void 0:Re.focus)===null||Ce===void 0||Ce.call(Re,{preventScroll:!0})},Ee.setBlur=function(){var Re,Ce;(Ce=(Re=Ee.input)===null||Re===void 0?void 0:Re.blur)===null||Ce===void 0||Ce.call(Re),Ee.cancelFocusInput()},Ee.deferBlur=function(){requestAnimationFrame(function(){Ee.setBlur()})},Ee.setOpen=function(Re,Ce){Ce===void 0&&(Ce=!1),Ee.setState({open:Re,preSelection:Re&&Ee.state.open?Ee.state.preSelection:Ee.calcInitialState().preSelection,lastPreSelectChange:PRESELECT_CHANGE_VIA_NAVIGATE},function(){Re||Ee.setState(function(Te){return{focused:Ce?Te.focused:!1}},function(){!Ce&&Ee.deferBlur(),Ee.setState({inputValue:null})})})},Ee.inputOk=function(){return isDate(Ee.state.preSelection)},Ee.isCalendarOpen=function(){return Ee.props.open===void 0?Ee.state.open&&!Ee.props.disabled&&!Ee.props.readOnly:Ee.props.open},Ee.handleFocus=function(Re){var Ce,Te,Me=Ee.state.wasHidden,De=Me?Ee.state.open:!0;Me&&Ee.resetHiddenStatus(),Ee.state.preventFocus||((Te=(Ce=Ee.props).onFocus)===null||Te===void 0||Te.call(Ce,Re),De&&!Ee.props.preventOpenOnFocus&&!Ee.props.readOnly&&Ee.setOpen(!0)),Ee.setState({focused:!0})},Ee.sendFocusBackToInput=function(){Ee.preventFocusTimeout&&Ee.clearPreventFocusTimeout(),Ee.setState({preventFocus:!0},function(){Ee.preventFocusTimeout=setTimeout(function(){Ee.setFocus(),Ee.setState({preventFocus:!1})})})},Ee.cancelFocusInput=function(){clearTimeout(Ee.inputFocusTimeout),Ee.inputFocusTimeout=void 0},Ee.deferFocusInput=function(){Ee.cancelFocusInput(),Ee.inputFocusTimeout=setTimeout(function(){return Ee.setFocus()},1)},Ee.handleDropdownFocus=function(){Ee.cancelFocusInput()},Ee.resetInputValue=function(){Ee.setState(_assign(_assign({},Ee.state),{inputValue:null}))},Ee.handleBlur=function(Re){var Ce,Te;(!Ee.state.open||Ee.props.withPortal||Ee.props.showTimeInput)&&((Te=(Ce=Ee.props).onBlur)===null||Te===void 0||Te.call(Ce,Re)),Ee.resetInputValue(),Ee.state.open&&Ee.props.open===!1&&Ee.setOpen(!1),Ee.setState({focused:!1})},Ee.handleCalendarClickOutside=function(Re){var Ce,Te;Ee.props.inline||Ee.setOpen(!1),(Te=(Ce=Ee.props).onClickOutside)===null||Te===void 0||Te.call(Ce,Re),Ee.props.withPortal&&Re.preventDefault()},Ee.handleChange=function(){for(var Re,Ce,Te,Me,De,Oe,Be=[],ze=0;ze<arguments.length;ze++)Be[ze]=arguments[ze];var $e=Be[0];if(!(Ee.props.onChangeRaw&&(Ee.props.onChangeRaw.apply(Ee,Be),!$e||typeof $e.isDefaultPrevented!="function"||$e.isDefaultPrevented()))){Ee.setState({inputValue:($e==null?void 0:$e.target)instanceof HTMLInputElement?$e.target.value:null,lastPreSelectChange:PRESELECT_CHANGE_VIA_INPUT});var He=Ee.props,Ue=He.selectsRange,Ve=He.startDate,We=He.endDate,qe=(Re=Ee.props.dateFormat)!==null&&Re!==void 0?Re:t.defaultProps.dateFormat,Ge=(Ce=Ee.props.strictParsing)!==null&&Ce!==void 0?Ce:t.defaultProps.strictParsing,Ye=($e==null?void 0:$e.target)instanceof HTMLInputElement?$e.target.value:"";if(Ue){var Ke=Ee.props.rangeSeparator,Xe=Ke.trim(),Ze=Ye.split(qe.includes(Xe)?Ke:Xe,2).map(function(br){return br.trim()}),er=Ze[0],St=Ze[1],ar=parseDate(er??"",qe,Ee.props.locale,Ge),hr=ar?parseDate(St??"",qe,Ee.props.locale,Ge):null,ur=(Ve==null?void 0:Ve.getTime())!==(ar==null?void 0:ar.getTime()),dr=(We==null?void 0:We.getTime())!==(hr==null?void 0:hr.getTime());if(!ur&&!dr||ar&&isDayDisabled(ar,Ee.props)||hr&&isDayDisabled(hr,Ee.props))return;ar&&Ee.setState({preSelection:ar}),(Me=(Te=Ee.props).onChange)===null||Me===void 0||Me.call(Te,[ar,hr],$e)}else{var vr=parseDate(Ye,qe,Ee.props.locale,Ge,(De=Ee.props.selected)!==null&&De!==void 0?De:void 0);if(vr||!Ye)Ee.setSelected(vr,$e,!0);else if(!Ee.props.inline){var yr=parseDateForNavigation(Ye,(Oe=Ee.state.preSelection)!==null&&Oe!==void 0?Oe:void 0);yr&&(!Ee.props.minDate||!isBefore(yr,Ee.props.minDate))&&(!Ee.props.maxDate||!isAfter(yr,Ee.props.maxDate))&&Ee.setState({preSelection:yr})}}}},Ee.handleSelect=function(Re,Ce,Te){var Me;if(!Ee.props.readOnly){var De=Ee.props,Oe=De.selectsRange,Be=De.startDate,ze=De.endDate,$e=De.locale,He=De.swapRange,Ue=(Me=Ee.props.dateFormat)!==null&&Me!==void 0?Me:t.defaultProps.dateFormat,Ve=!Oe||Be&&!ze&&(He||!isDateBefore(Re,Be));if(Ee.props.shouldCloseOnSelect&&!Ee.props.showTimeSelect&&Ve&&Ee.sendFocusBackToInput(),Ee.props.onChangeRaw){var We=safeDateFormat(Re,{dateFormat:Ue,locale:$e});Ee.props.onChangeRaw(Ce,{date:Re,formattedDate:We})}Ee.setSelected(Re,Ce,!1,Te),Ee.props.showDateSelect&&Ee.setState({isRenderAriaLiveMessage:!0}),!Ee.props.shouldCloseOnSelect||Ee.props.showTimeSelect?Ee.setPreSelection(Re):Ve&&Ee.setOpen(!1)}},Ee.setSelected=function(Re,Ce,Te,Me){var De,Oe,Be=Ee.props.timeZone,ze=Re;if(ze&&Be&&(ze=fromZonedTime(ze,Be)),Ee.props.showYearPicker){if(ze!==null&&isYearDisabled(getYear(ze),Ee.props))return}else if(Ee.props.showMonthYearPicker){if(ze!==null&&isMonthDisabled(ze,Ee.props))return}else if(ze!==null&&isDayDisabled(ze,Ee.props))return;var $e=Ee.props,He=$e.onChange,Ue=$e.selectsRange,Ve=$e.startDate,We=$e.endDate,qe=$e.selectsMultiple,Ge=$e.selectedDates,Ye=$e.minTime,Ke=$e.swapRange;if(!isEqual(Ee.props.selected,ze)||Ee.props.allowSameDay||Ue||qe)if(ze!==null&&(Ee.props.selected&&(!Te||!Ee.props.showTimeSelect&&!Ee.props.showTimeSelectOnly&&!Ee.props.showTimeInput)&&(ze=setTime(ze,{hour:getHours(Ee.props.selected),minute:getMinutes(Ee.props.selected),second:getSeconds(Ee.props.selected)})),!Te&&(Ee.props.showTimeSelect||Ee.props.showTimeSelectOnly)&&Ye&&(ze=setTime(ze,{hour:Ye.getHours(),minute:Ye.getMinutes(),second:Ye.getSeconds()})),Ee.props.inline||Ee.setState({preSelection:ze}),Ee.props.focusSelectedMonth||Ee.setState({monthSelectedIn:Me})),Ue){var Xe=!Ve&&!We,Ze=Ve&&!We,er=!Ve&&!!We,St=Ve&&We;Xe?He==null||He([ze,null],Ce):Ze?ze===null?He==null||He([null,null],Ce):isDateBefore(ze,Ve)?Ke?He==null||He([ze,Ve],Ce):He==null||He([ze,null],Ce):He==null||He([Ve,ze],Ce):er&&(ze&&isDateBefore(ze,We)?He==null||He([ze,We],Ce):He==null||He([ze,null],Ce)),St&&(He==null||He([ze,null],Ce))}else if(qe){if(ze!==null)if(!(Ge!=null&&Ge.length))He==null||He([ze],Ce);else{var ar=Ge.some(function(ur){return isSameDay(ur,ze)});if(ar){var hr=Ge.filter(function(ur){return!isSameDay(ur,ze)});He==null||He(hr,Ce)}else He==null||He(__spreadArray(__spreadArray([],Ge,!0),[ze],!1),Ce)}}else He==null||He(ze,Ce);Te||((Oe=(De=Ee.props).onSelect)===null||Oe===void 0||Oe.call(De,ze,Ce),Ee.setState({inputValue:null}))},Ee.setPreSelection=function(Re){if(!Ee.props.readOnly){var Ce=isDate(Ee.props.minDate),Te=isDate(Ee.props.maxDate),Me=!0;if(Re){var De=getStartOfDay(Re);if(Ce&&Te)Me=isDayInRange(Re,Ee.props.minDate,Ee.props.maxDate);else if(Ce){var Oe=getStartOfDay(Ee.props.minDate);Me=isAfter(Re,Oe)||isEqual(De,Oe)}else if(Te){var Be=getEndOfDay(Ee.props.maxDate);Me=isBefore(Re,Be)||isEqual(De,Be)}}Me&&Ee.setState({preSelection:Re})}},Ee.toggleCalendar=function(){Ee.setOpen(!Ee.state.open)},Ee.handleTimeChange=function(Re,Ce){var Te,Me;if(!Ee.props.selectsMultiple){var De=Ee.props,Oe=De.selectsRange,Be=De.startDate,ze=De.endDate,$e=De.onChange,He=De.timeZone;if(Oe)if(Ce==="start"){if(Be){var Ue=setTime(Be,{hour:getHours(Re),minute:getMinutes(Re)});Ee.setState({preSelection:Ue}),He&&(Ue=fromZonedTime(Ue,He)),$e==null||$e([Ue,ze?He?fromZonedTime(ze,He):ze:null],void 0)}}else if(Ce==="end"){if(ze){var Ve=setTime(ze,{hour:getHours(Re),minute:getMinutes(Re)});Ee.setState({preSelection:Ve}),He&&(Ve=fromZonedTime(Ve,He)),$e==null||$e([Be?He?fromZonedTime(Be,He):Be:null,Ve],void 0)}}else{var We=Be&&!ze;if(We){var Ue=setTime(Be,{hour:getHours(Re),minute:getMinutes(Re)});Ee.setState({preSelection:Ue}),He&&(Ue=fromZonedTime(Ue,He)),$e==null||$e([Ue,null],void 0)}else if(Be&&ze){var Ve=setTime(ze,{hour:getHours(Re),minute:getMinutes(Re)});Ee.setState({preSelection:Ve}),He&&(Ve=fromZonedTime(Ve,He)),$e==null||$e([He?fromZonedTime(Be,He):Be,Ve],void 0)}else{var qe=setTime(Ee.getPreSelection(),{hour:getHours(Re),minute:getMinutes(Re)});Ee.setState({preSelection:qe})}}else{var Ge=Ee.props.selected?Ee.props.selected:Ee.getPreSelection(),qe=Ee.props.selected?Re:setTime(Ge,{hour:getHours(Re),minute:getMinutes(Re)});Ee.setState({preSelection:qe}),qe&&He&&(qe=fromZonedTime(qe,He)),(Me=(Te=Ee.props).onChange)===null||Me===void 0||Me.call(Te,qe)}Ee.props.shouldCloseOnSelect&&!Ee.props.showTimeInput&&(Ee.sendFocusBackToInput(),Ee.setOpen(!1)),Ee.props.showTimeInput&&Ee.setOpen(!0),(Ee.props.showTimeSelectOnly||Ee.props.showTimeSelect)&&Ee.setState({isRenderAriaLiveMessage:!0}),Ee.setState({inputValue:null})}},Ee.onInputClick=function(){var Re,Ce;!Ee.props.disabled&&!Ee.props.readOnly&&Ee.setOpen(!0),(Ce=(Re=Ee.props).onInputClick)===null||Ce===void 0||Ce.call(Re)},Ee.handleTimeOnlyArrowKey=function(Re){var Ce,Te,Me,De,Oe=Ee.props.selected||Ee.state.preSelection||newDate(),Be=(Ce=Ee.props.timeIntervals)!==null&&Ce!==void 0?Ce:30,ze=(Te=Ee.props.dateFormat)!==null&&Te!==void 0?Te:t.defaultProps.dateFormat,$e=Array.isArray(ze)?ze[0]:ze,He=getStartOfDay(Oe),Ue=getHours(Oe)*60+getMinutes(Oe),Ve=23*60+60-Be,We;if(Re===KeyType.ArrowUp){var qe=Math.max(0,Ue-Be);We=addMinutes(He,qe)}else{var qe=Math.min(Ve,Ue+Be);We=addMinutes(He,qe)}var Ge=formatDate(We,$e||t.defaultProps.dateFormat,Ee.props.locale);if(Ee.setState({preSelection:We,inputValue:Ge}),!(Ee.props.selectsRange||Ee.props.selectsMultiple)){var Ye=Ee.props.selected?Ee.props.selected:Ee.getPreSelection(),Ke=Ee.props.selected?We:setTime(Ye,{hour:getHours(We),minute:getMinutes(We)});(De=(Me=Ee.props).onChange)===null||De===void 0||De.call(Me,Ke),(Ee.props.showTimeSelectOnly||Ee.props.showTimeSelect)&&Ee.setState({isRenderAriaLiveMessage:!0}),requestAnimationFrame(function(){Ee.scrollToTimeOption(We)})}},Ee.handleTimeOnlyEnterKey=function(Re){var Ce,Te,Me,De,Oe=Re.target,Be=Oe.value,ze=(Ce=Ee.props.dateFormat)!==null&&Ce!==void 0?Ce:t.defaultProps.dateFormat,$e=Ee.props.timeFormat||"p",He=Ee.state.preSelection||Ee.props.selected||newDate(),Ue=parseDate(Be,ze,Ee.props.locale,(Te=Ee.props.strictParsing)!==null&&Te!==void 0?Te:!1,He),Ve=He;if(Ue&&isValid(Ue))Ve=Ue;else{var We=((Me=Ee.calendar)===null||Me===void 0?void 0:Me.containerRef.current)instanceof Element&&Ee.calendar.containerRef.current.querySelector(".react-datepicker__time-list-item[tabindex='0']");if(We instanceof HTMLElement){var qe=(De=We.textContent)===null||De===void 0?void 0:De.trim();if(qe){var Ge=parseDate(qe,$e,Ee.props.locale,!1,He);Ge&&isValid(Ge)&&(Ve=Ge)}}}Ee.handleTimeChange(Ve),Ee.setOpen(!1),Ee.sendFocusBackToInput()},Ee.scrollToTimeOption=function(Re){var Ce,Te;if(!((Ce=Ee.calendar)===null||Ce===void 0)&&Ce.containerRef.current){for(var Me=Ee.calendar.containerRef.current,De=Array.from(Me.querySelectorAll(".react-datepicker__time-list-item")),Oe=null,Be=1/0,ze=Ee.props.timeFormat||"p",$e=0,He=De;$e<He.length;$e++){var Ue=He[$e],Ve=(Te=Ue.textContent)===null||Te===void 0?void 0:Te.trim();if(Ve){var We=parseDate(Ve,ze,Ee.props.locale,!1,Re);if(We&&isValid(We)){if(isSameMinute(We,Re)){Oe=Ue;break}var qe=Math.abs(We.getTime()-Re.getTime());qe<Be&&(Be=qe,Oe=Ue)}}}Oe&&(De.forEach(function(Ge){Ge.setAttribute("tabindex","-1")}),Oe.setAttribute("tabindex","0"),Oe.scrollIntoView({behavior:"smooth",block:"center"}))}},Ee.onInputKeyDown=function(Re){var Ce,Te,Me,De,Oe,Be;(Te=(Ce=Ee.props).onKeyDown)===null||Te===void 0||Te.call(Ce,Re);var ze=Re.key;if(!Ee.state.open&&!Ee.props.inline&&!Ee.props.preventOpenOnFocus){(ze===KeyType.ArrowDown||ze===KeyType.ArrowUp||ze===KeyType.Enter)&&((Me=Ee.onInputClick)===null||Me===void 0||Me.call(Ee));return}if(Ee.state.open&&Ee.props.showTimeSelectOnly){if(ze===KeyType.ArrowDown||ze===KeyType.ArrowUp){Re.preventDefault(),Ee.handleTimeOnlyArrowKey(ze);return}if(ze===KeyType.Enter){Re.preventDefault(),Ee.handleTimeOnlyEnterKey(Re);return}}if(Ee.state.open){if(ze===KeyType.ArrowDown||ze===KeyType.ArrowUp){Re.preventDefault();var $e=Ee.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":Ee.props.showWeekPicker&&Ee.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':Ee.props.showFullMonthYearPicker||Ee.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',He=((De=Ee.calendar)===null||De===void 0?void 0:De.containerRef.current)instanceof Element&&Ee.calendar.containerRef.current.querySelector($e);He instanceof HTMLElement&&He.focus({preventScroll:!0});return}var Ue=newDate(Ee.state.preSelection);ze===KeyType.Enter?(Re.preventDefault(),Re.target.blur(),Ee.inputOk()&&Ee.state.lastPreSelectChange===PRESELECT_CHANGE_VIA_NAVIGATE?(Ee.handleSelect(Ue,Re),!Ee.props.shouldCloseOnSelect&&Ee.setPreSelection(Ue)):Ee.setOpen(!1)):ze===KeyType.Escape?(Re.preventDefault(),Re.target.blur(),Ee.sendFocusBackToInput(),Ee.setOpen(!1)):ze===KeyType.Tab&&Ee.setOpen(!1),Ee.inputOk()||(Be=(Oe=Ee.props).onInputError)===null||Be===void 0||Be.call(Oe,{code:1,msg:INPUT_ERR_1})}},Ee.onPortalKeyDown=function(Re){var Ce=Re.key;Ce===KeyType.Escape&&(Re.preventDefault(),Ee.setState({preventFocus:!0},function(){Ee.setOpen(!1),setTimeout(function(){Ee.setFocus(),Ee.setState({preventFocus:!1})})}))},Ee.onDayKeyDown=function(Re){var Ce,Te,Me,De,Oe,Be,ze=Ee.props,$e=ze.minDate,He=ze.maxDate,Ue=ze.disabledKeyboardNavigation,Ve=ze.showWeekPicker,We=ze.shouldCloseOnSelect,qe=ze.locale,Ge=ze.calendarStartDay,Ye=ze.adjustDateOnChange,Ke=ze.inline;if((Te=(Ce=Ee.props).onKeyDown)===null||Te===void 0||Te.call(Ce,Re),!Ue){var Xe=Re.key,Ze=Re.shiftKey,er=newDate(Ee.state.preSelection),St=function(ur,dr){var vr=dr;switch(ur){case KeyType.ArrowRight:vr=Ve?addWeeks(dr,1):addDays(dr,1);break;case KeyType.ArrowLeft:vr=Ve?subWeeks(dr):subDays(dr);break;case KeyType.ArrowUp:vr=subWeeks(dr);break;case KeyType.ArrowDown:vr=addWeeks(dr,1);break;case KeyType.PageUp:vr=Ze?subYears(dr,1):subMonths(dr,1);break;case KeyType.PageDown:vr=Ze?addYears(dr,1):addMonths(dr,1);break;case KeyType.Home:vr=getStartOfWeek(dr,qe,Ge);break;case KeyType.End:vr=getEndOfWeek(dr);break}return vr},ar=function(ur,dr){for(var vr=40,yr=ur,br=!1,lr=0,cr=St(ur,dr);!br;){if(lr>=vr){cr=dr;break}$e&&cr<$e&&(yr=KeyType.ArrowRight,cr=isDayDisabled($e,Ee.props)?St(yr,cr):$e),He&&cr>He&&(yr=KeyType.ArrowLeft,cr=isDayDisabled(He,Ee.props)?St(yr,cr):He),isDayDisabled(cr,Ee.props)?((yr===KeyType.PageUp||yr===KeyType.Home)&&(yr=KeyType.ArrowRight),(yr===KeyType.PageDown||yr===KeyType.End)&&(yr=KeyType.ArrowLeft),cr=St(yr,cr)):br=!0,lr++}return cr};if(Xe===KeyType.Enter){Re.preventDefault(),Ee.handleSelect(er,Re),!We&&Ee.setPreSelection(er);return}else if(Xe===KeyType.Escape){Re.preventDefault(),Ee.setOpen(!1),Ee.inputOk()||(De=(Me=Ee.props).onInputError)===null||De===void 0||De.call(Me,{code:1,msg:INPUT_ERR_1});return}var hr=null;switch(Xe){case KeyType.ArrowLeft:case KeyType.ArrowRight:case KeyType.ArrowUp:case KeyType.ArrowDown:case KeyType.PageUp:case KeyType.PageDown:case KeyType.Home:case KeyType.End:hr=ar(Xe,er);break}if(!hr){(Be=(Oe=Ee.props).onInputError)===null||Be===void 0||Be.call(Oe,{code:1,msg:INPUT_ERR_1});return}Re.preventDefault(),Ee.setState({lastPreSelectChange:PRESELECT_CHANGE_VIA_NAVIGATE}),Ye&&Ee.setSelected(hr),Ee.setPreSelection(hr),Ke&&Ee.setState({shouldFocusDayInline:!0})}},Ee.onPopperKeyDown=function(Re){var Ce=Re.key;Ce===KeyType.Escape&&(Re.preventDefault(),Ee.sendFocusBackToInput(),Ee.setOpen(!1))},Ee.onClearClick=function(Re){Re&&Re.preventDefault&&Re.preventDefault(),Ee.sendFocusBackToInput();var Ce=Ee.props,Te=Ce.selectsRange,Me=Ce.onChange;Te?Me==null||Me([null,null],Re):Me==null||Me(null,Re),Ee.setState({inputValue:null})},Ee.clear=function(){Ee.onClearClick()},Ee.onScroll=function(Re){typeof Ee.props.closeOnScroll=="boolean"&&Ee.props.closeOnScroll?(Re.target===document||Re.target===document.documentElement||Re.target===document.body)&&Ee.setOpen(!1):typeof Ee.props.closeOnScroll=="function"&&Ee.props.closeOnScroll(Re)&&Ee.setOpen(!1)},Ee.handleMonthSelectedInChange=function(Re){Ee.setState({monthSelectedIn:Re})},Ee.renderCalendar=function(){var Re,Ce;return!Ee.props.inline&&!Ee.isCalendarOpen()?null:React4.createElement(Calendar,_assign({showMonthYearDropdown:void 0,ref:function(Te){Ee.calendar=Te}},Ee.props,Ee.state,{setOpen:Ee.setOpen,dateFormat:(Re=Ee.props.dateFormatCalendar)!==null&&Re!==void 0?Re:t.defaultProps.dateFormatCalendar,onSelect:Ee.handleSelect,onClickOutside:Ee.handleCalendarClickOutside,holidays:getHolidaysMap(Ee.modifyHolidays()),outsideClickIgnoreClass:Ee.props.outsideClickIgnoreClass,onDropdownFocus:Ee.handleDropdownFocus,onTimeChange:Ee.handleTimeChange,className:Ee.props.calendarClassName,container:Ee.props.calendarContainer,handleOnKeyDown:Ee.props.onKeyDown,handleOnDayKeyDown:Ee.onDayKeyDown,setPreSelection:Ee.setPreSelection,dropdownMode:(Ce=Ee.props.dropdownMode)!==null&&Ce!==void 0?Ce:t.defaultProps.dropdownMode,onMonthSelectedInChange:Ee.handleMonthSelectedInChange}),Ee.props.children)},Ee.renderAriaLiveRegion=function(){var Re,Ce=Ee.props.locale,Te=(Re=Ee.props.dateFormat)!==null&&Re!==void 0?Re:t.defaultProps.dateFormat,Me=Ee.props.showTimeInput||Ee.props.showTimeSelect,De=Me?"PPPPp":"PPPP",Oe;return Ee.props.selectsRange?Oe="Selected start date: ".concat(safeDateFormat(Ee.props.startDate,{dateFormat:De,locale:Ce}),". ").concat(Ee.props.endDate?"End date: "+safeDateFormat(Ee.props.endDate,{dateFormat:De,locale:Ce}):""):Ee.props.showTimeSelectOnly?Oe="Selected time: ".concat(safeDateFormat(Ee.props.selected,{dateFormat:Te,locale:Ce})):Ee.props.showYearPicker?Oe="Selected year: ".concat(safeDateFormat(Ee.props.selected,{dateFormat:"yyyy",locale:Ce})):Ee.props.showMonthYearPicker?Oe="Selected month: ".concat(safeDateFormat(Ee.props.selected,{dateFormat:"MMMM yyyy",locale:Ce})):Ee.props.showQuarterYearPicker?Oe="Selected quarter: ".concat(safeDateFormat(Ee.props.selected,{dateFormat:"yyyy, QQQ",locale:Ce})):Oe="Selected date: ".concat(safeDateFormat(Ee.props.selected,{dateFormat:De,locale:Ce})),React4.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},Oe)},Ee.renderDateInput=function(){var Re,Ce,Te,Me,De,Oe,Be,ze=clsx(Ee.props.className,(Re={},Re[Ee.props.outsideClickIgnoreClass||t.defaultProps.outsideClickIgnoreClass]=Ee.state.open,Re)),$e=Ee.props.customInput||React4.createElement("input",{type:"text"}),He=Ee.props.customInputRef||"ref",Ue={},Ve=(Te=Ee.props["aria-describedby"])!==null&&Te!==void 0?Te:Ee.props.ariaDescribedBy,We=(Me=Ee.props["aria-invalid"])!==null&&Me!==void 0?Me:Ee.props.ariaInvalid,qe=(De=Ee.props["aria-label"])!==null&&De!==void 0?De:Ee.props.ariaLabel,Ge=(Oe=Ee.props["aria-labelledby"])!==null&&Oe!==void 0?Oe:Ee.props.ariaLabelledBy,Ye=(Be=Ee.props["aria-required"])!==null&&Be!==void 0?Be:Ee.props.ariaRequired;return Ve!=null&&(Ue["aria-describedby"]=Ve),We!=null&&(Ue["aria-invalid"]=We),qe!=null&&(Ue["aria-label"]=qe),Ge!=null&&(Ue["aria-labelledby"]=Ge),Ye!=null&&(Ue["aria-required"]=Ye),reactExports.cloneElement($e,_assign((Ce={},Ce[He]=function(Ke){Ee.input=Ke},Ce.value=Ee.getInputValue(),Ce.onBlur=Ee.handleBlur,Ce.onChange=Ee.handleChange,Ce.onClick=Ee.onInputClick,Ce.onFocus=Ee.handleFocus,Ce.onKeyDown=Ee.onInputKeyDown,Ce.id=Ee.props.id,Ce.name=Ee.props.name,Ce.form=Ee.props.form,Ce.autoFocus=Ee.props.autoFocus,Ce.placeholder=Ee.props.placeholderText,Ce.disabled=Ee.props.disabled,Ce.autoComplete=Ee.props.autoComplete,Ce.className=clsx($e.props.className,ze),Ce.title=Ee.props.title,Ce.readOnly=Ee.props.readOnly,Ce.required=Ee.props.required,Ce.tabIndex=Ee.props.tabIndex,Ce),Ue))},Ee.renderClearButton=function(){var Re=Ee.props,Ce=Re.isClearable,Te=Re.disabled,Me=Re.selected,De=Re.startDate,Oe=Re.endDate,Be=Re.clearButtonTitle,ze=Re.clearButtonClassName,$e=ze===void 0?"":ze,He=Re.ariaLabelClose,Ue=He===void 0?"Close":He,Ve=Re.selectedDates,We=Re.readOnly;return Ce&&!We&&(Me!=null||De!=null||Oe!=null||Ve!=null&&Ve.length)?React4.createElement("button",{type:"button",className:clsx("react-datepicker__close-icon",$e,{"react-datepicker__close-icon--disabled":Te}),disabled:Te,"aria-label":Ue,onClick:Ee.onClearClick,title:Be,tabIndex:-1}):null},Ee.state=Ee.calcInitialState(),Ee.preventFocusTimeout=void 0,Ee}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:OUTSIDE_CLICK_IGNORE_CLASS,readOnly:!1,rangeSeparator:DATE_RANGE_SEPARATOR,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:DEFAULT_YEAR_ITEM_NUMBER,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(n,Ee){var Re,Ce,Te,Me;this.props.selectsRange&&hasPreSelectionChanged(n.startDate,this.props.startDate)?this.setPreSelection(this.props.startDate):hasPreSelectionChanged(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),this.props.selectsRange&&Ee.open===!1&&this.state.open===!0&&this.state.monthSelectedIn!==0&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:getHighLightDaysMap(this.props.highlightDates)}),!Ee.focused&&!isEqual(n.selected,this.props.selected)&&this.setState({inputValue:null}),Ee.open!==this.state.open&&(Ee.open===!1&&this.state.open===!0&&((Ce=(Re=this.props).onCalendarOpen)===null||Ce===void 0||Ce.call(Re)),Ee.open===!0&&this.state.open===!1&&((Me=(Te=this.props).onCalendarClose)===null||Me===void 0||Me.call(Te)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var n=this.props,Ee=n.showIcon,Re=n.icon,Ce=n.calendarIconClassname,Te=n.calendarIconClassName,Me=n.toggleCalendarOnIconClick,De=this.state.open;return Ce&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),React4.createElement("div",{className:"react-datepicker__input-container".concat(Ee?" react-datepicker__view-calendar-icon":"")},Ee&&React4.createElement(CalendarIcon,_assign({icon:Re,className:clsx(Te,!Te&&Ce,De&&"react-datepicker-ignore-onclickoutside")},Me?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var Ee=this.state.open?React4.createElement(TabLoop,{enableTabLoop:this.props.enableTabLoop},React4.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(Ee=React4.createElement(Portal,_assign({portalId:this.props.portalId},this.props),Ee)),React4.createElement("div",null,this.renderInputContainer(),Ee)}return React4.createElement(PopperComponent,_assign({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow,monthHeaderPosition:this.props.monthHeaderPosition}))},t}(reactExports.Component),PRESELECT_CHANGE_VIA_INPUT="input",PRESELECT_CHANGE_VIA_NAVIGATE="navigate";const DatePicker=reactExports.forwardRef(({label:e,error:t,helperText:n,className:Ee,id:Re,value:Ce,onChange:Te,name:Me,disabled:De,required:Oe,...Be},ze)=>{const $e=Re||Me||Math.random().toString(36).substr(2,9),He=Ce&&typeof Ce=="string"&&isValid$1(parseISO(Ce))?parseISO(Ce):null,Ue=qe=>{if(Te){const Ge=qe?format(qe,"yyyy-MM-dd"):"";Te({target:{value:Ge,name:Me,type:"date"},currentTarget:{value:Ge,name:Me},preventDefault:()=>{},stopPropagation:()=>{}})}},Ve=({date:qe,changeYear:Ge,changeMonth:Ye,decreaseMonth:Ke,increaseMonth:Xe,prevMonthButtonDisabled:Ze,nextMonthButtonDisabled:er})=>{const St=[],ar=new Date().getFullYear();for(let ur=1950;ur<=ar+10;ur++)St.push(ur);const hr=["January","February","March","April","May","June","July","August","September","October","November","December"];return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-2 py-2",children:[jsxRuntimeExports.jsx("button",{onClick:Ke,disabled:Ze,type:"button",className:"p-1 hover:bg-gray-100 rounded-full disabled:opacity-50 transition-colors",children:jsxRuntimeExports.jsx(ChevronLeft,{size:18,className:"text-gray-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx("select",{value:hr[qe.getMonth()],onChange:({target:{value:ur}})=>Ye(hr.indexOf(ur)),className:"text-sm font-bold text-gray-900 bg-transparent border-none focus:ring-0 focus:outline-none cursor-pointer py-1 pl-1 pr-6 hover:text-brand-primary transition-colors",children:hr.map(ur=>jsxRuntimeExports.jsx("option",{value:ur,children:ur},ur))}),jsxRuntimeExports.jsx("select",{value:qe.getFullYear(),onChange:({target:{value:ur}})=>Ge(parseInt(ur)),className:"text-sm font-bold text-gray-900 bg-transparent border-none focus:ring-0 focus:outline-none cursor-pointer py-1 pl-1 pr-6 hover:text-brand-primary transition-colors",children:St.map(ur=>jsxRuntimeExports.jsx("option",{value:ur,children:ur},ur))})]}),jsxRuntimeExports.jsx("button",{onClick:Xe,disabled:er,type:"button",className:"p-1 hover:bg-gray-100 rounded-full disabled:opacity-50 transition-colors",children:jsxRuntimeExports.jsx(ChevronRight,{size:18,className:"text-gray-600"})})]})},We=reactExports.forwardRef(({value:qe,onClick:Ge,className:Ye,id:Ke,disabled:Xe,required:Ze,name:er,...St},ar)=>jsxRuntimeExports.jsx("button",{type:"button",onClick:Ge,ref:ar,id:Ke,name:er,disabled:Xe,className:`${Ye} text-left flex items-center w-full`,...St,children:qe?jsxRuntimeExports.jsx("span",{className:"text-text-primary",children:qe}):jsxRuntimeExports.jsx("span",{className:"text-text-muted",children:"Select date"})}));return We.displayName="ButtonInput",jsxRuntimeExports.jsxs("div",{className:"w-full",children:[e&&jsxRuntimeExports.jsx("label",{htmlFor:$e,className:"block text-sm font-medium text-text-secondary mb-1",children:e}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(DatePicker$1,{...Be,name:Me,id:$e,selected:He,onChange:Ue,dateFormat:"MMM d, yyyy",placeholderText:"Select date",disabled:De,required:Oe,customInput:jsxRuntimeExports.jsx(We,{}),portalId:"root",className:`
              w-full rounded-lg border bg-bg-card
              ${t?"border-status-error focus:ring-status-error":"border-border focus:ring-brand-primary"}
              pl-3 pr-10
              py-2 text-sm text-text-primary
              focus:outline-none focus:ring-2 focus:border-transparent
              disabled:bg-bg-main disabled:text-text-muted disabled:cursor-not-allowed
              h-[38px]
              ${Ee||""}
            `,wrapperClassName:"w-full",renderCustomHeader:Ve,showPopperArrow:!1,popperProps:{strategy:"fixed"},formatWeekDay:qe=>qe.substr(0,3),dayClassName:()=>"text-sm text-gray-700 hover:bg-brand-primary hover:text-white rounded-full",calendarClassName:"!border-border !font-sans shadow-lg !rounded-lg !bg-white",...Be}),jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-text-muted z-10",children:jsxRuntimeExports.jsx(Calendar$1,{size:16})})]}),t&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-status-error",children:t}),!t&&n&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-text-muted",children:n}),jsxRuntimeExports.jsx("style",{children:`
          .react-datepicker-wrapper {
            width: 100%;
          }
          .react-datepicker {
            font-family: inherit;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem !important;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            background-color: white;
            padding: 0.5rem;
          }
          .react-datepicker__header {
            background-color: white;
            border-bottom: none;
            padding-top: 0.5rem;
          }
          .react-datepicker__month-container {
            width: 100%;
          }
           .react-datepicker__month {
            margin: 0;
           }
          .react-datepicker__month-text {
            border-radius: 0.5rem !important;
            padding: 0.5rem !important;
            width: 5rem !important;
            margin: 0.2rem;
            font-weight: 500;
            color: #374151; /* text-gray-700 */
          }
          .react-datepicker__month-text:hover {
            background-color: #f3f4f6 !important;
            color: #1f2937 !important;
          }
          .react-datepicker__month-text--selected,
          .react-datepicker__month-text--keyboard-selected {
            background-color: #4f46e5 !important; /* brand-primary */
            color: white !important;
            font-weight: 600;
          }
          .react-datepicker__day-name {
            color: #6b7280;
            font-weight: 500;
            margin: 0.2rem;
            width: 2rem;
          }
          .react-datepicker__day {
            margin: 0.2rem;
            width: 2rem;
            line-height: 2rem;
            border-radius: 9999px;
          }
          .react-datepicker__day--selected {
            background-color: #4f46e5 !important;
            color: white !important;
          }
          .react-datepicker__day--keyboard-selected {
            background-color: #e0e7ff !important;
            color: #4f46e5 !important;
          }
          .react-datepicker__day--today {
            font-weight: bold;
            color: #4f46e5;
          }
          .react-datepicker__day:hover:not(.react-datepicker__day--disabled):not(.react-datepicker__day--selected) {
            background-color: #f3f4f6 !important;
            color: #1f2937 !important;
          }
          .react-datepicker-popper {
            z-index: 10050 !important;
          }
        `})]})});DatePicker.displayName="DatePicker";const DocumentCard=({docType:e,document:t,onUpload:n,onView:Ee,readOnly:Re=!1,isMandatory:Ce=!1})=>{const Te=!!t,Me=Te&&t.expiryDate&&new Date(t.expiryDate)<new Date,De=Te&&!Me&&t.expiryDate&&new Date(t.expiryDate)<new Date(Date.now()+30*24*60*60*1e3),Oe=()=>Te?Me?"bg-red-50 border-red-200":De?"bg-amber-50 border-amber-200":"bg-green-50 border-green-200":Ce?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200",Be=()=>Te?Me?jsxRuntimeExports.jsx(CircleAlert,{size:16,className:"text-red-500"}):De?jsxRuntimeExports.jsx(Clock,{size:16,className:"text-amber-500"}):jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-green-500"}):jsxRuntimeExports.jsx(CircleAlert,{size:16,className:Ce?"text-red-500":"text-gray-400"}),ze=()=>Te?Me?"Expired":De?"Expiring Soon":"Valid":Ce?"Missing":"Not Uploaded",$e=He=>He.startsWith("http")?He:`${ASSET_BASE_URL}/${He}`;return jsxRuntimeExports.jsxs("div",{className:`border rounded-xl p-3 transition-all hover:shadow-sm ${Oe()}`,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-start mb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2.5",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 rounded-lg bg-white/60",children:jsxRuntimeExports.jsx(FileText,{size:18,className:"text-text-primary"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm text-text-primary",children:e.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-[10px] mt-0.5",children:[Be(),jsxRuntimeExports.jsx("span",{className:"font-medium text-text-secondary uppercase tracking-tight",children:ze()})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[Te&&jsxRuntimeExports.jsxs("div",{className:"text-[10px] text-text-secondary pl-1",children:[jsxRuntimeExports.jsxs("p",{children:["Uploaded:"," ",new Date(t.versions[t.versions.length-1].uploadedAt).toLocaleDateString()]}),t.expiryDate&&jsxRuntimeExports.jsxs("p",{className:Me?"text-red-600 font-medium":"",children:["Expires: ",new Date(t.expiryDate).toLocaleDateString()]})]}),jsxRuntimeExports.jsx("div",{className:"pt-1 flex gap-2",children:Te?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ee(t),className:"flex-1 py-1 px-2 bg-white border border-border rounded text-xs text-text-primary hover:bg-gray-50 transition-colors font-medium shadow-sm",children:"View"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>window.open($e(t.versions[t.versions.length-1].fileUrl),"_blank"),className:"flex-none py-1 px-2 bg-white border border-border rounded text-xs text-text-primary hover:bg-gray-50 transition-colors shadow-sm flex items-center justify-center",title:"Download",children:jsxRuntimeExports.jsx(Download,{size:14})}),!Re&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>n(e._id),className:"flex-1 py-1 px-2 bg-white border border-border rounded text-xs text-text-primary hover:bg-gray-50 transition-colors font-medium shadow-sm",children:"Update"})]}):!Re&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>n(e._id),className:"w-full py-1.5 px-3 bg-white border border-border rounded-lg text-xs text-brand-primary hover:bg-brand-primary/5 transition-colors font-medium shadow-sm flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Upload,{size:14}),"Upload Document"]})})]})]})},DocumentsTab=({employeeId:e,readOnly:t=!1,roleName:n})=>{var ur;const[Ee,Re]=reactExports.useState([]),[Ce,Te]=reactExports.useState([]),[Me,De]=reactExports.useState([]),[Oe,Be]=reactExports.useState(!0),[ze,$e]=reactExports.useState(null),[He,Ue]=reactExports.useState(!1),[Ve,We]=reactExports.useState(null),[qe,Ge]=reactExports.useState(!1),[Ye,Ke]=reactExports.useState(null),Xe=async()=>{Be(!0);try{const dr=[apiService.getAllDocumentTypes(),apiService.getEmployeeDocuments(e)];n&&dr.push(apiService.getRoles());const[vr,yr,br]=await Promise.all(dr);if(vr.success&&Re(vr.data),yr.success&&Te(yr.data),n&&br){const lr=Array.isArray(br)?br:br.data,cr=lr==null?void 0:lr.find(rr=>rr.name===n);cr&&cr.mandatoryDocuments&&De(cr.mandatoryDocuments)}}catch(dr){$e("Failed to load documents"),console.error(dr)}finally{Be(!1)}};reactExports.useEffect(()=>{e&&Xe()},[e,n]);const Ze=dr=>{We(dr),Ue(!0)},er=()=>{Ue(!1),Xe()},St=dr=>{Ke(dr),Ge(!0)},ar=dr=>dr.startsWith("http")?dr:`${ASSET_BASE_URL}/${dr}`,hr=Ee.reduce((dr,vr)=>{const yr=vr.category||"Other";return dr[yr]||(dr[yr]=[]),dr[yr].push(vr),dr},{});return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[ze&&jsxRuntimeExports.jsx("div",{className:"text-red-500 mb-4",children:ze}),Oe?jsxRuntimeExports.jsx("div",{className:"flex justify-center p-8",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"})}):Object.entries(hr).map(([dr,vr])=>jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary border-b border-border pb-2",children:dr}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:vr.map(yr=>{const br=Ce.find(cr=>cr.documentTypeId._id===yr._id||cr.documentTypeId===yr._id),lr=yr.isRequired||Me.some(cr=>cr===yr._id||typeof cr=="object"&&cr._id===yr._id);return jsxRuntimeExports.jsx(DocumentCard,{docType:yr,document:br,onUpload:Ze,onView:St,readOnly:t,isMandatory:lr},yr._id)})})]},dr)),He&&Ve&&jsxRuntimeExports.jsx(DocumentUploadModal,{isOpen:He,onClose:()=>Ue(!1),onSuccess:er,employeeId:e,docTypeId:Ve,docType:Ee.find(dr=>dr._id===Ve)}),qe&&Ye&&jsxRuntimeExports.jsx(Modal,{isOpen:qe,onClose:()=>Ge(!1),title:Ye.documentTypeId.name||"Document Details",maxWidth:"max-w-4xl",children:jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsx("div",{className:"flex gap-4 h-[60vh]",children:jsxRuntimeExports.jsx("div",{className:"flex-1 bg-gray-100 rounded-lg overflow-hidden border border-border flex items-center justify-center",children:(ur=Ye.versions[Ye.versions.length-1].mimeType)!=null&&ur.includes("image")?jsxRuntimeExports.jsx("img",{src:ar(Ye.versions[Ye.versions.length-1].fileUrl),className:"max-w-full max-h-full object-contain"}):Ye.versions[Ye.versions.length-1].mimeType==="application/pdf"?jsxRuntimeExports.jsx("iframe",{src:ar(Ye.versions[Ye.versions.length-1].fileUrl),className:"w-full h-full min-h-[70vh]",title:"Document Preview"}):jsxRuntimeExports.jsxs("div",{className:"text-center p-4",children:[jsxRuntimeExports.jsx(FileText,{size:48,className:"mx-auto text-text-muted mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mb-4",children:"Preview not available for this file type."}),jsxRuntimeExports.jsxs("a",{href:ar(Ye.versions[Ye.versions.length-1].fileUrl),target:"_blank",rel:"noreferrer",className:"px-4 py-2 bg-brand-primary text-white rounded-lg inline-flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{size:16})," Download"]})]})})})})})]})},DocumentUploadModal=({isOpen:e,onClose:t,onSuccess:n,employeeId:Ee,docTypeId:Re,docType:Ce})=>{var Ve;const[Te,Me]=reactExports.useState(null),[De,Oe]=reactExports.useState(""),[Be,ze]=reactExports.useState(!1),[$e,He]=reactExports.useState(!1),Ue=async We=>{if(We.preventDefault(),!!Te){ze(!0);try{const qe=new FormData;qe.append("file",Te),qe.append("employeeId",Ee),qe.append("documentTypeId",Re),De&&qe.append("expiryDate",De),await apiService.uploadEmployeeDocument(qe),He(!0),setTimeout(()=>{n(),He(!1)},1500)}catch(qe){console.error(qe),alert("Upload failed. Please try again.")}finally{ze(!1)}}};return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:$e?()=>{}:t,title:`Upload ${(Ce==null?void 0:Ce.name)||"Document"}`,children:$e?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center animate-in fade-in zoom-in duration-300",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(CircleCheckBig,{size:32})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"Upload Successful!"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"The document has been uploaded securely."})]}):jsxRuntimeExports.jsxs("form",{onSubmit:Ue,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["File ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"file",onChange:We=>{var qe;return Me(((qe=We.target.files)==null?void 0:qe[0])||null)},className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/10 file:text-brand-primary hover:file:bg-brand-primary/20",accept:(Ve=Ce==null?void 0:Ce.allowedFileTypes)==null?void 0:Ve.join(","),required:!0}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Max size:"," ",Ce!=null&&Ce.maxFileSize?Math.round(Ce.maxFileSize/1024/1024):5,"MB"]})]}),Ce!=null&&Ce.expiryRequired?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Expiry Date ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"date",value:De,onChange:We=>Oe(We.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20",required:!0})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Expiry Date (Optional)"}),jsxRuntimeExports.jsx("input",{type:"date",value:De,onChange:We=>Oe(We.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:t,disabled:Be,className:"px-4 py-2 text-text-secondary hover:bg-gray-50 rounded-lg disabled:opacity-50",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Be||!Te,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 flex items-center gap-2",children:Be?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):"Upload"})]})]})})},AssetsTab=({employeeId:e,readOnly:t=!1})=>{const{showToast:n}=useNotification(),[Ee,Re]=reactExports.useState([]),[Ce,Te]=reactExports.useState(!0),[,Me]=reactExports.useState(null),[De,Oe]=reactExports.useState(!1),[Be,ze]=reactExports.useState(!1),[$e,He]=reactExports.useState(null),Ue=async()=>{Te(!0);try{const Ge=await apiService.getAssetAssignments({employeeId:e});Array.isArray(Ge)?Re(Ge):Ge&&Ge.assignments?Re(Ge.assignments):Re([])}catch(Ge){Me("Failed to load assets"),console.error(Ge)}finally{Te(!1)}};reactExports.useEffect(()=>{e&&Ue()},[e]);const Ve=()=>{Oe(!1),Ue(),n("Asset assigned successfully","success")},We=()=>{ze(!1),Ue(),n("Asset returned successfully","success")},qe=Ge=>{const Ye=Ge.toLowerCase();return Ye.includes("laptop")||Ye.includes("computer")?jsxRuntimeExports.jsx(Laptop,{size:20}):Ye.includes("mobile")||Ye.includes("phone")?jsxRuntimeExports.jsx(Smartphone,{size:20}):jsxRuntimeExports.jsx(Monitor,{size:20})};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Assigned Assets"}),!t&&jsxRuntimeExports.jsx(Button,{onClick:()=>Oe(!0),leftIcon:jsxRuntimeExports.jsx(Plus,{size:16}),disabled:!e,type:"button",children:"Assign Asset"})]}),Ce?jsxRuntimeExports.jsx("div",{className:"flex justify-center p-8",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"})}):Ee.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12 bg-bg-card rounded-xl border border-border",children:[jsxRuntimeExports.jsx(Monitor,{size:48,className:"mx-auto text-text-muted mb-3"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-text-primary",children:"No Assets Assigned"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"This employee currently has no assets assigned."})]}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ee.map(Ge=>{var Ye,Ke,Xe,Ze;return jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-4 hover:shadow-md transition-shadow",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-primary/10 flex items-center justify-center text-brand-primary",children:qe(((Ke=(Ye=Ge.assetId)==null?void 0:Ye.categoryId)==null?void 0:Ke.name)||"")}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-text-primary",children:((Xe=Ge.assetId)==null?void 0:Xe.name)||"Unknown Asset"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:((Ze=Ge.assetId)==null?void 0:Ze.assetCode)||"N/A"})]})]}),jsxRuntimeExports.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ge.status==="Active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:Ge.status})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-text-secondary mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"block text-xs text-text-muted",children:"Issued"}),new Date(Ge.issueDate).toLocaleDateString()]}),Ge.status==="Returned"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"block text-xs text-text-muted",children:"Returned"}),new Date(Ge.actualReturnDate).toLocaleDateString()]})]}),Ge.status==="Active"&&!t&&jsxRuntimeExports.jsx("div",{className:"pt-3 border-t border-border flex justify-end",children:jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{He(Ge),ze(!0)},className:"text-sm text-red-600 hover:text-red-700 font-medium flex items-center gap-1",children:[jsxRuntimeExports.jsx(ArrowRightLeft,{size:14})," Return Asset"]})})]},Ge._id)})}),De&&jsxRuntimeExports.jsx(AssignAssetModal,{isOpen:De,onClose:()=>Oe(!1),onSuccess:Ve,employeeId:e}),Be&&$e&&jsxRuntimeExports.jsx(ReturnAssetModal,{isOpen:Be,onClose:()=>ze(!1),onSuccess:We,assignment:$e})]})},AssignAssetModal=({isOpen:e,onClose:t,onSuccess:n,employeeId:Ee})=>{const[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState([]),[De,Oe]=reactExports.useState(""),[Be,ze]=reactExports.useState({assetId:"",issueDate:new Date().toISOString().split("T")[0],expectedReturnDate:"",conditionAtIssue:"New",notes:""});reactExports.useEffect(()=>{$e()},[]);const $e=async()=>{try{const Ve=await apiService.getAssets({status:"Available"});Ve.assets&&Me(Ve.assets)}catch(Ve){console.error("Failed to fetch assets",Ve)}},He=async Ve=>{Ve.preventDefault(),Ce(!0);try{await apiService.assignAsset({...Be,employeeId:Ee}),n()}catch(We){console.error(We),alert(We.message||"Failed to assign asset")}finally{Ce(!1)}},Ue=Te.filter(Ve=>Ve.name.toLowerCase().includes(De.toLowerCase())||Ve.assetCode.toLowerCase().includes(De.toLowerCase()));return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:t,title:"Assign Asset",children:jsxRuntimeExports.jsxs("form",{onSubmit:He,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Search Asset"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-2.5 text-text-muted",size:16}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search by name or code...",value:De,onChange:Ve=>Oe(Ve.target.value),className:"w-full pl-9 pr-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Select Asset ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("select",{value:Be.assetId,onChange:Ve=>ze({...Be,assetId:Ve.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20",required:!0,size:5,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select an asset..."}),Ue.map(Ve=>jsxRuntimeExports.jsxs("option",{value:Ve._id,children:[Ve.name," (",Ve.assetCode,") - ",Ve.model]},Ve._id))]}),Ue.length===0&&jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted mt-1",children:"No available assets found matching your search."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Input,{label:"Issue Date",type:"date",value:Be.issueDate,onChange:Ve=>ze({...Be,issueDate:Ve.target.value}),required:!0}),jsxRuntimeExports.jsx(Input,{label:"Expected Return (Optional)",type:"date",value:Be.expectedReturnDate,onChange:Ve=>ze({...Be,expectedReturnDate:Ve.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Condition at Issue"}),jsxRuntimeExports.jsx(Select,{value:Be.conditionAtIssue,onChange:Ve=>ze({...Be,conditionAtIssue:Ve}),options:[{value:"New",label:"New"},{value:"Good",label:"Good"},{value:"Used",label:"Used"},{value:"Damaged",label:"Damaged"}]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes"}),jsxRuntimeExports.jsx("textarea",{value:Be.notes,onChange:Ve=>ze({...Be,notes:Ve.target.value}),rows:3,className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:t,disabled:Re,type:"button",children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",isLoading:Re,disabled:!Be.assetId,children:"Assign"})]})]})})},ReturnAssetModal=({isOpen:e,onClose:t,onSuccess:n,assignment:Ee})=>{const[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState({returnDate:new Date().toISOString().split("T")[0],conditionAtReturn:Ee.conditionAtIssue||"Good",notes:""}),De=async Oe=>{Oe.preventDefault(),Ce(!0);try{await apiService.returnAsset(Ee._id,{returnDate:Te.returnDate,conditionAtReturn:Te.conditionAtReturn,notes:Te.notes}),n()}catch(Be){console.error(Be),alert(Be.message||"Failed to return asset")}finally{Ce(!1)}};return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:t,title:`Return ${Ee.assetId.name}`,children:jsxRuntimeExports.jsxs("form",{onSubmit:De,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg flex items-start gap-3",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"text-blue-500 shrink-0 mt-0.5",size:18}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[jsxRuntimeExports.jsxs("p",{className:"font-medium",children:["Passing Asset: ",Ee.assetId.assetCode]}),jsxRuntimeExports.jsxs("p",{children:["Issued on: ",new Date(Ee.issueDate).toLocaleDateString()]})]})]}),jsxRuntimeExports.jsx(Input,{label:"Return Date",type:"date",value:Te.returnDate,onChange:Oe=>Me({...Te,returnDate:Oe.target.value}),required:!0}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Condition at Return"}),jsxRuntimeExports.jsx(Select,{value:Te.conditionAtReturn,onChange:Oe=>Me({...Te,conditionAtReturn:Oe}),options:[{value:"New",label:"New"},{value:"Good",label:"Good"},{value:"Used",label:"Used"},{value:"Damaged",label:"Damaged"}]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes (Optional damage comments etc.)"}),jsxRuntimeExports.jsx("textarea",{value:Te.notes,onChange:Oe=>Me({...Te,notes:Oe.target.value}),rows:3,className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:t,disabled:Re,type:"button",children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",isLoading:Re,children:"Confirm Return"})]})]})})},ALL_TABS$1=["Basic Info","Work Info","Hierarchy","Personal","Identity","Contact","Bank Details","Documents","Assets","Separation","Additional"],TAB_ICONS={"Basic Info":User,"Work Info":Briefcase,Hierarchy:Network,Personal:CircleUser,Identity:FingerprintPattern,Contact:Phone,"Bank Details":Landmark,Documents:FileText,Assets:Monitor,Separation:LogOut,Additional:Grid3x3};function AddEditEmployee({isOpen:e,onClose:t,employee:n,viewMode:Ee=!1}){var cr,rr,pr,mr;const{user:Re}=useAuth(),Ce=ALL_TABS$1.filter(ir=>{var nr;return!(ir==="Documents"&&!((nr=Re==null?void 0:Re.accessibleModules)!=null&&nr.includes("documents")))}),[Te,Me]=reactExports.useState(Ce[0]),[De,Oe]=reactExports.useState(!1),[Be,ze]=reactExports.useState([]),[$e,He]=reactExports.useState([]),[Ue,Ve]=reactExports.useState([]),[We,qe]=reactExports.useState([]),[Ge,Ye]=reactExports.useState(null),[Ke,Xe]=reactExports.useState(null),[Ze,er]=reactExports.useState({employeeId:"",firstName:"",lastName:"",nickName:"",email:"",password:"",department:"",location:"",designation:"",designationId:"",shiftId:"",role:"",employmentType:"",employeeStatus:"Active",sourceOfHire:"",dateOfJoining:"",totalExperience:"",reportingManager:"",dateOfBirth:"",gender:"",maritalStatus:"",aboutMe:"",expertise:"",uan:"",pan:"",aadhaar:"",workPhone:"",extension:"",seatingLocation:"",presentAddress:"",permanentAddress:"",personalMobile:"",personalEmail:"",dateOfExit:"",workExperience:[],education:[],dependents:[],bankDetails:{accountName:"",accountNumber:"",bankName:"",ifscCode:""}});reactExports.useEffect(()=>{var ir,nr;e&&(St(),n?(er({...n,reportingManager:((ir=n.reportingManager)==null?void 0:ir._id)||n.reportingManager||"",designationId:n.designationId||"",shiftId:((nr=n.shiftId)==null?void 0:nr._id)||n.shiftId||"",dateOfJoining:n.dateOfJoining?n.dateOfJoining.split("T")[0]:"",dateOfBirth:n.dateOfBirth?n.dateOfBirth.split("T")[0]:"",dateOfExit:n.dateOfExit?n.dateOfExit.split("T")[0]:"",bankDetails:n.bankDetails||{accountName:"",accountNumber:"",bankName:"",ifscCode:""}}),n.profilePicture&&Xe(n.profilePicture.startsWith("http")?n.profilePicture:`${ASSET_BASE_URL}/${n.profilePicture}`)):(er({employeeId:"",firstName:"",lastName:"",nickName:"",email:"",password:"",department:"",location:"",designation:"",designationId:"",shiftId:"",role:"",employmentType:"",employeeStatus:"Active",sourceOfHire:"",dateOfJoining:"",totalExperience:"",reportingManager:"",dateOfBirth:"",gender:"",maritalStatus:"",aboutMe:"",expertise:"",uan:"",pan:"",aadhaar:"",workPhone:"",extension:"",seatingLocation:"",presentAddress:"",permanentAddress:"",personalMobile:"",personalEmail:"",dateOfExit:"",workExperience:[],education:[],dependents:[],bankDetails:{accountName:"",accountNumber:"",bankName:"",ifscCode:""}}),Ye(null),Xe(null)))},[e,n]);const St=async()=>{try{console.log("Fetching roles and employees...");const[ir,nr,gr]=await Promise.all([apiService.getRoles(),apiService.getEmployees(),apiService.getDesignations()]);console.log("Roles received:",ir),console.log("Roles count:",ir==null?void 0:ir.length),console.log("Roles count:",ir==null?void 0:ir.length),ze(ir||[]),He(nr),Ve(gr||[]);const Er=await apiService.getShifts();qe(Er||[])}catch(ir){console.error("Failed to fetch dropdowns",ir)}},ar=ir=>{const{name:nr,value:gr}=ir.target;er(Er=>({...Er,[nr]:gr}))},hr=ir=>{var gr;const nr=(gr=ir.target.files)==null?void 0:gr[0];if(nr){Ye(nr);const Er=new FileReader;Er.onloadend=()=>{Xe(Er.result)},Er.readAsDataURL(nr)}},ur=()=>{Ye(null),Xe(null)},dr=(ir,nr,gr,Er)=>{er(Cr=>{const Nr=[...Cr[ir]];return Nr[nr]={...Nr[nr],[gr]:Er},{...Cr,[ir]:Nr}})},vr=(ir,nr)=>{er(gr=>({...gr,[ir]:[...gr[ir],nr]}))},yr=(ir,nr)=>{er(gr=>({...gr,[ir]:gr[ir].filter((Er,Cr)=>Cr!==nr)}))},br=async ir=>{ir.preventDefault(),Oe(!0);try{const nr=new FormData;Object.keys(Ze).forEach(gr=>{["user","_id","__v","addedTime","modifiedTime","addedBy","modifiedBy"].includes(gr)||(Array.isArray(Ze[gr])||gr==="bankDetails"?nr.append(gr,JSON.stringify(Ze[gr])):Ze[gr]!==null&&Ze[gr]!==void 0&&nr.append(gr,Ze[gr]))}),Ge&&nr.append("profilePicture",Ge),n?await apiService.updateEmployee(n._id,nr):await apiService.createEmployee(nr),t()}catch(nr){alert(nr.message||"Failed to save employee")}finally{Oe(!1)}},lr=(ir,nr,gr="text",Er=!1,Cr)=>jsxRuntimeExports.jsx("div",{children:Cr?jsxRuntimeExports.jsx(Select,{label:ir,required:Er,value:Ze[nr],onChange:Nr=>ar({target:{name:nr,value:Nr}}),options:Cr.map(Nr=>({value:Nr,label:Nr})),disabled:Ee,className:"disabled:opacity-60"}):gr==="date"?jsxRuntimeExports.jsx(DatePicker,{label:ir,name:nr,value:Ze[nr],onChange:ar,disabled:Ee,required:Er}):jsxRuntimeExports.jsx(Input,{label:ir,type:gr,name:nr,value:Ze[nr],onChange:ar,disabled:Ee,required:Er,className:"disabled:opacity-60"})});return jsxRuntimeExports.jsxs(Modal,{isOpen:e,onClose:t,title:Ee?"View Employee":n?"Edit Employee":"Add New Employee",maxWidth:"max-w-6xl",bodyClassName:"flex flex-col md:flex-row h-full overflow-hidden p-0",footer:Ee?void 0:jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 w-full",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",disabled:De,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:ir=>br(ir),className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors disabled:opacity-50",disabled:De,children:De?"Saving...":"Save Employee"})]}),children:[jsxRuntimeExports.jsx("div",{className:"w-full md:w-64 bg-bg-main/30 border-b md:border-b-0 md:border-r border-border overflow-x-auto md:overflow-y-auto shrink-0 flex md:flex-col p-2 space-y-1",children:Ce.map(ir=>{const nr=TAB_ICONS[ir]||User;return jsxRuntimeExports.jsxs("button",{onClick:()=>Me(ir),className:`px-4 py-3 text-sm font-medium text-left transition-colors flex items-center gap-3 whitespace-nowrap rounded-lg w-full ${Te===ir?"bg-brand-primary text-white shadow-sm":"text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[jsxRuntimeExports.jsx(nr,{size:18}),ir]},ir)})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:jsxRuntimeExports.jsx("form",{onSubmit:br,children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[Te==="Basic Info"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"col-span-2 flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 rounded-full bg-bg-main border-2 border-dashed border-border flex items-center justify-center overflow-hidden relative group",children:Ke?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:Ke,alt:"Profile",className:"w-full h-full object-cover"}),!Ee&&jsxRuntimeExports.jsx("button",{type:"button",onClick:ur,className:"absolute inset-0 bg-black/50 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:jsxRuntimeExports.jsx(Trash2,{size:20})})]}):jsxRuntimeExports.jsx(Upload,{className:"text-gray-400",size:24})}),!Ee&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"file",id:"profileUpload",accept:"image/*",className:"hidden",onChange:hr}),jsxRuntimeExports.jsx("label",{htmlFor:"profileUpload",className:"cursor-pointer px-4 py-2 bg-bg-card border border-border rounded-lg hover:bg-bg-hover text-sm font-medium transition-colors text-text-primary",children:Ke?"Change Photo":"Upload Photo"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"PNG, JPG or GIF. Max 5MB."})]})]}),lr("Employee ID","employeeId","text",!0),lr("First Name","firstName","text",!0),lr("Last Name","lastName","text",!0),lr("Nick Name","nickName"),lr("Email Address","email","email",!0),!n&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Password ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(PasswordInput,{name:"password",value:Ze.password,onChange:ar,required:!n,placeholder:"Enter password for new user",className:"bg-bg-card"})]})]}),Te==="Work Info"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[lr("Department","department","text",!1,["Engineering","HR","Sales","Marketing","Finance"]),lr("Location","location","text",!1,["New York","London","Remote","Bangalore"]),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Designation",value:Ze.designationId,onChange:ir=>ar({target:{name:"designationId",value:ir}}),options:Ue.map(ir=>({value:ir._id,label:ir.name})),disabled:Ee,className:"disabled:opacity-60"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Role",value:Ze.role,onChange:ir=>ar({target:{name:"role",value:ir}}),options:Be.map(ir=>({value:ir.name,label:ir.name})),disabled:Ee,className:"disabled:opacity-60"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Shift",value:Ze.shiftId,onChange:ir=>ar({target:{name:"shiftId",value:ir}}),options:We.map(ir=>({value:ir._id,label:`${ir.name} (${ir.startTime} - ${ir.endTime})`})),disabled:Ee,className:"disabled:opacity-60"})}),lr("Employment Type","employmentType","text",!1,["Permanent","Contract","Intern","Freelancer","Part-Time"]),lr("Employee Status","employeeStatus","text",!1,["Active","Probation","On Leave","Notice Period","Terminated","Resigned"]),lr("Source of Hire","sourceOfHire","text",!1,["Recruitment","Referral","Direct","Campus","Vendor"]),lr("Date of Joining","dateOfJoining","date"),lr("Total Experience","totalExperience")]}),Te==="Hierarchy"&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-4",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Reporting Manager",value:Ze.reportingManager,onChange:ir=>ar({target:{name:"reportingManager",value:ir}}),options:$e.map(ir=>({value:ir._id,label:`${ir.firstName} ${ir.lastName}`})),disabled:Ee,className:"disabled:opacity-60"})})}),Te==="Personal"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[lr("Date of Birth","dateOfBirth","date"),lr("Gender","gender","text",!1,["Male","Female","Other"]),lr("Marital Status","maritalStatus","text",!1,["Single","Married","Divorced","Widowed"]),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"About Me"}),jsxRuntimeExports.jsx("textarea",{name:"aboutMe",value:Ze.aboutMe,onChange:ar,disabled:Ee,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 disabled:bg-bg-main bg-bg-card text-text-primary",rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Expertise / Ask Me"}),jsxRuntimeExports.jsx("textarea",{name:"expertise",value:Ze.expertise,onChange:ar,disabled:Ee,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 disabled:bg-bg-main bg-bg-card text-text-primary",rows:3})]})]}),Te==="Identity"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[lr("UAN","uan"),lr("PAN","pan"),lr("Aadhaar","aadhaar")]}),Te==="Contact"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[lr("Work Phone","workPhone"),lr("Extension","extension"),lr("Seating Location","seatingLocation"),lr("Personal Mobile","personalMobile"),lr("Personal Email","personalEmail","email"),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Present Address"}),jsxRuntimeExports.jsx("textarea",{name:"presentAddress",value:Ze.presentAddress,onChange:ar,disabled:Ee,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 disabled:bg-bg-main bg-bg-card text-text-primary",rows:2})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Permanent Address"}),jsxRuntimeExports.jsx("textarea",{name:"permanentAddress",value:Ze.permanentAddress,onChange:ar,disabled:Ee,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 disabled:bg-bg-main bg-bg-card text-text-primary",rows:2})]})]}),Te==="Bank Details"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Account Holder Name"}),jsxRuntimeExports.jsx(Input,{value:((cr=Ze.bankDetails)==null?void 0:cr.accountName)||"",onChange:ir=>er(nr=>({...nr,bankDetails:{...nr.bankDetails,accountName:ir.target.value}})),disabled:Ee,className:"disabled:opacity-60"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Account Number"}),jsxRuntimeExports.jsx(Input,{value:((rr=Ze.bankDetails)==null?void 0:rr.accountNumber)||"",onChange:ir=>er(nr=>({...nr,bankDetails:{...nr.bankDetails,accountNumber:ir.target.value}})),disabled:Ee,className:"disabled:opacity-60"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Bank Name"}),jsxRuntimeExports.jsx(Input,{value:((pr=Ze.bankDetails)==null?void 0:pr.bankName)||"",onChange:ir=>er(nr=>({...nr,bankDetails:{...nr.bankDetails,bankName:ir.target.value}})),disabled:Ee,className:"disabled:opacity-60"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"IFSC / SWIFT Code"}),jsxRuntimeExports.jsx(Input,{value:((mr=Ze.bankDetails)==null?void 0:mr.ifscCode)||"",onChange:ir=>er(nr=>({...nr,bankDetails:{...nr.bankDetails,ifscCode:ir.target.value}})),disabled:Ee,className:"disabled:opacity-60"})]})]}),Te==="Documents"&&(n?jsxRuntimeExports.jsx(DocumentsTab,{employeeId:n._id,readOnly:Ee,roleName:Ze.role}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-text-secondary",children:[jsxRuntimeExports.jsx(FileText,{size:48,className:"mb-4 text-text-muted"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:"Please save the employee first"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Documents can only be uploaded for existing employees."})]})),Te==="Assets"&&(n?jsxRuntimeExports.jsx(AssetsTab,{employeeId:n._id,readOnly:Ee}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-text-secondary",children:[jsxRuntimeExports.jsx(Monitor,{size:48,className:"mb-4 text-text-muted"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:"Please save the employee first"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Assets can only be assigned to existing employees."})]})),Te==="Separation"&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-4",children:lr("Date of Exit","dateOfExit","date")}),Te==="Additional"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium",children:"Work Experience"}),!Ee&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>vr("workExperience",{companyName:"",jobTitle:"",fromDate:"",toDate:"",description:""}),className:"text-brand-primary text-sm flex items-center gap-1",children:[jsxRuntimeExports.jsx(Plus,{size:16})," Add"]})]}),Ze.workExperience.map((ir,nr)=>jsxRuntimeExports.jsxs("div",{className:"border p-3 rounded mb-2 relative",children:[!Ee&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>yr("workExperience",nr),className:"absolute top-2 right-2 text-red-500",children:jsxRuntimeExports.jsx(Trash2,{size:16})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsx(Input,{placeholder:"Company",value:ir.companyName,onChange:gr=>dr("workExperience",nr,"companyName",gr.target.value),className:"w-full",disabled:Ee}),jsxRuntimeExports.jsx(Input,{placeholder:"Job Title",value:ir.jobTitle,onChange:gr=>dr("workExperience",nr,"jobTitle",gr.target.value),className:"w-full",disabled:Ee}),jsxRuntimeExports.jsx(DatePicker,{placeholder:"From",value:ir.fromDate?ir.fromDate.split("T")[0]:"",onChange:gr=>dr("workExperience",nr,"fromDate",gr.target.value),disabled:Ee}),jsxRuntimeExports.jsx(DatePicker,{placeholder:"To",value:ir.toDate?ir.toDate.split("T")[0]:"",onChange:gr=>dr("workExperience",nr,"toDate",gr.target.value),disabled:Ee})]})]},nr))]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium",children:"Education"}),!Ee&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>vr("education",{instituteName:"",degree:"",specialization:"",dateOfCompletion:""}),className:"text-brand-primary text-sm flex items-center gap-1",children:[jsxRuntimeExports.jsx(Plus,{size:16})," Add"]})]}),Ze.education.map((ir,nr)=>jsxRuntimeExports.jsxs("div",{className:"border p-3 rounded mb-2 relative",children:[!Ee&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>yr("education",nr),className:"absolute top-2 right-2 text-red-500",children:jsxRuntimeExports.jsx(Trash2,{size:16})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsx(Input,{placeholder:"Institute",value:ir.instituteName,onChange:gr=>dr("education",nr,"instituteName",gr.target.value),className:"w-full",disabled:Ee}),jsxRuntimeExports.jsx(Input,{placeholder:"Degree",value:ir.degree,onChange:gr=>dr("education",nr,"degree",gr.target.value),className:"w-full",disabled:Ee}),jsxRuntimeExports.jsx(Input,{placeholder:"Specialization",value:ir.specialization,onChange:gr=>dr("education",nr,"specialization",gr.target.value),className:"w-full",disabled:Ee}),jsxRuntimeExports.jsx(DatePicker,{placeholder:"Completion Date",value:ir.dateOfCompletion?ir.dateOfCompletion.split("T")[0]:"",onChange:gr=>dr("education",nr,"dateOfCompletion",gr.target.value),disabled:Ee})]})]},nr))]})]})]})})})]})}const BulkUploadModal=({isOpen:e,onClose:t})=>{const[n,Ee]=reactExports.useState([]),[Re,Ce]=reactExports.useState([]),[Te,Me]=reactExports.useState(!0),[De,Oe]=reactExports.useState(""),[Be,ze]=reactExports.useState(""),[$e,He]=reactExports.useState([]),[Ue,Ve]=reactExports.useState({}),[We,qe]=reactExports.useState(!1),Ge=reactExports.useRef(null);reactExports.useEffect(()=>{e?Ye():(He([]),Ve({}),Oe(""),ze(""),qe(!1))},[e]);const Ye=async()=>{Me(!0);try{const[ar,hr]=await Promise.all([apiService.getAllDocumentTypes(),apiService.getEmployees()]);ar.success&&Ee(ar.data),Ce(Array.isArray(hr)?hr:hr.data||[])}catch(ar){console.error("Failed to load config",ar)}finally{Me(!1)}},Ke=ar=>{if(ar.target.files){const hr=Array.from(ar.target.files);Xe(hr)}},Xe=ar=>{const hr={...Ue};ar.forEach(ur=>{const dr=ur.name.split(".")[0];let vr=dr;dr.includes("_")?vr=dr.split("_")[0]:dr.includes("-")&&(vr=dr.split("-")[0]);const yr=Re.find(br=>br.employeeId===vr);yr?hr[ur.name]={status:"pending",employeeId:yr._id,employeeName:`${yr.firstName} ${yr.lastName} (${yr.employeeId})`}:hr[ur.name]={status:"error",message:`Employee ID '${vr}' not found`}}),He(ur=>[...ur,...ar]),Ve(hr)},Ze=ar=>{He(ur=>ur.filter(dr=>dr.name!==ar));const hr={...Ue};delete hr[ar],Ve(hr)},er=async()=>{if(!De)return;qe(!0);const ar=$e.filter(hr=>{var ur;return((ur=Ue[hr.name])==null?void 0:ur.status)==="pending"});for(const hr of ar){const ur=Ue[hr.name];if(!(!ur||!ur.employeeId)){Ve(dr=>({...dr,[hr.name]:{...dr[hr.name],status:"uploading"}}));try{const dr=new FormData;dr.append("file",hr),dr.append("employeeId",ur.employeeId),dr.append("documentTypeId",De),Be&&dr.append("expiryDate",Be),await apiService.uploadEmployeeDocument(dr),Ve(vr=>({...vr,[hr.name]:{...vr[hr.name],status:"success"}}))}catch(dr){Ve(vr=>({...vr,[hr.name]:{...vr[hr.name],status:"error",message:dr.message||"Upload failed"}}))}}}qe(!1)},St=n.find(ar=>ar._id===De);return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:We?()=>{}:t,title:"Bulk Document Upload",maxWidth:"max-w-4xl",children:jsxRuntimeExports.jsx("div",{className:"space-y-6 min-h-[400px]",children:Te?jsxRuntimeExports.jsx("div",{className:"flex justify-center py-12",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin text-brand-primary",size:32})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Select,{label:"Document Type",value:De,onChange:ar=>Oe(ar),options:n.map(ar=>({value:ar._id,label:ar.name})),disabled:We||$e.length>0}),(St==null?void 0:St.expiryRequired)&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Default Expiry"}),jsxRuntimeExports.jsx("input",{type:"date",value:Be,onChange:ar=>ze(ar.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20",disabled:We}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Applied to all uploaded documents"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-2 border-dashed border-border rounded-xl p-8 text-center hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx("input",{ref:Ge,type:"file",multiple:!0,className:"hidden",onChange:Ke,disabled:!De||We}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-brand-primary/10 rounded-full text-brand-primary",children:jsxRuntimeExports.jsx(Upload,{size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-text-primary",children:"Click to upload or drag and drop"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary",children:"Supported: PDF, JPG, PNG. Filenames must start with Employee ID (e.g., EMP001_Offer.pdf)"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{var ar;return(ar=Ge.current)==null?void 0:ar.click()},disabled:!De||We,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 font-medium text-sm",children:"Select Files"})]})]}),$e.length>0&&jsxRuntimeExports.jsxs("div",{className:"border border-border rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-hover px-4 py-2 border-b border-border text-sm font-medium text-text-secondary flex justify-between",children:[jsxRuntimeExports.jsxs("span",{children:["Selected Files (",$e.length,")"]}),jsxRuntimeExports.jsxs("span",{className:"text-xs",children:["Ready:"," ",$e.filter(ar=>{var hr;return((hr=Ue[ar.name])==null?void 0:hr.status)==="pending"}).length," ","| Success:"," ",$e.filter(ar=>{var hr;return((hr=Ue[ar.name])==null?void 0:hr.status)==="success"}).length," ","| Error:"," ",$e.filter(ar=>{var hr;return((hr=Ue[ar.name])==null?void 0:hr.status)==="error"}).length]})]}),jsxRuntimeExports.jsx("div",{className:"max-h-64 overflow-y-auto divide-y divide-border",children:$e.map((ar,hr)=>{const ur=Ue[ar.name];return jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 flex items-center justify-between text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(FileText,{size:16,className:"text-text-muted"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-text-primary truncate max-w-xs",title:ar.name,children:ar.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:(ur==null?void 0:ur.employeeName)||(ur==null?void 0:ur.message)||"Processing..."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[(ur==null?void 0:ur.status)==="pending"&&jsxRuntimeExports.jsx("span",{className:"text-blue-500 bg-blue-50 px-2 py-0.5 rounded text-xs font-medium",children:"Ready"}),(ur==null?void 0:ur.status)==="uploading"&&jsxRuntimeExports.jsx(LoaderCircle,{size:16,className:"text-brand-primary animate-spin"}),(ur==null?void 0:ur.status)==="success"&&jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-green-500"}),(ur==null?void 0:ur.status)==="error"&&jsxRuntimeExports.jsx(CircleAlert,{size:16,className:"text-red-500"}),!We&&(ur==null?void 0:ur.status)!=="success"&&jsxRuntimeExports.jsx("button",{onClick:()=>Ze(ar.name),className:"text-text-secondary hover:text-red-500",children:jsxRuntimeExports.jsx(X$1,{size:16})})]})]},hr)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end pt-4 border-t border-border gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:t,disabled:We,className:"px-4 py-2 text-text-secondary hover:bg-bg-hover rounded-lg font-medium text-sm",children:"Close"}),jsxRuntimeExports.jsxs("button",{onClick:er,disabled:We||$e.filter(ar=>{var hr;return((hr=Ue[ar.name])==null?void 0:hr.status)==="pending"}).length===0,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 font-medium text-sm flex items-center gap-2",children:[We&&jsxRuntimeExports.jsx(LoaderCircle,{size:16,className:"animate-spin"}),We?"Uploading...":`Upload ${$e.filter(ar=>{var hr;return((hr=Ue[ar.name])==null?void 0:hr.status)==="pending"}).length} Files`]})]})]})})})};function EmployeeManagement(){const{user:e}=useAuth(),[t,n]=reactExports.useState([]),[Ee,Re]=reactExports.useState(!0),[Ce,Te]=reactExports.useState(null),[Me,De]=reactExports.useState(!1),[Oe,Be]=reactExports.useState(!1),[ze,$e]=reactExports.useState(null),[He,Ue]=reactExports.useState(!1),[Ve,We]=reactExports.useState(null),[qe,Ge]=reactExports.useState(null),[Ye,Ke]=reactExports.useState(!1),Xe=async()=>{Re(!0);try{const br=await apiService.getEmployees();n(Array.isArray(br)?br:[]),Te(null)}catch(br){Te(br.message||"Failed to fetch employees")}finally{Re(!1)}};reactExports.useEffect(()=>{Xe()},[]);const Ze=()=>{$e(null),Ue(!1),De(!0)},er=br=>{$e(br),Ue(!1),De(!0)},St=br=>{$e(br),Ue(!0),De(!0)},ar=()=>{De(!1),$e(null),Ue(!1),Xe()},hr=async br=>{var lr,cr;try{const rr=((lr=br.user)==null?void 0:lr._id)||br.user;if(!rr){alert("User ID not found");return}const mr=(((cr=br.user)==null?void 0:cr.status)||"active")==="active"?"inactive":"active";await apiService.updateUserStatus(rr,mr),Xe()}catch(rr){alert(rr.message||"Failed to update status")}},ur=br=>{var cr;const lr=((cr=br.user)==null?void 0:cr._id)||br.user;if(!lr){alert("User ID not found");return}Ge(lr)},dr=async()=>{if(qe){Ke(!0);try{await apiService.resetUserPassword(qe),alert("Password reset successfully. Default password sent to user.")}catch(br){alert(br.message||"Failed to reset password")}finally{Ke(!1),Ge(null)}}},vr=br=>{var cr;const lr=((cr=br.user)==null?void 0:cr._id)||br.user;if(!lr){alert("User ID not found");return}We(lr)},yr=async()=>{if(Ve){Ke(!0);try{await apiService.deleteUser(Ve),Xe()}catch(br){alert(br.message||"Failed to delete user")}finally{Ke(!1),We(null)}}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Employee Management"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Manage detailed employee records"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[(!(e!=null&&e.accessibleModules)||e.accessibleModules.includes("documents"))&&jsxRuntimeExports.jsx(Button,{onClick:()=>Be(!0),variant:"outline",leftIcon:jsxRuntimeExports.jsx(Upload,{size:20}),children:"Bulk Upload"}),jsxRuntimeExports.jsx(Button,{onClick:Ze,leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Add Employee"})]})]}),Ce&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:Ce}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-border overflow-hidden",children:jsxRuntimeExports.jsx(Table$1,{columns:[{header:"Employee",accessorKey:"firstName",searchKey:"firstName",render:br=>{var lr,cr;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[br.profilePicture?jsxRuntimeExports.jsx("img",{src:br.profilePicture.startsWith("http")?br.profilePicture:`${ASSET_BASE_URL}/${br.profilePicture}`,alt:`${br.firstName} ${br.lastName}`,className:"w-10 h-10 rounded-full object-cover border border-border"}):jsxRuntimeExports.jsxs("div",{className:"w-10 h-10 rounded-full bg-brand-primary/10 flex items-center justify-center text-brand-primary font-medium",children:[((lr=br.firstName)==null?void 0:lr[0])||"?",((cr=br.lastName)==null?void 0:cr[0])||""]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium text-text-primary",children:[br.firstName," ",br.lastName,br.isPlaceholder&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:"No Details"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-text-secondary",children:br.employeeId})]})]})}},{header:"Role & Dept",accessorKey:"role",render:br=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-text-primary",children:br.role}),jsxRuntimeExports.jsx("div",{className:"text-xs text-text-secondary",children:br.department})]})},{header:"Status",accessorKey:"user.status",enableSorting:!0,render:br=>{var cr;const lr=((cr=br.user)==null?void 0:cr.status)||"active";return jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${lr==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:lr==="active"?"Active":"Inactive"})}},{header:"Contact",render:br=>jsxRuntimeExports.jsxs("div",{className:"text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("div",{children:br.email}),jsxRuntimeExports.jsx("div",{children:br.workPhone})]})},{header:"Actions",className:"text-right",render:br=>{var cr;const lr=((cr=br.user)==null?void 0:cr.status)||"active";return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>St(br),className:"p-2 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-lg transition-colors",title:"View Details",children:jsxRuntimeExports.jsx(Eye,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>er(br),className:"p-2 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-lg transition-colors",title:"Edit Employee",children:jsxRuntimeExports.jsx(Pen,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>hr(br),className:`p-2 rounded-lg transition-colors ${lr==="active"?"text-amber-600 hover:bg-amber-50":"text-green-600 hover:bg-green-50"}`,title:lr==="active"?"Deactivate User":"Activate User",children:lr==="active"?jsxRuntimeExports.jsx(UserX,{size:16}):jsxRuntimeExports.jsx(UserCheck,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>ur(br),className:"p-2 text-text-secondary hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Reset Password",children:jsxRuntimeExports.jsx(Lock,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>vr(br),className:"p-2 text-text-secondary hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete User",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})}}],data:t,isLoading:Ee,emptyMessage:"No employees found."})}),Me&&jsxRuntimeExports.jsx(AddEditEmployee,{isOpen:Me,onClose:ar,employee:ze,viewMode:He}),Oe&&jsxRuntimeExports.jsx(BulkUploadModal,{isOpen:Oe,onClose:()=>Be(!1)}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:Ve!==null,onClose:()=>We(null),onConfirm:yr,title:"Delete User",message:"Are you sure you want to delete this user? This action cannot be undone.",confirmText:"Delete",variant:"danger",isLoading:Ye}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:qe!==null,onClose:()=>Ge(null),onConfirm:dr,title:"Reset Password",message:"Are you sure you want to reset this user's password? A default password will be sent to them.",confirmText:"Reset Password",isLoading:Ye})]})}function RoleGuard({children:e,allowedRoles:t}){const{user:n,isAuthenticated:Ee,isLoading:Re}=useAuth(),Ce=useLocation();return Re?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen bg-bg-main",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary"})}):!Ee||!n?jsxRuntimeExports.jsx(Navigate,{to:"/login",state:{from:Ce},replace:!0}):t.includes(n.role)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e}):jsxRuntimeExports.jsx(Navigate,{to:"/unauthorized",replace:!0})}function ModuleGuard({children:e,module:t}){const{user:n,isAuthenticated:Ee,isLoading:Re}=useAuth(),Ce=useLocation();return Re?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen bg-bg-main",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary"})}):!Ee||!n?jsxRuntimeExports.jsx(Navigate,{to:"/login",state:{from:Ce},replace:!0}):n.role==="Super Admin"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e}):n.accessibleModules&&!n.accessibleModules.includes(t)?jsxRuntimeExports.jsx(Navigate,{to:"/unauthorized",replace:!0}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e})}function Login(){const[e,t]=reactExports.useState(""),[n,Ee]=reactExports.useState(""),[Re,Ce]=reactExports.useState(""),{login:Te,isLoading:Me}=useAuth(),De=useNavigate(),Oe=useLocation(),Be=async ze=>{var $e,He;ze.preventDefault(),Ce("");try{let Ue;try{if(navigator.geolocation){const Ke=await new Promise((Xe,Ze)=>{navigator.geolocation.getCurrentPosition(Xe,Ze,{timeout:5e3})});Ue={lat:Ke.coords.latitude,lng:Ke.coords.longitude}}}catch(Ke){console.log("Location access denied or failed",Ke)}const Ve=await Te(e,n,Ue),We=getAccessibleMenuItems(Ve.role),qe=getFirstAccessibleRoute(Ve.role),Ge=(He=($e=Oe.state)==null?void 0:$e.from)==null?void 0:He.pathname,Ye=Ge&&We.some(Ke=>Ke.to===Ge);De(Ye?Ge:qe,{replace:!0})}catch(Ue){Ce(Ue.message||"Invalid credentials. Please try again.")}};return jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-bg-main overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative bg-brand-primary text-white flex-col justify-between p-12 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:jsxRuntimeExports.jsx("svg",{className:"h-full w-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:jsxRuntimeExports.jsx("path",{d:"M0 100 C 20 0 50 0 100 100 Z",fill:"currentColor"})})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl backdrop-blur-sm flex items-center justify-center",children:jsxRuntimeExports.jsx(Building,{size:24,className:"text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold tracking-tight",children:"NeointeractionHR"})]}),jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-bold leading-tight mb-6",children:"Welcome back to your workspace."}),jsxRuntimeExports.jsx("p",{className:"text-lg text-blue-100 max-w-md leading-relaxed",children:"Securely access your dashboard, manage your team, and stay on top of your HR tasks."})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"flex -space-x-3",children:[1,2,3,4].map(ze=>jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-brand-primary bg-gray-200"},ze))}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold",children:"Join thousands of users"}),jsxRuntimeExports.jsx("p",{className:"text-blue-200",children:"Streamlining HR globally"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-blue-200 opacity-60",children:[" ",new Date().getFullYear()," NeointeractionHR. All rights reserved."]})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full lg:w-1/2 flex flex-col h-screen overflow-y-auto bg-bg-main justify-center",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto w-full p-6 md:p-12",children:[jsxRuntimeExports.jsxs("div",{className:"lg:hidden flex items-center gap-2 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-brand-primary rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(Building,{size:16,className:"text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-xl font-bold text-brand-primary",children:"NeointeractionHR"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:"Log in"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Welcome back! Please enter your details."})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Be,className:"space-y-5 animate-in fade-in slide-in-from-right-4 duration-300",children:[Re&&jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg bg-status-error/10 border border-status-error/20 text-status-error text-sm flex items-center gap-2 animate-in fade-in slide-in-from-top-1",children:[jsxRuntimeExports.jsx(CircleAlert,{size:16})," ",Re]}),jsxRuntimeExports.jsx(Input,{label:"Email",leftIcon:jsxRuntimeExports.jsx(Mail,{size:18}),type:"email",value:e,onChange:ze=>t(ze.target.value),placeholder:"name@company.com",required:!0,className:"bg-bg-card border-border"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1.5 ml-1",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-text-secondary",children:"Password"}),jsxRuntimeExports.jsx("button",{type:"button",className:"text-xs font-semibold text-brand-primary hover:text-brand-primary/80",children:"Forgot password?"})]}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-text-muted transition-colors group-focus-within:text-brand-primary",size:18}),jsxRuntimeExports.jsx(PasswordInput,{value:n,onChange:ze=>Ee(ze.target.value),className:"pl-10 bg-bg-card border-border",placeholder:"",required:!0})]})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Me,className:"w-full px-6 h-[38px] bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-all shadow-lg hover:shadow-brand-primary/30 disabled:opacity-70 disabled:cursor-not-allowed font-semibold text-sm flex items-center justify-center gap-2",children:Me?jsxRuntimeExports.jsx(Loader,{size:20,variant:"white"}):"Sign In"})]}),jsxRuntimeExports.jsxs("p",{className:"mt-8 text-center text-sm text-text-secondary",children:["Don't have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/signup",className:"text-brand-primary hover:text-brand-primary/80 font-semibold hover:underline decoration-2 underline-offset-2 transition-all",children:"Sign up"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-10 pt-6 border-t border-border",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-text-muted text-center mb-4 uppercase tracking-wider",children:"Quick Login (Demo)"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{t("admin@neointeraction.com"),Ee("Welcome@123")},className:"p-3 bg-bg-card border border-border rounded-lg hover:border-brand-primary/50 hover:bg-brand-primary/5 text-left transition-all group",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-text-primary group-hover:text-brand-primary mb-0.5",children:"Admin"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-text-muted truncate",children:"admin@neointeraction.com"})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{t("hr@neointeraction.com"),Ee("Welcome@123")},className:"p-3 bg-bg-card border border-border rounded-lg hover:border-brand-primary/50 hover:bg-brand-primary/5 text-left transition-all group",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-text-primary group-hover:text-brand-primary mb-0.5",children:"HR"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-text-muted truncate",children:"hr@neointeraction.com"})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{t("shameer@neointeraction.com"),Ee("password")},className:"p-3 bg-bg-card border border-border rounded-lg hover:border-brand-primary/50 hover:bg-brand-primary/5 text-left transition-all group",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-text-primary group-hover:text-brand-primary mb-0.5",children:"Manager"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-text-muted truncate",children:"shameer@neointeraction.com"})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{t("liya@neointeraction.com"),Ee("password")},className:"p-3 bg-bg-card border border-border rounded-lg hover:border-brand-primary/50 hover:bg-brand-primary/5 text-left transition-all group",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-text-primary group-hover:text-brand-primary mb-0.5",children:"Employee"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-text-muted truncate",children:"liya@neointeraction.com"})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{t("superadmin@hrms.com"),Ee("SuperAdmin@123")},className:"col-span-2 p-3 bg-purple-50 dark:bg-purple-900/10 border border-purple-200 dark:border-purple-800 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/20 text-left transition-all group",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-purple-700 dark:text-purple-300 mb-0.5",children:"Super Admin"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-purple-600/70 dark:text-purple-400/70 truncate",children:"superadmin@hrms.com"})]})]})]})]})})]})}const CompanySetup=()=>{const e=useNavigate(),[t,n]=reactExports.useState(1),[Ee,Re]=reactExports.useState(!1),[Ce,Te]=reactExports.useState(""),[Me,De]=reactExports.useState(!1),[Oe,Be]=reactExports.useState({companyName:"",adminName:"",adminEmail:"",password:"",confirmPassword:"",subdomain:"",plan:"free"}),ze=Ue=>{Be({...Oe,[Ue.target.name]:Ue.target.value}),Te("")},$e=async Ue=>{if(Ue.preventDefault(),Oe.password!==Oe.confirmPassword){Te("Passwords do not match");return}if(Oe.password.length<8){Te("Password must be at least 8 characters");return}Re(!0),Te("");try{await apiService.registerCompany({companyName:Oe.companyName,adminName:Oe.adminName,adminEmail:Oe.adminEmail,password:Oe.password,subdomain:Oe.subdomain||void 0,plan:Oe.plan}),De(!0)}catch(Ve){Te(Ve.message||"Failed to register company")}finally{Re(!1)}},He=[{id:"free",name:"Free",price:"$0",features:["Up to 10 employees","100 MB storage","Basic modules"]},{id:"basic",name:"Basic",price:"$29/mo",features:["Up to 50 employees","500 MB storage","All modules"]},{id:"pro",name:"Pro",price:"$99/mo",features:["Up to 200 employees","2 GB storage","Advanced features"]},{id:"enterprise",name:"Enterprise",price:"Custom",features:["Unlimited employees","10 GB storage","Premium support"]}];return jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-bg-main overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative bg-brand-primary text-white flex-col justify-between p-12 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:jsxRuntimeExports.jsx("svg",{className:"h-full w-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:jsxRuntimeExports.jsx("path",{d:"M0 100 C 20 0 50 0 100 100 Z",fill:"currentColor"})})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl backdrop-blur-sm flex items-center justify-center",children:jsxRuntimeExports.jsx(Building,{size:24,className:"text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold tracking-tight",children:"NeointeractionHR"})]}),jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-bold leading-tight mb-6",children:"Everything you need to manage your workforce."}),jsxRuntimeExports.jsx("p",{className:"text-lg text-blue-100 max-w-md leading-relaxed",children:"Join thousands of forward-thinking companies that use our platform to streamline HR, payroll, and employee engagement."})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"flex -space-x-3",children:[1,2,3,4].map(Ue=>jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-brand-primary bg-gray-200"},Ue))}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold",children:"Trusted by industry leaders"}),jsxRuntimeExports.jsx("p",{className:"text-blue-200",children:"Start your journey today"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-blue-200 opacity-60",children:[" ",new Date().getFullYear()," NeointeractionHR. All rights reserved."]})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full lg:w-1/2 flex flex-col h-screen overflow-y-auto bg-bg-main",children:jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col justify-center max-w-xl mx-auto w-full p-6 md:p-12 lg:p-16",children:[jsxRuntimeExports.jsxs("div",{className:"lg:hidden flex items-center gap-2 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-brand-primary rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(Building,{size:16,className:"text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-xl font-bold text-brand-primary",children:"NeointeractionHR"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:"Create your workspace"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"It only takes a few minutes to get started."})]}),jsxRuntimeExports.jsx("div",{className:"mb-10",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-full h-1 bg-border -z-10 rounded-full"}),[1,2,3].map(Ue=>jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center group",children:[jsxRuntimeExports.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 transition-all duration-300 ${t>=Ue?"bg-brand-primary border-brand-primary text-white scale-110 shadow-md":"bg-bg-card border-border text-text-muted"}`,children:t>Ue?jsxRuntimeExports.jsx(Check,{size:14,strokeWidth:3}):jsxRuntimeExports.jsx("span",{className:"text-xs font-bold",children:Ue})}),jsxRuntimeExports.jsx("span",{className:`absolute top-10 text-xs font-medium transition-colors duration-300 ${t===Ue?"text-brand-primary":"text-text-muted"}`,children:Ue===1?"Company":Ue===2?"Admin":"Plan"})]},Ue))]})}),jsxRuntimeExports.jsxs("form",{onSubmit:$e,className:"space-y-6",children:[Ce&&jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg bg-status-error/10 border border-status-error/20 text-status-error text-sm flex items-center gap-2 animate-in fade-in slide-in-from-top-1",children:[jsxRuntimeExports.jsx("div",{className:"w-1 h-1 rounded-full bg-status-error"})," ",Ce]}),t===1&&jsxRuntimeExports.jsxs("div",{className:"space-y-5 animate-in fade-in slide-in-from-right-4 duration-300",children:[jsxRuntimeExports.jsx(Input,{label:"Company Name *",leftIcon:jsxRuntimeExports.jsx(Building,{size:18}),type:"text",name:"companyName",value:Oe.companyName,onChange:ze,required:!0,placeholder:"e.g. Acme Corp",className:"bg-bg-card border-border h-[38px]"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Input,{label:"Subdomain",leftIcon:jsxRuntimeExports.jsx(Globe,{size:18}),type:"text",name:"subdomain",value:Oe.subdomain,onChange:ze,placeholder:"acme",className:"bg-bg-card border-border h-[38px]"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-text-muted mt-2 pl-1 flex items-center gap-1",children:["Your URL:"," ",jsxRuntimeExports.jsxs("span",{className:"font-mono text-brand-primary bg-brand-primary/10 px-1 rounded",children:[Oe.subdomain||"your-company",".yourhrms.com"]})]})]}),jsxRuntimeExports.jsx("div",{className:"pt-4",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>n(2),disabled:!Oe.companyName,className:"w-full px-6 h-[38px] bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-all shadow-lg hover:shadow-brand-primary/30 disabled:opacity-50 disabled:shadow-none font-semibold text-sm flex items-center justify-center",children:"Continue to Admin Setup"})})]}),t===2&&jsxRuntimeExports.jsxs("div",{className:"space-y-5 animate-in fade-in slide-in-from-right-4 duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[jsxRuntimeExports.jsx(Input,{label:"Full Name *",leftIcon:jsxRuntimeExports.jsx(User,{size:18}),type:"text",name:"adminName",value:Oe.adminName,onChange:ze,required:!0,placeholder:"John Doe",className:"bg-bg-card border-border h-[38px]"}),jsxRuntimeExports.jsx(Input,{label:"Work Email *",leftIcon:jsxRuntimeExports.jsx(Mail,{size:18}),type:"email",name:"adminEmail",value:Oe.adminEmail,onChange:ze,required:!0,placeholder:"john@company.com",className:"bg-bg-card border-border h-[38px]"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5 ml-1",children:"Password *"}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-text-muted transition-colors group-focus-within:text-brand-primary",size:18}),jsxRuntimeExports.jsx(PasswordInput,{value:Oe.password,onChange:ze,name:"password",required:!0,className:"pl-10 bg-bg-card border-border h-[38px] rounded-lg",placeholder:"Create a strong password"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5 ml-1",children:"Confirm Password *"}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-text-muted transition-colors group-focus-within:text-brand-primary",size:18}),jsxRuntimeExports.jsx(PasswordInput,{value:Oe.confirmPassword,onChange:ze,name:"confirmPassword",required:!0,className:"pl-10 bg-bg-card border-border h-[38px] rounded-lg",placeholder:"Repeat password"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 pt-4",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>n(1),className:"px-6 h-[38px] border border-border text-text-secondary rounded-lg hover:bg-bg-hover transition-colors font-semibold text-sm flex items-center justify-center",children:"Back"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>n(3),disabled:!Oe.adminName||!Oe.adminEmail||!Oe.password||!Oe.confirmPassword,className:"flex-1 px-6 h-[38px] bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-all shadow-lg hover:shadow-brand-primary/30 disabled:opacity-50 disabled:shadow-none font-semibold text-sm flex items-center justify-center",children:"Continue to Plans"})]})]}),t===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:He.map(Ue=>jsxRuntimeExports.jsxs("div",{onClick:()=>Be({...Oe,plan:Ue.id}),className:`relative p-5 border-2 rounded-xl cursor-pointer transition-all duration-200 group ${Oe.plan===Ue.id?"border-brand-primary bg-brand-primary/5 shadow-md":"border-border bg-bg-card hover:border-brand-primary/50 hover:bg-bg-hover"}`,children:[Oe.plan===Ue.id&&jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-4 text-brand-primary bg-white dark:bg-black rounded-full p-1 shadow-sm",children:jsxRuntimeExports.jsx(Check,{size:16,strokeWidth:3})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg text-text-primary",children:Ue.name}),jsxRuntimeExports.jsx("span",{className:`text-sm font-semibold px-3 py-1 rounded-full ${Oe.plan===Ue.id?"bg-brand-primary text-white":"bg-bg-hover text-text-secondary"}`,children:Ue.price})]}),jsxRuntimeExports.jsx("ul",{className:"space-y-2.5",children:Ue.features.slice(0,3).map((Ve,We)=>jsxRuntimeExports.jsxs("li",{className:"flex items-center text-sm text-text-secondary",children:[jsxRuntimeExports.jsx(Check,{className:`mr-2.5 w-4 h-4 ${Oe.plan===Ue.id?"text-brand-primary":"text-text-muted group-hover:text-brand-primary"}`}),Ve]},We))})]},Ue.id))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 pt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>n(2),className:"px-6 h-[38px] border border-border text-text-secondary rounded-lg hover:bg-bg-hover transition-colors font-semibold text-sm flex items-center justify-center",children:"Back"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ee,className:"flex-1 px-6 h-[38px] bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-all shadow-lg hover:shadow-brand-primary/30 disabled:opacity-50 disabled:shadow-none font-semibold text-sm flex items-center justify-center gap-2",children:Ee?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Setting up..."]}):"Create Company Workspace"})]})]})]}),jsxRuntimeExports.jsxs("p",{className:"mt-8 text-center text-sm text-text-secondary",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-brand-primary hover:text-brand-primary/80 font-semibold hover:underline decoration-2 underline-offset-2 transition-all",children:"Log in here"})]})]})}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:Me,onClose:()=>e("/login"),onConfirm:()=>e("/login"),title:"Registration Successful",message:`Company registered successfully! Please login with: ${Oe.adminEmail}`,confirmText:"Proceed to Login",variant:"success",showCancel:!1})]})};function Unauthorized(){const e=useNavigate();return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-bg-main flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"text-center max-w-md",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-status-error/10 rounded-full flex items-center justify-center mx-auto mb-6",children:jsxRuntimeExports.jsx(ShieldAlert,{size:40,className:"text-status-error"})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-3",children:"Access Denied"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mb-8",children:"You do not have permission to view this page. Please contact your administrator if you believe this is an error."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>e(-1),className:"px-6 py-2 border border-border rounded-lg text-text-primary hover:bg-bg-hover transition-colors font-medium",children:"Go Back"}),jsxRuntimeExports.jsx("button",{onClick:()=>e("/"),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary transition-colors font-medium shadow-lg shadow-brand-primary/20",children:"Go to Dashboard"})]})]})})}const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(t,n,Ee){let Re=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const Te=document.querySelector("meta[property=csp-nonce]"),Me=(Te==null?void 0:Te.nonce)||(Te==null?void 0:Te.getAttribute("nonce"));Re=Promise.allSettled(n.map(De=>{if(De=assetsURL(De),De in seen)return;seen[De]=!0;const Oe=De.endsWith(".css"),Be=Oe?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${De}"]${Be}`))return;const ze=document.createElement("link");if(ze.rel=Oe?"stylesheet":scriptRel,Oe||(ze.as="script"),ze.crossOrigin="",ze.href=De,Me&&ze.setAttribute("nonce",Me),document.head.appendChild(ze),Oe)return new Promise(($e,He)=>{ze.addEventListener("load",$e),ze.addEventListener("error",()=>He(new Error(`Unable to preload CSS for ${De}`)))})}))}function Ce(Te){const Me=new Event("vite:preloadError",{cancelable:!0});if(Me.payload=Te,window.dispatchEvent(Me),!Me.defaultPrevented)throw Te}return Re.then(Te=>{for(const Me of Te||[])Me.status==="rejected"&&Ce(Me.reason);return t().catch(Ce)})};function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(e,t){for(var n=new u16(31),Ee=0;Ee<31;++Ee)n[Ee]=t+=1<<e[Ee-1];for(var Re=new i32(n[30]),Ee=1;Ee<30;++Ee)for(var Ce=n[Ee];Ce<n[Ee+1];++Ce)Re[Ce]=Ce-n[Ee]<<5|Ee;return{b:n,r:Re}},_a$1=freb(fleb,2),fl=_a$1.b,revfl=_a$1.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),revfd=_b.r,rev=new u16(32768);for(var i$2=0;i$2<32768;++i$2){var x$1=(i$2&43690)>>1|(i$2&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$2]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(e,t,n){for(var Ee=e.length,Re=0,Ce=new u16(t);Re<Ee;++Re)e[Re]&&++Ce[e[Re]-1];var Te=new u16(t);for(Re=1;Re<t;++Re)Te[Re]=Te[Re-1]+Ce[Re-1]<<1;var Me;if(n){Me=new u16(1<<t);var De=15-t;for(Re=0;Re<Ee;++Re)if(e[Re])for(var Oe=Re<<4|e[Re],Be=t-e[Re],ze=Te[e[Re]-1]++<<Be,$e=ze|(1<<Be)-1;ze<=$e;++ze)Me[rev[ze]>>De]=Oe}else for(Me=new u16(Ee),Re=0;Re<Ee;++Re)e[Re]&&(Me[Re]=rev[Te[e[Re]-1]++]>>15-e[Re]);return Me},flt=new u8(288);for(var i$2=0;i$2<144;++i$2)flt[i$2]=8;for(var i$2=144;i$2<256;++i$2)flt[i$2]=9;for(var i$2=256;i$2<280;++i$2)flt[i$2]=7;for(var i$2=280;i$2<288;++i$2)flt[i$2]=8;var fdt=new u8(32);for(var i$2=0;i$2<32;++i$2)fdt[i$2]=5;var flm=hMap(flt,9,0),fdm=hMap(fdt,5,0),shft=function(e){return(e+7)/8|0},slc=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new u8(e.subarray(t,n))},wbits=function(e,t,n){n<<=t&7;var Ee=t/8|0;e[Ee]|=n,e[Ee+1]|=n>>8},wbits16=function(e,t,n){n<<=t&7;var Ee=t/8|0;e[Ee]|=n,e[Ee+1]|=n>>8,e[Ee+2]|=n>>16},hTree=function(e,t){for(var n=[],Ee=0;Ee<e.length;++Ee)e[Ee]&&n.push({s:Ee,f:e[Ee]});var Re=n.length,Ce=n.slice();if(!Re)return{t:et$1,l:0};if(Re==1){var Te=new u8(n[0].s+1);return Te[n[0].s]=1,{t:Te,l:1}}n.sort(function(Xe,Ze){return Xe.f-Ze.f}),n.push({s:-1,f:25001});var Me=n[0],De=n[1],Oe=0,Be=1,ze=2;for(n[0]={s:-1,f:Me.f+De.f,l:Me,r:De};Be!=Re-1;)Me=n[n[Oe].f<n[ze].f?Oe++:ze++],De=n[Oe!=Be&&n[Oe].f<n[ze].f?Oe++:ze++],n[Be++]={s:-1,f:Me.f+De.f,l:Me,r:De};for(var $e=Ce[0].s,Ee=1;Ee<Re;++Ee)Ce[Ee].s>$e&&($e=Ce[Ee].s);var He=new u16($e+1),Ue=ln(n[Be-1],He,0);if(Ue>t){var Ee=0,Ve=0,We=Ue-t,qe=1<<We;for(Ce.sort(function(Ze,er){return He[er.s]-He[Ze.s]||Ze.f-er.f});Ee<Re;++Ee){var Ge=Ce[Ee].s;if(He[Ge]>t)Ve+=qe-(1<<Ue-He[Ge]),He[Ge]=t;else break}for(Ve>>=We;Ve>0;){var Ye=Ce[Ee].s;He[Ye]<t?Ve-=1<<t-He[Ye]++-1:++Ee}for(;Ee>=0&&Ve;--Ee){var Ke=Ce[Ee].s;He[Ke]==t&&(--He[Ke],++Ve)}Ue=t}return{t:new u8(He),l:Ue}},ln=function(e,t,n){return e.s==-1?Math.max(ln(e.l,t,n+1),ln(e.r,t,n+1)):t[e.s]=n},lc=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new u16(++t),Ee=0,Re=e[0],Ce=1,Te=function(De){n[Ee++]=De},Me=1;Me<=t;++Me)if(e[Me]==Re&&Me!=t)++Ce;else{if(!Re&&Ce>2){for(;Ce>138;Ce-=138)Te(32754);Ce>2&&(Te(Ce>10?Ce-11<<5|28690:Ce-3<<5|12305),Ce=0)}else if(Ce>3){for(Te(Re),--Ce;Ce>6;Ce-=6)Te(8304);Ce>2&&(Te(Ce-3<<5|8208),Ce=0)}for(;Ce--;)Te(Re);Ce=1,Re=e[Me]}return{c:n.subarray(0,Ee),n:t}},clen=function(e,t){for(var n=0,Ee=0;Ee<t.length;++Ee)n+=e[Ee]*t[Ee];return n},wfblk=function(e,t,n){var Ee=n.length,Re=shft(t+2);e[Re]=Ee&255,e[Re+1]=Ee>>8,e[Re+2]=e[Re]^255,e[Re+3]=e[Re+1]^255;for(var Ce=0;Ce<Ee;++Ce)e[Re+Ce+4]=n[Ce];return(Re+4+Ee)*8},wblk=function(e,t,n,Ee,Re,Ce,Te,Me,De,Oe,Be){wbits(t,Be++,n),++Re[256];for(var ze=hTree(Re,15),$e=ze.t,He=ze.l,Ue=hTree(Ce,15),Ve=Ue.t,We=Ue.l,qe=lc($e),Ge=qe.c,Ye=qe.n,Ke=lc(Ve),Xe=Ke.c,Ze=Ke.n,er=new u16(19),St=0;St<Ge.length;++St)++er[Ge[St]&31];for(var St=0;St<Xe.length;++St)++er[Xe[St]&31];for(var ar=hTree(er,7),hr=ar.t,ur=ar.l,dr=19;dr>4&&!hr[clim[dr-1]];--dr);var vr=Oe+5<<3,yr=clen(Re,flt)+clen(Ce,fdt)+Te,br=clen(Re,$e)+clen(Ce,Ve)+Te+14+3*dr+clen(er,hr)+2*er[16]+3*er[17]+7*er[18];if(De>=0&&vr<=yr&&vr<=br)return wfblk(t,Be,e.subarray(De,De+Oe));var lr,cr,rr,pr;if(wbits(t,Be,1+(br<yr)),Be+=2,br<yr){lr=hMap($e,He,0),cr=$e,rr=hMap(Ve,We,0),pr=Ve;var mr=hMap(hr,ur,0);wbits(t,Be,Ye-257),wbits(t,Be+5,Ze-1),wbits(t,Be+10,dr-4),Be+=14;for(var St=0;St<dr;++St)wbits(t,Be+3*St,hr[clim[St]]);Be+=3*dr;for(var ir=[Ge,Xe],nr=0;nr<2;++nr)for(var gr=ir[nr],St=0;St<gr.length;++St){var Er=gr[St]&31;wbits(t,Be,mr[Er]),Be+=hr[Er],Er>15&&(wbits(t,Be,gr[St]>>5&127),Be+=gr[St]>>12)}}else lr=flm,cr=flt,rr=fdm,pr=fdt;for(var St=0;St<Me;++St){var Cr=Ee[St];if(Cr>255){var Er=Cr>>18&31;wbits16(t,Be,lr[Er+257]),Be+=cr[Er+257],Er>7&&(wbits(t,Be,Cr>>23&31),Be+=fleb[Er]);var Nr=Cr&31;wbits16(t,Be,rr[Nr]),Be+=pr[Nr],Nr>3&&(wbits16(t,Be,Cr>>5&8191),Be+=fdeb[Nr])}else wbits16(t,Be,lr[Cr]),Be+=cr[Cr]}return wbits16(t,Be,lr[256]),Be+cr[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(e,t,n,Ee,Re,Ce){var Te=Ce.z||e.length,Me=new u8(Ee+Te+5*(1+Math.ceil(Te/7e3))+Re),De=Me.subarray(Ee,Me.length-Re),Oe=Ce.l,Be=(Ce.r||0)&7;if(t){Be&&(De[0]=Ce.r>>3);for(var ze=deo[t-1],$e=ze>>13,He=ze&8191,Ue=(1<<n)-1,Ve=Ce.p||new u16(32768),We=Ce.h||new u16(Ue+1),qe=Math.ceil(n/3),Ge=2*qe,Ye=function(Yr){return(e[Yr]^e[Yr+1]<<qe^e[Yr+2]<<Ge)&Ue},Ke=new i32(25e3),Xe=new u16(288),Ze=new u16(32),er=0,St=0,ar=Ce.i||0,hr=0,ur=Ce.w||0,dr=0;ar+2<Te;++ar){var vr=Ye(ar),yr=ar&32767,br=We[vr];if(Ve[yr]=br,We[vr]=yr,ur<=ar){var lr=Te-ar;if((er>7e3||hr>24576)&&(lr>423||!Oe)){Be=wblk(e,De,0,Ke,Xe,Ze,St,hr,dr,ar-dr,Be),hr=er=St=0,dr=ar;for(var cr=0;cr<286;++cr)Xe[cr]=0;for(var cr=0;cr<30;++cr)Ze[cr]=0}var rr=2,pr=0,mr=He,ir=yr-br&32767;if(lr>2&&vr==Ye(ar-ir))for(var nr=Math.min($e,lr)-1,gr=Math.min(32767,ar),Er=Math.min(258,lr);ir<=gr&&--mr&&yr!=br;){if(e[ar+rr]==e[ar+rr-ir]){for(var Cr=0;Cr<Er&&e[ar+Cr]==e[ar+Cr-ir];++Cr);if(Cr>rr){if(rr=Cr,pr=ir,Cr>nr)break;for(var Nr=Math.min(ir,Cr-2),Mr=0,cr=0;cr<Nr;++cr){var Fr=ar-ir+cr&32767,$r=Ve[Fr],Wr=Fr-$r&32767;Wr>Mr&&(Mr=Wr,br=Fr)}}}yr=br,br=Ve[yr],ir+=yr-br&32767}if(pr){Ke[hr++]=268435456|revfl[rr]<<18|revfd[pr];var Zr=revfl[rr]&31,nn=revfd[pr]&31;St+=fleb[Zr]+fdeb[nn],++Xe[257+Zr],++Ze[nn],ur=ar+rr,++er}else Ke[hr++]=e[ar],++Xe[e[ar]]}}for(ar=Math.max(ar,ur);ar<Te;++ar)Ke[hr++]=e[ar],++Xe[e[ar]];Be=wblk(e,De,Oe,Ke,Xe,Ze,St,hr,dr,ar-dr,Be),Oe||(Ce.r=Be&7|De[Be/8|0]<<3,Be-=7,Ce.h=We,Ce.p=Ve,Ce.i=ar,Ce.w=ur)}else{for(var ar=Ce.w||0;ar<Te+Oe;ar+=65535){var an=ar+65535;an>=Te&&(De[Be/8|0]=Oe,an=Te),Be=wfblk(De,Be+1,e.subarray(ar,an))}Ce.i=Te}return slc(Me,0,Ee+shft(Be)+Re)},adler=function(){var e=1,t=0;return{p:function(n){for(var Ee=e,Re=t,Ce=n.length|0,Te=0;Te!=Ce;){for(var Me=Math.min(Te+2655,Ce);Te<Me;++Te)Re+=Ee+=n[Te];Ee=(Ee&65535)+15*(Ee>>16),Re=(Re&65535)+15*(Re>>16)}e=Ee,t=Re},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},dopt=function(e,t,n,Ee,Re){if(!Re&&(Re={l:1},t.dictionary)){var Ce=t.dictionary.subarray(-32768),Te=new u8(Ce.length+e.length);Te.set(Ce),Te.set(e,Ce.length),e=Te,Re.w=Ce.length}return dflt(e,t.level==null?6:t.level,t.mem==null?Re.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,Ee,Re)},wbytes=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},zlh=function(e,t){var n=t.level,Ee=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=Ee<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var Re=adler();Re.p(t.dictionary),wbytes(e,2,Re.d())}};function zlibSync(e,t){t||(t={});var n=adler();n.p(e);var Ee=dopt(e,t,t.dictionary?6:2,4);return zlh(Ee,t),wbytes(Ee,Ee.length-4,n.d()),Ee}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch{}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}function _iterableToArrayLimit$1(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var Ee,Re,Ce,Te,Me=[],De=!0,Oe=!1;try{if(Ce=(n=n.call(e)).next,t!==0)for(;!(De=(Ee=Ce.call(n)).done)&&(Me.push(Ee.value),Me.length!==t);De=!0);}catch(Be){Oe=!0,Re=Be}finally{try{if(!De&&n.return!=null&&(Te=n.return(),Object(Te)!==Te))return}finally{if(Oe)throw Re}}return Me}}function _arrayLikeToArray$1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,Ee=Array(t);n<t;n++)Ee[n]=e[n];return Ee}function _unsupportedIterableToArray$1(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$1(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$1(e,t):void 0}}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_unsupportedIterableToArray$1(e,t)||_nonIterableRest$1()}function decode(e,t="utf8"){return new TextDecoder(t).decode(e)}const encoder=new TextEncoder;function encode(e){return encoder.encode(e)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{constructor(t=defaultByteLength,n={}){vn(this,"buffer");vn(this,"byteLength");vn(this,"byteOffset");vn(this,"length");vn(this,"offset");vn(this,"lastWrittenByte");vn(this,"littleEndian");vn(this,"_data");vn(this,"_mark");vn(this,"_marks");let Ee=!1;typeof t=="number"?t=new ArrayBuffer(t):(Ee=!0,this.lastWrittenByte=t.byteLength);const Re=n.offset?n.offset>>>0:0,Ce=t.byteLength-Re;let Te=Re;(ArrayBuffer.isView(t)||t instanceof IOBuffer)&&(t.byteLength!==t.buffer.byteLength&&(Te=t.byteOffset+Re),t=t.buffer),Ee?this.lastWrittenByte=Ce:this.lastWrittenByte=0,this.buffer=t,this.length=Ce,this.byteLength=Ce,this.byteOffset=Te,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,Te,Ce),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const Ee=(this.offset+t)*2,Re=new Uint8Array(Ee);Re.set(new Uint8Array(this.buffer)),this.buffer=Re.buffer,this.length=Ee,this.byteLength=Ee,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const Ee=typedArrays[n].BYTES_PER_ELEMENT*t,Re=this.byteOffset+this.offset,Ce=this.buffer.slice(Re,Re+Ee);if(this.littleEndian===hostBigEndian&&n!=="uint8"&&n!=="int8"){const Me=new Uint8Array(this.buffer.slice(Re,Re+Ee));Me.reverse();const De=new typedArrays[n](Me.buffer);return this.offset+=Ee,De.reverse(),De}const Te=new typedArrays[n](Ce);return this.offset+=Ee,Te}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let Ee=0;Ee<t;Ee++)n+=this.readChar();return n}readUtf8(t=1){return decode(this.readBytes(t))}decodeText(t=1,n="utf8"){return decode(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(encode(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function zero$1(e){let t=e.length;for(;--t>=0;)e[t]=0}const MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);const adler32=(e,t,n,Ee)=>{let Re=e&65535|0,Ce=e>>>16&65535|0,Te=0;for(;n!==0;){Te=n>2e3?2e3:n,n-=Te;do Re=Re+t[Ee++]|0,Ce=Ce+Re|0;while(--Te);Re%=65521,Ce%=65521}return Re|Ce<<16|0};var adler32_1=adler32;const makeTable=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var Ee=0;Ee<8;Ee++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},crcTable$1=new Uint32Array(makeTable()),crc32=(e,t,n,Ee)=>{const Re=crcTable$1,Ce=Ee+n;e^=-1;for(let Te=Ee;Te<Ce;Te++)e=e>>>8^Re[(e^t[Te])&255];return e^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _has=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var assign$2=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const Ee in n)_has(n,Ee)&&(e[Ee]=n[Ee])}}return e},flattenChunks=e=>{let t=0;for(let Ee=0,Re=e.length;Ee<Re;Ee++)t+=e[Ee].length;const n=new Uint8Array(t);for(let Ee=0,Re=0,Ce=e.length;Ee<Ce;Ee++){let Te=e[Ee];n.set(Te,Re),Re+=Te.length}return n},common={assign:assign$2,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let e=0;e<256;e++)_utf8len[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,Ee,Re,Ce,Te=e.length,Me=0;for(Re=0;Re<Te;Re++)n=e.charCodeAt(Re),(n&64512)===55296&&Re+1<Te&&(Ee=e.charCodeAt(Re+1),(Ee&64512)===56320&&(n=65536+(n-55296<<10)+(Ee-56320),Re++)),Me+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(Me),Ce=0,Re=0;Ce<Me;Re++)n=e.charCodeAt(Re),(n&64512)===55296&&Re+1<Te&&(Ee=e.charCodeAt(Re+1),(Ee&64512)===56320&&(n=65536+(n-55296<<10)+(Ee-56320),Re++)),n<128?t[Ce++]=n:n<2048?(t[Ce++]=192|n>>>6,t[Ce++]=128|n&63):n<65536?(t[Ce++]=224|n>>>12,t[Ce++]=128|n>>>6&63,t[Ce++]=128|n&63):(t[Ce++]=240|n>>>18,t[Ce++]=128|n>>>12&63,t[Ce++]=128|n>>>6&63,t[Ce++]=128|n&63);return t};const buf2binstring=(e,t)=>{if(t<65534&&e.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let Ee=0;Ee<t;Ee++)n+=String.fromCharCode(e[Ee]);return n};var buf2string=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let Ee,Re;const Ce=new Array(n*2);for(Re=0,Ee=0;Ee<n;){let Te=e[Ee++];if(Te<128){Ce[Re++]=Te;continue}let Me=_utf8len[Te];if(Me>4){Ce[Re++]=65533,Ee+=Me-1;continue}for(Te&=Me===2?31:Me===3?15:7;Me>1&&Ee<n;)Te=Te<<6|e[Ee++]&63,Me--;if(Me>1){Ce[Re++]=65533;continue}Te<65536?Ce[Re++]=Te:(Te-=65536,Ce[Re++]=55296|Te>>10&1023,Ce[Re++]=56320|Te&1023)}return buf2binstring(Ce,Re)},utf8border=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+_utf8len[e[n]]>t?n:t},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const BAD$1=16209,TYPE$1=16191;var inffast=function(t,n){let Ee,Re,Ce,Te,Me,De,Oe,Be,ze,$e,He,Ue,Ve,We,qe,Ge,Ye,Ke,Xe,Ze,er,St,ar,hr;const ur=t.state;Ee=t.next_in,ar=t.input,Re=Ee+(t.avail_in-5),Ce=t.next_out,hr=t.output,Te=Ce-(n-t.avail_out),Me=Ce+(t.avail_out-257),De=ur.dmax,Oe=ur.wsize,Be=ur.whave,ze=ur.wnext,$e=ur.window,He=ur.hold,Ue=ur.bits,Ve=ur.lencode,We=ur.distcode,qe=(1<<ur.lenbits)-1,Ge=(1<<ur.distbits)-1;e:do{Ue<15&&(He+=ar[Ee++]<<Ue,Ue+=8,He+=ar[Ee++]<<Ue,Ue+=8),Ye=Ve[He&qe];t:for(;;){if(Ke=Ye>>>24,He>>>=Ke,Ue-=Ke,Ke=Ye>>>16&255,Ke===0)hr[Ce++]=Ye&65535;else if(Ke&16){Xe=Ye&65535,Ke&=15,Ke&&(Ue<Ke&&(He+=ar[Ee++]<<Ue,Ue+=8),Xe+=He&(1<<Ke)-1,He>>>=Ke,Ue-=Ke),Ue<15&&(He+=ar[Ee++]<<Ue,Ue+=8,He+=ar[Ee++]<<Ue,Ue+=8),Ye=We[He&Ge];r:for(;;){if(Ke=Ye>>>24,He>>>=Ke,Ue-=Ke,Ke=Ye>>>16&255,Ke&16){if(Ze=Ye&65535,Ke&=15,Ue<Ke&&(He+=ar[Ee++]<<Ue,Ue+=8,Ue<Ke&&(He+=ar[Ee++]<<Ue,Ue+=8)),Ze+=He&(1<<Ke)-1,Ze>De){t.msg="invalid distance too far back",ur.mode=BAD$1;break e}if(He>>>=Ke,Ue-=Ke,Ke=Ce-Te,Ze>Ke){if(Ke=Ze-Ke,Ke>Be&&ur.sane){t.msg="invalid distance too far back",ur.mode=BAD$1;break e}if(er=0,St=$e,ze===0){if(er+=Oe-Ke,Ke<Xe){Xe-=Ke;do hr[Ce++]=$e[er++];while(--Ke);er=Ce-Ze,St=hr}}else if(ze<Ke){if(er+=Oe+ze-Ke,Ke-=ze,Ke<Xe){Xe-=Ke;do hr[Ce++]=$e[er++];while(--Ke);if(er=0,ze<Xe){Ke=ze,Xe-=Ke;do hr[Ce++]=$e[er++];while(--Ke);er=Ce-Ze,St=hr}}}else if(er+=ze-Ke,Ke<Xe){Xe-=Ke;do hr[Ce++]=$e[er++];while(--Ke);er=Ce-Ze,St=hr}for(;Xe>2;)hr[Ce++]=St[er++],hr[Ce++]=St[er++],hr[Ce++]=St[er++],Xe-=3;Xe&&(hr[Ce++]=St[er++],Xe>1&&(hr[Ce++]=St[er++]))}else{er=Ce-Ze;do hr[Ce++]=hr[er++],hr[Ce++]=hr[er++],hr[Ce++]=hr[er++],Xe-=3;while(Xe>2);Xe&&(hr[Ce++]=hr[er++],Xe>1&&(hr[Ce++]=hr[er++]))}}else if(Ke&64){t.msg="invalid distance code",ur.mode=BAD$1;break e}else{Ye=We[(Ye&65535)+(He&(1<<Ke)-1)];continue r}break}}else if(Ke&64)if(Ke&32){ur.mode=TYPE$1;break e}else{t.msg="invalid literal/length code",ur.mode=BAD$1;break e}else{Ye=Ve[(Ye&65535)+(He&(1<<Ke)-1)];continue t}break}}while(Ee<Re&&Ce<Me);Xe=Ue>>3,Ee-=Xe,Ue-=Xe<<3,He&=(1<<Ue)-1,t.next_in=Ee,t.next_out=Ce,t.avail_in=Ee<Re?5+(Re-Ee):5-(Ee-Re),t.avail_out=Ce<Me?257+(Me-Ce):257-(Ce-Me),ur.hold=He,ur.bits=Ue};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(e,t,n,Ee,Re,Ce,Te,Me)=>{const De=Me.bits;let Oe=0,Be=0,ze=0,$e=0,He=0,Ue=0,Ve=0,We=0,qe=0,Ge=0,Ye,Ke,Xe,Ze,er,St=null,ar;const hr=new Uint16Array(MAXBITS+1),ur=new Uint16Array(MAXBITS+1);let dr=null,vr,yr,br;for(Oe=0;Oe<=MAXBITS;Oe++)hr[Oe]=0;for(Be=0;Be<Ee;Be++)hr[t[n+Be]]++;for(He=De,$e=MAXBITS;$e>=1&&hr[$e]===0;$e--);if(He>$e&&(He=$e),$e===0)return Re[Ce++]=1<<24|64<<16|0,Re[Ce++]=1<<24|64<<16|0,Me.bits=1,0;for(ze=1;ze<$e&&hr[ze]===0;ze++);for(He<ze&&(He=ze),We=1,Oe=1;Oe<=MAXBITS;Oe++)if(We<<=1,We-=hr[Oe],We<0)return-1;if(We>0&&(e===CODES$1||$e!==1))return-1;for(ur[1]=0,Oe=1;Oe<MAXBITS;Oe++)ur[Oe+1]=ur[Oe]+hr[Oe];for(Be=0;Be<Ee;Be++)t[n+Be]!==0&&(Te[ur[t[n+Be]]++]=Be);if(e===CODES$1?(St=dr=Te,ar=20):e===LENS$1?(St=lbase,dr=lext,ar=257):(St=dbase,dr=dext,ar=0),Ge=0,Be=0,Oe=ze,er=Ce,Ue=He,Ve=0,Xe=-1,qe=1<<He,Ze=qe-1,e===LENS$1&&qe>ENOUGH_LENS$1||e===DISTS$1&&qe>ENOUGH_DISTS$1)return 1;for(;;){vr=Oe-Ve,Te[Be]+1<ar?(yr=0,br=Te[Be]):Te[Be]>=ar?(yr=dr[Te[Be]-ar],br=St[Te[Be]-ar]):(yr=96,br=0),Ye=1<<Oe-Ve,Ke=1<<Ue,ze=Ke;do Ke-=Ye,Re[er+(Ge>>Ve)+Ke]=vr<<24|yr<<16|br|0;while(Ke!==0);for(Ye=1<<Oe-1;Ge&Ye;)Ye>>=1;if(Ye!==0?(Ge&=Ye-1,Ge+=Ye):Ge=0,Be++,--hr[Oe]===0){if(Oe===$e)break;Oe=t[n+Te[Be]]}if(Oe>He&&(Ge&Ze)!==Xe){for(Ve===0&&(Ve=He),er+=ze,Ue=Oe-Ve,We=1<<Ue;Ue+Ve<$e&&(We-=hr[Ue+Ve],!(We<=0));)Ue++,We<<=1;if(qe+=1<<Ue,e===LENS$1&&qe>ENOUGH_LENS$1||e===DISTS$1&&qe>ENOUGH_DISTS$1)return 1;Xe=Ge&Ze,Re[Xe]=He<<24|Ue<<16|er-Ce|0}}return Ge!==0&&(Re[er+Ge]=Oe-Ve<<24|64<<16|0),Me.bits=He,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<HEAD||t.mode>SYNC?1:0},inflateResetKeep=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=HEAD,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS),t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1},inflateReset=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)},inflateReset2=(e,t)=>{let n;if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const Ee=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(Ee.window!==null&&Ee.wbits!==t&&(Ee.window=null),Ee.wrap=n,Ee.wbits=t,inflateReset(e))},inflateInit2=(e,t)=>{if(!e)return Z_STREAM_ERROR$1;const n=new InflateState;e.state=n,n.strm=e,n.window=null,n.mode=HEAD;const Ee=inflateReset2(e,t);return Ee!==Z_OK$1&&(e.state=null),Ee},inflateInit=e=>inflateInit2(e,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=e=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5},updatewindow=(e,t,n,Ee)=>{let Re;const Ce=e.state;return Ce.window===null&&(Ce.wsize=1<<Ce.wbits,Ce.wnext=0,Ce.whave=0,Ce.window=new Uint8Array(Ce.wsize)),Ee>=Ce.wsize?(Ce.window.set(t.subarray(n-Ce.wsize,n),0),Ce.wnext=0,Ce.whave=Ce.wsize):(Re=Ce.wsize-Ce.wnext,Re>Ee&&(Re=Ee),Ce.window.set(t.subarray(n-Ee,n-Ee+Re),Ce.wnext),Ee-=Re,Ee?(Ce.window.set(t.subarray(n-Ee,n),0),Ce.wnext=Ee,Ce.whave=Ce.wsize):(Ce.wnext+=Re,Ce.wnext===Ce.wsize&&(Ce.wnext=0),Ce.whave<Ce.wsize&&(Ce.whave+=Re))),0},inflate$2=(e,t)=>{let n,Ee,Re,Ce,Te,Me,De,Oe,Be,ze,$e,He,Ue,Ve,We=0,qe,Ge,Ye,Ke,Xe,Ze,er,St;const ar=new Uint8Array(4);let hr,ur;const dr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(e)||!e.output||!e.input&&e.avail_in!==0)return Z_STREAM_ERROR$1;n=e.state,n.mode===TYPE&&(n.mode=TYPEDO),Te=e.next_out,Re=e.output,De=e.avail_out,Ce=e.next_in,Ee=e.input,Me=e.avail_in,Oe=n.hold,Be=n.bits,ze=Me,$e=De,St=Z_OK$1;e:for(;;)switch(n.mode){case HEAD:if(n.wrap===0){n.mode=TYPEDO;break}for(;Be<16;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}if(n.wrap&2&&Oe===35615){n.wbits===0&&(n.wbits=15),n.check=0,ar[0]=Oe&255,ar[1]=Oe>>>8&255,n.check=crc32_1(n.check,ar,2,0),Oe=0,Be=0,n.mode=FLAGS;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((Oe&255)<<8)+(Oe>>8))%31){e.msg="incorrect header check",n.mode=BAD;break}if((Oe&15)!==Z_DEFLATED){e.msg="unknown compression method",n.mode=BAD;break}if(Oe>>>=4,Be-=4,er=(Oe&15)+8,n.wbits===0&&(n.wbits=er),er>15||er>n.wbits){e.msg="invalid window size",n.mode=BAD;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=Oe&512?DICTID:TYPE,Oe=0,Be=0;break;case FLAGS:for(;Be<16;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}if(n.flags=Oe,(n.flags&255)!==Z_DEFLATED){e.msg="unknown compression method",n.mode=BAD;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=BAD;break}n.head&&(n.head.text=Oe>>8&1),n.flags&512&&n.wrap&4&&(ar[0]=Oe&255,ar[1]=Oe>>>8&255,n.check=crc32_1(n.check,ar,2,0)),Oe=0,Be=0,n.mode=TIME;case TIME:for(;Be<32;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}n.head&&(n.head.time=Oe),n.flags&512&&n.wrap&4&&(ar[0]=Oe&255,ar[1]=Oe>>>8&255,ar[2]=Oe>>>16&255,ar[3]=Oe>>>24&255,n.check=crc32_1(n.check,ar,4,0)),Oe=0,Be=0,n.mode=OS;case OS:for(;Be<16;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}n.head&&(n.head.xflags=Oe&255,n.head.os=Oe>>8),n.flags&512&&n.wrap&4&&(ar[0]=Oe&255,ar[1]=Oe>>>8&255,n.check=crc32_1(n.check,ar,2,0)),Oe=0,Be=0,n.mode=EXLEN;case EXLEN:if(n.flags&1024){for(;Be<16;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}n.length=Oe,n.head&&(n.head.extra_len=Oe),n.flags&512&&n.wrap&4&&(ar[0]=Oe&255,ar[1]=Oe>>>8&255,n.check=crc32_1(n.check,ar,2,0)),Oe=0,Be=0}else n.head&&(n.head.extra=null);n.mode=EXTRA;case EXTRA:if(n.flags&1024&&(He=n.length,He>Me&&(He=Me),He&&(n.head&&(er=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(Ee.subarray(Ce,Ce+He),er)),n.flags&512&&n.wrap&4&&(n.check=crc32_1(n.check,Ee,He,Ce)),Me-=He,Ce+=He,n.length-=He),n.length))break e;n.length=0,n.mode=NAME;case NAME:if(n.flags&2048){if(Me===0)break e;He=0;do er=Ee[Ce+He++],n.head&&er&&n.length<65536&&(n.head.name+=String.fromCharCode(er));while(er&&He<Me);if(n.flags&512&&n.wrap&4&&(n.check=crc32_1(n.check,Ee,He,Ce)),Me-=He,Ce+=He,er)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=COMMENT;case COMMENT:if(n.flags&4096){if(Me===0)break e;He=0;do er=Ee[Ce+He++],n.head&&er&&n.length<65536&&(n.head.comment+=String.fromCharCode(er));while(er&&He<Me);if(n.flags&512&&n.wrap&4&&(n.check=crc32_1(n.check,Ee,He,Ce)),Me-=He,Ce+=He,er)break e}else n.head&&(n.head.comment=null);n.mode=HCRC;case HCRC:if(n.flags&512){for(;Be<16;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}if(n.wrap&4&&Oe!==(n.check&65535)){e.msg="header crc mismatch",n.mode=BAD;break}Oe=0,Be=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=TYPE;break;case DICTID:for(;Be<32;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}e.adler=n.check=zswap32(Oe),Oe=0,Be=0,n.mode=DICT;case DICT:if(n.havedict===0)return e.next_out=Te,e.avail_out=De,e.next_in=Ce,e.avail_in=Me,n.hold=Oe,n.bits=Be,Z_NEED_DICT$1;e.adler=n.check=1,n.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(n.last){Oe>>>=Be&7,Be-=Be&7,n.mode=CHECK;break}for(;Be<3;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}switch(n.last=Oe&1,Oe>>>=1,Be-=1,Oe&3){case 0:n.mode=STORED;break;case 1:if(fixedtables(n),n.mode=LEN_,t===Z_TREES){Oe>>>=2,Be-=2;break e}break;case 2:n.mode=TABLE;break;case 3:e.msg="invalid block type",n.mode=BAD}Oe>>>=2,Be-=2;break;case STORED:for(Oe>>>=Be&7,Be-=Be&7;Be<32;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}if((Oe&65535)!==(Oe>>>16^65535)){e.msg="invalid stored block lengths",n.mode=BAD;break}if(n.length=Oe&65535,Oe=0,Be=0,n.mode=COPY_,t===Z_TREES)break e;case COPY_:n.mode=COPY;case COPY:if(He=n.length,He){if(He>Me&&(He=Me),He>De&&(He=De),He===0)break e;Re.set(Ee.subarray(Ce,Ce+He),Te),Me-=He,Ce+=He,De-=He,Te+=He,n.length-=He;break}n.mode=TYPE;break;case TABLE:for(;Be<14;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}if(n.nlen=(Oe&31)+257,Oe>>>=5,Be-=5,n.ndist=(Oe&31)+1,Oe>>>=5,Be-=5,n.ncode=(Oe&15)+4,Oe>>>=4,Be-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=BAD;break}n.have=0,n.mode=LENLENS;case LENLENS:for(;n.have<n.ncode;){for(;Be<3;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}n.lens[dr[n.have++]]=Oe&7,Oe>>>=3,Be-=3}for(;n.have<19;)n.lens[dr[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,hr={bits:n.lenbits},St=inftrees(CODES,n.lens,0,19,n.lencode,0,n.work,hr),n.lenbits=hr.bits,St){e.msg="invalid code lengths set",n.mode=BAD;break}n.have=0,n.mode=CODELENS;case CODELENS:for(;n.have<n.nlen+n.ndist;){for(;We=n.lencode[Oe&(1<<n.lenbits)-1],qe=We>>>24,Ge=We>>>16&255,Ye=We&65535,!(qe<=Be);){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}if(Ye<16)Oe>>>=qe,Be-=qe,n.lens[n.have++]=Ye;else{if(Ye===16){for(ur=qe+2;Be<ur;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}if(Oe>>>=qe,Be-=qe,n.have===0){e.msg="invalid bit length repeat",n.mode=BAD;break}er=n.lens[n.have-1],He=3+(Oe&3),Oe>>>=2,Be-=2}else if(Ye===17){for(ur=qe+3;Be<ur;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}Oe>>>=qe,Be-=qe,er=0,He=3+(Oe&7),Oe>>>=3,Be-=3}else{for(ur=qe+7;Be<ur;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}Oe>>>=qe,Be-=qe,er=0,He=11+(Oe&127),Oe>>>=7,Be-=7}if(n.have+He>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=BAD;break}for(;He--;)n.lens[n.have++]=er}}if(n.mode===BAD)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=BAD;break}if(n.lenbits=9,hr={bits:n.lenbits},St=inftrees(LENS,n.lens,0,n.nlen,n.lencode,0,n.work,hr),n.lenbits=hr.bits,St){e.msg="invalid literal/lengths set",n.mode=BAD;break}if(n.distbits=6,n.distcode=n.distdyn,hr={bits:n.distbits},St=inftrees(DISTS,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,hr),n.distbits=hr.bits,St){e.msg="invalid distances set",n.mode=BAD;break}if(n.mode=LEN_,t===Z_TREES)break e;case LEN_:n.mode=LEN;case LEN:if(Me>=6&&De>=258){e.next_out=Te,e.avail_out=De,e.next_in=Ce,e.avail_in=Me,n.hold=Oe,n.bits=Be,inffast(e,$e),Te=e.next_out,Re=e.output,De=e.avail_out,Ce=e.next_in,Ee=e.input,Me=e.avail_in,Oe=n.hold,Be=n.bits,n.mode===TYPE&&(n.back=-1);break}for(n.back=0;We=n.lencode[Oe&(1<<n.lenbits)-1],qe=We>>>24,Ge=We>>>16&255,Ye=We&65535,!(qe<=Be);){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}if(Ge&&!(Ge&240)){for(Ke=qe,Xe=Ge,Ze=Ye;We=n.lencode[Ze+((Oe&(1<<Ke+Xe)-1)>>Ke)],qe=We>>>24,Ge=We>>>16&255,Ye=We&65535,!(Ke+qe<=Be);){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}Oe>>>=Ke,Be-=Ke,n.back+=Ke}if(Oe>>>=qe,Be-=qe,n.back+=qe,n.length=Ye,Ge===0){n.mode=LIT;break}if(Ge&32){n.back=-1,n.mode=TYPE;break}if(Ge&64){e.msg="invalid literal/length code",n.mode=BAD;break}n.extra=Ge&15,n.mode=LENEXT;case LENEXT:if(n.extra){for(ur=n.extra;Be<ur;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}n.length+=Oe&(1<<n.extra)-1,Oe>>>=n.extra,Be-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=DIST;case DIST:for(;We=n.distcode[Oe&(1<<n.distbits)-1],qe=We>>>24,Ge=We>>>16&255,Ye=We&65535,!(qe<=Be);){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}if(!(Ge&240)){for(Ke=qe,Xe=Ge,Ze=Ye;We=n.distcode[Ze+((Oe&(1<<Ke+Xe)-1)>>Ke)],qe=We>>>24,Ge=We>>>16&255,Ye=We&65535,!(Ke+qe<=Be);){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}Oe>>>=Ke,Be-=Ke,n.back+=Ke}if(Oe>>>=qe,Be-=qe,n.back+=qe,Ge&64){e.msg="invalid distance code",n.mode=BAD;break}n.offset=Ye,n.extra=Ge&15,n.mode=DISTEXT;case DISTEXT:if(n.extra){for(ur=n.extra;Be<ur;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}n.offset+=Oe&(1<<n.extra)-1,Oe>>>=n.extra,Be-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=BAD;break}n.mode=MATCH;case MATCH:if(De===0)break e;if(He=$e-De,n.offset>He){if(He=n.offset-He,He>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=BAD;break}He>n.wnext?(He-=n.wnext,Ue=n.wsize-He):Ue=n.wnext-He,He>n.length&&(He=n.length),Ve=n.window}else Ve=Re,Ue=Te-n.offset,He=n.length;He>De&&(He=De),De-=He,n.length-=He;do Re[Te++]=Ve[Ue++];while(--He);n.length===0&&(n.mode=LEN);break;case LIT:if(De===0)break e;Re[Te++]=n.length,De--,n.mode=LEN;break;case CHECK:if(n.wrap){for(;Be<32;){if(Me===0)break e;Me--,Oe|=Ee[Ce++]<<Be,Be+=8}if($e-=De,e.total_out+=$e,n.total+=$e,n.wrap&4&&$e&&(e.adler=n.check=n.flags?crc32_1(n.check,Re,$e,Te-$e):adler32_1(n.check,Re,$e,Te-$e)),$e=De,n.wrap&4&&(n.flags?Oe:zswap32(Oe))!==n.check){e.msg="incorrect data check",n.mode=BAD;break}Oe=0,Be=0}n.mode=LENGTH;case LENGTH:if(n.wrap&&n.flags){for(;Be<32;){if(Me===0)break e;Me--,Oe+=Ee[Ce++]<<Be,Be+=8}if(n.wrap&4&&Oe!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=BAD;break}Oe=0,Be=0}n.mode=DONE;case DONE:St=Z_STREAM_END$1;break e;case BAD:St=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=Te,e.avail_out=De,e.next_in=Ce,e.avail_in=Me,n.hold=Oe,n.bits=Be,(n.wsize||$e!==e.avail_out&&n.mode<BAD&&(n.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,$e-e.avail_out),ze-=e.avail_in,$e-=e.avail_out,e.total_in+=ze,e.total_out+=$e,n.total+=$e,n.wrap&4&&$e&&(e.adler=n.check=n.flags?crc32_1(n.check,Re,$e,e.next_out-$e):adler32_1(n.check,Re,$e,e.next_out-$e)),e.data_type=n.bits+(n.last?64:0)+(n.mode===TYPE?128:0)+(n.mode===LEN_||n.mode===COPY_?256:0),(ze===0&&$e===0||t===Z_FINISH$1)&&St===Z_OK$1&&(St=Z_BUF_ERROR),St},inflateEnd=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;let t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1},inflateGetHeader=(e,t)=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(e,t)=>{const n=t.length;let Ee,Re,Ce;return inflateStateCheck(e)||(Ee=e.state,Ee.wrap!==0&&Ee.mode!==DICT)?Z_STREAM_ERROR$1:Ee.mode===DICT&&(Re=1,Re=adler32_1(Re,t,n,0),Re!==Ee.check)?Z_DATA_ERROR$1:(Ce=updatewindow(e,t,n,n),Ce?(Ee.mode=MEM,Z_MEM_ERROR$1):(Ee.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(e){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let n=inflate_1$2.inflateInit2(this.strm,t.windowBits);if(n!==Z_OK)throw new Error(messages[n]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=strings.string2buf(t.dictionary):toString.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=inflate_1$2.inflateSetDictionary(this.strm,t.dictionary),n!==Z_OK)))throw new Error(messages[n])}Inflate$1.prototype.push=function(e,t){const n=this.strm,Ee=this.options.chunkSize,Re=this.options.dictionary;let Ce,Te,Me;if(this.ended)return!1;for(t===~~t?Te=t:Te=t===!0?Z_FINISH:Z_NO_FLUSH,toString.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(Ee),n.next_out=0,n.avail_out=Ee),Ce=inflate_1$2.inflate(n,Te),Ce===Z_NEED_DICT&&Re&&(Ce=inflate_1$2.inflateSetDictionary(n,Re),Ce===Z_OK?Ce=inflate_1$2.inflate(n,Te):Ce===Z_DATA_ERROR&&(Ce=Z_NEED_DICT));n.avail_in>0&&Ce===Z_STREAM_END&&n.state.wrap>0&&e[n.next_in]!==0;)inflate_1$2.inflateReset(n),Ce=inflate_1$2.inflate(n,Te);switch(Ce){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(Ce),this.ended=!0,!1}if(Me=n.avail_out,n.next_out&&(n.avail_out===0||Ce===Z_STREAM_END))if(this.options.to==="string"){let De=strings.utf8border(n.output,n.next_out),Oe=n.next_out-De,Be=strings.buf2string(n.output,De);n.next_out=Oe,n.avail_out=Ee-Oe,Oe&&n.output.set(n.output.subarray(De,De+Oe),0),this.onData(Be)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(Ce===Z_OK&&Me===0)){if(Ce===Z_STREAM_END)return Ce=inflate_1$2.inflateEnd(this.strm),this.onEnd(Ce),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(e){this.chunks.push(e)};Inflate$1.prototype.onEnd=function(e){e===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function inflate$1(e,t){const n=new Inflate$1(t);if(n.push(e),n.err)throw n.msg||messages[n.err];return n.result}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2};const{Inflate,inflate}=inflate_1$1;var Inflate_1=Inflate,inflate_1=inflate;const crcTable=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;crcTable[e]=t}const initialCrc=4294967295;function updateCrc(e,t,n){let Ee=e;for(let Re=0;Re<n;Re++)Ee=crcTable[(Ee^t[Re])&255]^Ee>>>8;return Ee}function crc(e,t){return(updateCrc(initialCrc,e,t)^initialCrc)>>>0}function checkCrc(e,t,n){const Ee=e.readUint32(),Re=crc(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(Re!==Ee)throw new Error(`CRC mismatch for chunk ${n}. Expected ${Ee}, found ${Re}`)}function unfilterNone(e,t,n){for(let Ee=0;Ee<n;Ee++)t[Ee]=e[Ee]}function unfilterSub(e,t,n,Ee){let Re=0;for(;Re<Ee;Re++)t[Re]=e[Re];for(;Re<n;Re++)t[Re]=e[Re]+t[Re-Ee]&255}function unfilterUp(e,t,n,Ee){let Re=0;if(n.length===0)for(;Re<Ee;Re++)t[Re]=e[Re];else for(;Re<Ee;Re++)t[Re]=e[Re]+n[Re]&255}function unfilterAverage(e,t,n,Ee,Re){let Ce=0;if(n.length===0){for(;Ce<Re;Ce++)t[Ce]=e[Ce];for(;Ce<Ee;Ce++)t[Ce]=e[Ce]+(t[Ce-Re]>>1)&255}else{for(;Ce<Re;Ce++)t[Ce]=e[Ce]+(n[Ce]>>1)&255;for(;Ce<Ee;Ce++)t[Ce]=e[Ce]+(t[Ce-Re]+n[Ce]>>1)&255}}function unfilterPaeth(e,t,n,Ee,Re){let Ce=0;if(n.length===0){for(;Ce<Re;Ce++)t[Ce]=e[Ce];for(;Ce<Ee;Ce++)t[Ce]=e[Ce]+t[Ce-Re]&255}else{for(;Ce<Re;Ce++)t[Ce]=e[Ce]+n[Ce]&255;for(;Ce<Ee;Ce++)t[Ce]=e[Ce]+paethPredictor(t[Ce-Re],n[Ce],n[Ce-Re])&255}}function paethPredictor(e,t,n){const Ee=e+t-n,Re=Math.abs(Ee-e),Ce=Math.abs(Ee-t),Te=Math.abs(Ee-n);return Re<=Ce&&Re<=Te?e:Ce<=Te?t:n}function applyUnfilter(e,t,n,Ee,Re,Ce){switch(e){case 0:unfilterNone(t,n,Re);break;case 1:unfilterSub(t,n,Re,Ce);break;case 2:unfilterUp(t,n,Ee,Re);break;case 3:unfilterAverage(t,n,Ee,Re,Ce);break;case 4:unfilterPaeth(t,n,Ee,Re,Ce);break;default:throw new Error(`Unsupported filter: ${e}`)}}const uint16$1=new Uint16Array([255]),uint8$1=new Uint8Array(uint16$1.buffer),osIsLittleEndian$1=uint8$1[0]===255;function decodeInterlaceAdam7(e){const{data:t,width:n,height:Ee,channels:Re,depth:Ce}=e,Te=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],Me=Math.ceil(Ce/8)*Re,De=new Uint8Array(Ee*n*Me);let Oe=0;for(let Be=0;Be<7;Be++){const ze=Te[Be],$e=Math.ceil((n-ze.x)/ze.xStep),He=Math.ceil((Ee-ze.y)/ze.yStep);if($e<=0||He<=0)continue;const Ue=$e*Me,Ve=new Uint8Array(Ue);for(let We=0;We<He;We++){const qe=t[Oe++],Ge=t.subarray(Oe,Oe+Ue);Oe+=Ue;const Ye=new Uint8Array(Ue);applyUnfilter(qe,Ge,Ye,Ve,Ue,Me),Ve.set(Ye);for(let Ke=0;Ke<$e;Ke++){const Xe=ze.x+Ke*ze.xStep,Ze=ze.y+We*ze.yStep;if(!(Xe>=n||Ze>=Ee))for(let er=0;er<Me;er++)De[(Ze*n+Xe)*Me+er]=Ye[Ke*Me+er]}}}if(Ce===16){const Be=new Uint16Array(De.buffer);if(osIsLittleEndian$1)for(let ze=0;ze<Be.length;ze++)Be[ze]=swap16$1(Be[ze]);return Be}else return De}function swap16$1(e){return(e&255)<<8|e>>8&255}const uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255,empty$1=new Uint8Array(0);function decodeInterlaceNull(e){const{data:t,width:n,height:Ee,channels:Re,depth:Ce}=e,Te=Math.ceil(Ce/8)*Re,Me=Math.ceil(Ce/8*Re*n),De=new Uint8Array(Ee*Me);let Oe=empty$1,Be=0,ze,$e;for(let He=0;He<Ee;He++){switch(ze=t.subarray(Be+1,Be+1+Me),$e=De.subarray(He*Me,(He+1)*Me),t[Be]){case 0:unfilterNone(ze,$e,Me);break;case 1:unfilterSub(ze,$e,Me,Te);break;case 2:unfilterUp(ze,$e,Oe,Me);break;case 3:unfilterAverage(ze,$e,Oe,Me,Te);break;case 4:unfilterPaeth(ze,$e,Oe,Me,Te);break;default:throw new Error(`Unsupported filter: ${t[Be]}`)}Oe=$e,Be+=Me+1}if(Ce===16){const He=new Uint16Array(De.buffer);if(osIsLittleEndian)for(let Ue=0;Ue<He.length;Ue++)He[Ue]=swap16(He[Ue]);return He}else return De}function swap16(e){return(e&255)<<8|e>>8&255}const pngSignature=Uint8Array.of(137,80,78,71,13,10,26,10);function checkSignature(e){if(!hasPngSignature(e.readBytes(pngSignature.length)))throw new Error("wrong PNG signature")}function hasPngSignature(e){if(e.length<pngSignature.length)return!1;for(let t=0;t<pngSignature.length;t++)if(e[t]!==pngSignature[t])return!1;return!0}const textChunkName="tEXt",NULL=0,latin1Decoder=new TextDecoder("latin1");function validateKeyword(e){if(validateLatin1(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const latin1Regex=/^[\u0000-\u00FF]*$/;function validateLatin1(e){if(!latin1Regex.test(e))throw new Error("invalid latin1 text")}function decodetEXt(e,t,n){const Ee=readKeyword(t);e[Ee]=readLatin1(t,n-Ee.length-1)}function readKeyword(e){for(e.mark();e.readByte()!==NULL;);const t=e.offset;e.reset();const n=latin1Decoder.decode(e.readBytes(t-e.offset-1));return e.skip(1),validateKeyword(n),n}function readLatin1(e,t){return latin1Decoder.decode(e.readBytes(t))}const ColorType={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CompressionMethod={UNKNOWN:-1,DEFLATE:0},FilterMethod={UNKNOWN:-1,ADAPTIVE:0},InterlaceMethod={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},DisposeOpType={NONE:0,BACKGROUND:1,PREVIOUS:2},BlendOpType={SOURCE:0,OVER:1};class PngDecoder extends IOBuffer{constructor(n,Ee={}){super(n);vn(this,"_checkCrc");vn(this,"_inflator");vn(this,"_png");vn(this,"_apng");vn(this,"_end");vn(this,"_hasPalette");vn(this,"_palette");vn(this,"_hasTransparency");vn(this,"_transparency");vn(this,"_compressionMethod");vn(this,"_filterMethod");vn(this,"_interlaceMethod");vn(this,"_colorType");vn(this,"_isAnimated");vn(this,"_numberOfFrames");vn(this,"_numberOfPlays");vn(this,"_frames");vn(this,"_writingDataChunks");const{checkCrc:Re=!1}=Ee;this._checkCrc=Re,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(checkSignature(this);!this._end;){const n=this.readUint32(),Ee=this.readChars(4);this.decodeChunk(n,Ee)}return this.decodeImage(),this._png}decodeApng(){for(checkSignature(this);!this._end;){const n=this.readUint32(),Ee=this.readChars(4);this.decodeApngChunk(n,Ee)}return this.decodeApngImage(),this._apng}decodeChunk(n,Ee){const Re=this.offset;switch(Ee){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case textChunkName:decodetEXt(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-Re!==n)throw new Error(`Length mismatch while decoding chunk ${Ee}`);this._checkCrc?checkCrc(this,n+4,Ee):this.skip(4)}decodeApngChunk(n,Ee){const Re=this.offset;switch(Ee!=="fdAT"&&Ee!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),Ee){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,Ee),this.offset=Re+n;break}if(this.offset-Re!==n)throw new Error(`Length mismatch while decoding chunk ${Ee}`);this._checkCrc?checkCrc(this,n+4,Ee):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=checkBitDepth(this.readUint8());const Ee=this.readUint8();this._colorType=Ee;let Re;switch(Ee){case ColorType.GREYSCALE:Re=1;break;case ColorType.TRUECOLOUR:Re=3;break;case ColorType.INDEXED_COLOUR:Re=1;break;case ColorType.GREYSCALE_ALPHA:Re=2;break;case ColorType.TRUECOLOUR_ALPHA:Re=4;break;case ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${Ee}`)}if(this._png.channels=Re,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const Ee=n/3;this._hasPalette=!0;const Re=[];this._palette=Re;for(let Ce=0;Ce<Ee;Ce++)Re.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const Ee=n,Re=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,Re,Ee)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let Ee=n,Re=this.offset+this.byteOffset;if(Re+=4,Ee-=4,this._inflator.push(new Uint8Array(this.buffer,Re,Ee)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let Ee=0;Ee<n/2;Ee++)this._transparency[Ee]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let Ee=0;for(;Ee<n;Ee++){const Re=this.readByte();this._palette[Ee].push(Re)}for(;Ee<this._palette.length;Ee++)this._palette[Ee].push(255);break}case ColorType.UNKNOWN:case ColorType.GREYSCALE_ALPHA:case ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const Ee=readKeyword(this),Re=this.readUint8();if(Re!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${Re}`);const Ce=this.readBytes(n-Ee.length-2);this._png.iccEmbeddedProfile={name:Ee,profile:inflate_1(Ce)}}decodepHYs(){const n=this.readUint32(),Ee=this.readUint32(),Re=this.readByte();this._png.resolution={x:n,y:Ee,unit:Re}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const Ee={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},Re=this._frames.at(n);if(Re){if(Re.data=decodeInterlaceNull({data:Re.data,width:Re.width,height:Re.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||Re.xOffset===0&&Re.yOffset===0&&Re.width===this._png.width&&Re.height===this._png.height)Ee.data=Re.data;else{const Ce=this._apng.frames.at(n-1);this.disposeFrame(Re,Ce,Ee),this.addFrameDataToCanvas(Ee,Re)}this._apng.frames.push(Ee)}}return this._apng}disposeFrame(n,Ee,Re){switch(n.disposeOp){case DisposeOpType.NONE:break;case DisposeOpType.BACKGROUND:for(let Ce=0;Ce<this._png.height;Ce++)for(let Te=0;Te<this._png.width;Te++){const Me=(Ce*n.width+Te)*this._png.channels;for(let De=0;De<this._png.channels;De++)Re.data[Me+De]=0}break;case DisposeOpType.PREVIOUS:Re.data.set(Ee.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,Ee){const Re=1<<this._png.depth,Ce=(Te,Me)=>{const De=((Te+Ee.yOffset)*this._png.width+Ee.xOffset+Me)*this._png.channels,Oe=(Te*Ee.width+Me)*this._png.channels;return{index:De,frameIndex:Oe}};switch(Ee.blendOp){case BlendOpType.SOURCE:for(let Te=0;Te<Ee.height;Te++)for(let Me=0;Me<Ee.width;Me++){const{index:De,frameIndex:Oe}=Ce(Te,Me);for(let Be=0;Be<this._png.channels;Be++)n.data[De+Be]=Ee.data[Oe+Be]}break;case BlendOpType.OVER:for(let Te=0;Te<Ee.height;Te++)for(let Me=0;Me<Ee.width;Me++){const{index:De,frameIndex:Oe}=Ce(Te,Me);for(let Be=0;Be<this._png.channels;Be++){const ze=Ee.data[Oe+this._png.channels-1]/Re,$e=Be%(this._png.channels-1)===0?1:Ee.data[Oe+Be],He=Math.floor(ze*$e+(1-ze)*n.data[De+Be]);n.data[De+Be]+=He}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var Ee;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((Ee=this._frames)==null?void 0:Ee.at(0)).data:this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this._png.data=decodeInterlaceNull({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===InterlaceMethod.ADAM7)this._png.data=decodeInterlaceAdam7({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,Ee=this._frames.at(-1);Ee?Ee.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:DisposeOpType.NONE,blendOp:BlendOpType.SOURCE,data:n}),this._inflator=new Inflate_1,this._writingDataChunks=!1}}function checkBitDepth(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var ResolutionUnitSpecifier;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(e,t){return new PngDecoder(e,t).decode()}var i$1=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function a(){i$1.console&&typeof i$1.console.log=="function"&&i$1.console.log.apply(i$1.console,arguments)}var o={log:a,warn:function(e){i$1.console&&(typeof i$1.console.warn=="function"?i$1.console.warn.apply(i$1.console,arguments):a.call(null,arguments))},error:function(e){i$1.console&&(typeof i$1.console.error=="function"?i$1.console.error.apply(i$1.console,arguments):a(e))}};function s(e,t,n){var Ee=new XMLHttpRequest;Ee.open("GET",e),Ee.responseType="blob",Ee.onload=function(){l(Ee.response,t,n)},Ee.onerror=function(){o.error("could not download file")},Ee.send()}function u(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function c(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var l=i$1.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==i$1?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var Ee=i$1.URL||i$1.webkitURL,Re=document.createElement("a");t=t||e.name||"download",Re.download=t,Re.rel="noopener",typeof e=="string"?(Re.href=e,Re.origin!==location.origin?u(Re.href)?s(e,t,n):c(Re,Re.target="_blank"):c(Re)):(Re.href=Ee.createObjectURL(e),setTimeout(function(){Ee.revokeObjectURL(Re.href)},4e4),setTimeout(function(){c(Re)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(u(e))s(e,t,n);else{var Ee=document.createElement("a");Ee.href=e,Ee.target="_blank",setTimeout(function(){c(Ee)})}else navigator.msSaveOrOpenBlob(function(Re,Ce){return Ce===void 0?Ce={autoBom:!1}:_typeof(Ce)!=="object"&&(o.warn("Deprecated: Expected third argument to be a object"),Ce={autoBom:!Ce}),Ce.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Re.type)?new Blob(["\uFEFF",Re],{type:Re.type}):Re}(e,n),t)}:function(e,t,n,Ee){if((Ee=Ee||open("","_blank"))&&(Ee.document.title=Ee.document.body.innerText="downloading..."),typeof e=="string")return s(e,t,n);var Re=e.type==="application/octet-stream",Ce=/constructor/i.test(i$1.HTMLElement)||i$1.safari,Te=/CriOS\/[\d]+/.test(navigator.userAgent);if((Te||Re&&Ce)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var Me=new FileReader;Me.onloadend=function(){var Be=Me.result;Be=Te?Be:Be.replace(/^data:[^;]*;/,"data:attachment/file;"),Ee?Ee.location.href=Be:location=Be,Ee=null},Me.readAsDataURL(e)}else{var De=i$1.URL||i$1.webkitURL,Oe=De.createObjectURL(e);Ee?Ee.location=Oe:location.href=Oe,Ee=null,setTimeout(function(){De.revokeObjectURL(Oe)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function h$3(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Me){return[parseInt(Me[1]),parseInt(Me[2]),parseInt(Me[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Me){return[parseInt(Me[1],16),parseInt(Me[2],16),parseInt(Me[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Me){return[parseInt(Me[1]+Me[1],16),parseInt(Me[2]+Me[2],16),parseInt(Me[3]+Me[3],16)]}}],Ee=0;Ee<n.length;Ee++){var Re=n[Ee].re,Ce=n[Ee].process,Te=Re.exec(e);Te&&(t=Ce(Te),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Me=this.r.toString(16),De=this.g.toString(16),Oe=this.b.toString(16);return Me.length==1&&(Me="0"+Me),De.length==1&&(De="0"+De),Oe.length==1&&(Oe="0"+Oe),"#"+Me+De+Oe}}var f=i$1.atob.bind(i$1),d=i$1.btoa.bind(i$1);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function p(e,t){var n=e[0],Ee=e[1],Re=e[2],Ce=e[3];n=m(n,Ee,Re,Ce,t[0],7,-680876936),Ce=m(Ce,n,Ee,Re,t[1],12,-389564586),Re=m(Re,Ce,n,Ee,t[2],17,606105819),Ee=m(Ee,Re,Ce,n,t[3],22,-1044525330),n=m(n,Ee,Re,Ce,t[4],7,-176418897),Ce=m(Ce,n,Ee,Re,t[5],12,1200080426),Re=m(Re,Ce,n,Ee,t[6],17,-1473231341),Ee=m(Ee,Re,Ce,n,t[7],22,-45705983),n=m(n,Ee,Re,Ce,t[8],7,1770035416),Ce=m(Ce,n,Ee,Re,t[9],12,-1958414417),Re=m(Re,Ce,n,Ee,t[10],17,-42063),Ee=m(Ee,Re,Ce,n,t[11],22,-1990404162),n=m(n,Ee,Re,Ce,t[12],7,1804603682),Ce=m(Ce,n,Ee,Re,t[13],12,-40341101),Re=m(Re,Ce,n,Ee,t[14],17,-1502002290),n=v$2(n,Ee=m(Ee,Re,Ce,n,t[15],22,1236535329),Re,Ce,t[1],5,-165796510),Ce=v$2(Ce,n,Ee,Re,t[6],9,-1069501632),Re=v$2(Re,Ce,n,Ee,t[11],14,643717713),Ee=v$2(Ee,Re,Ce,n,t[0],20,-373897302),n=v$2(n,Ee,Re,Ce,t[5],5,-701558691),Ce=v$2(Ce,n,Ee,Re,t[10],9,38016083),Re=v$2(Re,Ce,n,Ee,t[15],14,-660478335),Ee=v$2(Ee,Re,Ce,n,t[4],20,-405537848),n=v$2(n,Ee,Re,Ce,t[9],5,568446438),Ce=v$2(Ce,n,Ee,Re,t[14],9,-1019803690),Re=v$2(Re,Ce,n,Ee,t[3],14,-187363961),Ee=v$2(Ee,Re,Ce,n,t[8],20,1163531501),n=v$2(n,Ee,Re,Ce,t[13],5,-1444681467),Ce=v$2(Ce,n,Ee,Re,t[2],9,-51403784),Re=v$2(Re,Ce,n,Ee,t[7],14,1735328473),n=b(n,Ee=v$2(Ee,Re,Ce,n,t[12],20,-1926607734),Re,Ce,t[5],4,-378558),Ce=b(Ce,n,Ee,Re,t[8],11,-2022574463),Re=b(Re,Ce,n,Ee,t[11],16,1839030562),Ee=b(Ee,Re,Ce,n,t[14],23,-35309556),n=b(n,Ee,Re,Ce,t[1],4,-1530992060),Ce=b(Ce,n,Ee,Re,t[4],11,1272893353),Re=b(Re,Ce,n,Ee,t[7],16,-155497632),Ee=b(Ee,Re,Ce,n,t[10],23,-1094730640),n=b(n,Ee,Re,Ce,t[13],4,681279174),Ce=b(Ce,n,Ee,Re,t[0],11,-358537222),Re=b(Re,Ce,n,Ee,t[3],16,-722521979),Ee=b(Ee,Re,Ce,n,t[6],23,76029189),n=b(n,Ee,Re,Ce,t[9],4,-640364487),Ce=b(Ce,n,Ee,Re,t[12],11,-421815835),Re=b(Re,Ce,n,Ee,t[15],16,530742520),n=y(n,Ee=b(Ee,Re,Ce,n,t[2],23,-995338651),Re,Ce,t[0],6,-198630844),Ce=y(Ce,n,Ee,Re,t[7],10,1126891415),Re=y(Re,Ce,n,Ee,t[14],15,-1416354905),Ee=y(Ee,Re,Ce,n,t[5],21,-57434055),n=y(n,Ee,Re,Ce,t[12],6,1700485571),Ce=y(Ce,n,Ee,Re,t[3],10,-1894986606),Re=y(Re,Ce,n,Ee,t[10],15,-1051523),Ee=y(Ee,Re,Ce,n,t[1],21,-2054922799),n=y(n,Ee,Re,Ce,t[8],6,1873313359),Ce=y(Ce,n,Ee,Re,t[15],10,-30611744),Re=y(Re,Ce,n,Ee,t[6],15,-1560198380),Ee=y(Ee,Re,Ce,n,t[13],21,1309151649),n=y(n,Ee,Re,Ce,t[4],6,-145523070),Ce=y(Ce,n,Ee,Re,t[11],10,-1120210379),Re=y(Re,Ce,n,Ee,t[2],15,718787259),Ee=y(Ee,Re,Ce,n,t[9],21,-343485551),e[0]=P(n,e[0]),e[1]=P(Ee,e[1]),e[2]=P(Re,e[2]),e[3]=P(Ce,e[3])}function g(e,t,n,Ee,Re,Ce){return t=P(P(t,e),P(Ee,Ce)),P(t<<Re|t>>>32-Re,n)}function m(e,t,n,Ee,Re,Ce,Te){return g(t&n|~t&Ee,e,t,Re,Ce,Te)}function v$2(e,t,n,Ee,Re,Ce,Te){return g(t&Ee|n&~Ee,e,t,Re,Ce,Te)}function b(e,t,n,Ee,Re,Ce,Te){return g(t^n^Ee,e,t,Re,Ce,Te)}function y(e,t,n,Ee,Re,Ce,Te){return g(n^(t|~Ee),e,t,Re,Ce,Te)}function w$2(e){var t,n=e.length,Ee=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)p(Ee,N(e.substring(t-64,t)));e=e.substring(t-64);var Re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)Re[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(Re[t>>2]|=128<<(t%4<<3),t>55)for(p(Ee,Re),t=0;t<16;t++)Re[t]=0;return Re[14]=8*n,p(Ee,Re),Ee}function N(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var L="0123456789abcdef".split("");function x(e){for(var t="",n=0;n<4;n++)t+=L[e>>8*n+4&15]+L[e>>8*n&15];return t}function A(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function S(e){return w$2(e).map(A).join("")}var _=function(e){for(var t=0;t<e.length;t++)e[t]=x(e[t]);return e.join("")}(w$2("hello"))!="5d41402abc4b2a76b9719d911017c592";function P(e,t){if(_){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function k(e,t){var n,Ee,Re,Ce;if(e!==n){for(var Te=(Re=e,Ce=1+(256/e.length|0),new Array(Ce+1).join(Re)),Me=[],De=0;De<256;De++)Me[De]=De;var Oe=0;for(De=0;De<256;De++){var Be=Me[De];Oe=(Oe+Be+Te.charCodeAt(De))%256,Me[De]=Me[Oe],Me[Oe]=Be}n=e,Ee=Me}else Me=Ee;var ze=t.length,$e=0,He=0,Ue="";for(De=0;De<ze;De++)He=(He+(Be=Me[$e=($e+1)%256]))%256,Me[$e]=Me[He],Me[He]=Be,Te=Me[(Me[$e]+Me[He])%256],Ue+=String.fromCharCode(t.charCodeAt(De)^Te);return Ue}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var F={print:4,modify:8,copy:16,"annot-forms":32};function I(e,t,n,Ee){this.v=1,this.r=2;var Re=192;e.forEach(function(Me){if(F.perm!==void 0)throw new Error("Invalid permission: "+Me);Re+=F[Me]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var Ce=(t+this.padding).substr(0,32),Te=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(Ce,Te),this.P=-(1+(255^Re)),this.encryptionKey=S(Ce+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(Ee)).substr(0,5),this.U=k(this.encryptionKey,this.padding)}function j(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,Ee=0;Ee<n;Ee++){var Re=e.charCodeAt(Ee);t+=Re<33||Re===35||Re===37||Re===40||Re===41||Re===47||Re===60||Re===62||Re===91||Re===93||Re===123||Re===125||Re>126?"#"+("0"+Re.toString(16)).slice(-2):e[Ee]}return t}function C(e){if(_typeof(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,Ee,Re){if(Re=Re||!1,typeof n!="string"||typeof Ee!="function"||typeof Re!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var Ce=Math.random().toString(35);return t[n][Ce]=[Ee,!!Re],Ce},this.unsubscribe=function(n){for(var Ee in t)if(t[Ee][n])return delete t[Ee][n],Object.keys(t[Ee]).length===0&&delete t[Ee],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var Ee=Array.prototype.slice.call(arguments,1),Re=[];for(var Ce in t[n]){var Te=t[n][Ce];try{Te[0].apply(e,Ee)}catch(Me){i$1.console&&o.error("jsPDF PubSub Error",Me.message,Me)}Te[1]&&Re.push(Ce)}Re.length&&Re.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function O(e){if(!(this instanceof O))return new O(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function B(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function M(e,t,n,Ee,Re){if(!(this instanceof M))return new M(e,t,n,Ee,Re);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,B.call(this,Ee,Re)}function q(e,t,n,Ee,Re){if(!(this instanceof q))return new q(e,t,n,Ee,Re);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,B.call(this,Ee,Re)}function E(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",Ee=arguments[1],Re=arguments[2],Ce=arguments[3],Te=[],Me=1,De=16,Oe="S",Be=null;_typeof(e=e||{})==="object"&&(n=e.orientation,Ee=e.unit||Ee,Re=e.format||Re,Ce=e.compress||e.compressPdf||Ce,(Be=e.encryption||null)!==null&&(Be.userPassword=Be.userPassword||"",Be.ownerPassword=Be.ownerPassword||"",Be.userPermissions=Be.userPermissions||[]),Me=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(De=e.floatPrecision),Oe=e.defaultPathOperation||"S"),Te=e.filters||(Ce===!0?["FlateEncode"]:Te),Ee=Ee||"mm",n=(""+(n||"P")).toLowerCase();var ze=e.putOnlyUsedFonts||!1,$e={},He={internal:{},__private__:{}};He.__private__.PubSub=C;var Ue="1.3",Ve=He.__private__.getPdfVersion=function(){return Ue};He.__private__.setPdfVersion=function(sr){Ue=sr};var We={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};He.__private__.getPageFormats=function(){return We};var qe=He.__private__.getPageFormat=function(sr){return We[sr]};Re=Re||"a4";var Ge="compat",Ye="advanced",Ke=Ge;function Xe(){this.saveGraphicsState(),Rr(new Vn(On,0,0,-On,0,Ni()*On).toString()+" cm"),this.setFontSize(this.getFontSize()/On),Oe="n",Ke=Ye}function Ze(){this.restoreGraphicsState(),Oe="S",Ke=Ge}var er=He.__private__.combineFontStyleAndFontWeight=function(sr,jr){if(sr=="bold"&&jr=="normal"||sr=="bold"&&jr==400||sr=="normal"&&jr=="italic"||sr=="bold"&&jr=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return jr&&(sr=jr==400||jr==="normal"?sr==="italic"?"italic":"normal":jr!=700&&jr!=="bold"||sr!=="normal"?(jr==700?"bold":jr)+""+sr:"bold"),sr};He.advancedAPI=function(sr){var jr=Ke===Ge;return jr&&Xe.call(this),typeof sr!="function"||(sr(this),jr&&Ze.call(this)),this},He.compatAPI=function(sr){var jr=Ke===Ye;return jr&&Ze.call(this),typeof sr!="function"||(sr(this),jr&&Xe.call(this)),this},He.isAdvancedAPI=function(){return Ke===Ye};var St,ar=function(sr){if(Ke!==Ye)throw new Error(sr+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},hr=He.roundToPrecision=He.__private__.roundToPrecision=function(sr,jr){var Ir=t||jr;if(isNaN(sr)||isNaN(Ir))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return sr.toFixed(Ir).replace(/0+$/,"")};St=He.hpf=He.__private__.hpf=typeof De=="number"?function(sr){if(isNaN(sr))throw new Error("Invalid argument passed to jsPDF.hpf");return hr(sr,De)}:De==="smart"?function(sr){if(isNaN(sr))throw new Error("Invalid argument passed to jsPDF.hpf");return hr(sr,sr>-1&&sr<1?16:5)}:function(sr){if(isNaN(sr))throw new Error("Invalid argument passed to jsPDF.hpf");return hr(sr,16)};var ur=He.f2=He.__private__.f2=function(sr){if(isNaN(sr))throw new Error("Invalid argument passed to jsPDF.f2");return hr(sr,2)},dr=He.__private__.f3=function(sr){if(isNaN(sr))throw new Error("Invalid argument passed to jsPDF.f3");return hr(sr,3)},vr=He.scale=He.__private__.scale=function(sr){if(isNaN(sr))throw new Error("Invalid argument passed to jsPDF.scale");return Ke===Ge?sr*On:Ke===Ye?sr:void 0},yr=function(sr){return vr(function(jr){return Ke===Ge?Ni()-jr:Ke===Ye?jr:void 0}(sr))};He.__private__.setPrecision=He.setPrecision=function(sr){typeof parseInt(sr,10)=="number"&&(t=parseInt(sr,10))};var br,lr="00000000000000000000000000000000",cr=He.__private__.getFileId=function(){return lr},rr=He.__private__.setFileId=function(sr){return lr=sr!==void 0&&/^[a-fA-F0-9]{32}$/.test(sr)?sr.toUpperCase():lr.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Be!==null&&($s=new I(Be.userPermissions,Be.userPassword,Be.ownerPassword,lr)),lr};He.setFileId=function(sr){return rr(sr),this},He.getFileId=function(){return cr()};var pr=He.__private__.convertDateToPDFDate=function(sr){var jr=sr.getTimezoneOffset(),Ir=jr<0?"+":"-",Hr=Math.floor(Math.abs(jr/60)),qr=Math.abs(jr%60),pn=[Ir,Er(Hr),"'",Er(qr),"'"].join("");return["D:",sr.getFullYear(),Er(sr.getMonth()+1),Er(sr.getDate()),Er(sr.getHours()),Er(sr.getMinutes()),Er(sr.getSeconds()),pn].join("")},mr=He.__private__.convertPDFDateToDate=function(sr){var jr=parseInt(sr.substr(2,4),10),Ir=parseInt(sr.substr(6,2),10)-1,Hr=parseInt(sr.substr(8,2),10),qr=parseInt(sr.substr(10,2),10),pn=parseInt(sr.substr(12,2),10),xn=parseInt(sr.substr(14,2),10);return new Date(jr,Ir,Hr,qr,pn,xn,0)},ir=He.__private__.setCreationDate=function(sr){var jr;if(sr===void 0&&(sr=new Date),sr instanceof Date)jr=pr(sr);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(sr))throw new Error("Invalid argument passed to jsPDF.setCreationDate");jr=sr}return br=jr},nr=He.__private__.getCreationDate=function(sr){var jr=br;return sr==="jsDate"&&(jr=mr(br)),jr};He.setCreationDate=function(sr){return ir(sr),this},He.getCreationDate=function(sr){return nr(sr)};var gr,Er=He.__private__.padd2=function(sr){return("0"+parseInt(sr)).slice(-2)},Cr=He.__private__.padd2Hex=function(sr){return("00"+(sr=sr.toString())).substr(sr.length)},Nr=0,Mr=[],Fr=[],$r=0,Wr=[],Zr=[],nn=!1,an=Fr;He.__private__.setCustomOutputDestination=function(sr){nn=!0,an=sr};var Yr=function(sr){nn||(an=sr)};He.__private__.resetCustomOutputDestination=function(){nn=!1,an=Fr};var Rr=He.__private__.out=function(sr){return sr=sr.toString(),$r+=sr.length+1,an.push(sr),an},Xr=He.__private__.write=function(sr){return Rr(arguments.length===1?sr.toString():Array.prototype.join.call(arguments," "))},mn=He.__private__.getArrayBuffer=function(sr){for(var jr=sr.length,Ir=new ArrayBuffer(jr),Hr=new Uint8Array(Ir);jr--;)Hr[jr]=sr.charCodeAt(jr);return Ir},En=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];He.__private__.getStandardFonts=function(){return En};var rn=e.fontSize||16;He.__private__.setFontSize=He.setFontSize=function(sr){return rn=Ke===Ye?sr/On:sr,this};var _r,Lr=He.__private__.getFontSize=He.getFontSize=function(){return Ke===Ge?rn:rn*On},Or=e.R2L||!1;He.__private__.setR2L=He.setR2L=function(sr){return Or=sr,this},He.__private__.getR2L=He.getR2L=function(){return Or};var tn,sn=He.__private__.setZoomMode=function(sr){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(sr))_r=sr;else if(isNaN(sr)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(sr)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+sr+'" is not recognized.');_r=sr}else _r=parseInt(sr,10)};He.__private__.getZoomMode=function(){return _r};var en,fn=He.__private__.setPageMode=function(sr){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(sr)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+sr+'" is not recognized.');tn=sr};He.__private__.getPageMode=function(){return tn};var Sn=He.__private__.setLayoutMode=function(sr){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(sr)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+sr+'" is not recognized.');en=sr};He.__private__.getLayoutMode=function(){return en},He.__private__.setDisplayMode=He.setDisplayMode=function(sr,jr,Ir){return sn(sr),Sn(jr),fn(Ir),this};var Rn={title:"",subject:"",author:"",keywords:"",creator:""};He.__private__.getDocumentProperty=function(sr){if(Object.keys(Rn).indexOf(sr)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Rn[sr]},He.__private__.getDocumentProperties=function(){return Rn},He.__private__.setDocumentProperties=He.setProperties=He.setDocumentProperties=function(sr){for(var jr in Rn)Rn.hasOwnProperty(jr)&&sr[jr]&&(Rn[jr]=sr[jr]);return this},He.__private__.setDocumentProperty=function(sr,jr){if(Object.keys(Rn).indexOf(sr)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Rn[sr]=jr};var jn,On,Nn,js,qn,Gn={},Xn={},xs=[],Bn={},fs={},Hn={},Yn={},Es=null,Zn=0,Un=[],ds=new C(He),Ua=e.hotfixes||[],zs={},oa={},ra=[],Vn=function sr(jr,Ir,Hr,qr,pn,xn){if(!(this instanceof sr))return new sr(jr,Ir,Hr,qr,pn,xn);isNaN(jr)&&(jr=1),isNaN(Ir)&&(Ir=0),isNaN(Hr)&&(Hr=0),isNaN(qr)&&(qr=1),isNaN(pn)&&(pn=0),isNaN(xn)&&(xn=0),this._matrix=[jr,Ir,Hr,qr,pn,xn]};Object.defineProperty(Vn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(sr){this._matrix[0]=sr}}),Object.defineProperty(Vn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(sr){this._matrix[1]=sr}}),Object.defineProperty(Vn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(sr){this._matrix[2]=sr}}),Object.defineProperty(Vn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(sr){this._matrix[3]=sr}}),Object.defineProperty(Vn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(sr){this._matrix[4]=sr}}),Object.defineProperty(Vn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(sr){this._matrix[5]=sr}}),Object.defineProperty(Vn.prototype,"a",{get:function(){return this._matrix[0]},set:function(sr){this._matrix[0]=sr}}),Object.defineProperty(Vn.prototype,"b",{get:function(){return this._matrix[1]},set:function(sr){this._matrix[1]=sr}}),Object.defineProperty(Vn.prototype,"c",{get:function(){return this._matrix[2]},set:function(sr){this._matrix[2]=sr}}),Object.defineProperty(Vn.prototype,"d",{get:function(){return this._matrix[3]},set:function(sr){this._matrix[3]=sr}}),Object.defineProperty(Vn.prototype,"e",{get:function(){return this._matrix[4]},set:function(sr){this._matrix[4]=sr}}),Object.defineProperty(Vn.prototype,"f",{get:function(){return this._matrix[5]},set:function(sr){this._matrix[5]=sr}}),Object.defineProperty(Vn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Vn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Vn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Vn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Vn.prototype.join=function(sr){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(St).join(sr)},Vn.prototype.multiply=function(sr){var jr=sr.sx*this.sx+sr.shy*this.shx,Ir=sr.sx*this.shy+sr.shy*this.sy,Hr=sr.shx*this.sx+sr.sy*this.shx,qr=sr.shx*this.shy+sr.sy*this.sy,pn=sr.tx*this.sx+sr.ty*this.shx+this.tx,xn=sr.tx*this.shy+sr.ty*this.sy+this.ty;return new Vn(jr,Ir,Hr,qr,pn,xn)},Vn.prototype.decompose=function(){var sr=this.sx,jr=this.shy,Ir=this.shx,Hr=this.sy,qr=this.tx,pn=this.ty,xn=Math.sqrt(sr*sr+jr*jr),Pn=(sr/=xn)*Ir+(jr/=xn)*Hr;Ir-=sr*Pn,Hr-=jr*Pn;var Ln=Math.sqrt(Ir*Ir+Hr*Hr);return Pn/=Ln,sr*(Hr/=Ln)<jr*(Ir/=Ln)&&(sr=-sr,jr=-jr,Pn=-Pn,xn=-xn),{scale:new Vn(xn,0,0,Ln,0,0),translate:new Vn(1,0,0,1,qr,pn),rotate:new Vn(sr,jr,-jr,sr,0,0),skew:new Vn(1,0,Pn,1,0,0)}},Vn.prototype.toString=function(sr){return this.join(" ")},Vn.prototype.inversed=function(){var sr=this.sx,jr=this.shy,Ir=this.shx,Hr=this.sy,qr=this.tx,pn=this.ty,xn=1/(sr*Hr-jr*Ir),Pn=Hr*xn,Ln=-jr*xn,Kn=-Ir*xn,es=sr*xn;return new Vn(Pn,Ln,Kn,es,-Pn*qr-Kn*pn,-Ln*qr-es*pn)},Vn.prototype.applyToPoint=function(sr){var jr=sr.x*this.sx+sr.y*this.shx+this.tx,Ir=sr.x*this.shy+sr.y*this.sy+this.ty;return new Ka(jr,Ir)},Vn.prototype.applyToRectangle=function(sr){var jr=this.applyToPoint(sr),Ir=this.applyToPoint(new Ka(sr.x+sr.w,sr.y+sr.h));return new Ji(jr.x,jr.y,Ir.x-jr.x,Ir.y-jr.y)},Vn.prototype.clone=function(){var sr=this.sx,jr=this.shy,Ir=this.shx,Hr=this.sy,qr=this.tx,pn=this.ty;return new Vn(sr,jr,Ir,Hr,qr,pn)},He.Matrix=Vn;var ka=He.matrixMult=function(sr,jr){return jr.multiply(sr)},Br=new Vn(1,0,0,1,0,0);He.unitMatrix=He.identityMatrix=Br;var Vr=function(sr,jr){if(!fs[sr]){var Ir=(jr instanceof M?"Sh":"P")+(Object.keys(Bn).length+1).toString(10);jr.id=Ir,fs[sr]=Ir,Bn[Ir]=jr,ds.publish("addPattern",jr)}};He.ShadingPattern=M,He.TilingPattern=q,He.addShadingPattern=function(sr,jr){return ar("addShadingPattern()"),Vr(sr,jr),this},He.beginTilingPattern=function(sr){ar("beginTilingPattern()"),Zi(sr.boundingBox[0],sr.boundingBox[1],sr.boundingBox[2]-sr.boundingBox[0],sr.boundingBox[3]-sr.boundingBox[1],sr.matrix)},He.endTilingPattern=function(sr,jr){ar("endTilingPattern()"),jr.stream=Zr[gr].join(`
`),Vr(sr,jr),ds.publish("endTilingPattern",jr),ra.pop().restore()};var Jr,dn=He.__private__.newObject=function(){var sr=bn();return Cn(sr,!0),sr},bn=He.__private__.newObjectDeferred=function(){return Nr++,Mr[Nr]=function(){return $r},Nr},Cn=function(sr,jr){return jr=typeof jr=="boolean"&&jr,Mr[sr]=$r,jr&&Rr(sr+" 0 obj"),sr},zn=He.__private__.newAdditionalObject=function(){var sr={objId:bn(),content:""};return Wr.push(sr),sr},Tn=bn(),An=bn(),kn=He.__private__.decodeColorString=function(sr){var jr=sr.split(" ");if(jr.length!==2||jr[1]!=="g"&&jr[1]!=="G")jr.length!==5||jr[4]!=="k"&&jr[4]!=="K"||(jr=[(1-jr[0])*(1-jr[3]),(1-jr[1])*(1-jr[3]),(1-jr[2])*(1-jr[3]),"r"]);else{var Ir=parseFloat(jr[0]);jr=[Ir,Ir,Ir,"r"]}for(var Hr="#",qr=0;qr<3;qr++)Hr+=("0"+Math.floor(255*parseFloat(jr[qr])).toString(16)).slice(-2);return Hr},_n=He.__private__.encodeColorString=function(sr){var jr;typeof sr=="string"&&(sr={ch1:sr});var Ir=sr.ch1,Hr=sr.ch2,qr=sr.ch3,pn=sr.ch4,xn=sr.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ir=="string"&&Ir.charAt(0)!=="#"){var Pn=new h$3(Ir);if(Pn.ok)Ir=Pn.toHex();else if(!/^\d*\.?\d*$/.test(Ir))throw new Error('Invalid color "'+Ir+'" passed to jsPDF.encodeColorString.')}if(typeof Ir=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ir)&&(Ir="#"+Ir[1]+Ir[1]+Ir[2]+Ir[2]+Ir[3]+Ir[3]),typeof Ir=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ir)){var Ln=parseInt(Ir.substr(1),16);Ir=Ln>>16&255,Hr=Ln>>8&255,qr=255&Ln}if(Hr===void 0||pn===void 0&&Ir===Hr&&Hr===qr)jr=typeof Ir=="string"?Ir+" "+xn[0]:sr.precision===2?ur(Ir/255)+" "+xn[0]:dr(Ir/255)+" "+xn[0];else if(pn===void 0||_typeof(pn)==="object"){if(pn&&!isNaN(pn.a)&&pn.a===0)return["1.","1.","1.",xn[1]].join(" ");jr=typeof Ir=="string"?[Ir,Hr,qr,xn[1]].join(" "):sr.precision===2?[ur(Ir/255),ur(Hr/255),ur(qr/255),xn[1]].join(" "):[dr(Ir/255),dr(Hr/255),dr(qr/255),xn[1]].join(" ")}else jr=typeof Ir=="string"?[Ir,Hr,qr,pn,xn[2]].join(" "):sr.precision===2?[ur(Ir),ur(Hr),ur(qr),ur(pn),xn[2]].join(" "):[dr(Ir),dr(Hr),dr(qr),dr(pn),xn[2]].join(" ");return jr},$n=He.__private__.getFilters=function(){return Te},Wn=He.__private__.putStream=function(sr){var jr=(sr=sr||{}).data||"",Ir=sr.filters||$n(),Hr=sr.alreadyAppliedFilters||[],qr=sr.addLength1||!1,pn=jr.length,xn=sr.objectId,Pn=function(Us){return Us};if(Be!==null&&xn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Be!==null&&(Pn=$s.encryptor(xn,0));var Ln={};Ir===!0&&(Ir=["FlateEncode"]);var Kn=sr.additionalKeyValues||[],es=(Ln=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(jr,Ir):{data:jr,reverseChain:[]}).reverseChain+(Array.isArray(Hr)?Hr.join(" "):Hr.toString());if(Ln.data.length!==0&&(Kn.push({key:"Length",value:Ln.data.length}),qr===!0&&Kn.push({key:"Length1",value:pn})),es.length!=0)if(es.split("/").length-1==1)Kn.push({key:"Filter",value:es});else{Kn.push({key:"Filter",value:"["+es+"]"});for(var ps=0;ps<Kn.length;ps+=1)if(Kn[ps].key==="DecodeParms"){for(var Ts=[],Bs=0;Bs<Ln.reverseChain.split("/").length-1;Bs+=1)Ts.push("null");Ts.push(Kn[ps].value),Kn[ps].value="["+Ts.join(" ")+"]"}}Rr("<<");for(var Ns=0;Ns<Kn.length;Ns++)Rr("/"+Kn[Ns].key+" "+Kn[Ns].value);Rr(">>"),Ln.data.length!==0&&(Rr("stream"),Rr(Pn(Ln.data)),Rr("endstream"))},Cs=He.__private__.putPage=function(sr){var jr=sr.number,Ir=sr.data,Hr=sr.objId,qr=sr.contentsObjId;Cn(Hr,!0),Rr("<</Type /Page"),Rr("/Parent "+sr.rootDictionaryObjId+" 0 R"),Rr("/Resources "+sr.resourceDictionaryObjId+" 0 R"),Rr("/MediaBox ["+parseFloat(St(sr.mediaBox.bottomLeftX))+" "+parseFloat(St(sr.mediaBox.bottomLeftY))+" "+St(sr.mediaBox.topRightX)+" "+St(sr.mediaBox.topRightY)+"]"),sr.cropBox!==null&&Rr("/CropBox ["+St(sr.cropBox.bottomLeftX)+" "+St(sr.cropBox.bottomLeftY)+" "+St(sr.cropBox.topRightX)+" "+St(sr.cropBox.topRightY)+"]"),sr.bleedBox!==null&&Rr("/BleedBox ["+St(sr.bleedBox.bottomLeftX)+" "+St(sr.bleedBox.bottomLeftY)+" "+St(sr.bleedBox.topRightX)+" "+St(sr.bleedBox.topRightY)+"]"),sr.trimBox!==null&&Rr("/TrimBox ["+St(sr.trimBox.bottomLeftX)+" "+St(sr.trimBox.bottomLeftY)+" "+St(sr.trimBox.topRightX)+" "+St(sr.trimBox.topRightY)+"]"),sr.artBox!==null&&Rr("/ArtBox ["+St(sr.artBox.bottomLeftX)+" "+St(sr.artBox.bottomLeftY)+" "+St(sr.artBox.topRightX)+" "+St(sr.artBox.topRightY)+"]"),typeof sr.userUnit=="number"&&sr.userUnit!==1&&Rr("/UserUnit "+sr.userUnit),ds.publish("putPage",{objId:Hr,pageContext:Un[jr],pageNumber:jr,page:Ir}),Rr("/Contents "+qr+" 0 R"),Rr(">>"),Rr("endobj");var pn=Ir.join(`
`);return Ke===Ye&&(pn+=`
Q`),Cn(qr,!0),Wn({data:pn,filters:$n(),objectId:qr}),Rr("endobj"),Hr},ls=He.__private__.putPages=function(){var sr,jr,Ir=[];for(sr=1;sr<=Zn;sr++)Un[sr].objId=bn(),Un[sr].contentsObjId=bn();for(sr=1;sr<=Zn;sr++)Ir.push(Cs({number:sr,data:Zr[sr],objId:Un[sr].objId,contentsObjId:Un[sr].contentsObjId,mediaBox:Un[sr].mediaBox,cropBox:Un[sr].cropBox,bleedBox:Un[sr].bleedBox,trimBox:Un[sr].trimBox,artBox:Un[sr].artBox,userUnit:Un[sr].userUnit,rootDictionaryObjId:Tn,resourceDictionaryObjId:An}));Cn(Tn,!0),Rr("<</Type /Pages");var Hr="/Kids [";for(jr=0;jr<Zn;jr++)Hr+=Ir[jr]+" 0 R ";Rr(Hr+"]"),Rr("/Count "+Zn),Rr(">>"),Rr("endobj"),ds.publish("postPutPages")},ss=function(sr){ds.publish("putFont",{font:sr,out:Rr,newObject:dn,putStream:Wn}),sr.isAlreadyPutted!==!0&&(sr.objectNumber=dn(),Rr("<<"),Rr("/Type /Font"),Rr("/BaseFont /"+j(sr.postScriptName)),Rr("/Subtype /Type1"),typeof sr.encoding=="string"&&Rr("/Encoding /"+sr.encoding),Rr("/FirstChar 32"),Rr("/LastChar 255"),Rr(">>"),Rr("endobj"))},ys=function(sr){sr.objectNumber=dn();var jr=[];jr.push({key:"Type",value:"/XObject"}),jr.push({key:"Subtype",value:"/Form"}),jr.push({key:"BBox",value:"["+[St(sr.x),St(sr.y),St(sr.x+sr.width),St(sr.y+sr.height)].join(" ")+"]"}),jr.push({key:"Matrix",value:"["+sr.matrix.toString()+"]"});var Ir=sr.pages[1].join(`
`);Wn({data:Ir,additionalKeyValues:jr,objectId:sr.objectNumber}),Rr("endobj")},ua=function(sr,jr){jr||(jr=21);var Ir=dn(),Hr=function(xn,Pn){var Ln,Kn=[],es=1/(Pn-1);for(Ln=0;Ln<1;Ln+=es)Kn.push(Ln);if(Kn.push(1),xn[0].offset!=0){var ps={offset:0,color:xn[0].color};xn.unshift(ps)}if(xn[xn.length-1].offset!=1){var Ts={offset:1,color:xn[xn.length-1].color};xn.push(Ts)}for(var Bs="",Ns=0,Us=0;Us<Kn.length;Us++){for(Ln=Kn[Us];Ln>xn[Ns+1].offset;)Ns++;var Hs=xn[Ns].offset,Ys=(Ln-Hs)/(xn[Ns+1].offset-Hs),Ja=xn[Ns].color,Ta=xn[Ns+1].color;Bs+=Cr(Math.round((1-Ys)*Ja[0]+Ys*Ta[0]).toString(16))+Cr(Math.round((1-Ys)*Ja[1]+Ys*Ta[1]).toString(16))+Cr(Math.round((1-Ys)*Ja[2]+Ys*Ta[2]).toString(16))}return Bs.trim()}(sr.colors,jr),qr=[];qr.push({key:"FunctionType",value:"0"}),qr.push({key:"Domain",value:"[0.0 1.0]"}),qr.push({key:"Size",value:"["+jr+"]"}),qr.push({key:"BitsPerSample",value:"8"}),qr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Wn({data:Hr,additionalKeyValues:qr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ir}),Rr("endobj"),sr.objectNumber=dn(),Rr("<< /ShadingType "+sr.type),Rr("/ColorSpace /DeviceRGB");var pn="/Coords ["+St(parseFloat(sr.coords[0]))+" "+St(parseFloat(sr.coords[1]))+" ";sr.type===2?pn+=St(parseFloat(sr.coords[2]))+" "+St(parseFloat(sr.coords[3])):pn+=St(parseFloat(sr.coords[2]))+" "+St(parseFloat(sr.coords[3]))+" "+St(parseFloat(sr.coords[4]))+" "+St(parseFloat(sr.coords[5])),Rr(pn+="]"),sr.matrix&&Rr("/Matrix ["+sr.matrix.toString()+"]"),Rr("/Function "+Ir+" 0 R"),Rr("/Extend [true true]"),Rr(">>"),Rr("endobj")},Ea=function(sr,jr){var Ir=bn(),Hr=dn();jr.push({resourcesOid:Ir,objectOid:Hr}),sr.objectNumber=Hr;var qr=[];qr.push({key:"Type",value:"/Pattern"}),qr.push({key:"PatternType",value:"1"}),qr.push({key:"PaintType",value:"1"}),qr.push({key:"TilingType",value:"1"}),qr.push({key:"BBox",value:"["+sr.boundingBox.map(St).join(" ")+"]"}),qr.push({key:"XStep",value:St(sr.xStep)}),qr.push({key:"YStep",value:St(sr.yStep)}),qr.push({key:"Resources",value:Ir+" 0 R"}),sr.matrix&&qr.push({key:"Matrix",value:"["+sr.matrix.toString()+"]"}),Wn({data:sr.stream,additionalKeyValues:qr,objectId:sr.objectNumber}),Rr("endobj")},da=function(sr){for(var jr in sr.objectNumber=dn(),Rr("<<"),sr)switch(jr){case"opacity":Rr("/ca "+ur(sr[jr]));break;case"stroke-opacity":Rr("/CA "+ur(sr[jr]))}Rr(">>"),Rr("endobj")},Zs=function(sr){Cn(sr.resourcesOid,!0),Rr("<<"),Rr("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var jr in Rr("/Font <<"),Gn)Gn.hasOwnProperty(jr)&&(ze===!1||ze===!0&&$e.hasOwnProperty(jr))&&Rr("/"+jr+" "+Gn[jr].objectNumber+" 0 R");Rr(">>")}(),function(){if(Object.keys(Bn).length>0){for(var jr in Rr("/Shading <<"),Bn)Bn.hasOwnProperty(jr)&&Bn[jr]instanceof M&&Bn[jr].objectNumber>=0&&Rr("/"+jr+" "+Bn[jr].objectNumber+" 0 R");ds.publish("putShadingPatternDict"),Rr(">>")}}(),function(jr){if(Object.keys(Bn).length>0){for(var Ir in Rr("/Pattern <<"),Bn)Bn.hasOwnProperty(Ir)&&Bn[Ir]instanceof He.TilingPattern&&Bn[Ir].objectNumber>=0&&Bn[Ir].objectNumber<jr&&Rr("/"+Ir+" "+Bn[Ir].objectNumber+" 0 R");ds.publish("putTilingPatternDict"),Rr(">>")}}(sr.objectOid),function(){if(Object.keys(Hn).length>0){var jr;for(jr in Rr("/ExtGState <<"),Hn)Hn.hasOwnProperty(jr)&&Hn[jr].objectNumber>=0&&Rr("/"+jr+" "+Hn[jr].objectNumber+" 0 R");ds.publish("putGStateDict"),Rr(">>")}}(),function(){for(var jr in Rr("/XObject <<"),zs)zs.hasOwnProperty(jr)&&zs[jr].objectNumber>=0&&Rr("/"+jr+" "+zs[jr].objectNumber+" 0 R");ds.publish("putXobjectDict"),Rr(">>")}(),Rr(">>"),Rr("endobj")},ii=function(sr){Xn[sr.fontName]=Xn[sr.fontName]||{},Xn[sr.fontName][sr.fontStyle]=sr.id},Ia=function(sr,jr,Ir,Hr,qr){var pn={id:"F"+(Object.keys(Gn).length+1).toString(10),postScriptName:sr,fontName:jr,fontStyle:Ir,encoding:Hr,isStandardFont:qr||!1,metadata:{}};return ds.publish("addFont",{font:pn,instance:this}),Gn[pn.id]=pn,ii(pn),pn.id},Fs=He.__private__.pdfEscape=He.pdfEscape=function(sr,jr){return function(Ir,Hr){var qr,pn,xn,Pn,Ln,Kn,es,ps,Ts;if(xn=(Hr=Hr||{}).sourceEncoding||"Unicode",Ln=Hr.outputEncoding,(Hr.autoencode||Ln)&&Gn[jn].metadata&&Gn[jn].metadata[xn]&&Gn[jn].metadata[xn].encoding&&(Pn=Gn[jn].metadata[xn].encoding,!Ln&&Gn[jn].encoding&&(Ln=Gn[jn].encoding),!Ln&&Pn.codePages&&(Ln=Pn.codePages[0]),typeof Ln=="string"&&(Ln=Pn[Ln]),Ln)){for(es=!1,Kn=[],qr=0,pn=Ir.length;qr<pn;qr++)(ps=Ln[Ir.charCodeAt(qr)])?Kn.push(String.fromCharCode(ps)):Kn.push(Ir[qr]),Kn[qr].charCodeAt(0)>>8&&(es=!0);Ir=Kn.join("")}for(qr=Ir.length;es===void 0&&qr!==0;)Ir.charCodeAt(qr-1)>>8&&(es=!0),qr--;if(!es)return Ir;for(Kn=Hr.noBOM?[]:[254,255],qr=0,pn=Ir.length;qr<pn;qr++){if((Ts=(ps=Ir.charCodeAt(qr))>>8)>>8)throw new Error("Character at position "+qr+" of string '"+Ir+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Kn.push(Ts),Kn.push(ps-(Ts<<8))}return String.fromCharCode.apply(void 0,Kn)}(sr,jr).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},La=He.__private__.beginPage=function(sr){Zr[++Zn]=[],Un[Zn]={objId:0,contentsObjId:0,userUnit:Number(Me),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(sr[0]),topRightY:Number(sr[1])}},Ss(Zn),Yr(Zr[gr])},Va=function(sr,jr){var Ir,Hr,qr;switch(n=jr||n,typeof sr=="string"&&(Ir=qe(sr.toLowerCase()),Array.isArray(Ir)&&(Hr=Ir[0],qr=Ir[1])),Array.isArray(sr)&&(Hr=sr[0]*On,qr=sr[1]*On),isNaN(Hr)&&(Hr=Re[0],qr=Re[1]),(Hr>14400||qr>14400)&&(o.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Hr=Math.min(14400,Hr),qr=Math.min(14400,qr)),Re=[Hr,qr],n.substr(0,1)){case"l":qr>Hr&&(Re=[qr,Hr]);break;case"p":Hr>qr&&(Re=[qr,Hr])}La(Re),Qn(Yi),Rr(Bi),Qi!==0&&Rr(Qi+" J"),Xi!==0&&Rr(Xi+" j"),ds.publish("addPage",{pageNumber:Zn})},as=function(sr){sr>0&&sr<=Zn&&(Zr.splice(sr,1),Un.splice(sr,1),Zn--,gr>Zn&&(gr=Zn),this.setPage(gr))},Ss=function(sr){sr>0&&sr<=Zn&&(gr=sr)},Ca=He.__private__.getNumberOfPages=He.getNumberOfPages=function(){return Zr.length-1},Oa=function(sr,jr,Ir){var Hr,qr=void 0;return Ir=Ir||{},sr=sr!==void 0?sr:Gn[jn].fontName,jr=jr!==void 0?jr:Gn[jn].fontStyle,Hr=sr.toLowerCase(),Xn[Hr]!==void 0&&Xn[Hr][jr]!==void 0?qr=Xn[Hr][jr]:Xn[sr]!==void 0&&Xn[sr][jr]!==void 0?qr=Xn[sr][jr]:Ir.disableWarning===!1&&o.warn("Unable to look up font label for font '"+sr+"', '"+jr+"'. Refer to getFontList() for available fonts."),qr||Ir.noFallback||(qr=Xn.times[jr])==null&&(qr=Xn.times.normal),qr},ms=He.__private__.putInfo=function(){var sr=dn(),jr=function(Hr){return Hr};for(var Ir in Be!==null&&(jr=$s.encryptor(sr,0)),Rr("<<"),Rr("/Producer ("+Fs(jr("jsPDF "+E.version))+")"),Rn)Rn.hasOwnProperty(Ir)&&Rn[Ir]&&Rr("/"+Ir.substr(0,1).toUpperCase()+Ir.substr(1)+" ("+Fs(jr(Rn[Ir]))+")");Rr("/CreationDate ("+Fs(jr(br))+")"),Rr(">>"),Rr("endobj")},pa=He.__private__.putCatalog=function(sr){var jr=(sr=sr||{}).rootDictionaryObjId||Tn;switch(dn(),Rr("<<"),Rr("/Type /Catalog"),Rr("/Pages "+jr+" 0 R"),_r||(_r="fullwidth"),_r){case"fullwidth":Rr("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Rr("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Rr("/OpenAction [3 0 R /Fit]");break;case"original":Rr("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ir=""+_r;Ir.substr(Ir.length-1)==="%"&&(_r=parseInt(_r)/100),typeof _r=="number"&&Rr("/OpenAction [3 0 R /XYZ null null "+ur(_r)+"]")}switch(en||(en="continuous"),en){case"continuous":Rr("/PageLayout /OneColumn");break;case"single":Rr("/PageLayout /SinglePage");break;case"two":case"twoleft":Rr("/PageLayout /TwoColumnLeft");break;case"tworight":Rr("/PageLayout /TwoColumnRight")}tn&&Rr("/PageMode /"+tn),ds.publish("putCatalog"),Rr(">>"),Rr("endobj")},Li=He.__private__.putTrailer=function(){Rr("trailer"),Rr("<<"),Rr("/Size "+(Nr+1)),Rr("/Root "+Nr+" 0 R"),Rr("/Info "+(Nr-1)+" 0 R"),Be!==null&&Rr("/Encrypt "+$s.oid+" 0 R"),Rr("/ID [ <"+lr+"> <"+lr+"> ]"),Rr(">>")},_s=He.__private__.putHeader=function(){Rr("%PDF-"+Ue),Rr("%")},vo=He.__private__.putXRef=function(){var sr="0000000000";Rr("xref"),Rr("0 "+(Nr+1)),Rr("0000000000 65535 f ");for(var jr=1;jr<=Nr;jr++)typeof Mr[jr]=="function"?Rr((sr+Mr[jr]()).slice(-10)+" 00000 n "):Mr[jr]!==void 0?Rr((sr+Mr[jr]).slice(-10)+" 00000 n "):Rr("0000000000 00000 n ")},Fa=He.__private__.buildDocument=function(){var sr;Nr=0,$r=0,Fr=[],Mr=[],Wr=[],Tn=bn(),An=bn(),Yr(Fr),ds.publish("buildDocument"),_s(),ls(),function(){ds.publish("putAdditionalObjects");for(var Ir=0;Ir<Wr.length;Ir++){var Hr=Wr[Ir];Cn(Hr.objId,!0),Rr(Hr.content),Rr("endobj")}ds.publish("postPutAdditionalObjects")}(),sr=[],function(){for(var Ir in Gn)Gn.hasOwnProperty(Ir)&&(ze===!1||ze===!0&&$e.hasOwnProperty(Ir))&&ss(Gn[Ir])}(),function(){var Ir;for(Ir in Hn)Hn.hasOwnProperty(Ir)&&da(Hn[Ir])}(),function(){for(var Ir in zs)zs.hasOwnProperty(Ir)&&ys(zs[Ir])}(),function(Ir){var Hr;for(Hr in Bn)Bn.hasOwnProperty(Hr)&&(Bn[Hr]instanceof M?ua(Bn[Hr]):Bn[Hr]instanceof q&&Ea(Bn[Hr],Ir))}(sr),ds.publish("putResources"),sr.forEach(Zs),Zs({resourcesOid:An,objectOid:Number.MAX_SAFE_INTEGER}),ds.publish("postPutResources"),Be!==null&&($s.oid=dn(),Rr("<<"),Rr("/Filter /Standard"),Rr("/V "+$s.v),Rr("/R "+$s.r),Rr("/U <"+$s.toHexString($s.U)+">"),Rr("/O <"+$s.toHexString($s.O)+">"),Rr("/P "+$s.P),Rr(">>"),Rr("endobj")),ms(),pa();var jr=$r;return vo(),Li(),Rr("startxref"),Rr(""+jr),Rr("%%EOF"),Yr(Zr[gr]),Fr.join(`
`)},Oi=He.__private__.getBlob=function(sr){return new Blob([mn(sr)],{type:"application/pdf"})},bo=He.output=He.__private__.output=(Jr=function(sr,jr){switch(typeof(jr=jr||{})=="string"?jr={filename:jr}:jr.filename=jr.filename||"generated.pdf",sr){case void 0:return Fa();case"save":He.save(jr.filename);break;case"arraybuffer":return mn(Fa());case"blob":return Oi(Fa());case"bloburi":case"bloburl":if(i$1.URL!==void 0&&typeof i$1.URL.createObjectURL=="function")return i$1.URL&&i$1.URL.createObjectURL(Oi(Fa()))||void 0;o.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ir="",Hr=Fa();try{Ir=d(Hr)}catch{Ir=d(unescape(encodeURIComponent(Hr)))}return"data:application/pdf;filename="+jr.filename+";base64,"+Ir;case"pdfobjectnewwindow":if(Object.prototype.toString.call(i$1)==="[object Window]"){var qr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",pn=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';jr.pdfObjectUrl&&(qr=jr.pdfObjectUrl,pn="");var xn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+qr+'"'+pn+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(jr)+");<\/script></body></html>",Pn=i$1.open();return Pn!==null&&Pn.document.write(xn),Pn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(i$1)==="[object Window]"){var Ln='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(jr.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+jr.filename+'" width="500px" height="400px" /></body></html>',Kn=i$1.open();if(Kn!==null){Kn.document.write(Ln);var es=this;Kn.document.documentElement.querySelector("#pdfViewer").onload=function(){Kn.document.title=jr.filename,Kn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(es.output("bloburl"))}}return Kn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(i$1)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ps='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",jr)+'"></iframe></body></html>',Ts=i$1.open();if(Ts!==null&&(Ts.document.write(ps),Ts.document.title=jr.filename),Ts||typeof safari>"u")return Ts;break;case"datauri":case"dataurl":return i$1.document.location.href=this.output("datauristring",jr);default:return null}},Jr.foo=function(){try{return Jr.apply(this,arguments)}catch(Ir){var sr=Ir.stack||"";~sr.indexOf(" at ")&&(sr=sr.split(" at ")[1]);var jr="Error in function "+sr.split(`
`)[0].split("<")[0]+": "+Ir.message;if(!i$1.console)throw new Error(jr);i$1.console.error(jr,Ir),i$1.alert&&alert(jr)}},Jr.foo.bar=Jr,Jr.foo),ja=function(sr){return Array.isArray(Ua)===!0&&Ua.indexOf(sr)>-1};switch(Ee){case"pt":On=1;break;case"mm":On=72/25.4;break;case"cm":On=72/2.54;break;case"in":On=72;break;case"px":On=ja("px_scaling")==1?.75:96/72;break;case"pc":case"em":On=12;break;case"ex":On=6;break;default:if(typeof Ee!="number")throw new Error("Invalid unit: "+Ee);On=Ee}var $s=null;ir(),rr();var qa=He.__private__.getPageInfo=He.getPageInfo=function(sr){if(isNaN(sr)||sr%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Un[sr].objId,pageNumber:sr,pageContext:Un[sr]}},Eo=He.__private__.getPageInfoByObjId=function(sr){if(isNaN(sr)||sr%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var jr in Un)if(Un[jr].objId===sr)break;return qa(jr)},Ko=He.__private__.getCurrentPageInfo=He.getCurrentPageInfo=function(){return{objId:Un[gr].objId,pageNumber:gr,pageContext:Un[gr]}};He.addPage=function(){return Va.apply(this,arguments),this},He.setPage=function(){return Ss.apply(this,arguments),Yr.call(this,Zr[gr]),this},He.insertPage=function(sr){return this.addPage(),this.movePage(gr,sr),this},He.movePage=function(sr,jr){var Ir,Hr;if(sr>jr){Ir=Zr[sr],Hr=Un[sr];for(var qr=sr;qr>jr;qr--)Zr[qr]=Zr[qr-1],Un[qr]=Un[qr-1];Zr[jr]=Ir,Un[jr]=Hr,this.setPage(jr)}else if(sr<jr){Ir=Zr[sr],Hr=Un[sr];for(var pn=sr;pn<jr;pn++)Zr[pn]=Zr[pn+1],Un[pn]=Un[pn+1];Zr[jr]=Ir,Un[jr]=Hr,this.setPage(jr)}return this},He.deletePage=function(){return as.apply(this,arguments),this},He.__private__.text=He.text=function(sr,jr,Ir,Hr,qr){var pn,xn,Pn,Ln,Kn,es,ps,Ts,Bs,Ns=(Hr=Hr||{}).scope||this;if(typeof sr=="number"&&typeof jr=="number"&&(typeof Ir=="string"||Array.isArray(Ir))){var Us=Ir;Ir=jr,jr=sr,sr=Us}if(arguments[3]instanceof Vn==0?(Pn=arguments[4],Ln=arguments[5],_typeof(ps=arguments[3])==="object"&&ps!==null||(typeof Pn=="string"&&(Ln=Pn,Pn=null),typeof ps=="string"&&(Ln=ps,ps=null),typeof ps=="number"&&(Pn=ps,ps=null),Hr={flags:ps,angle:Pn,align:Ln})):(ar("The transform parameter of text() with a Matrix value"),Bs=qr),isNaN(jr)||isNaN(Ir)||sr==null)throw new Error("Invalid arguments passed to jsPDF.text");if(sr.length===0)return Ns;var Hs,Ys="",Ja=typeof Hr.lineHeightFactor=="number"?Hr.lineHeightFactor:Si,Ta=Ns.internal.scaleFactor;function Za(gs){return gs=gs.split("	").join(Array(Hr.TabLen||9).join(" ")),Fs(gs,ps)}function to(gs){for(var Rs,Is=gs.concat(),Vs=[],ri=Is.length;ri--;)typeof(Rs=Is.shift())=="string"?Vs.push(Rs):Array.isArray(gs)&&(Rs.length===1||Rs[1]===void 0&&Rs[2]===void 0)?Vs.push(Rs[0]):Vs.push([Rs[0],Rs[1],Rs[2]]);return Vs}function zi(gs,Rs){var Is;if(typeof gs=="string")Is=Rs(gs)[0];else if(Array.isArray(gs)){for(var Vs,ri,po=gs.concat(),Vi=[],Mo=po.length;Mo--;)typeof(Vs=po.shift())=="string"?Vi.push(Rs(Vs)[0]):Array.isArray(Vs)&&typeof Vs[0]=="string"&&(ri=Rs(Vs[0],Vs[1],Vs[2]),Vi.push([ri[0],ri[1],ri[2]]));Is=Vi}return Is}var oi=!1,ki=!0;if(typeof sr=="string")oi=!0;else if(Array.isArray(sr)){var Ci=sr.concat();xn=[];for(var li,Ks=Ci.length;Ks--;)(typeof(li=Ci.shift())!="string"||Array.isArray(li)&&typeof li[0]!="string")&&(ki=!1);oi=ki}if(oi===!1)throw new Error('Type of text must be string or Array. "'+sr+'" is not recognized.');typeof sr=="string"&&(sr=sr.match(/[\r?\n]/)?sr.split(/\r\n|\r|\n/g):[sr]);var Ai=rn/Ns.internal.scaleFactor,Ti=Ai*(Ja-1);switch(Hr.baseline){case"bottom":Ir-=Ti;break;case"top":Ir+=Ai-Ti;break;case"hanging":Ir+=Ai-2*Ti;break;case"middle":Ir+=Ai/2-Ti}if((es=Hr.maxWidth||0)>0&&(typeof sr=="string"?sr=Ns.splitTextToSize(sr,es):Object.prototype.toString.call(sr)==="[object Array]"&&(sr=sr.reduce(function(gs,Rs){return gs.concat(Ns.splitTextToSize(Rs,es))},[]))),pn={text:sr,x:jr,y:Ir,options:Hr,mutex:{pdfEscape:Fs,activeFontKey:jn,fonts:Gn,activeFontSize:rn}},ds.publish("preProcessText",pn),sr=pn.text,Pn=(Hr=pn.options).angle,Bs instanceof Vn==0&&Pn&&typeof Pn=="number"){Pn*=Math.PI/180,Hr.rotationDirection===0&&(Pn=-Pn),Ke===Ye&&(Pn=-Pn);var ro=Math.cos(Pn),no=Math.sin(Pn);Bs=new Vn(ro,no,-no,ro,0,0)}else Pn&&Pn instanceof Vn&&(Bs=Pn);Ke!==Ye||Bs||(Bs=Br),(Kn=Hr.charSpace||Ya)!==void 0&&(Ys+=St(vr(Kn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ts=Hr.horizontalScale)!==void 0&&(Ys+=St(100*Ts)+` Tz
`),Hr.lang;var na=-1,ei=Hr.renderingMode!==void 0?Hr.renderingMode:Hr.stroke,$i=Ns.internal.getCurrentPageInfo().pageContext;switch(ei){case 0:case!1:case"fill":na=0;break;case 1:case!0:case"stroke":na=1;break;case 2:case"fillThenStroke":na=2;break;case 3:case"invisible":na=3;break;case 4:case"fillAndAddForClipping":na=4;break;case 5:case"strokeAndAddPathForClipping":na=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":na=6;break;case 7:case"addToPathForClipping":na=7}var To=$i.usedRenderingMode!==void 0?$i.usedRenderingMode:-1;na!==-1?Ys+=na+` Tr
`:To!==-1&&(Ys+=`0 Tr
`),na!==-1&&($i.usedRenderingMode=na),Ln=Hr.align||"left";var Sa,_i=rn*Ja,so=Ns.internal.pageSize.getWidth(),ao=Gn[jn];Kn=Hr.charSpace||Ya,es=Hr.maxWidth||0,ps=Object.assign({autoencode:!0,noBOM:!0},Hr.flags);var ci=[],Mi=function(gs){return Ns.getStringUnitWidth(gs,{font:ao,charSpace:Kn,fontSize:rn,doKerning:!1})*rn/Ta};if(Object.prototype.toString.call(sr)==="[object Array]"){var ha;xn=to(sr),Ln!=="left"&&(Sa=xn.map(Mi));var fa,ui=0;if(Ln==="right"){jr-=Sa[0],sr=[],Ks=xn.length;for(var ti=0;ti<Ks;ti++)ti===0?(fa=Wa(jr),ha=Ga(Ir)):(fa=vr(ui-Sa[ti]),ha=-_i),sr.push([xn[ti],fa,ha]),ui=Sa[ti]}else if(Ln==="center"){jr-=Sa[0]/2,sr=[],Ks=xn.length;for(var di=0;di<Ks;di++)di===0?(fa=Wa(jr),ha=Ga(Ir)):(fa=vr((ui-Sa[di])/2),ha=-_i),sr.push([xn[di],fa,ha]),ui=Sa[di]}else if(Ln==="left"){sr=[],Ks=xn.length;for(var io=0;io<Ks;io++)sr.push(xn[io])}else if(Ln==="justify"&&ao.encoding==="Identity-H"){sr=[],Ks=xn.length,es=es!==0?es:so;for(var Ui=0,Ds=0;Ds<Ks;Ds++)if(ha=Ds===0?Ga(Ir):-_i,fa=Ds===0?Wa(jr):Ui,Ds<Ks-1){var _o=vr((es-Sa[Ds])/(xn[Ds].split(" ").length-1)),Ha=xn[Ds].split(" ");sr.push([Ha[0]+" ",fa,ha]),Ui=0;for(var za=1;za<Ha.length;za++){var oo=(Mi(Ha[za-1]+" "+Ha[za])-Mi(Ha[za]))*Ta+_o;za==Ha.length-1?sr.push([Ha[za],oo,0]):sr.push([Ha[za]+" ",oo,0]),Ui-=oo}}else sr.push([xn[Ds],fa,ha]);sr.push(["",Ui,0])}else{if(Ln!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(sr=[],Ks=xn.length,es=es!==0?es:so,Ds=0;Ds<Ks;Ds++){ha=Ds===0?Ga(Ir):-_i,fa=Ds===0?Wa(jr):0;var lo=xn[Ds].split(" ").length-1,co=lo>0?(es-Sa[Ds])/lo:0;Ds<Ks-1?ci.push(St(vr(co))):ci.push(0),sr.push([xn[Ds],fa,ha])}}}(typeof Hr.R2L=="boolean"?Hr.R2L:Or)===!0&&(sr=zi(sr,function(gs,Rs,Is){return[gs.split("").reverse().join(""),Rs,Is]})),pn={text:sr,x:jr,y:Ir,options:Hr,mutex:{pdfEscape:Fs,activeFontKey:jn,fonts:Gn,activeFontSize:rn}},ds.publish("postProcessText",pn),sr=pn.text,Hs=pn.mutex.isHex||!1;var uo=Gn[jn].encoding;uo!=="WinAnsiEncoding"&&uo!=="StandardEncoding"||(sr=zi(sr,function(gs,Rs,Is){return[Za(gs),Rs,Is]})),xn=to(sr),sr=[];for(var pi,hi,fi,Pi=Array.isArray(xn[0])?1:0,mi="",Di=function(gs,Rs,Is){var Vs="";return Is instanceof Vn?(Is=typeof Hr.angle=="number"?ka(Is,new Vn(1,0,0,1,gs,Rs)):ka(new Vn(1,0,0,1,gs,Rs),Is),Ke===Ye&&(Is=ka(new Vn(1,0,0,-1,0,0),Is)),Vs=Is.join(" ")+` Tm
`):Vs=St(gs)+" "+St(Rs)+` Td
`,Vs},Ra=0;Ra<xn.length;Ra++){switch(mi="",Pi){case 1:fi=(Hs?"<":"(")+xn[Ra][0]+(Hs?">":")"),pi=parseFloat(xn[Ra][1]),hi=parseFloat(xn[Ra][2]);break;case 0:fi=(Hs?"<":"(")+xn[Ra]+(Hs?">":")"),pi=Wa(jr),hi=Ga(Ir)}ci!==void 0&&ci[Ra]!==void 0&&(mi=ci[Ra]+` Tw
`),Ra===0?sr.push(mi+Di(pi,hi,Bs)+fi):Pi===0?sr.push(mi+fi):Pi===1&&sr.push(mi+Di(pi,hi,Bs)+fi)}sr=Pi===0?sr.join(` Tj
T* `):sr.join(` Tj
`),sr+=` Tj
`;var $a=`BT
/`;return $a+=jn+" "+rn+` Tf
`,$a+=St(rn*Ja)+` TL
`,$a+=Ri+`
`,$a+=Ys,$a+=sr,Rr($a+="ET"),$e[jn]=!0,Ns};var Qo=He.__private__.clip=He.clip=function(sr){return Rr(sr==="evenodd"?"W*":"W"),this};He.clipEvenOdd=function(){return Qo("evenodd")},He.__private__.discardPath=He.discardPath=function(){return Rr("n"),this};var Ba=He.__private__.isValidStyle=function(sr){var jr=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(sr)!==-1&&(jr=!0),jr};He.__private__.setDefaultPathOperation=He.setDefaultPathOperation=function(sr){return Ba(sr)&&(Oe=sr),this};var jo=He.__private__.getStyle=He.getStyle=function(sr){var jr=Oe;switch(sr){case"D":case"S":jr="S";break;case"F":jr="f";break;case"FD":case"DF":jr="B";break;case"f":case"f*":case"B":case"B*":jr=sr}return jr},So=He.close=function(){return Rr("h"),this};He.stroke=function(){return Rr("S"),this},He.fill=function(sr){return Fi("f",sr),this},He.fillEvenOdd=function(sr){return Fi("f*",sr),this},He.fillStroke=function(sr){return Fi("B",sr),this},He.fillStrokeEvenOdd=function(sr){return Fi("B*",sr),this};var Fi=function(sr,jr){_typeof(jr)==="object"?Jo(jr,sr):Rr(sr)},ji=function(sr){sr===null||Ke===Ye&&sr===void 0||(sr=jo(sr),Rr(sr))};function Xo(sr,jr,Ir,Hr,qr){var pn=new q(jr||this.boundingBox,Ir||this.xStep,Hr||this.yStep,this.gState,qr||this.matrix);pn.stream=this.stream;var xn=sr+"$$"+this.cloneIndex+++"$$";return Vr(xn,pn),pn}var Jo=function(sr,jr){var Ir=fs[sr.key],Hr=Bn[Ir];if(Hr instanceof M)Rr("q"),Rr(Zo(jr)),Hr.gState&&He.setGState(Hr.gState),Rr(sr.matrix.toString()+" cm"),Rr("/"+Ir+" sh"),Rr("Q");else if(Hr instanceof q){var qr=new Vn(1,0,0,-1,0,Ni());sr.matrix&&(qr=qr.multiply(sr.matrix||Br),Ir=Xo.call(Hr,sr.key,sr.boundingBox,sr.xStep,sr.yStep,qr).id),Rr("q"),Rr("/Pattern cs"),Rr("/"+Ir+" scn"),Hr.gState&&He.setGState(Hr.gState),Rr(jr),Rr("Q")}},Zo=function(sr){switch(sr){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Gi=He.moveTo=function(sr,jr){return Rr(St(vr(sr))+" "+St(yr(jr))+" m"),this},Ro=He.lineTo=function(sr,jr){return Rr(St(vr(sr))+" "+St(yr(jr))+" l"),this},Aa=He.curveTo=function(sr,jr,Ir,Hr,qr,pn){return Rr([St(vr(sr)),St(yr(jr)),St(vr(Ir)),St(yr(Hr)),St(vr(qr)),St(yr(pn)),"c"].join(" ")),this};He.__private__.line=He.line=function(sr,jr,Ir,Hr,qr){if(isNaN(sr)||isNaN(jr)||isNaN(Ir)||isNaN(Hr)||!Ba(qr))throw new Error("Invalid arguments passed to jsPDF.line");return Ke===Ge?this.lines([[Ir-sr,Hr-jr]],sr,jr,[1,1],qr||"S"):this.lines([[Ir-sr,Hr-jr]],sr,jr,[1,1]).stroke()},He.__private__.lines=He.lines=function(sr,jr,Ir,Hr,qr,pn){var xn,Pn,Ln,Kn,es,ps,Ts,Bs,Ns,Us,Hs,Ys;if(typeof sr=="number"&&(Ys=Ir,Ir=jr,jr=sr,sr=Ys),Hr=Hr||[1,1],pn=pn||!1,isNaN(jr)||isNaN(Ir)||!Array.isArray(sr)||!Array.isArray(Hr)||!Ba(qr)||typeof pn!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Gi(jr,Ir),xn=Hr[0],Pn=Hr[1],Kn=sr.length,Us=jr,Hs=Ir,Ln=0;Ln<Kn;Ln++)(es=sr[Ln]).length===2?(Us=es[0]*xn+Us,Hs=es[1]*Pn+Hs,Ro(Us,Hs)):(ps=es[0]*xn+Us,Ts=es[1]*Pn+Hs,Bs=es[2]*xn+Us,Ns=es[3]*Pn+Hs,Us=es[4]*xn+Us,Hs=es[5]*Pn+Hs,Aa(ps,Ts,Bs,Ns,Us,Hs));return pn&&So(),ji(qr),this},He.path=function(sr){for(var jr=0;jr<sr.length;jr++){var Ir=sr[jr],Hr=Ir.c;switch(Ir.op){case"m":Gi(Hr[0],Hr[1]);break;case"l":Ro(Hr[0],Hr[1]);break;case"c":Aa.apply(this,Hr);break;case"h":So()}}return this},He.__private__.rect=He.rect=function(sr,jr,Ir,Hr,qr){if(isNaN(sr)||isNaN(jr)||isNaN(Ir)||isNaN(Hr)||!Ba(qr))throw new Error("Invalid arguments passed to jsPDF.rect");return Ke===Ge&&(Hr=-Hr),Rr([St(vr(sr)),St(yr(jr)),St(vr(Ir)),St(vr(Hr)),"re"].join(" ")),ji(qr),this},He.__private__.triangle=He.triangle=function(sr,jr,Ir,Hr,qr,pn,xn){if(isNaN(sr)||isNaN(jr)||isNaN(Ir)||isNaN(Hr)||isNaN(qr)||isNaN(pn)||!Ba(xn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ir-sr,Hr-jr],[qr-Ir,pn-Hr],[sr-qr,jr-pn]],sr,jr,[1,1],xn,!0),this},He.__private__.roundedRect=He.roundedRect=function(sr,jr,Ir,Hr,qr,pn,xn){if(isNaN(sr)||isNaN(jr)||isNaN(Ir)||isNaN(Hr)||isNaN(qr)||isNaN(pn)||!Ba(xn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Pn=4/3*(Math.SQRT2-1);return qr=Math.min(qr,.5*Ir),pn=Math.min(pn,.5*Hr),this.lines([[Ir-2*qr,0],[qr*Pn,0,qr,pn-pn*Pn,qr,pn],[0,Hr-2*pn],[0,pn*Pn,-qr*Pn,pn,-qr,pn],[2*qr-Ir,0],[-qr*Pn,0,-qr,-pn*Pn,-qr,-pn],[0,2*pn-Hr],[0,-pn*Pn,qr*Pn,-pn,qr,-pn]],sr+qr,jr,[1,1],xn,!0),this},He.__private__.ellipse=He.ellipse=function(sr,jr,Ir,Hr,qr){if(isNaN(sr)||isNaN(jr)||isNaN(Ir)||isNaN(Hr)||!Ba(qr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var pn=4/3*(Math.SQRT2-1)*Ir,xn=4/3*(Math.SQRT2-1)*Hr;return Gi(sr+Ir,jr),Aa(sr+Ir,jr-xn,sr+pn,jr-Hr,sr,jr-Hr),Aa(sr-pn,jr-Hr,sr-Ir,jr-xn,sr-Ir,jr),Aa(sr-Ir,jr+xn,sr-pn,jr+Hr,sr,jr+Hr),Aa(sr+pn,jr+Hr,sr+Ir,jr+xn,sr+Ir,jr),ji(qr),this},He.__private__.circle=He.circle=function(sr,jr,Ir,Hr){if(isNaN(sr)||isNaN(jr)||isNaN(Ir)||!Ba(Hr))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(sr,jr,Ir,Ir,Hr)},He.setFont=function(sr,jr,Ir){return Ir&&(jr=er(jr,Ir)),jn=Oa(sr,jr,{disableWarning:!1}),this};var el=He.__private__.getFont=He.getFont=function(){return Gn[Oa.apply(He,arguments)]};He.__private__.getFontList=He.getFontList=function(){var sr,jr,Ir={};for(sr in Xn)if(Xn.hasOwnProperty(sr))for(jr in Ir[sr]=[],Xn[sr])Xn[sr].hasOwnProperty(jr)&&Ir[sr].push(jr);return Ir},He.addFont=function(sr,jr,Ir,Hr,qr){var pn=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&pn.indexOf(arguments[3])!==-1?qr=arguments[3]:arguments[3]&&pn.indexOf(arguments[3])==-1&&(Ir=er(Ir,Hr)),Ia.call(this,sr,jr,Ir,qr=qr||"Identity-H")};var Si,Yi=e.lineWidth||.200025,tl=He.__private__.getLineWidth=He.getLineWidth=function(){return Yi},Qn=He.__private__.setLineWidth=He.setLineWidth=function(sr){return Yi=sr,Rr(St(vr(sr))+" w"),this};He.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(sr,jr){if(sr=sr||[],jr=jr||0,isNaN(jr)||!Array.isArray(sr))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return sr=sr.map(function(Ir){return St(vr(Ir))}).join(" "),jr=St(vr(jr)),Rr("["+sr+"] "+jr+" d"),this};var rl=He.__private__.getLineHeight=He.getLineHeight=function(){return rn*Si};He.__private__.getLineHeight=He.getLineHeight=function(){return rn*Si};var nl=He.__private__.setLineHeightFactor=He.setLineHeightFactor=function(sr){return typeof(sr=sr||1.15)=="number"&&(Si=sr),this},sl=He.__private__.getLineHeightFactor=He.getLineHeightFactor=function(){return Si};nl(e.lineHeight);var Wa=He.__private__.getHorizontalCoordinate=function(sr){return vr(sr)},Ga=He.__private__.getVerticalCoordinate=function(sr){return Ke===Ye?sr:Un[gr].mediaBox.topRightY-Un[gr].mediaBox.bottomLeftY-vr(sr)},al=He.__private__.getHorizontalCoordinateString=He.getHorizontalCoordinateString=function(sr){return St(Wa(sr))},il=He.__private__.getVerticalCoordinateString=He.getVerticalCoordinateString=function(sr){return St(Ga(sr))},Bi=e.strokeColor||"0 G";He.__private__.getStrokeColor=He.getDrawColor=function(){return kn(Bi)},He.__private__.setStrokeColor=He.setDrawColor=function(sr,jr,Ir,Hr){return Bi=_n({ch1:sr,ch2:jr,ch3:Ir,ch4:Hr,pdfColorType:"draw",precision:2}),Rr(Bi),this};var Ki=e.fillColor||"0 g";He.__private__.getFillColor=He.getFillColor=function(){return kn(Ki)},He.__private__.setFillColor=He.setFillColor=function(sr,jr,Ir,Hr){return Ki=_n({ch1:sr,ch2:jr,ch3:Ir,ch4:Hr,pdfColorType:"fill",precision:2}),Rr(Ki),this};var Ri=e.textColor||"0 g",ol=He.__private__.getTextColor=He.getTextColor=function(){return kn(Ri)};He.__private__.setTextColor=He.setTextColor=function(sr,jr,Ir,Hr){return Ri=_n({ch1:sr,ch2:jr,ch3:Ir,ch4:Hr,pdfColorType:"text",precision:3}),this};var Ya=e.charSpace,ll=He.__private__.getCharSpace=He.getCharSpace=function(){return parseFloat(Ya||0)};He.__private__.setCharSpace=He.setCharSpace=function(sr){if(isNaN(sr))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ya=sr,this};var Qi=0;He.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},He.__private__.setLineCap=He.setLineCap=function(sr){var jr=He.CapJoinStyles[sr];if(jr===void 0)throw new Error("Line cap style of '"+sr+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qi=jr,Rr(jr+" J"),this};var Xi=0;He.__private__.setLineJoin=He.setLineJoin=function(sr){var jr=He.CapJoinStyles[sr];if(jr===void 0)throw new Error("Line join style of '"+sr+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xi=jr,Rr(jr+" j"),this},He.__private__.setLineMiterLimit=He.__private__.setMiterLimit=He.setLineMiterLimit=He.setMiterLimit=function(sr){if(sr=sr||0,isNaN(sr))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Rr(St(vr(sr))+" M"),this},He.GState=O,He.setGState=function(sr){(sr=typeof sr=="string"?Hn[Yn[sr]]:wo(null,sr)).equals(Es)||(Rr("/"+sr.id+" gs"),Es=sr)};var wo=function(sr,jr){if(!sr||!Yn[sr]){var Ir=!1;for(var Hr in Hn)if(Hn.hasOwnProperty(Hr)&&Hn[Hr].equals(jr)){Ir=!0;break}if(Ir)jr=Hn[Hr];else{var qr="GS"+(Object.keys(Hn).length+1).toString(10);Hn[qr]=jr,jr.id=qr}return sr&&(Yn[sr]=jr.id),ds.publish("addGState",jr),jr}};He.addGState=function(sr,jr){return wo(sr,jr),this},He.saveGraphicsState=function(){return Rr("q"),xs.push({key:jn,size:rn,color:Ri}),this},He.restoreGraphicsState=function(){Rr("Q");var sr=xs.pop();return jn=sr.key,rn=sr.size,Ri=sr.color,Es=null,this},He.setCurrentTransformationMatrix=function(sr){return Rr(sr.toString()+" cm"),this},He.comment=function(sr){return Rr("#"+sr),this};var Ka=function(sr,jr){var Ir=sr||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ir},set:function(pn){isNaN(pn)||(Ir=parseFloat(pn))}});var Hr=jr||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Hr},set:function(pn){isNaN(pn)||(Hr=parseFloat(pn))}});var qr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return qr},set:function(pn){qr=pn.toString()}}),this},Ji=function(sr,jr,Ir,Hr){Ka.call(this,sr,jr),this.type="rect";var qr=Ir||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return qr},set:function(xn){isNaN(xn)||(qr=parseFloat(xn))}});var pn=Hr||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return pn},set:function(xn){isNaN(xn)||(pn=parseFloat(xn))}}),this},Hi=function(){this.page=Zn,this.currentPage=gr,this.pages=Zr.slice(0),this.pagesContext=Un.slice(0),this.x=Nn,this.y=js,this.matrix=qn,this.width=eo(gr),this.height=ko(gr),this.outputDestination=an,this.id="",this.objectNumber=-1};Hi.prototype.restore=function(){Zn=this.page,gr=this.currentPage,Un=this.pagesContext,Zr=this.pages,Nn=this.x,js=this.y,qn=this.matrix,No(gr,this.width),Qa(gr,this.height),an=this.outputDestination};var Zi=function(sr,jr,Ir,Hr,qr){ra.push(new Hi),Zn=gr=0,Zr=[],Nn=sr,js=jr,qn=qr,La([Ir,Hr])};for(var wi in He.beginFormObject=function(sr,jr,Ir,Hr,qr){return Zi(sr,jr,Ir,Hr,qr),this},He.endFormObject=function(sr){return function(jr){if(oa[jr])ra.pop().restore();else{var Ir=new Hi,Hr="Xo"+(Object.keys(zs).length+1).toString(10);Ir.id=Hr,oa[jr]=Hr,zs[Hr]=Ir,ds.publish("addFormObject",Ir),ra.pop().restore()}}(sr),this},He.doFormObject=function(sr,jr){var Ir=zs[oa[sr]];return Rr("q"),Rr(jr.toString()+" cm"),Rr("/"+Ir.id+" Do"),Rr("Q"),this},He.getFormObject=function(sr){var jr=zs[oa[sr]];return{x:jr.x,y:jr.y,width:jr.width,height:jr.height,matrix:jr.matrix}},He.save=function(sr,jr){return sr=sr||"generated.pdf",(jr=jr||{}).returnPromise=jr.returnPromise||!1,jr.returnPromise===!1?(l(Oi(Fa()),sr),typeof l.unload=="function"&&i$1.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Ir,Hr){try{var qr=l(Oi(Fa()),sr);typeof l.unload=="function"&&i$1.setTimeout&&setTimeout(l.unload,911),Ir(qr)}catch(pn){Hr(pn.message)}})},E.API)E.API.hasOwnProperty(wi)&&(wi==="events"&&E.API.events.length?function(sr,jr){var Ir,Hr,qr;for(qr=jr.length-1;qr!==-1;qr--)Ir=jr[qr][0],Hr=jr[qr][1],sr.subscribe.apply(sr,[Ir].concat(typeof Hr=="function"?[Hr]:Hr))}(ds,E.API.events):He[wi]=E.API[wi]);function eo(sr){return Un[sr].mediaBox.topRightX-Un[sr].mediaBox.bottomLeftX}function No(sr,jr){Un[sr].mediaBox.topRightX=jr+Un[sr].mediaBox.bottomLeftX}function ko(sr){return Un[sr].mediaBox.topRightY-Un[sr].mediaBox.bottomLeftY}function Qa(sr,jr){Un[sr].mediaBox.topRightY=jr+Un[sr].mediaBox.bottomLeftY}var Xa=He.getPageWidth=function(sr){return eo(sr=sr||gr)/On},Co=He.setPageWidth=function(sr,jr){No(sr,jr*On)},Ni=He.getPageHeight=function(sr){return ko(sr=sr||gr)/On},Ao=He.setPageHeight=function(sr,jr){Qa(sr,jr*On)};return He.internal={pdfEscape:Fs,getStyle:jo,getFont:el,getFontSize:Lr,getCharSpace:ll,getTextColor:ol,getLineHeight:rl,getLineHeightFactor:sl,getLineWidth:tl,write:Xr,getHorizontalCoordinate:Wa,getVerticalCoordinate:Ga,getCoordinateString:al,getVerticalCoordinateString:il,collections:{},newObject:dn,newAdditionalObject:zn,newObjectDeferred:bn,newObjectDeferredBegin:Cn,getFilters:$n,putStream:Wn,events:ds,scaleFactor:On,pageSize:{getWidth:function(){return Xa(gr)},setWidth:function(sr){Co(gr,sr)},getHeight:function(){return Ni(gr)},setHeight:function(sr){Ao(gr,sr)}},encryptionOptions:Be,encryption:$s,getEncryptor:function(sr){return Be!==null?$s.encryptor(sr,0):function(jr){return jr}},output:bo,getNumberOfPages:Ca,get pages(){return Zr},out:Rr,f2:ur,f3:dr,getPageInfo:qa,getPageInfoByObjId:Eo,getCurrentPageInfo:Ko,getPDFVersion:Ve,Point:Ka,Rectangle:Ji,Matrix:Vn,hasHotfix:ja},Object.defineProperty(He.internal.pageSize,"width",{get:function(){return Xa(gr)},set:function(sr){Co(gr,sr)},enumerable:!0,configurable:!0}),Object.defineProperty(He.internal.pageSize,"height",{get:function(){return Ni(gr)},set:function(sr){Ao(gr,sr)},enumerable:!0,configurable:!0}),(function(sr){for(var jr=0,Ir=En.length;jr<Ir;jr++){var Hr=Ia.call(this,sr[jr][0],sr[jr][1],sr[jr][2],En[jr][3],!0);ze===!1&&($e[Hr]=!0);var qr=sr[jr][0].split("-");ii({id:Hr,fontName:qr[0],fontStyle:qr[1]||""})}ds.publish("addFonts",{fonts:Gn,dictionary:Xn})}).call(He,En),jn="F1",Va(Re,n),ds.publish("initialized"),He}I.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},I.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},I.prototype.processOwnerPassword=function(e,t){return k(S(t).substr(0,5),e)},I.prototype.encryptor=function(e,t){var n=S(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(Ee){return k(n,Ee)}},O.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||_typeof(e)!==_typeof(this))return!1;var Ee=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;Ee++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&Ee--;return Ee===0},E.API={events:[]},E.version="3.0.4";var R=E.API,D=1,T=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},z=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(e){return e.toFixed(2)},H=function(e){return e.toFixed(5)};R.__acroform__={};var W=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},V=function(e){return e*D},G=function(e){var t=new ct,n=xt.internal.getHeight(e)||0,Ee=xt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(U(Ee)),Number(U(n))],t},Y=R.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},J=R.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},X=R.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},K=R.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return X(e,t-1)},Z=R.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Y(e,t-1)},$=R.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return J(e,t-1)},Q=R.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,Ee=t.internal.getVerticalCoordinate,Re=e[0],Ce=e[1],Te=e[2],Me=e[3],De={};return De.lowerLeft_X=n(Re)||0,De.lowerLeft_Y=Ee(Ce+Me)||0,De.upperRight_X=n(Re+Te)||0,De.upperRight_Y=Ee(Ce)||0,[Number(U(De.lowerLeft_X)),Number(U(De.lowerLeft_Y)),Number(U(De.upperRight_X)),Number(U(De.upperRight_Y))]},tt$1=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,Ee=et(e,n),Re=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+Re+" "+U(Ee.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(Ee.text),t.push("ET"),t.push("Q"),t.push("EMC");var Ce=G(e);return Ce.scope=e.scope,Ce.stream=t.join(`
`),Ce}},et=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,Ee={text:"",fontSize:""},Re=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");Re=e.multiline?Re.map(function(ur){return ur.split(`
`)}):Re.map(function(ur){return[ur]});var Ce=n,Te=xt.internal.getHeight(e)||0;Te=Te<0?-Te:Te;var Me=xt.internal.getWidth(e)||0;Me=Me<0?-Me:Me;var De=function(ur,dr,vr){if(ur+1<Re.length){var yr=dr+" "+Re[ur+1][0];return nt(yr,e,vr).width<=Me-4}return!1};Ce++;e:for(;Ce>0;){t="",Ce--;var Oe,Be,ze=nt("3",e,Ce).height,$e=e.multiline?Te-Ce:(Te-ze)/2,He=$e+=2,Ue=0,Ve=0,We=0;if(Ce<=0){t=`(...) Tj
`,t+="% Width of Text: "+nt(t,e,Ce=12).width+", FieldWidth:"+Me+`
`;break}for(var qe="",Ge=0,Ye=0;Ye<Re.length;Ye++)if(Re.hasOwnProperty(Ye)){var Ke=!1;if(Re[Ye].length!==1&&We!==Re[Ye].length-1){if((ze+2)*(Ge+2)+2>Te)continue e;qe+=Re[Ye][We],Ke=!0,Ve=Ye,Ye--}else{qe=(qe+=Re[Ye][We]+" ").substr(qe.length-1)==" "?qe.substr(0,qe.length-1):qe;var Xe=parseInt(Ye),Ze=De(Xe,qe,Ce),er=Ye>=Re.length-1;if(Ze&&!er){qe+=" ",We=0;continue}if(Ze||er){if(er)Ve=Xe;else if(e.multiline&&(ze+2)*(Ge+2)+2>Te)continue e}else{if(!e.multiline||(ze+2)*(Ge+2)+2>Te)continue e;Ve=Xe}}for(var St="",ar=Ue;ar<=Ve;ar++){var hr=Re[ar];if(e.multiline){if(ar===Ve){St+=hr[We]+" ",We=(We+1)%hr.length;continue}if(ar===Ue){St+=hr[hr.length-1]+" ";continue}}St+=hr[0]+" "}switch(St=St.substr(St.length-1)==" "?St.substr(0,St.length-1):St,Be=nt(St,e,Ce).width,e.textAlign){case"right":Oe=Me-Be-2;break;case"center":Oe=(Me-Be)/2;break;default:Oe=2}t+=U(Oe)+" "+U(He)+` Td
`,t+="("+T(St)+`) Tj
`,t+=-U(Oe)+` 0 Td
`,He=-(Ce+2),Be=0,Ue=Ke?Ve:Ve+1,Ge++,qe=""}break}return Ee.text=t,Ee.fontSize=Ce,Ee},nt=function(e,t,n){var Ee=t.scope.internal.getFont(t.fontName,t.fontStyle),Re=t.scope.getStringUnitWidth(e,{font:Ee,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:Ee,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:Re}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},it=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(Ee){return Ee.type===n.type&&Ee.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},at=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ht.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new lt,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var Ee=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Re in Ee)if(Ee.hasOwnProperty(Re)){var Ce=Ee[Re];Ce.objId=void 0,Ce.hasAnnotation&&it(Ce,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(Ee,Re){var Ce=!Ee;for(var Te in Ee||(Re.internal.newObjectDeferredBegin(Re.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Re.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),Ee=Ee||Re.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(Ee.hasOwnProperty(Te)){var Me=Ee[Te],De=[],Oe=Me.Rect;if(Me.Rect&&(Me.Rect=Q(Me.Rect,Re)),Re.internal.newObjectDeferredBegin(Me.objId,!0),Me.DA=xt.createDefaultAppearanceStream(Me),_typeof(Me)==="object"&&typeof Me.getKeyValueListForStream=="function"&&(De=Me.getKeyValueListForStream()),Me.Rect=Oe,Me.hasAppearanceStream&&!Me.appearanceStreamContent){var Be=tt$1(Me);De.push({key:"AP",value:"<</N "+Be+">>"}),Re.internal.acroformPlugin.xForms.push(Be)}if(Me.appearanceStreamContent){var ze="";for(var $e in Me.appearanceStreamContent)if(Me.appearanceStreamContent.hasOwnProperty($e)){var He=Me.appearanceStreamContent[$e];if(ze+="/"+$e+" ",ze+="<<",Object.keys(He).length>=1||Array.isArray(He)){for(var Te in He)if(He.hasOwnProperty(Te)){var Ue=He[Te];typeof Ue=="function"&&(Ue=Ue.call(Re,Me)),ze+="/"+Te+" "+Ue+" ",Re.internal.acroformPlugin.xForms.indexOf(Ue)>=0||Re.internal.acroformPlugin.xForms.push(Ue)}}else typeof(Ue=He)=="function"&&(Ue=Ue.call(Re,Me)),ze+="/"+Te+" "+Ue,Re.internal.acroformPlugin.xForms.indexOf(Ue)>=0||Re.internal.acroformPlugin.xForms.push(Ue);ze+=">>"}De.push({key:"AP",value:`<<
`+ze+">>"})}Re.internal.putStream({additionalKeyValues:De,objectId:Me.objId}),Re.internal.out("endobj")}Ce&&function(Ve,We){for(var qe in Ve)if(Ve.hasOwnProperty(qe)){var Ge=qe,Ye=Ve[qe];We.internal.newObjectDeferredBegin(Ye.objId,!0),_typeof(Ye)==="object"&&typeof Ye.putStream=="function"&&Ye.putStream(),delete Ve[Ge]}}(Re.internal.acroformPlugin.xForms,Re)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},ot=R.__acroform__.arrayToPdfArray=function(e,t,n){var Ee=function(Te){return Te};if(Array.isArray(e)){for(var Re="[",Ce=0;Ce<e.length;Ce++)switch(Ce!==0&&(Re+=" "),_typeof(e[Ce])){case"boolean":case"number":case"object":Re+=e[Ce].toString();break;case"string":e[Ce].substr(0,1)!=="/"?(t!==void 0&&n&&(Ee=n.internal.getEncryptor(t)),Re+="("+T(Ee(e[Ce].toString()))+")"):Re+=e[Ce].toString()}return Re+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(e,t,n){var Ee=function(Re){return Re};return t!==void 0&&n&&(Ee=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+T(Ee(e))+")"},ut=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ut.prototype.toString=function(){return this.objId+" 0 R"},ut.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ut.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(Ce){return Ce!="content"&&Ce!="appearanceStreamContent"&&Ce!="scope"&&Ce!="objId"&&Ce.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var Ee=t[n],Re=this[Ee];Re&&(Array.isArray(Re)?e.push({key:Ee,value:ot(Re,this.objId,this.scope)}):Re instanceof ut?(Re.scope=this.scope,e.push({key:Ee,value:Re.objId+" 0 R"})):typeof Re!="function"&&e.push({key:Ee,value:Re}))}return e};var ct=function(){ut.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};W(ct,ut);var lt=function(){ut.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(Ee){return Ee};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+T(n(e))+")"}},set:function(n){e=n}})};W(lt,ut);var ht=function e(){ut.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(qe){if(isNaN(qe))throw new Error('Invalid value "'+qe+'" for attribute F supplied.');t=qe}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!K(t,3)},set:function(qe){qe?this.F=Z(t,3):this.F=$(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(qe){if(isNaN(qe))throw new Error('Invalid value "'+qe+'" for attribute Ff supplied.');n=qe}});var Ee=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(Ee.length!==0)return Ee},set:function(qe){Ee=qe!==void 0?qe:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!Ee||isNaN(Ee[0])?0:Ee[0]},set:function(qe){Ee[0]=qe}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!Ee||isNaN(Ee[1])?0:Ee[1]},set:function(qe){Ee[1]=qe}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!Ee||isNaN(Ee[2])?0:Ee[2]},set:function(qe){Ee[2]=qe}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!Ee||isNaN(Ee[3])?0:Ee[3]},set:function(qe){Ee[3]=qe}});var Re="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Re},set:function(qe){switch(qe){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Re=qe;break;default:throw new Error('Invalid value "'+qe+'" for attribute FT supplied.')}}});var Ce=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Ce||Ce.length<1){if(this instanceof yt)return;Ce="FieldObject"+e.FieldNum++}var qe=function(Ge){return Ge};return this.scope&&(qe=this.scope.internal.getEncryptor(this.objId)),"("+T(qe(Ce))+")"},set:function(qe){Ce=qe.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Ce},set:function(qe){Ce=qe}});var Te="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Te},set:function(qe){Te=qe}});var Me="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Me},set:function(qe){Me=qe}});var De=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return De},set:function(qe){De=qe}});var Oe=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Oe===void 0?50/D:Oe},set:function(qe){Oe=qe}});var Be="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Be},set:function(qe){Be=qe}});var ze="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!ze||this instanceof yt||this instanceof Nt))return st(ze,this.objId,this.scope)},set:function(qe){qe=qe.toString(),ze=qe}});var $e=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if($e)return this instanceof mt==0?st($e,this.objId,this.scope):$e},set:function(qe){qe=qe.toString(),$e=this instanceof mt==0?qe.substr(0,1)==="("?z(qe.substr(1,qe.length-2)):z(qe):qe}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt==1?z($e.substr(1,$e.length-1)):$e},set:function(qe){qe=qe.toString(),$e=this instanceof mt==1?"/"+qe:qe}});var He=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(He)return He},set:function(qe){this.V=qe}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(He)return this instanceof mt==0?st(He,this.objId,this.scope):He},set:function(qe){qe=qe.toString(),He=this instanceof mt==0?qe.substr(0,1)==="("?z(qe.substr(1,qe.length-2)):z(qe):qe}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt==1?z(He.substr(1,He.length-1)):He},set:function(qe){qe=qe.toString(),He=this instanceof mt==1?"/"+qe:qe}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Ue,Ve=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return Ve},set:function(qe){qe=!!qe,Ve=qe}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Ue)return Ue},set:function(qe){Ue=qe}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,1)},set:function(qe){qe?this.Ff=Z(this.Ff,1):this.Ff=$(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,2)},set:function(qe){qe?this.Ff=Z(this.Ff,2):this.Ff=$(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,3)},set:function(qe){qe?this.Ff=Z(this.Ff,3):this.Ff=$(this.Ff,3)}});var We=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(We!==null)return We},set:function(qe){if([0,1,2].indexOf(qe)===-1)throw new Error('Invalid value "'+qe+'" for attribute Q supplied.');We=qe}}),Object.defineProperty(this,"textAlign",{get:function(){var qe;switch(We){case 0:default:qe="left";break;case 1:qe="center";break;case 2:qe="right"}return qe},configurable:!0,enumerable:!0,set:function(qe){switch(qe){case"right":case 2:We=2;break;case"center":case 1:We=1;break;default:We=0}}})};W(ht,ut);var ft=function(){ht.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(t,this.objId,this.scope)},set:function(n){var Ee,Re;Re=[],typeof(Ee=n)=="string"&&(Re=function(Ce,Te,Me){Me||(Me=1);for(var De,Oe=[];De=Te.exec(Ce);)Oe.push(De[Me]);return Oe}(Ee,/\((.*?)\)/g)),t=Re}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,Ee){for(Ee=Ee||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),Ee!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,18)},set:function(n){n?this.Ff=Z(this.Ff,18):this.Ff=$(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Z(this.Ff,19):this.Ff=$(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,20)},set:function(n){n?(this.Ff=Z(this.Ff,20),t.sort()):this.Ff=$(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,22)},set:function(n){n?this.Ff=Z(this.Ff,22):this.Ff=$(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,23)},set:function(n){n?this.Ff=Z(this.Ff,23):this.Ff=$(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,27)},set:function(n){n?this.Ff=Z(this.Ff,27):this.Ff=$(this.Ff,27)}}),this.hasAppearanceStream=!1};W(ft,ht);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};W(dt,ft);var pt=function(){dt.call(this),this.combo=!0};W(pt,dt);var gt=function(){pt.call(this),this.edit=!0};W(gt,pt);var mt=function(){ht.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,15)},set:function(n){n?this.Ff=Z(this.Ff,15):this.Ff=$(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,16)},set:function(n){n?this.Ff=Z(this.Ff,16):this.Ff=$(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,17)},set:function(n){n?this.Ff=Z(this.Ff,17):this.Ff=$(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,26)},set:function(n){n?this.Ff=Z(this.Ff,26):this.Ff=$(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(Ce){return Ce};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var Ee,Re=[];for(Ee in Re.push("<<"),t)Re.push("/"+Ee+" ("+T(n(t[Ee]))+")");return Re.push(">>"),Re.join(`
`)}},set:function(n){_typeof(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};W(mt,ht);var vt=function(){mt.call(this),this.pushButton=!0};W(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};W(bt,mt);var yt=function(){var e,t;ht.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(Re){e=Re}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(Re){t=Re}});var n,Ee={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Re=function(Me){return Me};this.scope&&(Re=this.scope.internal.getEncryptor(this.objId));var Ce,Te=[];for(Ce in Te.push("<<"),Ee)Te.push("/"+Ce+" ("+T(Re(Ee[Ce]))+")");return Te.push(">>"),Te.join(`
`)},set:function(Re){_typeof(Re)==="object"&&(Ee=Re)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return Ee.CA||""},set:function(Re){typeof Re=="string"&&(Ee.CA=Re)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(Re){n=Re}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(Re){n="/"+Re}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};W(yt,ht),bt.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},bt.prototype.createOption=function(e){var t=new yt;return t.Parent=this,t.optionName=e,this.Kids.push(t),At.call(this.scope,t),t};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};W(wt,mt);var Nt=function(){ht.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,13)},set:function(t){t?this.Ff=Z(this.Ff,13):this.Ff=$(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,21)},set:function(t){t?this.Ff=Z(this.Ff,21):this.Ff=$(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,23)},set:function(t){t?this.Ff=Z(this.Ff,23):this.Ff=$(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,24)},set:function(t){t?this.Ff=Z(this.Ff,24):this.Ff=$(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,25)},set:function(t){t?this.Ff=Z(this.Ff,25):this.Ff=$(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,26)},set:function(t){t?this.Ff=Z(this.Ff,26):this.Ff=$(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};W(Nt,ht);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,14)},set:function(e){e?this.Ff=Z(this.Ff,14):this.Ff=$(this.Ff,14)}}),this.password=!0};W(Lt,Nt);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=G(e);t.scope=e.scope;var n=[],Ee=e.scope.internal.getFont(e.fontName,e.fontStyle).id,Re=e.scope.__private__.encodeColorString(e.color),Ce=et(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+U(xt.internal.getWidth(e))+" "+U(xt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+Ee+" "+U(Ce.fontSize)+" Tf "+Re),n.push("BT"),n.push(Ce.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=G(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,Ee=e.scope.__private__.encodeColorString(e.color),Re=[],Ce=xt.internal.getHeight(e),Te=xt.internal.getWidth(e),Me=et(e,e.caption);return Re.push("1 g"),Re.push("0 0 "+U(Te)+" "+U(Ce)+" re"),Re.push("f"),Re.push("q"),Re.push("0 0 1 rg"),Re.push("0 0 "+U(Te-1)+" "+U(Ce-1)+" re"),Re.push("W"),Re.push("n"),Re.push("0 g"),Re.push("BT"),Re.push("/"+n+" "+U(Me.fontSize)+" Tf "+Ee),Re.push(Me.text),Re.push("ET"),Re.push("Q"),t.stream=Re.join(`
`),t},OffPushDown:function(e){var t=G(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+U(xt.internal.getWidth(e))+" "+U(xt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=xt.RadioButton.Circle.YesNormal,t.D[e]=xt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=G(e);t.scope=e.scope;var n=[],Ee=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;Ee=Number((.9*Ee).toFixed(5));var Re=xt.internal.Bezier_C,Ce=Number((Ee*Re).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+H(xt.internal.getWidth(e)/2)+" "+H(xt.internal.getHeight(e)/2)+" cm"),n.push(Ee+" 0 m"),n.push(Ee+" "+Ce+" "+Ce+" "+Ee+" 0 "+Ee+" c"),n.push("-"+Ce+" "+Ee+" -"+Ee+" "+Ce+" -"+Ee+" 0 c"),n.push("-"+Ee+" -"+Ce+" -"+Ce+" -"+Ee+" 0 -"+Ee+" c"),n.push(Ce+" -"+Ee+" "+Ee+" -"+Ce+" "+Ee+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=G(e);t.scope=e.scope;var n=[],Ee=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;Ee=Number((.9*Ee).toFixed(5));var Re=Number((2*Ee).toFixed(5)),Ce=Number((Re*xt.internal.Bezier_C).toFixed(5)),Te=Number((Ee*xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+H(xt.internal.getWidth(e)/2)+" "+H(xt.internal.getHeight(e)/2)+" cm"),n.push(Re+" 0 m"),n.push(Re+" "+Ce+" "+Ce+" "+Re+" 0 "+Re+" c"),n.push("-"+Ce+" "+Re+" -"+Re+" "+Ce+" -"+Re+" 0 c"),n.push("-"+Re+" -"+Ce+" -"+Ce+" -"+Re+" 0 -"+Re+" c"),n.push(Ce+" -"+Re+" "+Re+" -"+Ce+" "+Re+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+H(xt.internal.getWidth(e)/2)+" "+H(xt.internal.getHeight(e)/2)+" cm"),n.push(Ee+" 0 m"),n.push(Ee+" "+Te+" "+Te+" "+Ee+" 0 "+Ee+" c"),n.push("-"+Te+" "+Ee+" -"+Ee+" "+Te+" -"+Ee+" 0 c"),n.push("-"+Ee+" -"+Te+" -"+Te+" -"+Ee+" 0 -"+Ee+" c"),n.push(Te+" -"+Ee+" "+Ee+" -"+Te+" "+Ee+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=G(e);t.scope=e.scope;var n=[],Ee=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;Ee=Number((.9*Ee).toFixed(5));var Re=Number((2*Ee).toFixed(5)),Ce=Number((Re*xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+H(xt.internal.getWidth(e)/2)+" "+H(xt.internal.getHeight(e)/2)+" cm"),n.push(Re+" 0 m"),n.push(Re+" "+Ce+" "+Ce+" "+Re+" 0 "+Re+" c"),n.push("-"+Ce+" "+Re+" -"+Re+" "+Ce+" -"+Re+" 0 c"),n.push("-"+Re+" -"+Ce+" -"+Ce+" -"+Re+" 0 -"+Re+" c"),n.push(Ce+" -"+Re+" "+Re+" -"+Ce+" "+Re+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=xt.RadioButton.Cross.YesNormal,t.D[e]=xt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=G(e);t.scope=e.scope;var n=[],Ee=xt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+U(xt.internal.getWidth(e)-2)+" "+U(xt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(U(Ee.x1.x)+" "+U(Ee.x1.y)+" m"),n.push(U(Ee.x2.x)+" "+U(Ee.x2.y)+" l"),n.push(U(Ee.x4.x)+" "+U(Ee.x4.y)+" m"),n.push(U(Ee.x3.x)+" "+U(Ee.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=G(e);t.scope=e.scope;var n=xt.internal.calculateCross(e),Ee=[];return Ee.push("0.749023 g"),Ee.push("0 0 "+U(xt.internal.getWidth(e))+" "+U(xt.internal.getHeight(e))+" re"),Ee.push("f"),Ee.push("q"),Ee.push("1 1 "+U(xt.internal.getWidth(e)-2)+" "+U(xt.internal.getHeight(e)-2)+" re"),Ee.push("W"),Ee.push("n"),Ee.push(U(n.x1.x)+" "+U(n.x1.y)+" m"),Ee.push(U(n.x2.x)+" "+U(n.x2.y)+" l"),Ee.push(U(n.x4.x)+" "+U(n.x4.y)+" m"),Ee.push(U(n.x3.x)+" "+U(n.x3.y)+" l"),Ee.push("s"),Ee.push("Q"),t.stream=Ee.join(`
`),t},OffPushDown:function(e){var t=G(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+U(xt.internal.getWidth(e))+" "+U(xt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};xt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=xt.internal.getWidth(e),n=xt.internal.getHeight(e),Ee=Math.min(t,n);return{x1:{x:(t-Ee)/2,y:(n-Ee)/2+Ee},x2:{x:(t-Ee)/2+Ee,y:(n-Ee)/2},x3:{x:(t-Ee)/2,y:(n-Ee)/2},x4:{x:(t-Ee)/2+Ee,y:(n-Ee)/2+Ee}}}},xt.internal.getWidth=function(e){var t=0;return _typeof(e)==="object"&&(t=V(e.Rect[2])),t},xt.internal.getHeight=function(e){var t=0;return _typeof(e)==="object"&&(t=V(e.Rect[3])),t};var At=R.addField=function(e){if(at(this,e),!(e instanceof ht))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};R.AcroFormChoiceField=ft,R.AcroFormListBox=dt,R.AcroFormComboBox=pt,R.AcroFormEditBox=gt,R.AcroFormButton=mt,R.AcroFormPushButton=vt,R.AcroFormRadioButton=bt,R.AcroFormCheckBox=wt,R.AcroFormTextField=Nt,R.AcroFormPasswordField=Lt,R.AcroFormAppearance=xt,R.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:xt},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:xt};E.AcroForm;function _t(e){return e.reduce(function(t,n,Ee){return t[n]=Ee,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",Ee={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},Re=e.__addimage__.getImageFileTypeByImageData=function(ur,dr){var vr,yr,br,lr,cr,rr=n;if((dr=dr||n)==="RGBA"||ur.data!==void 0&&ur.data instanceof Uint8ClampedArray&&"height"in ur&&"width"in ur)return"RGBA";if(Ze(ur))for(cr in Ee)for(br=Ee[cr],vr=0;vr<br.length;vr+=1){for(lr=!0,yr=0;yr<br[vr].length;yr+=1)if(br[vr][yr]!==void 0&&br[vr][yr]!==ur[yr]){lr=!1;break}if(lr===!0){rr=cr;break}}else for(cr in Ee)for(br=Ee[cr],vr=0;vr<br.length;vr+=1){for(lr=!0,yr=0;yr<br[vr].length;yr+=1)if(br[vr][yr]!==void 0&&br[vr][yr]!==ur.charCodeAt(yr)){lr=!1;break}if(lr===!0){rr=cr;break}}return rr===n&&dr!==n&&(rr=dr),rr},Ce=function ur(dr){for(var vr=this.internal.write,yr=this.internal.putStream,br=(0,this.internal.getFilters)();br.indexOf("FlateEncode")!==-1;)br.splice(br.indexOf("FlateEncode"),1);dr.objectId=this.internal.newObject();var lr=[];if(lr.push({key:"Type",value:"/XObject"}),lr.push({key:"Subtype",value:"/Image"}),lr.push({key:"Width",value:dr.width}),lr.push({key:"Height",value:dr.height}),dr.colorSpace===qe.INDEXED?lr.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(dr.palette.length/3-1)+" "+("sMask"in dr&&dr.sMask!==void 0?dr.objectId+2:dr.objectId+1)+" 0 R]"}):(lr.push({key:"ColorSpace",value:"/"+dr.colorSpace}),dr.colorSpace===qe.DEVICE_CMYK&&lr.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),lr.push({key:"BitsPerComponent",value:dr.bitsPerComponent}),"decodeParameters"in dr&&dr.decodeParameters!==void 0&&lr.push({key:"DecodeParms",value:"<<"+dr.decodeParameters+">>"}),"transparency"in dr&&Array.isArray(dr.transparency)&&dr.transparency.length>0){for(var cr="",rr=0,pr=dr.transparency.length;rr<pr;rr++)cr+=dr.transparency[rr]+" "+dr.transparency[rr]+" ";lr.push({key:"Mask",value:"["+cr+"]"})}dr.sMask!==void 0&&lr.push({key:"SMask",value:dr.objectId+1+" 0 R"});var mr=dr.filter!==void 0?["/"+dr.filter]:void 0;if(yr({data:dr.data,additionalKeyValues:lr,alreadyAppliedFilters:mr,objectId:dr.objectId}),vr("endobj"),"sMask"in dr&&dr.sMask!==void 0){var ir,nr=(ir=dr.sMaskBitsPerComponent)!==null&&ir!==void 0?ir:dr.bitsPerComponent,gr={width:dr.width,height:dr.height,colorSpace:"DeviceGray",bitsPerComponent:nr,data:dr.sMask};"filter"in dr&&(gr.decodeParameters="/Predictor ".concat(dr.predictor," /Colors 1 /BitsPerComponent ").concat(nr," /Columns ").concat(dr.width),gr.filter=dr.filter),ur.call(this,gr)}if(dr.colorSpace===qe.INDEXED){var Er=this.internal.newObject();yr({data:St(new Uint8Array(dr.palette)),objectId:Er}),vr("endobj")}},Te=function(){var ur=this.internal.collections[t+"images"];for(var dr in ur)Ce.call(this,ur[dr])},Me=function(){var ur,dr=this.internal.collections[t+"images"],vr=this.internal.write;for(var yr in dr)vr("/I"+(ur=dr[yr]).index,ur.objectId,"0","R")},De=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",Te),this.internal.events.subscribe("putXobjectDict",Me))},Oe=function(){var ur=this.internal.collections[t+"images"];return De.call(this),ur},Be=function(){return Object.keys(this.internal.collections[t+"images"]).length},ze=function(ur){return typeof e["process"+ur.toUpperCase()]=="function"},$e=function(ur){return _typeof(ur)==="object"&&ur.nodeType===1},He=function(ur,dr){if(ur.nodeName==="IMG"&&ur.hasAttribute("src")){var vr=""+ur.getAttribute("src");if(vr.indexOf("data:image/")===0)return f(unescape(vr).split("base64,").pop());var yr=e.loadFile(vr,!0);if(yr!==void 0)return yr}if(ur.nodeName==="CANVAS"){if(ur.width===0||ur.height===0)throw new Error("Given canvas must have data. Canvas width: "+ur.width+", height: "+ur.height);var br;switch(dr){case"PNG":br="image/png";break;case"WEBP":br="image/webp";break;default:br="image/jpeg"}return f(ur.toDataURL(br,1).split("base64,").pop())}},Ue=function(ur){var dr=this.internal.collections[t+"images"];if(dr){for(var vr in dr)if(ur===dr[vr].alias)return dr[vr]}},Ve=function(ur,dr,vr){return ur||dr||(ur=-96,dr=-96),ur<0&&(ur=-1*vr.width*72/ur/this.internal.scaleFactor),dr<0&&(dr=-1*vr.height*72/dr/this.internal.scaleFactor),ur===0&&(ur=dr*vr.width/vr.height),dr===0&&(dr=ur*vr.height/vr.width),[ur,dr]},We=function(ur,dr,vr,yr,br,lr){var cr=Ve.call(this,vr,yr,br),rr=this.internal.getCoordinateString,pr=this.internal.getVerticalCoordinateString,mr=Oe.call(this);if(vr=cr[0],yr=cr[1],mr[br.index]=br,lr){lr*=Math.PI/180;var ir=Math.cos(lr),nr=Math.sin(lr),gr=function(Cr){return Cr.toFixed(4)},Er=[gr(ir),gr(nr),gr(-1*nr),gr(ir),0,0,"cm"]}this.internal.write("q"),lr?(this.internal.write([1,"0","0",1,rr(ur),pr(dr+yr),"cm"].join(" ")),this.internal.write(Er.join(" ")),this.internal.write([rr(vr),"0","0",rr(yr),"0","0","cm"].join(" "))):this.internal.write([rr(vr),"0","0",rr(yr),rr(ur),pr(dr+yr),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+br.index+" Do"),this.internal.write("Q")},qe=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Ge=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Ye=e.__addimage__.sHashCode=function(ur){var dr,vr,yr=0;if(typeof ur=="string")for(vr=ur.length,dr=0;dr<vr;dr++)yr=(yr<<5)-yr+ur.charCodeAt(dr),yr|=0;else if(Ze(ur))for(vr=ur.byteLength/2,dr=0;dr<vr;dr++)yr=(yr<<5)-yr+ur[dr],yr|=0;return yr},Ke=e.__addimage__.validateStringAsBase64=function(ur){(ur=ur||"").toString().trim();var dr=!0;return ur.length===0&&(dr=!1),ur.length%4!=0&&(dr=!1),/^[A-Za-z0-9+/]+$/.test(ur.substr(0,ur.length-2))===!1&&(dr=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ur.substr(-2))===!1&&(dr=!1),dr},Xe=e.__addimage__.extractImageFromDataUrl=function(ur){if(ur==null||!(ur=ur.trim()).startsWith("data:"))return null;var dr=ur.indexOf(",");return dr<0?null:ur.substring(0,dr).trim().endsWith("base64")?ur.substring(dr+1):null};e.__addimage__.isArrayBuffer=function(ur){return ur instanceof ArrayBuffer};var Ze=e.__addimage__.isArrayBufferView=function(ur){return ur instanceof Int8Array||ur instanceof Uint8Array||ur instanceof Uint8ClampedArray||ur instanceof Int16Array||ur instanceof Uint16Array||ur instanceof Int32Array||ur instanceof Uint32Array||ur instanceof Float32Array||ur instanceof Float64Array},er=e.__addimage__.binaryStringToUint8Array=function(ur){for(var dr=ur.length,vr=new Uint8Array(dr),yr=0;yr<dr;yr++)vr[yr]=ur.charCodeAt(yr);return vr},St=e.__addimage__.arrayBufferToBinaryString=function(ur){for(var dr="",vr=Ze(ur)?ur:new Uint8Array(ur),yr=0;yr<vr.length;yr+=8192)dr+=String.fromCharCode.apply(null,vr.subarray(yr,yr+8192));return dr};e.addImage=function(){var ur,dr,vr,yr,br,lr,cr,rr,pr;if(typeof arguments[1]=="number"?(dr=n,vr=arguments[1],yr=arguments[2],br=arguments[3],lr=arguments[4],cr=arguments[5],rr=arguments[6],pr=arguments[7]):(dr=arguments[1],vr=arguments[2],yr=arguments[3],br=arguments[4],lr=arguments[5],cr=arguments[6],rr=arguments[7],pr=arguments[8]),_typeof(ur=arguments[0])==="object"&&!$e(ur)&&"imageData"in ur){var mr=ur;ur=mr.imageData,dr=mr.format||dr||n,vr=mr.x||vr||0,yr=mr.y||yr||0,br=mr.w||mr.width||br,lr=mr.h||mr.height||lr,cr=mr.alias||cr,rr=mr.compression||rr,pr=mr.rotation||mr.angle||pr}var ir=this.internal.getFilters();if(rr===void 0&&ir.indexOf("FlateEncode")!==-1&&(rr="SLOW"),isNaN(vr)||isNaN(yr))throw new Error("Invalid coordinates passed to jsPDF.addImage");De.call(this);var nr=ar.call(this,ur,dr,cr,rr);return We.call(this,vr,yr,br,lr,nr,pr),this};var ar=function(ur,dr,vr,yr){var br,lr,cr;if(typeof ur=="string"&&Re(ur)===n){ur=unescape(ur);var rr=hr(ur,!1);(rr!==""||(rr=e.loadFile(ur,!0))!==void 0)&&(ur=rr)}if($e(ur)&&(ur=He(ur,dr)),dr=Re(ur,dr),!ze(dr))throw new Error("addImage does not support files of type '"+dr+"', please ensure that a plugin for '"+dr+"' support is added.");if(((cr=vr)==null||cr.length===0)&&(vr=function(pr){return typeof pr=="string"||Ze(pr)?Ye(pr):Ze(pr.data)?Ye(pr.data):null}(ur)),(br=Ue.call(this,vr))||(ur instanceof Uint8Array||dr==="RGBA"||(lr=ur,ur=er(ur)),br=this["process"+dr.toUpperCase()](ur,Be.call(this),vr,function(pr){return pr&&typeof pr=="string"&&(pr=pr.toUpperCase()),pr in e.image_compression?pr:Ge.NONE}(yr),lr)),!br)throw new Error("An unknown error occurred whilst processing the image.");return br},hr=e.__addimage__.convertBase64ToBinaryString=function(ur,dr){dr=typeof dr!="boolean"||dr;var vr,yr="";if(typeof ur=="string"){var br;vr=(br=Xe(ur))!==null&&br!==void 0?br:ur;try{yr=f(vr)}catch(lr){if(dr)throw Ke(vr)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+lr.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return yr};e.getImageProperties=function(ur){var dr,vr,yr="";if($e(ur)&&(ur=He(ur)),typeof ur=="string"&&Re(ur)===n&&((yr=hr(ur,!1))===""&&(yr=e.loadFile(ur)||""),ur=yr),vr=Re(ur),!ze(vr))throw new Error("addImage does not support files of type '"+vr+"', please ensure that a plugin for '"+vr+"' support is added.");if(ur instanceof Uint8Array||(ur=er(ur)),!(dr=this["process"+vr.toUpperCase()](ur)))throw new Error("An unknown error occurred whilst processing the image");return dr.fileType=vr,dr}})(E.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};E.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var Ee,Re,Ce,Te=this.internal.getCoordinateString,Me=this.internal.getVerticalCoordinateString,De=this.internal.getPageInfoByObjId(n.objId),Oe=n.pageContext.annotations,Be=!1,ze=0;ze<Oe.length&&!Be;ze++)switch((Ee=Oe[ze]).type){case"link":(t(Ee.options.url)||t(Ee.options.pageNumber))&&(Be=!0);break;case"reference":case"text":case"freetext":Be=!0}if(Be!=0){this.internal.write("/Annots [");for(var $e=0;$e<Oe.length;$e++){Ee=Oe[$e];var He=this.internal.pdfEscape,Ue=this.internal.getEncryptor(n.objId);switch(Ee.type){case"reference":this.internal.write(" "+Ee.object.objId+" 0 R ");break;case"text":var Ve=this.internal.newAdditionalObject(),We=this.internal.newAdditionalObject(),qe=this.internal.getEncryptor(Ve.objId),Ge=Ee.title||"Note";Ce="<</Type /Annot /Subtype /Text "+(Re="/Rect ["+Te(Ee.bounds.x)+" "+Me(Ee.bounds.y+Ee.bounds.h)+" "+Te(Ee.bounds.x+Ee.bounds.w)+" "+Me(Ee.bounds.y)+"] ")+"/Contents ("+He(qe(Ee.contents))+")",Ce+=" /Popup "+We.objId+" 0 R",Ce+=" /P "+De.objId+" 0 R",Ce+=" /T ("+He(qe(Ge))+") >>",Ve.content=Ce;var Ye=Ve.objId+" 0 R";Ce="<</Type /Annot /Subtype /Popup "+(Re="/Rect ["+Te(Ee.bounds.x+30)+" "+Me(Ee.bounds.y+Ee.bounds.h)+" "+Te(Ee.bounds.x+Ee.bounds.w+30)+" "+Me(Ee.bounds.y)+"] ")+" /Parent "+Ye,Ee.open&&(Ce+=" /Open true"),Ce+=" >>",We.content=Ce,this.internal.write(Ve.objId,"0 R",We.objId,"0 R");break;case"freetext":Re="/Rect ["+Te(Ee.bounds.x)+" "+Me(Ee.bounds.y)+" "+Te(Ee.bounds.x+Ee.bounds.w)+" "+Me(Ee.bounds.y+Ee.bounds.h)+"] ";var Ke=Ee.color||"#000000";Ce="<</Type /Annot /Subtype /FreeText "+Re+"/Contents ("+He(Ue(Ee.contents))+")",Ce+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Ke+")",Ce+=" /Border [0 0 0]",Ce+=" >>",this.internal.write(Ce);break;case"link":if(Ee.options.name){var Xe=this.annotations._nameMap[Ee.options.name];Ee.options.pageNumber=Xe.page,Ee.options.top=Xe.y}else Ee.options.top||(Ee.options.top=0);if(Re="/Rect ["+Ee.finalBounds.x+" "+Ee.finalBounds.y+" "+Ee.finalBounds.w+" "+Ee.finalBounds.h+"] ",Ce="",Ee.options.url)Ce="<</Type /Annot /Subtype /Link "+Re+"/Border [0 0 0] /A <</S /URI /URI ("+He(Ue(Ee.options.url))+") >>";else if(Ee.options.pageNumber)switch(Ce="<</Type /Annot /Subtype /Link "+Re+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(Ee.options.pageNumber).objId+" 0 R",Ee.options.magFactor=Ee.options.magFactor||"XYZ",Ee.options.magFactor){case"Fit":Ce+=" /Fit]";break;case"FitH":Ce+=" /FitH "+Ee.options.top+"]";break;case"FitV":Ee.options.left=Ee.options.left||0,Ce+=" /FitV "+Ee.options.left+"]";break;default:var Ze=Me(Ee.options.top);Ee.options.left=Ee.options.left||0,Ee.options.zoom===void 0&&(Ee.options.zoom=0),Ce+=" /XYZ "+Ee.options.left+" "+Ze+" "+Ee.options.zoom+"]"}Ce!=""&&(Ce+=" >>",this.internal.write(Ce))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var Ee=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":Ee.pageContext.annotations.push(n)}},e.link=function(n,Ee,Re,Ce,Te){var Me=this.internal.getCurrentPageInfo(),De=this.internal.getCoordinateString,Oe=this.internal.getVerticalCoordinateString;Me.pageContext.annotations.push({finalBounds:{x:De(n),y:Oe(Ee),w:De(n+Re),h:Oe(Ee+Ce)},options:Te,type:"link"})},e.textWithLink=function(n,Ee,Re,Ce){var Te,Me,De=this.getTextWidth(n),Oe=this.internal.getLineHeight()/this.internal.scaleFactor;if(Ce.maxWidth!==void 0){Me=Ce.maxWidth;var Be=this.splitTextToSize(n,Me).length;Te=Math.ceil(Oe*Be)}else Me=De,Te=Oe;return this.text(n,Ee,Re,Ce),Re+=.2*Oe,Ce.align==="center"&&(Ee-=De/2),Ce.align==="right"&&(Ee-=De),this.link(Ee,Re-Oe,Me,Te,Ce),De},e.getTextWidth=function(n){var Ee=this.internal.getFontSize();return this.getStringUnitWidth(n)*Ee/this.internal.scaleFactor}}(E.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},Ee={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Re=[1570,1571,1573,1575];e.__arabicParser__={};var Ce=e.__arabicParser__.isInArabicSubstitutionA=function(Ve){return t[Ve.charCodeAt(0)]!==void 0},Te=e.__arabicParser__.isArabicLetter=function(Ve){return typeof Ve=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(Ve)},Me=e.__arabicParser__.isArabicEndLetter=function(Ve){return Te(Ve)&&Ce(Ve)&&t[Ve.charCodeAt(0)].length<=2},De=e.__arabicParser__.isArabicAlfLetter=function(Ve){return Te(Ve)&&Re.indexOf(Ve.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(Ve){return Te(Ve)&&Ce(Ve)&&t[Ve.charCodeAt(0)].length>=1};var Oe=e.__arabicParser__.arabicLetterHasFinalForm=function(Ve){return Te(Ve)&&Ce(Ve)&&t[Ve.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(Ve){return Te(Ve)&&Ce(Ve)&&t[Ve.charCodeAt(0)].length>=3};var Be=e.__arabicParser__.arabicLetterHasMedialForm=function(Ve){return Te(Ve)&&Ce(Ve)&&t[Ve.charCodeAt(0)].length==4},ze=e.__arabicParser__.resolveLigatures=function(Ve){var We=0,qe=n,Ge="",Ye=0;for(We=0;We<Ve.length;We+=1)qe[Ve.charCodeAt(We)]!==void 0?(Ye++,typeof(qe=qe[Ve.charCodeAt(We)])=="number"&&(Ge+=String.fromCharCode(qe),qe=n,Ye=0),We===Ve.length-1&&(qe=n,Ge+=Ve.charAt(We-(Ye-1)),We-=Ye-1,Ye=0)):(qe=n,Ge+=Ve.charAt(We-Ye),We-=Ye,Ye=0);return Ge};e.__arabicParser__.isArabicDiacritic=function(Ve){return Ve!==void 0&&Ee[Ve.charCodeAt(0)]!==void 0};var $e=e.__arabicParser__.getCorrectForm=function(Ve,We,qe){return Te(Ve)?Ce(Ve)===!1?-1:!Oe(Ve)||!Te(We)&&!Te(qe)||!Te(qe)&&Me(We)||Me(Ve)&&!Te(We)||Me(Ve)&&De(We)||Me(Ve)&&Me(We)?0:Be(Ve)&&Te(We)&&!Me(We)&&Te(qe)&&Oe(qe)?3:Me(Ve)||!Te(qe)?1:2:-1},He=function(Ve){var We=0,qe=0,Ge=0,Ye="",Ke="",Xe="",Ze=(Ve=Ve||"").split("\\s+"),er=[];for(We=0;We<Ze.length;We+=1){for(er.push(""),qe=0;qe<Ze[We].length;qe+=1)Ye=Ze[We][qe],Ke=Ze[We][qe-1],Xe=Ze[We][qe+1],Te(Ye)?(Ge=$e(Ye,Ke,Xe),er[We]+=Ge!==-1?String.fromCharCode(t[Ye.charCodeAt(0)][Ge]):Ye):er[We]+=Ye;er[We]=ze(er[We])}return er.join(" ")},Ue=e.__arabicParser__.processArabic=e.processArabic=function(){var Ve,We=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,qe=[];if(Array.isArray(We)){var Ge=0;for(qe=[],Ge=0;Ge<We.length;Ge+=1)Array.isArray(We[Ge])?qe.push([He(We[Ge][0]),We[Ge][1],We[Ge][2]]):qe.push([He(We[Ge])]);Ve=qe}else Ve=He(We);return typeof arguments[0]=="string"?Ve:(arguments[0].text=Ve,arguments[0])};e.events.push(["preProcessText",Ue])}(E.API),E.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(Me){n=Me}});var Ee=150;Object.defineProperty(this,"width",{get:function(){return Ee},set:function(Me){Ee=isNaN(Me)||Number.isInteger(Me)===!1||Me<0?150:Me,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=Ee+1)}});var Re=300;Object.defineProperty(this,"height",{get:function(){return Re},set:function(Me){Re=isNaN(Me)||Number.isInteger(Me)===!1||Me<0?300:Me,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Re+1)}});var Ce=[];Object.defineProperty(this,"childNodes",{get:function(){return Ce},set:function(Me){Ce=Me}});var Te={};Object.defineProperty(this,"style",{get:function(){return Te},set:function(Me){Te=Me}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,Ee){var Re;if((n=n||"2d")!=="2d")return null;for(Re in Ee)this.pdf.context2d.hasOwnProperty(Re)&&(this.pdf.context2d[Re]=Ee[Re]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(E.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,Ee=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),Re.call(this))},Re=function(){this.internal.__cell__.lastCell=new Ce,this.internal.__cell__.pages=1},Ce=function(){var De=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(Ve){De=Ve}});var Oe=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Oe},set:function(Ve){Oe=Ve}});var Be=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Be},set:function(Ve){Be=Ve}});var ze=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return ze},set:function(Ve){ze=Ve}});var $e=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return $e},set:function(Ve){$e=Ve}});var He=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return He},set:function(Ve){He=Ve}});var Ue=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Ue},set:function(Ve){Ue=Ve}}),this};Ce.prototype.clone=function(){return new Ce(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Ce.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(De){return Ee.call(this),this.internal.__cell__.headerFunction=typeof De=="function"?De:void 0,this},e.getTextDimensions=function(De,Oe){Ee.call(this);var Be=(Oe=Oe||{}).fontSize||this.getFontSize(),ze=Oe.font||this.getFont(),$e=Oe.scaleFactor||this.internal.scaleFactor,He=0,Ue=0,Ve=0,We=this;if(!Array.isArray(De)&&typeof De!="string"){if(typeof De!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");De=String(De)}var qe=Oe.maxWidth;qe>0?typeof De=="string"?De=this.splitTextToSize(De,qe):Object.prototype.toString.call(De)==="[object Array]"&&(De=De.reduce(function(Ye,Ke){return Ye.concat(We.splitTextToSize(Ke,qe))},[])):De=Array.isArray(De)?De:[De];for(var Ge=0;Ge<De.length;Ge++)He<(Ve=this.getStringUnitWidth(De[Ge],{font:ze})*Be)&&(He=Ve);return He!==0&&(Ue=De.length),{w:He/=$e,h:Math.max((Ue*Be*this.getLineHeightFactor()-Be*(this.getLineHeightFactor()-1))/$e,0)}},e.cellAddPage=function(){Ee.call(this),this.addPage();var De=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new Ce(De.left,De.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Te=e.cell=function(){var De;De=arguments[0]instanceof Ce?arguments[0]:new Ce(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),Ee.call(this);var Oe=this.internal.__cell__.lastCell,Be=this.internal.__cell__.padding,ze=this.internal.__cell__.margins||t,$e=this.internal.__cell__.tableHeaderRow,He=this.internal.__cell__.printHeaders;return Oe.lineNumber!==void 0&&(Oe.lineNumber===De.lineNumber?(De.x=(Oe.x||0)+(Oe.width||0),De.y=Oe.y||0):Oe.y+Oe.height+De.height+ze.bottom>this.getPageHeight()?(this.cellAddPage(),De.y=ze.top,He&&$e&&(this.printHeaderRow(De.lineNumber,!0),De.y+=$e[0].height)):De.y=Oe.y+Oe.height||De.y),De.text[0]!==void 0&&(this.rect(De.x,De.y,De.width,De.height,n===!0?"FD":void 0),De.align==="right"?this.text(De.text,De.x+De.width-Be,De.y+Be,{align:"right",baseline:"top"}):De.align==="center"?this.text(De.text,De.x+De.width/2,De.y+Be,{align:"center",baseline:"top",maxWidth:De.width-Be-Be}):this.text(De.text,De.x+Be,De.y+Be,{align:"left",baseline:"top",maxWidth:De.width-Be-Be})),this.internal.__cell__.lastCell=De,this};e.table=function(De,Oe,Be,ze,$e){if(Ee.call(this),!Be)throw new Error("No data for PDF table.");var He,Ue,Ve,We,qe=[],Ge=[],Ye=[],Ke={},Xe={},Ze=[],er=[],St=($e=$e||{}).autoSize||!1,ar=$e.printHeaders!==!1,hr=$e.css&&$e.css["font-size"]!==void 0?16*$e.css["font-size"]:$e.fontSize||12,ur=$e.margins||Object.assign({width:this.getPageWidth()},t),dr=typeof $e.padding=="number"?$e.padding:3,vr=$e.headerBackgroundColor||"#c8c8c8",yr=$e.headerTextColor||"#000";if(Re.call(this),this.internal.__cell__.printHeaders=ar,this.internal.__cell__.margins=ur,this.internal.__cell__.table_font_size=hr,this.internal.__cell__.padding=dr,this.internal.__cell__.headerBackgroundColor=vr,this.internal.__cell__.headerTextColor=yr,this.setFontSize(hr),ze==null)Ge=qe=Object.keys(Be[0]),Ye=qe.map(function(){return"left"});else if(Array.isArray(ze)&&_typeof(ze[0])==="object")for(qe=ze.map(function(mr){return mr.name}),Ge=ze.map(function(mr){return mr.prompt||mr.name||""}),Ye=ze.map(function(mr){return mr.align||"left"}),He=0;He<ze.length;He+=1)Xe[ze[He].name]=.7499990551181103*ze[He].width;else Array.isArray(ze)&&typeof ze[0]=="string"&&(Ge=qe=ze,Ye=qe.map(function(){return"left"}));if(St||Array.isArray(ze)&&typeof ze[0]=="string")for(He=0;He<qe.length;He+=1){for(Ke[We=qe[He]]=Be.map(function(mr){return mr[We]}),this.setFont(void 0,"bold"),Ze.push(this.getTextDimensions(Ge[He],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Ue=Ke[We],this.setFont(void 0,"normal"),Ve=0;Ve<Ue.length;Ve+=1)Ze.push(this.getTextDimensions(Ue[Ve],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Xe[We]=Math.max.apply(null,Ze)+dr+dr,Ze=[]}if(ar){var br={};for(He=0;He<qe.length;He+=1)br[qe[He]]={},br[qe[He]].text=Ge[He],br[qe[He]].align=Ye[He];var lr=Me.call(this,br,Xe);er=qe.map(function(mr){return new Ce(De,Oe,Xe[mr],lr,br[mr].text,void 0,br[mr].align)}),this.setTableHeaderRow(er),this.printHeaderRow(1,!1)}var cr=ze.reduce(function(mr,ir){return mr[ir.name]=ir.align,mr},{});for(He=0;He<Be.length;He+=1){"rowStart"in $e&&$e.rowStart instanceof Function&&$e.rowStart({row:He,data:Be[He]},this);var rr=Me.call(this,Be[He],Xe);for(Ve=0;Ve<qe.length;Ve+=1){var pr=Be[He][qe[Ve]];"cellStart"in $e&&$e.cellStart instanceof Function&&$e.cellStart({row:He,col:Ve,data:pr},this),Te.call(this,new Ce(De,Oe,Xe[qe[Ve]],rr,pr,He+2,cr[qe[Ve]]))}}return this.internal.__cell__.table_x=De,this.internal.__cell__.table_y=Oe,this};var Me=function(De,Oe){var Be=this.internal.__cell__.padding,ze=this.internal.__cell__.table_font_size,$e=this.internal.scaleFactor;return Object.keys(De).map(function(He){var Ue=De[He];return this.splitTextToSize(Ue.hasOwnProperty("text")?Ue.text:Ue,Oe[He]-Be-Be)},this).map(function(He){return this.getLineHeightFactor()*He.length*ze/$e+Be+Be},this).reduce(function(He,Ue){return Math.max(He,Ue)},0)};e.setTableHeaderRow=function(De){Ee.call(this),this.internal.__cell__.tableHeaderRow=De},e.printHeaderRow=function(De,Oe){if(Ee.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Be;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var ze=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Ce(ze[0],ze[1],ze[2],ze[3],void 0,-1)}this.setFont(void 0,"bold");for(var $e=[],He=0;He<this.internal.__cell__.tableHeaderRow.length;He+=1){Be=this.internal.__cell__.tableHeaderRow[He].clone(),Oe&&(Be.y=this.internal.__cell__.margins.top||0,$e.push(Be)),Be.lineNumber=De;var Ue=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Te.call(this,Be),this.setTextColor(Ue)}$e.length>0&&this.setTableHeaderRow($e),this.setFont(void 0,"normal"),n=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ft=_t(kt),It=[100,200,300,400,500,600,700,800,900],jt=_t(It);function Ct(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(Ce){return Pt[Ce=Ce||"normal"]?Ce:"normal"}(e.style),Ee=function(Ce){return Ce?typeof Ce=="number"?Ce>=100&&Ce<=900&&Ce%100==0?Ce:400:/^\d00$/.test(Ce)?parseInt(Ce):Ce==="bold"?700:400:400}(e.weight),Re=function(Ce){return typeof Ft[Ce=Ce||"normal"]=="number"?Ce:"normal"}(e.stretch);return{family:t,style:n,weight:Ee,stretch:Re,src:e.src||[],ref:e.ref||{name:t,style:[Re,n,Ee].join(" ")}}}function Ot(e,t,n,Ee){var Re;for(Re=n;Re>=0&&Re<t.length;Re+=Ee)if(e[t[Re]])return e[t[Re]];for(Re=n;Re>=0&&Re<t.length;Re-=Ee)if(e[t[Re]])return e[t[Re]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function qt(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Et(e){return e.trimLeft()}function Rt(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Dt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Tt,zt,Ut,Ht,Wt,Vt,Gt,Yt,Jt=["times"];function Xt(e,t,n,Ee,Re){var Ce=4,Te=$t;switch(Re){case E.API.image_compression.FAST:Ce=1,Te=Zt;break;case E.API.image_compression.MEDIUM:Ce=6,Te=Qt;break;case E.API.image_compression.SLOW:Ce=9,Te=te}e=function(De,Oe,Be,ze){for(var $e,He=De.length/Oe,Ue=new Uint8Array(De.length+He),Ve=[Kt,Zt,$t,Qt,te],We=0;We<He;We+=1){var qe=We*Oe,Ge=De.subarray(qe,qe+Oe);if(ze)Ue.set(ze(Ge,Be,$e),qe+We);else{for(var Ye=Ve.length,Ke=[],Xe=0;Xe<Ye;Xe+=1)Ke[Xe]=Ve[Xe](Ge,Be,$e);var Ze=ne(Ke.concat());Ue.set(Ke[Ze],qe+We)}$e=Ge}return Ue}(e,t,Math.ceil(n*Ee/8),Te);var Me=zlibSync(e,{level:Ce});return E.API.__addimage__.arrayBufferToBinaryString(Me)}function Kt(e){var t=Array.apply([],e);return t.unshift(0),t}function Zt(e,t){var n=e.length,Ee=[];Ee[0]=1;for(var Re=0;Re<n;Re+=1){var Ce=e[Re-t]||0;Ee[Re+1]=e[Re]-Ce+256&255}return Ee}function $t(e,t,n){var Ee=e.length,Re=[];Re[0]=2;for(var Ce=0;Ce<Ee;Ce+=1){var Te=n&&n[Ce]||0;Re[Ce+1]=e[Ce]-Te+256&255}return Re}function Qt(e,t,n){var Ee=e.length,Re=[];Re[0]=3;for(var Ce=0;Ce<Ee;Ce+=1){var Te=e[Ce-t]||0,Me=n&&n[Ce]||0;Re[Ce+1]=e[Ce]+256-(Te+Me>>>1)&255}return Re}function te(e,t,n){var Ee=e.length,Re=[];Re[0]=4;for(var Ce=0;Ce<Ee;Ce+=1){var Te=ee(e[Ce-t]||0,n&&n[Ce]||0,n&&n[Ce-t]||0);Re[Ce+1]=e[Ce]-Te+256&255}return Re}function ee(e,t,n){if(e===t&&t===n)return e;var Ee=Math.abs(t-n),Re=Math.abs(e-n),Ce=Math.abs(e+t-n-n);return Ee<=Re&&Ee<=Ce?e:Re<=Ce?t:n}function ne(e){var t=e.map(function(n){return n.reduce(function(Ee,Re){return Ee+Math.abs(Re)},0)});return t.indexOf(Math.min.apply(null,t))}function re(e,t,n){var Ee=t*n,Re=Math.floor(Ee/8),Ce=16-(Ee-8*Re+n),Te=(1<<n)-1;return ae(e,Re)>>Ce&Te}function ie$2(e,t,n,Ee){var Re=n*Ee,Ce=Math.floor(Re/8),Te=16-(Re-8*Ce+Ee),Me=(1<<Ee)-1,De=(t&Me)<<Te;(function(Oe,Be,ze){if(Be+1<Oe.byteLength)Oe.setUint16(Be,ze,!1);else{var $e=ze>>8&255;Oe.setUint8(Be,$e)}})(e,Ce,ae(e,Ce)&~(Me<<Te)&65535|De)}function ae(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function oe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,Ee=e[t++]|e[t++]<<8,Re=e[t++],Ce=Re>>7,Te=1<<1+(7&Re);e[t++],e[t++];var Me=null,De=null;Ce&&(Me=t,De=Te,t+=3*Te);var Oe=!0,Be=[],ze=0,$e=null,He=0,Ue=null;for(this.width=n,this.height=Ee;Oe&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,Ue=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((ur=e[t++])>=0))throw Error("Invalid block size");if(ur===0)break;t+=ur}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var Ve=e[t++];ze=e[t++]|e[t++]<<8,$e=e[t++],1&Ve||($e=null),He=Ve>>2&7,t++;break;case 254:for(;;){if(!((ur=e[t++])>=0))throw Error("Invalid block size");if(ur===0)break;t+=ur}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var We=e[t++]|e[t++]<<8,qe=e[t++]|e[t++]<<8,Ge=e[t++]|e[t++]<<8,Ye=e[t++]|e[t++]<<8,Ke=e[t++],Xe=Ke>>6&1,Ze=1<<1+(7&Ke),er=Me,St=De,ar=!1;Ke>>7&&(ar=!0,er=t,St=Ze,t+=3*Ze);var hr=t;for(t++;;){var ur;if(!((ur=e[t++])>=0))throw Error("Invalid block size");if(ur===0)break;t+=ur}Be.push({x:We,y:qe,width:Ge,height:Ye,has_local_palette:ar,palette_offset:er,palette_size:St,data_offset:hr,data_length:t-hr,transparent_index:$e,interlaced:!!Xe,delay:ze,disposal:He});break;case 59:Oe=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return Be.length},this.loopCount=function(){return Ue},this.frameInfo=function(dr){if(dr<0||dr>=Be.length)throw new Error("Frame index out of range.");return Be[dr]},this.decodeAndBlitFrameBGRA=function(dr,vr){var yr=this.frameInfo(dr),br=yr.width*yr.height,lr=new Uint8Array(br);se(e,yr.data_offset,lr,br);var cr=yr.palette_offset,rr=yr.transparent_index;rr===null&&(rr=256);var pr=yr.width,mr=n-pr,ir=pr,nr=4*(yr.y*n+yr.x),gr=4*((yr.y+yr.height)*n+yr.x),Er=nr,Cr=4*mr;yr.interlaced===!0&&(Cr+=4*n*7);for(var Nr=8,Mr=0,Fr=lr.length;Mr<Fr;++Mr){var $r=lr[Mr];if(ir===0&&(ir=pr,(Er+=Cr)>=gr&&(Cr=4*mr+4*n*(Nr-1),Er=nr+(pr+mr)*(Nr<<1),Nr>>=1)),$r===rr)Er+=4;else{var Wr=e[cr+3*$r],Zr=e[cr+3*$r+1],nn=e[cr+3*$r+2];vr[Er++]=nn,vr[Er++]=Zr,vr[Er++]=Wr,vr[Er++]=255}--ir}},this.decodeAndBlitFrameRGBA=function(dr,vr){var yr=this.frameInfo(dr),br=yr.width*yr.height,lr=new Uint8Array(br);se(e,yr.data_offset,lr,br);var cr=yr.palette_offset,rr=yr.transparent_index;rr===null&&(rr=256);var pr=yr.width,mr=n-pr,ir=pr,nr=4*(yr.y*n+yr.x),gr=4*((yr.y+yr.height)*n+yr.x),Er=nr,Cr=4*mr;yr.interlaced===!0&&(Cr+=4*n*7);for(var Nr=8,Mr=0,Fr=lr.length;Mr<Fr;++Mr){var $r=lr[Mr];if(ir===0&&(ir=pr,(Er+=Cr)>=gr&&(Cr=4*mr+4*n*(Nr-1),Er=nr+(pr+mr)*(Nr<<1),Nr>>=1)),$r===rr)Er+=4;else{var Wr=e[cr+3*$r],Zr=e[cr+3*$r+1],nn=e[cr+3*$r+2];vr[Er++]=Wr,vr[Er++]=Zr,vr[Er++]=nn,vr[Er++]=255}--ir}}}function se(e,t,n,Ee){for(var Re=e[t++],Ce=1<<Re,Te=Ce+1,Me=Te+1,De=Re+1,Oe=(1<<De)-1,Be=0,ze=0,$e=0,He=e[t++],Ue=new Int32Array(4096),Ve=null;;){for(;Be<16&&He!==0;)ze|=e[t++]<<Be,Be+=8,He===1?He=e[t++]:--He;if(Be<De)break;var We=ze&Oe;if(ze>>=De,Be-=De,We!==Ce){if(We===Te)break;for(var qe=We<Me?We:Ve,Ge=0,Ye=qe;Ye>Ce;)Ye=Ue[Ye]>>8,++Ge;var Ke=Ye;if($e+Ge+(qe!==We?1:0)>Ee)return void o.log("Warning, gif stream longer than expected.");n[$e++]=Ke;var Xe=$e+=Ge;for(qe!==We&&(n[$e++]=Ke),Ye=qe;Ge--;)Ye=Ue[Ye],n[--Xe]=255&Ye,Ye>>=8;Ve!==null&&Me<4096&&(Ue[Me++]=Ve<<8|Ke,Me>=Oe+1&&De<12&&(++De,Oe=Oe<<1|1)),Ve=We}else Me=Te+1,Oe=(1<<(De=Re+1))-1,Ve=null}return $e!==Ee&&o.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function ue(e){var t,n,Ee,Re,Ce,Te=Math.floor,Me=new Array(64),De=new Array(64),Oe=new Array(64),Be=new Array(64),ze=new Array(65535),$e=new Array(65535),He=new Array(64),Ue=new Array(64),Ve=[],We=0,qe=7,Ge=new Array(64),Ye=new Array(64),Ke=new Array(64),Xe=new Array(256),Ze=new Array(2048),er=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],St=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ar=[0,1,2,3,4,5,6,7,8,9,10,11],hr=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ur=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],dr=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],vr=[0,1,2,3,4,5,6,7,8,9,10,11],yr=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],br=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function lr(nr,gr){for(var Er=0,Cr=0,Nr=new Array,Mr=1;Mr<=16;Mr++){for(var Fr=1;Fr<=nr[Mr];Fr++)Nr[gr[Cr]]=[],Nr[gr[Cr]][0]=Er,Nr[gr[Cr]][1]=Mr,Cr++,Er++;Er*=2}return Nr}function cr(nr){for(var gr=nr[0],Er=nr[1]-1;Er>=0;)gr&1<<Er&&(We|=1<<qe),Er--,--qe<0&&(We==255?(rr(255),rr(0)):rr(We),qe=7,We=0)}function rr(nr){Ve.push(nr)}function pr(nr){rr(nr>>8&255),rr(255&nr)}function mr(nr,gr,Er,Cr,Nr){for(var Mr,Fr=Nr[0],$r=Nr[240],Wr=function(rn,_r){var Lr,Or,tn,sn,en,fn,Sn,Rn,jn,On,Nn=0;for(jn=0;jn<8;++jn){Lr=rn[Nn],Or=rn[Nn+1],tn=rn[Nn+2],sn=rn[Nn+3],en=rn[Nn+4],fn=rn[Nn+5],Sn=rn[Nn+6];var js=Lr+(Rn=rn[Nn+7]),qn=Lr-Rn,Gn=Or+Sn,Xn=Or-Sn,xs=tn+fn,Bn=tn-fn,fs=sn+en,Hn=sn-en,Yn=js+fs,Es=js-fs,Zn=Gn+xs,Un=Gn-xs;rn[Nn]=Yn+Zn,rn[Nn+4]=Yn-Zn;var ds=.707106781*(Un+Es);rn[Nn+2]=Es+ds,rn[Nn+6]=Es-ds;var Ua=.382683433*((Yn=Hn+Bn)-(Un=Xn+qn)),zs=.5411961*Yn+Ua,oa=1.306562965*Un+Ua,ra=.707106781*(Zn=Bn+Xn),Vn=qn+ra,ka=qn-ra;rn[Nn+5]=ka+zs,rn[Nn+3]=ka-zs,rn[Nn+1]=Vn+oa,rn[Nn+7]=Vn-oa,Nn+=8}for(Nn=0,jn=0;jn<8;++jn){Lr=rn[Nn],Or=rn[Nn+8],tn=rn[Nn+16],sn=rn[Nn+24],en=rn[Nn+32],fn=rn[Nn+40],Sn=rn[Nn+48];var Br=Lr+(Rn=rn[Nn+56]),Vr=Lr-Rn,Jr=Or+Sn,dn=Or-Sn,bn=tn+fn,Cn=tn-fn,zn=sn+en,Tn=sn-en,An=Br+zn,kn=Br-zn,_n=Jr+bn,$n=Jr-bn;rn[Nn]=An+_n,rn[Nn+32]=An-_n;var Wn=.707106781*($n+kn);rn[Nn+16]=kn+Wn,rn[Nn+48]=kn-Wn;var Cs=.382683433*((An=Tn+Cn)-($n=dn+Vr)),ls=.5411961*An+Cs,ss=1.306562965*$n+Cs,ys=.707106781*(_n=Cn+dn),ua=Vr+ys,Ea=Vr-ys;rn[Nn+40]=Ea+ls,rn[Nn+24]=Ea-ls,rn[Nn+8]=ua+ss,rn[Nn+56]=ua-ss,Nn++}for(jn=0;jn<64;++jn)On=rn[jn]*_r[jn],He[jn]=On>0?On+.5|0:On-.5|0;return He}(nr,gr),Zr=0;Zr<64;++Zr)Ue[er[Zr]]=Wr[Zr];var nn=Ue[0]-Er;Er=Ue[0],nn==0?cr(Cr[0]):(cr(Cr[$e[Mr=32767+nn]]),cr(ze[Mr]));for(var an=63;an>0&&Ue[an]==0;)an--;if(an==0)return cr(Fr),Er;for(var Yr,Rr=1;Rr<=an;){for(var Xr=Rr;Ue[Rr]==0&&Rr<=an;)++Rr;var mn=Rr-Xr;if(mn>=16){Yr=mn>>4;for(var En=1;En<=Yr;++En)cr($r);mn&=15}Mr=32767+Ue[Rr],cr(Nr[(mn<<4)+$e[Mr]]),cr(ze[Mr]),Rr++}return an!=63&&cr(Fr),Er}function ir(nr){nr=Math.min(Math.max(nr,1),100),Ce!=nr&&(function(gr){for(var Er=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Cr=0;Cr<64;Cr++){var Nr=Te((Er[Cr]*gr+50)/100);Nr=Math.min(Math.max(Nr,1),255),Me[er[Cr]]=Nr}for(var Mr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Fr=0;Fr<64;Fr++){var $r=Te((Mr[Fr]*gr+50)/100);$r=Math.min(Math.max($r,1),255),De[er[Fr]]=$r}for(var Wr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Zr=0,nn=0;nn<8;nn++)for(var an=0;an<8;an++)Oe[Zr]=1/(Me[er[Zr]]*Wr[nn]*Wr[an]*8),Be[Zr]=1/(De[er[Zr]]*Wr[nn]*Wr[an]*8),Zr++}(nr<50?Math.floor(5e3/nr):Math.floor(200-2*nr)),Ce=nr)}this.encode=function(nr,gr){gr&&ir(gr),Ve=new Array,We=0,qe=7,pr(65496),pr(65504),pr(16),rr(74),rr(70),rr(73),rr(70),rr(0),rr(1),rr(1),rr(0),pr(1),pr(1),rr(0),rr(0),function(){pr(65499),pr(132),rr(0);for(var Or=0;Or<64;Or++)rr(Me[Or]);rr(1);for(var tn=0;tn<64;tn++)rr(De[tn])}(),function(Or,tn){pr(65472),pr(17),rr(8),pr(tn),pr(Or),rr(3),rr(1),rr(17),rr(0),rr(2),rr(17),rr(1),rr(3),rr(17),rr(1)}(nr.width,nr.height),function(){pr(65476),pr(418),rr(0);for(var Or=0;Or<16;Or++)rr(St[Or+1]);for(var tn=0;tn<=11;tn++)rr(ar[tn]);rr(16);for(var sn=0;sn<16;sn++)rr(hr[sn+1]);for(var en=0;en<=161;en++)rr(ur[en]);rr(1);for(var fn=0;fn<16;fn++)rr(dr[fn+1]);for(var Sn=0;Sn<=11;Sn++)rr(vr[Sn]);rr(17);for(var Rn=0;Rn<16;Rn++)rr(yr[Rn+1]);for(var jn=0;jn<=161;jn++)rr(br[jn])}(),pr(65498),pr(12),rr(3),rr(1),rr(0),rr(2),rr(17),rr(3),rr(17),rr(0),rr(63),rr(0);var Er=0,Cr=0,Nr=0;We=0,qe=7,this.encode.displayName="_encode_";for(var Mr,Fr,$r,Wr,Zr,nn,an,Yr,Rr,Xr=nr.data,mn=nr.width,En=nr.height,rn=4*mn,_r=0;_r<En;){for(Mr=0;Mr<rn;){for(Zr=rn*_r+Mr,an=-1,Yr=0,Rr=0;Rr<64;Rr++)nn=Zr+(Yr=Rr>>3)*rn+(an=4*(7&Rr)),_r+Yr>=En&&(nn-=rn*(_r+1+Yr-En)),Mr+an>=rn&&(nn-=Mr+an-rn+4),Fr=Xr[nn++],$r=Xr[nn++],Wr=Xr[nn++],Ge[Rr]=(Ze[Fr]+Ze[$r+256|0]+Ze[Wr+512|0]>>16)-128,Ye[Rr]=(Ze[Fr+768|0]+Ze[$r+1024|0]+Ze[Wr+1280|0]>>16)-128,Ke[Rr]=(Ze[Fr+1280|0]+Ze[$r+1536|0]+Ze[Wr+1792|0]>>16)-128;Er=mr(Ge,Oe,Er,t,Ee),Cr=mr(Ye,Be,Cr,n,Re),Nr=mr(Ke,Be,Nr,n,Re),Mr+=32}_r+=8}if(qe>=0){var Lr=[];Lr[1]=qe+1,Lr[0]=(1<<qe+1)-1,cr(Lr)}return pr(65497),new Uint8Array(Ve)},e=e||50,function(){for(var nr=String.fromCharCode,gr=0;gr<256;gr++)Xe[gr]=nr(gr)}(),t=lr(St,ar),n=lr(dr,vr),Ee=lr(hr,ur),Re=lr(yr,br),function(){for(var nr=1,gr=2,Er=1;Er<=15;Er++){for(var Cr=nr;Cr<gr;Cr++)$e[32767+Cr]=Er,ze[32767+Cr]=[],ze[32767+Cr][1]=Er,ze[32767+Cr][0]=Cr;for(var Nr=-(gr-1);Nr<=-nr;Nr++)$e[32767+Nr]=Er,ze[32767+Nr]=[],ze[32767+Nr][1]=Er,ze[32767+Nr][0]=gr-1+Nr;nr<<=1,gr<<=1}}(),function(){for(var nr=0;nr<256;nr++)Ze[nr]=19595*nr,Ze[nr+256|0]=38470*nr,Ze[nr+512|0]=7471*nr+32768,Ze[nr+768|0]=-11059*nr,Ze[nr+1024|0]=-21709*nr,Ze[nr+1280|0]=32768*nr+8421375,Ze[nr+1536|0]=-27439*nr,Ze[nr+1792|0]=-5329*nr}(),ir(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ce(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function le(e){function t(ar){if(!ar)throw Error("assert :P")}function n(ar,hr,ur){for(var dr=0;4>dr;dr++)if(ar[hr+dr]!=ur.charCodeAt(dr))return!0;return!1}function Ee(ar,hr,ur,dr,vr){for(var yr=0;yr<vr;yr++)ar[hr+yr]=ur[dr+yr]}function Re(ar,hr,ur,dr){for(var vr=0;vr<dr;vr++)ar[hr+vr]=ur}function Ce(ar){return new Int32Array(ar)}function Te(ar,hr){for(var ur=[],dr=0;dr<ar;dr++)ur.push(new hr);return ur}function Me(ar,hr){var ur=[];return function dr(vr,yr,br){for(var lr=br[yr],cr=0;cr<lr&&(vr.push(br.length>yr+1?[]:new hr),!(br.length<yr+1));cr++)dr(vr[cr],yr+1,br)}(ur,0,ar),ur}var De=function(){var ar=this;function hr(Qe,Je){for(var or=1<<Je-1>>>0;Qe&or;)or>>>=1;return or?(Qe&or-1)+or:Qe}function ur(Qe,Je,or,xr,Sr){t(!(xr%or));do Qe[Je+(xr-=or)]=Sr;while(0<xr)}function dr(Qe,Je,or,xr,Sr){if(t(2328>=Sr),512>=Sr)var wr=Ce(512);else if((wr=Ce(Sr))==null)return 0;return function(kr,Ar,Tr,Pr,zr,Qr){var Dr,Ur,Gr=Ar,on=1<<Tr,Kr=Ce(16),un=Ce(16);for(t(zr!=0),t(Pr!=null),t(kr!=null),t(0<Tr),Ur=0;Ur<zr;++Ur){if(15<Pr[Ur])return 0;++Kr[Pr[Ur]]}if(Kr[0]==zr)return 0;for(un[1]=0,Dr=1;15>Dr;++Dr){if(Kr[Dr]>1<<Dr)return 0;un[Dr+1]=un[Dr]+Kr[Dr]}for(Ur=0;Ur<zr;++Ur)Dr=Pr[Ur],0<Pr[Ur]&&(Qr[un[Dr]++]=Ur);if(un[15]==1)return(Pr=new vr).g=0,Pr.value=Qr[0],ur(kr,Gr,1,on,Pr),on;var hn,yn=-1,gn=on-1,Fn=0,Mn=1,rs=1,Dn=1<<Tr;for(Ur=0,Dr=1,zr=2;Dr<=Tr;++Dr,zr<<=1){if(Mn+=rs<<=1,0>(rs-=Kr[Dr]))return 0;for(;0<Kr[Dr];--Kr[Dr])(Pr=new vr).g=Dr,Pr.value=Qr[Ur++],ur(kr,Gr+Fn,zr,Dn,Pr),Fn=hr(Fn,Dr)}for(Dr=Tr+1,zr=2;15>=Dr;++Dr,zr<<=1){if(Mn+=rs<<=1,0>(rs-=Kr[Dr]))return 0;for(;0<Kr[Dr];--Kr[Dr]){if(Pr=new vr,(Fn&gn)!=yn){for(Gr+=Dn,hn=1<<(yn=Dr)-Tr;15>yn&&!(0>=(hn-=Kr[yn]));)++yn,hn<<=1;on+=Dn=1<<(hn=yn-Tr),kr[Ar+(yn=Fn&gn)].g=hn+Tr,kr[Ar+yn].value=Gr-Ar-yn}Pr.g=Dr-Tr,Pr.value=Qr[Ur++],ur(kr,Gr+(Fn>>Tr),zr,Dn,Pr),Fn=hr(Fn,Dr)}}return Mn!=2*un[15]-1?0:on}(Qe,Je,or,xr,Sr,wr)}function vr(){this.value=this.g=0}function yr(){this.value=this.g=0}function br(){this.G=Te(5,vr),this.H=Ce(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Te(Mi,yr)}function lr(Qe,Je,or,xr){t(Qe!=null),t(Je!=null),t(2147483648>xr),Qe.Ca=254,Qe.I=0,Qe.b=-8,Qe.Ka=0,Qe.oa=Je,Qe.pa=or,Qe.Jd=Je,Qe.Yc=or+xr,Qe.Zc=4<=xr?or+xr-4+1:or,Fr(Qe)}function cr(Qe,Je){for(var or=0;0<Je--;)or|=Wr(Qe,128)<<Je;return or}function rr(Qe,Je){var or=cr(Qe,Je);return $r(Qe)?-or:or}function pr(Qe,Je,or,xr){var Sr,wr=0;for(t(Qe!=null),t(Je!=null),t(4294967288>xr),Qe.Sb=xr,Qe.Ra=0,Qe.u=0,Qe.h=0,4<xr&&(xr=4),Sr=0;Sr<xr;++Sr)wr+=Je[or+Sr]<<8*Sr;Qe.Ra=wr,Qe.bb=xr,Qe.oa=Je,Qe.pa=or}function mr(Qe){for(;8<=Qe.u&&Qe.bb<Qe.Sb;)Qe.Ra>>>=8,Qe.Ra+=Qe.oa[Qe.pa+Qe.bb]<<ui-8>>>0,++Qe.bb,Qe.u-=8;Cr(Qe)&&(Qe.h=1,Qe.u=0)}function ir(Qe,Je){if(t(0<=Je),!Qe.h&&Je<=fa){var or=Er(Qe)&ha[Je];return Qe.u+=Je,mr(Qe),or}return Qe.h=1,Qe.u=0}function nr(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function gr(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Er(Qe){return Qe.Ra>>>(Qe.u&ui-1)>>>0}function Cr(Qe){return t(Qe.bb<=Qe.Sb),Qe.h||Qe.bb==Qe.Sb&&Qe.u>ui}function Nr(Qe,Je){Qe.u=Je,Qe.h=Cr(Qe)}function Mr(Qe){Qe.u>=ti&&(t(Qe.u>=ti),mr(Qe))}function Fr(Qe){t(Qe!=null&&Qe.oa!=null),Qe.pa<Qe.Zc?(Qe.I=(Qe.oa[Qe.pa++]|Qe.I<<8)>>>0,Qe.b+=8):(t(Qe!=null&&Qe.oa!=null),Qe.pa<Qe.Yc?(Qe.b+=8,Qe.I=Qe.oa[Qe.pa++]|Qe.I<<8):Qe.Ka?Qe.b=0:(Qe.I<<=8,Qe.b+=8,Qe.Ka=1))}function $r(Qe){return cr(Qe,1)}function Wr(Qe,Je){var or=Qe.Ca;0>Qe.b&&Fr(Qe);var xr=Qe.b,Sr=or*Je>>>8,wr=(Qe.I>>>xr>Sr)+0;for(wr?(or-=Sr,Qe.I-=Sr+1<<xr>>>0):or=Sr+1,xr=or,Sr=0;256<=xr;)Sr+=8,xr>>=8;return xr=7^Sr+di[xr],Qe.b-=xr,Qe.Ca=(or<<xr)-1,wr}function Zr(Qe,Je,or){Qe[Je+0]=or>>24&255,Qe[Je+1]=or>>16&255,Qe[Je+2]=or>>8&255,Qe[Je+3]=255&or}function nn(Qe,Je){return Qe[Je+0]|Qe[Je+1]<<8}function an(Qe,Je){return nn(Qe,Je)|Qe[Je+2]<<16}function Yr(Qe,Je){return nn(Qe,Je)|nn(Qe,Je+2)<<16}function Rr(Qe,Je){var or=1<<Je;return t(Qe!=null),t(0<Je),Qe.X=Ce(or),Qe.X==null?0:(Qe.Mb=32-Je,Qe.Xa=Je,1)}function Xr(Qe,Je){t(Qe!=null),t(Je!=null),t(Qe.Xa==Je.Xa),Ee(Je.X,0,Qe.X,0,1<<Je.Xa)}function mn(){this.X=[],this.Xa=this.Mb=0}function En(Qe,Je,or,xr){t(or!=null),t(xr!=null);var Sr=or[0],wr=xr[0];return Sr==0&&(Sr=(Qe*wr+Je/2)/Je),wr==0&&(wr=(Je*Sr+Qe/2)/Qe),0>=Sr||0>=wr?0:(or[0]=Sr,xr[0]=wr,1)}function rn(Qe,Je){return Qe+(1<<Je)-1>>>Je}function _r(Qe,Je){return((4278255360&Qe)+(4278255360&Je)>>>0&4278255360)+((16711935&Qe)+(16711935&Je)>>>0&16711935)>>>0}function Lr(Qe,Je){ar[Je]=function(or,xr,Sr,wr,kr,Ar,Tr){var Pr;for(Pr=0;Pr<kr;++Pr){var zr=ar[Qe](Ar[Tr+Pr-1],Sr,wr+Pr);Ar[Tr+Pr]=_r(or[xr+Pr],zr)}}}function Or(){this.ud=this.hd=this.jd=0}function tn(Qe,Je){return((4278124286&(Qe^Je))>>>1)+(Qe&Je)>>>0}function sn(Qe){return 0<=Qe&&256>Qe?Qe:0>Qe?0:255<Qe?255:void 0}function en(Qe,Je){return sn(Qe+(Qe-Je+.5>>1))}function fn(Qe,Je,or){return Math.abs(Je-or)-Math.abs(Qe-or)}function Sn(Qe,Je,or,xr,Sr,wr,kr){for(xr=wr[kr-1],or=0;or<Sr;++or)wr[kr+or]=xr=_r(Qe[Je+or],xr)}function Rn(Qe,Je,or,xr,Sr){var wr;for(wr=0;wr<or;++wr){var kr=Qe[Je+wr],Ar=kr>>8&255,Tr=16711935&(Tr=(Tr=16711935&kr)+((Ar<<16)+Ar));xr[Sr+wr]=(4278255360&kr)+Tr>>>0}}function jn(Qe,Je){Je.jd=255&Qe,Je.hd=Qe>>8&255,Je.ud=Qe>>16&255}function On(Qe,Je,or,xr,Sr,wr){var kr;for(kr=0;kr<xr;++kr){var Ar=Je[or+kr],Tr=Ar>>>8,Pr=Ar,zr=255&(zr=(zr=Ar>>>16)+((Qe.jd<<24>>24)*(Tr<<24>>24)>>>5));Pr=255&(Pr=(Pr+=(Qe.hd<<24>>24)*(Tr<<24>>24)>>>5)+((Qe.ud<<24>>24)*(zr<<24>>24)>>>5)),Sr[wr+kr]=(4278255360&Ar)+(zr<<16)+Pr}}function Nn(Qe,Je,or,xr,Sr){ar[Je]=function(wr,kr,Ar,Tr,Pr,zr,Qr,Dr,Ur){for(Tr=Qr;Tr<Dr;++Tr)for(Qr=0;Qr<Ur;++Qr)Pr[zr++]=Sr(Ar[xr(wr[kr++])])},ar[Qe]=function(wr,kr,Ar,Tr,Pr,zr,Qr){var Dr=8>>wr.b,Ur=wr.Ea,Gr=wr.K[0],on=wr.w;if(8>Dr)for(wr=(1<<wr.b)-1,on=(1<<Dr)-1;kr<Ar;++kr){var Kr,un=0;for(Kr=0;Kr<Ur;++Kr)Kr&wr||(un=xr(Tr[Pr++])),zr[Qr++]=Sr(Gr[un&on]),un>>=Dr}else ar["VP8LMapColor"+or](Tr,Pr,Gr,on,zr,Qr,kr,Ar,Ur)}}function js(Qe,Je,or,xr,Sr){for(or=Je+or;Je<or;){var wr=Qe[Je++];xr[Sr++]=wr>>16&255,xr[Sr++]=wr>>8&255,xr[Sr++]=255&wr}}function qn(Qe,Je,or,xr,Sr){for(or=Je+or;Je<or;){var wr=Qe[Je++];xr[Sr++]=wr>>16&255,xr[Sr++]=wr>>8&255,xr[Sr++]=255&wr,xr[Sr++]=wr>>24&255}}function Gn(Qe,Je,or,xr,Sr){for(or=Je+or;Je<or;){var wr=(kr=Qe[Je++])>>16&240|kr>>12&15,kr=240&kr|kr>>28&15;xr[Sr++]=wr,xr[Sr++]=kr}}function Xn(Qe,Je,or,xr,Sr){for(or=Je+or;Je<or;){var wr=(kr=Qe[Je++])>>16&248|kr>>13&7,kr=kr>>5&224|kr>>3&31;xr[Sr++]=wr,xr[Sr++]=kr}}function xs(Qe,Je,or,xr,Sr){for(or=Je+or;Je<or;){var wr=Qe[Je++];xr[Sr++]=255&wr,xr[Sr++]=wr>>8&255,xr[Sr++]=wr>>16&255}}function Bn(Qe,Je,or,xr,Sr,wr){if(wr==0)for(or=Je+or;Je<or;)Zr(xr,((wr=Qe[Je++])[0]>>24|wr[1]>>8&65280|wr[2]<<8&16711680|wr[3]<<24)>>>0),Sr+=32;else Ee(xr,Sr,Qe,Je,or)}function fs(Qe,Je){ar[Je][0]=ar[Qe+"0"],ar[Je][1]=ar[Qe+"1"],ar[Je][2]=ar[Qe+"2"],ar[Je][3]=ar[Qe+"3"],ar[Je][4]=ar[Qe+"4"],ar[Je][5]=ar[Qe+"5"],ar[Je][6]=ar[Qe+"6"],ar[Je][7]=ar[Qe+"7"],ar[Je][8]=ar[Qe+"8"],ar[Je][9]=ar[Qe+"9"],ar[Je][10]=ar[Qe+"10"],ar[Je][11]=ar[Qe+"11"],ar[Je][12]=ar[Qe+"12"],ar[Je][13]=ar[Qe+"13"],ar[Je][14]=ar[Qe+"0"],ar[Je][15]=ar[Qe+"0"]}function Hn(Qe){return Qe==dl||Qe==pl||Qe==Fo||Qe==hl}function Yn(){this.eb=[],this.size=this.A=this.fb=0}function Es(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Zn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Yn,this.f.kb=new Es,this.sd=null}function Un(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ds(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ua(Qe){return alert("todo:WebPSamplerProcessPlane"),Qe.T}function zs(Qe,Je){var or=Qe.T,xr=Je.ba.f.RGBA,Sr=xr.eb,wr=xr.fb+Qe.ka*xr.A,kr=Na[Je.ba.S],Ar=Qe.y,Tr=Qe.O,Pr=Qe.f,zr=Qe.N,Qr=Qe.ea,Dr=Qe.W,Ur=Je.cc,Gr=Je.dc,on=Je.Mc,Kr=Je.Nc,un=Qe.ka,hn=Qe.ka+Qe.T,yn=Qe.U,gn=yn+1>>1;for(un==0?kr(Ar,Tr,null,null,Pr,zr,Qr,Dr,Pr,zr,Qr,Dr,Sr,wr,null,null,yn):(kr(Je.ec,Je.fc,Ar,Tr,Ur,Gr,on,Kr,Pr,zr,Qr,Dr,Sr,wr-xr.A,Sr,wr,yn),++or);un+2<hn;un+=2)Ur=Pr,Gr=zr,on=Qr,Kr=Dr,zr+=Qe.Rc,Dr+=Qe.Rc,wr+=2*xr.A,kr(Ar,(Tr+=2*Qe.fa)-Qe.fa,Ar,Tr,Ur,Gr,on,Kr,Pr,zr,Qr,Dr,Sr,wr-xr.A,Sr,wr,yn);return Tr+=Qe.fa,Qe.j+hn<Qe.o?(Ee(Je.ec,Je.fc,Ar,Tr,yn),Ee(Je.cc,Je.dc,Pr,zr,gn),Ee(Je.Mc,Je.Nc,Qr,Dr,gn),or--):1&hn||kr(Ar,Tr,null,null,Pr,zr,Qr,Dr,Pr,zr,Qr,Dr,Sr,wr+xr.A,null,null,yn),or}function oa(Qe,Je,or){var xr=Qe.F,Sr=[Qe.J];if(xr!=null){var wr=Qe.U,kr=Je.ba.S,Ar=kr==Oo||kr==Fo;Je=Je.ba.f.RGBA;var Tr=[0],Pr=Qe.ka;Tr[0]=Qe.T,Qe.Kb&&(Pr==0?--Tr[0]:(--Pr,Sr[0]-=Qe.width),Qe.j+Qe.ka+Qe.T==Qe.o&&(Tr[0]=Qe.o-Qe.j-Pr));var zr=Je.eb;Pr=Je.fb+Pr*Je.A,Qe=Ll(xr,Sr[0],Qe.width,wr,Tr,zr,Pr+(Ar?0:3),Je.A),t(or==Tr),Qe&&Hn(kr)&&ho(zr,Pr,Ar,wr,Tr,Je.A)}return 0}function ra(Qe){var Je=Qe.ma,or=Je.ba.S,xr=11>or,Sr=or==Io||or==Lo||or==Oo||or==ul||or==12||Hn(or);if(Je.memory=null,Je.Ib=null,Je.Jb=null,Je.Nd=null,!so(Je.Oa,Qe,Sr?11:12))return 0;if(Sr&&Hn(or)&&to(),Qe.da)alert("todo:use_scaling");else{if(xr){if(Je.Ib=Ua,Qe.Kb){if(or=Qe.U+1>>1,Je.memory=Ce(Qe.U+2*or),Je.memory==null)return 0;Je.ec=Je.memory,Je.fc=0,Je.cc=Je.ec,Je.dc=Je.fc+Qe.U,Je.Mc=Je.cc,Je.Nc=Je.dc+or,Je.Ib=zs,to()}}else alert("todo:EmitYUV");Sr&&(Je.Jb=oa,xr&&Ta())}if(xr&&!Jl){for(Qe=0;256>Qe;++Qe)Oc[Qe]=89858*(Qe-128)+Ho>>Bo,Hc[Qe]=-22014*(Qe-128)+Ho,Bc[Qe]=-45773*(Qe-128),Fc[Qe]=113618*(Qe-128)+Ho>>Bo;for(Qe=mo;Qe<gl;++Qe)Je=76283*(Qe-16)+Ho>>Bo,zc[Qe-mo]=ms(Je,255),$c[Qe-mo]=ms(Je+8>>4,15);Jl=1}return 1}function Vn(Qe){var Je=Qe.ma,or=Qe.U,xr=Qe.T;return t(!(1&Qe.ka)),0>=or||0>=xr?0:(or=Je.Ib(Qe,Je),Je.Jb!=null&&Je.Jb(Qe,Je,or),Je.Dc+=or,1)}function ka(Qe){Qe.ma.memory=null}function Br(Qe,Je,or,xr){return ir(Qe,8)!=47?0:(Je[0]=ir(Qe,14)+1,or[0]=ir(Qe,14)+1,xr[0]=ir(Qe,1),ir(Qe,3)!=0?0:!Qe.h)}function Vr(Qe,Je){if(4>Qe)return Qe+1;var or=Qe-2>>1;return(2+(1&Qe)<<or)+ir(Je,or)+1}function Jr(Qe,Je){return 120<Je?Je-120:1<=(or=((or=Sc[Je-1])>>4)*Qe+(8-(15&or)))?or:1;var or}function dn(Qe,Je,or){var xr=Er(or),Sr=Qe[Je+=255&xr].g-8;return 0<Sr&&(Nr(or,or.u+8),xr=Er(or),Je+=Qe[Je].value,Je+=xr&(1<<Sr)-1),Nr(or,or.u+Qe[Je].g),Qe[Je].value}function bn(Qe,Je,or){return or.g+=Qe.g,or.value+=Qe.value<<Je>>>0,t(8>=or.g),Qe.g}function Cn(Qe,Je,or){var xr=Qe.xc;return t((Je=xr==0?0:Qe.vc[Qe.md*(or>>xr)+(Je>>xr)])<Qe.Wb),Qe.Ya[Je]}function zn(Qe,Je,or,xr){var Sr=Qe.ab,wr=Qe.c*Je,kr=Qe.C;Je=kr+Je;var Ar=or,Tr=xr;for(xr=Qe.Ta,or=Qe.Ua;0<Sr--;){var Pr=Qe.gc[Sr],zr=kr,Qr=Je,Dr=Ar,Ur=Tr,Gr=(Tr=xr,Ar=or,Pr.Ea);switch(t(zr<Qr),t(Qr<=Pr.nc),Pr.hc){case 2:Ds(Dr,Ur,(Qr-zr)*Gr,Tr,Ar);break;case 0:var on=zr,Kr=Qr,un=Tr,hn=Ar,yn=(Dn=Pr).Ea;on==0&&(io(Dr,Ur,null,null,1,un,hn),Sn(Dr,Ur+1,0,0,yn-1,un,hn+1),Ur+=yn,hn+=yn,++on);for(var gn=1<<Dn.b,Fn=gn-1,Mn=rn(yn,Dn.b),rs=Dn.K,Dn=Dn.w+(on>>Dn.b)*Mn;on<Kr;){var cs=rs,qs=Dn,ns=1;for(Ui(Dr,Ur,un,hn-yn,1,un,hn);ns<yn;){var In=(ns&~Fn)+gn;In>yn&&(In=yn),(0,lo[cs[qs++]>>8&15])(Dr,Ur+ +ns,un,hn+ns-yn,In-ns,un,hn+ns),ns=In}Ur+=yn,hn+=yn,++on&Fn||(Dn+=Mn)}Qr!=Pr.nc&&Ee(Tr,Ar-Gr,Tr,Ar+(Qr-zr-1)*Gr,Gr);break;case 1:for(Gr=Dr,Kr=Ur,yn=(Dr=Pr.Ea)-(hn=Dr&~(un=(Ur=1<<Pr.b)-1)),on=rn(Dr,Pr.b),gn=Pr.K,Pr=Pr.w+(zr>>Pr.b)*on;zr<Qr;){for(Fn=gn,Mn=Pr,rs=new Or,Dn=Kr+hn,cs=Kr+Dr;Kr<Dn;)jn(Fn[Mn++],rs),co(rs,Gr,Kr,Ur,Tr,Ar),Kr+=Ur,Ar+=Ur;Kr<cs&&(jn(Fn[Mn++],rs),co(rs,Gr,Kr,yn,Tr,Ar),Kr+=yn,Ar+=yn),++zr&un||(Pr+=on)}break;case 3:if(Dr==Tr&&Ur==Ar&&0<Pr.b){for(Kr=Tr,Dr=Gr=Ar+(Qr-zr)*Gr-(hn=(Qr-zr)*rn(Pr.Ea,Pr.b)),Ur=Tr,un=Ar,on=[],hn=(yn=hn)-1;0<=hn;--hn)on[hn]=Ur[un+hn];for(hn=yn-1;0<=hn;--hn)Kr[Dr+hn]=on[hn];_o(Pr,zr,Qr,Tr,Gr,Tr,Ar)}else _o(Pr,zr,Qr,Dr,Ur,Tr,Ar)}Ar=xr,Tr=or}Tr!=or&&Ee(xr,or,Ar,Tr,wr)}function Tn(Qe,Je){var or=Qe.V,xr=Qe.Ba+Qe.c*Qe.C,Sr=Je-Qe.C;if(t(Je<=Qe.l.o),t(16>=Sr),0<Sr){var wr=Qe.l,kr=Qe.Ta,Ar=Qe.Ua,Tr=wr.width;if(zn(Qe,Sr,or,xr),Sr=Ar=[Ar],t((or=Qe.C)<(xr=Je)),t(wr.v<wr.va),xr>wr.o&&(xr=wr.o),or<wr.j){var Pr=wr.j-or;or=wr.j,Sr[0]+=Pr*Tr}if(or>=xr?or=0:(Sr[0]+=4*wr.v,wr.ka=or-wr.j,wr.U=wr.va-wr.v,wr.T=xr-or,or=1),or){if(Ar=Ar[0],11>(or=Qe.ca).S){var zr=or.f.RGBA,Qr=(xr=or.S,Sr=wr.U,wr=wr.T,Pr=zr.eb,zr.A),Dr=wr;for(zr=zr.fb+Qe.Ma*zr.A;0<Dr--;){var Ur=kr,Gr=Ar,on=Sr,Kr=Pr,un=zr;switch(xr){case Do:uo(Ur,Gr,on,Kr,un);break;case Io:pi(Ur,Gr,on,Kr,un);break;case dl:pi(Ur,Gr,on,Kr,un),ho(Kr,un,0,on,1,0);break;case Ul:Pi(Ur,Gr,on,Kr,un);break;case Lo:Bn(Ur,Gr,on,Kr,un,1);break;case pl:Bn(Ur,Gr,on,Kr,un,1),ho(Kr,un,0,on,1,0);break;case Oo:Bn(Ur,Gr,on,Kr,un,0);break;case Fo:Bn(Ur,Gr,on,Kr,un,0),ho(Kr,un,1,on,1,0);break;case ul:hi(Ur,Gr,on,Kr,un);break;case hl:hi(Ur,Gr,on,Kr,un),Il(Kr,un,on,1,0);break;case Vl:fi(Ur,Gr,on,Kr,un);break;default:t(0)}Ar+=Tr,zr+=Qr}Qe.Ma+=wr}else alert("todo:EmitRescaledRowsYUVA");t(Qe.Ma<=or.height)}}Qe.C=Je,t(Qe.C<=Qe.i)}function An(Qe){var Je;if(0<Qe.ua)return 0;for(Je=0;Je<Qe.Wb;++Je){var or=Qe.Ya[Je].G,xr=Qe.Ya[Je].H;if(0<or[1][xr[1]+0].g||0<or[2][xr[2]+0].g||0<or[3][xr[3]+0].g)return 0}return 1}function kn(Qe,Je,or,xr,Sr,wr){if(Qe.Z!=0){var kr=Qe.qd,Ar=Qe.rd;for(t(gi[Qe.Z]!=null);Je<or;++Je)gi[Qe.Z](kr,Ar,xr,Sr,xr,Sr,wr),kr=xr,Ar=Sr,Sr+=wr;Qe.qd=kr,Qe.rd=Ar}}function _n(Qe,Je){var or=Qe.l.ma,xr=or.Z==0||or.Z==1?Qe.l.j:Qe.C;if(xr=Qe.C<xr?xr:Qe.C,t(Je<=Qe.l.o),Je>xr){var Sr=Qe.l.width,wr=or.ca,kr=or.tb+Sr*xr,Ar=Qe.V,Tr=Qe.Ba+Qe.c*xr,Pr=Qe.gc;t(Qe.ab==1),t(Pr[0].hc==3),za(Pr[0],xr,Je,Ar,Tr,wr,kr),kn(or,xr,Je,wr,kr,Sr)}Qe.C=Qe.Ma=Je}function $n(Qe,Je,or,xr,Sr,wr,kr){var Ar=Qe.$/xr,Tr=Qe.$%xr,Pr=Qe.m,zr=Qe.s,Qr=or+Qe.$,Dr=Qr;Sr=or+xr*Sr;var Ur=or+xr*wr,Gr=280+zr.ua,on=Qe.Pb?Ar:16777216,Kr=0<zr.ua?zr.Wa:null,un=zr.wc,hn=Qr<Ur?Cn(zr,Tr,Ar):null;t(Qe.C<wr),t(Ur<=Sr);var yn=!1;e:for(;;){for(;yn||Qr<Ur;){var gn=0;if(Ar>=on){var Fn=Qr-or;t((on=Qe).Pb),on.wd=on.m,on.xd=Fn,0<on.s.ua&&Xr(on.s.Wa,on.s.vb),on=Ar+wc}if(Tr&un||(hn=Cn(zr,Tr,Ar)),t(hn!=null),hn.Qb&&(Je[Qr]=hn.qb,yn=!0),!yn)if(Mr(Pr),hn.jc){gn=Pr,Fn=Je;var Mn=Qr,rs=hn.pd[Er(gn)&Mi-1];t(hn.jc),256>rs.g?(Nr(gn,gn.u+rs.g),Fn[Mn]=rs.value,gn=0):(Nr(gn,gn.u+rs.g-256),t(256<=rs.value),gn=rs.value),gn==0&&(yn=!0)}else gn=dn(hn.G[0],hn.H[0],Pr);if(Pr.h)break;if(yn||256>gn){if(!yn)if(hn.nd)Je[Qr]=(hn.qb|gn<<8)>>>0;else{if(Mr(Pr),yn=dn(hn.G[1],hn.H[1],Pr),Mr(Pr),Fn=dn(hn.G[2],hn.H[2],Pr),Mn=dn(hn.G[3],hn.H[3],Pr),Pr.h)break;Je[Qr]=(Mn<<24|yn<<16|gn<<8|Fn)>>>0}if(yn=!1,++Qr,++Tr>=xr&&(Tr=0,++Ar,kr!=null&&Ar<=wr&&!(Ar%16)&&kr(Qe,Ar),Kr!=null))for(;Dr<Qr;)gn=Je[Dr++],Kr.X[(506832829*gn&4294967295)>>>Kr.Mb]=gn}else if(280>gn){if(gn=Vr(gn-256,Pr),Fn=dn(hn.G[4],hn.H[4],Pr),Mr(Pr),Fn=Jr(xr,Fn=Vr(Fn,Pr)),Pr.h)break;if(Qr-or<Fn||Sr-Qr<gn)break e;for(Mn=0;Mn<gn;++Mn)Je[Qr+Mn]=Je[Qr+Mn-Fn];for(Qr+=gn,Tr+=gn;Tr>=xr;)Tr-=xr,++Ar,kr!=null&&Ar<=wr&&!(Ar%16)&&kr(Qe,Ar);if(t(Qr<=Sr),Tr&un&&(hn=Cn(zr,Tr,Ar)),Kr!=null)for(;Dr<Qr;)gn=Je[Dr++],Kr.X[(506832829*gn&4294967295)>>>Kr.Mb]=gn}else{if(!(gn<Gr))break e;for(yn=gn-280,t(Kr!=null);Dr<Qr;)gn=Je[Dr++],Kr.X[(506832829*gn&4294967295)>>>Kr.Mb]=gn;gn=Qr,t(!(yn>>>(Fn=Kr).Xa)),Je[gn]=Fn.X[yn],yn=!0}yn||t(Pr.h==Cr(Pr))}if(Qe.Pb&&Pr.h&&Qr<Sr)t(Qe.m.h),Qe.a=5,Qe.m=Qe.wd,Qe.$=Qe.xd,0<Qe.s.ua&&Xr(Qe.s.vb,Qe.s.Wa);else{if(Pr.h)break e;kr!=null&&kr(Qe,Ar>wr?wr:Ar),Qe.a=0,Qe.$=Qr-or}return 1}return Qe.a=3,0}function Wn(Qe){t(Qe!=null),Qe.vc=null,Qe.yc=null,Qe.Ya=null;var Je=Qe.Wa;Je!=null&&(Je.X=null),Qe.vb=null,t(Qe!=null)}function Cs(){var Qe=new Kn;return Qe==null?null:(Qe.a=0,Qe.xb=Gl,fs("Predictor","VP8LPredictors"),fs("Predictor","VP8LPredictors_C"),fs("PredictorAdd","VP8LPredictorsAdd"),fs("PredictorAdd","VP8LPredictorsAdd_C"),Ds=Rn,co=On,uo=js,pi=qn,hi=Gn,fi=Xn,Pi=xs,ar.VP8LMapColor32b=Ha,ar.VP8LMapColor8b=oo,Qe)}function ls(Qe,Je,or,xr,Sr){var wr=1,kr=[Qe],Ar=[Je],Tr=xr.m,Pr=xr.s,zr=null,Qr=0;e:for(;;){if(or)for(;wr&&ir(Tr,1);){var Dr=kr,Ur=Ar,Gr=xr,on=1,Kr=Gr.m,un=Gr.gc[Gr.ab],hn=ir(Kr,2);if(Gr.Oc&1<<hn)wr=0;else{switch(Gr.Oc|=1<<hn,un.hc=hn,un.Ea=Dr[0],un.nc=Ur[0],un.K=[null],++Gr.ab,t(4>=Gr.ab),hn){case 0:case 1:un.b=ir(Kr,3)+2,on=ls(rn(un.Ea,un.b),rn(un.nc,un.b),0,Gr,un.K),un.K=un.K[0];break;case 3:var yn,gn=ir(Kr,8)+1,Fn=16<gn?0:4<gn?1:2<gn?2:3;if(Dr[0]=rn(un.Ea,Fn),un.b=Fn,yn=on=ls(gn,1,0,Gr,un.K)){var Mn,rs=gn,Dn=un,cs=1<<(8>>Dn.b),qs=Ce(cs);if(qs==null)yn=0;else{var ns=Dn.K[0],In=Dn.w;for(qs[0]=Dn.K[0][0],Mn=1;Mn<1*rs;++Mn)qs[Mn]=_r(ns[In+Mn],qs[Mn-1]);for(;Mn<4*cs;++Mn)qs[Mn]=0;Dn.K[0]=null,Dn.K[0]=qs,yn=1}}on=yn;break;case 2:break;default:t(0)}wr=on}}if(kr=kr[0],Ar=Ar[0],wr&&ir(Tr,1)&&!(wr=1<=(Qr=ir(Tr,4))&&11>=Qr)){xr.a=3;break e}var wn;if(wn=wr)t:{var Ls,Jn,us,As=xr,Qs=kr,sa=Ar,Ms=Qr,ea=or,aa=As.m,Ws=As.s,hs=[null],vs=1,Ps=0,bs=Rc[Ms];r:for(;;){if(ea&&ir(aa,1)){var Xs=ir(aa,3)+2,Pa=rn(Qs,Xs),Os=rn(sa,Xs),la=Pa*Os;if(!ls(Pa,Os,0,As,hs))break r;for(hs=hs[0],Ws.xc=Xs,Ls=0;Ls<la;++Ls){var ws=hs[Ls]>>8&65535;hs[Ls]=ws,ws>=vs&&(vs=ws+1)}}if(aa.h)break r;for(Jn=0;5>Jn;++Jn){var Gs=ql[Jn];!Jn&&0<Ms&&(Gs+=1<<Ms),Ps<Gs&&(Ps=Gs)}var xa=Te(vs*bs,vr),ia=vs,ga=Te(ia,br);if(ga==null)var ya=null;else t(65536>=ia),ya=ga;var ca=Ce(Ps);if(ya==null||ca==null||xa==null){As.a=1;break r}var va=xa;for(Ls=us=0;Ls<vs;++Ls){var ks=ya[Ls],ba=ks.G,Da=ks.H,Ii=0,si=1,Js=0;for(Jn=0;5>Jn;++Jn){Gs=ql[Jn],ba[Jn]=va,Da[Jn]=us,!Jn&&0<Ms&&(Gs+=1<<Ms);s:{var $o,yl=Gs,Uo=As,xo=ca,qc=va,Wc=us,vl=0,yi=Uo.m,Gc=ir(yi,1);if(Re(xo,0,0,yl),Gc){var Yc=ir(yi,1)+1,Kc=ir(yi,1),tc=ir(yi,Kc==0?1:8);xo[tc]=1,Yc==2&&(xo[tc=ir(yi,8)]=1);var Vo=1}else{var rc=Ce(19),nc=ir(yi,4)+4;if(19<nc){Uo.a=3;var qo=0;break s}for($o=0;$o<nc;++$o)rc[jc[$o]]=ir(yi,3);var bl=void 0,go=void 0,sc=Uo,Qc=rc,Wo=yl,ac=xo,El=0,vi=sc.m,ic=8,oc=Te(128,vr);n:for(;dr(oc,0,7,Qc,19);){if(ir(vi,1)){var Xc=2+2*ir(vi,3);if((bl=2+ir(vi,Xc))>Wo)break n}else bl=Wo;for(go=0;go<Wo&&bl--;){Mr(vi);var cc=oc[0+(127&Er(vi))];Nr(vi,vi.u+cc.g);var qi=cc.value;if(16>qi)ac[go++]=qi,qi!=0&&(ic=qi);else{var Jc=qi==16,uc=qi-16,Zc=bc[uc],dc=ir(vi,vc[uc])+Zc;if(go+dc>Wo)break n;for(var eu=Jc?ic:0;0<dc--;)ac[go++]=eu}}El=1;break n}El||(sc.a=3),Vo=El}(Vo=Vo&&!yi.h)&&(vl=dr(qc,Wc,8,xo,yl)),Vo&&vl!=0?qo=vl:(Uo.a=3,qo=0)}if(qo==0)break r;if(si&&Ec[Jn]==1&&(si=va[us].g==0),Ii+=va[us].g,us+=qo,3>=Jn){var yo,jl=ca[0];for(yo=1;yo<Gs;++yo)ca[yo]>jl&&(jl=ca[yo]);Js+=jl}}if(ks.nd=si,ks.Qb=0,si&&(ks.qb=(ba[3][Da[3]+0].value<<24|ba[1][Da[1]+0].value<<16|ba[2][Da[2]+0].value)>>>0,Ii==0&&256>ba[0][Da[0]+0].value&&(ks.Qb=1,ks.qb+=ba[0][Da[0]+0].value<<8)),ks.jc=!ks.Qb&&6>Js,ks.jc){var Go,ai=ks;for(Go=0;Go<Mi;++Go){var bi=Go,Ei=ai.pd[bi],Yo=ai.G[0][ai.H[0]+bi];256<=Yo.value?(Ei.g=Yo.g+256,Ei.value=Yo.value):(Ei.g=0,Ei.value=0,bi>>=bn(Yo,8,Ei),bi>>=bn(ai.G[1][ai.H[1]+bi],16,Ei),bi>>=bn(ai.G[2][ai.H[2]+bi],0,Ei),bn(ai.G[3][ai.H[3]+bi],24,Ei))}}}Ws.vc=hs,Ws.Wb=vs,Ws.Ya=ya,Ws.yc=xa,wn=1;break t}wn=0}if(!(wr=wn)){xr.a=3;break e}if(0<Qr){if(Pr.ua=1<<Qr,!Rr(Pr.Wa,Qr)){xr.a=1,wr=0;break e}}else Pr.ua=0;var Sl=xr,pc=kr,tu=Ar,Rl=Sl.s,wl=Rl.xc;if(Sl.c=pc,Sl.i=tu,Rl.md=rn(pc,wl),Rl.wc=wl==0?-1:(1<<wl)-1,or){xr.xb=Mc;break e}if((zr=Ce(kr*Ar))==null){xr.a=1,wr=0;break e}wr=(wr=$n(xr,zr,0,kr,Ar,Ar,null))&&!Tr.h;break e}return wr?(Sr!=null?Sr[0]=zr:(t(zr==null),t(or)),xr.$=0,or||Wn(Pr)):Wn(Pr),wr}function ss(Qe,Je){var or=Qe.c*Qe.i,xr=or+Je+16*Je;return t(Qe.c<=Je),Qe.V=Ce(xr),Qe.V==null?(Qe.Ta=null,Qe.Ua=0,Qe.a=1,0):(Qe.Ta=Qe.V,Qe.Ua=Qe.Ba+or+Je,1)}function ys(Qe,Je){var or=Qe.C,xr=Je-or,Sr=Qe.V,wr=Qe.Ba+Qe.c*or;for(t(Je<=Qe.l.o);0<xr;){var kr=16<xr?16:xr,Ar=Qe.l.ma,Tr=Qe.l.width,Pr=Tr*kr,zr=Ar.ca,Qr=Ar.tb+Tr*or,Dr=Qe.Ta,Ur=Qe.Ua;zn(Qe,kr,Sr,wr),Ol(Dr,Ur,zr,Qr,Pr),kn(Ar,or,or+kr,zr,Qr,Tr),xr-=kr,Sr+=kr*Qe.c,or+=kr}t(or==Je),Qe.C=Qe.Ma=Je}function ua(){this.ub=this.yd=this.td=this.Rb=0}function Ea(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function da(){this.Fb=this.Bb=this.Cb=0,this.Zb=Ce(4),this.Lb=Ce(4)}function Zs(){this.Yb=function(){var Qe=[];return function Je(or,xr,Sr){for(var wr=Sr[xr],kr=0;kr<wr&&(or.push(Sr.length>xr+1?[]:0),!(Sr.length<xr+1));kr++)Je(or[kr],xr+1,Sr)}(Qe,0,[3,11]),Qe}()}function ii(){this.jb=Ce(3),this.Wc=Me([4,8],Zs),this.Xc=Me([4,17],Zs)}function Ia(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Ce(4),this.od=new Ce(4)}function Fs(){this.ld=this.La=this.dd=this.tc=0}function La(){this.Na=this.la=0}function Va(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function as(){this.ad=Ce(384),this.Za=0,this.Ob=Ce(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ss(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fs),this.Y=0,this.ya=Array(new as),this.aa=0,this.l=new pa}function Ca(){this.y=Ce(16),this.f=Ce(8),this.ea=Ce(8)}function Oa(){this.cb=this.a=0,this.sc="",this.m=new nr,this.Od=new ua,this.Kc=new Ea,this.ed=new Ia,this.Qa=new da,this.Ic=this.$c=this.Aa=0,this.D=new Ss,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Te(8,nr),this.ia=0,this.pb=Te(4,Va),this.Pa=new ii,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ca),this.Hd=0,this.rb=Array(new La),this.sb=0,this.wa=Array(new Fs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new as),this.L=this.aa=0,this.gd=Me([4,2],Fs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ms(Qe,Je){return 0>Qe?0:Qe>Je?Je:Qe}function pa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Li(){var Qe=new Oa;return Qe!=null&&(Qe.a=0,Qe.sc="OK",Qe.cb=0,Qe.Xb=0,fo||(fo=Oi)),Qe}function _s(Qe,Je,or){return Qe.a==0&&(Qe.a=Je,Qe.sc=or,Qe.cb=0),0}function vo(Qe,Je,or){return 3<=or&&Qe[Je+0]==157&&Qe[Je+1]==1&&Qe[Je+2]==42}function Fa(Qe,Je){if(Qe==null)return 0;if(Qe.a=0,Qe.sc="OK",Je==null)return _s(Qe,2,"null VP8Io passed to VP8GetHeaders()");var or=Je.data,xr=Je.w,Sr=Je.ha;if(4>Sr)return _s(Qe,7,"Truncated header.");var wr=or[xr+0]|or[xr+1]<<8|or[xr+2]<<16,kr=Qe.Od;if(kr.Rb=!(1&wr),kr.td=wr>>1&7,kr.yd=wr>>4&1,kr.ub=wr>>5,3<kr.td)return _s(Qe,3,"Incorrect keyframe parameters.");if(!kr.yd)return _s(Qe,4,"Frame not displayable.");xr+=3,Sr-=3;var Ar=Qe.Kc;if(kr.Rb){if(7>Sr)return _s(Qe,7,"cannot parse picture header");if(!vo(or,xr,Sr))return _s(Qe,3,"Bad code word");Ar.c=16383&(or[xr+4]<<8|or[xr+3]),Ar.Td=or[xr+4]>>6,Ar.i=16383&(or[xr+6]<<8|or[xr+5]),Ar.Ud=or[xr+6]>>6,xr+=7,Sr-=7,Qe.za=Ar.c+15>>4,Qe.Ub=Ar.i+15>>4,Je.width=Ar.c,Je.height=Ar.i,Je.Da=0,Je.j=0,Je.v=0,Je.va=Je.width,Je.o=Je.height,Je.da=0,Je.ib=Je.width,Je.hb=Je.height,Je.U=Je.width,Je.T=Je.height,Re((wr=Qe.Pa).jb,0,255,wr.jb.length),t((wr=Qe.Qa)!=null),wr.Cb=0,wr.Bb=0,wr.Fb=1,Re(wr.Zb,0,0,wr.Zb.length),Re(wr.Lb,0,0,wr.Lb)}if(kr.ub>Sr)return _s(Qe,7,"bad partition length");lr(wr=Qe.m,or,xr,kr.ub),xr+=kr.ub,Sr-=kr.ub,kr.Rb&&(Ar.Ld=$r(wr),Ar.Kd=$r(wr)),Ar=Qe.Qa;var Tr,Pr=Qe.Pa;if(t(wr!=null),t(Ar!=null),Ar.Cb=$r(wr),Ar.Cb){if(Ar.Bb=$r(wr),$r(wr)){for(Ar.Fb=$r(wr),Tr=0;4>Tr;++Tr)Ar.Zb[Tr]=$r(wr)?rr(wr,7):0;for(Tr=0;4>Tr;++Tr)Ar.Lb[Tr]=$r(wr)?rr(wr,6):0}if(Ar.Bb)for(Tr=0;3>Tr;++Tr)Pr.jb[Tr]=$r(wr)?cr(wr,8):255}else Ar.Bb=0;if(wr.Ka)return _s(Qe,3,"cannot parse segment header");if((Ar=Qe.ed).zd=$r(wr),Ar.Tb=cr(wr,6),Ar.wb=cr(wr,3),Ar.Pc=$r(wr),Ar.Pc&&$r(wr)){for(Pr=0;4>Pr;++Pr)$r(wr)&&(Ar.vd[Pr]=rr(wr,6));for(Pr=0;4>Pr;++Pr)$r(wr)&&(Ar.od[Pr]=rr(wr,6))}if(Qe.L=Ar.Tb==0?0:Ar.zd?1:2,wr.Ka)return _s(Qe,3,"cannot parse filter header");var zr=Sr;if(Sr=Tr=xr,xr=Tr+zr,Ar=zr,Qe.Xb=(1<<cr(Qe.m,2))-1,zr<3*(Pr=Qe.Xb))or=7;else{for(Tr+=3*Pr,Ar-=3*Pr,zr=0;zr<Pr;++zr){var Qr=or[Sr+0]|or[Sr+1]<<8|or[Sr+2]<<16;Qr>Ar&&(Qr=Ar),lr(Qe.Jc[+zr],or,Tr,Qr),Tr+=Qr,Ar-=Qr,Sr+=3}lr(Qe.Jc[+Pr],or,Tr,Ar),or=Tr<xr?0:5}if(or!=0)return _s(Qe,or,"cannot parse partitions");for(or=cr(Tr=Qe.m,7),Sr=$r(Tr)?rr(Tr,4):0,xr=$r(Tr)?rr(Tr,4):0,Ar=$r(Tr)?rr(Tr,4):0,Pr=$r(Tr)?rr(Tr,4):0,Tr=$r(Tr)?rr(Tr,4):0,zr=Qe.Qa,Qr=0;4>Qr;++Qr){if(zr.Cb){var Dr=zr.Zb[Qr];zr.Fb||(Dr+=or)}else{if(0<Qr){Qe.pb[Qr]=Qe.pb[0];continue}Dr=or}var Ur=Qe.pb[Qr];Ur.Sc[0]=ml[ms(Dr+Sr,127)],Ur.Sc[1]=xl[ms(Dr+0,127)],Ur.Eb[0]=2*ml[ms(Dr+xr,127)],Ur.Eb[1]=101581*xl[ms(Dr+Ar,127)]>>16,8>Ur.Eb[1]&&(Ur.Eb[1]=8),Ur.Qc[0]=ml[ms(Dr+Pr,117)],Ur.Qc[1]=xl[ms(Dr+Tr,127)],Ur.lc=Dr+Tr}if(!kr.Rb)return _s(Qe,4,"Not a key frame.");for($r(wr),kr=Qe.Pa,or=0;4>or;++or){for(Sr=0;8>Sr;++Sr)for(xr=0;3>xr;++xr)for(Ar=0;11>Ar;++Ar)Pr=Wr(wr,Tc[or][Sr][xr][Ar])?cr(wr,8):Cc[or][Sr][xr][Ar],kr.Wc[or][Sr].Yb[xr][Ar]=Pr;for(Sr=0;17>Sr;++Sr)kr.Xc[or][Sr]=kr.Wc[or][_c[Sr]]}return Qe.kc=$r(wr),Qe.kc&&(Qe.Bd=cr(wr,8)),Qe.cb=1}function Oi(Qe,Je,or,xr,Sr,wr,kr){var Ar=Je[Sr].Yb[or];for(or=0;16>Sr;++Sr){if(!Wr(Qe,Ar[or+0]))return Sr;for(;!Wr(Qe,Ar[or+1]);)if(Ar=Je[++Sr].Yb[0],or=0,Sr==16)return 16;var Tr=Je[Sr+1].Yb;if(Wr(Qe,Ar[or+2])){var Pr=Qe,zr=0;if(Wr(Pr,(Dr=Ar)[(Qr=or)+3]))if(Wr(Pr,Dr[Qr+6])){for(Ar=0,Qr=2*(zr=Wr(Pr,Dr[Qr+8]))+(Dr=Wr(Pr,Dr[Qr+9+zr])),zr=0,Dr=Nc[Qr];Dr[Ar];++Ar)zr+=zr+Wr(Pr,Dr[Ar]);zr+=3+(8<<Qr)}else Wr(Pr,Dr[Qr+7])?(zr=7+2*Wr(Pr,165),zr+=Wr(Pr,145)):zr=5+Wr(Pr,159);else zr=Wr(Pr,Dr[Qr+4])?3+Wr(Pr,Dr[Qr+5]):2;Ar=Tr[2]}else zr=1,Ar=Tr[1];Tr=kr+kc[Sr],0>(Pr=Qe).b&&Fr(Pr);var Qr,Dr=Pr.b,Ur=(Qr=Pr.Ca>>1)-(Pr.I>>Dr)>>31;--Pr.b,Pr.Ca+=Ur,Pr.Ca|=1,Pr.I-=(Qr+1&Ur)<<Dr,wr[Tr]=((zr^Ur)-Ur)*xr[(0<Sr)+0]}return 16}function bo(Qe){var Je=Qe.rb[Qe.sb-1];Je.la=0,Je.Na=0,Re(Qe.zc,0,0,Qe.zc.length),Qe.ja=0}function ja(Qe,Je,or,xr,Sr){Sr=Qe[Je+or+32*xr]+(Sr>>3),Qe[Je+or+32*xr]=-256&Sr?0>Sr?0:255:Sr}function $s(Qe,Je,or,xr,Sr,wr){ja(Qe,Je,0,or,xr+Sr),ja(Qe,Je,1,or,xr+wr),ja(Qe,Je,2,or,xr-wr),ja(Qe,Je,3,or,xr-Sr)}function qa(Qe){return(20091*Qe>>16)+Qe}function Eo(Qe,Je,or,xr){var Sr,wr=0,kr=Ce(16);for(Sr=0;4>Sr;++Sr){var Ar=Qe[Je+0]+Qe[Je+8],Tr=Qe[Je+0]-Qe[Je+8],Pr=(35468*Qe[Je+4]>>16)-qa(Qe[Je+12]),zr=qa(Qe[Je+4])+(35468*Qe[Je+12]>>16);kr[wr+0]=Ar+zr,kr[wr+1]=Tr+Pr,kr[wr+2]=Tr-Pr,kr[wr+3]=Ar-zr,wr+=4,Je++}for(Sr=wr=0;4>Sr;++Sr)Ar=(Qe=kr[wr+0]+4)+kr[wr+8],Tr=Qe-kr[wr+8],Pr=(35468*kr[wr+4]>>16)-qa(kr[wr+12]),ja(or,xr,0,0,Ar+(zr=qa(kr[wr+4])+(35468*kr[wr+12]>>16))),ja(or,xr,1,0,Tr+Pr),ja(or,xr,2,0,Tr-Pr),ja(or,xr,3,0,Ar-zr),wr++,xr+=32}function Ko(Qe,Je,or,xr){var Sr=Qe[Je+0]+4,wr=35468*Qe[Je+4]>>16,kr=qa(Qe[Je+4]),Ar=35468*Qe[Je+1]>>16;$s(or,xr,0,Sr+kr,Qe=qa(Qe[Je+1]),Ar),$s(or,xr,1,Sr+wr,Qe,Ar),$s(or,xr,2,Sr-wr,Qe,Ar),$s(or,xr,3,Sr-kr,Qe,Ar)}function Qo(Qe,Je,or,xr,Sr){Eo(Qe,Je,or,xr),Sr&&Eo(Qe,Je+16,or,xr+4)}function Ba(Qe,Je,or,xr){Di(Qe,Je+0,or,xr,1),Di(Qe,Je+32,or,xr+128,1)}function jo(Qe,Je,or,xr){var Sr;for(Qe=Qe[Je+0]+4,Sr=0;4>Sr;++Sr)for(Je=0;4>Je;++Je)ja(or,xr,Je,Sr,Qe)}function So(Qe,Je,or,xr){Qe[Je+0]&&gs(Qe,Je+0,or,xr),Qe[Je+16]&&gs(Qe,Je+16,or,xr+4),Qe[Je+32]&&gs(Qe,Je+32,or,xr+128),Qe[Je+48]&&gs(Qe,Je+48,or,xr+128+4)}function Fi(Qe,Je,or,xr){var Sr,wr=Ce(16);for(Sr=0;4>Sr;++Sr){var kr=Qe[Je+0+Sr]+Qe[Je+12+Sr],Ar=Qe[Je+4+Sr]+Qe[Je+8+Sr],Tr=Qe[Je+4+Sr]-Qe[Je+8+Sr],Pr=Qe[Je+0+Sr]-Qe[Je+12+Sr];wr[0+Sr]=kr+Ar,wr[8+Sr]=kr-Ar,wr[4+Sr]=Pr+Tr,wr[12+Sr]=Pr-Tr}for(Sr=0;4>Sr;++Sr)kr=(Qe=wr[0+4*Sr]+3)+wr[3+4*Sr],Ar=wr[1+4*Sr]+wr[2+4*Sr],Tr=wr[1+4*Sr]-wr[2+4*Sr],Pr=Qe-wr[3+4*Sr],or[xr+0]=kr+Ar>>3,or[xr+16]=Pr+Tr>>3,or[xr+32]=kr-Ar>>3,or[xr+48]=Pr-Tr>>3,xr+=64}function ji(Qe,Je,or){var xr,Sr=Je-32,wr=ma,kr=255-Qe[Sr-1];for(xr=0;xr<or;++xr){var Ar,Tr=wr,Pr=kr+Qe[Je-1];for(Ar=0;Ar<or;++Ar)Qe[Je+Ar]=Tr[Pr+Qe[Sr+Ar]];Je+=32}}function Xo(Qe,Je){ji(Qe,Je,4)}function Jo(Qe,Je){ji(Qe,Je,8)}function Zo(Qe,Je){ji(Qe,Je,16)}function Gi(Qe,Je){var or;for(or=0;16>or;++or)Ee(Qe,Je+32*or,Qe,Je-32,16)}function Ro(Qe,Je){var or;for(or=16;0<or;--or)Re(Qe,Je,Qe[Je-1],16),Je+=32}function Aa(Qe,Je,or){var xr;for(xr=0;16>xr;++xr)Re(Je,or+32*xr,Qe,16)}function el(Qe,Je){var or,xr=16;for(or=0;16>or;++or)xr+=Qe[Je-1+32*or]+Qe[Je+or-32];Aa(xr>>5,Qe,Je)}function Si(Qe,Je){var or,xr=8;for(or=0;16>or;++or)xr+=Qe[Je-1+32*or];Aa(xr>>4,Qe,Je)}function Yi(Qe,Je){var or,xr=8;for(or=0;16>or;++or)xr+=Qe[Je+or-32];Aa(xr>>4,Qe,Je)}function tl(Qe,Je){Aa(128,Qe,Je)}function Qn(Qe,Je,or){return Qe+2*Je+or+2>>2}function rl(Qe,Je){var or,xr=Je-32;for(xr=new Uint8Array([Qn(Qe[xr-1],Qe[xr+0],Qe[xr+1]),Qn(Qe[xr+0],Qe[xr+1],Qe[xr+2]),Qn(Qe[xr+1],Qe[xr+2],Qe[xr+3]),Qn(Qe[xr+2],Qe[xr+3],Qe[xr+4])]),or=0;4>or;++or)Ee(Qe,Je+32*or,xr,0,xr.length)}function nl(Qe,Je){var or=Qe[Je-1],xr=Qe[Je-1+32],Sr=Qe[Je-1+64],wr=Qe[Je-1+96];Zr(Qe,Je+0,16843009*Qn(Qe[Je-1-32],or,xr)),Zr(Qe,Je+32,16843009*Qn(or,xr,Sr)),Zr(Qe,Je+64,16843009*Qn(xr,Sr,wr)),Zr(Qe,Je+96,16843009*Qn(Sr,wr,wr))}function sl(Qe,Je){var or,xr=4;for(or=0;4>or;++or)xr+=Qe[Je+or-32]+Qe[Je-1+32*or];for(xr>>=3,or=0;4>or;++or)Re(Qe,Je+32*or,xr,4)}function Wa(Qe,Je){var or=Qe[Je-1+0],xr=Qe[Je-1+32],Sr=Qe[Je-1+64],wr=Qe[Je-1-32],kr=Qe[Je+0-32],Ar=Qe[Je+1-32],Tr=Qe[Je+2-32],Pr=Qe[Je+3-32];Qe[Je+0+96]=Qn(xr,Sr,Qe[Je-1+96]),Qe[Je+1+96]=Qe[Je+0+64]=Qn(or,xr,Sr),Qe[Je+2+96]=Qe[Je+1+64]=Qe[Je+0+32]=Qn(wr,or,xr),Qe[Je+3+96]=Qe[Je+2+64]=Qe[Je+1+32]=Qe[Je+0+0]=Qn(kr,wr,or),Qe[Je+3+64]=Qe[Je+2+32]=Qe[Je+1+0]=Qn(Ar,kr,wr),Qe[Je+3+32]=Qe[Je+2+0]=Qn(Tr,Ar,kr),Qe[Je+3+0]=Qn(Pr,Tr,Ar)}function Ga(Qe,Je){var or=Qe[Je+1-32],xr=Qe[Je+2-32],Sr=Qe[Je+3-32],wr=Qe[Je+4-32],kr=Qe[Je+5-32],Ar=Qe[Je+6-32],Tr=Qe[Je+7-32];Qe[Je+0+0]=Qn(Qe[Je+0-32],or,xr),Qe[Je+1+0]=Qe[Je+0+32]=Qn(or,xr,Sr),Qe[Je+2+0]=Qe[Je+1+32]=Qe[Je+0+64]=Qn(xr,Sr,wr),Qe[Je+3+0]=Qe[Je+2+32]=Qe[Je+1+64]=Qe[Je+0+96]=Qn(Sr,wr,kr),Qe[Je+3+32]=Qe[Je+2+64]=Qe[Je+1+96]=Qn(wr,kr,Ar),Qe[Je+3+64]=Qe[Je+2+96]=Qn(kr,Ar,Tr),Qe[Je+3+96]=Qn(Ar,Tr,Tr)}function al(Qe,Je){var or=Qe[Je-1+0],xr=Qe[Je-1+32],Sr=Qe[Je-1+64],wr=Qe[Je-1-32],kr=Qe[Je+0-32],Ar=Qe[Je+1-32],Tr=Qe[Je+2-32],Pr=Qe[Je+3-32];Qe[Je+0+0]=Qe[Je+1+64]=wr+kr+1>>1,Qe[Je+1+0]=Qe[Je+2+64]=kr+Ar+1>>1,Qe[Je+2+0]=Qe[Je+3+64]=Ar+Tr+1>>1,Qe[Je+3+0]=Tr+Pr+1>>1,Qe[Je+0+96]=Qn(Sr,xr,or),Qe[Je+0+64]=Qn(xr,or,wr),Qe[Je+0+32]=Qe[Je+1+96]=Qn(or,wr,kr),Qe[Je+1+32]=Qe[Je+2+96]=Qn(wr,kr,Ar),Qe[Je+2+32]=Qe[Je+3+96]=Qn(kr,Ar,Tr),Qe[Je+3+32]=Qn(Ar,Tr,Pr)}function il(Qe,Je){var or=Qe[Je+0-32],xr=Qe[Je+1-32],Sr=Qe[Je+2-32],wr=Qe[Je+3-32],kr=Qe[Je+4-32],Ar=Qe[Je+5-32],Tr=Qe[Je+6-32],Pr=Qe[Je+7-32];Qe[Je+0+0]=or+xr+1>>1,Qe[Je+1+0]=Qe[Je+0+64]=xr+Sr+1>>1,Qe[Je+2+0]=Qe[Je+1+64]=Sr+wr+1>>1,Qe[Je+3+0]=Qe[Je+2+64]=wr+kr+1>>1,Qe[Je+0+32]=Qn(or,xr,Sr),Qe[Je+1+32]=Qe[Je+0+96]=Qn(xr,Sr,wr),Qe[Je+2+32]=Qe[Je+1+96]=Qn(Sr,wr,kr),Qe[Je+3+32]=Qe[Je+2+96]=Qn(wr,kr,Ar),Qe[Je+3+64]=Qn(kr,Ar,Tr),Qe[Je+3+96]=Qn(Ar,Tr,Pr)}function Bi(Qe,Je){var or=Qe[Je-1+0],xr=Qe[Je-1+32],Sr=Qe[Je-1+64],wr=Qe[Je-1+96];Qe[Je+0+0]=or+xr+1>>1,Qe[Je+2+0]=Qe[Je+0+32]=xr+Sr+1>>1,Qe[Je+2+32]=Qe[Je+0+64]=Sr+wr+1>>1,Qe[Je+1+0]=Qn(or,xr,Sr),Qe[Je+3+0]=Qe[Je+1+32]=Qn(xr,Sr,wr),Qe[Je+3+32]=Qe[Je+1+64]=Qn(Sr,wr,wr),Qe[Je+3+64]=Qe[Je+2+64]=Qe[Je+0+96]=Qe[Je+1+96]=Qe[Je+2+96]=Qe[Je+3+96]=wr}function Ki(Qe,Je){var or=Qe[Je-1+0],xr=Qe[Je-1+32],Sr=Qe[Je-1+64],wr=Qe[Je-1+96],kr=Qe[Je-1-32],Ar=Qe[Je+0-32],Tr=Qe[Je+1-32],Pr=Qe[Je+2-32];Qe[Je+0+0]=Qe[Je+2+32]=or+kr+1>>1,Qe[Je+0+32]=Qe[Je+2+64]=xr+or+1>>1,Qe[Je+0+64]=Qe[Je+2+96]=Sr+xr+1>>1,Qe[Je+0+96]=wr+Sr+1>>1,Qe[Je+3+0]=Qn(Ar,Tr,Pr),Qe[Je+2+0]=Qn(kr,Ar,Tr),Qe[Je+1+0]=Qe[Je+3+32]=Qn(or,kr,Ar),Qe[Je+1+32]=Qe[Je+3+64]=Qn(xr,or,kr),Qe[Je+1+64]=Qe[Je+3+96]=Qn(Sr,xr,or),Qe[Je+1+96]=Qn(wr,Sr,xr)}function Ri(Qe,Je){var or;for(or=0;8>or;++or)Ee(Qe,Je+32*or,Qe,Je-32,8)}function ol(Qe,Je){var or;for(or=0;8>or;++or)Re(Qe,Je,Qe[Je-1],8),Je+=32}function Ya(Qe,Je,or){var xr;for(xr=0;8>xr;++xr)Re(Je,or+32*xr,Qe,8)}function ll(Qe,Je){var or,xr=8;for(or=0;8>or;++or)xr+=Qe[Je+or-32]+Qe[Je-1+32*or];Ya(xr>>4,Qe,Je)}function Qi(Qe,Je){var or,xr=4;for(or=0;8>or;++or)xr+=Qe[Je+or-32];Ya(xr>>3,Qe,Je)}function Xi(Qe,Je){var or,xr=4;for(or=0;8>or;++or)xr+=Qe[Je-1+32*or];Ya(xr>>3,Qe,Je)}function wo(Qe,Je){Ya(128,Qe,Je)}function Ka(Qe,Je,or){var xr=Qe[Je-or],Sr=Qe[Je+0],wr=3*(Sr-xr)+cl[1020+Qe[Je-2*or]-Qe[Je+or]],kr=Po[112+(wr+4>>3)];Qe[Je-or]=ma[255+xr+Po[112+(wr+3>>3)]],Qe[Je+0]=ma[255+Sr-kr]}function Ji(Qe,Je,or,xr){var Sr=Qe[Je+0],wr=Qe[Je+or];return wa[255+Qe[Je-2*or]-Qe[Je-or]]>xr||wa[255+wr-Sr]>xr}function Hi(Qe,Je,or,xr){return 4*wa[255+Qe[Je-or]-Qe[Je+0]]+wa[255+Qe[Je-2*or]-Qe[Je+or]]<=xr}function Zi(Qe,Je,or,xr,Sr){var wr=Qe[Je-3*or],kr=Qe[Je-2*or],Ar=Qe[Je-or],Tr=Qe[Je+0],Pr=Qe[Je+or],zr=Qe[Je+2*or],Qr=Qe[Je+3*or];return 4*wa[255+Ar-Tr]+wa[255+kr-Pr]>xr?0:wa[255+Qe[Je-4*or]-wr]<=Sr&&wa[255+wr-kr]<=Sr&&wa[255+kr-Ar]<=Sr&&wa[255+Qr-zr]<=Sr&&wa[255+zr-Pr]<=Sr&&wa[255+Pr-Tr]<=Sr}function wi(Qe,Je,or,xr){var Sr=2*xr+1;for(xr=0;16>xr;++xr)Hi(Qe,Je+xr,or,Sr)&&Ka(Qe,Je+xr,or)}function eo(Qe,Je,or,xr){var Sr=2*xr+1;for(xr=0;16>xr;++xr)Hi(Qe,Je+xr*or,1,Sr)&&Ka(Qe,Je+xr*or,1)}function No(Qe,Je,or,xr){var Sr;for(Sr=3;0<Sr;--Sr)wi(Qe,Je+=4*or,or,xr)}function ko(Qe,Je,or,xr){var Sr;for(Sr=3;0<Sr;--Sr)eo(Qe,Je+=4,or,xr)}function Qa(Qe,Je,or,xr,Sr,wr,kr,Ar){for(wr=2*wr+1;0<Sr--;){if(Zi(Qe,Je,or,wr,kr))if(Ji(Qe,Je,or,Ar))Ka(Qe,Je,or);else{var Tr=Qe,Pr=Je,zr=or,Qr=Tr[Pr-2*zr],Dr=Tr[Pr-zr],Ur=Tr[Pr+0],Gr=Tr[Pr+zr],on=Tr[Pr+2*zr],Kr=27*(hn=cl[1020+3*(Ur-Dr)+cl[1020+Qr-Gr]])+63>>7,un=18*hn+63>>7,hn=9*hn+63>>7;Tr[Pr-3*zr]=ma[255+Tr[Pr-3*zr]+hn],Tr[Pr-2*zr]=ma[255+Qr+un],Tr[Pr-zr]=ma[255+Dr+Kr],Tr[Pr+0]=ma[255+Ur-Kr],Tr[Pr+zr]=ma[255+Gr-un],Tr[Pr+2*zr]=ma[255+on-hn]}Je+=xr}}function Xa(Qe,Je,or,xr,Sr,wr,kr,Ar){for(wr=2*wr+1;0<Sr--;){if(Zi(Qe,Je,or,wr,kr))if(Ji(Qe,Je,or,Ar))Ka(Qe,Je,or);else{var Tr=Qe,Pr=Je,zr=or,Qr=Tr[Pr-zr],Dr=Tr[Pr+0],Ur=Tr[Pr+zr],Gr=Po[112+(4+(on=3*(Dr-Qr))>>3)],on=Po[112+(on+3>>3)],Kr=Gr+1>>1;Tr[Pr-2*zr]=ma[255+Tr[Pr-2*zr]+Kr],Tr[Pr-zr]=ma[255+Qr+on],Tr[Pr+0]=ma[255+Dr-Gr],Tr[Pr+zr]=ma[255+Ur-Kr]}Je+=xr}}function Co(Qe,Je,or,xr,Sr,wr){Qa(Qe,Je,or,1,16,xr,Sr,wr)}function Ni(Qe,Je,or,xr,Sr,wr){Qa(Qe,Je,1,or,16,xr,Sr,wr)}function Ao(Qe,Je,or,xr,Sr,wr){var kr;for(kr=3;0<kr;--kr)Xa(Qe,Je+=4*or,or,1,16,xr,Sr,wr)}function sr(Qe,Je,or,xr,Sr,wr){var kr;for(kr=3;0<kr;--kr)Xa(Qe,Je+=4,1,or,16,xr,Sr,wr)}function jr(Qe,Je,or,xr,Sr,wr,kr,Ar){Qa(Qe,Je,Sr,1,8,wr,kr,Ar),Qa(or,xr,Sr,1,8,wr,kr,Ar)}function Ir(Qe,Je,or,xr,Sr,wr,kr,Ar){Qa(Qe,Je,1,Sr,8,wr,kr,Ar),Qa(or,xr,1,Sr,8,wr,kr,Ar)}function Hr(Qe,Je,or,xr,Sr,wr,kr,Ar){Xa(Qe,Je+4*Sr,Sr,1,8,wr,kr,Ar),Xa(or,xr+4*Sr,Sr,1,8,wr,kr,Ar)}function qr(Qe,Je,or,xr,Sr,wr,kr,Ar){Xa(Qe,Je+4,1,Sr,8,wr,kr,Ar),Xa(or,xr+4,1,Sr,8,wr,kr,Ar)}function pn(){this.ba=new Zn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ds,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function xn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Pn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ln(){this.ua=0,this.Wa=new mn,this.vb=new mn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new br,this.yc=new vr}function Kn(){this.xb=this.a=0,this.l=new pa,this.ca=new Zn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new gr,this.Pb=0,this.wd=new gr,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ln,this.ab=0,this.gc=Te(4,Pn),this.Oc=0}function es(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new pa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ps(Qe,Je,or,xr,Sr,wr,kr){for(Qe=Qe==null?0:Qe[Je+0],Je=0;Je<kr;++Je)Sr[wr+Je]=Qe+or[xr+Je]&255,Qe=Sr[wr+Je]}function Ts(Qe,Je,or,xr,Sr,wr,kr){var Ar;if(Qe==null)ps(null,null,or,xr,Sr,wr,kr);else for(Ar=0;Ar<kr;++Ar)Sr[wr+Ar]=Qe[Je+Ar]+or[xr+Ar]&255}function Bs(Qe,Je,or,xr,Sr,wr,kr){if(Qe==null)ps(null,null,or,xr,Sr,wr,kr);else{var Ar,Tr=Qe[Je+0],Pr=Tr,zr=Tr;for(Ar=0;Ar<kr;++Ar)Pr=zr+(Tr=Qe[Je+Ar])-Pr,zr=or[xr+Ar]+(-256&Pr?0>Pr?0:255:Pr)&255,Pr=Tr,Sr[wr+Ar]=zr}}function Ns(Qe,Je,or,xr){var Sr=Je.width,wr=Je.o;if(t(Qe!=null&&Je!=null),0>or||0>=xr||or+xr>wr)return null;if(!Qe.Cc){if(Qe.ga==null){var kr;if(Qe.ga=new es,(kr=Qe.ga==null)||(kr=Je.width*Je.o,t(Qe.Gb.length==0),Qe.Gb=Ce(kr),Qe.Uc=0,Qe.Gb==null?kr=0:(Qe.mb=Qe.Gb,Qe.nb=Qe.Uc,Qe.rc=null,kr=1),kr=!kr),!kr){kr=Qe.ga;var Ar=Qe.Fa,Tr=Qe.P,Pr=Qe.qc,zr=Qe.mb,Qr=Qe.nb,Dr=Tr+1,Ur=Pr-1,Gr=kr.l;if(t(Ar!=null&&zr!=null&&Je!=null),gi[0]=null,gi[1]=ps,gi[2]=Ts,gi[3]=Bs,kr.ca=zr,kr.tb=Qr,kr.c=Je.width,kr.i=Je.height,t(0<kr.c&&0<kr.i),1>=Pr)Je=0;else if(kr.$a=3&Ar[Tr+0],kr.Z=Ar[Tr+0]>>2&3,kr.Lc=Ar[Tr+0]>>4&3,Tr=Ar[Tr+0]>>6&3,0>kr.$a||1<kr.$a||4<=kr.Z||1<kr.Lc||Tr)Je=0;else if(Gr.put=Vn,Gr.ac=ra,Gr.bc=ka,Gr.ma=kr,Gr.width=Je.width,Gr.height=Je.height,Gr.Da=Je.Da,Gr.v=Je.v,Gr.va=Je.va,Gr.j=Je.j,Gr.o=Je.o,kr.$a)e:{t(kr.$a==1),Je=Cs();t:for(;;){if(Je==null){Je=0;break e}if(t(kr!=null),kr.mc=Je,Je.c=kr.c,Je.i=kr.i,Je.l=kr.l,Je.l.ma=kr,Je.l.width=kr.c,Je.l.height=kr.i,Je.a=0,pr(Je.m,Ar,Dr,Ur),!ls(kr.c,kr.i,1,Je,null)||(Je.ab==1&&Je.gc[0].hc==3&&An(Je.s)?(kr.ic=1,Ar=Je.c*Je.i,Je.Ta=null,Je.Ua=0,Je.V=Ce(Ar),Je.Ba=0,Je.V==null?(Je.a=1,Je=0):Je=1):(kr.ic=0,Je=ss(Je,kr.c)),!Je))break t;Je=1;break e}kr.mc=null,Je=0}else Je=Ur>=kr.c*kr.i;kr=!Je}if(kr)return null;Qe.ga.Lc!=1?Qe.Ga=0:xr=wr-or}t(Qe.ga!=null),t(or+xr<=wr);e:{if(Je=(Ar=Qe.ga).c,wr=Ar.l.o,Ar.$a==0){if(Dr=Qe.rc,Ur=Qe.Vc,Gr=Qe.Fa,Tr=Qe.P+1+or*Je,Pr=Qe.mb,zr=Qe.nb+or*Je,t(Tr<=Qe.P+Qe.qc),Ar.Z!=0)for(t(gi[Ar.Z]!=null),kr=0;kr<xr;++kr)gi[Ar.Z](Dr,Ur,Gr,Tr,Pr,zr,Je),Dr=Pr,Ur=zr,zr+=Je,Tr+=Je;else for(kr=0;kr<xr;++kr)Ee(Pr,zr,Gr,Tr,Je),Dr=Pr,Ur=zr,zr+=Je,Tr+=Je;Qe.rc=Dr,Qe.Vc=Ur}else{if(t(Ar.mc!=null),Je=or+xr,t((kr=Ar.mc)!=null),t(Je<=kr.i),kr.C>=Je)Je=1;else if(Ar.ic||Ta(),Ar.ic){Ar=kr.V,Dr=kr.Ba,Ur=kr.c;var on=kr.i,Kr=(Gr=1,Tr=kr.$/Ur,Pr=kr.$%Ur,zr=kr.m,Qr=kr.s,kr.$),un=Ur*on,hn=Ur*Je,yn=Qr.wc,gn=Kr<hn?Cn(Qr,Pr,Tr):null;t(Kr<=un),t(Je<=on),t(An(Qr));t:for(;;){for(;!zr.h&&Kr<hn;){if(Pr&yn||(gn=Cn(Qr,Pr,Tr)),t(gn!=null),Mr(zr),256>(on=dn(gn.G[0],gn.H[0],zr)))Ar[Dr+Kr]=on,++Kr,++Pr>=Ur&&(Pr=0,++Tr<=Je&&!(Tr%16)&&_n(kr,Tr));else{if(!(280>on)){Gr=0;break t}on=Vr(on-256,zr);var Fn,Mn=dn(gn.G[4],gn.H[4],zr);if(Mr(zr),!(Kr>=(Mn=Jr(Ur,Mn=Vr(Mn,zr)))&&un-Kr>=on)){Gr=0;break t}for(Fn=0;Fn<on;++Fn)Ar[Dr+Kr+Fn]=Ar[Dr+Kr+Fn-Mn];for(Kr+=on,Pr+=on;Pr>=Ur;)Pr-=Ur,++Tr<=Je&&!(Tr%16)&&_n(kr,Tr);Kr<hn&&Pr&yn&&(gn=Cn(Qr,Pr,Tr))}t(zr.h==Cr(zr))}_n(kr,Tr>Je?Je:Tr);break t}!Gr||zr.h&&Kr<un?(Gr=0,kr.a=zr.h?5:3):kr.$=Kr,Je=Gr}else Je=$n(kr,kr.V,kr.Ba,kr.c,kr.i,Je,ys);if(!Je){xr=0;break e}}or+xr>=wr&&(Qe.Cc=1),xr=1}if(!xr)return null;if(Qe.Cc&&((xr=Qe.ga)!=null&&(xr.mc=null),Qe.ga=null,0<Qe.Ga))return alert("todo:WebPDequantizeLevels"),null}return Qe.nb+or*Sr}function Us(Qe,Je,or,xr,Sr,wr){for(;0<Sr--;){var kr,Ar=Qe,Tr=Je+(or?1:0),Pr=Qe,zr=Je+(or?0:3);for(kr=0;kr<xr;++kr){var Qr=Pr[zr+4*kr];Qr!=255&&(Qr*=32897,Ar[Tr+4*kr+0]=Ar[Tr+4*kr+0]*Qr>>23,Ar[Tr+4*kr+1]=Ar[Tr+4*kr+1]*Qr>>23,Ar[Tr+4*kr+2]=Ar[Tr+4*kr+2]*Qr>>23)}Je+=wr}}function Hs(Qe,Je,or,xr,Sr){for(;0<xr--;){var wr;for(wr=0;wr<or;++wr){var kr=Qe[Je+2*wr+0],Ar=15&(Pr=Qe[Je+2*wr+1]),Tr=4369*Ar,Pr=(240&Pr|Pr>>4)*Tr>>16;Qe[Je+2*wr+0]=(240&kr|kr>>4)*Tr>>16&240|(15&kr|kr<<4)*Tr>>16>>4&15,Qe[Je+2*wr+1]=240&Pr|Ar}Je+=Sr}}function Ys(Qe,Je,or,xr,Sr,wr,kr,Ar){var Tr,Pr,zr=255;for(Pr=0;Pr<Sr;++Pr){for(Tr=0;Tr<xr;++Tr){var Qr=Qe[Je+Tr];wr[kr+4*Tr]=Qr,zr&=Qr}Je+=or,kr+=Ar}return zr!=255}function Ja(Qe,Je,or,xr,Sr){var wr;for(wr=0;wr<Sr;++wr)or[xr+wr]=Qe[Je+wr]>>8}function Ta(){ho=Us,Il=Hs,Ll=Ys,Ol=Ja}function Za(Qe,Je,or){ar[Qe]=function(xr,Sr,wr,kr,Ar,Tr,Pr,zr,Qr,Dr,Ur,Gr,on,Kr,un,hn,yn){var gn,Fn=yn-1>>1,Mn=Ar[Tr+0]|Pr[zr+0]<<16,rs=Qr[Dr+0]|Ur[Gr+0]<<16;t(xr!=null);var Dn=3*Mn+rs+131074>>2;for(Je(xr[Sr+0],255&Dn,Dn>>16,on,Kr),wr!=null&&(Dn=3*rs+Mn+131074>>2,Je(wr[kr+0],255&Dn,Dn>>16,un,hn)),gn=1;gn<=Fn;++gn){var cs=Ar[Tr+gn]|Pr[zr+gn]<<16,qs=Qr[Dr+gn]|Ur[Gr+gn]<<16,ns=Mn+cs+rs+qs+524296,In=ns+2*(cs+rs)>>3;Dn=In+Mn>>1,Mn=(ns=ns+2*(Mn+qs)>>3)+cs>>1,Je(xr[Sr+2*gn-1],255&Dn,Dn>>16,on,Kr+(2*gn-1)*or),Je(xr[Sr+2*gn-0],255&Mn,Mn>>16,on,Kr+(2*gn-0)*or),wr!=null&&(Dn=ns+rs>>1,Mn=In+qs>>1,Je(wr[kr+2*gn-1],255&Dn,Dn>>16,un,hn+(2*gn-1)*or),Je(wr[kr+2*gn+0],255&Mn,Mn>>16,un,hn+(2*gn+0)*or)),Mn=cs,rs=qs}1&yn||(Dn=3*Mn+rs+131074>>2,Je(xr[Sr+yn-1],255&Dn,Dn>>16,on,Kr+(yn-1)*or),wr!=null&&(Dn=3*rs+Mn+131074>>2,Je(wr[kr+yn-1],255&Dn,Dn>>16,un,hn+(yn-1)*or)))}}function to(){Na[Do]=Pc,Na[Io]=Yl,Na[Ul]=Dc,Na[Lo]=Kl,Na[Oo]=Ql,Na[ul]=Xl,Na[Vl]=Ic,Na[dl]=Yl,Na[pl]=Kl,Na[Fo]=Ql,Na[hl]=Xl}function zi(Qe){return Qe&-16384?0>Qe?0:255:Qe>>Lc}function oi(Qe,Je){return zi((19077*Qe>>8)+(26149*Je>>8)-14234)}function ki(Qe,Je,or){return zi((19077*Qe>>8)-(6419*Je>>8)-(13320*or>>8)+8708)}function Ci(Qe,Je){return zi((19077*Qe>>8)+(33050*Je>>8)-17685)}function li(Qe,Je,or,xr,Sr){xr[Sr+0]=oi(Qe,or),xr[Sr+1]=ki(Qe,Je,or),xr[Sr+2]=Ci(Qe,Je)}function Ks(Qe,Je,or,xr,Sr){xr[Sr+0]=Ci(Qe,Je),xr[Sr+1]=ki(Qe,Je,or),xr[Sr+2]=oi(Qe,or)}function Ai(Qe,Je,or,xr,Sr){var wr=ki(Qe,Je,or);Je=wr<<3&224|Ci(Qe,Je)>>3,xr[Sr+0]=248&oi(Qe,or)|wr>>5,xr[Sr+1]=Je}function Ti(Qe,Je,or,xr,Sr){var wr=240&Ci(Qe,Je)|15;xr[Sr+0]=240&oi(Qe,or)|ki(Qe,Je,or)>>4,xr[Sr+1]=wr}function ro(Qe,Je,or,xr,Sr){xr[Sr+0]=255,li(Qe,Je,or,xr,Sr+1)}function no(Qe,Je,or,xr,Sr){Ks(Qe,Je,or,xr,Sr),xr[Sr+3]=255}function na(Qe,Je,or,xr,Sr){li(Qe,Je,or,xr,Sr),xr[Sr+3]=255}function ei(Qe,Je,or){ar[Qe]=function(xr,Sr,wr,kr,Ar,Tr,Pr,zr,Qr){for(var Dr=zr+(-2&Qr)*or;zr!=Dr;)Je(xr[Sr+0],wr[kr+0],Ar[Tr+0],Pr,zr),Je(xr[Sr+1],wr[kr+0],Ar[Tr+0],Pr,zr+or),Sr+=2,++kr,++Tr,zr+=2*or;1&Qr&&Je(xr[Sr+0],wr[kr+0],Ar[Tr+0],Pr,zr)}}function $i(Qe,Je,or){return or==0?Qe==0?Je==0?6:5:Je==0?4:0:or}function To(Qe,Je,or,xr,Sr){switch(Qe>>>30){case 3:Di(Je,or,xr,Sr,0);break;case 2:Ra(Je,or,xr,Sr);break;case 1:gs(Je,or,xr,Sr)}}function Sa(Qe,Je){var or,xr,Sr=Je.M,wr=Je.Nb,kr=Qe.oc,Ar=Qe.pc+40,Tr=Qe.oc,Pr=Qe.pc+584,zr=Qe.oc,Qr=Qe.pc+600;for(or=0;16>or;++or)kr[Ar+32*or-1]=129;for(or=0;8>or;++or)Tr[Pr+32*or-1]=129,zr[Qr+32*or-1]=129;for(0<Sr?kr[Ar-1-32]=Tr[Pr-1-32]=zr[Qr-1-32]=129:(Re(kr,Ar-32-1,127,21),Re(Tr,Pr-32-1,127,9),Re(zr,Qr-32-1,127,9)),xr=0;xr<Qe.za;++xr){var Dr=Je.ya[Je.aa+xr];if(0<xr){for(or=-1;16>or;++or)Ee(kr,Ar+32*or-4,kr,Ar+32*or+12,4);for(or=-1;8>or;++or)Ee(Tr,Pr+32*or-4,Tr,Pr+32*or+4,4),Ee(zr,Qr+32*or-4,zr,Qr+32*or+4,4)}var Ur=Qe.Gd,Gr=Qe.Hd+xr,on=Dr.ad,Kr=Dr.Hc;if(0<Sr&&(Ee(kr,Ar-32,Ur[Gr].y,0,16),Ee(Tr,Pr-32,Ur[Gr].f,0,8),Ee(zr,Qr-32,Ur[Gr].ea,0,8)),Dr.Za){var un=kr,hn=Ar-32+16;for(0<Sr&&(xr>=Qe.za-1?Re(un,hn,Ur[Gr].y[15],4):Ee(un,hn,Ur[Gr+1].y,0,4)),or=0;4>or;or++)un[hn+128+or]=un[hn+256+or]=un[hn+384+or]=un[hn+0+or];for(or=0;16>or;++or,Kr<<=2)un=kr,hn=Ar+Zl[or],Ma[Dr.Ob[or]](un,hn),To(Kr,on,16*+or,un,hn)}else if(un=$i(xr,Sr,Dr.Ob[0]),xi[un](kr,Ar),Kr!=0)for(or=0;16>or;++or,Kr<<=2)To(Kr,on,16*+or,kr,Ar+Zl[or]);for(or=Dr.Gc,un=$i(xr,Sr,Dr.Dd),ni[un](Tr,Pr),ni[un](zr,Qr),Kr=on,un=Tr,hn=Pr,255&(Dr=0|or)&&(170&Dr?$a(Kr,256,un,hn):Rs(Kr,256,un,hn)),Dr=zr,Kr=Qr,255&(or>>=8)&&(170&or?$a(on,320,Dr,Kr):Rs(on,320,Dr,Kr)),Sr<Qe.Ub-1&&(Ee(Ur[Gr].y,0,kr,Ar+480,16),Ee(Ur[Gr].f,0,Tr,Pr+224,8),Ee(Ur[Gr].ea,0,zr,Qr+224,8)),or=8*wr*Qe.B,Ur=Qe.sa,Gr=Qe.ta+16*xr+16*wr*Qe.R,on=Qe.qa,Dr=Qe.ra+8*xr+or,Kr=Qe.Ha,un=Qe.Ia+8*xr+or,or=0;16>or;++or)Ee(Ur,Gr+or*Qe.R,kr,Ar+32*or,16);for(or=0;8>or;++or)Ee(on,Dr+or*Qe.B,Tr,Pr+32*or,8),Ee(Kr,un+or*Qe.B,zr,Qr+32*or,8)}}function _i(Qe,Je,or,xr,Sr,wr,kr,Ar,Tr){var Pr=[0],zr=[0],Qr=0,Dr=Tr!=null?Tr.kd:0,Ur=Tr??new xn;if(Qe==null||12>or)return 7;Ur.data=Qe,Ur.w=Je,Ur.ha=or,Je=[Je],or=[or],Ur.gb=[Ur.gb];e:{var Gr=Je,on=or,Kr=Ur.gb;if(t(Qe!=null),t(on!=null),t(Kr!=null),Kr[0]=0,12<=on[0]&&!n(Qe,Gr[0],"RIFF")){if(n(Qe,Gr[0]+8,"WEBP")){Kr=3;break e}var un=Yr(Qe,Gr[0]+4);if(12>un||4294967286<un){Kr=3;break e}if(Dr&&un>on[0]-8){Kr=7;break e}Kr[0]=un,Gr[0]+=12,on[0]-=12}Kr=0}if(Kr!=0)return Kr;for(un=0<Ur.gb[0],or=or[0];;){e:{var hn=Qe;on=Je,Kr=or;var yn=Pr,gn=zr,Fn=Gr=[0];if((Dn=Qr=[Qr])[0]=0,8>Kr[0])Kr=7;else{if(!n(hn,on[0],"VP8X")){if(Yr(hn,on[0]+4)!=10){Kr=3;break e}if(18>Kr[0]){Kr=7;break e}var Mn=Yr(hn,on[0]+8),rs=1+an(hn,on[0]+12);if(2147483648<=rs*(hn=1+an(hn,on[0]+15))){Kr=3;break e}Fn!=null&&(Fn[0]=Mn),yn!=null&&(yn[0]=rs),gn!=null&&(gn[0]=hn),on[0]+=18,Kr[0]-=18,Dn[0]=1}Kr=0}}if(Qr=Qr[0],Gr=Gr[0],Kr!=0)return Kr;if(on=!!(2&Gr),!un&&Qr)return 3;if(wr!=null&&(wr[0]=!!(16&Gr)),kr!=null&&(kr[0]=on),Ar!=null&&(Ar[0]=0),kr=Pr[0],Gr=zr[0],Qr&&on&&Tr==null){Kr=0;break}if(4>or){Kr=7;break}if(un&&Qr||!un&&!Qr&&!n(Qe,Je[0],"ALPH")){or=[or],Ur.na=[Ur.na],Ur.P=[Ur.P],Ur.Sa=[Ur.Sa];e:{Mn=Qe,Kr=Je,un=or;var Dn=Ur.gb;yn=Ur.na,gn=Ur.P,Fn=Ur.Sa,rs=22,t(Mn!=null),t(un!=null),hn=Kr[0];var cs=un[0];for(t(yn!=null),t(Fn!=null),yn[0]=null,gn[0]=null,Fn[0]=0;;){if(Kr[0]=hn,un[0]=cs,8>cs){Kr=7;break e}var qs=Yr(Mn,hn+4);if(4294967286<qs){Kr=3;break e}var ns=8+qs+1&-2;if(rs+=ns,0<Dn&&rs>Dn){Kr=3;break e}if(!n(Mn,hn,"VP8 ")||!n(Mn,hn,"VP8L")){Kr=0;break e}if(cs[0]<ns){Kr=7;break e}n(Mn,hn,"ALPH")||(yn[0]=Mn,gn[0]=hn+8,Fn[0]=qs),hn+=ns,cs-=ns}}if(or=or[0],Ur.na=Ur.na[0],Ur.P=Ur.P[0],Ur.Sa=Ur.Sa[0],Kr!=0)break}or=[or],Ur.Ja=[Ur.Ja],Ur.xa=[Ur.xa];e:if(Dn=Qe,Kr=Je,un=or,yn=Ur.gb[0],gn=Ur.Ja,Fn=Ur.xa,Mn=Kr[0],hn=!n(Dn,Mn,"VP8 "),rs=!n(Dn,Mn,"VP8L"),t(Dn!=null),t(un!=null),t(gn!=null),t(Fn!=null),8>un[0])Kr=7;else{if(hn||rs){if(Dn=Yr(Dn,Mn+4),12<=yn&&Dn>yn-12){Kr=3;break e}if(Dr&&Dn>un[0]-8){Kr=7;break e}gn[0]=Dn,Kr[0]+=8,un[0]-=8,Fn[0]=rs}else Fn[0]=5<=un[0]&&Dn[Mn+0]==47&&!(Dn[Mn+4]>>5),gn[0]=un[0];Kr=0}if(or=or[0],Ur.Ja=Ur.Ja[0],Ur.xa=Ur.xa[0],Je=Je[0],Kr!=0)break;if(4294967286<Ur.Ja)return 3;if(Ar==null||on||(Ar[0]=Ur.xa?2:1),kr=[kr],Gr=[Gr],Ur.xa){if(5>or){Kr=7;break}Ar=kr,Dr=Gr,on=wr,Qe==null||5>or?Qe=0:5<=or&&Qe[Je+0]==47&&!(Qe[Je+4]>>5)?(un=[0],Dn=[0],yn=[0],pr(gn=new gr,Qe,Je,or),Br(gn,un,Dn,yn)?(Ar!=null&&(Ar[0]=un[0]),Dr!=null&&(Dr[0]=Dn[0]),on!=null&&(on[0]=yn[0]),Qe=1):Qe=0):Qe=0}else{if(10>or){Kr=7;break}Ar=Gr,Qe==null||10>or||!vo(Qe,Je+3,or-3)?Qe=0:(Dr=Qe[Je+0]|Qe[Je+1]<<8|Qe[Je+2]<<16,on=16383&(Qe[Je+7]<<8|Qe[Je+6]),Qe=16383&(Qe[Je+9]<<8|Qe[Je+8]),1&Dr||3<(Dr>>1&7)||!(Dr>>4&1)||Dr>>5>=Ur.Ja||!on||!Qe?Qe=0:(kr&&(kr[0]=on),Ar&&(Ar[0]=Qe),Qe=1))}if(!Qe||(kr=kr[0],Gr=Gr[0],Qr&&(Pr[0]!=kr||zr[0]!=Gr)))return 3;Tr!=null&&(Tr[0]=Ur,Tr.offset=Je-Tr.w,t(4294967286>Je-Tr.w),t(Tr.offset==Tr.ha-or));break}return Kr==0||Kr==7&&Qr&&Tr==null?(wr!=null&&(wr[0]|=Ur.na!=null&&0<Ur.na.length),xr!=null&&(xr[0]=kr),Sr!=null&&(Sr[0]=Gr),0):Kr}function so(Qe,Je,or){var xr=Je.width,Sr=Je.height,wr=0,kr=0,Ar=xr,Tr=Sr;if(Je.Da=Qe!=null&&0<Qe.Da,Je.Da&&(Ar=Qe.cd,Tr=Qe.bd,wr=Qe.v,kr=Qe.j,11>or||(wr&=-2,kr&=-2),0>wr||0>kr||0>=Ar||0>=Tr||wr+Ar>xr||kr+Tr>Sr))return 0;if(Je.v=wr,Je.j=kr,Je.va=wr+Ar,Je.o=kr+Tr,Je.U=Ar,Je.T=Tr,Je.da=Qe!=null&&0<Qe.da,Je.da){if(!En(Ar,Tr,or=[Qe.ib],wr=[Qe.hb]))return 0;Je.ib=or[0],Je.hb=wr[0]}return Je.ob=Qe!=null&&Qe.ob,Je.Kb=Qe==null||!Qe.Sd,Je.da&&(Je.ob=Je.ib<3*xr/4&&Je.hb<3*Sr/4,Je.Kb=0),1}function ao(Qe){if(Qe==null)return 2;if(11>Qe.S){var Je=Qe.f.RGBA;Je.fb+=(Qe.height-1)*Je.A,Je.A=-Je.A}else Je=Qe.f.kb,Qe=Qe.height,Je.O+=(Qe-1)*Je.fa,Je.fa=-Je.fa,Je.N+=(Qe-1>>1)*Je.Ab,Je.Ab=-Je.Ab,Je.W+=(Qe-1>>1)*Je.Db,Je.Db=-Je.Db,Je.F!=null&&(Je.J+=(Qe-1)*Je.lb,Je.lb=-Je.lb);return 0}function ci(Qe,Je,or,xr){if(xr==null||0>=Qe||0>=Je)return 2;if(or!=null){if(or.Da){var Sr=or.cd,wr=or.bd,kr=-2&or.v,Ar=-2&or.j;if(0>kr||0>Ar||0>=Sr||0>=wr||kr+Sr>Qe||Ar+wr>Je)return 2;Qe=Sr,Je=wr}if(or.da){if(!En(Qe,Je,Sr=[or.ib],wr=[or.hb]))return 2;Qe=Sr[0],Je=wr[0]}}xr.width=Qe,xr.height=Je;e:{var Tr=xr.width,Pr=xr.height;if(Qe=xr.S,0>=Tr||0>=Pr||!(Qe>=Do&&13>Qe))Qe=2;else{if(0>=xr.Rd&&xr.sd==null){kr=wr=Sr=Je=0;var zr=(Ar=Tr*ec[Qe])*Pr;if(11>Qe||(wr=(Pr+1)/2*(Je=(Tr+1)/2),Qe==12&&(kr=(Sr=Tr)*Pr)),(Pr=Ce(zr+2*wr+kr))==null){Qe=1;break e}xr.sd=Pr,11>Qe?((Tr=xr.f.RGBA).eb=Pr,Tr.fb=0,Tr.A=Ar,Tr.size=zr):((Tr=xr.f.kb).y=Pr,Tr.O=0,Tr.fa=Ar,Tr.Fd=zr,Tr.f=Pr,Tr.N=0+zr,Tr.Ab=Je,Tr.Cd=wr,Tr.ea=Pr,Tr.W=0+zr+wr,Tr.Db=Je,Tr.Ed=wr,Qe==12&&(Tr.F=Pr,Tr.J=0+zr+2*wr),Tr.Tc=kr,Tr.lb=Sr)}if(Je=1,Sr=xr.S,wr=xr.width,kr=xr.height,Sr>=Do&&13>Sr)if(11>Sr)Qe=xr.f.RGBA,Je&=(Ar=Math.abs(Qe.A))*(kr-1)+wr<=Qe.size,Je&=Ar>=wr*ec[Sr],Je&=Qe.eb!=null;else{Qe=xr.f.kb,Ar=(wr+1)/2,zr=(kr+1)/2,Tr=Math.abs(Qe.fa),Pr=Math.abs(Qe.Ab);var Qr=Math.abs(Qe.Db),Dr=Math.abs(Qe.lb),Ur=Dr*(kr-1)+wr;Je&=Tr*(kr-1)+wr<=Qe.Fd,Je&=Pr*(zr-1)+Ar<=Qe.Cd,Je=(Je&=Qr*(zr-1)+Ar<=Qe.Ed)&Tr>=wr&Pr>=Ar&Qr>=Ar,Je&=Qe.y!=null,Je&=Qe.f!=null,Je&=Qe.ea!=null,Sr==12&&(Je&=Dr>=wr,Je&=Ur<=Qe.Tc,Je&=Qe.F!=null)}else Je=0;Qe=Je?0:2}}return Qe!=0||or!=null&&or.fd&&(Qe=ao(xr)),Qe}var Mi=64,ha=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],fa=24,ui=32,ti=8,di=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Lr("Predictor0","PredictorAdd0"),ar.Predictor0=function(){return 4278190080},ar.Predictor1=function(Qe){return Qe},ar.Predictor2=function(Qe,Je,or){return Je[or+0]},ar.Predictor3=function(Qe,Je,or){return Je[or+1]},ar.Predictor4=function(Qe,Je,or){return Je[or-1]},ar.Predictor5=function(Qe,Je,or){return tn(tn(Qe,Je[or+1]),Je[or+0])},ar.Predictor6=function(Qe,Je,or){return tn(Qe,Je[or-1])},ar.Predictor7=function(Qe,Je,or){return tn(Qe,Je[or+0])},ar.Predictor8=function(Qe,Je,or){return tn(Je[or-1],Je[or+0])},ar.Predictor9=function(Qe,Je,or){return tn(Je[or+0],Je[or+1])},ar.Predictor10=function(Qe,Je,or){return tn(tn(Qe,Je[or-1]),tn(Je[or+0],Je[or+1]))},ar.Predictor11=function(Qe,Je,or){var xr=Je[or+0];return 0>=fn(xr>>24&255,Qe>>24&255,(Je=Je[or-1])>>24&255)+fn(xr>>16&255,Qe>>16&255,Je>>16&255)+fn(xr>>8&255,Qe>>8&255,Je>>8&255)+fn(255&xr,255&Qe,255&Je)?xr:Qe},ar.Predictor12=function(Qe,Je,or){var xr=Je[or+0];return(sn((Qe>>24&255)+(xr>>24&255)-((Je=Je[or-1])>>24&255))<<24|sn((Qe>>16&255)+(xr>>16&255)-(Je>>16&255))<<16|sn((Qe>>8&255)+(xr>>8&255)-(Je>>8&255))<<8|sn((255&Qe)+(255&xr)-(255&Je)))>>>0},ar.Predictor13=function(Qe,Je,or){var xr=Je[or-1];return(en((Qe=tn(Qe,Je[or+0]))>>24&255,xr>>24&255)<<24|en(Qe>>16&255,xr>>16&255)<<16|en(Qe>>8&255,xr>>8&255)<<8|en(255&Qe,255&xr))>>>0};var io=ar.PredictorAdd0;ar.PredictorAdd1=Sn,Lr("Predictor2","PredictorAdd2"),Lr("Predictor3","PredictorAdd3"),Lr("Predictor4","PredictorAdd4"),Lr("Predictor5","PredictorAdd5"),Lr("Predictor6","PredictorAdd6"),Lr("Predictor7","PredictorAdd7"),Lr("Predictor8","PredictorAdd8"),Lr("Predictor9","PredictorAdd9"),Lr("Predictor10","PredictorAdd10"),Lr("Predictor11","PredictorAdd11"),Lr("Predictor12","PredictorAdd12"),Lr("Predictor13","PredictorAdd13");var Ui=ar.PredictorAdd2;Nn("ColorIndexInverseTransform","MapARGB","32b",function(Qe){return Qe>>8&255},function(Qe){return Qe}),Nn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(Qe){return Qe},function(Qe){return Qe>>8&255});var Ds,_o=ar.ColorIndexInverseTransform,Ha=ar.MapARGB,za=ar.VP8LColorIndexInverseTransformAlpha,oo=ar.MapAlpha,lo=ar.VP8LPredictorsAdd=[];lo.length=16,(ar.VP8LPredictors=[]).length=16,(ar.VP8LPredictorsAdd_C=[]).length=16,(ar.VP8LPredictors_C=[]).length=16;var co,uo,pi,hi,fi,Pi,mi,Di,Ra,$a,gs,Rs,Is,Vs,ri,po,Vi,Mo,Al,Tl,_l,Ml,Pl,Dl,ho,Il,Ll,Ol,Fl=Ce(511),Bl=Ce(2041),Hl=Ce(225),zl=Ce(767),$l=0,cl=Bl,Po=Hl,ma=zl,wa=Fl,Do=0,Io=1,Ul=2,Lo=3,Oo=4,ul=5,Vl=6,dl=7,pl=8,Fo=9,hl=10,vc=[2,3,7],bc=[3,3,11],ql=[280,256,256,256,40],Ec=[0,1,1,1,0],jc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Sc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Rc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],wc=8,ml=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],xl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fo=null,Nc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],kc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Wl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Cc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ac=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Tc=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_c=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xi=[],Ma=[],ni=[],Mc=1,Gl=2,gi=[],Na=[];Za("UpsampleRgbLinePair",li,3),Za("UpsampleBgrLinePair",Ks,3),Za("UpsampleRgbaLinePair",na,4),Za("UpsampleBgraLinePair",no,4),Za("UpsampleArgbLinePair",ro,4),Za("UpsampleRgba4444LinePair",Ti,2),Za("UpsampleRgb565LinePair",Ai,2);var Pc=ar.UpsampleRgbLinePair,Dc=ar.UpsampleBgrLinePair,Yl=ar.UpsampleRgbaLinePair,Kl=ar.UpsampleBgraLinePair,Ql=ar.UpsampleArgbLinePair,Xl=ar.UpsampleRgba4444LinePair,Ic=ar.UpsampleRgb565LinePair,Bo=16,Ho=1<<Bo-1,mo=-227,gl=482,Lc=6,Jl=0,Oc=Ce(256),Fc=Ce(256),Bc=Ce(256),Hc=Ce(256),zc=Ce(gl-mo),$c=Ce(gl-mo);ei("YuvToRgbRow",li,3),ei("YuvToBgrRow",Ks,3),ei("YuvToRgbaRow",na,4),ei("YuvToBgraRow",no,4),ei("YuvToArgbRow",ro,4),ei("YuvToRgba4444Row",Ti,2),ei("YuvToRgb565Row",Ai,2);var Zl=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zo=[0,2,8],Uc=[8,7,6,4,4,2,2,2,1,1,1,1],Vc=1;this.WebPDecodeRGBA=function(Qe,Je,or,xr,Sr){var wr=Io,kr=new pn,Ar=new Zn;kr.ba=Ar,Ar.S=wr,Ar.width=[Ar.width],Ar.height=[Ar.height];var Tr=Ar.width,Pr=Ar.height,zr=new Un;if(zr==null||Qe==null)var Qr=2;else t(zr!=null),Qr=_i(Qe,Je,or,zr.width,zr.height,zr.Pd,zr.Qd,zr.format,null);if(Qr!=0?Tr=0:(Tr!=null&&(Tr[0]=zr.width[0]),Pr!=null&&(Pr[0]=zr.height[0]),Tr=1),Tr){Ar.width=Ar.width[0],Ar.height=Ar.height[0],xr!=null&&(xr[0]=Ar.width),Sr!=null&&(Sr[0]=Ar.height);e:{if(xr=new pa,(Sr=new xn).data=Qe,Sr.w=Je,Sr.ha=or,Sr.kd=1,Je=[0],t(Sr!=null),((Qe=_i(Sr.data,Sr.w,Sr.ha,null,null,null,Je,null,Sr))==0||Qe==7)&&Je[0]&&(Qe=4),(Je=Qe)==0){if(t(kr!=null),xr.data=Sr.data,xr.w=Sr.w+Sr.offset,xr.ha=Sr.ha-Sr.offset,xr.put=Vn,xr.ac=ra,xr.bc=ka,xr.ma=kr,Sr.xa){if((Qe=Cs())==null){kr=1;break e}if(function(Dr,Ur){var Gr=[0],on=[0],Kr=[0];t:for(;;){if(Dr==null)return 0;if(Ur==null)return Dr.a=2,0;if(Dr.l=Ur,Dr.a=0,pr(Dr.m,Ur.data,Ur.w,Ur.ha),!Br(Dr.m,Gr,on,Kr)){Dr.a=3;break t}if(Dr.xb=Gl,Ur.width=Gr[0],Ur.height=on[0],!ls(Gr[0],on[0],1,Dr,null))break t;return 1}return t(Dr.a!=0),0}(Qe,xr)){if(xr=(Je=ci(xr.width,xr.height,kr.Oa,kr.ba))==0){t:{xr=Qe;r:for(;;){if(xr==null){xr=0;break t}if(t(xr.s.yc!=null),t(xr.s.Ya!=null),t(0<xr.s.Wb),t((or=xr.l)!=null),t((Sr=or.ma)!=null),xr.xb!=0){if(xr.ca=Sr.ba,xr.tb=Sr.tb,t(xr.ca!=null),!so(Sr.Oa,or,Lo)){xr.a=2;break r}if(!ss(xr,or.width)||or.da)break r;if((or.da||Hn(xr.ca.S))&&Ta(),11>xr.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),xr.ca.f.kb.F!=null&&Ta()),xr.Pb&&0<xr.s.ua&&xr.s.vb.X==null&&!Rr(xr.s.vb,xr.s.Wa.Xa)){xr.a=1;break r}xr.xb=0}if(!$n(xr,xr.V,xr.Ba,xr.c,xr.i,or.o,Tn))break r;Sr.Dc=xr.Ma,xr=1;break t}t(xr.a!=0),xr=0}xr=!xr}xr&&(Je=Qe.a)}else Je=Qe.a}else{if((Qe=new Li)==null){kr=1;break e}if(Qe.Fa=Sr.na,Qe.P=Sr.P,Qe.qc=Sr.Sa,Fa(Qe,xr)){if((Je=ci(xr.width,xr.height,kr.Oa,kr.ba))==0){if(Qe.Aa=0,or=kr.Oa,t((Sr=Qe)!=null),or!=null){if(0<(Tr=0>(Tr=or.Md)?0:100<Tr?255:255*Tr/100)){for(Pr=zr=0;4>Pr;++Pr)12>(Qr=Sr.pb[Pr]).lc&&(Qr.ia=Tr*Uc[0>Qr.lc?0:Qr.lc]>>3),zr|=Qr.ia;zr&&(alert("todo:VP8InitRandom"),Sr.ia=1)}Sr.Ga=or.Id,100<Sr.Ga?Sr.Ga=100:0>Sr.Ga&&(Sr.Ga=0)}(function(Dr,Ur){if(Dr==null)return 0;if(Ur==null)return _s(Dr,2,"NULL VP8Io parameter in VP8Decode().");if(!Dr.cb&&!Fa(Dr,Ur))return 0;if(t(Dr.cb),Ur.ac==null||Ur.ac(Ur)){Ur.ob&&(Dr.L=0);var Gr=zo[Dr.L];if(Dr.L==2?(Dr.yb=0,Dr.zb=0):(Dr.yb=Ur.v-Gr>>4,Dr.zb=Ur.j-Gr>>4,0>Dr.yb&&(Dr.yb=0),0>Dr.zb&&(Dr.zb=0)),Dr.Va=Ur.o+15+Gr>>4,Dr.Hb=Ur.va+15+Gr>>4,Dr.Hb>Dr.za&&(Dr.Hb=Dr.za),Dr.Va>Dr.Ub&&(Dr.Va=Dr.Ub),0<Dr.L){var on=Dr.ed;for(Gr=0;4>Gr;++Gr){var Kr;if(Dr.Qa.Cb){var un=Dr.Qa.Lb[Gr];Dr.Qa.Fb||(un+=on.Tb)}else un=on.Tb;for(Kr=0;1>=Kr;++Kr){var hn=Dr.gd[Gr][Kr],yn=un;if(on.Pc&&(yn+=on.vd[0],Kr&&(yn+=on.od[0])),0<(yn=0>yn?0:63<yn?63:yn)){var gn=yn;0<on.wb&&(gn=4<on.wb?gn>>2:gn>>1)>9-on.wb&&(gn=9-on.wb),1>gn&&(gn=1),hn.dd=gn,hn.tc=2*yn+gn,hn.ld=40<=yn?2:15<=yn?1:0}else hn.tc=0;hn.La=Kr}}}Gr=0}else _s(Dr,6,"Frame setup failed"),Gr=Dr.a;if(Gr=Gr==0){if(Gr){Dr.$c=0,0<Dr.Aa||(Dr.Ic=Vc);t:{Gr=Dr.Ic,on=4*(gn=Dr.za);var Fn=32*gn,Mn=gn+1,rs=0<Dr.L?gn*(0<Dr.Aa?2:1):0,Dn=(Dr.Aa==2?2:1)*gn;if((hn=on+832+(Kr=3*(16*Gr+zo[Dr.L])/2*Fn)+(un=Dr.Fa!=null&&0<Dr.Fa.length?Dr.Kc.c*Dr.Kc.i:0))!=hn)Gr=0;else{if(hn>Dr.Vb){if(Dr.Vb=0,Dr.Ec=Ce(hn),Dr.Fc=0,Dr.Ec==null){Gr=_s(Dr,1,"no memory during frame initialization.");break t}Dr.Vb=hn}hn=Dr.Ec,yn=Dr.Fc,Dr.Ac=hn,Dr.Bc=yn,yn+=on,Dr.Gd=Te(Fn,Ca),Dr.Hd=0,Dr.rb=Te(Mn+1,La),Dr.sb=1,Dr.wa=rs?Te(rs,Fs):null,Dr.Y=0,Dr.D.Nb=0,Dr.D.wa=Dr.wa,Dr.D.Y=Dr.Y,0<Dr.Aa&&(Dr.D.Y+=gn),t(!0),Dr.oc=hn,Dr.pc=yn,yn+=832,Dr.ya=Te(Dn,as),Dr.aa=0,Dr.D.ya=Dr.ya,Dr.D.aa=Dr.aa,Dr.Aa==2&&(Dr.D.aa+=gn),Dr.R=16*gn,Dr.B=8*gn,gn=(Fn=zo[Dr.L])*Dr.R,Fn=Fn/2*Dr.B,Dr.sa=hn,Dr.ta=yn+gn,Dr.qa=Dr.sa,Dr.ra=Dr.ta+16*Gr*Dr.R+Fn,Dr.Ha=Dr.qa,Dr.Ia=Dr.ra+8*Gr*Dr.B+Fn,Dr.$c=0,yn+=Kr,Dr.mb=un?hn:null,Dr.nb=un?yn:null,t(yn+un<=Dr.Fc+Dr.Vb),bo(Dr),Re(Dr.Ac,Dr.Bc,0,on),Gr=1}}if(Gr){if(Ur.ka=0,Ur.y=Dr.sa,Ur.O=Dr.ta,Ur.f=Dr.qa,Ur.N=Dr.ra,Ur.ea=Dr.Ha,Ur.Vd=Dr.Ia,Ur.fa=Dr.R,Ur.Rc=Dr.B,Ur.F=null,Ur.J=0,!$l){for(Gr=-255;255>=Gr;++Gr)Fl[255+Gr]=0>Gr?-Gr:Gr;for(Gr=-1020;1020>=Gr;++Gr)Bl[1020+Gr]=-128>Gr?-128:127<Gr?127:Gr;for(Gr=-112;112>=Gr;++Gr)Hl[112+Gr]=-16>Gr?-16:15<Gr?15:Gr;for(Gr=-255;510>=Gr;++Gr)zl[255+Gr]=0>Gr?0:255<Gr?255:Gr;$l=1}mi=Fi,Di=Qo,$a=Ba,gs=jo,Rs=So,Ra=Ko,Is=Co,Vs=Ni,ri=jr,po=Ir,Vi=Ao,Mo=sr,Al=Hr,Tl=qr,_l=wi,Ml=eo,Pl=No,Dl=ko,Ma[0]=sl,Ma[1]=Xo,Ma[2]=rl,Ma[3]=nl,Ma[4]=Wa,Ma[5]=al,Ma[6]=Ga,Ma[7]=il,Ma[8]=Ki,Ma[9]=Bi,xi[0]=el,xi[1]=Zo,xi[2]=Gi,xi[3]=Ro,xi[4]=Si,xi[5]=Yi,xi[6]=tl,ni[0]=ll,ni[1]=Jo,ni[2]=Ri,ni[3]=ol,ni[4]=Xi,ni[5]=Qi,ni[6]=wo,Gr=1}else Gr=0}Gr&&(Gr=function(cs,qs){for(cs.M=0;cs.M<cs.Va;++cs.M){var ns,In=cs.Jc[cs.M&cs.Xb],wn=cs.m,Ls=cs;for(ns=0;ns<Ls.za;++ns){var Jn=wn,us=Ls,As=us.Ac,Qs=us.Bc+4*ns,sa=us.zc,Ms=us.ya[us.aa+ns];if(us.Qa.Bb?Ms.$b=Wr(Jn,us.Pa.jb[0])?2+Wr(Jn,us.Pa.jb[2]):Wr(Jn,us.Pa.jb[1]):Ms.$b=0,us.kc&&(Ms.Ad=Wr(Jn,us.Bd)),Ms.Za=!Wr(Jn,145)+0,Ms.Za){var ea=Ms.Ob,aa=0;for(us=0;4>us;++us){var Ws,hs=sa[0+us];for(Ws=0;4>Ws;++Ws){hs=Ac[As[Qs+Ws]][hs];for(var vs=Wl[Wr(Jn,hs[0])];0<vs;)vs=Wl[2*vs+Wr(Jn,hs[vs])];hs=-vs,As[Qs+Ws]=hs}Ee(ea,aa,As,Qs,4),aa+=4,sa[0+us]=hs}}else hs=Wr(Jn,156)?Wr(Jn,128)?1:3:Wr(Jn,163)?2:0,Ms.Ob[0]=hs,Re(As,Qs,hs,4),Re(sa,0,hs,4);Ms.Dd=Wr(Jn,142)?Wr(Jn,114)?Wr(Jn,183)?1:3:2:0}if(Ls.m.Ka)return _s(cs,7,"Premature end-of-partition0 encountered.");for(;cs.ja<cs.za;++cs.ja){if(Ls=In,Jn=(wn=cs).rb[wn.sb-1],As=wn.rb[wn.sb+wn.ja],ns=wn.ya[wn.aa+wn.ja],Qs=wn.kc?ns.Ad:0)Jn.la=As.la=0,ns.Za||(Jn.Na=As.Na=0),ns.Hc=0,ns.Gc=0,ns.ia=0;else{var Ps,bs;if(Jn=As,As=Ls,Qs=wn.Pa.Xc,sa=wn.ya[wn.aa+wn.ja],Ms=wn.pb[sa.$b],us=sa.ad,ea=0,aa=wn.rb[wn.sb-1],hs=Ws=0,Re(us,ea,0,384),sa.Za)var Xs=0,Pa=Qs[3];else{vs=Ce(16);var Os=Jn.Na+aa.Na;if(Os=fo(As,Qs[1],Os,Ms.Eb,0,vs,0),Jn.Na=aa.Na=(0<Os)+0,1<Os)mi(vs,0,us,ea);else{var la=vs[0]+3>>3;for(vs=0;256>vs;vs+=16)us[ea+vs]=la}Xs=1,Pa=Qs[0]}var ws=15&Jn.la,Gs=15&aa.la;for(vs=0;4>vs;++vs){var xa=1&Gs;for(la=bs=0;4>la;++la)ws=ws>>1|(xa=(Os=fo(As,Pa,Os=xa+(1&ws),Ms.Sc,Xs,us,ea))>Xs)<<7,bs=bs<<2|(3<Os?3:1<Os?2:us[ea+0]!=0),ea+=16;ws>>=4,Gs=Gs>>1|xa<<7,Ws=(Ws<<8|bs)>>>0}for(Pa=ws,Xs=Gs>>4,Ps=0;4>Ps;Ps+=2){for(bs=0,ws=Jn.la>>4+Ps,Gs=aa.la>>4+Ps,vs=0;2>vs;++vs){for(xa=1&Gs,la=0;2>la;++la)Os=xa+(1&ws),ws=ws>>1|(xa=0<(Os=fo(As,Qs[2],Os,Ms.Qc,0,us,ea)))<<3,bs=bs<<2|(3<Os?3:1<Os?2:us[ea+0]!=0),ea+=16;ws>>=2,Gs=Gs>>1|xa<<5}hs|=bs<<4*Ps,Pa|=ws<<4<<Ps,Xs|=(240&Gs)<<Ps}Jn.la=Pa,aa.la=Xs,sa.Hc=Ws,sa.Gc=hs,sa.ia=43690&hs?0:Ms.ia,Qs=!(Ws|hs)}if(0<wn.L&&(wn.wa[wn.Y+wn.ja]=wn.gd[ns.$b][ns.Za],wn.wa[wn.Y+wn.ja].La|=!Qs),Ls.Ka)return _s(cs,7,"Premature end-of-file encountered.")}if(bo(cs),wn=qs,Ls=1,ns=(In=cs).D,Jn=0<In.L&&In.M>=In.zb&&In.M<=In.Va,In.Aa==0)t:{if(ns.M=In.M,ns.uc=Jn,Sa(In,ns),Ls=1,ns=(bs=In.D).Nb,Jn=(hs=zo[In.L])*In.R,As=hs/2*In.B,vs=16*ns*In.R,la=8*ns*In.B,Qs=In.sa,sa=In.ta-Jn+vs,Ms=In.qa,us=In.ra-As+la,ea=In.Ha,aa=In.Ia-As+la,Gs=(ws=bs.M)==0,Ws=ws>=In.Va-1,In.Aa==2&&Sa(In,bs),bs.uc)for(xa=(Os=In).D.M,t(Os.D.uc),bs=Os.yb;bs<Os.Hb;++bs){Xs=bs,Pa=xa;var ia=(ga=(Js=Os).D).Nb;Ps=Js.R;var ga=ga.wa[ga.Y+Xs],ya=Js.sa,ca=Js.ta+16*ia*Ps+16*Xs,va=ga.dd,ks=ga.tc;if(ks!=0)if(t(3<=ks),Js.L==1)0<Xs&&Ml(ya,ca,Ps,ks+4),ga.La&&Dl(ya,ca,Ps,ks),0<Pa&&_l(ya,ca,Ps,ks+4),ga.La&&Pl(ya,ca,Ps,ks);else{var ba=Js.B,Da=Js.qa,Ii=Js.ra+8*ia*ba+8*Xs,si=Js.Ha,Js=Js.Ia+8*ia*ba+8*Xs;ia=ga.ld,0<Xs&&(Vs(ya,ca,Ps,ks+4,va,ia),po(Da,Ii,si,Js,ba,ks+4,va,ia)),ga.La&&(Mo(ya,ca,Ps,ks,va,ia),Tl(Da,Ii,si,Js,ba,ks,va,ia)),0<Pa&&(Is(ya,ca,Ps,ks+4,va,ia),ri(Da,Ii,si,Js,ba,ks+4,va,ia)),ga.La&&(Vi(ya,ca,Ps,ks,va,ia),Al(Da,Ii,si,Js,ba,ks,va,ia))}}if(In.ia&&alert("todo:DitherRow"),wn.put!=null){if(bs=16*ws,ws=16*(ws+1),Gs?(wn.y=In.sa,wn.O=In.ta+vs,wn.f=In.qa,wn.N=In.ra+la,wn.ea=In.Ha,wn.W=In.Ia+la):(bs-=hs,wn.y=Qs,wn.O=sa,wn.f=Ms,wn.N=us,wn.ea=ea,wn.W=aa),Ws||(ws-=hs),ws>wn.o&&(ws=wn.o),wn.F=null,wn.J=null,In.Fa!=null&&0<In.Fa.length&&bs<ws&&(wn.J=Ns(In,wn,bs,ws-bs),wn.F=In.mb,wn.F==null&&wn.F.length==0)){Ls=_s(In,3,"Could not decode alpha data.");break t}bs<wn.j&&(hs=wn.j-bs,bs=wn.j,t(!(1&hs)),wn.O+=In.R*hs,wn.N+=In.B*(hs>>1),wn.W+=In.B*(hs>>1),wn.F!=null&&(wn.J+=wn.width*hs)),bs<ws&&(wn.O+=wn.v,wn.N+=wn.v>>1,wn.W+=wn.v>>1,wn.F!=null&&(wn.J+=wn.v),wn.ka=bs-wn.j,wn.U=wn.va-wn.v,wn.T=ws-bs,Ls=wn.put(wn))}ns+1!=In.Ic||Ws||(Ee(In.sa,In.ta-Jn,Qs,sa+16*In.R,Jn),Ee(In.qa,In.ra-As,Ms,us+8*In.B,As),Ee(In.Ha,In.Ia-As,ea,aa+8*In.B,As))}if(!Ls)return _s(cs,6,"Output aborted.")}return 1}(Dr,Ur)),Ur.bc!=null&&Ur.bc(Ur),Gr&=1}return Gr?(Dr.cb=0,Gr):0})(Qe,xr)||(Je=Qe.a)}}else Je=Qe.a}Je==0&&kr.Oa!=null&&kr.Oa.fd&&(Je=ao(kr.ba))}kr=Je}wr=kr!=0?null:11>wr?Ar.f.RGBA.eb:Ar.f.kb.y}else wr=null;return wr};var ec=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Oe(ar,hr){for(var ur="",dr=0;dr<4;dr++)ur+=String.fromCharCode(ar[hr++]);return ur}function Be(ar,hr){return ar[hr+0]|ar[hr+1]<<8}function ze(ar,hr){return(ar[hr+0]|ar[hr+1]<<8|ar[hr+2]<<16)>>>0}function $e(ar,hr){return(ar[hr+0]|ar[hr+1]<<8|ar[hr+2]<<16|ar[hr+3]<<24)>>>0}new De;var He=[0],Ue=[0],Ve=[],We=new De,qe=e,Ge=function(ar,hr){var ur={},dr=0,vr=!1,yr=0,br=0;if(ur.frames=[],!function(nr,gr){for(var Er=0;Er<4;Er++)if(nr[gr+Er]!="RIFF".charCodeAt(Er))return!0;return!1}(ar,hr)){for($e(ar,hr+=4),hr+=8;hr<ar.length;){var lr=Oe(ar,hr),cr=$e(ar,hr+=4);hr+=4;var rr=cr+(1&cr);switch(lr){case"VP8 ":case"VP8L":ur.frames[dr]===void 0&&(ur.frames[dr]={}),(ir=ur.frames[dr]).src_off=vr?br:hr-8,ir.src_size=yr+cr+8,dr++,vr&&(vr=!1,yr=0,br=0);break;case"VP8X":(ir=ur.header={}).feature_flags=ar[hr];var pr=hr+4;ir.canvas_width=1+ze(ar,pr),pr+=3,ir.canvas_height=1+ze(ar,pr),pr+=3;break;case"ALPH":vr=!0,yr=rr+8,br=hr-8;break;case"ANIM":(ir=ur.header).bgcolor=$e(ar,hr),pr=hr+4,ir.loop_count=Be(ar,pr),pr+=2;break;case"ANMF":var mr,ir;(ir=ur.frames[dr]={}).offset_x=2*ze(ar,hr),hr+=3,ir.offset_y=2*ze(ar,hr),hr+=3,ir.width=1+ze(ar,hr),hr+=3,ir.height=1+ze(ar,hr),hr+=3,ir.duration=ze(ar,hr),hr+=3,mr=ar[hr++],ir.dispose=1&mr,ir.blend=mr>>1&1}lr!="ANMF"&&(hr+=rr)}return ur}}(qe,0);Ge.response=qe,Ge.rgbaoutput=!0,Ge.dataurl=!1;var Ye=Ge.header?Ge.header:null,Ke=Ge.frames?Ge.frames:null;if(Ye){Ye.loop_counter=Ye.loop_count,He=[Ye.canvas_height],Ue=[Ye.canvas_width];for(var Xe=0;Xe<Ke.length&&Ke[Xe].blend!=0;Xe++);}var Ze=Ke[0],er=We.WebPDecodeRGBA(qe,Ze.src_off,Ze.src_size,Ue,He);Ze.rgba=er,Ze.imgwidth=Ue[0],Ze.imgheight=He[0];for(var St=0;St<Ue[0]*He[0]*4;St++)Ve[St]=er[St];return this.width=Ue,this.height=He,this.data=Ve,this}(function(e){var t,n,Ee,Re,Ce,Te,Me,De,Oe,Be=function(nr){return nr=nr||{},this.isStrokeTransparent=nr.isStrokeTransparent||!1,this.strokeOpacity=nr.strokeOpacity||1,this.strokeStyle=nr.strokeStyle||"#000000",this.fillStyle=nr.fillStyle||"#000000",this.isFillTransparent=nr.isFillTransparent||!1,this.fillOpacity=nr.fillOpacity||1,this.font=nr.font||"10px sans-serif",this.textBaseline=nr.textBaseline||"alphabetic",this.textAlign=nr.textAlign||"left",this.lineWidth=nr.lineWidth||1,this.lineJoin=nr.lineJoin||"miter",this.lineCap=nr.lineCap||"butt",this.path=nr.path||[],this.transform=nr.transform!==void 0?nr.transform.clone():new De,this.globalCompositeOperation=nr.globalCompositeOperation||"normal",this.globalAlpha=nr.globalAlpha||1,this.clip_path=nr.clip_path||[],this.currentPoint=nr.currentPoint||new Te,this.miterLimit=nr.miterLimit||10,this.lastPoint=nr.lastPoint||new Te,this.lineDashOffset=nr.lineDashOffset||0,this.lineDash=nr.lineDash||[],this.margin=nr.margin||[0,0,0,0],this.prevPageLastElemOffset=nr.prevPageLastElemOffset||0,this.ignoreClearRect=typeof nr.ignoreClearRect!="boolean"||nr.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new ze(this),t=this.internal.f2,n=this.internal.getCoordinateString,Ee=this.internal.getVerticalCoordinateString,Re=this.internal.getHorizontalCoordinate,Ce=this.internal.getVerticalCoordinate,Te=this.internal.Point,Me=this.internal.Rectangle,De=this.internal.Matrix,Oe=new Be}]);var ze=function(nr){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var gr=nr;Object.defineProperty(this,"pdf",{get:function(){return gr}});var Er=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Er},set:function(Rr){Er=!!Rr}});var Cr=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Cr},set:function(Rr){Cr=!!Rr}});var Nr=0;Object.defineProperty(this,"posX",{get:function(){return Nr},set:function(Rr){isNaN(Rr)||(Nr=Rr)}});var Mr=0;Object.defineProperty(this,"posY",{get:function(){return Mr},set:function(Rr){isNaN(Rr)||(Mr=Rr)}}),Object.defineProperty(this,"margin",{get:function(){return Oe.margin},set:function(Rr){var Xr;typeof Rr=="number"?Xr=[Rr,Rr,Rr,Rr]:((Xr=new Array(4))[0]=Rr[0],Xr[1]=Rr.length>=2?Rr[1]:Xr[0],Xr[2]=Rr.length>=3?Rr[2]:Xr[0],Xr[3]=Rr.length>=4?Rr[3]:Xr[1]),Oe.margin=Xr}});var Fr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Fr},set:function(Rr){Fr=Rr}});var $r=0;Object.defineProperty(this,"lastBreak",{get:function(){return $r},set:function(Rr){$r=Rr}});var Wr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Wr},set:function(Rr){Wr=Rr}}),Object.defineProperty(this,"ctx",{get:function(){return Oe},set:function(Rr){Rr instanceof Be&&(Oe=Rr)}}),Object.defineProperty(this,"path",{get:function(){return Oe.path},set:function(Rr){Oe.path=Rr}});var Zr=[];Object.defineProperty(this,"ctxStack",{get:function(){return Zr},set:function(Rr){Zr=Rr}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Rr){var Xr;Xr=$e(Rr),this.ctx.fillStyle=Xr.style,this.ctx.isFillTransparent=Xr.a===0,this.ctx.fillOpacity=Xr.a,this.pdf.setFillColor(Xr.r,Xr.g,Xr.b,{a:Xr.a}),this.pdf.setTextColor(Xr.r,Xr.g,Xr.b,{a:Xr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Rr){var Xr=$e(Rr);this.ctx.strokeStyle=Xr.style,this.ctx.isStrokeTransparent=Xr.a===0,this.ctx.strokeOpacity=Xr.a,Xr.a===0?this.pdf.setDrawColor(255,255,255):(Xr.a,this.pdf.setDrawColor(Xr.r,Xr.g,Xr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Rr){["butt","round","square"].indexOf(Rr)!==-1&&(this.ctx.lineCap=Rr,this.pdf.setLineCap(Rr))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Rr){isNaN(Rr)||(this.ctx.lineWidth=Rr,this.pdf.setLineWidth(Rr))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Rr){["bevel","round","miter"].indexOf(Rr)!==-1&&(this.ctx.lineJoin=Rr,this.pdf.setLineJoin(Rr))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Rr){isNaN(Rr)||(this.ctx.miterLimit=Rr,this.pdf.setMiterLimit(Rr))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Rr){this.ctx.textBaseline=Rr}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Rr){["right","end","center","left","start"].indexOf(Rr)!==-1&&(this.ctx.textAlign=Rr)}});var nn=null,an=null,Yr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Yr},set:function(Rr){nn=null,an=null,Yr=Rr}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Rr){var Xr;if(this.ctx.font=Rr,(Xr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Rr))!==null){var mn=Xr[1];Xr[2];var En=Xr[3],rn=Xr[4];Xr[5];var _r=Xr[6],Lr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(rn)[2];rn=Math.floor(Lr==="px"?parseFloat(rn)*this.pdf.internal.scaleFactor:Lr==="em"?parseFloat(rn)*this.pdf.getFontSize():parseFloat(rn)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(rn);var Or=function(Nn){var js,qn,Gn=[],Xn=Nn.trim();if(Xn==="")return Jt;if(Xn in Mt)return[Mt[Xn]];for(;Xn!=="";){switch(qn=null,js=(Xn=Et(Xn)).charAt(0)){case'"':case"'":qn=Rt(Xn.substring(1),js);break;default:qn=Dt(Xn)}if(qn===null||(Gn.push(qn[0]),(Xn=Et(qn[1]))!==""&&Xn.charAt(0)!==","))return Jt;Xn=Xn.replace(/^,/,"")}return Gn}(_r);if(this.fontFaces){var tn=function(Nn,js){var qn=Nn.getFontList(),Gn=JSON.stringify(qn);if(nn===null||an!==Gn){var Xn=function(xs){var Bn=[];return Object.keys(xs).forEach(function(fs){xs[fs].forEach(function(Hn){var Yn=null;switch(Hn){case"bold":Yn={family:fs,weight:"bold"};break;case"italic":Yn={family:fs,style:"italic"};break;case"bolditalic":Yn={family:fs,weight:"bold",style:"italic"};break;case"":case"normal":Yn={family:fs}}Yn!==null&&(Yn.ref={name:fs,style:Hn},Bn.push(Yn))})}),Bn}(qn);nn=function(xs){for(var Bn={},fs=0;fs<xs.length;++fs){var Hn=Ct(xs[fs]),Yn=Hn.family,Es=Hn.stretch,Zn=Hn.style,Un=Hn.weight;Bn[Yn]=Bn[Yn]||{},Bn[Yn][Es]=Bn[Yn][Es]||{},Bn[Yn][Es][Zn]=Bn[Yn][Es][Zn]||{},Bn[Yn][Es][Zn][Un]=Hn}return Bn}(Xn.concat(js)),an=Gn}return nn}(this.pdf,this.fontFaces),sn=Or.map(function(Nn){return{family:Nn,stretch:"normal",weight:En,style:mn}}),en=function(Nn,js,qn){for(var Gn=(qn=qn||{}).defaultFontFamily||"times",Xn=Object.assign({},Bt,qn.genericFontFamilies||{}),xs=null,Bn=null,fs=0;fs<js.length;++fs)if(Xn[(xs=Ct(js[fs])).family]&&(xs.family=Xn[xs.family]),Nn.hasOwnProperty(xs.family)){Bn=Nn[xs.family];break}if(!(Bn=Bn||Nn[Gn]))throw new Error("Could not find a font-family for the rule '"+qt(xs)+"' and default family '"+Gn+"'.");if(Bn=function(Hn,Yn){if(Yn[Hn])return Yn[Hn];var Es=Ft[Hn],Zn=Es<=Ft.normal?-1:1,Un=Ot(Yn,kt,Es,Zn);if(!Un)throw new Error("Could not find a matching font-stretch value for "+Hn);return Un}(xs.stretch,Bn),Bn=function(Hn,Yn){if(Yn[Hn])return Yn[Hn];for(var Es=Pt[Hn],Zn=0;Zn<Es.length;++Zn)if(Yn[Es[Zn]])return Yn[Es[Zn]];throw new Error("Could not find a matching font-style for "+Hn)}(xs.style,Bn),!(Bn=function(Hn,Yn){if(Yn[Hn])return Yn[Hn];if(Hn===400&&Yn[500])return Yn[500];if(Hn===500&&Yn[400])return Yn[400];var Es=jt[Hn],Zn=Ot(Yn,It,Es,Hn<400?-1:1);if(!Zn)throw new Error("Could not find a matching font-weight for value "+Hn);return Zn}(xs.weight,Bn)))throw new Error("Failed to resolve a font for the rule '"+qt(xs)+"'.");return Bn}(tn,sn);this.pdf.setFont(en.ref.name,en.ref.style)}else{var fn="";(En==="bold"||parseInt(En,10)>=700||mn==="bold")&&(fn="bold"),mn==="italic"&&(fn+="italic"),fn.length===0&&(fn="normal");for(var Sn="",Rn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},jn=0;jn<Or.length;jn++){if(this.pdf.internal.getFont(Or[jn],fn,{noFallback:!0,disableWarning:!0})!==void 0){Sn=Or[jn];break}if(fn==="bolditalic"&&this.pdf.internal.getFont(Or[jn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Sn=Or[jn],fn="bold";else if(this.pdf.internal.getFont(Or[jn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Sn=Or[jn],fn="normal";break}}if(Sn===""){for(var On=0;On<Or.length;On++)if(Rn[Or[On]]){Sn=Rn[Or[On]];break}}Sn=Sn===""?"Times":Sn,this.pdf.setFont(Sn,fn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Rr){this.ctx.globalCompositeOperation=Rr}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Rr){this.ctx.globalAlpha=Rr}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Rr){this.ctx.lineDashOffset=Rr,ir.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Rr){this.ctx.lineDash=Rr,ir.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Rr){this.ctx.ignoreClearRect=!!Rr}})};ze.prototype.setLineDash=function(nr){this.lineDash=nr},ze.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},ze.prototype.fill=function(){Ke.call(this,"fill",!1)},ze.prototype.stroke=function(){Ke.call(this,"stroke",!1)},ze.prototype.beginPath=function(){this.path=[{type:"begin"}]},ze.prototype.moveTo=function(nr,gr){if(isNaN(nr)||isNaN(gr))throw o.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Er=this.ctx.transform.applyToPoint(new Te(nr,gr));this.path.push({type:"mt",x:Er.x,y:Er.y}),this.ctx.lastPoint=new Te(nr,gr)},ze.prototype.closePath=function(){var nr=new Te(0,0),gr=0;for(gr=this.path.length-1;gr!==-1;gr--)if(this.path[gr].type==="begin"&&_typeof(this.path[gr+1])==="object"&&typeof this.path[gr+1].x=="number"){nr=new Te(this.path[gr+1].x,this.path[gr+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Te(nr.x,nr.y)},ze.prototype.lineTo=function(nr,gr){if(isNaN(nr)||isNaN(gr))throw o.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Er=this.ctx.transform.applyToPoint(new Te(nr,gr));this.path.push({type:"lt",x:Er.x,y:Er.y}),this.ctx.lastPoint=new Te(Er.x,Er.y)},ze.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Ke.call(this,null,!0)},ze.prototype.quadraticCurveTo=function(nr,gr,Er,Cr){if(isNaN(Er)||isNaN(Cr)||isNaN(nr)||isNaN(gr))throw o.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Nr=this.ctx.transform.applyToPoint(new Te(Er,Cr)),Mr=this.ctx.transform.applyToPoint(new Te(nr,gr));this.path.push({type:"qct",x1:Mr.x,y1:Mr.y,x:Nr.x,y:Nr.y}),this.ctx.lastPoint=new Te(Nr.x,Nr.y)},ze.prototype.bezierCurveTo=function(nr,gr,Er,Cr,Nr,Mr){if(isNaN(Nr)||isNaN(Mr)||isNaN(nr)||isNaN(gr)||isNaN(Er)||isNaN(Cr))throw o.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Fr=this.ctx.transform.applyToPoint(new Te(Nr,Mr)),$r=this.ctx.transform.applyToPoint(new Te(nr,gr)),Wr=this.ctx.transform.applyToPoint(new Te(Er,Cr));this.path.push({type:"bct",x1:$r.x,y1:$r.y,x2:Wr.x,y2:Wr.y,x:Fr.x,y:Fr.y}),this.ctx.lastPoint=new Te(Fr.x,Fr.y)},ze.prototype.arc=function(nr,gr,Er,Cr,Nr,Mr){if(isNaN(nr)||isNaN(gr)||isNaN(Er)||isNaN(Cr)||isNaN(Nr))throw o.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Mr=!!Mr,!this.ctx.transform.isIdentity){var Fr=this.ctx.transform.applyToPoint(new Te(nr,gr));nr=Fr.x,gr=Fr.y;var $r=this.ctx.transform.applyToPoint(new Te(0,Er)),Wr=this.ctx.transform.applyToPoint(new Te(0,0));Er=Math.sqrt(Math.pow($r.x-Wr.x,2)+Math.pow($r.y-Wr.y,2))}Math.abs(Nr-Cr)>=2*Math.PI&&(Cr=0,Nr=2*Math.PI),this.path.push({type:"arc",x:nr,y:gr,radius:Er,startAngle:Cr,endAngle:Nr,counterclockwise:Mr})},ze.prototype.arcTo=function(nr,gr,Er,Cr,Nr){throw new Error("arcTo not implemented.")},ze.prototype.rect=function(nr,gr,Er,Cr){if(isNaN(nr)||isNaN(gr)||isNaN(Er)||isNaN(Cr))throw o.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(nr,gr),this.lineTo(nr+Er,gr),this.lineTo(nr+Er,gr+Cr),this.lineTo(nr,gr+Cr),this.lineTo(nr,gr),this.lineTo(nr+Er,gr),this.lineTo(nr,gr)},ze.prototype.fillRect=function(nr,gr,Er,Cr){if(isNaN(nr)||isNaN(gr)||isNaN(Er)||isNaN(Cr))throw o.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!He.call(this)){var Nr={};this.lineCap!=="butt"&&(Nr.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Nr.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(nr,gr,Er,Cr),this.fill(),Nr.hasOwnProperty("lineCap")&&(this.lineCap=Nr.lineCap),Nr.hasOwnProperty("lineJoin")&&(this.lineJoin=Nr.lineJoin)}},ze.prototype.strokeRect=function(nr,gr,Er,Cr){if(isNaN(nr)||isNaN(gr)||isNaN(Er)||isNaN(Cr))throw o.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Ue.call(this)||(this.beginPath(),this.rect(nr,gr,Er,Cr),this.stroke())},ze.prototype.clearRect=function(nr,gr,Er,Cr){if(isNaN(nr)||isNaN(gr)||isNaN(Er)||isNaN(Cr))throw o.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(nr,gr,Er,Cr))},ze.prototype.save=function(nr){nr=typeof nr!="boolean"||nr;for(var gr=this.pdf.internal.getCurrentPageInfo().pageNumber,Er=0;Er<this.pdf.internal.getNumberOfPages();Er++)this.pdf.setPage(Er+1),this.pdf.internal.out("q");if(this.pdf.setPage(gr),nr){this.ctx.fontSize=this.pdf.internal.getFontSize();var Cr=new Be(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Cr}},ze.prototype.restore=function(nr){nr=typeof nr!="boolean"||nr;for(var gr=this.pdf.internal.getCurrentPageInfo().pageNumber,Er=0;Er<this.pdf.internal.getNumberOfPages();Er++)this.pdf.setPage(Er+1),this.pdf.internal.out("Q");this.pdf.setPage(gr),nr&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},ze.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var $e=function(nr){var gr,Er,Cr,Nr;if(nr.isCanvasGradient===!0&&(nr=nr.getColor()),!nr)return{r:0,g:0,b:0,a:0,style:nr};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(nr))gr=0,Er=0,Cr=0,Nr=0;else{var Mr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(nr);if(Mr!==null)gr=parseInt(Mr[1]),Er=parseInt(Mr[2]),Cr=parseInt(Mr[3]),Nr=1;else if((Mr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(nr))!==null)gr=parseInt(Mr[1]),Er=parseInt(Mr[2]),Cr=parseInt(Mr[3]),Nr=parseFloat(Mr[4]);else{if(Nr=1,typeof nr=="string"&&nr.charAt(0)!=="#"){var Fr=new h$3(nr);nr=Fr.ok?Fr.toHex():"#000000"}nr.length===4?(gr=nr.substring(1,2),gr+=gr,Er=nr.substring(2,3),Er+=Er,Cr=nr.substring(3,4),Cr+=Cr):(gr=nr.substring(1,3),Er=nr.substring(3,5),Cr=nr.substring(5,7)),gr=parseInt(gr,16),Er=parseInt(Er,16),Cr=parseInt(Cr,16)}}return{r:gr,g:Er,b:Cr,a:Nr,style:nr}},He=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Ue=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};ze.prototype.fillText=function(nr,gr,Er,Cr){if(isNaN(gr)||isNaN(Er)||typeof nr!="string")throw o.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Cr=isNaN(Cr)?void 0:Cr,!He.call(this)){var Nr=rr(this.ctx.transform.rotation),Mr=this.ctx.transform.scaleX;dr.call(this,{text:nr,x:gr,y:Er,scale:Mr,angle:Nr,align:this.textAlign,maxWidth:Cr})}},ze.prototype.strokeText=function(nr,gr,Er,Cr){if(isNaN(gr)||isNaN(Er)||typeof nr!="string")throw o.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Ue.call(this)){Cr=isNaN(Cr)?void 0:Cr;var Nr=rr(this.ctx.transform.rotation),Mr=this.ctx.transform.scaleX;dr.call(this,{text:nr,x:gr,y:Er,scale:Mr,renderingMode:"stroke",angle:Nr,align:this.textAlign,maxWidth:Cr})}},ze.prototype.measureText=function(nr){if(typeof nr!="string")throw o.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var gr=this.pdf,Er=this.pdf.internal.scaleFactor,Cr=gr.internal.getFontSize(),Nr=gr.getStringUnitWidth(nr)*Cr/gr.internal.scaleFactor;return new function(Mr){var Fr=(Mr=Mr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Fr}}),this}({width:Nr*=Math.round(96*Er/72*1e4)/1e4})},ze.prototype.scale=function(nr,gr){if(isNaN(nr)||isNaN(gr))throw o.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Er=new De(nr,0,0,gr,0,0);this.ctx.transform=this.ctx.transform.multiply(Er)},ze.prototype.rotate=function(nr){if(isNaN(nr))throw o.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var gr=new De(Math.cos(nr),Math.sin(nr),-Math.sin(nr),Math.cos(nr),0,0);this.ctx.transform=this.ctx.transform.multiply(gr)},ze.prototype.translate=function(nr,gr){if(isNaN(nr)||isNaN(gr))throw o.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Er=new De(1,0,0,1,nr,gr);this.ctx.transform=this.ctx.transform.multiply(Er)},ze.prototype.transform=function(nr,gr,Er,Cr,Nr,Mr){if(isNaN(nr)||isNaN(gr)||isNaN(Er)||isNaN(Cr)||isNaN(Nr)||isNaN(Mr))throw o.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Fr=new De(nr,gr,Er,Cr,Nr,Mr);this.ctx.transform=this.ctx.transform.multiply(Fr)},ze.prototype.setTransform=function(nr,gr,Er,Cr,Nr,Mr){nr=isNaN(nr)?1:nr,gr=isNaN(gr)?0:gr,Er=isNaN(Er)?0:Er,Cr=isNaN(Cr)?1:Cr,Nr=isNaN(Nr)?0:Nr,Mr=isNaN(Mr)?0:Mr,this.ctx.transform=new De(nr,gr,Er,Cr,Nr,Mr)};var Ve=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};ze.prototype.drawImage=function(nr,gr,Er,Cr,Nr,Mr,Fr,$r,Wr){var Zr=this.pdf.getImageProperties(nr),nn=1,an=1,Yr=1,Rr=1;Cr!==void 0&&$r!==void 0&&(Yr=$r/Cr,Rr=Wr/Nr,nn=Zr.width/Cr*$r/Cr,an=Zr.height/Nr*Wr/Nr),Mr===void 0&&(Mr=gr,Fr=Er,gr=0,Er=0),Cr!==void 0&&$r===void 0&&($r=Cr,Wr=Nr),Cr===void 0&&$r===void 0&&($r=Zr.width,Wr=Zr.height);var Xr=this.ctx.transform.decompose(),mn=rr(Xr.rotate.shx),En=new De,rn=(En=(En=(En=En.multiply(Xr.translate)).multiply(Xr.skew)).multiply(Xr.scale)).applyToRectangle(new Me(Mr-gr*Yr,Fr-Er*Rr,Cr*nn,Nr*an));if(this.autoPaging){for(var _r,Lr=We.call(this,rn),Or=[],tn=0;tn<Lr.length;tn+=1)Or.indexOf(Lr[tn])===-1&&Or.push(Lr[tn]);Ye(Or);for(var sn=Or[0],en=Or[Or.length-1],fn=sn;fn<en+1;fn++){this.pdf.setPage(fn);var Sn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rn=fn===1?this.posY+this.margin[0]:this.margin[0],jn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],On=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Nn=fn===1?0:jn+(fn-2)*On;if(this.ctx.clip_path.length!==0){var js=this.path;_r=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ge(_r,this.posX+this.margin[3],-Nn+Rn+this.ctx.prevPageLastElemOffset),Xe.call(this,"fill",!0),this.path=js}var qn=JSON.parse(JSON.stringify(rn));qn=Ge([qn],this.posX+this.margin[3],-Nn+Rn+this.ctx.prevPageLastElemOffset)[0];var Gn=(fn>sn||fn<en)&&Ve.call(this);Gn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Sn,On,null).clip().discardPath()),this.pdf.addImage(nr,"JPEG",qn.x,qn.y,qn.w,qn.h,null,null,mn),Gn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(nr,"JPEG",rn.x,rn.y,rn.w,rn.h,null,null,mn)};var We=function(nr,gr,Er){var Cr=[];gr=gr||this.pdf.internal.pageSize.width,Er=Er||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Nr=this.posY+this.ctx.prevPageLastElemOffset;switch(nr.type){default:case"mt":case"lt":Cr.push(Math.floor((nr.y+Nr)/Er)+1);break;case"arc":Cr.push(Math.floor((nr.y+Nr-nr.radius)/Er)+1),Cr.push(Math.floor((nr.y+Nr+nr.radius)/Er)+1);break;case"qct":var Mr=pr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,nr.x1,nr.y1,nr.x,nr.y);Cr.push(Math.floor((Mr.y+Nr)/Er)+1),Cr.push(Math.floor((Mr.y+Mr.h+Nr)/Er)+1);break;case"bct":var Fr=mr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,nr.x1,nr.y1,nr.x2,nr.y2,nr.x,nr.y);Cr.push(Math.floor((Fr.y+Nr)/Er)+1),Cr.push(Math.floor((Fr.y+Fr.h+Nr)/Er)+1);break;case"rect":Cr.push(Math.floor((nr.y+Nr)/Er)+1),Cr.push(Math.floor((nr.y+nr.h+Nr)/Er)+1)}for(var $r=0;$r<Cr.length;$r+=1)for(;this.pdf.internal.getNumberOfPages()<Cr[$r];)qe.call(this);return Cr},qe=function(){var nr=this.fillStyle,gr=this.strokeStyle,Er=this.font,Cr=this.lineCap,Nr=this.lineWidth,Mr=this.lineJoin;this.pdf.addPage(),this.fillStyle=nr,this.strokeStyle=gr,this.font=Er,this.lineCap=Cr,this.lineWidth=Nr,this.lineJoin=Mr},Ge=function(nr,gr,Er){for(var Cr=0;Cr<nr.length;Cr++)switch(nr[Cr].type){case"bct":nr[Cr].x2+=gr,nr[Cr].y2+=Er;case"qct":nr[Cr].x1+=gr,nr[Cr].y1+=Er;default:nr[Cr].x+=gr,nr[Cr].y+=Er}return nr},Ye=function(nr){return nr.sort(function(gr,Er){return gr-Er})},Ke=function(nr,gr){var Er=this.fillStyle,Cr=this.strokeStyle,Nr=this.lineCap,Mr=this.lineWidth,Fr=Math.abs(Mr*this.ctx.transform.scaleX),$r=this.lineJoin;if(this.autoPaging){for(var Wr,Zr,nn=JSON.parse(JSON.stringify(this.path)),an=JSON.parse(JSON.stringify(this.path)),Yr=[],Rr=0;Rr<an.length;Rr++)if(an[Rr].x!==void 0)for(var Xr=We.call(this,an[Rr]),mn=0;mn<Xr.length;mn+=1)Yr.indexOf(Xr[mn])===-1&&Yr.push(Xr[mn]);for(var En=0;En<Yr.length;En++)for(;this.pdf.internal.getNumberOfPages()<Yr[En];)qe.call(this);Ye(Yr);for(var rn=Yr[0],_r=Yr[Yr.length-1],Lr=rn;Lr<_r+1;Lr++){this.pdf.setPage(Lr),this.fillStyle=Er,this.strokeStyle=Cr,this.lineCap=Nr,this.lineWidth=Fr,this.lineJoin=$r;var Or=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tn=Lr===1?this.posY+this.margin[0]:this.margin[0],sn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],en=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],fn=Lr===1?0:sn+(Lr-2)*en;if(this.ctx.clip_path.length!==0){var Sn=this.path;Wr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ge(Wr,this.posX+this.margin[3],-fn+tn+this.ctx.prevPageLastElemOffset),Xe.call(this,nr,!0),this.path=Sn}if(Zr=JSON.parse(JSON.stringify(nn)),this.path=Ge(Zr,this.posX+this.margin[3],-fn+tn+this.ctx.prevPageLastElemOffset),gr===!1||Lr===0){var Rn=(Lr>rn||Lr<_r)&&Ve.call(this);Rn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Or,en,null).clip().discardPath()),Xe.call(this,nr,gr),Rn&&this.pdf.restoreGraphicsState()}this.lineWidth=Mr}this.path=nn}else this.lineWidth=Fr,Xe.call(this,nr,gr),this.lineWidth=Mr},Xe=function(nr,gr){if((nr!=="stroke"||gr||!Ue.call(this))&&(nr==="stroke"||gr||!He.call(this))){for(var Er,Cr,Nr=[],Mr=this.path,Fr=0;Fr<Mr.length;Fr++){var $r=Mr[Fr];switch($r.type){case"begin":Nr.push({begin:!0});break;case"close":Nr.push({close:!0});break;case"mt":Nr.push({start:$r,deltas:[],abs:[]});break;case"lt":var Wr=Nr.length;if(Mr[Fr-1]&&!isNaN(Mr[Fr-1].x)&&(Er=[$r.x-Mr[Fr-1].x,$r.y-Mr[Fr-1].y],Wr>0)){for(;Wr>=0;Wr--)if(Nr[Wr-1].close!==!0&&Nr[Wr-1].begin!==!0){Nr[Wr-1].deltas.push(Er),Nr[Wr-1].abs.push($r);break}}break;case"bct":Er=[$r.x1-Mr[Fr-1].x,$r.y1-Mr[Fr-1].y,$r.x2-Mr[Fr-1].x,$r.y2-Mr[Fr-1].y,$r.x-Mr[Fr-1].x,$r.y-Mr[Fr-1].y],Nr[Nr.length-1].deltas.push(Er);break;case"qct":var Zr=Mr[Fr-1].x+2/3*($r.x1-Mr[Fr-1].x),nn=Mr[Fr-1].y+2/3*($r.y1-Mr[Fr-1].y),an=$r.x+2/3*($r.x1-$r.x),Yr=$r.y+2/3*($r.y1-$r.y),Rr=$r.x,Xr=$r.y;Er=[Zr-Mr[Fr-1].x,nn-Mr[Fr-1].y,an-Mr[Fr-1].x,Yr-Mr[Fr-1].y,Rr-Mr[Fr-1].x,Xr-Mr[Fr-1].y],Nr[Nr.length-1].deltas.push(Er);break;case"arc":Nr.push({deltas:[],abs:[],arc:!0}),Array.isArray(Nr[Nr.length-1].abs)&&Nr[Nr.length-1].abs.push($r)}}Cr=gr?null:nr==="stroke"?"stroke":"fill";for(var mn=!1,En=0;En<Nr.length;En++)if(Nr[En].arc)for(var rn=Nr[En].abs,_r=0;_r<rn.length;_r++){var Lr=rn[_r];Lr.type==="arc"?St.call(this,Lr.x,Lr.y,Lr.radius,Lr.startAngle,Lr.endAngle,Lr.counterclockwise,void 0,gr,!mn):vr.call(this,Lr.x,Lr.y),mn=!0}else if(Nr[En].close===!0)this.pdf.internal.out("h"),mn=!1;else if(Nr[En].begin!==!0){var Or=Nr[En].start.x,tn=Nr[En].start.y;yr.call(this,Nr[En].deltas,Or,tn),mn=!0}Cr&&ar.call(this,Cr),gr&&hr.call(this)}},Ze=function(nr){var gr=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Er=gr*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return nr-Er;case"top":return nr+gr-Er;case"hanging":return nr+gr-2*Er;case"middle":return nr+gr/2-Er;default:return nr}},er=function(nr){return nr+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};ze.prototype.createLinearGradient=function(){var nr=function(){};return nr.colorStops=[],nr.addColorStop=function(gr,Er){this.colorStops.push([gr,Er])},nr.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},nr.isCanvasGradient=!0,nr},ze.prototype.createPattern=function(){return this.createLinearGradient()},ze.prototype.createRadialGradient=function(){return this.createLinearGradient()};var St=function(nr,gr,Er,Cr,Nr,Mr,Fr,$r,Wr){for(var Zr=lr.call(this,Er,Cr,Nr,Mr),nn=0;nn<Zr.length;nn++){var an=Zr[nn];nn===0&&(Wr?ur.call(this,an.x1+nr,an.y1+gr):vr.call(this,an.x1+nr,an.y1+gr)),br.call(this,nr,gr,an.x2,an.y2,an.x3,an.y3,an.x4,an.y4)}$r?hr.call(this):ar.call(this,Fr)},ar=function(nr){switch(nr){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},hr=function(){this.pdf.clip(),this.pdf.discardPath()},ur=function(nr,gr){this.pdf.internal.out(n(nr)+" "+Ee(gr)+" m")},dr=function(nr){var gr;switch(nr.align){case"right":case"end":gr="right";break;case"center":gr="center";break;default:gr="left"}var Er,Cr,Nr,Mr=this.pdf.getTextDimensions(nr.text),Fr=Ze.call(this,nr.y),$r=er.call(this,Fr)-Mr.h,Wr=this.ctx.transform.applyToPoint(new Te(nr.x,Fr));if(this.autoPaging){var Zr=this.ctx.transform.decompose(),nn=new De;nn=(nn=(nn=nn.multiply(Zr.translate)).multiply(Zr.skew)).multiply(Zr.scale);for(var an=this.ctx.transform.applyToRectangle(new Me(nr.x,Fr,Mr.w,Mr.h)),Yr=nn.applyToRectangle(new Me(nr.x,$r,Mr.w,Mr.h)),Rr=We.call(this,Yr),Xr=[],mn=0;mn<Rr.length;mn+=1)Xr.indexOf(Rr[mn])===-1&&Xr.push(Rr[mn]);Ye(Xr);for(var En=Xr[0],rn=Xr[Xr.length-1],_r=En;_r<rn+1;_r++){this.pdf.setPage(_r);var Lr=_r===1?this.posY+this.margin[0]:this.margin[0],Or=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tn=this.pdf.internal.pageSize.height-this.margin[2],sn=tn-this.margin[0],en=this.pdf.internal.pageSize.width-this.margin[1],fn=en-this.margin[3],Sn=_r===1?0:Or+(_r-2)*sn;if(this.ctx.clip_path.length!==0){var Rn=this.path;Er=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ge(Er,this.posX+this.margin[3],-1*Sn+Lr),Xe.call(this,"fill",!0),this.path=Rn}var jn=Ge([JSON.parse(JSON.stringify(Yr))],this.posX+this.margin[3],-Sn+Lr+this.ctx.prevPageLastElemOffset)[0];nr.scale>=.01&&(Cr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Cr*nr.scale),Nr=this.lineWidth,this.lineWidth=Nr*nr.scale);var On=this.autoPaging!=="text";if(On||jn.y+jn.h<=tn){if(On||jn.y>=Lr&&jn.x<=en){var Nn=On?nr.text:this.pdf.splitTextToSize(nr.text,nr.maxWidth||en-jn.x)[0],js=Ge([JSON.parse(JSON.stringify(an))],this.posX+this.margin[3],-Sn+Lr+this.ctx.prevPageLastElemOffset)[0],qn=On&&(_r>En||_r<rn)&&Ve.call(this);qn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fn,sn,null).clip().discardPath()),this.pdf.text(Nn,js.x,js.y,{angle:nr.angle,align:gr,renderingMode:nr.renderingMode}),qn&&this.pdf.restoreGraphicsState()}}else jn.y<tn&&(this.ctx.prevPageLastElemOffset+=tn-jn.y);nr.scale>=.01&&(this.pdf.setFontSize(Cr),this.lineWidth=Nr)}}else nr.scale>=.01&&(Cr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Cr*nr.scale),Nr=this.lineWidth,this.lineWidth=Nr*nr.scale),this.pdf.text(nr.text,Wr.x+this.posX,Wr.y+this.posY,{angle:nr.angle,align:gr,renderingMode:nr.renderingMode,maxWidth:nr.maxWidth}),nr.scale>=.01&&(this.pdf.setFontSize(Cr),this.lineWidth=Nr)},vr=function(nr,gr,Er,Cr){Er=Er||0,Cr=Cr||0,this.pdf.internal.out(n(nr+Er)+" "+Ee(gr+Cr)+" l")},yr=function(nr,gr,Er){return this.pdf.lines(nr,gr,Er,null,null)},br=function(nr,gr,Er,Cr,Nr,Mr,Fr,$r){this.pdf.internal.out([t(Re(Er+nr)),t(Ce(Cr+gr)),t(Re(Nr+nr)),t(Ce(Mr+gr)),t(Re(Fr+nr)),t(Ce($r+gr)),"c"].join(" "))},lr=function(nr,gr,Er,Cr){for(var Nr=2*Math.PI,Mr=Math.PI/2;gr>Er;)gr-=Nr;var Fr=Math.abs(Er-gr);Fr<Nr&&Cr&&(Fr=Nr-Fr);for(var $r=[],Wr=Cr?-1:1,Zr=gr;Fr>1e-5;){var nn=Zr+Wr*Math.min(Fr,Mr);$r.push(cr.call(this,nr,Zr,nn)),Fr-=Math.abs(nn-Zr),Zr=nn}return $r},cr=function(nr,gr,Er){var Cr=(Er-gr)/2,Nr=nr*Math.cos(Cr),Mr=nr*Math.sin(Cr),Fr=Nr,$r=-Mr,Wr=Fr*Fr+$r*$r,Zr=Wr+Fr*Nr+$r*Mr,nn=4/3*(Math.sqrt(2*Wr*Zr)-Zr)/(Fr*Mr-$r*Nr),an=Fr-nn*$r,Yr=$r+nn*Fr,Rr=an,Xr=-Yr,mn=Cr+gr,En=Math.cos(mn),rn=Math.sin(mn);return{x1:nr*Math.cos(gr),y1:nr*Math.sin(gr),x2:an*En-Yr*rn,y2:an*rn+Yr*En,x3:Rr*En-Xr*rn,y3:Rr*rn+Xr*En,x4:nr*Math.cos(Er),y4:nr*Math.sin(Er)}},rr=function(nr){return 180*nr/Math.PI},pr=function(nr,gr,Er,Cr,Nr,Mr){var Fr=nr+.5*(Er-nr),$r=gr+.5*(Cr-gr),Wr=Nr+.5*(Er-Nr),Zr=Mr+.5*(Cr-Mr),nn=Math.min(nr,Nr,Fr,Wr),an=Math.max(nr,Nr,Fr,Wr),Yr=Math.min(gr,Mr,$r,Zr),Rr=Math.max(gr,Mr,$r,Zr);return new Me(nn,Yr,an-nn,Rr-Yr)},mr=function(nr,gr,Er,Cr,Nr,Mr,Fr,$r){var Wr,Zr,nn,an,Yr,Rr,Xr,mn,En,rn,_r,Lr,Or,tn,sn=Er-nr,en=Cr-gr,fn=Nr-Er,Sn=Mr-Cr,Rn=Fr-Nr,jn=$r-Mr;for(Zr=0;Zr<41;Zr++)En=(Xr=(nn=nr+(Wr=Zr/40)*sn)+Wr*((Yr=Er+Wr*fn)-nn))+Wr*(Yr+Wr*(Nr+Wr*Rn-Yr)-Xr),rn=(mn=(an=gr+Wr*en)+Wr*((Rr=Cr+Wr*Sn)-an))+Wr*(Rr+Wr*(Mr+Wr*jn-Rr)-mn),Zr==0?(_r=En,Lr=rn,Or=En,tn=rn):(_r=Math.min(_r,En),Lr=Math.min(Lr,rn),Or=Math.max(Or,En),tn=Math.max(tn,rn));return new Me(Math.round(_r),Math.round(Lr),Math.round(Or-_r),Math.round(tn-Lr))},ir=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var nr,gr,Er=(nr=this.ctx.lineDash,gr=this.ctx.lineDashOffset,JSON.stringify({lineDash:nr,lineDashOffset:gr}));this.prevLineDash!==Er&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Er)}}})(E.API),function(e){var t=function(Te){var Me,De,Oe,Be,ze,$e,He,Ue,Ve,We;for(De=[],Oe=0,Be=(Te+=Me="\0\0\0\0".slice(Te.length%4||4)).length;Be>Oe;Oe+=4)(ze=(Te.charCodeAt(Oe)<<24)+(Te.charCodeAt(Oe+1)<<16)+(Te.charCodeAt(Oe+2)<<8)+Te.charCodeAt(Oe+3))!==0?($e=(ze=((ze=((ze=((ze=(ze-(We=ze%85))/85)-(Ve=ze%85))/85)-(Ue=ze%85))/85)-(He=ze%85))/85)%85,De.push($e+33,He+33,Ue+33,Ve+33,We+33)):De.push(122);return function(qe,Ge){for(var Ye=Ge;Ye>0;Ye--)qe.pop()}(De,Me.length),String.fromCharCode.apply(String,De)+"~>"},n=function(Te){var Me,De,Oe,Be,ze,$e=String,He="length",Ue=255,Ve="charCodeAt",We="slice",qe="replace";for(Te[We](-2),Te=Te[We](0,-2)[qe](/\s/g,"")[qe]("z","!!!!!"),Oe=[],Be=0,ze=(Te+=Me="uuuuu"[We](Te[He]%5||5))[He];ze>Be;Be+=5)De=52200625*(Te[Ve](Be)-33)+614125*(Te[Ve](Be+1)-33)+7225*(Te[Ve](Be+2)-33)+85*(Te[Ve](Be+3)-33)+(Te[Ve](Be+4)-33),Oe.push(Ue&De>>24,Ue&De>>16,Ue&De>>8,Ue&De);return function(Ge,Ye){for(var Ke=Ye;Ke>0;Ke--)Ge.pop()}(Oe,Me[He]),$e.fromCharCode.apply($e,Oe)},Ee=function(Te){return Te.split("").map(function(Me){return("0"+Me.charCodeAt().toString(16)).slice(-2)}).join("")+">"},Re=function(Te){var Me=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Te=Te.replace(/\s/g,"")).indexOf(">")!==-1&&(Te=Te.substr(0,Te.indexOf(">"))),Te.length%2&&(Te+="0"),Me.test(Te)===!1)return"";for(var De="",Oe=0;Oe<Te.length;Oe+=2)De+=String.fromCharCode("0x"+(Te[Oe]+Te[Oe+1]));return De},Ce=function(Te){for(var Me=new Uint8Array(Te.length),De=Te.length;De--;)Me[De]=Te.charCodeAt(De);return(Me=zlibSync(Me)).reduce(function(Oe,Be){return Oe+String.fromCharCode(Be)},"")};e.processDataByFilters=function(Te,Me){var De=0,Oe=Te||"",Be=[];for(typeof(Me=Me||[])=="string"&&(Me=[Me]),De=0;De<Me.length;De+=1)switch(Me[De]){case"ASCII85Decode":case"/ASCII85Decode":Oe=n(Oe),Be.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Oe=t(Oe),Be.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Oe=Re(Oe),Be.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Oe=Ee(Oe),Be.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Oe=Ce(Oe),Be.push("/FlateDecode");break;default:throw new Error('The filter: "'+Me[De]+'" is not implemented')}return{data:Oe,reverseChain:Be.reverse().join(" ")}}}(E.API),function(e){e.loadFile=function(t,n,Ee){return function(Re,Ce,Te){Ce=Ce!==!1,Te=typeof Te=="function"?Te:function(){};var Me=void 0;try{Me=function(De,Oe,Be){var ze=new XMLHttpRequest,$e=0,He=function(Ue){var Ve=Ue.length,We=[],qe=String.fromCharCode;for($e=0;$e<Ve;$e+=1)We.push(qe(255&Ue.charCodeAt($e)));return We.join("")};if(ze.open("GET",De,!Oe),ze.overrideMimeType("text/plain; charset=x-user-defined"),Oe===!1&&(ze.onload=function(){ze.status===200?Be(He(this.responseText)):Be(void 0)}),ze.send(null),Oe&&ze.status===200)return He(ze.responseText)}(Re,Ce,Te)}catch{}return Me}(t,n,Ee)},e.loadImageFile=e.loadFile}(E.API),function(e){function t(){return(i$1.html2canvas?Promise.resolve(i$1.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(Me){return Promise.reject(new Error("Could not load html2canvas: "+Me))}).then(function(Me){return Me.default?Me.default:Me})}function n(){return(i$1.DOMPurify?Promise.resolve(i$1.DOMPurify):__vitePreload(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(Me){return Promise.reject(new Error("Could not load dompurify: "+Me))}).then(function(Me){return Me.default?Me.default:Me})}var Ee=function(Me){var De=_typeof(Me);return De==="undefined"?"undefined":De==="string"||Me instanceof String?"string":De==="number"||Me instanceof Number?"number":De==="function"||Me instanceof Function?"function":Me&&Me.constructor===Array?"array":Me&&Me.nodeType===1?"element":De==="object"?"object":"unknown"},Re=function(Me,De){var Oe=document.createElement(Me);for(var Be in De.className&&(Oe.className=De.className),De.innerHTML&&De.dompurify&&(Oe.innerHTML=De.dompurify.sanitize(De.innerHTML)),De.style)Oe.style[Be]=De.style[Be];return Oe},Ce=function Me(De,Oe){for(var Be=De.nodeType===3?document.createTextNode(De.nodeValue):De.cloneNode(!1),ze=De.firstChild;ze;ze=ze.nextSibling)Oe!==!0&&ze.nodeType===1&&ze.nodeName==="SCRIPT"||Be.appendChild(Me(ze,Oe));return De.nodeType===1&&(De.nodeName==="CANVAS"?(Be.width=De.width,Be.height=De.height,Be.getContext("2d").drawImage(De,0,0)):De.nodeName!=="TEXTAREA"&&De.nodeName!=="SELECT"||(Be.value=De.value),Be.addEventListener("load",function(){Be.scrollTop=De.scrollTop,Be.scrollLeft=De.scrollLeft},!0)),Be},Te=function Me(De){var Oe=Object.assign(Me.convert(Promise.resolve()),JSON.parse(JSON.stringify(Me.template))),Be=Me.convert(Promise.resolve(),Oe);return(Be=Be.setProgress(1,Me,1,[Me])).set(De)};(Te.prototype=Object.create(Promise.prototype)).constructor=Te,Te.convert=function(Me,De){return Me.__proto__=De||Te.prototype,Me},Te.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Te.prototype.from=function(Me,De){return this.then(function(){switch(De=De||function(Oe){switch(Ee(Oe)){case"string":return"string";case"element":return Oe.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(Me),De){case"string":return this.then(n).then(function(Oe){return this.set({src:Re("div",{innerHTML:Me,dompurify:Oe})})});case"element":return this.set({src:Me});case"canvas":return this.set({canvas:Me});case"img":return this.set({img:Me});default:return this.error("Unknown source type.")}})},Te.prototype.to=function(Me){switch(Me){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Te.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Me={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},De=Ce(this.prop.src,this.opt.html2canvas.javascriptEnabled);De.tagName==="BODY"&&(Me.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Re("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Re("div",{className:"html2pdf__container",style:Me}),this.prop.container.appendChild(De),this.prop.container.firstChild.appendChild(Re("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Te.prototype.toCanvas=function(){var Me=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Me).then(t).then(function(De){var Oe=Object.assign({},this.opt.html2canvas);return delete Oe.onrendered,De(this.prop.container,Oe)}).then(function(De){(this.opt.html2canvas.onrendered||function(){})(De),this.prop.canvas=De,document.body.removeChild(this.prop.overlay)})},Te.prototype.toContext2d=function(){var Me=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Me).then(t).then(function(De){var Oe=this.opt.jsPDF,Be=this.opt.fontFaces,ze=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,$e=Object.assign({async:!0,allowTaint:!0,scale:ze,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete $e.onrendered,Oe.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Oe.context2d.posX=this.opt.x,Oe.context2d.posY=this.opt.y,Oe.context2d.margin=this.opt.margin,Oe.context2d.fontFaces=Be,Be)for(var He=0;He<Be.length;++He){var Ue=Be[He],Ve=Ue.src.find(function(We){return We.format==="truetype"});Ve&&Oe.addFont(Ve.url,Ue.ref.name,Ue.ref.style)}return $e.windowHeight=$e.windowHeight||0,$e.windowHeight=$e.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):$e.windowHeight,Oe.context2d.save(!0),De(this.prop.container,$e)}).then(function(De){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(De),this.prop.canvas=De,document.body.removeChild(this.prop.overlay)})},Te.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Me=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Me})},Te.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Te.prototype.output=function(Me,De,Oe){return(Oe=Oe||"pdf").toLowerCase()==="img"||Oe.toLowerCase()==="image"?this.outputImg(Me,De):this.outputPdf(Me,De)},Te.prototype.outputPdf=function(Me,De){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Me,De)})},Te.prototype.outputImg=function(Me){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Me){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Me+'" is not supported.'}})},Te.prototype.save=function(Me){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Me?{filename:Me}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Te.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Te.prototype.set=function(Me){if(Ee(Me)!=="object")return this;var De=Object.keys(Me||{}).map(function(Oe){if(Oe in Te.template.prop)return function(){this.prop[Oe]=Me[Oe]};switch(Oe){case"margin":return this.setMargin.bind(this,Me.margin);case"jsPDF":return function(){return this.opt.jsPDF=Me.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Me.pageSize);default:return function(){this.opt[Oe]=Me[Oe]}}},this);return this.then(function(){return this.thenList(De)})},Te.prototype.get=function(Me,De){return this.then(function(){var Oe=Me in Te.template.prop?this.prop[Me]:this.opt[Me];return De?De(Oe):Oe})},Te.prototype.setMargin=function(Me){return this.then(function(){switch(Ee(Me)){case"number":Me=[Me,Me,Me,Me];case"array":if(Me.length===2&&(Me=[Me[0],Me[1],Me[0],Me[1]]),Me.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Me}).then(this.setPageSize)},Te.prototype.setPageSize=function(Me){function De(Oe,Be){return Math.floor(Oe*Be/72*96)}return this.then(function(){(Me=Me||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Me.inner={width:Me.width-this.opt.margin[1]-this.opt.margin[3],height:Me.height-this.opt.margin[0]-this.opt.margin[2]},Me.inner.px={width:De(Me.inner.width,Me.k),height:De(Me.inner.height,Me.k)},Me.inner.ratio=Me.inner.height/Me.inner.width),this.prop.pageSize=Me})},Te.prototype.setProgress=function(Me,De,Oe,Be){return Me!=null&&(this.progress.val=Me),De!=null&&(this.progress.state=De),Oe!=null&&(this.progress.n=Oe),Be!=null&&(this.progress.stack=Be),this.progress.ratio=this.progress.val/this.progress.state,this},Te.prototype.updateProgress=function(Me,De,Oe,Be){return this.setProgress(Me?this.progress.val+Me:null,De||null,Oe?this.progress.n+Oe:null,Be?this.progress.stack.concat(Be):null)},Te.prototype.then=function(Me,De){var Oe=this;return this.thenCore(Me,De,function(Be,ze){return Oe.updateProgress(null,null,1,[Be]),Promise.prototype.then.call(this,function($e){return Oe.updateProgress(null,Be),$e}).then(Be,ze).then(function($e){return Oe.updateProgress(1),$e})})},Te.prototype.thenCore=function(Me,De,Oe){Oe=Oe||Promise.prototype.then;var Be=this;Me&&(Me=Me.bind(Be)),De&&(De=De.bind(Be));var ze=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?Be:Te.convert(Object.assign({},Be),Promise.prototype),$e=Oe.call(ze,Me,De);return Te.convert($e,Be.__proto__)},Te.prototype.thenExternal=function(Me,De){return Promise.prototype.then.call(this,Me,De)},Te.prototype.thenList=function(Me){var De=this;return Me.forEach(function(Oe){De=De.thenCore(Oe)}),De},Te.prototype.catch=function(Me){Me&&(Me=Me.bind(this));var De=Promise.prototype.catch.call(this,Me);return Te.convert(De,this)},Te.prototype.catchExternal=function(Me){return Promise.prototype.catch.call(this,Me)},Te.prototype.error=function(Me){return this.then(function(){throw new Error(Me)})},Te.prototype.using=Te.prototype.set,Te.prototype.saveAs=Te.prototype.save,Te.prototype.export=Te.prototype.output,Te.prototype.run=Te.prototype.then,E.getPageSize=function(Me,De,Oe){if(_typeof(Me)==="object"){var Be=Me;Me=Be.orientation,De=Be.unit||De,Oe=Be.format||Oe}De=De||"mm",Oe=Oe||"a4",Me=(""+(Me||"P")).toLowerCase();var ze,$e=(""+Oe).toLowerCase(),He={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(De){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=.75;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:throw"Invalid unit: "+De}var Ue,Ve=0,We=0;if(He.hasOwnProperty($e))Ve=He[$e][1]/ze,We=He[$e][0]/ze;else try{Ve=Oe[1],We=Oe[0]}catch{throw new Error("Invalid format: "+Oe)}if(Me==="p"||Me==="portrait")Me="p",We>Ve&&(Ue=We,We=Ve,Ve=Ue);else{if(Me!=="l"&&Me!=="landscape")throw"Invalid orientation: "+Me;Me="l",Ve>We&&(Ue=We,We=Ve,Ve=Ue)}return{width:We,height:Ve,unit:De,k:ze,orientation:Me}},e.html=function(Me,De){(De=De||{}).callback=De.callback||function(){},De.html2canvas=De.html2canvas||{},De.html2canvas.canvas=De.html2canvas.canvas||this.canvas,De.jsPDF=De.jsPDF||this,De.fontFaces=De.fontFaces?De.fontFaces.map(Ct):null;var Oe=new Te(De);return De.worker?Oe:Oe.from(Me).doCallback()}}(E.API),E.API.addJS=function(e){return Ut=e,this.internal.events.subscribe("postPutResources",function(){Tt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Tt+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ut+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Tt!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Tt+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,Ee=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Re=n.outline.render().split(/\r\n/),Ce=0;Ce<Re.length;Ce++){var Te=Re[Ce],Me=Ee.exec(Te);if(Me!=null){var De=Me[1];n.internal.newObjectDeferredBegin(De,!1)}n.internal.write(Te)}if(this.outline.createNamedDestinations){var Oe=this.internal.pages.length,Be=[];for(Ce=0;Ce<Oe;Ce++){var ze=n.internal.newObject();Be.push(ze);var $e=n.internal.getPageInfo(Ce+1);n.internal.write("<< /D["+$e.objId+" 0 R /XYZ null null null]>> endobj")}var He=n.internal.newObject();for(n.internal.write("<< /Names [ "),Ce=0;Ce<Be.length;Ce++)n.internal.write("(page_"+(Ce+1)+")"+Be[Ce]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+He+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(Ee,Re,Ce){var Te={title:Re,options:Ce,children:[]};return Ee==null&&(Ee=this.root),Ee.children.push(Te),Te},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(Ee){Ee.id=n.internal.newObjectDeferred();for(var Re=0;Re<Ee.children.length;Re++)this.genIds_r(Ee.children[Re])},n.outline.renderRoot=function(Ee){this.objStart(Ee),this.line("/Type /Outlines"),Ee.children.length>0&&(this.line("/First "+this.makeRef(Ee.children[0])),this.line("/Last "+this.makeRef(Ee.children[Ee.children.length-1]))),this.line("/Count "+this.count_r({count:0},Ee)),this.objEnd()},n.outline.renderItems=function(Ee){for(var Re=this.ctx.pdf.internal.getVerticalCoordinateString,Ce=0;Ce<Ee.children.length;Ce++){var Te=Ee.children[Ce];this.objStart(Te),this.line("/Title "+this.makeString(Te.title)),this.line("/Parent "+this.makeRef(Ee)),Ce>0&&this.line("/Prev "+this.makeRef(Ee.children[Ce-1])),Ce<Ee.children.length-1&&this.line("/Next "+this.makeRef(Ee.children[Ce+1])),Te.children.length>0&&(this.line("/First "+this.makeRef(Te.children[0])),this.line("/Last "+this.makeRef(Te.children[Te.children.length-1])));var Me=this.count=this.count_r({count:0},Te);if(Me>0&&this.line("/Count "+Me),Te.options&&Te.options.pageNumber){var De=n.internal.getPageInfo(Te.options.pageNumber);this.line("/Dest ["+De.objId+" 0 R /XYZ 0 "+Re(0)+" 0]")}this.objEnd()}for(var Oe=0;Oe<Ee.children.length;Oe++)this.renderItems(Ee.children[Oe])},n.outline.line=function(Ee){this.ctx.val+=Ee+`\r
`},n.outline.makeRef=function(Ee){return Ee.id+" 0 R"},n.outline.makeString=function(Ee){return"("+n.internal.pdfEscape(Ee)+")"},n.outline.objStart=function(Ee){this.ctx.val+=`\r
`+Ee.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(Ee,Re){for(var Ce=0;Ce<Re.children.length;Ce++)Ee.count++,this.count_r(Ee,Re.children[Ce]);return Ee.count}}])}(E.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,Ee,Re,Ce,Te,Me){var De,Oe=this.decode.DCT_DECODE,Be=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=Te||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,De=function(ze){for(var $e,He=256*ze.charCodeAt(4)+ze.charCodeAt(5),Ue=ze.length,Ve={width:0,height:0,numcomponents:1},We=4;We<Ue;We+=2){if(We+=He,t.indexOf(ze.charCodeAt(We+1))!==-1){$e=256*ze.charCodeAt(We+5)+ze.charCodeAt(We+6),Ve={width:256*ze.charCodeAt(We+7)+ze.charCodeAt(We+8),height:$e,numcomponents:ze.charCodeAt(We+9)};break}He=256*ze.charCodeAt(We+2)+ze.charCodeAt(We+3)}return Ve}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),De.numcomponents){case 1:Me=this.color_spaces.DEVICE_GRAY;break;case 4:Me=this.color_spaces.DEVICE_CMYK;break;case 3:Me=this.color_spaces.DEVICE_RGB}Be={data:n,width:De.width,height:De.height,colorSpace:Me,bitsPerComponent:8,filter:Oe,index:Ee,alias:Re}}return Be}}(E.API),E.API.processPNG=function(e,t,n,Ee){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var Re,Ce=decodePng(e,{checkCrc:!0}),Te=Ce.width,Me=Ce.height,De=Ce.channels,Oe=Ce.palette,Be=Ce.depth;Re=Oe&&De===1?function(St){for(var ar=St.width,hr=St.height,ur=St.data,dr=St.palette,vr=St.depth,yr=!1,br=[],lr=[],cr=void 0,rr=!1,pr=0,mr=0;mr<dr.length;mr++){var ir=_slicedToArray$1(dr[mr],4),nr=ir[0],gr=ir[1],Er=ir[2],Cr=ir[3];br.push(nr,gr,Er),Cr!=null&&(Cr===0?(pr++,lr.length<1&&lr.push(mr)):Cr<255&&(rr=!0))}if(rr||pr>1){yr=!0,lr=void 0;var Nr=ar*hr;cr=new Uint8Array(Nr);for(var Mr=new DataView(ur.buffer),Fr=0;Fr<Nr;Fr++){var $r=re(Mr,Fr,vr),Wr=_slicedToArray$1(dr[$r],4)[3];cr[Fr]=Wr}}else pr===0&&(lr=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:yr?8:void 0,colorBytes:ur,alphaBytes:cr,needSMask:yr,palette:br,mask:lr}}(Ce):De===2||De===4?function(St){for(var ar=St.data,hr=St.width,ur=St.height,dr=St.channels,vr=St.depth,yr=dr===2?"DeviceGray":"DeviceRGB",br=dr-1,lr=hr*ur,cr=br,rr=lr*cr,pr=1*lr,mr=Math.ceil(rr*vr/8),ir=Math.ceil(pr*vr/8),nr=new Uint8Array(mr),gr=new Uint8Array(ir),Er=new DataView(ar.buffer),Cr=new DataView(nr.buffer),Nr=new DataView(gr.buffer),Mr=!1,Fr=0;Fr<lr;Fr++){for(var $r=Fr*dr,Wr=0;Wr<cr;Wr++)ie$2(Cr,re(Er,$r+Wr,vr),Fr*cr+Wr,vr);var Zr=re(Er,$r+cr,vr);Zr<(1<<vr)-1&&(Mr=!0),ie$2(Nr,Zr,1*Fr,vr)}return{colorSpace:yr,colorsPerPixel:br,sMaskBitsPerComponent:Mr?vr:void 0,colorBytes:nr,alphaBytes:gr,needSMask:Mr}}(Ce):function(St){var ar=St.data,hr=St.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:hr,colorsPerPixel:hr==="DeviceGray"?1:3,colorBytes:ar instanceof Uint16Array?function(ur){for(var dr=ur.length,vr=new Uint8Array(2*dr),yr=new DataView(vr.buffer,vr.byteOffset,vr.byteLength),br=0;br<dr;br++)yr.setUint16(2*br,ur[br],!1);return vr}(ar):ar,needSMask:!1}}(Ce);var ze,$e,He,Ue=Re,Ve=Ue.colorSpace,We=Ue.colorsPerPixel,qe=Ue.sMaskBitsPerComponent,Ge=Ue.colorBytes,Ye=Ue.alphaBytes,Ke=Ue.needSMask,Xe=Ue.palette,Ze=Ue.mask,er=null;return Ee!==E.API.image_compression.NONE&&typeof zlibSync=="function"?(er=function(St){var ar;switch(St){case E.API.image_compression.FAST:ar=11;break;case E.API.image_compression.MEDIUM:ar=13;break;case E.API.image_compression.SLOW:ar=14;break;default:ar=12}return ar}(Ee),ze=this.decode.FLATE_DECODE,$e="/Predictor ".concat(er," /Colors ").concat(We," /BitsPerComponent ").concat(Be," /Columns ").concat(Te),e=Xt(Ge,Math.ceil(Te*We*Be/8),We,Be,Ee),Ke&&(He=Xt(Ye,Math.ceil(Te*qe/8),1,qe,Ee))):(ze=void 0,$e=void 0,e=Ge,Ke&&(He=Ye)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(He&&this.__addimage__.isArrayBuffer(He)||this.__addimage__.isArrayBufferView(He))&&(He=this.__addimage__.arrayBufferToBinaryString(He)),{alias:n,data:e,index:t,filter:ze,decodeParameters:$e,transparency:Ze,palette:Xe,sMask:He,predictor:er,width:Te,height:Me,bitsPerComponent:Be,sMaskBitsPerComponent:qe,colorSpace:Ve}}},function(e){e.processGIF89A=function(t,n,Ee,Re){var Ce=new oe(t),Te=Ce.width,Me=Ce.height,De=[];Ce.decodeAndBlitFrameRGBA(0,De);var Oe={data:De,width:Te,height:Me},Be=new ue(100).encode(Oe,100);return e.processJPEG.call(this,Be,n,Ee,Re)},e.processGIF87A=e.processGIF89A}(E.API),ce.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Re=this.datav.getUint8(this.pos++,!0),Ce=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:Re,green:Ee,blue:n,quad:Ce}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ce.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){o.log("bit decode error:"+n)}},ce.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var Ee=this.bottom_up?e:this.height-1-e,Re=0;Re<t;Re++)for(var Ce=this.datav.getUint8(this.pos++,!0),Te=Ee*this.width*4+8*Re*4,Me=0;Me<8&&8*Re+Me<this.width;Me++){var De=this.palette[Ce>>7-Me&1];this.data[Te+4*Me]=De.blue,this.data[Te+4*Me+1]=De.green,this.data[Te+4*Me+2]=De.red,this.data[Te+4*Me+3]=255}n!==0&&(this.pos+=4-n)}},ce.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var Ee=this.bottom_up?n:this.height-1-n,Re=0;Re<e;Re++){var Ce=this.datav.getUint8(this.pos++,!0),Te=Ee*this.width*4+2*Re*4,Me=Ce>>4,De=15&Ce,Oe=this.palette[Me];if(this.data[Te]=Oe.blue,this.data[Te+1]=Oe.green,this.data[Te+2]=Oe.red,this.data[Te+3]=255,2*Re+1>=this.width)break;Oe=this.palette[De],this.data[Te+4]=Oe.blue,this.data[Te+4+1]=Oe.green,this.data[Te+4+2]=Oe.red,this.data[Te+4+3]=255}t!==0&&(this.pos+=4-t)}},ce.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,Ee=0;Ee<this.width;Ee++){var Re=this.datav.getUint8(this.pos++,!0),Ce=n*this.width*4+4*Ee;if(Re<this.palette.length){var Te=this.palette[Re];this.data[Ce]=Te.red,this.data[Ce+1]=Te.green,this.data[Ce+2]=Te.blue,this.data[Ce+3]=255}else this.data[Ce]=255,this.data[Ce+1]=255,this.data[Ce+2]=255,this.data[Ce+3]=255}e!==0&&(this.pos+=4-e)}},ce.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var Ee=this.bottom_up?n:this.height-1-n,Re=0;Re<this.width;Re++){var Ce=this.datav.getUint16(this.pos,!0);this.pos+=2;var Te=(Ce&t)/t*255|0,Me=(Ce>>5&t)/t*255|0,De=(Ce>>10&t)/t*255|0,Oe=Ce>>15?255:0,Be=Ee*this.width*4+4*Re;this.data[Be]=De,this.data[Be+1]=Me,this.data[Be+2]=Te,this.data[Be+3]=Oe}this.pos+=e}},ce.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),Ee=this.height-1;Ee>=0;Ee--){for(var Re=this.bottom_up?Ee:this.height-1-Ee,Ce=0;Ce<this.width;Ce++){var Te=this.datav.getUint16(this.pos,!0);this.pos+=2;var Me=(Te&t)/t*255|0,De=(Te>>5&n)/n*255|0,Oe=(Te>>11)/t*255|0,Be=Re*this.width*4+4*Ce;this.data[Be]=Oe,this.data[Be+1]=De,this.data[Be+2]=Me,this.data[Be+3]=255}this.pos+=e}},ce.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var Ee=this.datav.getUint8(this.pos++,!0),Re=this.datav.getUint8(this.pos++,!0),Ce=this.datav.getUint8(this.pos++,!0),Te=t*this.width*4+4*n;this.data[Te]=Ce,this.data[Te+1]=Re,this.data[Te+2]=Ee,this.data[Te+3]=255}this.pos+=this.width%4}},ce.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var Ee=this.datav.getUint8(this.pos++,!0),Re=this.datav.getUint8(this.pos++,!0),Ce=this.datav.getUint8(this.pos++,!0),Te=this.datav.getUint8(this.pos++,!0),Me=t*this.width*4+4*n;this.data[Me]=Ce,this.data[Me+1]=Re,this.data[Me+2]=Ee,this.data[Me+3]=Te}},ce.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,Ee,Re){var Ce=new ce(t,!1),Te=Ce.width,Me=Ce.height,De={data:Ce.getData(),width:Te,height:Me},Oe=new ue(100).encode(De,100);return e.processJPEG.call(this,Oe,n,Ee,Re)}}(E.API),le.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,Ee,Re){var Ce=new le(t),Te=Ce.width,Me=Ce.height,De={data:Ce.getData(),width:Te,height:Me},Oe=new ue(100).encode(De,100);return e.processJPEG.call(this,Oe,n,Ee,Re)}}(E.API),E.API.processRGBA=function(e,t,n){for(var Ee=e.data,Re=Ee.length,Ce=new Uint8Array(Re/4*3),Te=new Uint8Array(Re/4),Me=0,De=0,Oe=0;Oe<Re;Oe+=4){var Be=Ee[Oe],ze=Ee[Oe+1],$e=Ee[Oe+2],He=Ee[Oe+3];Ce[Me++]=Be,Ce[Me++]=ze,Ce[Me++]=$e,Te[De++]=He}var Ue=this.__addimage__.arrayBufferToBinaryString(Ce);return{alpha:this.__addimage__.arrayBufferToBinaryString(Te),data:Ue,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},E.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ht=E.API,Wt=Ht.getCharWidthsArray=function(e,t){var n,Ee,Re=(t=t||{}).font||this.internal.getFont(),Ce=t.fontSize||this.internal.getFontSize(),Te=t.charSpace||this.internal.getCharSpace(),Me=t.widths?t.widths:Re.metadata.Unicode.widths,De=Me.fof?Me.fof:1,Oe=t.kerning?t.kerning:Re.metadata.Unicode.kerning,Be=Oe.fof?Oe.fof:1,ze=t.doKerning!==!1,$e=0,He=e.length,Ue=0,Ve=Me[0]||De,We=[];for(n=0;n<He;n++)Ee=e.charCodeAt(n),typeof Re.metadata.widthOfString=="function"?We.push((Re.metadata.widthOfGlyph(Re.metadata.characterToGlyph(Ee))+Te*(1e3/Ce)||0)/1e3):($e=ze&&_typeof(Oe[Ee])==="object"&&!isNaN(parseInt(Oe[Ee][Ue],10))?Oe[Ee][Ue]/Be:0,We.push((Me[Ee]||Ve)/De+$e)),Ue=Ee;return We},Vt=Ht.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),Ee=t.font||this.internal.getFont(),Re=t.charSpace||this.internal.getCharSpace();return Ht.processArabic&&(e=Ht.processArabic(e)),typeof Ee.metadata.widthOfString=="function"?Ee.metadata.widthOfString(e,n,Re)/n:Wt.apply(this,arguments).reduce(function(Ce,Te){return Ce+Te},0)},Gt=function(e,t,n,Ee){for(var Re=[],Ce=0,Te=e.length,Me=0;Ce!==Te&&Me+t[Ce]<n;)Me+=t[Ce],Ce++;Re.push(e.slice(0,Ce));var De=Ce;for(Me=0;Ce!==Te;)Me+t[Ce]>Ee&&(Re.push(e.slice(De,Ce)),Me=0,De=Ce),Me+=t[Ce],Ce++;return De!==Ce&&Re.push(e.slice(De,Ce)),Re},Yt=function(e,t,n){n||(n={});var Ee,Re,Ce,Te,Me,De,Oe,Be=[],ze=[Be],$e=n.textIndent||0,He=0,Ue=0,Ve=e.split(" "),We=Wt.apply(this,[" ",n])[0];if(De=n.lineIndent===-1?Ve[0].length+2:n.lineIndent||0){var qe=Array(De).join(" "),Ge=[];Ve.map(function(Ke){(Ke=Ke.split(/\s*\n/)).length>1?Ge=Ge.concat(Ke.map(function(Xe,Ze){return(Ze&&Xe.length?`
`:"")+Xe})):Ge.push(Ke[0])}),Ve=Ge,De=Vt.apply(this,[qe,n])}for(Ce=0,Te=Ve.length;Ce<Te;Ce++){var Ye=0;if(Ee=Ve[Ce],De&&Ee[0]==`
`&&(Ee=Ee.substr(1),Ye=1),$e+He+(Ue=(Re=Wt.apply(this,[Ee,n])).reduce(function(Ke,Xe){return Ke+Xe},0))>t||Ye){if(Ue>t){for(Me=Gt.apply(this,[Ee,Re,t-($e+He),t]),Be.push(Me.shift()),Be=[Me.pop()];Me.length;)ze.push([Me.shift()]);Ue=Re.slice(Ee.length-(Be[0]?Be[0].length:0)).reduce(function(Ke,Xe){return Ke+Xe},0)}else Be=[Ee];ze.push(Be),$e=Ue+De,He=We}else Be.push(Ee),$e+=He+Ue,He=We}return Oe=De?function(Ke,Xe){return(Xe?qe:"")+Ke.join(" ")}:function(Ke){return Ke.join(" ")},ze.map(Oe)},Ht.splitTextToSize=function(e,t,n){var Ee,Re=(n=n||{}).fontSize||this.internal.getFontSize(),Ce=(function(Be){if(Be.widths&&Be.kerning)return{widths:Be.widths,kerning:Be.kerning};var ze=this.internal.getFont(Be.fontName,Be.fontStyle),$e="Unicode";return ze.metadata[$e]?{widths:ze.metadata[$e].widths||{0:1},kerning:ze.metadata[$e].kerning||{}}:{font:ze.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);Ee=Array.isArray(e)?e:String(e).split(/\r?\n/);var Te=1*this.internal.scaleFactor*t/Re;Ce.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/Re:0,Ce.lineIndent=n.lineIndent;var Me,De,Oe=[];for(Me=0,De=Ee.length;Me<De;Me++)Oe=Oe.concat(Yt.apply(this,[Ee[Me],Te,Ce]));return Oe},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",Ee={},Re={},Ce=0;Ce<16;Ce++)Ee[n[Ce]]=t[Ce],Re[t[Ce]]=n[Ce];var Te=function($e){return"0x"+parseInt($e,10).toString(16)},Me=e.__fontmetrics__.compress=function($e){var He,Ue,Ve,We,qe=["{"];for(var Ge in $e){if(He=$e[Ge],isNaN(parseInt(Ge,10))?Ue="'"+Ge+"'":(Ge=parseInt(Ge,10),Ue=(Ue=Te(Ge).slice(2)).slice(0,-1)+Re[Ue.slice(-1)]),typeof He=="number")He<0?(Ve=Te(He).slice(3),We="-"):(Ve=Te(He).slice(2),We=""),Ve=We+Ve.slice(0,-1)+Re[Ve.slice(-1)];else{if(_typeof(He)!=="object")throw new Error("Don't know what to do with value type "+_typeof(He)+".");Ve=Me(He)}qe.push(Ue+Ve)}return qe.push("}"),qe.join("")},De=e.__fontmetrics__.uncompress=function($e){if(typeof $e!="string")throw new Error("Invalid argument passed to uncompress.");for(var He,Ue,Ve,We,qe={},Ge=1,Ye=qe,Ke=[],Xe="",Ze="",er=$e.length-1,St=1;St<er;St+=1)(We=$e[St])=="'"?He?(Ve=He.join(""),He=void 0):He=[]:He?He.push(We):We=="{"?(Ke.push([Ye,Ve]),Ye={},Ve=void 0):We=="}"?((Ue=Ke.pop())[0][Ue[1]]=Ye,Ve=void 0,Ye=Ue[0]):We=="-"?Ge=-1:Ve===void 0?Ee.hasOwnProperty(We)?(Xe+=Ee[We],Ve=parseInt(Xe,16)*Ge,Ge=1,Xe=""):Xe+=We:Ee.hasOwnProperty(We)?(Ze+=Ee[We],Ye[Ve]=parseInt(Ze,16)*Ge,Ge=1,Ve=void 0,Ze=""):Ze+=We;return qe},Oe={codePages:["WinAnsiEncoding"],WinAnsiEncoding:De("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Be={Unicode:{Courier:Oe,"Courier-Bold":Oe,"Courier-BoldOblique":Oe,"Courier-Oblique":Oe,Helvetica:Oe,"Helvetica-Bold":Oe,"Helvetica-BoldOblique":Oe,"Helvetica-Oblique":Oe,"Times-Roman":Oe,"Times-Bold":Oe,"Times-BoldItalic":Oe,"Times-Italic":Oe}},ze={Unicode:{"Courier-Oblique":De("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":De("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":De("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:De("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":De("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":De("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:De("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:De("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":De("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:De("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":De("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":De("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":De("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":De("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function($e){var He=$e.font,Ue=ze.Unicode[He.postScriptName];Ue&&(He.metadata.Unicode={},He.metadata.Unicode.widths=Ue.widths,He.metadata.Unicode.kerning=Ue.kerning);var Ve=Be.Unicode[He.postScriptName];Ve&&(He.metadata.Unicode.encoding=Ve,He.encoding=Ve.codePages[0])}])}(E.API),function(e){var t=function(n){for(var Ee=n.length,Re=new Uint8Array(Ee),Ce=0;Ce<Ee;Ce++)Re[Ce]=n.charCodeAt(Ce);return Re};e.API.events.push(["addFont",function(n){var Ee=void 0,Re=n.font,Ce=n.instance;if(!Re.isStandardFont){if(Ce===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Re.postScriptName+"').");if(typeof(Ee=Ce.existsFileInVFS(Re.postScriptName)===!1?Ce.loadFile(Re.postScriptName):Ce.getFileFromVFS(Re.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Re.postScriptName+"').");(function(Te,Me){Me=/^\x00\x01\x00\x00/.test(Me)?t(Me):t(f(Me)),Te.metadata=e.API.TTFFont.open(Me),Te.metadata.Unicode=Te.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Te.metadata.glyIdsUsed=[0]})(Re,Ee)}}])}(E),E.API.addSvgAsImage=function(e,t,n,Ee,Re,Ce,Te,Me){if(isNaN(t)||isNaN(n))throw o.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Ee)||isNaN(Re))throw o.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var De=document.createElement("canvas");De.width=Ee,De.height=Re;var Oe=De.getContext("2d");Oe.fillStyle="#fff",Oe.fillRect(0,0,De.width,De.height);var Be={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},ze=this;return(i$1.canvg?Promise.resolve(i$1.canvg):__vitePreload(()=>import("./index.es-Bj76nrWh.js"),[])).catch(function($e){return Promise.reject(new Error("Could not load canvg: "+$e))}).then(function($e){return $e.default?$e.default:$e}).then(function($e){return $e.fromString(Oe,e,Be)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function($e){return $e.render(Be)}).then(function(){ze.addImage(De.toDataURL("image/jpeg",1),t,n,Ee,Re,Te,Me)})},E.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var Ee=1;Ee<=this.internal.getNumberOfPages();Ee++)for(var Re=0;Re<this.internal.pages[Ee].length;Re++)this.internal.pages[Ee][Re]=this.internal.pages[Ee][Re].replace(t,n);return this},E.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var Ee,Re,Ce,Te={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Me=Object.keys(Te),De=[],Oe=0,Be=0,ze=0;function $e(Ue,Ve){var We,qe=!1;for(We=0;We<Ue.length;We+=1)Ue[We]===Ve&&(qe=!0);return qe}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Te)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var He=Me.length;for(ze=0;ze<He;ze+=1)n[Me[ze]].value=n[Me[ze]].defaultValue,n[Me[ze]].explicitSet=!1}if(_typeof(e)==="object"){for(Re in e)if(Ce=e[Re],$e(Me,Re)&&Ce!==void 0){if(n[Re].type==="boolean"&&typeof Ce=="boolean")n[Re].value=Ce;else if(n[Re].type==="name"&&$e(n[Re].valueSet,Ce))n[Re].value=Ce;else if(n[Re].type==="integer"&&Number.isInteger(Ce))n[Re].value=Ce;else if(n[Re].type==="array"){for(Oe=0;Oe<Ce.length;Oe+=1)if(Ee=!0,Ce[Oe].length===1&&typeof Ce[Oe][0]=="number")De.push(String(Ce[Oe]-1));else if(Ce[Oe].length>1){for(Be=0;Be<Ce[Oe].length;Be+=1)typeof Ce[Oe][Be]!="number"&&(Ee=!1);Ee===!0&&De.push([Ce[Oe][0]-1,Ce[Oe][1]-1].join(" "))}n[Re].value="["+De.join(" ")+"]"}else n[Re].value=n[Re].defaultValue;n[Re].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Ue,Ve=[];for(Ue in n)n[Ue].explicitSet===!0&&(n[Ue].type==="name"?Ve.push("/"+Ue+" /"+n[Ue].value):Ve.push("/"+Ue+" "+n[Ue].value));Ve.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+Ve.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var Ee='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Re=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Ce=unescape(encodeURIComponent(Ee)),Te=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Me=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),De=unescape(encodeURIComponent("</x:xmpmeta>")),Oe=Ce.length+Te.length+Me.length+Re.length+De.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Oe+" >>"),this.internal.write("stream"),this.internal.write(Re+Ce+Te+Me+De),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(Ee,Re){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:Ee,namespaceuri:Re||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(E.API),function(e){var t=e.API,n=t.pdfEscape16=function(Ce,Te){for(var Me,De=Te.metadata.Unicode.widths,Oe=["","0","00","000","0000"],Be=[""],ze=0,$e=Ce.length;ze<$e;++ze){if(Me=Te.metadata.characterToGlyph(Ce.charCodeAt(ze)),Te.metadata.glyIdsUsed.push(Me),Te.metadata.toUnicode[Me]=Ce.charCodeAt(ze),De.indexOf(Me)==-1&&(De.push(Me),De.push([parseInt(Te.metadata.widthOfGlyph(Me),10)])),Me=="0")return Be.join("");Me=Me.toString(16),Be.push(Oe[4-Me.length],Me)}return Be.join("")},Ee=function(Ce){var Te,Me,De,Oe,Be,ze,$e;for(Be=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,De=[],ze=0,$e=(Me=Object.keys(Ce).sort(function(He,Ue){return He-Ue})).length;ze<$e;ze++)Te=Me[ze],De.length>=100&&(Be+=`
`+De.length+` beginbfchar
`+De.join(`
`)+`
endbfchar`,De=[]),Ce[Te]!==void 0&&Ce[Te]!==null&&typeof Ce[Te].toString=="function"&&(Oe=("0000"+Ce[Te].toString(16)).slice(-4),Te=("0000"+(+Te).toString(16)).slice(-4),De.push("<"+Te+"><"+Oe+">"));return De.length&&(Be+=`
`+De.length+` beginbfchar
`+De.join(`
`)+`
endbfchar
`),Be+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(Ce){(function(Te){var Me=Te.font,De=Te.out,Oe=Te.newObject,Be=Te.putStream;if(Me.metadata instanceof e.API.TTFFont&&Me.encoding==="Identity-H"){for(var ze=Me.metadata.Unicode.widths,$e=Me.metadata.subset.encode(Me.metadata.glyIdsUsed,1),He="",Ue=0;Ue<$e.length;Ue++)He+=String.fromCharCode($e[Ue]);var Ve=Oe();Be({data:He,addLength1:!0,objectId:Ve}),De("endobj");var We=Oe();Be({data:Ee(Me.metadata.toUnicode),addLength1:!0,objectId:We}),De("endobj");var qe=Oe();De("<<"),De("/Type /FontDescriptor"),De("/FontName /"+j(Me.fontName)),De("/FontFile2 "+Ve+" 0 R"),De("/FontBBox "+e.API.PDFObject.convert(Me.metadata.bbox)),De("/Flags "+Me.metadata.flags),De("/StemV "+Me.metadata.stemV),De("/ItalicAngle "+Me.metadata.italicAngle),De("/Ascent "+Me.metadata.ascender),De("/Descent "+Me.metadata.decender),De("/CapHeight "+Me.metadata.capHeight),De(">>"),De("endobj");var Ge=Oe();De("<<"),De("/Type /Font"),De("/BaseFont /"+j(Me.fontName)),De("/FontDescriptor "+qe+" 0 R"),De("/W "+e.API.PDFObject.convert(ze)),De("/CIDToGIDMap /Identity"),De("/DW 1000"),De("/Subtype /CIDFontType2"),De("/CIDSystemInfo"),De("<<"),De("/Supplement 0"),De("/Registry (Adobe)"),De("/Ordering ("+Me.encoding+")"),De(">>"),De(">>"),De("endobj"),Me.objectNumber=Oe(),De("<<"),De("/Type /Font"),De("/Subtype /Type0"),De("/ToUnicode "+We+" 0 R"),De("/BaseFont /"+j(Me.fontName)),De("/Encoding /"+Me.encoding),De("/DescendantFonts ["+Ge+" 0 R]"),De(">>"),De("endobj"),Me.isAlreadyPutted=!0}})(Ce)}]),t.events.push(["putFont",function(Ce){(function(Te){var Me=Te.font,De=Te.out,Oe=Te.newObject,Be=Te.putStream;if(Me.metadata instanceof e.API.TTFFont&&Me.encoding==="WinAnsiEncoding"){for(var ze=Me.metadata.rawData,$e="",He=0;He<ze.length;He++)$e+=String.fromCharCode(ze[He]);var Ue=Oe();Be({data:$e,addLength1:!0,objectId:Ue}),De("endobj");var Ve=Oe();Be({data:Ee(Me.metadata.toUnicode),addLength1:!0,objectId:Ve}),De("endobj");var We=Oe();De("<<"),De("/Descent "+Me.metadata.decender),De("/CapHeight "+Me.metadata.capHeight),De("/StemV "+Me.metadata.stemV),De("/Type /FontDescriptor"),De("/FontFile2 "+Ue+" 0 R"),De("/Flags 96"),De("/FontBBox "+e.API.PDFObject.convert(Me.metadata.bbox)),De("/FontName /"+j(Me.fontName)),De("/ItalicAngle "+Me.metadata.italicAngle),De("/Ascent "+Me.metadata.ascender),De(">>"),De("endobj"),Me.objectNumber=Oe();for(var qe=0;qe<Me.metadata.hmtx.widths.length;qe++)Me.metadata.hmtx.widths[qe]=parseInt(Me.metadata.hmtx.widths[qe]*(1e3/Me.metadata.head.unitsPerEm));De("<</Subtype/TrueType/Type/Font/ToUnicode "+Ve+" 0 R/BaseFont/"+j(Me.fontName)+"/FontDescriptor "+We+" 0 R/Encoding/"+Me.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(Me.metadata.hmtx.widths)+">>"),De("endobj"),Me.isAlreadyPutted=!0}})(Ce)}]);var Re=function(Ce){var Te,Me=Ce.text||"",De=Ce.x,Oe=Ce.y,Be=Ce.options||{},ze=Ce.mutex||{},$e=ze.pdfEscape,He=ze.activeFontKey,Ue=ze.fonts,Ve=He,We="",qe=0,Ge="",Ye=Ue[Ve].encoding;if(Ue[Ve].encoding!=="Identity-H")return{text:Me,x:De,y:Oe,options:Be,mutex:ze};for(Ge=Me,Ve=He,Array.isArray(Me)&&(Ge=Me[0]),qe=0;qe<Ge.length;qe+=1)Ue[Ve].metadata.hasOwnProperty("cmap")&&(Te=Ue[Ve].metadata.cmap.unicode.codeMap[Ge[qe].charCodeAt(0)]),Te||Ge[qe].charCodeAt(0)<256&&Ue[Ve].metadata.hasOwnProperty("Unicode")?We+=Ge[qe]:We+="";var Ke="";return parseInt(Ve.slice(1))<14||Ye==="WinAnsiEncoding"?Ke=$e(We,Ve).split("").map(function(Xe){return Xe.charCodeAt(0).toString(16)}).join(""):Ye==="Identity-H"&&(Ke=n(We,Ue[Ve])),ze.isHex=!0,{text:Ke,x:De,y:Oe,options:Be,mutex:ze}};t.events.push(["postProcessText",function(Ce){var Te=Ce.text||"",Me=[],De={text:Te,x:Ce.x,y:Ce.y,options:Ce.options,mutex:Ce.mutex};if(Array.isArray(Te)){var Oe=0;for(Oe=0;Oe<Te.length;Oe+=1)Array.isArray(Te[Oe])&&Te[Oe].length===3?Me.push([Re(Object.assign({},De,{text:Te[Oe][0]})).text,Te[Oe][1],Te[Oe][2]]):Me.push(Re(Object.assign({},De,{text:Te[Oe]})).text);Ce.text=Me}else Ce.text=Re(Object.assign({},De,{text:Te})).text}])}(E),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,Ee){return t.call(this),this.internal.vFS[n]=Ee,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(E.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(Ee){var Re,Ce,Te,Me,De,Oe,Be,ze=t,$e=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],He=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Ue={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},Ve={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},We=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],qe=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Ge=!1,Ye=0;this.__bidiEngine__={};var Ke=function(ur){var dr=ur.charCodeAt(),vr=dr>>8,yr=Ve[vr];return yr!==void 0?ze[256*yr+(255&dr)]:vr===252||vr===253?"AL":qe.test(vr)?"L":vr===8?"R":"N"},Xe=function(ur){for(var dr,vr=0;vr<ur.length;vr++){if((dr=Ke(ur.charAt(vr)))==="L")return!1;if(dr==="R")return!0}return!1},Ze=function(ur,dr,vr,yr){var br,lr,cr,rr,pr=dr[yr];switch(pr){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Ge=!1;break;case"N":case"AN":break;case"EN":Ge&&(pr="AN");break;case"AL":Ge=!0,pr="R";break;case"WS":case"BN":pr="N";break;case"CS":yr<1||yr+1>=dr.length||(br=vr[yr-1])!=="EN"&&br!=="AN"||(lr=dr[yr+1])!=="EN"&&lr!=="AN"?pr="N":Ge&&(lr="AN"),pr=lr===br?lr:"N";break;case"ES":pr=(br=yr>0?vr[yr-1]:"B")==="EN"&&yr+1<dr.length&&dr[yr+1]==="EN"?"EN":"N";break;case"ET":if(yr>0&&vr[yr-1]==="EN"){pr="EN";break}if(Ge){pr="N";break}for(cr=yr+1,rr=dr.length;cr<rr&&dr[cr]==="ET";)cr++;pr=cr<rr&&dr[cr]==="EN"?"EN":"N";break;case"NSM":if(Te&&!Me){for(rr=dr.length,cr=yr+1;cr<rr&&dr[cr]==="NSM";)cr++;if(cr<rr){var mr=ur[yr],ir=mr>=1425&&mr<=2303||mr===64286;if(br=dr[cr],ir&&(br==="R"||br==="AL")){pr="R";break}}}pr=yr<1||(br=dr[yr-1])==="B"?"N":vr[yr-1];break;case"B":Ge=!1,Re=!0,pr=Ye;break;case"S":Ce=!0,pr="N"}return pr},er=function(ur,dr,vr){var yr=ur.split("");return vr&&St(yr,vr,{hiLevel:Ye}),yr.reverse(),dr&&dr.reverse(),yr.join("")},St=function(ur,dr,vr){var yr,br,lr,cr,rr,pr=-1,mr=ur.length,ir=0,nr=[],gr=Ye?He:$e,Er=[];for(Ge=!1,Re=!1,Ce=!1,br=0;br<mr;br++)Er[br]=Ke(ur[br]);for(lr=0;lr<mr;lr++){if(rr=ir,nr[lr]=Ze(ur,Er,nr,lr),yr=240&(ir=gr[rr][Ue[nr[lr]]]),ir&=15,dr[lr]=cr=gr[ir][5],yr>0)if(yr===16){for(br=pr;br<lr;br++)dr[br]=1;pr=-1}else pr=-1;if(gr[ir][6])pr===-1&&(pr=lr);else if(pr>-1){for(br=pr;br<lr;br++)dr[br]=cr;pr=-1}Er[lr]==="B"&&(dr[lr]=0),vr.hiLevel|=cr}Ce&&function(Cr,Nr,Mr){for(var Fr=0;Fr<Mr;Fr++)if(Cr[Fr]==="S"){Nr[Fr]=Ye;for(var $r=Fr-1;$r>=0&&Cr[$r]==="WS";$r--)Nr[$r]=Ye}}(Er,dr,mr)},ar=function(ur,dr,vr,yr,br){if(!(br.hiLevel<ur)){if(ur===1&&Ye===1&&!Re)return dr.reverse(),void(vr&&vr.reverse());for(var lr,cr,rr,pr,mr=dr.length,ir=0;ir<mr;){if(yr[ir]>=ur){for(rr=ir+1;rr<mr&&yr[rr]>=ur;)rr++;for(pr=ir,cr=rr-1;pr<cr;pr++,cr--)lr=dr[pr],dr[pr]=dr[cr],dr[cr]=lr,vr&&(lr=vr[pr],vr[pr]=vr[cr],vr[cr]=lr);ir=rr}ir++}}},hr=function(ur,dr,vr){var yr=ur.split(""),br={hiLevel:Ye};return vr||(vr=[]),St(yr,vr,br),function(lr,cr,rr){if(rr.hiLevel!==0&&Be)for(var pr,mr=0;mr<lr.length;mr++)cr[mr]===1&&(pr=We.indexOf(lr[mr]))>=0&&(lr[mr]=We[pr+1])}(yr,vr,br),ar(2,yr,dr,vr,br),ar(1,yr,dr,vr,br),yr.join("")};return this.__bidiEngine__.doBidiReorder=function(ur,dr,vr){if(function(br,lr){if(lr)for(var cr=0;cr<br.length;cr++)lr[cr]=cr;Me===void 0&&(Me=Xe(br)),Oe===void 0&&(Oe=Xe(br))}(ur,dr),Te||!De||Oe)if(Te&&De&&Me^Oe)Ye=Me?1:0,ur=er(ur,dr,vr);else if(!Te&&De&&Oe)Ye=Me?1:0,ur=hr(ur,dr,vr),ur=er(ur,dr);else if(!Te||Me||De||Oe){if(Te&&!De&&Me^Oe)ur=er(ur,dr),Me?(Ye=0,ur=hr(ur,dr,vr)):(Ye=1,ur=hr(ur,dr,vr),ur=er(ur,dr));else if(Te&&Me&&!De&&Oe)Ye=1,ur=hr(ur,dr,vr),ur=er(ur,dr);else if(!Te&&!De&&Me^Oe){var yr=Be;Me?(Ye=1,ur=hr(ur,dr,vr),Ye=0,Be=!1,ur=hr(ur,dr,vr),Be=yr):(Ye=0,ur=hr(ur,dr,vr),ur=er(ur,dr),Ye=1,Be=!1,ur=hr(ur,dr,vr),Be=yr,ur=er(ur,dr))}}else Ye=0,ur=hr(ur,dr,vr);else Ye=Me?1:0,ur=hr(ur,dr,vr);return ur},this.__bidiEngine__.setOptions=function(ur){ur&&(Te=ur.isInputVisual,De=ur.isOutputVisual,Me=ur.isInputRtl,Oe=ur.isOutputRtl,Be=ur.isSymmetricSwapping)},this.__bidiEngine__.setOptions(Ee),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(Ee){var Re=Ee.text;Ee.x,Ee.y;var Ce=Ee.options||{};Ee.mutex,Ce.lang;var Te=[];if(Ce.isInputVisual=typeof Ce.isInputVisual!="boolean"||Ce.isInputVisual,n.setOptions(Ce),Object.prototype.toString.call(Re)==="[object Array]"){var Me=0;for(Te=[],Me=0;Me<Re.length;Me+=1)Object.prototype.toString.call(Re[Me])==="[object Array]"?Te.push([n.doBidiReorder(Re[Me][0]),Re[Me][1],Re[Me][2]]):Te.push([n.doBidiReorder(Re[Me])]);Ee.text=Te}else Ee.text=n.doBidiReorder(Re);n.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new fe(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new je(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new de(this.contents),this.head=new me(this),this.name=new xe(this),this.cmap=new be(this),this.toUnicode={},this.hhea=new ye(this),this.maxp=new Ae(this),this.hmtx=new Se(this),this.post=new Ne(this),this.os2=new we(this),this.loca=new Ie(this),this.glyf=new Pe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,Ee,Re,Ce;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Te,Me,De,Oe;for(Oe=[],Te=0,Me=(De=this.bbox).length;Te<Me;Te++)t=De[Te],Oe.push(Math.round(t*this.scaleFactor));return Oe}).call(this),this.stemV=0,this.post.exists?(Ee=255&(Re=this.post.italic_angle),32768&(n=Re>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+Ee)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Ce=this.familyClass)===1||Ce===2||Ce===3||Ce===4||Ce===5||Ce===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,Ee){var Re,Ce,Te,Me;for(Te=0,Ce=0,Me=(t=""+t).length;0<=Me?Ce<Me:Ce>Me;Ce=0<=Me?++Ce:--Ce)Re=t.charCodeAt(Ce),Te+=this.widthOfGlyph(this.characterToGlyph(Re))+Ee*(1e3/n)||0;return Te*(n/1e3)},e.prototype.lineHeight=function(t,n){var Ee;return n==null&&(n=!1),Ee=n?this.lineGap:0,(this.ascender+Ee-this.decender)/1e3*t},e}();var he,fe=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,Ee;for(Ee=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)Ee[n]=String.fromCharCode(this.readByte());return Ee.join("")},e.prototype.writeString=function(t){var n,Ee,Re;for(Re=[],n=0,Ee=t.length;0<=Ee?n<Ee:n>Ee;n=0<=Ee?++n:--n)Re.push(this.writeByte(t.charCodeAt(n)));return Re},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,Ee,Re,Ce,Te,Me,De;return t=this.readByte(),n=this.readByte(),Ee=this.readByte(),Re=this.readByte(),Ce=this.readByte(),Te=this.readByte(),Me=this.readByte(),De=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^Ee)+4294967296*(255^Re)+16777216*(255^Ce)+65536*(255^Te)+256*(255^Me)+(255^De)+1):72057594037927940*t+281474976710656*n+1099511627776*Ee+4294967296*Re+16777216*Ce+65536*Te+256*Me+De},e.prototype.writeLongLong=function(t){var n,Ee;return n=Math.floor(t/4294967296),Ee=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(Ee>>24&255),this.writeByte(Ee>>16&255),this.writeByte(Ee>>8&255),this.writeByte(255&Ee)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,Ee;for(n=[],Ee=0;0<=t?Ee<t:Ee>t;Ee=0<=t?++Ee:--Ee)n.push(this.readByte());return n},e.prototype.write=function(t){var n,Ee,Re,Ce;for(Ce=[],Ee=0,Re=t.length;Ee<Re;Ee++)n=t[Ee],Ce.push(this.writeByte(n));return Ce},e}(),de=function(){var e;function t(n){var Ee,Re,Ce;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},Re=0,Ce=this.tableCount;0<=Ce?Re<Ce:Re>Ce;Re=0<=Ce?++Re:--Re)Ee={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[Ee.tag]=Ee}return t.prototype.encode=function(n){var Ee,Re,Ce,Te,Me,De,Oe,Be,ze,$e,He,Ue,Ve;for(Ve in He=Object.keys(n).length,De=Math.log(2),ze=16*Math.floor(Math.log(He)/De),Te=Math.floor(ze/De),Be=16*He-ze,(Re=new fe).writeInt(this.scalarType),Re.writeShort(He),Re.writeShort(ze),Re.writeShort(Te),Re.writeShort(Be),Ce=16*He,Oe=Re.pos+Ce,Me=null,Ue=[],n)for($e=n[Ve],Re.writeString(Ve),Re.writeInt(e($e)),Re.writeInt(Oe),Re.writeInt($e.length),Ue=Ue.concat($e),Ve==="head"&&(Me=Oe),Oe+=$e.length;Oe%4;)Ue.push(0),Oe++;return Re.write(Ue),Ee=2981146554-e(Re.data),Re.pos=Me+8,Re.writeUInt32(Ee),Re.data},e=function(n){var Ee,Re,Ce,Te;for(n=_e.call(n);n.length%4;)n.push(0);for(Ce=new fe(n),Re=0,Ee=0,Te=n.length;Ee<Te;Ee=Ee+=4)Re+=Ce.readUInt32();return 4294967295&Re},t}(),pe={}.hasOwnProperty,ge=function(e,t){for(var n in t)pe.call(t,n)&&(e[n]=t[n]);function Ee(){this.constructor=e}return Ee.prototype=t.prototype,e.prototype=new Ee,e.__super__=t.prototype,e};he=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var me=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new fe).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),ve=function(){function e(t,n){var Ee,Re,Ce,Te,Me,De,Oe,Be,ze,$e,He,Ue,Ve,We,qe,Ge,Ye;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),ze=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(De=0;De<256;++De)this.codeMap[De]=t.readByte();break;case 4:for(He=t.readUInt16(),$e=He/2,t.pos+=6,Ce=function(){var Ke,Xe;for(Xe=[],De=Ke=0;0<=$e?Ke<$e:Ke>$e;De=0<=$e?++Ke:--Ke)Xe.push(t.readUInt16());return Xe}(),t.pos+=2,Ve=function(){var Ke,Xe;for(Xe=[],De=Ke=0;0<=$e?Ke<$e:Ke>$e;De=0<=$e?++Ke:--Ke)Xe.push(t.readUInt16());return Xe}(),Oe=function(){var Ke,Xe;for(Xe=[],De=Ke=0;0<=$e?Ke<$e:Ke>$e;De=0<=$e?++Ke:--Ke)Xe.push(t.readUInt16());return Xe}(),Be=function(){var Ke,Xe;for(Xe=[],De=Ke=0;0<=$e?Ke<$e:Ke>$e;De=0<=$e?++Ke:--Ke)Xe.push(t.readUInt16());return Xe}(),Re=(this.length-t.pos+this.offset)/2,Me=function(){var Ke,Xe;for(Xe=[],De=Ke=0;0<=Re?Ke<Re:Ke>Re;De=0<=Re?++Ke:--Ke)Xe.push(t.readUInt16());return Xe}(),De=qe=0,Ye=Ce.length;qe<Ye;De=++qe)for(We=Ce[De],Ee=Ge=Ue=Ve[De];Ue<=We?Ge<=We:Ge>=We;Ee=Ue<=We?++Ge:--Ge)Be[De]===0?Te=Ee+Oe[De]:(Te=Me[Be[De]/2+(Ee-Ue)-($e-De)]||0)!==0&&(Te+=Oe[De]),this.codeMap[Ee]=65535&Te}t.pos=ze}return e.encode=function(t,n){var Ee,Re,Ce,Te,Me,De,Oe,Be,ze,$e,He,Ue,Ve,We,qe,Ge,Ye,Ke,Xe,Ze,er,St,ar,hr,ur,dr,vr,yr,br,lr,cr,rr,pr,mr,ir,nr,gr,Er,Cr,Nr,Mr,Fr,$r,Wr,Zr,nn;switch(yr=new fe,Te=Object.keys(t).sort(function(an,Yr){return an-Yr}),n){case"macroman":for(Ve=0,We=function(){var an=[];for(Ue=0;Ue<256;++Ue)an.push(0);return an}(),Ge={0:0},Ce={},br=0,pr=Te.length;br<pr;br++)Ge[$r=t[Re=Te[br]]]==null&&(Ge[$r]=++Ve),Ce[Re]={old:t[Re],new:Ge[t[Re]]},We[Re]=Ge[t[Re]];return yr.writeUInt16(1),yr.writeUInt16(0),yr.writeUInt32(12),yr.writeUInt16(0),yr.writeUInt16(262),yr.writeUInt16(0),yr.write(We),{charMap:Ce,subtable:yr.data,maxGlyphID:Ve+1};case"unicode":for(dr=[],ze=[],Ye=0,Ge={},Ee={},qe=Oe=null,lr=0,mr=Te.length;lr<mr;lr++)Ge[Xe=t[Re=Te[lr]]]==null&&(Ge[Xe]=++Ye),Ee[Re]={old:Xe,new:Ge[Xe]},Me=Ge[Xe]-Re,qe!=null&&Me===Oe||(qe&&ze.push(qe),dr.push(Re),Oe=Me),qe=Re;for(qe&&ze.push(qe),ze.push(65535),dr.push(65535),hr=2*(ar=dr.length),St=2*Math.pow(Math.log(ar)/Math.LN2,2),$e=Math.log(St/2)/Math.LN2,er=2*ar-St,De=[],Ze=[],He=[],Ue=cr=0,ir=dr.length;cr<ir;Ue=++cr){if(ur=dr[Ue],Be=ze[Ue],ur===65535){De.push(0),Ze.push(0);break}if(ur-(vr=Ee[ur].new)>=32768)for(De.push(0),Ze.push(2*(He.length+ar-Ue)),Re=rr=ur;ur<=Be?rr<=Be:rr>=Be;Re=ur<=Be?++rr:--rr)He.push(Ee[Re].new);else De.push(vr-ur),Ze.push(0)}for(yr.writeUInt16(3),yr.writeUInt16(1),yr.writeUInt32(12),yr.writeUInt16(4),yr.writeUInt16(16+8*ar+2*He.length),yr.writeUInt16(0),yr.writeUInt16(hr),yr.writeUInt16(St),yr.writeUInt16($e),yr.writeUInt16(er),Mr=0,nr=ze.length;Mr<nr;Mr++)Re=ze[Mr],yr.writeUInt16(Re);for(yr.writeUInt16(0),Fr=0,gr=dr.length;Fr<gr;Fr++)Re=dr[Fr],yr.writeUInt16(Re);for(Wr=0,Er=De.length;Wr<Er;Wr++)Me=De[Wr],yr.writeUInt16(Me);for(Zr=0,Cr=Ze.length;Zr<Cr;Zr++)Ke=Ze[Zr],yr.writeUInt16(Ke);for(nn=0,Nr=He.length;nn<Nr;nn++)Ve=He[nn],yr.writeUInt16(Ve);return{charMap:Ee,subtable:yr.data,maxGlyphID:Ye+1}}},e}(),be=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,Ee,Re;for(t.pos=this.offset,this.version=t.readUInt16(),Re=t.readUInt16(),this.tables=[],this.unicode=null,Ee=0;0<=Re?Ee<Re:Ee>Re;Ee=0<=Re?++Ee:--Ee)n=new ve(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var Ee,Re;return n==null&&(n="macroman"),Ee=ve.encode(t,n),(Re=new fe).writeUInt16(0),Re.writeUInt16(1),Ee.table=Re.data.concat(Ee.subtable),Ee},e}(),ye=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),we=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,Ee;for(Ee=[],n=0;n<10;++n)Ee.push(t.readByte());return Ee}(),this.charRange=function(){var n,Ee;for(Ee=[],n=0;n<4;++n)Ee.push(t.readInt());return Ee}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,Ee;for(Ee=[],n=0;n<2;n=++n)Ee.push(t.readInt());return Ee}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Ne=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="post",e.prototype.parse=function(t){var n,Ee,Re;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var Ce;for(Ee=t.readUInt16(),this.glyphNameIndex=[],Ce=0;0<=Ee?Ce<Ee:Ce>Ee;Ce=0<=Ee?++Ce:--Ce)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],Re=[];t.pos<this.offset+this.length;)n=t.readByte(),Re.push(this.names.push(t.readString(n)));return Re;case 151552:return Ee=t.readUInt16(),this.offsets=t.read(Ee);case 262144:return this.map=(function(){var Te,Me,De;for(De=[],Ce=Te=0,Me=this.file.maxp.numGlyphs;0<=Me?Te<Me:Te>Me;Ce=0<=Me?++Te:--Te)De.push(t.readUInt32());return De}).call(this)}},e}(),Le=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},xe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="name",e.prototype.parse=function(t){var n,Ee,Re,Ce,Te,Me,De,Oe,Be,ze,$e;for(t.pos=this.offset,t.readShort(),n=t.readShort(),Me=t.readShort(),Ee=[],Ce=0;0<=n?Ce<n:Ce>n;Ce=0<=n?++Ce:--Ce)Ee.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+Me+t.readShort()});for(De={},Ce=Be=0,ze=Ee.length;Be<ze;Ce=++Be)Re=Ee[Ce],t.pos=Re.offset,Oe=t.readString(Re.length),Te=new Le(Oe,Re),De[$e=Re.nameID]==null&&(De[$e]=[]),De[Re.nameID].push(Te);this.strings=De,this.copyright=De[0],this.fontFamily=De[1],this.fontSubfamily=De[2],this.uniqueSubfamily=De[3],this.fontName=De[4],this.version=De[5];try{this.postscriptName=De[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=De[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=De[7],this.manufacturer=De[8],this.designer=De[9],this.description=De[10],this.vendorUrl=De[11],this.designerUrl=De[12],this.license=De[13],this.licenseUrl=De[14],this.preferredFamily=De[15],this.preferredSubfamily=De[17],this.compatibleFull=De[18],this.sampleText=De[19]},e}(),Ae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Se=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,Ee,Re,Ce,Te,Me,De;for(t.pos=this.offset,this.metrics=[],n=0,Me=this.file.hhea.numberOfMetrics;0<=Me?n<Me:n>Me;n=0<=Me?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(Re=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var Oe,Be;for(Be=[],n=Oe=0;0<=Re?Oe<Re:Oe>Re;n=0<=Re?++Oe:--Oe)Be.push(t.readInt16());return Be}(),this.widths=(function(){var Oe,Be,ze,$e;for($e=[],Oe=0,Be=(ze=this.metrics).length;Oe<Be;Oe++)Ce=ze[Oe],$e.push(Ce.advance);return $e}).call(this),Ee=this.widths[this.widths.length-1],De=[],n=Te=0;0<=Re?Te<Re:Te>Re;n=0<=Re?++Te:--Te)De.push(this.widths.push(Ee));return De},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),_e=[].slice,Pe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,Ee,Re,Ce,Te,Me,De,Oe,Be,ze;return t in this.cache?this.cache[t]:(Ce=this.file.loca,n=this.file.contents,Ee=Ce.indexOf(t),(Re=Ce.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+Ee,Te=(Me=new fe(n.read(Re))).readShort(),Oe=Me.readShort(),ze=Me.readShort(),De=Me.readShort(),Be=Me.readShort(),this.cache[t]=Te===-1?new Fe(Me,Oe,ze,De,Be):new ke(Me,Te,Oe,ze,De,Be),this.cache[t]))},e.prototype.encode=function(t,n,Ee){var Re,Ce,Te,Me,De;for(Te=[],Ce=[],Me=0,De=n.length;Me<De;Me++)Re=t[n[Me]],Ce.push(Te.length),Re&&(Te=Te.concat(Re.encode(Ee)));return Ce.push(Te.length),{table:Te,offsets:Ce}},e}(),ke=function(){function e(t,n,Ee,Re,Ce,Te){this.raw=t,this.numberOfContours=n,this.xMin=Ee,this.yMin=Re,this.xMax=Ce,this.yMax=Te,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Fe=function(){function e(t,n,Ee,Re,Ce){var Te,Me;for(this.raw=t,this.xMin=n,this.yMin=Ee,this.xMax=Re,this.yMax=Ce,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Te=this.raw;Me=Te.readShort(),this.glyphOffsets.push(Te.pos),this.glyphIDs.push(Te.readUInt16()),32&Me;)Te.pos+=1&Me?4:2,128&Me?Te.pos+=8:64&Me?Te.pos+=4:8&Me&&(Te.pos+=2)}return e.prototype.encode=function(){var t,n,Ee;for(n=new fe(_e.call(this.raw.data)),t=0,Ee=this.glyphIDs.length;t<Ee;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),Ie=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ge(e,he),e.prototype.tag="loca",e.prototype.parse=function(t){var n,Ee;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var Re,Ce;for(Ce=[],Ee=0,Re=this.length;Ee<Re;Ee+=2)Ce.push(2*t.readUInt16());return Ce}).call(this):(function(){var Re,Ce;for(Ce=[],Ee=0,Re=this.length;Ee<Re;Ee+=4)Ce.push(t.readUInt32());return Ce}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var Ee=new Uint32Array(this.offsets.length),Re=0,Ce=0,Te=0;Te<Ee.length;++Te)if(Ee[Te]=Re,Ce<n.length&&n[Ce]==Te){++Ce,Ee[Te]=Re;var Me=this.offsets[Te],De=this.offsets[Te+1]-Me;De>0&&(Re+=De)}for(var Oe=new Array(4*Ee.length),Be=0;Be<Ee.length;++Be)Oe[4*Be+3]=255&Ee[Be],Oe[4*Be+2]=(65280&Ee[Be])>>8,Oe[4*Be+1]=(16711680&Ee[Be])>>16,Oe[4*Be]=(4278190080&Ee[Be])>>24;return Oe},e}(),je=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,Ee,Re,Ce;for(n in Re=this.font.cmap.tables[0].codeMap,t={},Ce=this.subset)Ee=Ce[n],t[n]=Re[Ee];return t},e.prototype.glyphsFor=function(t){var n,Ee,Re,Ce,Te,Me,De;for(Re={},Te=0,Me=t.length;Te<Me;Te++)Re[Ce=t[Te]]=this.font.glyf.glyphFor(Ce);for(Ce in n=[],Re)(Ee=Re[Ce])!=null&&Ee.compound&&n.push.apply(n,Ee.glyphIDs);if(n.length>0)for(Ce in De=this.glyphsFor(n))Ee=De[Ce],Re[Ce]=Ee;return Re},e.prototype.encode=function(t,n){var Ee,Re,Ce,Te,Me,De,Oe,Be,ze,$e,He,Ue,Ve,We,qe;for(Re in Ee=be.encode(this.generateCmap(),"unicode"),Te=this.glyphsFor(t),He={0:0},qe=Ee.charMap)He[(De=qe[Re]).old]=De.new;for(Ue in $e=Ee.maxGlyphID,Te)Ue in He||(He[Ue]=$e++);return Be=function(Ge){var Ye,Ke;for(Ye in Ke={},Ge)Ke[Ge[Ye]]=Ye;return Ke}(He),ze=Object.keys(Be).sort(function(Ge,Ye){return Ge-Ye}),Ve=function(){var Ge,Ye,Ke;for(Ke=[],Ge=0,Ye=ze.length;Ge<Ye;Ge++)Me=ze[Ge],Ke.push(Be[Me]);return Ke}(),Ce=this.font.glyf.encode(Te,Ve,He),Oe=this.font.loca.encode(Ce.offsets,Ve),We={cmap:this.font.cmap.raw(),glyf:Ce.table,loca:Oe,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(We["OS/2"]=this.font.os2.raw()),this.font.directory.encode(We)},e}();E.API.PDFObject=function(){var e;function t(){}return e=function(n,Ee){return(Array(Ee+1).join("0")+n).slice(-Ee)},t.convert=function(n){var Ee,Re,Ce,Te;if(Array.isArray(n))return"["+function(){var Me,De,Oe;for(Oe=[],Me=0,De=n.length;Me<De;Me++)Ee=n[Me],Oe.push(t.convert(Ee));return Oe}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(Re in Ce=["<<"],n)Te=n[Re],Ce.push("/"+Re+" "+t.convert(Te));return Ce.push(">>"),Ce.join(`
`)}return""+n},t}();function autoTableText(e,t,n,Ee,Re){Ee=Ee||{};var Ce=1.15,Te=Re.internal.scaleFactor,Me=Re.internal.getFontSize()/Te,De=Re.getLineHeightFactor?Re.getLineHeightFactor():Ce,Oe=Me*De,Be=/\r\n|\r|\n/g,ze="",$e=1;if((Ee.valign==="middle"||Ee.valign==="bottom"||Ee.halign==="center"||Ee.halign==="right")&&(ze=typeof e=="string"?e.split(Be):e,$e=ze.length||1),n+=Me*(2-Ce),Ee.valign==="middle"?n-=$e/2*Oe:Ee.valign==="bottom"&&(n-=$e*Oe),Ee.halign==="center"||Ee.halign==="right"){var He=Me;if(Ee.halign==="center"&&(He*=.5),ze&&$e>=1){for(var Ue=0;Ue<ze.length;Ue++)Re.text(ze[Ue],t-Re.getStringUnitWidth(ze[Ue])*He,n),n+=Oe;return Re}t-=Re.getStringUnitWidth(e)*He}return Ee.halign==="justify"?Re.text(e,t,n,{maxWidth:Ee.maxWidth||100,align:"justify"}):Re.text(e,t,n),Re}var globalDefaults={},DocHandler=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=t:globalDefaults=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,n){var Ee,Re,Ce;n===void 0&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var Te=this.jsPDFDocument.internal.getFont(),Me=Te.fontStyle,De=Te.fontName;if(t.font&&(De=t.font),t.fontStyle){Me=t.fontStyle;var Oe=this.getFontList()[De];Oe&&Oe.indexOf(Me)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(Oe[0]),Me=Oe[0])}if(this.jsPDFDocument.setFont(De,Me),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var Be=e.unifyColor(t.fillColor);Be&&(Ee=this.jsPDFDocument).setFillColor.apply(Ee,Be),Be=e.unifyColor(t.textColor),Be&&(Re=this.jsPDFDocument).setTextColor.apply(Re,Be),Be=e.unifyColor(t.lineColor),Be&&(Ce=this.jsPDFDocument).setDrawColor.apply(Ce,Be),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,n,Ee){return this.jsPDFDocument.splitTextToSize(t,n,Ee)},e.prototype.rect=function(t,n,Ee,Re,Ce){return this.jsPDFDocument.rect(t,n,Ee,Re,Ce)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return globalDefaults||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,Ee){n.__proto__=Ee}||function(n,Ee){for(var Re in Ee)Object.prototype.hasOwnProperty.call(Ee,Re)&&(n[Re]=Ee[Re])},extendStatics(e,t)};function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}typeof SuppressedError=="function"&&SuppressedError;var HtmlRowInput=function(e){__extends(t,e);function t(n){var Ee=e.call(this)||this;return Ee._element=n,Ee}return t}(Array);function defaultStyles(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function getTheme(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function getStringWidth(e,t,n){n.applyStyles(t,!0);var Ee=Array.isArray(e)?e:[e],Re=Ee.map(function(Ce){return n.getTextWidth(Ce)}).reduce(function(Ce,Te){return Math.max(Ce,Te)},0);return Re}function addTableBorder(e,t,n,Ee){var Re=t.settings.tableLineWidth,Ce=t.settings.tableLineColor;e.applyStyles({lineWidth:Re,lineColor:Ce});var Te=getFillStyle(Re,!1);Te&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),Ee.y-n.y,Te)}function getFillStyle(e,t){var n=e>0,Ee=t||t===0;return n&&Ee?"DF":n?"S":Ee?"F":null}function parseSpacing(e,t){var n,Ee,Re,Ce;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(n=e.left)!==null&&n!==void 0?n:t,top:(Ee=e.top)!==null&&Ee!==void 0?Ee:t,right:(Re=e.right)!==null&&Re!==void 0?Re:t,bottom:(Ce=e.bottom)!==null&&Ce!==void 0?Ce:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function getPageAvailableWidth(e,t){var n=parseSpacing(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function parseCss(e,t,n,Ee,Re){var Ce={},Te=1.3333333333333333,Me=parseColor(t,function(Ye){return Re.getComputedStyle(Ye).backgroundColor});Me!=null&&(Ce.fillColor=Me);var De=parseColor(t,function(Ye){return Re.getComputedStyle(Ye).color});De!=null&&(Ce.textColor=De);var Oe=parsePadding(Ee,n);Oe&&(Ce.cellPadding=Oe);var Be="borderTopColor",ze=Te*n,$e=Ee.borderTopWidth;if(Ee.borderBottomWidth===$e&&Ee.borderRightWidth===$e&&Ee.borderLeftWidth===$e){var He=(parseFloat($e)||0)/ze;He&&(Ce.lineWidth=He)}else Ce.lineWidth={top:(parseFloat(Ee.borderTopWidth)||0)/ze,right:(parseFloat(Ee.borderRightWidth)||0)/ze,bottom:(parseFloat(Ee.borderBottomWidth)||0)/ze,left:(parseFloat(Ee.borderLeftWidth)||0)/ze},Ce.lineWidth.top||(Ce.lineWidth.right?Be="borderRightColor":Ce.lineWidth.bottom?Be="borderBottomColor":Ce.lineWidth.left&&(Be="borderLeftColor"));var Ue=parseColor(t,function(Ye){return Re.getComputedStyle(Ye)[Be]});Ue!=null&&(Ce.lineColor=Ue);var Ve=["left","right","center","justify"];Ve.indexOf(Ee.textAlign)!==-1&&(Ce.halign=Ee.textAlign),Ve=["middle","bottom","top"],Ve.indexOf(Ee.verticalAlign)!==-1&&(Ce.valign=Ee.verticalAlign);var We=parseInt(Ee.fontSize||"");isNaN(We)||(Ce.fontSize=We/Te);var qe=parseFontStyle(Ee);qe&&(Ce.fontStyle=qe);var Ge=(Ee.fontFamily||"").toLowerCase();return e.indexOf(Ge)!==-1&&(Ce.font=Ge),Ce}function parseFontStyle(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function parseColor(e,t){var n=realColor(e,t);if(!n)return null;var Ee=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!Ee||!Array.isArray(Ee))return null;var Re=[parseInt(Ee[1]),parseInt(Ee[2]),parseInt(Ee[3])],Ce=parseInt(Ee[4]);return Ce===0||isNaN(Re[0])||isNaN(Re[1])||isNaN(Re[2])?null:Re}function realColor(e,t){var n=t(e);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?e.parentElement==null?null:realColor(e.parentElement,t):n}function parsePadding(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],Ee=96/(72/t),Re=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,Ce=n.map(function(Me){return parseInt(Me||"0")/Ee}),Te=parseSpacing(Ce,0);return Re>Te.top&&(Te.top=Re),Re>Te.bottom&&(Te.bottom=Re),Te}function parseHtml(e,t,n,Ee,Re){var Ce,Te;Ee===void 0&&(Ee=!1),Re===void 0&&(Re=!1);var Me;typeof t=="string"?Me=n.document.querySelector(t):Me=t;var De=Object.keys(e.getFontList()),Oe=e.scaleFactor(),Be=[],ze=[],$e=[];if(!Me)return console.error("Html table could not be found with input: ",t),{head:Be,body:ze,foot:$e};for(var He=0;He<Me.rows.length;He++){var Ue=Me.rows[He],Ve=(Te=(Ce=Ue==null?void 0:Ue.parentElement)===null||Ce===void 0?void 0:Ce.tagName)===null||Te===void 0?void 0:Te.toLowerCase(),We=parseRowContent(De,Oe,n,Ue,Ee,Re);We&&(Ve==="thead"?Be.push(We):Ve==="tfoot"?$e.push(We):ze.push(We))}return{head:Be,body:ze,foot:$e}}function parseRowContent(e,t,n,Ee,Re,Ce){for(var Te=new HtmlRowInput(Ee),Me=0;Me<Ee.cells.length;Me++){var De=Ee.cells[Me],Oe=n.getComputedStyle(De);if(Re||Oe.display!=="none"){var Be=void 0;Ce&&(Be=parseCss(e,De,t,Oe,n)),Te.push({rowSpan:De.rowSpan,colSpan:De.colSpan,styles:Be,_element:De,content:parseCellContent(De)})}}var ze=n.getComputedStyle(Ee);if(Te.length>0&&(Re||ze.display!=="none"))return Te}function parseCellContent(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),t.innerText||t.textContent||""}function validateInput(e,t,n){for(var Ee=0,Re=[e,t,n];Ee<Re.length;Ee++){var Ce=Re[Ee];Ce&&typeof Ce!="object"&&console.error("The options parameter should be of type object, is: "+typeof Ce),Ce.startY&&typeof Ce.startY!="number"&&(console.error("Invalid value for startY option",Ce.startY),delete Ce.startY)}}function assign$1(e,t,n,Ee,Re){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var Ce=Object(e),Te=1;Te<arguments.length;Te++){var Me=arguments[Te];if(Me!=null)for(var De in Me)Object.prototype.hasOwnProperty.call(Me,De)&&(Ce[De]=Me[De])}return Ce}function parseInput(e,t){var n=new DocHandler(e),Ee=n.getDocumentOptions(),Re=n.getGlobalOptions();validateInput(Re,Ee,t);var Ce=assign$1({},Re,Ee,t),Te;typeof window<"u"&&(Te=window);var Me=parseStyles(Re,Ee,t),De=parseHooks(Re,Ee,t),Oe=parseSettings(n,Ce),Be=parseContent$1(n,Ce,Te);return{id:t.tableId,content:Be,hooks:De,styles:Me,settings:Oe}}function parseStyles(e,t,n){for(var Ee={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},Re=function(De){if(De==="columnStyles"){var Oe=e[De],Be=t[De],ze=n[De];Ee.columnStyles=assign$1({},Oe,Be,ze)}else{var $e=[e,t,n],He=$e.map(function(Ue){return Ue[De]||{}});Ee[De]=assign$1({},He[0],He[1],He[2])}},Ce=0,Te=Object.keys(Ee);Ce<Te.length;Ce++){var Me=Te[Ce];Re(Me)}return Ee}function parseHooks(e,t,n){for(var Ee=[e,t,n],Re={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},Ce=0,Te=Ee;Ce<Te.length;Ce++){var Me=Te[Ce];Me.didParseCell&&Re.didParseCell.push(Me.didParseCell),Me.willDrawCell&&Re.willDrawCell.push(Me.willDrawCell),Me.didDrawCell&&Re.didDrawCell.push(Me.didDrawCell),Me.willDrawPage&&Re.willDrawPage.push(Me.willDrawPage),Me.didDrawPage&&Re.didDrawPage.push(Me.didDrawPage)}return Re}function parseSettings(e,t){var n,Ee,Re,Ce,Te,Me,De,Oe,Be,ze,$e,He,Ue=parseSpacing(t.margin,40/e.scaleFactor()),Ve=(n=getStartY(e,t.startY))!==null&&n!==void 0?n:Ue.top,We;t.showFoot===!0?We="everyPage":t.showFoot===!1?We="never":We=(Ee=t.showFoot)!==null&&Ee!==void 0?Ee:"everyPage";var qe;t.showHead===!0?qe="everyPage":t.showHead===!1?qe="never":qe=(Re=t.showHead)!==null&&Re!==void 0?Re:"everyPage";var Ge=(Ce=t.useCss)!==null&&Ce!==void 0?Ce:!1,Ye=t.theme||(Ge?"plain":"striped"),Ke=!!t.horizontalPageBreak,Xe=(Te=t.horizontalPageBreakRepeat)!==null&&Te!==void 0?Te:null;return{includeHiddenHtml:(Me=t.includeHiddenHtml)!==null&&Me!==void 0?Me:!1,useCss:Ge,theme:Ye,startY:Ve,margin:Ue,pageBreak:(De=t.pageBreak)!==null&&De!==void 0?De:"auto",rowPageBreak:(Oe=t.rowPageBreak)!==null&&Oe!==void 0?Oe:"auto",tableWidth:(Be=t.tableWidth)!==null&&Be!==void 0?Be:"auto",showHead:qe,showFoot:We,tableLineWidth:(ze=t.tableLineWidth)!==null&&ze!==void 0?ze:0,tableLineColor:($e=t.tableLineColor)!==null&&$e!==void 0?$e:200,horizontalPageBreak:Ke,horizontalPageBreakRepeat:Xe,horizontalPageBreakBehaviour:(He=t.horizontalPageBreakBehaviour)!==null&&He!==void 0?He:"afterAllRows"}}function getStartY(e,t){var n=e.getLastAutoTable(),Ee=e.scaleFactor(),Re=e.pageNumber(),Ce=!1;if(n&&n.startPageNumber){var Te=n.startPageNumber+n.pageNumber-1;Ce=Te===Re}return typeof t=="number"?t:(t==null||t===!1)&&Ce&&(n==null?void 0:n.finalY)!=null?n.finalY+20/Ee:null}function parseContent$1(e,t,n){var Ee=t.head||[],Re=t.body||[],Ce=t.foot||[];if(t.html){var Te=t.includeHiddenHtml;if(n){var Me=parseHtml(e,t.html,n,Te,t.useCss)||{};Ee=Me.head||Ee,Re=Me.body||Ee,Ce=Me.foot||Ee}else console.error("Cannot parse html in non browser environment")}var De=t.columns||parseColumns(Ee,Re,Ce);return{columns:De,head:Ee,body:Re,foot:Ce}}function parseColumns(e,t,n){var Ee=e[0]||t[0]||n[0]||[],Re=[];return Object.keys(Ee).filter(function(Ce){return Ce!=="_element"}).forEach(function(Ce){var Te=1,Me;Array.isArray(Ee)?Me=Ee[parseInt(Ce)]:Me=Ee[Ce],typeof Me=="object"&&!Array.isArray(Me)&&(Te=(Me==null?void 0:Me.colSpan)||1);for(var De=0;De<Te;De++){var Oe=void 0;Array.isArray(Ee)?Oe=Re.length:Oe=Ce+(De>0?"_".concat(De):"");var Be={dataKey:Oe};Re.push(Be)}}),Re}var HookData=function(){function e(t,n,Ee){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=Ee,this.doc=t.getDocument()}return e}(),CellHookData=function(e){__extends(t,e);function t(n,Ee,Re,Ce,Te,Me){var De=e.call(this,n,Ee,Me)||this;return De.cell=Re,De.row=Ce,De.column=Te,De.section=Ce.section,De}return t}(HookData),Table=function(){function e(t,n){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(n,Ee){return n+Ee.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(n,Ee){return n+Ee.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,n,Ee,Re,Ce,Te){for(var Me=0,De=n;Me<De.length;Me++){var Oe=De[Me],Be=new CellHookData(t,this,Ee,Re,Ce,Te),ze=Oe(Be)===!1;if(Ee.text=Array.isArray(Ee.text)?Ee.text:[Ee.text],ze)return!1}return!0},e.prototype.callEndPageHooks=function(t,n){t.applyStyles(t.userStyles);for(var Ee=0,Re=this.hooks.didDrawPage;Ee<Re.length;Ee++){var Ce=Re[Ee];Ce(new HookData(t,this,n))}},e.prototype.callWillDrawPageHooks=function(t,n){for(var Ee=0,Re=this.hooks.willDrawPage;Ee<Re.length;Ee++){var Ce=Re[Ee];Ce(new HookData(t,this,n))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(Re,Ce){return Re+Ce.wrappedWidth},0);return n}else{var Ee=this.settings.margin;return t-Ee.left-Ee.right}},e}(),Row=function(){function e(t,n,Ee,Re,Ce){Ce===void 0&&(Ce=!1),this.height=0,this.raw=t,t instanceof HtmlRowInput&&(this.raw=t._element,this.element=t._element),this.index=n,this.section=Ee,this.cells=Re,this.spansMultiplePages=Ce}return e.prototype.getMaxCellHeight=function(t){var n=this;return t.reduce(function(Ee,Re){var Ce;return Math.max(Ee,((Ce=n.cells[Re.index])===null||Ce===void 0?void 0:Ce.height)||0)},0)},e.prototype.hasRowSpan=function(t){var n=this;return t.filter(function(Ee){var Re=n.cells[Ee.index];return Re?Re.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,n){return this.getMaxCellHeight(n)<=t},e.prototype.getMinimumRowHeight=function(t,n){var Ee=this;return t.reduce(function(Re,Ce){var Te=Ee.cells[Ce.index];if(!Te)return 0;var Me=n.getLineHeight(Te.styles.fontSize),De=Te.padding("vertical"),Oe=De+Me;return Oe>Re?Oe:Re},0)},e}(),Cell=function(){function e(t,n,Ee){var Re;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=Ee,this.raw=t;var Ce=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,Ce=(Re=t.content)!==null&&Re!==void 0?Re:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var Te=Ce!=null?""+Ce:"",Me=/\r\n|\r|\n/g;this.text=Te.split(Me)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");t=this.y+n/2+this.padding("top")}var Ee;if(this.styles.halign==="right")Ee=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var Re=this.width-this.padding("horizontal");Ee=this.x+Re/2+this.padding("left")}else Ee=this.x+this.padding("left");return{x:Ee,y:t}},e.prototype.getContentHeight=function(t,n){n===void 0&&(n=1.15);var Ee=Array.isArray(this.text)?this.text.length:1,Re=this.styles.fontSize/t*n,Ce=Ee*Re+this.padding("vertical");return Math.max(Ce,this.styles.minCellHeight)},e.prototype.padding=function(t){var n=parseSpacing(this.styles.cellPadding,0);return t==="vertical"?n.top+n.bottom:t==="horizontal"?n.left+n.right:n[t]},e}(),Column=function(){function e(t,n,Ee){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=n,this.index=Ee}return e.prototype.getMaxCustomCellWidth=function(t){for(var n=0,Ee=0,Re=t.allRows();Ee<Re.length;Ee++){var Ce=Re[Ee],Te=Ce.cells[this.index];Te&&typeof Te.styles.cellWidth=="number"&&(n=Math.max(n,Te.styles.cellWidth))}return n},e}();function calculateWidths(e,t){calculate(e,t);var n=[],Ee=0;t.columns.forEach(function(Ce){var Te=Ce.getMaxCustomCellWidth(t);Te?Ce.width=Te:(Ce.width=Ce.wrappedWidth,n.push(Ce)),Ee+=Ce.width});var Re=t.getWidth(e.pageSize().width)-Ee;Re&&(Re=resizeColumns(n,Re,function(Ce){return Math.max(Ce.minReadableWidth,Ce.minWidth)})),Re&&(Re=resizeColumns(n,Re,function(Ce){return Ce.minWidth})),Re=Math.abs(Re),!t.settings.horizontalPageBreak&&Re>.1/e.scaleFactor()&&(Re=Re<1?Re:Math.round(Re),console.warn("Of the table content, ".concat(Re," units width could not fit page"))),applyColSpans(t),fitContent(t,e),applyRowSpans(t)}function calculate(e,t){var n=e.scaleFactor(),Ee=t.settings.horizontalPageBreak,Re=getPageAvailableWidth(e,t);t.allRows().forEach(function(Ce){for(var Te=0,Me=t.columns;Te<Me.length;Te++){var De=Me[Te],Oe=Ce.cells[De.index];if(Oe){var Be=t.hooks.didParseCell;t.callCellHooks(e,Be,Oe,Ce,De,null);var ze=Oe.padding("horizontal");Oe.contentWidth=getStringWidth(Oe.text,Oe.styles,e)+ze;var $e=getStringWidth(Oe.text.join(" ").split(/[^\S\u00A0]+/),Oe.styles,e);if(Oe.minReadableWidth=$e+Oe.padding("horizontal"),typeof Oe.styles.cellWidth=="number")Oe.minWidth=Oe.styles.cellWidth,Oe.wrappedWidth=Oe.styles.cellWidth;else if(Oe.styles.cellWidth==="wrap"||Ee===!0)Oe.contentWidth>Re?(Oe.minWidth=Re,Oe.wrappedWidth=Re):(Oe.minWidth=Oe.contentWidth,Oe.wrappedWidth=Oe.contentWidth);else{var He=10/n;Oe.minWidth=Oe.styles.minCellWidth||He,Oe.wrappedWidth=Oe.contentWidth,Oe.minWidth>Oe.wrappedWidth&&(Oe.wrappedWidth=Oe.minWidth)}}}}),t.allRows().forEach(function(Ce){for(var Te=0,Me=t.columns;Te<Me.length;Te++){var De=Me[Te],Oe=Ce.cells[De.index];if(Oe&&Oe.colSpan===1)De.wrappedWidth=Math.max(De.wrappedWidth,Oe.wrappedWidth),De.minWidth=Math.max(De.minWidth,Oe.minWidth),De.minReadableWidth=Math.max(De.minReadableWidth,Oe.minReadableWidth);else{var Be=t.styles.columnStyles[De.dataKey]||t.styles.columnStyles[De.index]||{},ze=Be.cellWidth||Be.minCellWidth;ze&&typeof ze=="number"&&(De.minWidth=ze,De.wrappedWidth=ze)}Oe&&(Oe.colSpan>1&&!De.minWidth&&(De.minWidth=Oe.minWidth),Oe.colSpan>1&&!De.wrappedWidth&&(De.wrappedWidth=Oe.minWidth))}})}function resizeColumns(e,t,n){for(var Ee=t,Re=e.reduce(function(He,Ue){return He+Ue.wrappedWidth},0),Ce=0;Ce<e.length;Ce++){var Te=e[Ce],Me=Te.wrappedWidth/Re,De=Ee*Me,Oe=Te.width+De,Be=n(Te),ze=Oe<Be?Be:Oe;t-=ze-Te.width,Te.width=ze}if(t=Math.round(t*1e10)/1e10,t){var $e=e.filter(function(He){return t<0?He.width>n(He):!0});$e.length&&(t=resizeColumns($e,t,n))}return t}function applyRowSpans(e){for(var t={},n=1,Ee=e.allRows(),Re=0;Re<Ee.length;Re++)for(var Ce=Ee[Re],Te=0,Me=e.columns;Te<Me.length;Te++){var De=Me[Te],Oe=t[De.index];if(n>1)n--,delete Ce.cells[De.index];else if(Oe)Oe.cell.height+=Ce.height,n=Oe.cell.colSpan,delete Ce.cells[De.index],Oe.left--,Oe.left<=1&&delete t[De.index];else{var Be=Ce.cells[De.index];if(!Be)continue;if(Be.height=Ce.height,Be.rowSpan>1){var ze=Ee.length-Re,$e=Be.rowSpan>ze?ze:Be.rowSpan;t[De.index]={cell:Be,left:$e,row:Ce}}}}}function applyColSpans(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var Ee=t[n],Re=null,Ce=0,Te=0,Me=0;Me<e.columns.length;Me++){var De=e.columns[Me];if(Te-=1,Te>1&&e.columns[Me+1])Ce+=De.width,delete Ee.cells[De.index];else if(Re){var Oe=Re;delete Ee.cells[De.index],Re=null,Oe.width=De.width+Ce}else{var Oe=Ee.cells[De.index];if(!Oe)continue;if(Te=Oe.colSpan,Ce=0,Oe.colSpan>1){Re=Oe,Ce+=De.width;continue}Oe.width=De.width+Ce}}}function fitContent(e,t){for(var n={count:0,height:0},Ee=0,Re=e.allRows();Ee<Re.length;Ee++){for(var Ce=Re[Ee],Te=0,Me=e.columns;Te<Me.length;Te++){var De=Me[Te],Oe=Ce.cells[De.index];if(Oe){t.applyStyles(Oe.styles,!0);var Be=Oe.width-Oe.padding("horizontal");if(Oe.styles.overflow==="linebreak")Oe.text=t.splitTextToSize(Oe.text,Be+1/t.scaleFactor(),{fontSize:Oe.styles.fontSize});else if(Oe.styles.overflow==="ellipsize")Oe.text=ellipsize(Oe.text,Be,Oe.styles,t,"...");else if(Oe.styles.overflow==="hidden")Oe.text=ellipsize(Oe.text,Be,Oe.styles,t,"");else if(typeof Oe.styles.overflow=="function"){var ze=Oe.styles.overflow(Oe.text,Be);typeof ze=="string"?Oe.text=[ze]:Oe.text=ze}Oe.contentHeight=Oe.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var $e=Oe.contentHeight/Oe.rowSpan;Oe.rowSpan>1&&n.count*n.height<$e*Oe.rowSpan?n={height:$e,count:Oe.rowSpan}:n&&n.count>0&&n.height>$e&&($e=n.height),$e>Ce.height&&(Ce.height=$e)}}n.count--}}function ellipsize(e,t,n,Ee,Re){return e.map(function(Ce){return ellipsizeStr(Ce,t,n,Ee,Re)})}function ellipsizeStr(e,t,n,Ee,Re){var Ce=1e4*Ee.scaleFactor();if(t=Math.ceil(t*Ce)/Ce,t>=getStringWidth(e,n,Ee))return e;for(;t<getStringWidth(e+Re,n,Ee)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+Re}function createTable(e,t){var n=new DocHandler(e),Ee=parseContent(t,n.scaleFactor()),Re=new Table(t,Ee);return calculateWidths(n,Re),n.applyStyles(n.userStyles),Re}function parseContent(e,t){var n=e.content,Ee=createColumns(n.columns);if(n.head.length===0){var Re=generateSectionRow(Ee,"head");Re&&n.head.push(Re)}if(n.foot.length===0){var Re=generateSectionRow(Ee,"foot");Re&&n.foot.push(Re)}var Ce=e.settings.theme,Te=e.styles;return{columns:Ee,head:parseSection("head",n.head,Ee,Te,Ce,t),body:parseSection("body",n.body,Ee,Te,Ce,t),foot:parseSection("foot",n.foot,Ee,Te,Ce,t)}}function parseSection(e,t,n,Ee,Re,Ce){var Te={},Me=t.map(function(De,Oe){for(var Be=0,ze={},$e=0,He=0,Ue=0,Ve=n;Ue<Ve.length;Ue++){var We=Ve[Ue];if(Te[We.index]==null||Te[We.index].left===0)if(He===0){var qe=void 0;Array.isArray(De)?qe=De[We.index-$e-Be]:qe=De[We.dataKey];var Ge={};typeof qe=="object"&&!Array.isArray(qe)&&(Ge=(qe==null?void 0:qe.styles)||{});var Ye=cellStyles(e,We,Oe,Re,Ee,Ce,Ge),Ke=new Cell(qe,Ye,e);ze[We.dataKey]=Ke,ze[We.index]=Ke,He=Ke.colSpan-1,Te[We.index]={left:Ke.rowSpan-1,times:He}}else He--,$e++;else Te[We.index].left--,He=Te[We.index].times,Be++}return new Row(De,Oe,e,ze)});return Me}function generateSectionRow(e,t){var n={};return e.forEach(function(Ee){if(Ee.raw!=null){var Re=getSectionTitle(t,Ee.raw);Re!=null&&(n[Ee.dataKey]=Re)}}),Object.keys(n).length>0?n:null}function getSectionTitle(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function createColumns(e){return e.map(function(t,n){var Ee,Re;return typeof t=="object"?Re=(Ee=t.dataKey)!==null&&Ee!==void 0?Ee:n:Re=n,new Column(Re,t,n)})}function cellStyles(e,t,n,Ee,Re,Ce,Te){var Me=getTheme(Ee),De;e==="head"?De=Re.headStyles:e==="body"?De=Re.bodyStyles:e==="foot"&&(De=Re.footStyles);var Oe=assign$1({},Me.table,Me[e],Re.styles,De),Be=Re.columnStyles[t.dataKey]||Re.columnStyles[t.index]||{},ze=e==="body"?Be:{},$e=e==="body"&&n%2===0?assign$1({},Me.alternateRow,Re.alternateRowStyles):{},He=defaultStyles(Ce),Ue=assign$1({},He,Oe,$e,ze);return assign$1(Ue,Te)}function getColumnsCanFitInPage(e,t,n){var Ee;n===void 0&&(n={});var Re=getPageAvailableWidth(e,t),Ce=new Map,Te=[],Me=[],De=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?De=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(De=[t.settings.horizontalPageBreakRepeat]),De.forEach(function($e){var He=t.columns.find(function(Ue){return Ue.dataKey===$e||Ue.index===$e});He&&!Ce.has(He.index)&&(Ce.set(He.index,!0),Te.push(He.index),Me.push(t.columns[He.index]),Re-=He.wrappedWidth)});for(var Oe=!0,Be=(Ee=n==null?void 0:n.start)!==null&&Ee!==void 0?Ee:0;Be<t.columns.length;){if(Ce.has(Be)){Be++;continue}var ze=t.columns[Be].wrappedWidth;if(Oe||Re>=ze)Oe=!1,Te.push(Be),Me.push(t.columns[Be]),Re-=ze;else break;Be++}return{colIndexes:Te,columns:Me,lastIndex:Be-1}}function calculateAllColumnsCanFitInPage(e,t){for(var n=[],Ee=0;Ee<t.columns.length;Ee++){var Re=getColumnsCanFitInPage(e,t,{start:Ee});Re.columns.length&&(n.push(Re),Ee=Re.lastIndex)}return n}function drawTable(e,t){var n=t.settings,Ee=n.startY,Re=n.margin,Ce={x:Re.left,y:Ee},Te=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),Me=Ee+Re.bottom+Te;if(n.pageBreak==="avoid"){var De=t.body,Oe=De.reduce(function($e,He){return $e+He.height},0);Me+=Oe}var Be=new DocHandler(e);(n.pageBreak==="always"||n.startY!=null&&Me>Be.pageSize().height)&&(nextPage(Be),Ce.y=Re.top),t.callWillDrawPageHooks(Be,Ce);var ze=assign$1({},Ce);t.startPageNumber=Be.pageNumber(),n.horizontalPageBreak?printTableWithHorizontalPageBreak(Be,t,ze,Ce):(Be.applyStyles(Be.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function($e){return printRow(Be,t,$e,Ce,t.columns)}),Be.applyStyles(Be.userStyles),t.body.forEach(function($e,He){var Ue=He===t.body.length-1;printFullRow(Be,t,$e,Ue,ze,Ce,t.columns)}),Be.applyStyles(Be.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function($e){return printRow(Be,t,$e,Ce,t.columns)})),addTableBorder(Be,t,ze,Ce),t.callEndPageHooks(Be,Ce),t.finalY=Ce.y,e.lastAutoTable=t,Be.applyStyles(Be.userStyles)}function printTableWithHorizontalPageBreak(e,t,n,Ee){var Re=calculateAllColumnsCanFitInPage(e,t),Ce=t.settings;if(Ce.horizontalPageBreakBehaviour==="afterAllRows")Re.forEach(function(Oe,Be){e.applyStyles(e.userStyles),Be>0?addPage(e,t,n,Ee,Oe.columns,!0):printHead(e,t,Ee,Oe.columns),printBody(e,t,n,Ee,Oe.columns),printFoot(e,t,Ee,Oe.columns)});else for(var Te=-1,Me=Re[0],De=function(){var Oe=Te;if(Me){e.applyStyles(e.userStyles);var Be=Me.columns;Te>=0?addPage(e,t,n,Ee,Be,!0):printHead(e,t,Ee,Be),Oe=printBodyWithoutPageBreaks(e,t,Te+1,Ee,Be),printFoot(e,t,Ee,Be)}var ze=Oe-Te;Re.slice(1).forEach(function($e){e.applyStyles(e.userStyles),addPage(e,t,n,Ee,$e.columns,!0),printBodyWithoutPageBreaks(e,t,Te+1,Ee,$e.columns,ze),printFoot(e,t,Ee,$e.columns)}),Te=Oe};Te<t.body.length-1;)De()}function printHead(e,t,n,Ee){var Re=t.settings;e.applyStyles(e.userStyles),(Re.showHead==="firstPage"||Re.showHead==="everyPage")&&t.head.forEach(function(Ce){return printRow(e,t,Ce,n,Ee)})}function printBody(e,t,n,Ee,Re){e.applyStyles(e.userStyles),t.body.forEach(function(Ce,Te){var Me=Te===t.body.length-1;printFullRow(e,t,Ce,Me,n,Ee,Re)})}function printBodyWithoutPageBreaks(e,t,n,Ee,Re,Ce){e.applyStyles(e.userStyles),Ce=Ce??t.body.length;var Te=Math.min(n+Ce,t.body.length),Me=-1;return t.body.slice(n,Te).forEach(function(De,Oe){var Be=n+Oe===t.body.length-1,ze=getRemainingPageSpace(e,t,Be,Ee);De.canEntireRowFit(ze,Re)&&(printRow(e,t,De,Ee,Re),Me=n+Oe)}),Me}function printFoot(e,t,n,Ee){var Re=t.settings;e.applyStyles(e.userStyles),(Re.showFoot==="lastPage"||Re.showFoot==="everyPage")&&t.foot.forEach(function(Ce){return printRow(e,t,Ce,n,Ee)})}function getRemainingLineCount(e,t,n){var Ee=n.getLineHeight(e.styles.fontSize),Re=e.padding("vertical"),Ce=Math.floor((t-Re)/Ee);return Math.max(0,Ce)}function modifyRowToFit(e,t,n,Ee){var Re={};e.spansMultiplePages=!0,e.height=0;for(var Ce=0,Te=0,Me=n.columns;Te<Me.length;Te++){var De=Me[Te],Oe=e.cells[De.index];if(Oe){Array.isArray(Oe.text)||(Oe.text=[Oe.text]);var Be=new Cell(Oe.raw,Oe.styles,Oe.section);Be=assign$1(Be,Oe),Be.text=[];var ze=getRemainingLineCount(Oe,t,Ee);Oe.text.length>ze&&(Be.text=Oe.text.splice(ze,Oe.text.length));var $e=Ee.scaleFactor(),He=Ee.getLineHeightFactor();Oe.contentHeight=Oe.getContentHeight($e,He),Oe.contentHeight>=t&&(Oe.contentHeight=t,Be.styles.minCellHeight-=t),Oe.contentHeight>e.height&&(e.height=Oe.contentHeight),Be.contentHeight=Be.getContentHeight($e,He),Be.contentHeight>Ce&&(Ce=Be.contentHeight),Re[De.index]=Be}}var Ue=new Row(e.raw,-1,e.section,Re,!0);Ue.height=Ce;for(var Ve=0,We=n.columns;Ve<We.length;Ve++){var De=We[Ve],Be=Ue.cells[De.index];Be&&(Be.height=Ue.height);var Oe=e.cells[De.index];Oe&&(Oe.height=e.height)}return Ue}function shouldPrintOnCurrentPage(e,t,n,Ee){var Re=e.pageSize().height,Ce=Ee.settings.margin,Te=Ce.top+Ce.bottom,Me=Re-Te;t.section==="body"&&(Me-=Ee.getHeadHeight(Ee.columns)+Ee.getFootHeight(Ee.columns));var De=t.getMinimumRowHeight(Ee.columns,e),Oe=De<n;if(De>Me)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!Oe)return!1;var Be=t.hasRowSpan(Ee.columns),ze=t.getMaxCellHeight(Ee.columns)>Me;return ze?(Be&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(Be||Ee.settings.rowPageBreak==="avoid")}function printFullRow(e,t,n,Ee,Re,Ce,Te){var Me=getRemainingPageSpace(e,t,Ee,Ce);if(n.canEntireRowFit(Me,Te))printRow(e,t,n,Ce,Te);else if(shouldPrintOnCurrentPage(e,n,Me,t)){var De=modifyRowToFit(n,Me,t,e);printRow(e,t,n,Ce,Te),addPage(e,t,Re,Ce,Te),printFullRow(e,t,De,Ee,Re,Ce,Te)}else addPage(e,t,Re,Ce,Te),printFullRow(e,t,n,Ee,Re,Ce,Te)}function printRow(e,t,n,Ee,Re){Ee.x=t.settings.margin.left;for(var Ce=0,Te=Re;Ce<Te.length;Ce++){var Me=Te[Ce],De=n.cells[Me.index];if(!De){Ee.x+=Me.width;continue}e.applyStyles(De.styles),De.x=Ee.x,De.y=Ee.y;var Oe=t.callCellHooks(e,t.hooks.willDrawCell,De,n,Me,Ee);if(Oe===!1){Ee.x+=Me.width;continue}drawCellRect(e,De,Ee);var Be=De.getTextPos();autoTableText(De.text,Be.x,Be.y,{halign:De.styles.halign,valign:De.styles.valign,maxWidth:Math.ceil(De.width-De.padding("left")-De.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,De,n,Me,Ee),Ee.x+=Me.width}Ee.y+=n.height}function drawCellRect(e,t,n){var Ee=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof Ee.lineWidth=="number"){var Re=getFillStyle(Ee.lineWidth,Ee.fillColor);Re&&e.rect(t.x,n.y,t.width,t.height,Re)}else typeof Ee.lineWidth=="object"&&(Ee.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),drawCellBorders(e,t,n,Ee.lineWidth))}function drawCellBorders(e,t,n,Ee){var Re,Ce,Te,Me;Ee.top&&(Re=n.x,Ce=n.y,Te=n.x+t.width,Me=n.y,Ee.right&&(Te+=.5*Ee.right),Ee.left&&(Re-=.5*Ee.left),De(Ee.top,Re,Ce,Te,Me)),Ee.bottom&&(Re=n.x,Ce=n.y+t.height,Te=n.x+t.width,Me=n.y+t.height,Ee.right&&(Te+=.5*Ee.right),Ee.left&&(Re-=.5*Ee.left),De(Ee.bottom,Re,Ce,Te,Me)),Ee.left&&(Re=n.x,Ce=n.y,Te=n.x,Me=n.y+t.height,Ee.top&&(Ce-=.5*Ee.top),Ee.bottom&&(Me+=.5*Ee.bottom),De(Ee.left,Re,Ce,Te,Me)),Ee.right&&(Re=n.x+t.width,Ce=n.y,Te=n.x+t.width,Me=n.y+t.height,Ee.top&&(Ce-=.5*Ee.top),Ee.bottom&&(Me+=.5*Ee.bottom),De(Ee.right,Re,Ce,Te,Me));function De(Oe,Be,ze,$e,He){e.getDocument().setLineWidth(Oe),e.getDocument().line(Be,ze,$e,He,"S")}}function getRemainingPageSpace(e,t,n,Ee){var Re=t.settings.margin.bottom,Ce=t.settings.showFoot;return(Ce==="everyPage"||Ce==="lastPage"&&n)&&(Re+=t.getFootHeight(t.columns)),e.pageSize().height-Ee.y-Re}function addPage(e,t,n,Ee,Re,Ce){Re===void 0&&(Re=[]),Ce===void 0&&(Ce=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!Ce&&t.foot.forEach(function(Me){return printRow(e,t,Me,Ee,Re)}),t.callEndPageHooks(e,Ee);var Te=t.settings.margin;addTableBorder(e,t,n,Ee),nextPage(e),t.pageNumber++,Ee.x=Te.left,Ee.y=Te.top,n.y=Te.top,t.callWillDrawPageHooks(e,Ee),t.settings.showHead==="everyPage"&&(t.head.forEach(function(Me){return printRow(e,t,Me,Ee,Re)}),e.applyStyles(e.userStyles))}function nextPage(e){var t=e.pageNumber();e.setPage(t+1);var n=e.pageNumber();return n===t?(e.addPage(),!0):!1}function applyPlugin(e){e.API.autoTable=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var Ee=t[0],Re=parseInput(this,Ee),Ce=createTable(this,Re);return drawTable(this,Ce),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,n,Ee,Re){autoTableText(t,n,Ee,Re,this)},e.API.autoTableSetDefaults=function(t){return DocHandler.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,n){DocHandler.setDefaults(t,n)},e.API.autoTableHtmlToJson=function(t,n){var Ee;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var Re=new DocHandler(this),Ce=parseHtml(Re,t,window,n,!1),Te=Ce.head,Me=Ce.body,De=((Ee=Te[0])===null||Ee===void 0?void 0:Ee.map(function(Oe){return Oe.content}))||[];return{columns:De,rows:Me,data:Me}}}var _a;function autoTable(e,t){var n=parseInput(e,t),Ee=createTable(e,n);drawTable(e,Ee)}try{if(typeof window<"u"&&window){var anyWindow=window,jsPDF=anyWindow.jsPDF||((_a=anyWindow.jspdf)===null||_a===void 0?void 0:_a.jsPDF);jsPDF&&applyPlugin(jsPDF)}}catch(e){console.error("Could not apply autoTable plugin",e)}const payslipLogo="/assets/payslip-logo-BamWBjEO.png",getBase64FromUrl=e=>new Promise((t,n)=>{const Ee=new Image;Ee.setAttribute("crossOrigin","anonymous"),Ee.onload=()=>{const Re=document.createElement("canvas");Re.width=Ee.width,Re.height=Ee.height;const Ce=Re.getContext("2d");Ce==null||Ce.drawImage(Ee,0,0);const Te=Re.toDataURL("image/png");t(Te)},Ee.onerror=Re=>n(Re),Ee.src=e}),toWords=e=>"Rupees "+e.toLocaleString()+" Only",generatePayslipPDF=async(e,t)=>{var Ue;const n=new E,Ee=n.internal.pageSize.width;try{const Ve=await getBase64FromUrl(payslipLogo);n.addImage(Ve,"PNG",15,15,60,15)}catch(Ve){console.error("Error loading logo",Ve),n.setFontSize(20),n.setFont("helvetica","bold"),n.text("neointeraction",23,20)}n.setFontSize(10),n.setFont("helvetica","bold"),n.text("Neointeraction Design",15,35),n.setFont("helvetica","normal"),n.setTextColor(80,80,80),n.text("# M-98, 2nd Floor, LIC Housing",15,40),n.text("Colony, HAL 3rd Stage, Jeevan Bima",15,44),n.text("Nagar, Bengaluru, Karnataka 560075",15,48),n.setTextColor(41,128,185),n.text("Phone: +91- 9513338744",15,56),n.text("Email: info@neointeraction.com",15,61),n.setFontSize(14),n.setTextColor(192,57,43),n.setFont("helvetica","bold"),n.text("PAYSLIP",Ee/2,35,{align:"center"});const Re=70;n.setFillColor(100,100,100),n.rect(85,Re,Ee-100,15,"F"),n.setTextColor(255,255,255),n.setFontSize(8),n.setFont("helvetica","bold"),n.text("PAY DATE",95,Re+5),n.text("PERIOD",135,Re+5),n.text("ISSUED ON",175,Re+5),n.setFillColor(230,230,230),n.rect(85,Re+7,Ee-100,8,"F"),n.setTextColor(0,0,0),n.setFontSize(8),n.text("Dec 01, 2025",95,Re+12),n.text(`${e.month} ${e.year}`,135,Re+12),n.text(new Date().toLocaleDateString(),175,Re+12),n.setFillColor(100,100,100),n.rect(15,Re+20,Ee-30,7,"F"),n.setTextColor(255,255,255),n.setFontSize(9),n.text("EMPLOYEE INFORMATION",Ee/2,Re+25,{align:"center"}),n.setTextColor(0,0,0),n.setFontSize(9);const Ce=Re+35,Te=15,Me=60,De=110,Oe=150,Be=6;n.setFont("helvetica","normal"),n.text("Employee Name",Te,Ce),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.name)||"N/A",Me,Ce),n.setFont("helvetica","normal"),n.text("Employee ID",Te,Ce+Be),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.employeeId)||"N/A",Me,Ce+Be),n.setFont("helvetica","normal"),n.text("Designation",Te,Ce+Be*2),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.designation)||"N/A",Me,Ce+Be*2),n.setFont("helvetica","normal"),n.text("Department",Te,Ce+Be*3),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.department)||"N/A",Me,Ce+Be*3),n.setFont("helvetica","normal"),n.text("Project Location",Te,Ce+Be*4),n.setFont("helvetica","bold"),n.text("Bangalore",Me,Ce+Be*4),n.setFont("helvetica","normal"),n.text("Email",De,Ce),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.email)||"N/A",Oe,Ce),n.setFont("helvetica","normal"),n.text("DOJ",De,Ce+Be),n.setFont("helvetica","bold");const ze=t!=null&&t.doj?new Date(t.doj).toLocaleDateString():"N/A";n.text(ze,Oe,Ce+Be),n.setFont("helvetica","normal"),n.text("PAN",De,Ce+Be*2),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.pan)||"N/A",Oe,Ce+Be*2),n.setFont("helvetica","normal"),n.text("Bank Name",De,Ce+Be*3),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.bankName)||"N/A",Oe,Ce+Be*3),n.setFont("helvetica","normal"),n.text("Bank Account No",De,Ce+Be*4),n.setFont("helvetica","bold"),n.text((t==null?void 0:t.bankAccountNo)||"N/A",Oe,Ce+Be*4);let $e=Ce+Be*6;autoTable(n,{startY:$e,head:[["Earnings","Amount INR"]],body:[["Basic Pay",e.basicPay.toFixed(2)],["House Rent Allowance",e.hra.toFixed(2)],["Transport and Conveyance","1,500.00"],["Special Allowance",(e.grossSalary-e.basicPay-e.hra-1500).toFixed(2)],[{content:"Gross Earnings",styles:{fontStyle:"bold"}},{content:e.grossSalary.toFixed(2),styles:{fontStyle:"bold"}}]],theme:"plain",headStyles:{fillColor:[220,220,220],textColor:0,fontStyle:"bold"},styles:{fontSize:9,cellPadding:2,lineColor:[200,200,200],lineWidth:.1},columnStyles:{0:{cellWidth:130},1:{cellWidth:50,halign:"right"}},margin:{left:15,right:15}}),$e=n.lastAutoTable.finalY+5;const He=(e.deductions||[]).map(Ve=>[Ve.name,Ve.amount.toFixed(2),"0.00"]);He.push([{content:"TOTAL DEDUCTIONS",styles:{fontStyle:"bold"}},{content:e.totalDeductions.toFixed(2),styles:{fontStyle:"bold"}},{content:"0.00",styles:{fontStyle:"bold"}}]),autoTable(n,{startY:$e,head:[["DEDUCTIONS","CURRENT","YTD"]],body:He,theme:"plain",headStyles:{fillColor:[200,200,200],textColor:0,fontStyle:"bold"},styles:{fontSize:9,cellPadding:2,lineColor:[200,200,200],lineWidth:.1},columnStyles:{0:{cellWidth:90},1:{cellWidth:45,halign:"right"},2:{cellWidth:45,halign:"right"}},margin:{left:15,right:15}}),$e=n.lastAutoTable.finalY+5,autoTable(n,{startY:$e,body:[[{content:"Net Pay",styles:{halign:"right",fontStyle:"bold"}},{content:`Rs ${e.netSalary.toFixed(2)}`,styles:{halign:"left",fontStyle:"bold"}}],[{content:toWords(e.netSalary),colSpan:2,styles:{halign:"center",fontStyle:"italic",fontSize:9}}]],theme:"plain",styles:{cellPadding:3,lineColor:[200,200,200],lineWidth:.1,fillColor:[245,245,245]},columnStyles:{0:{cellWidth:130},1:{cellWidth:50}},margin:{left:15,right:15}}),n.save(`Payslip_${e.month}_${e.year}_${(Ue=t==null?void 0:t.name)==null?void 0:Ue.split(" ")[0]}.pdf`)};function PayrollSummaryWidget(){const{user:e}=useAuth(),[t,n]=reactExports.useState(null),[Ee,Re]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{try{Re(!0);const De=await apiService.getMyPayslips();if(De.payslips&&De.payslips.length>0){const Oe=De.payslips.sort((Be,ze)=>new Date(ze.createdAt).getTime()-new Date(Be.createdAt).getTime());n(Oe[0])}}catch{}finally{Re(!1)}})()},[]);const Ce=async()=>{t&&e&&await generatePayslipPDF(t,e)},Te=()=>{const Me=new Date;return new Date(Me.getFullYear(),Me.getMonth()+1,1).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})};return Ee?jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border p-6 h-full min-h-[180px] flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Loading payroll info..."})}):t?jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border p-6 h-full flex flex-col justify-between transition-all hover:shadow-md",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:jsxRuntimeExports.jsx(DollarSign,{className:"text-green-600",size:20})}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Payroll & Salary"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-secondary mb-1",children:["Last Paid Salary (",t.month,")"]}),jsxRuntimeExports.jsxs("h3",{className:"text-2xl font-bold text-text-primary",children:["",t.netSalary.toLocaleString()]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary mb-6",children:[jsxRuntimeExports.jsx(Calendar$1,{size:14}),jsxRuntimeExports.jsxs("span",{children:["Next Pay Date:"," ",jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:Te()})]})]})]}),jsxRuntimeExports.jsxs("button",{onClick:Ce,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-brand-primary/10 hover:bg-brand-primary/20 text-brand-primary rounded-lg transition-colors text-sm font-medium",children:[jsxRuntimeExports.jsx(Download,{size:16})," Download Payslip"]})]}):jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border p-6 h-full min-h-[180px] flex flex-col items-center justify-center text-center",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-brand-primary/10 rounded-full mb-3",children:jsxRuntimeExports.jsx(DollarSign,{className:"text-brand-primary",size:24})}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm",children:"No payslip data available yet."})]})}function UpcomingHolidayWidget(){const[e,t]=reactExports.useState("holiday"),{widgetAnimationPlayed:n,setWidgetAnimationPlayed:Ee}=useAppStore(),[Re,Ce]=reactExports.useState(null),[Te,Me]=reactExports.useState("birthdays"),[De,Oe]=reactExports.useState({birthdays:[],anniversaries:[]}),[Be,ze]=reactExports.useState(!0);reactExports.useEffect(()=>{if((async()=>{try{ze(!0);const[Ve,We]=await Promise.all([apiService.getHolidays(new Date().getFullYear()),apiService.getUpcomingEvents()]),qe=new Date;qe.setHours(0,0,0,0);const Ge=Ve.filter(Xe=>new Date(Xe.date)>=qe).sort((Xe,Ze)=>new Date(Xe.date).getTime()-new Date(Ze.date).getTime())[0];Ce(Ge);const Ye=new Date().getMonth(),Ke={birthdays:(We.birthdays||[]).filter(Xe=>new Date(Xe.date).getMonth()===Ye),anniversaries:(We.anniversaries||[]).filter(Xe=>new Date(Xe.date).getMonth()===Ye)};Oe(Ke)}catch(Ve){console.error("Failed to fetch widget data",Ve)}finally{ze(!1)}})(),!n){const Ve=setTimeout(()=>{t("celebrations")},5e3),We=setTimeout(()=>{t("holiday"),Ee()},1e4);return()=>{clearTimeout(Ve),clearTimeout(We)}}},[]);const $e=Te==="birthdays"?De.birthdays:De.anniversaries,He=Re?Math.ceil((new Date(Re.date).getTime()-new Date().setHours(0,0,0,0))/(1e3*60*60*24)):0;return e==="holiday"?jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-br from-blue-600 via-indigo-600 to-violet-600 p-6 rounded-xl shadow-xl text-white relative overflow-hidden h-full transition-all duration-300 group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-20",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"32px 32px"}})}),jsxRuntimeExports.jsx("div",{className:"absolute top-3 right-3 opacity-20 animate-pulse",children:jsxRuntimeExports.jsx(Sparkles,{size:32,className:"text-yellow-300"})}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-8 -right-8 opacity-10 group-hover:scale-110 transition-transform duration-500",children:jsxRuntimeExports.jsx(Calendar$1,{size:140})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1 ",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/20 backdrop-blur-sm flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:jsxRuntimeExports.jsx(Calendar$1,{className:"text-white",size:20})}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold",children:"Upcoming Holiday"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>t("celebrations"),className:"w-9 h-9 rounded-lg bg-white/10 hover:bg-white/20 flex items-center justify-center transition-all hover:scale-110 text-white/80 hover:text-white shadow-lg backdrop-blur-sm",title:"View Celebrations",children:jsxRuntimeExports.jsx(PartyPopper,{size:18})})]}),Be?jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:jsxRuntimeExports.jsx("div",{className:"inline-block w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"})}):Re?jsxRuntimeExports.jsxs("div",{className:"text-center space-y-2 mt-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsxs("p",{className:"text-white/80 font-semibold uppercase tracking-widest text-[10px] flex items-center justify-center gap-1.5",children:[jsxRuntimeExports.jsx(Sparkles,{size:10}),"Next Holiday",jsxRuntimeExports.jsx(Sparkles,{size:10})]}),jsxRuntimeExports.jsx("h3",{className:"text-4xl font-black drop-shadow-lg line-clamp-2",title:Re.name,children:Re.name})]}),jsxRuntimeExports.jsx("div",{className:"mb-5 inline-block px-4 py-1.5 rounded-xl bg-white/20 backdrop-blur-md shadow-lg border border-white/30",style:{marginBottom:"2rem"},children:jsxRuntimeExports.jsx("p",{className:"text-white font-bold text-sm",children:format(new Date(Re.date),"MMMM do, yyyy")})}),jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-xl bg-white/20 backdrop-blur-md  ",children:[jsxRuntimeExports.jsx(Clock,{size:14,className:"text-white"}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-bold text-white",children:[He," ",He===1?"day":"days"," to go"]})]})]}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"inline-block p-4 rounded-full bg-white/10 backdrop-blur-sm mb-3",children:jsxRuntimeExports.jsx(Calendar$1,{size:36,className:"text-white/50"})}),jsxRuntimeExports.jsx("p",{className:"text-white/80 font-medium text-sm",children:"No upcoming holidays"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-xl shadow-lg border border-border h-full flex flex-col transition-all duration-300 overflow-hidden relative group",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center bg-gradient-to-r from-gray-50 to-white",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2.5",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500/10 to-purple-500/10 flex items-center justify-center border border-pink-100 shadow-sm",children:jsxRuntimeExports.jsx(Cake,{className:"text-pink-500",size:20})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-base font-bold text-text-primary leading-tight",children:"Celebrations"}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-text-secondary font-medium",children:"This Month"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>t("holiday"),className:"flex items-center gap-1.5 px-3 py-1.5 bg-white hover:bg-gray-50 rounded-lg transition-all text-text-secondary hover:text-brand-primary border border-gray-200 shadow-sm hover:shadow",title:"View Holidays",children:[jsxRuntimeExports.jsx(Calendar$1,{size:14}),jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold",children:"Holidays"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-1 mx-4 mt-4 bg-gray-100/80 rounded-lg flex p-1 border border-gray-200",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Me("birthdays"),className:`flex-1 py-1.5 text-xs font-bold rounded-md flex items-center justify-center gap-1.5 transition-all shadow-sm ${Te==="birthdays"?"bg-white text-pink-600 shadow-sm ring-1 ring-black/5":"text-text-secondary hover:text-text-primary hover:bg-white/50 shadow-none"}`,children:[jsxRuntimeExports.jsx(Cake,{size:14,className:Te==="birthdays"?"text-pink-500":"text-gray-400"}),"Birthdays (",De.birthdays.length,")"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Me("anniversaries"),className:`flex-1 py-1.5 text-xs font-bold rounded-md flex items-center justify-center gap-1.5 transition-all shadow-sm ${Te==="anniversaries"?"bg-white text-amber-600 shadow-sm ring-1 ring-black/5":"text-text-secondary hover:text-text-primary hover:bg-white/50 shadow-none"}`,children:[jsxRuntimeExports.jsx(Award,{size:14,className:Te==="anniversaries"?"text-amber-500":"text-gray-400"}),"Work (",De.anniversaries.length,")"]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 flex-1 overflow-y-auto custom-scrollbar",children:Be?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("div",{className:"inline-block w-5 h-5 border-2 border-gray-300 border-t-brand-primary rounded-full animate-spin mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Loading events..."})]}):$e.length===0?jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-4",children:[jsxRuntimeExports.jsx("div",{className:`p-4 rounded-full mb-3 ${Te==="birthdays"?"bg-pink-50/50":"bg-amber-50/50"}`,children:Te==="birthdays"?jsxRuntimeExports.jsx(Cake,{size:28,className:"text-pink-300/70"}):jsxRuntimeExports.jsx(Award,{size:28,className:"text-amber-300/70"})}),jsxRuntimeExports.jsxs("p",{className:"text-text-secondary text-xs font-medium",children:["No upcoming ",Te]})]}):jsxRuntimeExports.jsx("div",{className:"space-y-2.5",children:$e.map(Ue=>jsxRuntimeExports.jsxs("div",{className:"group flex items-center justify-between p-2.5 bg-white hover:bg-gray-50 rounded-xl border border-gray-100 hover:border-gray-200 transition-all shadow-sm hover:shadow-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[Ue.profilePicture?jsxRuntimeExports.jsx("img",{src:`http://localhost:5001/${Ue.profilePicture}`,alt:Ue.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"}):jsxRuntimeExports.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-xs shadow-sm ${Te==="birthdays"?"bg-gradient-to-br from-pink-400 to-rose-500":"bg-gradient-to-br from-amber-400 to-orange-500"}`,children:Ue.name.charAt(0)}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-0.5 shadow-sm border border-gray-50",children:Te==="birthdays"?jsxRuntimeExports.jsx(Cake,{size:10,className:"text-pink-500"}):jsxRuntimeExports.jsx(Award,{size:10,className:"text-amber-500"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-bold text-text-primary leading-tight",children:Ue.name}),jsxRuntimeExports.jsxs("p",{className:"text-[10px] text-text-secondary font-medium",children:[new Date(Ue.date).toLocaleDateString("en-US",{day:"numeric",month:"short"})," "," ",Ue.designation]})]})]}),jsxRuntimeExports.jsx("button",{className:`opacity-0 group-hover:opacity-100 transition-opacity px-3 py-1.5 rounded-lg text-[10px] font-bold shadow-sm ${Te==="birthdays"?"bg-pink-50 text-pink-600 hover:bg-pink-100":"bg-amber-50 text-amber-600 hover:bg-amber-100"}`,children:"Wish"})]},Ue.id))})})]})}function AttendanceWidget(){const[e,t]=reactExports.useState("clocked-out"),[n,Ee]=reactExports.useState(null),[Re,Ce]=reactExports.useState(!0),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState("00:00:00"),[Be,ze]=reactExports.useState("00:00"),[$e,He]=reactExports.useState(!1),[Ue,Ve]=reactExports.useState(""),We=async()=>{try{const Ze=await apiService.getAttendanceStatus();t(Ze.status),Ee(Ze.timeEntry);const er=new Date,St=new Date(er.setHours(0,0,0,0)).toISOString(),ar=new Date(er.setHours(23,59,59,999)).toISOString(),hr=await apiService.getAttendanceHistory({startDate:St,endDate:ar}),ur=Array.isArray(hr)?hr:hr.entries||hr.history||[];qe(ur,Ze.status,Ze.timeEntry)}catch(Ze){console.error("Failed to fetch attendance widget data:",Ze)}finally{Ce(!1)}};reactExports.useEffect(()=>{We();const Ze=setInterval(We,6e4);return()=>clearInterval(Ze)},[]),reactExports.useEffect(()=>{let Ze;return e==="clocked-in"&&(n!=null&&n.clockIn)?Ze=setInterval(()=>{const er=new Date(n.clockIn).getTime(),ar=new Date().getTime()-er,hr=Math.floor(ar/(1e3*60*60)),ur=Math.floor(ar%(1e3*60*60)/(1e3*60)),dr=Math.floor(ar%(1e3*60)/1e3);Oe(`${hr.toString().padStart(2,"0")}:${ur.toString().padStart(2,"0")}:${dr.toString().padStart(2,"0")}`)},1e3):Oe("00:00:00"),()=>clearInterval(Ze)},[e,n]);const qe=(Ze,er,St)=>{let ar=0;if(Ze.forEach(dr=>{if(dr.clockIn&&dr.clockOut){const vr=new Date(dr.clockIn).getTime(),yr=new Date(dr.clockOut).getTime();ar+=yr-vr}}),er==="clocked-in"&&(St!=null&&St.clockIn)){const dr=new Date(St.clockIn).getTime(),vr=new Date().getTime();ar+=vr-dr}const hr=Math.floor(ar/(1e3*60*60)),ur=Math.floor(ar%(1e3*60*60)/(1e3*60));ze(`${hr.toString().padStart(2,"0")}:${ur.toString().padStart(2,"0")}`)},Ge=async()=>{Me(!0);try{const Ze=await apiService.clockIn();t("clocked-in"),Ee(Ze.timeEntry),We()}catch(Ze){alert(Ze.message)}finally{Me(!1)}},Ye=async()=>{Me(!0);try{const Ze=await apiService.startBreak();t("on-break"),Ee(Ze.timeEntry)}catch(Ze){alert(Ze.message)}finally{Me(!1)}},Ke=async()=>{Me(!0);try{const Ze=await apiService.endBreak();t("clocked-in"),Ee(Ze.timeEntry)}catch(Ze){alert(Ze.message)}finally{Me(!1)}},Xe=async()=>{Me(!0);try{await apiService.clockOut(Ue),t("clocked-out"),Ee(null),Oe("00:00:00"),He(!1),Ve(""),We()}catch(Ze){alert(Ze.message)}finally{Me(!1)}};return Re?jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-xl shadow-sm border border-border",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-1/3 rounded mb-4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-32 w-full rounded-xl mb-4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-12 w-full rounded-lg"})]}):jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-xl shadow-sm border border-border overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-bold text-text-primary flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-primary/10 to-brand-secondary/10 flex items-center justify-center border border-brand-primary/20",children:jsxRuntimeExports.jsx(Clock,{className:"text-brand-primary",size:20})}),"Time Tracking"]}),e==="clocked-in"&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-semibold text-green-600",children:[jsxRuntimeExports.jsxs("span",{className:"flex h-2 w-2",children:[jsxRuntimeExports.jsx("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-green-400 opacity-75"}),jsxRuntimeExports.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),"LIVE"]})]}),jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-brand-primary to-brand-secondary rounded-xl p-5 text-white",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-10",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:[e==="clocked-out"&&jsxRuntimeExports.jsx(Clock,{size:24}),e==="clocked-in"&&jsxRuntimeExports.jsx(Activity,{size:24,className:"animate-pulse"}),e==="on-break"&&jsxRuntimeExports.jsx(Coffee,{size:24})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-white/80 text-xs",children:[e==="clocked-out"&&"Not Working",e==="clocked-in"&&"Current Session",e==="on-break"&&"On Break"]}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-mono font-bold tracking-wider",children:De})]})]}),e==="clocked-out"&&jsxRuntimeExports.jsx("p",{className:"text-center text-white/90 text-sm mb-4",children:"Start your day by clocking in"}),jsxRuntimeExports.jsxs("div",{className:"border-t border-white/20 pt-3 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("p",{className:"text-white/80 text-xs flex items-center gap-1.5",children:[jsxRuntimeExports.jsx(TrendingUp,{size:14}),"Total Today"]}),jsxRuntimeExports.jsx("p",{className:"text-white font-bold font-mono text-sm",children:Be})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e==="clocked-out"&&jsxRuntimeExports.jsxs("button",{onClick:Ge,disabled:Te,className:"col-span-2 flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg font-semibold transition-all transform hover:scale-[1.02] active:scale-95 disabled:opacity-50 shadow-md",children:[Te?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:18}):jsxRuntimeExports.jsx(Play,{size:18}),"Clock In"]}),e==="clocked-in"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:Ye,disabled:Te,className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white rounded-lg font-semibold transition-all transform hover:scale-[1.02] active:scale-95 disabled:opacity-50 shadow-md",children:[Te?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:18}):jsxRuntimeExports.jsx(Coffee,{size:18}),"Break"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>He(!0),disabled:Te,className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg font-semibold transition-all transform hover:scale-[1.02] active:scale-95 disabled:opacity-50 shadow-md",children:[Te?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:18}):jsxRuntimeExports.jsx(LogOut,{size:18}),"Clock Out"]})]}),e==="on-break"&&jsxRuntimeExports.jsxs("button",{onClick:Ke,disabled:Te,className:"col-span-2 flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg font-semibold transition-all transform hover:scale-[1.02] active:scale-95 disabled:opacity-50 shadow-md",children:[Te?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:18}):jsxRuntimeExports.jsx(Play,{size:18}),"Resume Work"]})]})]}),$e&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm animate-in fade-in duration-200",children:jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in duration-200 border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-border bg-gradient-to-r from-brand-primary/10 to-brand-secondary/10",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-xl text-text-primary flex items-center gap-2",children:[jsxRuntimeExports.jsx(LogOut,{size:24,className:"text-brand-primary"}),"Clock Out"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Great work today! Share what you accomplished"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-medium text-text-primary flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{size:16}),"Today's Accomplishments"]}),jsxRuntimeExports.jsx("textarea",{value:Ue,onChange:Ze=>Ve(Ze.target.value),placeholder:` Completed tasks
 Fixed bugs
 Attended meetings...`,className:"w-full p-3 border border-border rounded-xl bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary min-h-[100px] text-sm text-text-primary resize-none",autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>He(!1),className:"px-6 py-2.5 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),jsxRuntimeExports.jsxs("button",{onClick:Xe,disabled:Te,className:"px-6 py-2.5 bg-gradient-to-r from-brand-primary to-brand-secondary text-white rounded-lg hover:opacity-90 text-sm font-medium flex items-center gap-2 transition-all disabled:opacity-50",children:[Te&&jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:16}),"Confirm Clock Out"]})]})]})]})})]})}function LeaveWidget(){const e=useNavigate(),[t,n]=reactExports.useState("my-leaves"),[Ee,Re]=reactExports.useState([]),[Ce,Te]=reactExports.useState([]),[Me,De]=reactExports.useState(!0),{widgetAnimationPlayed:Oe}=useAppStore();reactExports.useEffect(()=>{if((async()=>{try{const[Ve,We]=await Promise.all([apiService.getLeaveStats(),apiService.getEmployeesOnLeave()]);Re(Ve.stats||[]),Te(We||[])}catch(Ve){console.error("Failed to fetch leave widget data:",Ve)}finally{De(!1)}})(),!Oe){const Ve=setTimeout(()=>{n("colleagues")},5e3),We=setTimeout(()=>{n("my-leaves")},1e4);return()=>{clearTimeout(Ve),clearTimeout(We)}}},[]);const Be=Ce.slice(0,5),ze=Ce.length-Be.length,$e=Ue=>{const Ve=Ue.toLowerCase();return Ve.includes("casual")?jsxRuntimeExports.jsx(Plane,{className:"text-blue-600",size:16}):Ve.includes("sick")||Ve.includes("medical")?jsxRuntimeExports.jsx(Pill,{className:"text-red-600",size:16}):Ve.includes("floating")?jsxRuntimeExports.jsx(CalendarDays,{className:"text-purple-600",size:16}):Ve.includes("maternity")||Ve.includes("paternity")?jsxRuntimeExports.jsx(Users,{className:"text-pink-600",size:16}):jsxRuntimeExports.jsx(CalendarDays,{className:"text-gray-600",size:16})},He=Ue=>{const Ve=Ue.toLowerCase();return Ve.includes("casual")?"from-blue-500/10 to-blue-600/10 border-blue-200":Ve.includes("sick")||Ve.includes("medical")?"from-red-500/10 to-red-600/10 border-red-200":Ve.includes("floating")?"from-purple-500/10 to-purple-600/10 border-purple-200":Ve.includes("maternity")||Ve.includes("paternity")?"from-pink-500/10 to-pink-600/10 border-pink-200":"from-gray-500/10 to-gray-600/10 border-gray-200"};return jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-xl shadow-sm border border-border overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-bold text-text-primary flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500/10 to-yellow-500/10 flex items-center justify-center border border-orange-200",children:jsxRuntimeExports.jsx(CalendarDays,{className:"text-orange-600",size:20})}),"Leave Status"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n(t==="my-leaves"?"colleagues":"my-leaves"),className:"flex items-center gap-2 px-3 py-2 bg-bg-hover hover:bg-bg-main rounded-lg transition-all text-text-secondary hover:text-brand-primary border border-transparent hover:border-brand-primary/20",title:t==="my-leaves"?"View Colleagues on Leave":"View My Leave Balance",children:[t==="my-leaves"?jsxRuntimeExports.jsx(Users,{size:18}):jsxRuntimeExports.jsx(User,{size:18}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:t==="my-leaves"?"Team":"Me"})]})]}),t==="my-leaves"?jsxRuntimeExports.jsxs("div",{className:"space-y-3 animate-in fade-in duration-300",children:[Me?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-24 w-full rounded-xl"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-24 w-full rounded-xl"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-24 w-full rounded-xl"})]}):Ee.length>0?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-3",children:Ee.map(Ue=>jsxRuntimeExports.jsxs("div",{className:`bg-gradient-to-br ${He(Ue.type)} rounded-xl p-3 border-2 transition-all hover:shadow-lg hover:scale-105 cursor-pointer relative overflow-hidden group`,children:[jsxRuntimeExports.jsx("div",{className:"absolute -right-2 -bottom-2 w-16 h-16 rounded-full bg-white/10 group-hover:scale-150 transition-transform duration-500"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-white flex items-center justify-center shadow-md group-hover:scale-110 transition-transform mb-2",children:$e(Ue.type)}),jsxRuntimeExports.jsx("p",{className:"text-xs font-bold text-text-primary mb-2 line-clamp-1",children:Ue.type}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-1.5xl font-black text-text-primary leading-none",children:Ue.pending}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-text-secondary font-semibold",children:"days left"})]})]})]},Ue.type))}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx(CalendarDays,{className:"mx-auto mb-2 text-text-muted",size:32}),jsxRuntimeExports.jsx("p",{className:"text-xs",children:"No leave data"})]}),Ee.length>0&&jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-brand-primary/10 to-brand-secondary/10 rounded-lg p-3 border border-brand-primary/20",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"text-brand-primary",size:16}),jsxRuntimeExports.jsx("p",{className:"text-xs font-medium text-text-primary",children:"Total Used"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-baseline gap-1",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:Ee.reduce((Ue,Ve)=>Ue+(Ve.used||0),0)}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-text-secondary",children:"days"})]})]})})]},"my-leaves"):jsxRuntimeExports.jsxs("div",{className:"space-y-2.5 animate-in fade-in duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar$1,{className:"text-text-secondary",size:14}),jsxRuntimeExports.jsx("p",{className:"text-xs font-medium text-text-secondary",children:"On Leave Today"})]}),Ce.length>0?jsxRuntimeExports.jsxs("div",{className:"space-y-2.5",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex -space-x-4",children:[Be.map(Ue=>jsxRuntimeExports.jsxs("div",{className:"relative group cursor-pointer transition-transform hover:scale-110 hover:z-10",title:`${Ue.employee.firstName} ${Ue.employee.lastName} (${Ue.type})`,children:[jsxRuntimeExports.jsx(Avatar,{src:Ue.employee.profilePicture?`${ASSET_BASE_URL}${Ue.employee.profilePicture}`:void 0,name:`${Ue.employee.firstName} ${Ue.employee.lastName}`,alt:Ue.employee.firstName,className:"w-11 h-11 border-3 border-bg-card ring-2 ring-white",size:"lg"}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2.5 py-1 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-20 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"font-medium text-[11px]",children:[Ue.employee.firstName," ",Ue.employee.lastName]}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 text-[10px]",children:Ue.type})]})]},Ue._id)),ze>0&&jsxRuntimeExports.jsxs("div",{className:"w-11 h-11 rounded-full border-3 border-bg-card ring-2 ring-white bg-gradient-to-br from-brand-primary to-brand-secondary flex items-center justify-center text-xs font-bold text-white hover:scale-110 cursor-pointer transition-transform z-0 shadow-md",title:`${ze} more on leave`,onClick:()=>e("/leave"),children:["+",ze]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-bg-hover rounded-lg p-2.5 text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-primary",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-brand-primary",children:Ce.length})," ",Ce.length===1?"person":"people"," out"]})})]}):jsxRuntimeExports.jsxs("div",{className:"text-center py-6 space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"w-14 h-14 mx-auto rounded-full bg-green-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(Users,{className:"text-green-600",size:28})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-text-primary",children:"All present!"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"Everyone is here today"})]})]})]},"colleagues")]})})}const v$1="5.5.7",fr$1=60,ip$1=0,op$1=60,w$1=100,h$2=100,nm$1="Sun Placeholder",ddd$1=0,assets$1=[],layers$1=[{ddd:0,ind:1,ty:4,nm:"Sun",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:60,s:[360]}],ix:10},p:{a:0,k:[50,50,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[40,40],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Circle Path",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[1,.8,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:60,st:0,bm:0}],sunAnimation={v:v$1,fr:fr$1,ip:ip$1,op:op$1,w:w$1,h:h$2,nm:nm$1,ddd:ddd$1,assets:assets$1,layers:layers$1},v="5.5.7",fr=60,ip=0,op=60,w=100,h$1=100,nm="Moon Placeholder",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"Moon",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[50,50,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[35,35],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Circle Path",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[.8,.8,.9,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:60,st:0,bm:0}],moonAnimation={v,fr,ip,op,w,h:h$1,nm,ddd,assets,layers};function useGreeting(){const[e,t]=reactExports.useState({text:"Good Morning",animationData:sunAnimation});return reactExports.useEffect(()=>{const n=()=>{const Re=new Date().getHours();Re<12?t({text:"Good Morning",animationData:sunAnimation}):Re<17?t({text:"Good Afternoon",animationData:sunAnimation}):t({text:"Good Evening",animationData:moonAnimation})};n();const Ee=setInterval(n,6e4);return()=>clearInterval(Ee)},[]),e}function FeedbackWidget(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(0);reactExports.useEffect(()=>{Te()},[]);const Te=async()=>{try{const Oe=await apiService.getMyFeedbacks();t(Oe)}catch(Oe){console.error("Failed to fetch feedbacks",Oe)}finally{Ee(!1)}},Me=()=>{Ce(Oe=>(Oe+1)%e.length)},De=()=>{Ce(Oe=>(Oe-1+e.length)%e.length)};return n?jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 shadow-sm h-full animate-pulse ",children:[jsxRuntimeExports.jsx("div",{className:"h-6 w-1/3 bg-bg-hover rounded mb-4"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"h-16 bg-bg-hover rounded"}),jsxRuntimeExports.jsx("div",{className:"h-16 bg-bg-hover rounded"})]})]}):jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 shadow-sm h-full md:col-span-2 lg:col-span-2 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-brand-primary/10 rounded-lg",children:jsxRuntimeExports.jsx(MessageSquareQuote,{className:"text-brand-primary",size:20})}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg text-text-primary",children:"Recent Feedback"})]}),e.length>1&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:De,className:"h-8 w-8 p-0 rounded-full",children:jsxRuntimeExports.jsx(ChevronLeft,{size:16})}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-text-secondary font-medium",children:[Re+1," / ",e.length]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:Me,className:"h-8 w-8 p-0 rounded-full",children:jsxRuntimeExports.jsx(ChevronRight,{size:16})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex flex-col justify-center min-h-[120px]",children:e.length===0?jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center text-text-muted text-sm border-2 border-dashed border-border rounded-lg p-8",children:jsxRuntimeExports.jsx("p",{children:"No feedback received yet."})}):jsxRuntimeExports.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300 w-full",children:jsxRuntimeExports.jsxs("div",{className:"bg-bg-main p-6 rounded-lg border border-border relative",children:[jsxRuntimeExports.jsx(MessageSquareQuote,{className:"absolute top-4 left-4 text-brand-primary/10 rotate-180",size:40}),jsxRuntimeExports.jsxs("p",{className:"text-text-primary text-base italic mb-6 relative z-10 text-center px-4",children:['"',e[Re].message,'"']}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-text-muted relative z-10 border-t border-border/50 pt-4 w-full",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-brand-primary",children:e[Re].sender.name}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:new Date(e[Re].createdAt).toLocaleDateString()})]})]})})})]})}var module$1={};(function e(t,n,Ee,Re){var Ce=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),Te=typeof Path2D=="function"&&typeof DOMMatrix=="function",Me=function(){if(!t.OffscreenCanvas)return!1;try{var mr=new OffscreenCanvas(1,1),ir=mr.getContext("2d");ir.fillRect(0,0,1,1);var nr=mr.transferToImageBitmap();ir.createPattern(nr,"no-repeat")}catch{return!1}return!0}();function De(){}function Oe(mr){var ir=n.exports.Promise,nr=ir!==void 0?ir:t.Promise;return typeof nr=="function"?new nr(mr):(mr(De,De),null)}var Be=function(mr,ir){return{transform:function(nr){if(mr)return nr;if(ir.has(nr))return ir.get(nr);var gr=new OffscreenCanvas(nr.width,nr.height),Er=gr.getContext("2d");return Er.drawImage(nr,0,0),ir.set(nr,gr),gr},clear:function(){ir.clear()}}}(Me,new Map),ze=function(){var mr=Math.floor(16.666666666666668),ir,nr,gr={},Er=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(ir=function(Cr){var Nr=Math.random();return gr[Nr]=requestAnimationFrame(function Mr(Fr){Er===Fr||Er+mr-1<Fr?(Er=Fr,delete gr[Nr],Cr()):gr[Nr]=requestAnimationFrame(Mr)}),Nr},nr=function(Cr){gr[Cr]&&cancelAnimationFrame(gr[Cr])}):(ir=function(Cr){return setTimeout(Cr,mr)},nr=function(Cr){return clearTimeout(Cr)}),{frame:ir,cancel:nr}}(),$e=function(){var mr,ir,nr={};function gr(Er){function Cr(Nr,Mr){Er.postMessage({options:Nr||{},callback:Mr})}Er.init=function(Mr){var Fr=Mr.transferControlToOffscreen();Er.postMessage({canvas:Fr},[Fr])},Er.fire=function(Mr,Fr,$r){if(ir)return Cr(Mr,null),ir;var Wr=Math.random().toString(36).slice(2);return ir=Oe(function(Zr){function nn(an){an.data.callback===Wr&&(delete nr[Wr],Er.removeEventListener("message",nn),ir=null,Be.clear(),$r(),Zr())}Er.addEventListener("message",nn),Cr(Mr,Wr),nr[Wr]=nn.bind(null,{data:{callback:Wr}})}),ir},Er.reset=function(){Er.postMessage({reset:!0});for(var Mr in nr)nr[Mr](),delete nr[Mr]}}return function(){if(mr)return mr;if(!Ee&&Ce){var Er=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{mr=new Worker(URL.createObjectURL(new Blob([Er])))}catch(Cr){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",Cr),null}gr(mr)}return mr}}(),He={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function Ue(mr,ir){return ir?ir(mr):mr}function Ve(mr){return mr!=null}function We(mr,ir,nr){return Ue(mr&&Ve(mr[ir])?mr[ir]:He[ir],nr)}function qe(mr){return mr<0?0:Math.floor(mr)}function Ge(mr,ir){return Math.floor(Math.random()*(ir-mr))+mr}function Ye(mr){return parseInt(mr,16)}function Ke(mr){return mr.map(Xe)}function Xe(mr){var ir=String(mr).replace(/[^0-9a-f]/gi,"");return ir.length<6&&(ir=ir[0]+ir[0]+ir[1]+ir[1]+ir[2]+ir[2]),{r:Ye(ir.substring(0,2)),g:Ye(ir.substring(2,4)),b:Ye(ir.substring(4,6))}}function Ze(mr){var ir=We(mr,"origin",Object);return ir.x=We(ir,"x",Number),ir.y=We(ir,"y",Number),ir}function er(mr){mr.width=document.documentElement.clientWidth,mr.height=document.documentElement.clientHeight}function St(mr){var ir=mr.getBoundingClientRect();mr.width=ir.width,mr.height=ir.height}function ar(mr){var ir=document.createElement("canvas");return ir.style.position="fixed",ir.style.top="0px",ir.style.left="0px",ir.style.pointerEvents="none",ir.style.zIndex=mr,ir}function hr(mr,ir,nr,gr,Er,Cr,Nr,Mr,Fr){mr.save(),mr.translate(ir,nr),mr.rotate(Cr),mr.scale(gr,Er),mr.arc(0,0,1,Nr,Mr,Fr),mr.restore()}function ur(mr){var ir=mr.angle*(Math.PI/180),nr=mr.spread*(Math.PI/180);return{x:mr.x,y:mr.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:mr.startVelocity*.5+Math.random()*mr.startVelocity,angle2D:-ir+(.5*nr-Math.random()*nr),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:mr.color,shape:mr.shape,tick:0,totalTicks:mr.ticks,decay:mr.decay,drift:mr.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:mr.gravity*3,ovalScalar:.6,scalar:mr.scalar,flat:mr.flat}}function dr(mr,ir){ir.x+=Math.cos(ir.angle2D)*ir.velocity+ir.drift,ir.y+=Math.sin(ir.angle2D)*ir.velocity+ir.gravity,ir.velocity*=ir.decay,ir.flat?(ir.wobble=0,ir.wobbleX=ir.x+10*ir.scalar,ir.wobbleY=ir.y+10*ir.scalar,ir.tiltSin=0,ir.tiltCos=0,ir.random=1):(ir.wobble+=ir.wobbleSpeed,ir.wobbleX=ir.x+10*ir.scalar*Math.cos(ir.wobble),ir.wobbleY=ir.y+10*ir.scalar*Math.sin(ir.wobble),ir.tiltAngle+=.1,ir.tiltSin=Math.sin(ir.tiltAngle),ir.tiltCos=Math.cos(ir.tiltAngle),ir.random=Math.random()+2);var nr=ir.tick++/ir.totalTicks,gr=ir.x+ir.random*ir.tiltCos,Er=ir.y+ir.random*ir.tiltSin,Cr=ir.wobbleX+ir.random*ir.tiltCos,Nr=ir.wobbleY+ir.random*ir.tiltSin;if(mr.fillStyle="rgba("+ir.color.r+", "+ir.color.g+", "+ir.color.b+", "+(1-nr)+")",mr.beginPath(),Te&&ir.shape.type==="path"&&typeof ir.shape.path=="string"&&Array.isArray(ir.shape.matrix))mr.fill(cr(ir.shape.path,ir.shape.matrix,ir.x,ir.y,Math.abs(Cr-gr)*.1,Math.abs(Nr-Er)*.1,Math.PI/10*ir.wobble));else if(ir.shape.type==="bitmap"){var Mr=Math.PI/10*ir.wobble,Fr=Math.abs(Cr-gr)*.1,$r=Math.abs(Nr-Er)*.1,Wr=ir.shape.bitmap.width*ir.scalar,Zr=ir.shape.bitmap.height*ir.scalar,nn=new DOMMatrix([Math.cos(Mr)*Fr,Math.sin(Mr)*Fr,-Math.sin(Mr)*$r,Math.cos(Mr)*$r,ir.x,ir.y]);nn.multiplySelf(new DOMMatrix(ir.shape.matrix));var an=mr.createPattern(Be.transform(ir.shape.bitmap),"no-repeat");an.setTransform(nn),mr.globalAlpha=1-nr,mr.fillStyle=an,mr.fillRect(ir.x-Wr/2,ir.y-Zr/2,Wr,Zr),mr.globalAlpha=1}else if(ir.shape==="circle")mr.ellipse?mr.ellipse(ir.x,ir.y,Math.abs(Cr-gr)*ir.ovalScalar,Math.abs(Nr-Er)*ir.ovalScalar,Math.PI/10*ir.wobble,0,2*Math.PI):hr(mr,ir.x,ir.y,Math.abs(Cr-gr)*ir.ovalScalar,Math.abs(Nr-Er)*ir.ovalScalar,Math.PI/10*ir.wobble,0,2*Math.PI);else if(ir.shape==="star")for(var Yr=Math.PI/2*3,Rr=4*ir.scalar,Xr=8*ir.scalar,mn=ir.x,En=ir.y,rn=5,_r=Math.PI/rn;rn--;)mn=ir.x+Math.cos(Yr)*Xr,En=ir.y+Math.sin(Yr)*Xr,mr.lineTo(mn,En),Yr+=_r,mn=ir.x+Math.cos(Yr)*Rr,En=ir.y+Math.sin(Yr)*Rr,mr.lineTo(mn,En),Yr+=_r;else mr.moveTo(Math.floor(ir.x),Math.floor(ir.y)),mr.lineTo(Math.floor(ir.wobbleX),Math.floor(Er)),mr.lineTo(Math.floor(Cr),Math.floor(Nr)),mr.lineTo(Math.floor(gr),Math.floor(ir.wobbleY));return mr.closePath(),mr.fill(),ir.tick<ir.totalTicks}function vr(mr,ir,nr,gr,Er){var Cr=ir.slice(),Nr=mr.getContext("2d"),Mr,Fr,$r=Oe(function(Wr){function Zr(){Mr=Fr=null,Nr.clearRect(0,0,gr.width,gr.height),Be.clear(),Er(),Wr()}function nn(){Ee&&!(gr.width===Re.width&&gr.height===Re.height)&&(gr.width=mr.width=Re.width,gr.height=mr.height=Re.height),!gr.width&&!gr.height&&(nr(mr),gr.width=mr.width,gr.height=mr.height),Nr.clearRect(0,0,gr.width,gr.height),Cr=Cr.filter(function(an){return dr(Nr,an)}),Cr.length?Mr=ze.frame(nn):Zr()}Mr=ze.frame(nn),Fr=Zr});return{addFettis:function(Wr){return Cr=Cr.concat(Wr),$r},canvas:mr,promise:$r,reset:function(){Mr&&ze.cancel(Mr),Fr&&Fr()}}}function yr(mr,ir){var nr=!mr,gr=!!We(ir||{},"resize"),Er=!1,Cr=We(ir,"disableForReducedMotion",Boolean),Nr=Ce&&!!We(ir||{},"useWorker"),Mr=Nr?$e():null,Fr=nr?er:St,$r=mr&&Mr?!!mr.__confetti_initialized:!1,Wr=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Zr;function nn(Yr,Rr,Xr){for(var mn=We(Yr,"particleCount",qe),En=We(Yr,"angle",Number),rn=We(Yr,"spread",Number),_r=We(Yr,"startVelocity",Number),Lr=We(Yr,"decay",Number),Or=We(Yr,"gravity",Number),tn=We(Yr,"drift",Number),sn=We(Yr,"colors",Ke),en=We(Yr,"ticks",Number),fn=We(Yr,"shapes"),Sn=We(Yr,"scalar"),Rn=!!We(Yr,"flat"),jn=Ze(Yr),On=mn,Nn=[],js=mr.width*jn.x,qn=mr.height*jn.y;On--;)Nn.push(ur({x:js,y:qn,angle:En,spread:rn,startVelocity:_r,color:sn[On%sn.length],shape:fn[Ge(0,fn.length)],ticks:en,decay:Lr,gravity:Or,drift:tn,scalar:Sn,flat:Rn}));return Zr?Zr.addFettis(Nn):(Zr=vr(mr,Nn,Fr,Rr,Xr),Zr.promise)}function an(Yr){var Rr=Cr||We(Yr,"disableForReducedMotion",Boolean),Xr=We(Yr,"zIndex",Number);if(Rr&&Wr)return Oe(function(_r){_r()});nr&&Zr?mr=Zr.canvas:nr&&!mr&&(mr=ar(Xr),document.body.appendChild(mr)),gr&&!$r&&Fr(mr);var mn={width:mr.width,height:mr.height};Mr&&!$r&&Mr.init(mr),$r=!0,Mr&&(mr.__confetti_initialized=!0);function En(){if(Mr){var _r={getBoundingClientRect:function(){if(!nr)return mr.getBoundingClientRect()}};Fr(_r),Mr.postMessage({resize:{width:_r.width,height:_r.height}});return}mn.width=mn.height=null}function rn(){Zr=null,gr&&(Er=!1,t.removeEventListener("resize",En)),nr&&mr&&(document.body.contains(mr)&&document.body.removeChild(mr),mr=null,$r=!1)}return gr&&!Er&&(Er=!0,t.addEventListener("resize",En,!1)),Mr?Mr.fire(Yr,mn,rn):nn(Yr,mn,rn)}return an.reset=function(){Mr&&Mr.reset(),Zr&&Zr.reset()},an}var br;function lr(){return br||(br=yr(null,{useWorker:!0,resize:!0})),br}function cr(mr,ir,nr,gr,Er,Cr,Nr){var Mr=new Path2D(mr),Fr=new Path2D;Fr.addPath(Mr,new DOMMatrix(ir));var $r=new Path2D;return $r.addPath(Fr,new DOMMatrix([Math.cos(Nr)*Er,Math.sin(Nr)*Er,-Math.sin(Nr)*Cr,Math.cos(Nr)*Cr,nr,gr])),$r}function rr(mr){if(!Te)throw new Error("path confetti are not supported in this browser");var ir,nr;typeof mr=="string"?ir=mr:(ir=mr.path,nr=mr.matrix);var gr=new Path2D(ir),Er=document.createElement("canvas"),Cr=Er.getContext("2d");if(!nr){for(var Nr=1e3,Mr=Nr,Fr=Nr,$r=0,Wr=0,Zr,nn,an=0;an<Nr;an+=2)for(var Yr=0;Yr<Nr;Yr+=2)Cr.isPointInPath(gr,an,Yr,"nonzero")&&(Mr=Math.min(Mr,an),Fr=Math.min(Fr,Yr),$r=Math.max($r,an),Wr=Math.max(Wr,Yr));Zr=$r-Mr,nn=Wr-Fr;var Rr=10,Xr=Math.min(Rr/Zr,Rr/nn);nr=[Xr,0,0,Xr,-Math.round(Zr/2+Mr)*Xr,-Math.round(nn/2+Fr)*Xr]}return{type:"path",path:ir,matrix:nr}}function pr(mr){var ir,nr=1,gr="#000000",Er='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof mr=="string"?ir=mr:(ir=mr.text,nr="scalar"in mr?mr.scalar:nr,Er="fontFamily"in mr?mr.fontFamily:Er,gr="color"in mr?mr.color:gr);var Cr=10*nr,Nr=""+Cr+"px "+Er,Mr=new OffscreenCanvas(Cr,Cr),Fr=Mr.getContext("2d");Fr.font=Nr;var $r=Fr.measureText(ir),Wr=Math.ceil($r.actualBoundingBoxRight+$r.actualBoundingBoxLeft),Zr=Math.ceil($r.actualBoundingBoxAscent+$r.actualBoundingBoxDescent),nn=2,an=$r.actualBoundingBoxLeft+nn,Yr=$r.actualBoundingBoxAscent+nn;Wr+=nn+nn,Zr+=nn+nn,Mr=new OffscreenCanvas(Wr,Zr),Fr=Mr.getContext("2d"),Fr.font=Nr,Fr.fillStyle=gr,Fr.fillText(ir,an,Yr);var Rr=1/nr;return{type:"bitmap",bitmap:Mr.transferToImageBitmap(),matrix:[Rr,0,0,Rr,-Wr*Rr/2,-Zr*Rr/2]}}n.exports=function(){return lr().apply(this,arguments)},n.exports.reset=function(){lr().reset()},n.exports.create=yr,n.exports.shapeFromPath=rr,n.exports.shapeFromText=pr})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),module$1,!1);const confetti=module$1.exports;module$1.exports.create;function AppreciationWidget(){const{user:e}=useAuth(),[t,n]=reactExports.useState([]),[Ee,Re]=reactExports.useState(!0),[Ce,Te]=reactExports.useState(0),Me=reactExports.useRef(!1);reactExports.useEffect(()=>{e&&Be()},[e]);const De=qe=>{const Ge=(qe.left+qe.width/2)/window.innerWidth,Ye=(qe.top+qe.height/2)/window.innerHeight;confetti({particleCount:100,spread:100,origin:{x:Ge,y:Ye},colors:["#FFD700","#FF69B4","#00BFFF","#32CD32","#FF4500","#9370DB"],gravity:1,scalar:1.2,startVelocity:30,ticks:200,zIndex:1e4})},Oe=(qe,Ge)=>{if(!((e==null?void 0:e.id)||(e==null?void 0:e._id)))return qe;const Ke=Ge.filter(Ze=>!Ze.isSeen),Xe=Ke.map(Ze=>Ze.badge._id);return Xe.length>0&&(qe=qe.map(Ze=>({...Ze,isNew:Xe.includes(Ze.badge._id)})),setTimeout(()=>{Array.from(new Set(Xe)).forEach(St=>{const ar=document.getElementById(`badge-${St}`);if(ar){const hr=ar.getBoundingClientRect();De(hr)}});const er=Ke.map(St=>St._id);er.length>0&&apiService.markAppreciationsAsSeen(er).catch(St=>{console.error("Failed to mark appreciations as seen",St)})},500)),qe},Be=async()=>{try{const qe=(e==null?void 0:e.id)||(e==null?void 0:e._id);if(!qe)return;const Ge=await apiService.getAppreciations({recipientId:qe}),Ye=new Map;Ge.forEach(Xe=>{if(Xe.badge){const Ze=Ye.get(Xe.badge._id);Ze?Ze.count+=1:Ye.set(Xe.badge._id,{badge:Xe.badge,count:1})}});let Ke=Array.from(Ye.values());Me.current||(Ke=Oe(Ke,Ge),Me.current=!0),n(Ke)}catch(qe){console.error("Failed to fetch appreciations",qe)}finally{Re(!1)}},ze=qe=>{const Ge=qe.currentTarget.getBoundingClientRect();De(Ge)},$e=()=>{Ce>0&&Te(qe=>Math.max(0,qe-1))},He=()=>{Ce+5<t.length&&Te(qe=>Math.min(t.length-5,qe+1))};if(Ee)return jsxRuntimeExports.jsx("div",{className:"flex gap-2 animate-pulse",children:[1,2,3].map(qe=>jsxRuntimeExports.jsx("div",{className:"h-10 w-10 bg-bg-hover rounded-full"},qe))});if(t.length===0)return null;const Ue=t.slice(Ce,Ce+5),Ve=Ce>0,We=Ce+5<t.length;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/40 dark:bg-black/20 backdrop-blur-md border border-white/20 dark:border-white/10 shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden max-w-full",children:[Ve&&jsxRuntimeExports.jsx("button",{onClick:$e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 text-text-secondary transition-colors",children:jsxRuntimeExports.jsx(ChevronLeft,{size:16})}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3",children:Ue.map(qe=>jsxRuntimeExports.jsx(Tooltip,{content:`${qe.badge.title} (x${qe.count})`,children:jsxRuntimeExports.jsxs("div",{id:`badge-${qe.badge._id}`,onClick:ze,className:`flex-shrink-0 relative group cursor-pointer transition-all duration-300 hover:-translate-y-0.5 ${qe.isNew?"animate-bounce":""}`,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-brand-primary/20 blur-lg rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),qe.count>1&&jsxRuntimeExports.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-brand-primary to-purple-500 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full z-10 border border-white dark:border-gray-800 shadow-sm leading-none ring-1 ring-black/5",children:qe.count}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-white/50 dark:bg-black/20 rounded-full border border-white/30 dark:border-white/10 shadow-sm group-hover:border-brand-primary/30 transition-colors",children:jsxRuntimeExports.jsx("img",{src:qe.badge.icon.startsWith("http")?qe.badge.icon:`${ASSET_BASE_URL}${qe.badge.icon}`,alt:qe.badge.title,className:"w-7 h-7 object-contain drop-shadow-sm group-hover:scale-125 transition-transform duration-300"})})]})},qe.badge._id))}),We&&jsxRuntimeExports.jsx("button",{onClick:He,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 text-text-secondary transition-colors",children:jsxRuntimeExports.jsx(ChevronRight,{size:16})})]})}var lottie$1={exports:{}};(function(module,exports$1){typeof document<"u"&&typeof navigator<"u"&&function(e,t){module.exports=t()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(t){_useWebWorker=!!t},getWebWorker=function(){return _useWebWorker},setLocationHref=function(t){locationHref=t},getLocationHref=function(){return locationHref};function createTag(e){return document.createElement(e)}function extendPrototype(e,t){var n,Ee=e.length,Re;for(n=0;n<Ee;n+=1){Re=e[n].prototype;for(var Ce in Re)Object.prototype.hasOwnProperty.call(Re,Ce)&&(t.prototype[Ce]=Re[Ce])}}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}var audioControllerFactory=function(){function e(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(n){this.audios.push(n)},pause:function(){var n,Ee=this.audios.length;for(n=0;n<Ee;n+=1)this.audios[n].pause()},resume:function(){var n,Ee=this.audios.length;for(n=0;n<Ee;n+=1)this.audios[n].resume()},setRate:function(n){var Ee,Re=this.audios.length;for(Ee=0;Ee<Re;Ee+=1)this.audios[Ee].setRate(n)},createAudio:function(n){return this.audioFactory?this.audioFactory(n):window.Howl?new window.Howl({src:[n]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(n){this.audioFactory=n},setVolume:function(n){this._volume=n,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var n,Ee=this.audios.length;for(n=0;n<Ee;n+=1)this.audios[n].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),createTypedArray=function(){function e(n,Ee){var Re=0,Ce=[],Te;switch(n){case"int16":case"uint8c":Te=1;break;default:Te=1.1;break}for(Re=0;Re<Ee;Re+=1)Ce.push(Te);return Ce}function t(n,Ee){return n==="float32"?new Float32Array(Ee):n==="int16"?new Int16Array(Ee):n==="uint8c"?new Uint8ClampedArray(Ee):e(n,Ee)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?t:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function _typeof$6(e){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$6(e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],t,n=e.length;for(t=0;t<n;t+=1)BMMath[e[t]]=Math[e[t]]})(),BMMath.random=Math.random,BMMath.abs=function(e){var t=_typeof$6(e);if(t==="object"&&e.length){var n=createSizedArray(e.length),Ee,Re=e.length;for(Ee=0;Ee<Re;Ee+=1)n[Ee]=Math.abs(e[Ee]);return n}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,n,Ee){this.type=e,this.currentTime=t,this.totalTime=n,this.direction=Ee<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,n,Ee){this.type=e,this.currentLoop=n,this.totalLoops=t,this.direction=Ee<0?-1:1}function BMSegmentStartEvent(e,t,n){this.type=e,this.firstFrame=t,this.totalFrames=n}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}var createElementID=function(){var e=0;return function(){return e+=1,idPrefix$1+"__lottie_element_"+e}}();function HSVtoRGB(e,t,n){var Ee,Re,Ce,Te,Me,De,Oe,Be;switch(Te=Math.floor(e*6),Me=e*6-Te,De=n*(1-t),Oe=n*(1-Me*t),Be=n*(1-(1-Me)*t),Te%6){case 0:Ee=n,Re=Be,Ce=De;break;case 1:Ee=Oe,Re=n,Ce=De;break;case 2:Ee=De,Re=n,Ce=Be;break;case 3:Ee=De,Re=Oe,Ce=n;break;case 4:Ee=Be,Re=De,Ce=n;break;case 5:Ee=n,Re=De,Ce=Oe;break}return[Ee,Re,Ce]}function RGBtoHSV(e,t,n){var Ee=Math.max(e,t,n),Re=Math.min(e,t,n),Ce=Ee-Re,Te,Me=Ee===0?0:Ce/Ee,De=Ee/255;switch(Ee){case Re:Te=0;break;case e:Te=t-n+Ce*(t<n?6:0),Te/=6*Ce;break;case t:Te=n-e+Ce*2,Te/=6*Ce;break;case n:Te=e-t+Ce*4,Te/=6*Ce;break}return[Te,Me,De]}function addSaturationToRGB(e,t){var n=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return n[1]+=t,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(e,t){var n=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return n[2]+=t,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(e,t){var n=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return n[0]+=t/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var e=[],t,n;for(t=0;t<256;t+=1)n=t.toString(16),e[t]=n.length===1?"0"+n:n;return function(Ee,Re,Ce){return Ee<0&&(Ee=0),Re<0&&(Re=0),Ce<0&&(Ce=0),"#"+e[Ee]+e[Re]+e[Ce]}}(),setSubframeEnabled=function(t){subframeEnabled=!!t},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(t){expressionsPlugin=t},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(t){expressionsInterfaces=t},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(t){defaultCurveSegments=t},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(t){idPrefix$1=t};function createNS(e){return document.createElementNS(svgNS,e)}function _typeof$5(e){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$5(e)}var dataManager=function(){var e=1,t=[],n,Ee,Re={onmessage:function(){},postMessage:function(He){n({data:He})}},Ce={postMessage:function(He){Re.onmessage({data:He})}};function Te($e){if(window.Worker&&window.Blob&&getWebWorker()){var He=new Blob(["var _workerSelf = self; self.onmessage = ",$e.toString()],{type:"text/javascript"}),Ue=URL.createObjectURL(He);return new Worker(Ue)}return n=$e,Re}function Me(){Ee||(Ee=Te(function(He){function Ue(){function We(br,lr){var cr,rr,pr=br.length,mr,ir,nr,gr;for(rr=0;rr<pr;rr+=1)if(cr=br[rr],"ks"in cr&&!cr.completed){if(cr.completed=!0,cr.hasMask){var Er=cr.masksProperties;for(ir=Er.length,mr=0;mr<ir;mr+=1)if(Er[mr].pt.k.i)Xe(Er[mr].pt.k);else for(gr=Er[mr].pt.k.length,nr=0;nr<gr;nr+=1)Er[mr].pt.k[nr].s&&Xe(Er[mr].pt.k[nr].s[0]),Er[mr].pt.k[nr].e&&Xe(Er[mr].pt.k[nr].e[0])}cr.ty===0?(cr.layers=Ye(cr.refId,lr),We(cr.layers,lr)):cr.ty===4?Ke(cr.shapes):cr.ty===5&&vr(cr)}}function qe(br,lr){if(br){var cr=0,rr=br.length;for(cr=0;cr<rr;cr+=1)br[cr].t===1&&(br[cr].data.layers=Ye(br[cr].data.refId,lr),We(br[cr].data.layers,lr))}}function Ge(br,lr){for(var cr=0,rr=lr.length;cr<rr;){if(lr[cr].id===br)return lr[cr];cr+=1}return null}function Ye(br,lr){var cr=Ge(br,lr);return cr?cr.layers.__used?JSON.parse(JSON.stringify(cr.layers)):(cr.layers.__used=!0,cr.layers):null}function Ke(br){var lr,cr=br.length,rr,pr;for(lr=cr-1;lr>=0;lr-=1)if(br[lr].ty==="sh")if(br[lr].ks.k.i)Xe(br[lr].ks.k);else for(pr=br[lr].ks.k.length,rr=0;rr<pr;rr+=1)br[lr].ks.k[rr].s&&Xe(br[lr].ks.k[rr].s[0]),br[lr].ks.k[rr].e&&Xe(br[lr].ks.k[rr].e[0]);else br[lr].ty==="gr"&&Ke(br[lr].it)}function Xe(br){var lr,cr=br.i.length;for(lr=0;lr<cr;lr+=1)br.i[lr][0]+=br.v[lr][0],br.i[lr][1]+=br.v[lr][1],br.o[lr][0]+=br.v[lr][0],br.o[lr][1]+=br.v[lr][1]}function Ze(br,lr){var cr=lr?lr.split("."):[100,100,100];return br[0]>cr[0]?!0:cr[0]>br[0]?!1:br[1]>cr[1]?!0:cr[1]>br[1]?!1:br[2]>cr[2]?!0:cr[2]>br[2]?!1:null}var er=function(){var br=[4,4,14];function lr(rr){var pr=rr.t.d;rr.t.d={k:[{s:pr,t:0}]}}function cr(rr){var pr,mr=rr.length;for(pr=0;pr<mr;pr+=1)rr[pr].ty===5&&lr(rr[pr])}return function(rr){if(Ze(br,rr.v)&&(cr(rr.layers),rr.assets)){var pr,mr=rr.assets.length;for(pr=0;pr<mr;pr+=1)rr.assets[pr].layers&&cr(rr.assets[pr].layers)}}}(),St=function(){var br=[4,7,99];return function(lr){if(lr.chars&&!Ze(br,lr.v)){var cr,rr=lr.chars.length;for(cr=0;cr<rr;cr+=1){var pr=lr.chars[cr];pr.data&&pr.data.shapes&&(Ke(pr.data.shapes),pr.data.ip=0,pr.data.op=99999,pr.data.st=0,pr.data.sr=1,pr.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},lr.chars[cr].t||(pr.data.shapes.push({ty:"no"}),pr.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),ar=function(){var br=[5,7,15];function lr(rr){var pr=rr.t.p;typeof pr.a=="number"&&(pr.a={a:0,k:pr.a}),typeof pr.p=="number"&&(pr.p={a:0,k:pr.p}),typeof pr.r=="number"&&(pr.r={a:0,k:pr.r})}function cr(rr){var pr,mr=rr.length;for(pr=0;pr<mr;pr+=1)rr[pr].ty===5&&lr(rr[pr])}return function(rr){if(Ze(br,rr.v)&&(cr(rr.layers),rr.assets)){var pr,mr=rr.assets.length;for(pr=0;pr<mr;pr+=1)rr.assets[pr].layers&&cr(rr.assets[pr].layers)}}}(),hr=function(){var br=[4,1,9];function lr(rr){var pr,mr=rr.length,ir,nr;for(pr=0;pr<mr;pr+=1)if(rr[pr].ty==="gr")lr(rr[pr].it);else if(rr[pr].ty==="fl"||rr[pr].ty==="st")if(rr[pr].c.k&&rr[pr].c.k[0].i)for(nr=rr[pr].c.k.length,ir=0;ir<nr;ir+=1)rr[pr].c.k[ir].s&&(rr[pr].c.k[ir].s[0]/=255,rr[pr].c.k[ir].s[1]/=255,rr[pr].c.k[ir].s[2]/=255,rr[pr].c.k[ir].s[3]/=255),rr[pr].c.k[ir].e&&(rr[pr].c.k[ir].e[0]/=255,rr[pr].c.k[ir].e[1]/=255,rr[pr].c.k[ir].e[2]/=255,rr[pr].c.k[ir].e[3]/=255);else rr[pr].c.k[0]/=255,rr[pr].c.k[1]/=255,rr[pr].c.k[2]/=255,rr[pr].c.k[3]/=255}function cr(rr){var pr,mr=rr.length;for(pr=0;pr<mr;pr+=1)rr[pr].ty===4&&lr(rr[pr].shapes)}return function(rr){if(Ze(br,rr.v)&&(cr(rr.layers),rr.assets)){var pr,mr=rr.assets.length;for(pr=0;pr<mr;pr+=1)rr.assets[pr].layers&&cr(rr.assets[pr].layers)}}}(),ur=function(){var br=[4,4,18];function lr(rr){var pr,mr=rr.length,ir,nr;for(pr=mr-1;pr>=0;pr-=1)if(rr[pr].ty==="sh")if(rr[pr].ks.k.i)rr[pr].ks.k.c=rr[pr].closed;else for(nr=rr[pr].ks.k.length,ir=0;ir<nr;ir+=1)rr[pr].ks.k[ir].s&&(rr[pr].ks.k[ir].s[0].c=rr[pr].closed),rr[pr].ks.k[ir].e&&(rr[pr].ks.k[ir].e[0].c=rr[pr].closed);else rr[pr].ty==="gr"&&lr(rr[pr].it)}function cr(rr){var pr,mr,ir=rr.length,nr,gr,Er,Cr;for(mr=0;mr<ir;mr+=1){if(pr=rr[mr],pr.hasMask){var Nr=pr.masksProperties;for(gr=Nr.length,nr=0;nr<gr;nr+=1)if(Nr[nr].pt.k.i)Nr[nr].pt.k.c=Nr[nr].cl;else for(Cr=Nr[nr].pt.k.length,Er=0;Er<Cr;Er+=1)Nr[nr].pt.k[Er].s&&(Nr[nr].pt.k[Er].s[0].c=Nr[nr].cl),Nr[nr].pt.k[Er].e&&(Nr[nr].pt.k[Er].e[0].c=Nr[nr].cl)}pr.ty===4&&lr(pr.shapes)}}return function(rr){if(Ze(br,rr.v)&&(cr(rr.layers),rr.assets)){var pr,mr=rr.assets.length;for(pr=0;pr<mr;pr+=1)rr.assets[pr].layers&&cr(rr.assets[pr].layers)}}}();function dr(br){br.__complete||(hr(br),er(br),St(br),ar(br),ur(br),We(br.layers,br.assets),qe(br.chars,br.assets),br.__complete=!0)}function vr(br){br.t.a.length===0&&"m"in br.t.p}var yr={};return yr.completeData=dr,yr.checkColors=hr,yr.checkChars=St,yr.checkPathProperties=ar,yr.checkShapes=ur,yr.completeLayers=We,yr}if(Ce.dataManager||(Ce.dataManager=Ue()),Ce.assetLoader||(Ce.assetLoader=function(){function We(Ge){var Ye=Ge.getResponseHeader("content-type");return Ye&&Ge.responseType==="json"&&Ye.indexOf("json")!==-1||Ge.response&&_typeof$5(Ge.response)==="object"?Ge.response:Ge.response&&typeof Ge.response=="string"?JSON.parse(Ge.response):Ge.responseText?JSON.parse(Ge.responseText):null}function qe(Ge,Ye,Ke,Xe){var Ze,er=new XMLHttpRequest;try{er.responseType="json"}catch{}er.onreadystatechange=function(){if(er.readyState===4)if(er.status===200)Ze=We(er),Ke(Ze);else try{Ze=We(er),Ke(Ze)}catch(St){Xe&&Xe(St)}};try{er.open(["G","E","T"].join(""),Ge,!0)}catch{er.open(["G","E","T"].join(""),Ye+"/"+Ge,!0)}er.send()}return{load:qe}}()),He.data.type==="loadAnimation")Ce.assetLoader.load(He.data.path,He.data.fullPath,function(We){Ce.dataManager.completeData(We),Ce.postMessage({id:He.data.id,payload:We,status:"success"})},function(){Ce.postMessage({id:He.data.id,status:"error"})});else if(He.data.type==="complete"){var Ve=He.data.animation;Ce.dataManager.completeData(Ve),Ce.postMessage({id:He.data.id,payload:Ve,status:"success"})}else He.data.type==="loadData"&&Ce.assetLoader.load(He.data.path,He.data.fullPath,function(We){Ce.postMessage({id:He.data.id,payload:We,status:"success"})},function(){Ce.postMessage({id:He.data.id,status:"error"})})}),Ee.onmessage=function($e){var He=$e.data,Ue=He.id,Ve=t[Ue];t[Ue]=null,He.status==="success"?Ve.onComplete(He.payload):Ve.onError&&Ve.onError()})}function De($e,He){e+=1;var Ue="processId_"+e;return t[Ue]={onComplete:$e,onError:He},Ue}function Oe($e,He,Ue){Me();var Ve=De(He,Ue);Ee.postMessage({type:"loadAnimation",path:$e,fullPath:window.location.origin+window.location.pathname,id:Ve})}function Be($e,He,Ue){Me();var Ve=De(He,Ue);Ee.postMessage({type:"loadData",path:$e,fullPath:window.location.origin+window.location.pathname,id:Ve})}function ze($e,He,Ue){Me();var Ve=De(He,Ue);Ee.postMessage({type:"complete",animation:$e,id:Ve})}return{loadAnimation:Oe,loadData:Be,completeAnimation:ze}}(),ImagePreloader=function(){var e=function(){var qe=createTag("canvas");qe.width=1,qe.height=1;var Ge=qe.getContext("2d");return Ge.fillStyle="rgba(0,0,0,0)",Ge.fillRect(0,0,1,1),qe}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function Ee(qe,Ge,Ye){var Ke="";if(qe.e)Ke=qe.p;else if(Ge){var Xe=qe.p;Xe.indexOf("images/")!==-1&&(Xe=Xe.split("/")[1]),Ke=Ge+Xe}else Ke=Ye,Ke+=qe.u?qe.u:"",Ke+=qe.p;return Ke}function Re(qe){var Ge=0,Ye=setInterval((function(){var Ke=qe.getBBox();(Ke.width||Ge>500)&&(this._imageLoaded(),clearInterval(Ye)),Ge+=1}).bind(this),50)}function Ce(qe){var Ge=Ee(qe,this.assetsPath,this.path),Ye=createNS("image");isSafari?this.testImageLoaded(Ye):Ye.addEventListener("load",this._imageLoaded,!1),Ye.addEventListener("error",(function(){Ke.img=e,this._imageLoaded()}).bind(this),!1),Ye.setAttributeNS("http://www.w3.org/1999/xlink","href",Ge),this._elementHelper.append?this._elementHelper.append(Ye):this._elementHelper.appendChild(Ye);var Ke={img:Ye,assetData:qe};return Ke}function Te(qe){var Ge=Ee(qe,this.assetsPath,this.path),Ye=createTag("img");Ye.crossOrigin="anonymous",Ye.addEventListener("load",this._imageLoaded,!1),Ye.addEventListener("error",(function(){Ke.img=e,this._imageLoaded()}).bind(this),!1),Ye.src=Ge;var Ke={img:Ye,assetData:qe};return Ke}function Me(qe){var Ge={assetData:qe},Ye=Ee(qe,this.assetsPath,this.path);return dataManager.loadData(Ye,(function(Ke){Ge.img=Ke,this._footageLoaded()}).bind(this),(function(){Ge.img={},this._footageLoaded()}).bind(this)),Ge}function De(qe,Ge){this.imagesLoadedCb=Ge;var Ye,Ke=qe.length;for(Ye=0;Ye<Ke;Ye+=1)qe[Ye].layers||(!qe[Ye].t||qe[Ye].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(qe[Ye]))):qe[Ye].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(qe[Ye]))))}function Oe(qe){this.path=qe||""}function Be(qe){this.assetsPath=qe||""}function ze(qe){for(var Ge=0,Ye=this.images.length;Ge<Ye;){if(this.images[Ge].assetData===qe)return this.images[Ge].img;Ge+=1}return null}function $e(){this.imagesLoadedCb=null,this.images.length=0}function He(){return this.totalImages===this.loadedAssets}function Ue(){return this.totalFootages===this.loadedFootagesCount}function Ve(qe,Ge){qe==="svg"?(this._elementHelper=Ge,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function We(){this._imageLoaded=t.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=Re.bind(this),this.createFootageData=Me.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return We.prototype={loadAssets:De,setAssetsPath:Be,setPath:Oe,loadedImages:He,loadedFootages:Ue,destroy:$e,getAsset:ze,createImgData:Te,createImageData:Ce,imageLoaded:t,footageLoaded:n,setCacheType:Ve},We}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,n){if(this._cbs[t])for(var Ee=this._cbs[t],Re=0;Re<Ee.length;Re+=1)Ee[Re](n)},addEventListener:function(t,n){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(n),(function(){this.removeEventListener(t,n)}).bind(this)},removeEventListener:function(t,n){if(!n)this._cbs[t]=null;else if(this._cbs[t]){for(var Ee=0,Re=this._cbs[t].length;Ee<Re;)this._cbs[t][Ee]===n&&(this._cbs[t].splice(Ee,1),Ee-=1,Re-=1),Ee+=1;this._cbs[t].length||(this._cbs[t]=null)}}};var markerParser=function(){function e(t){for(var n=t.split(`\r
`),Ee={},Re,Ce=0,Te=0;Te<n.length;Te+=1)Re=n[Te].split(":"),Re.length===2&&(Ee[Re[0]]=Re[1].trim(),Ce+=1);if(Ce===0)throw new Error;return Ee}return function(t){for(var n=[],Ee=0;Ee<t.length;Ee+=1){var Re=t[Ee],Ce={time:Re.tm,duration:Re.dr};try{Ce.payload=JSON.parse(t[Ee].cm)}catch{try{Ce.payload=e(t[Ee].cm)}catch{Ce.payload={name:t[Ee].cm}}}n.push(Ce)}return n}}(),ProjectInterface=function(){function e(t){this.compositions.push(t)}return function(){function t(n){for(var Ee=0,Re=this.compositions.length;Ee<Re;){if(this.compositions[Ee].data&&this.compositions[Ee].data.nm===n)return this.compositions[Ee].prepareFrame&&this.compositions[Ee].data.xt&&this.compositions[Ee].prepareFrame(this.currentFrame),this.compositions[Ee].compInterface;Ee+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),renderers={},registerRenderer=function(t,n){renderers[t]=n};function getRenderer(e){return renderers[e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var e in renderers)if(renderers[e])return e;return""}function _typeof$4(e){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$4(e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t="svg";e.animType?t=e.animType:e.renderer&&(t=e.renderer);var n=getRenderer(t);this.renderer=new n(this,e.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,e.loop===""||e.loop===null||e.loop===void 0||e.loop===!0?this.loop=!0:e.loop===!1?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay="autoplay"in e?e.autoplay:!0,this.name=e.name?e.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(e,"autoloadSegments")?e.autoloadSegments:!0,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(e.path.lastIndexOf("\\")!==-1?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(e){dataManager.completeAnimation(e,this.configAnimation)},AnimationItem.prototype.setData=function(e,t){t&&_typeof$4(t)!=="object"&&(t=JSON.parse(t));var n={wrapper:e,animationData:t},Ee=e.attributes;n.path=Ee.getNamedItem("data-animation-path")?Ee.getNamedItem("data-animation-path").value:Ee.getNamedItem("data-bm-path")?Ee.getNamedItem("data-bm-path").value:Ee.getNamedItem("bm-path")?Ee.getNamedItem("bm-path").value:"",n.animType=Ee.getNamedItem("data-anim-type")?Ee.getNamedItem("data-anim-type").value:Ee.getNamedItem("data-bm-type")?Ee.getNamedItem("data-bm-type").value:Ee.getNamedItem("bm-type")?Ee.getNamedItem("bm-type").value:Ee.getNamedItem("data-bm-renderer")?Ee.getNamedItem("data-bm-renderer").value:Ee.getNamedItem("bm-renderer")?Ee.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var Re=Ee.getNamedItem("data-anim-loop")?Ee.getNamedItem("data-anim-loop").value:Ee.getNamedItem("data-bm-loop")?Ee.getNamedItem("data-bm-loop").value:Ee.getNamedItem("bm-loop")?Ee.getNamedItem("bm-loop").value:"";Re==="false"?n.loop=!1:Re==="true"?n.loop=!0:Re!==""&&(n.loop=parseInt(Re,10));var Ce=Ee.getNamedItem("data-anim-autoplay")?Ee.getNamedItem("data-anim-autoplay").value:Ee.getNamedItem("data-bm-autoplay")?Ee.getNamedItem("data-bm-autoplay").value:Ee.getNamedItem("bm-autoplay")?Ee.getNamedItem("bm-autoplay").value:!0;n.autoplay=Ce!=="false",n.name=Ee.getNamedItem("data-name")?Ee.getNamedItem("data-name").value:Ee.getNamedItem("data-bm-name")?Ee.getNamedItem("data-bm-name").value:Ee.getNamedItem("bm-name")?Ee.getNamedItem("bm-name").value:"";var Te=Ee.getNamedItem("data-anim-prerender")?Ee.getNamedItem("data-anim-prerender").value:Ee.getNamedItem("data-bm-prerender")?Ee.getNamedItem("data-bm-prerender").value:Ee.getNamedItem("bm-prerender")?Ee.getNamedItem("bm-prerender").value:"";Te==="false"&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var t=this.animationData.layers,n,Ee=t.length,Re=e.layers,Ce,Te=Re.length;for(Ce=0;Ce<Te;Ce+=1)for(n=0;n<Ee;){if(t[n].id===Re[Ce].id){t[n]=Re[Ce];break}n+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(Ee=e.assets.length,n=0;n<Ee;n+=1)this.animationData.assets.push(e.assets[n]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(e){this.animationData=e;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||e.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var t=e.shift();this.timeCompleted=t.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var e=this.animationData.segments;e||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(e,t){var n=typeof e=="number"?e:void 0,Ee=typeof t=="number"?t:void 0;this.renderer.updateContainerSize(n,Ee)},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var t,n=0;n<this.markers.length;n+=1)if(t=this.markers[n],t.payload&&t.payload.name===e)return t;return null},AnimationItem.prototype.goToAndStop=function(e,t,n){if(!(n&&this.name!==n)){var Ee=Number(e);if(isNaN(Ee)){var Re=this.getMarkerData(e);Re&&this.goToAndStop(Re.time,!0)}else t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,t,n){if(!(n&&this.name!==n)){var Ee=Number(e);if(isNaN(Ee)){var Re=this.getMarkerData(e);Re&&(Re.duration?this.playSegments([Re.time,Re.time+Re.duration],!0):this.goToAndStop(Re.time,!0))}else this.goToAndStop(Ee,t,n);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!(this.isPaused===!0||this.isLoaded===!1)){var t=this.currentRawFrame+e*this.frameModifier,n=!1;t>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(n=!0,t=this.totalFrames-1):t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):t<0?this.checkSegments(t%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(n=!0,t=0)):this.setCurrentRawFrameValue(t),n&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?n=e:this.currentRawFrame+this.firstFrame>t&&(n=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,n!==-1&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),_typeof$4(e[0])==="object"){var n,Ee=e.length;for(n=0;n<Ee;n+=1)this.segments.push(e[n])}else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return this.segments.length?(this.adjustSegment(this.segments.shift(),e),!0):!1},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(e){this.loop=e},AnimationItem.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(e.e)t=e.p;else if(this.assetsPath){var n=e.p;n.indexOf("images/")!==-1&&(n=n.split("/")[1]),t=this.assetsPath+n}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,n=this.assets.length;t<n;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(e,t,n){try{var Ee=this.renderer.getElementByPath(e);Ee.updateDocumentData(t,n)}catch{}},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}e==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),e==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),e==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),e==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),e==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=function(){var e={},t=[],n=0,Ee=0,Re=0,Ce=!0,Te=!1;function Me(lr){for(var cr=0,rr=lr.target;cr<Ee;)t[cr].animation===rr&&(t.splice(cr,1),cr-=1,Ee-=1,rr.isPaused||ze()),cr+=1}function De(lr,cr){if(!lr)return null;for(var rr=0;rr<Ee;){if(t[rr].elem===lr&&t[rr].elem!==null)return t[rr].animation;rr+=1}var pr=new AnimationItem;return $e(pr,lr),pr.setData(lr,cr),pr}function Oe(){var lr,cr=t.length,rr=[];for(lr=0;lr<cr;lr+=1)rr.push(t[lr].animation);return rr}function Be(){Re+=1,hr()}function ze(){Re-=1}function $e(lr,cr){lr.addEventListener("destroy",Me),lr.addEventListener("_active",Be),lr.addEventListener("_idle",ze),t.push({elem:cr,animation:lr}),Ee+=1}function He(lr){var cr=new AnimationItem;return $e(cr,null),cr.setParams(lr),cr}function Ue(lr,cr){var rr;for(rr=0;rr<Ee;rr+=1)t[rr].animation.setSpeed(lr,cr)}function Ve(lr,cr){var rr;for(rr=0;rr<Ee;rr+=1)t[rr].animation.setDirection(lr,cr)}function We(lr){var cr;for(cr=0;cr<Ee;cr+=1)t[cr].animation.play(lr)}function qe(lr){var cr=lr-n,rr;for(rr=0;rr<Ee;rr+=1)t[rr].animation.advanceTime(cr);n=lr,Re&&!Te?window.requestAnimationFrame(qe):Ce=!0}function Ge(lr){n=lr,window.requestAnimationFrame(qe)}function Ye(lr){var cr;for(cr=0;cr<Ee;cr+=1)t[cr].animation.pause(lr)}function Ke(lr,cr,rr){var pr;for(pr=0;pr<Ee;pr+=1)t[pr].animation.goToAndStop(lr,cr,rr)}function Xe(lr){var cr;for(cr=0;cr<Ee;cr+=1)t[cr].animation.stop(lr)}function Ze(lr){var cr;for(cr=0;cr<Ee;cr+=1)t[cr].animation.togglePause(lr)}function er(lr){var cr;for(cr=Ee-1;cr>=0;cr-=1)t[cr].animation.destroy(lr)}function St(lr,cr,rr){var pr=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),mr,ir=pr.length;for(mr=0;mr<ir;mr+=1)rr&&pr[mr].setAttribute("data-bm-type",rr),De(pr[mr],lr);if(cr&&ir===0){rr||(rr="svg");var nr=document.getElementsByTagName("body")[0];nr.innerText="";var gr=createTag("div");gr.style.width="100%",gr.style.height="100%",gr.setAttribute("data-bm-type",rr),nr.appendChild(gr),De(gr,lr)}}function ar(){var lr;for(lr=0;lr<Ee;lr+=1)t[lr].animation.resize()}function hr(){!Te&&Re&&Ce&&(window.requestAnimationFrame(Ge),Ce=!1)}function ur(){Te=!0}function dr(){Te=!1,hr()}function vr(lr,cr){var rr;for(rr=0;rr<Ee;rr+=1)t[rr].animation.setVolume(lr,cr)}function yr(lr){var cr;for(cr=0;cr<Ee;cr+=1)t[cr].animation.mute(lr)}function br(lr){var cr;for(cr=0;cr<Ee;cr+=1)t[cr].animation.unmute(lr)}return e.registerAnimation=De,e.loadAnimation=He,e.setSpeed=Ue,e.setDirection=Ve,e.play=We,e.pause=Ye,e.stop=Xe,e.togglePause=Ze,e.searchAnimations=St,e.resize=ar,e.goToAndStop=Ke,e.destroy=er,e.freeze=ur,e.unfreeze=dr,e.setVolume=vr,e.mute=yr,e.unmute=br,e.getRegisteredAnimations=Oe,e}(),BezierFactory=function(){var e={};e.getBezierEasing=n;var t={};function n(Ge,Ye,Ke,Xe,Ze){var er=Ze||("bez_"+Ge+"_"+Ye+"_"+Ke+"_"+Xe).replace(/\./g,"p");if(t[er])return t[er];var St=new qe([Ge,Ye,Ke,Xe]);return t[er]=St,St}var Ee=4,Re=.001,Ce=1e-7,Te=10,Me=11,De=1/(Me-1),Oe=typeof Float32Array=="function";function Be(Ge,Ye){return 1-3*Ye+3*Ge}function ze(Ge,Ye){return 3*Ye-6*Ge}function $e(Ge){return 3*Ge}function He(Ge,Ye,Ke){return((Be(Ye,Ke)*Ge+ze(Ye,Ke))*Ge+$e(Ye))*Ge}function Ue(Ge,Ye,Ke){return 3*Be(Ye,Ke)*Ge*Ge+2*ze(Ye,Ke)*Ge+$e(Ye)}function Ve(Ge,Ye,Ke,Xe,Ze){var er,St,ar=0;do St=Ye+(Ke-Ye)/2,er=He(St,Xe,Ze)-Ge,er>0?Ke=St:Ye=St;while(Math.abs(er)>Ce&&++ar<Te);return St}function We(Ge,Ye,Ke,Xe){for(var Ze=0;Ze<Ee;++Ze){var er=Ue(Ye,Ke,Xe);if(er===0)return Ye;var St=He(Ye,Ke,Xe)-Ge;Ye-=St/er}return Ye}function qe(Ge){this._p=Ge,this._mSampleValues=Oe?new Float32Array(Me):new Array(Me),this._precomputed=!1,this.get=this.get.bind(this)}return qe.prototype={get:function(Ye){var Ke=this._p[0],Xe=this._p[1],Ze=this._p[2],er=this._p[3];return this._precomputed||this._precompute(),Ke===Xe&&Ze===er?Ye:Ye===0?0:Ye===1?1:He(this._getTForX(Ye),Xe,er)},_precompute:function(){var Ye=this._p[0],Ke=this._p[1],Xe=this._p[2],Ze=this._p[3];this._precomputed=!0,(Ye!==Ke||Xe!==Ze)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Ye=this._p[0],Ke=this._p[2],Xe=0;Xe<Me;++Xe)this._mSampleValues[Xe]=He(Xe*De,Ye,Ke)},_getTForX:function(Ye){for(var Ke=this._p[0],Xe=this._p[2],Ze=this._mSampleValues,er=0,St=1,ar=Me-1;St!==ar&&Ze[St]<=Ye;++St)er+=De;--St;var hr=(Ye-Ze[St])/(Ze[St+1]-Ze[St]),ur=er+hr*De,dr=Ue(ur,Ke,Xe);return dr>=Re?We(Ye,ur,Ke,Xe):dr===0?ur:Ve(Ye,er,er+De,Ke,Xe)}},e}(),pooling=function(){function e(t){return t.concat(createSizedArray(t.length))}return{double:e}}(),poolFactory=function(){return function(e,t,n){var Ee=0,Re=e,Ce=createSizedArray(Re),Te={newElement:Me,release:De};function Me(){var Oe;return Ee?(Ee-=1,Oe=Ce[Ee]):Oe=t(),Oe}function De(Oe){Ee===Re&&(Ce=pooling.double(Ce),Re*=2),n&&n(Oe),Ce[Ee]=Oe,Ee+=1}return Te}}(),bezierLengthPool=function(){function e(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,e)}(),segmentsLengthPool=function(){function e(){return{lengths:[],totalLength:0}}function t(n){var Ee,Re=n.lengths.length;for(Ee=0;Ee<Re;Ee+=1)bezierLengthPool.release(n.lengths[Ee]);n.lengths.length=0}return poolFactory(8,e,t)}();function bezFunction(){var e=Math;function t($e,He,Ue,Ve,We,qe){var Ge=$e*Ve+He*We+Ue*qe-We*Ve-qe*$e-Ue*He;return Ge>-.001&&Ge<.001}function n($e,He,Ue,Ve,We,qe,Ge,Ye,Ke){if(Ue===0&&qe===0&&Ke===0)return t($e,He,Ve,We,Ge,Ye);var Xe=e.sqrt(e.pow(Ve-$e,2)+e.pow(We-He,2)+e.pow(qe-Ue,2)),Ze=e.sqrt(e.pow(Ge-$e,2)+e.pow(Ye-He,2)+e.pow(Ke-Ue,2)),er=e.sqrt(e.pow(Ge-Ve,2)+e.pow(Ye-We,2)+e.pow(Ke-qe,2)),St;return Xe>Ze?Xe>er?St=Xe-Ze-er:St=er-Ze-Xe:er>Ze?St=er-Ze-Xe:St=Ze-Xe-er,St>-1e-4&&St<1e-4}var Ee=function(){return function($e,He,Ue,Ve){var We=getDefaultCurveSegments(),qe,Ge,Ye,Ke,Xe,Ze=0,er,St=[],ar=[],hr=bezierLengthPool.newElement();for(Ye=Ue.length,qe=0;qe<We;qe+=1){for(Xe=qe/(We-1),er=0,Ge=0;Ge<Ye;Ge+=1)Ke=bmPow(1-Xe,3)*$e[Ge]+3*bmPow(1-Xe,2)*Xe*Ue[Ge]+3*(1-Xe)*bmPow(Xe,2)*Ve[Ge]+bmPow(Xe,3)*He[Ge],St[Ge]=Ke,ar[Ge]!==null&&(er+=bmPow(St[Ge]-ar[Ge],2)),ar[Ge]=St[Ge];er&&(er=bmSqrt(er),Ze+=er),hr.percents[qe]=Xe,hr.lengths[qe]=Ze}return hr.addedLength=Ze,hr}}();function Re($e){var He=segmentsLengthPool.newElement(),Ue=$e.c,Ve=$e.v,We=$e.o,qe=$e.i,Ge,Ye=$e._length,Ke=He.lengths,Xe=0;for(Ge=0;Ge<Ye-1;Ge+=1)Ke[Ge]=Ee(Ve[Ge],Ve[Ge+1],We[Ge],qe[Ge+1]),Xe+=Ke[Ge].addedLength;return Ue&&Ye&&(Ke[Ge]=Ee(Ve[Ge],Ve[0],We[Ge],qe[0]),Xe+=Ke[Ge].addedLength),He.totalLength=Xe,He}function Ce($e){this.segmentLength=0,this.points=new Array($e)}function Te($e,He){this.partialLength=$e,this.point=He}var Me=function(){var $e={};return function(He,Ue,Ve,We){var qe=(He[0]+"_"+He[1]+"_"+Ue[0]+"_"+Ue[1]+"_"+Ve[0]+"_"+Ve[1]+"_"+We[0]+"_"+We[1]).replace(/\./g,"p");if(!$e[qe]){var Ge=getDefaultCurveSegments(),Ye,Ke,Xe,Ze,er,St=0,ar,hr,ur=null;He.length===2&&(He[0]!==Ue[0]||He[1]!==Ue[1])&&t(He[0],He[1],Ue[0],Ue[1],He[0]+Ve[0],He[1]+Ve[1])&&t(He[0],He[1],Ue[0],Ue[1],Ue[0]+We[0],Ue[1]+We[1])&&(Ge=2);var dr=new Ce(Ge);for(Xe=Ve.length,Ye=0;Ye<Ge;Ye+=1){for(hr=createSizedArray(Xe),er=Ye/(Ge-1),ar=0,Ke=0;Ke<Xe;Ke+=1)Ze=bmPow(1-er,3)*He[Ke]+3*bmPow(1-er,2)*er*(He[Ke]+Ve[Ke])+3*(1-er)*bmPow(er,2)*(Ue[Ke]+We[Ke])+bmPow(er,3)*Ue[Ke],hr[Ke]=Ze,ur!==null&&(ar+=bmPow(hr[Ke]-ur[Ke],2));ar=bmSqrt(ar),St+=ar,dr.points[Ye]=new Te(ar,hr),ur=hr}dr.segmentLength=St,$e[qe]=dr}return $e[qe]}}();function De($e,He){var Ue=He.percents,Ve=He.lengths,We=Ue.length,qe=bmFloor((We-1)*$e),Ge=$e*He.addedLength,Ye=0;if(qe===We-1||qe===0||Ge===Ve[qe])return Ue[qe];for(var Ke=Ve[qe]>Ge?-1:1,Xe=!0;Xe;)if(Ve[qe]<=Ge&&Ve[qe+1]>Ge?(Ye=(Ge-Ve[qe])/(Ve[qe+1]-Ve[qe]),Xe=!1):qe+=Ke,qe<0||qe>=We-1){if(qe===We-1)return Ue[qe];Xe=!1}return Ue[qe]+(Ue[qe+1]-Ue[qe])*Ye}function Oe($e,He,Ue,Ve,We,qe){var Ge=De(We,qe),Ye=1-Ge,Ke=e.round((Ye*Ye*Ye*$e[0]+(Ge*Ye*Ye+Ye*Ge*Ye+Ye*Ye*Ge)*Ue[0]+(Ge*Ge*Ye+Ye*Ge*Ge+Ge*Ye*Ge)*Ve[0]+Ge*Ge*Ge*He[0])*1e3)/1e3,Xe=e.round((Ye*Ye*Ye*$e[1]+(Ge*Ye*Ye+Ye*Ge*Ye+Ye*Ye*Ge)*Ue[1]+(Ge*Ge*Ye+Ye*Ge*Ge+Ge*Ye*Ge)*Ve[1]+Ge*Ge*Ge*He[1])*1e3)/1e3;return[Ke,Xe]}var Be=createTypedArray("float32",8);function ze($e,He,Ue,Ve,We,qe,Ge){We<0?We=0:We>1&&(We=1);var Ye=De(We,Ge);qe=qe>1?1:qe;var Ke=De(qe,Ge),Xe,Ze=$e.length,er=1-Ye,St=1-Ke,ar=er*er*er,hr=Ye*er*er*3,ur=Ye*Ye*er*3,dr=Ye*Ye*Ye,vr=er*er*St,yr=Ye*er*St+er*Ye*St+er*er*Ke,br=Ye*Ye*St+er*Ye*Ke+Ye*er*Ke,lr=Ye*Ye*Ke,cr=er*St*St,rr=Ye*St*St+er*Ke*St+er*St*Ke,pr=Ye*Ke*St+er*Ke*Ke+Ye*St*Ke,mr=Ye*Ke*Ke,ir=St*St*St,nr=Ke*St*St+St*Ke*St+St*St*Ke,gr=Ke*Ke*St+St*Ke*Ke+Ke*St*Ke,Er=Ke*Ke*Ke;for(Xe=0;Xe<Ze;Xe+=1)Be[Xe*4]=e.round((ar*$e[Xe]+hr*Ue[Xe]+ur*Ve[Xe]+dr*He[Xe])*1e3)/1e3,Be[Xe*4+1]=e.round((vr*$e[Xe]+yr*Ue[Xe]+br*Ve[Xe]+lr*He[Xe])*1e3)/1e3,Be[Xe*4+2]=e.round((cr*$e[Xe]+rr*Ue[Xe]+pr*Ve[Xe]+mr*He[Xe])*1e3)/1e3,Be[Xe*4+3]=e.round((ir*$e[Xe]+nr*Ue[Xe]+gr*Ve[Xe]+Er*He[Xe])*1e3)/1e3;return Be}return{getSegmentsLength:Re,getNewSegment:ze,getPointInSegment:Oe,buildBezierData:Me,pointOnLine2D:t,pointOnLine3D:n}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(e,t){var n=this.offsetTime,Ee;this.propType==="multidimensional"&&(Ee=createTypedArray("float32",this.pv.length));for(var Re=t.lastIndex,Ce=Re,Te=this.keyframes.length-1,Me=!0,De,Oe,Be;Me;){if(De=this.keyframes[Ce],Oe=this.keyframes[Ce+1],Ce===Te-1&&e>=Oe.t-n){De.h&&(De=Oe),Re=0;break}if(Oe.t-n>e){Re=Ce;break}Ce<Te-1?Ce+=1:(Re=0,Me=!1)}Be=this.keyframesMetadata[Ce]||{};var ze,$e,He,Ue,Ve,We,qe=Oe.t-n,Ge=De.t-n,Ye;if(De.to){Be.bezierData||(Be.bezierData=bez.buildBezierData(De.s,Oe.s||De.e,De.to,De.ti));var Ke=Be.bezierData;if(e>=qe||e<Ge){var Xe=e>=qe?Ke.points.length-1:0;for($e=Ke.points[Xe].point.length,ze=0;ze<$e;ze+=1)Ee[ze]=Ke.points[Xe].point[ze]}else{Be.__fnct?We=Be.__fnct:(We=BezierFactory.getBezierEasing(De.o.x,De.o.y,De.i.x,De.i.y,De.n).get,Be.__fnct=We),He=We((e-Ge)/(qe-Ge));var Ze=Ke.segmentLength*He,er,St=t.lastFrame<e&&t._lastKeyframeIndex===Ce?t._lastAddedLength:0;for(Ve=t.lastFrame<e&&t._lastKeyframeIndex===Ce?t._lastPoint:0,Me=!0,Ue=Ke.points.length;Me;){if(St+=Ke.points[Ve].partialLength,Ze===0||He===0||Ve===Ke.points.length-1){for($e=Ke.points[Ve].point.length,ze=0;ze<$e;ze+=1)Ee[ze]=Ke.points[Ve].point[ze];break}else if(Ze>=St&&Ze<St+Ke.points[Ve+1].partialLength){for(er=(Ze-St)/Ke.points[Ve+1].partialLength,$e=Ke.points[Ve].point.length,ze=0;ze<$e;ze+=1)Ee[ze]=Ke.points[Ve].point[ze]+(Ke.points[Ve+1].point[ze]-Ke.points[Ve].point[ze])*er;break}Ve<Ue-1?Ve+=1:Me=!1}t._lastPoint=Ve,t._lastAddedLength=St-Ke.points[Ve].partialLength,t._lastKeyframeIndex=Ce}}else{var ar,hr,ur,dr,vr;if(Te=De.s.length,Ye=Oe.s||De.e,this.sh&&De.h!==1)if(e>=qe)Ee[0]=Ye[0],Ee[1]=Ye[1],Ee[2]=Ye[2];else if(e<=Ge)Ee[0]=De.s[0],Ee[1]=De.s[1],Ee[2]=De.s[2];else{var yr=createQuaternion(De.s),br=createQuaternion(Ye),lr=(e-Ge)/(qe-Ge);quaternionToEuler(Ee,slerp(yr,br,lr))}else for(Ce=0;Ce<Te;Ce+=1)De.h!==1&&(e>=qe?He=1:e<Ge?He=0:(De.o.x.constructor===Array?(Be.__fnct||(Be.__fnct=[]),Be.__fnct[Ce]?We=Be.__fnct[Ce]:(ar=De.o.x[Ce]===void 0?De.o.x[0]:De.o.x[Ce],hr=De.o.y[Ce]===void 0?De.o.y[0]:De.o.y[Ce],ur=De.i.x[Ce]===void 0?De.i.x[0]:De.i.x[Ce],dr=De.i.y[Ce]===void 0?De.i.y[0]:De.i.y[Ce],We=BezierFactory.getBezierEasing(ar,hr,ur,dr).get,Be.__fnct[Ce]=We)):Be.__fnct?We=Be.__fnct:(ar=De.o.x,hr=De.o.y,ur=De.i.x,dr=De.i.y,We=BezierFactory.getBezierEasing(ar,hr,ur,dr).get,De.keyframeMetadata=We),He=We((e-Ge)/(qe-Ge)))),Ye=Oe.s||De.e,vr=De.h===1?De.s[Ce]:De.s[Ce]+(Ye[Ce]-De.s[Ce])*He,this.propType==="multidimensional"?Ee[Ce]=vr:Ee=vr}return t.lastIndex=Re,Ee}function slerp(e,t,n){var Ee=[],Re=e[0],Ce=e[1],Te=e[2],Me=e[3],De=t[0],Oe=t[1],Be=t[2],ze=t[3],$e,He,Ue,Ve,We;return He=Re*De+Ce*Oe+Te*Be+Me*ze,He<0&&(He=-He,De=-De,Oe=-Oe,Be=-Be,ze=-ze),1-He>1e-6?($e=Math.acos(He),Ue=Math.sin($e),Ve=Math.sin((1-n)*$e)/Ue,We=Math.sin(n*$e)/Ue):(Ve=1-n,We=n),Ee[0]=Ve*Re+We*De,Ee[1]=Ve*Ce+We*Oe,Ee[2]=Ve*Te+We*Be,Ee[3]=Ve*Me+We*ze,Ee}function quaternionToEuler(e,t){var n=t[0],Ee=t[1],Re=t[2],Ce=t[3],Te=Math.atan2(2*Ee*Ce-2*n*Re,1-2*Ee*Ee-2*Re*Re),Me=Math.asin(2*n*Ee+2*Re*Ce),De=Math.atan2(2*n*Ce-2*Ee*Re,1-2*n*n-2*Re*Re);e[0]=Te/degToRads,e[1]=Me/degToRads,e[2]=De/degToRads}function createQuaternion(e){var t=e[0]*degToRads,n=e[1]*degToRads,Ee=e[2]*degToRads,Re=Math.cos(t/2),Ce=Math.cos(n/2),Te=Math.cos(Ee/2),Me=Math.sin(t/2),De=Math.sin(n/2),Oe=Math.sin(Ee/2),Be=Re*Ce*Te-Me*De*Oe,ze=Me*De*Te+Re*Ce*Oe,$e=Me*Ce*Te+Re*De*Oe,He=Re*De*Te-Me*Ce*Oe;return[ze,$e,He,Be]}function getValueAtCurrentTime(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=n&&e>=n||this._caching.lastFrame<t&&e<t))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var Ee=this.interpolateValue(e,this._caching);this.pv=Ee}return this._caching.lastFrame=e,this.pv}function setVValue(e){var t;if(this.propType==="unidimensional")t=e*this.mult,mathAbs(this.v-t)>1e-5&&(this.v=t,this._mdf=!0);else for(var n=0,Ee=this.v.length;n<Ee;)t=e[n]*this.mult,mathAbs(this.v[n]-t)>1e-5&&(this.v[n]=t,this._mdf=!0),n+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var e,t=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(e=0;e<t;e+=1)n=this.effectsSequence[e](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function ValueProperty(e,t,n,Ee){this.propType="unidimensional",this.mult=n||1,this.data=t,this.v=n?t.k*n:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=Ee,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(e,t,n,Ee){this.propType="multidimensional",this.mult=n||1,this.data=t,this._mdf=!1,this.elem=e,this.container=Ee,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var Re,Ce=t.k.length;for(this.v=createTypedArray("float32",Ce),this.pv=createTypedArray("float32",Ce),this.vel=createTypedArray("float32",Ce),Re=0;Re<Ce;Re+=1)this.v[Re]=t.k[Re]*this.mult,this.pv[Re]=t.k[Re];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(e,t,n,Ee){this.propType="unidimensional",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=n||1,this.elem=e,this.container=Ee,this.comp=e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(e,t,n,Ee){this.propType="multidimensional";var Re,Ce=t.k.length,Te,Me,De,Oe;for(Re=0;Re<Ce-1;Re+=1)t.k[Re].to&&t.k[Re].s&&t.k[Re+1]&&t.k[Re+1].s&&(Te=t.k[Re].s,Me=t.k[Re+1].s,De=t.k[Re].to,Oe=t.k[Re].ti,(Te.length===2&&!(Te[0]===Me[0]&&Te[1]===Me[1])&&bez.pointOnLine2D(Te[0],Te[1],Me[0],Me[1],Te[0]+De[0],Te[1]+De[1])&&bez.pointOnLine2D(Te[0],Te[1],Me[0],Me[1],Me[0]+Oe[0],Me[1]+Oe[1])||Te.length===3&&!(Te[0]===Me[0]&&Te[1]===Me[1]&&Te[2]===Me[2])&&bez.pointOnLine3D(Te[0],Te[1],Te[2],Me[0],Me[1],Me[2],Te[0]+De[0],Te[1]+De[1],Te[2]+De[2])&&bez.pointOnLine3D(Te[0],Te[1],Te[2],Me[0],Me[1],Me[2],Me[0]+Oe[0],Me[1]+Oe[1],Me[2]+Oe[2]))&&(t.k[Re].to=null,t.k[Re].ti=null),Te[0]===Me[0]&&Te[1]===Me[1]&&De[0]===0&&De[1]===0&&Oe[0]===0&&Oe[1]===0&&(Te.length===2||Te[2]===Me[2]&&De[2]===0&&Oe[2]===0)&&(t.k[Re].to=null,t.k[Re].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=n||1,this.elem=e,this.container=Ee,this.comp=e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Be=t.k[0].s.length;for(this.v=createTypedArray("float32",Be),this.pv=createTypedArray("float32",Be),Re=0;Re<Be;Re+=1)this.v[Re]=initFrame,this.pv[Re]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Be)},this.addEffect=addEffect}var PropertyFactory=function(){function e(n,Ee,Re,Ce,Te){Ee.sid&&(Ee=n.globalData.slotManager.getProp(Ee));var Me;if(!Ee.k.length)Me=new ValueProperty(n,Ee,Ce,Te);else if(typeof Ee.k[0]=="number")Me=new MultiDimensionalProperty(n,Ee,Ce,Te);else switch(Re){case 0:Me=new KeyframedValueProperty(n,Ee,Ce,Te);break;case 1:Me=new KeyframedMultidimensionalProperty(n,Ee,Ce,Te);break}return Me.effectsSequence.length&&Te.addDynamicProperty(Me),Me}var t={getProp:e};return t}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){this.dynamicProperties.indexOf(t)===-1&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var t,n=this.dynamicProperties.length;for(t=0;t<n;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function e(){return createTypedArray("float32",2)}return poolFactory(8,e)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var n=0;n<t;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,n,Ee,Re){var Ce;switch(this._length=Math.max(this._length,Ee+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":Ce=this.v;break;case"i":Ce=this.i;break;case"o":Ce=this.o;break;default:Ce=[];break}(!Ce[Ee]||Ce[Ee]&&!Re)&&(Ce[Ee]=pointPool.newElement()),Ce[Ee][0]=e,Ce[Ee][1]=t},ShapePath.prototype.setTripleAt=function(e,t,n,Ee,Re,Ce,Te,Me){this.setXYAt(e,t,"v",Te,Me),this.setXYAt(n,Ee,"o",Te,Me),this.setXYAt(Re,Ce,"i",Te,Me)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,n=this.o,Ee=this.i,Re=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],Ee[0][0],Ee[0][1],n[0][0],n[0][1],0,!1),Re=1);var Ce=this._length-1,Te=this._length,Me;for(Me=Re;Me<Te;Me+=1)e.setTripleAt(t[Ce][0],t[Ce][1],Ee[Ce][0],Ee[Ce][1],n[Ce][0],n[Ce][1],Me,!1),Ce-=1;return e},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function e(){return new ShapePath}function t(Re){var Ce=Re._length,Te;for(Te=0;Te<Ce;Te+=1)pointPool.release(Re.v[Te]),pointPool.release(Re.i[Te]),pointPool.release(Re.o[Te]),Re.v[Te]=null,Re.i[Te]=null,Re.o[Te]=null;Re._length=0,Re.c=!1}function n(Re){var Ce=Ee.newElement(),Te,Me=Re._length===void 0?Re.v.length:Re._length;for(Ce.setLength(Me),Ce.c=Re.c,Te=0;Te<Me;Te+=1)Ce.setTripleAt(Re.v[Te][0],Re.v[Te][1],Re.o[Te][0],Re.o[Te][1],Re.i[Te][0],Re.i[Te][1],Te);return Ce}var Ee=poolFactory(4,e,t);return Ee.clone=n,Ee}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0};var shapeCollectionPool=function(){var e={newShapeCollection:Re,release:Ce},t=0,n=4,Ee=createSizedArray(n);function Re(){var Te;return t?(t-=1,Te=Ee[t]):Te=new ShapeCollection,Te}function Ce(Te){var Me,De=Te._length;for(Me=0;Me<De;Me+=1)shapePool.release(Te.shapes[Me]);Te._length=0,t===n&&(Ee=pooling.double(Ee),n*=2),Ee[t]=Te,t+=1}return e}(),ShapePropertyFactory=function(){var e=-999999;function t(qe,Ge,Ye){var Ke=Ye.lastIndex,Xe,Ze,er,St,ar,hr,ur,dr,vr,yr=this.keyframes;if(qe<yr[0].t-this.offsetTime)Xe=yr[0].s[0],er=!0,Ke=0;else if(qe>=yr[yr.length-1].t-this.offsetTime)Xe=yr[yr.length-1].s?yr[yr.length-1].s[0]:yr[yr.length-2].e[0],er=!0;else{for(var br=Ke,lr=yr.length-1,cr=!0,rr,pr,mr;cr&&(rr=yr[br],pr=yr[br+1],!(pr.t-this.offsetTime>qe));)br<lr-1?br+=1:cr=!1;if(mr=this.keyframesMetadata[br]||{},er=rr.h===1,Ke=br,!er){if(qe>=pr.t-this.offsetTime)dr=1;else if(qe<rr.t-this.offsetTime)dr=0;else{var ir;mr.__fnct?ir=mr.__fnct:(ir=BezierFactory.getBezierEasing(rr.o.x,rr.o.y,rr.i.x,rr.i.y).get,mr.__fnct=ir),dr=ir((qe-(rr.t-this.offsetTime))/(pr.t-this.offsetTime-(rr.t-this.offsetTime)))}Ze=pr.s?pr.s[0]:rr.e[0]}Xe=rr.s[0]}for(hr=Ge._length,ur=Xe.i[0].length,Ye.lastIndex=Ke,St=0;St<hr;St+=1)for(ar=0;ar<ur;ar+=1)vr=er?Xe.i[St][ar]:Xe.i[St][ar]+(Ze.i[St][ar]-Xe.i[St][ar])*dr,Ge.i[St][ar]=vr,vr=er?Xe.o[St][ar]:Xe.o[St][ar]+(Ze.o[St][ar]-Xe.o[St][ar])*dr,Ge.o[St][ar]=vr,vr=er?Xe.v[St][ar]:Xe.v[St][ar]+(Ze.v[St][ar]-Xe.v[St][ar])*dr,Ge.v[St][ar]=vr}function n(){var qe=this.comp.renderedFrame-this.offsetTime,Ge=this.keyframes[0].t-this.offsetTime,Ye=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Ke=this._caching.lastFrame;return Ke!==e&&(Ke<Ge&&qe<Ge||Ke>Ye&&qe>Ye)||(this._caching.lastIndex=Ke<qe?this._caching.lastIndex:0,this.interpolateShape(qe,this.pv,this._caching)),this._caching.lastFrame=qe,this.pv}function Ee(){this.paths=this.localShapeCollection}function Re(qe,Ge){if(qe._length!==Ge._length||qe.c!==Ge.c)return!1;var Ye,Ke=qe._length;for(Ye=0;Ye<Ke;Ye+=1)if(qe.v[Ye][0]!==Ge.v[Ye][0]||qe.v[Ye][1]!==Ge.v[Ye][1]||qe.o[Ye][0]!==Ge.o[Ye][0]||qe.o[Ye][1]!==Ge.o[Ye][1]||qe.i[Ye][0]!==Ge.i[Ye][0]||qe.i[Ye][1]!==Ge.i[Ye][1])return!1;return!0}function Ce(qe){Re(this.v,qe)||(this.v=shapePool.clone(qe),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function Te(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var qe;this.kf?qe=this.pv:this.data.ks?qe=this.data.ks.k:qe=this.data.pt.k;var Ge,Ye=this.effectsSequence.length;for(Ge=0;Ge<Ye;Ge+=1)qe=this.effectsSequence[Ge](qe);this.setVValue(qe),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function Me(qe,Ge,Ye){this.propType="shape",this.comp=qe.comp,this.container=qe,this.elem=qe,this.data=Ge,this.k=!1,this.kf=!1,this._mdf=!1;var Ke=Ye===3?Ge.pt.k:Ge.ks.k;this.v=shapePool.clone(Ke),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=Ee,this.effectsSequence=[]}function De(qe){this.effectsSequence.push(qe),this.container.addDynamicProperty(this)}Me.prototype.interpolateShape=t,Me.prototype.getValue=Te,Me.prototype.setVValue=Ce,Me.prototype.addEffect=De;function Oe(qe,Ge,Ye){this.propType="shape",this.comp=qe.comp,this.elem=qe,this.container=qe,this.offsetTime=qe.data.st,this.keyframes=Ye===3?Ge.pt.k:Ge.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Ke=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Ke),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=Ee,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[n.bind(this)]}Oe.prototype.getValue=Te,Oe.prototype.interpolateShape=t,Oe.prototype.setVValue=Ce,Oe.prototype.addEffect=De;var Be=function(){var qe=roundCorner;function Ge(Ye,Ke){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Ke.d,this.elem=Ye,this.comp=Ye.comp,this.frameId=-1,this.initDynamicPropertyContainer(Ye),this.p=PropertyFactory.getProp(Ye,Ke.p,1,0,this),this.s=PropertyFactory.getProp(Ye,Ke.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Ge.prototype={reset:Ee,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Ke=this.p.v[0],Xe=this.p.v[1],Ze=this.s.v[0]/2,er=this.s.v[1]/2,St=this.d!==3,ar=this.v;ar.v[0][0]=Ke,ar.v[0][1]=Xe-er,ar.v[1][0]=St?Ke+Ze:Ke-Ze,ar.v[1][1]=Xe,ar.v[2][0]=Ke,ar.v[2][1]=Xe+er,ar.v[3][0]=St?Ke-Ze:Ke+Ze,ar.v[3][1]=Xe,ar.i[0][0]=St?Ke-Ze*qe:Ke+Ze*qe,ar.i[0][1]=Xe-er,ar.i[1][0]=St?Ke+Ze:Ke-Ze,ar.i[1][1]=Xe-er*qe,ar.i[2][0]=St?Ke+Ze*qe:Ke-Ze*qe,ar.i[2][1]=Xe+er,ar.i[3][0]=St?Ke-Ze:Ke+Ze,ar.i[3][1]=Xe+er*qe,ar.o[0][0]=St?Ke+Ze*qe:Ke-Ze*qe,ar.o[0][1]=Xe-er,ar.o[1][0]=St?Ke+Ze:Ke-Ze,ar.o[1][1]=Xe+er*qe,ar.o[2][0]=St?Ke-Ze*qe:Ke+Ze*qe,ar.o[2][1]=Xe+er,ar.o[3][0]=St?Ke-Ze:Ke+Ze,ar.o[3][1]=Xe-er*qe}},extendPrototype([DynamicPropertyContainer],Ge),Ge}(),ze=function(){function qe(Ge,Ye){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Ge,this.comp=Ge.comp,this.data=Ye,this.frameId=-1,this.d=Ye.d,this.initDynamicPropertyContainer(Ge),Ye.sy===1?(this.ir=PropertyFactory.getProp(Ge,Ye.ir,0,0,this),this.is=PropertyFactory.getProp(Ge,Ye.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Ge,Ye.pt,0,0,this),this.p=PropertyFactory.getProp(Ge,Ye.p,1,0,this),this.r=PropertyFactory.getProp(Ge,Ye.r,0,degToRads,this),this.or=PropertyFactory.getProp(Ge,Ye.or,0,0,this),this.os=PropertyFactory.getProp(Ge,Ye.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return qe.prototype={reset:Ee,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Ye=Math.floor(this.pt.v)*2,Ke=Math.PI*2/Ye,Xe=!0,Ze=this.or.v,er=this.ir.v,St=this.os.v,ar=this.is.v,hr=2*Math.PI*Ze/(Ye*2),ur=2*Math.PI*er/(Ye*2),dr,vr,yr,br,lr=-Math.PI/2;lr+=this.r.v;var cr=this.data.d===3?-1:1;for(this.v._length=0,dr=0;dr<Ye;dr+=1){vr=Xe?Ze:er,yr=Xe?St:ar,br=Xe?hr:ur;var rr=vr*Math.cos(lr),pr=vr*Math.sin(lr),mr=rr===0&&pr===0?0:pr/Math.sqrt(rr*rr+pr*pr),ir=rr===0&&pr===0?0:-rr/Math.sqrt(rr*rr+pr*pr);rr+=+this.p.v[0],pr+=+this.p.v[1],this.v.setTripleAt(rr,pr,rr-mr*br*yr*cr,pr-ir*br*yr*cr,rr+mr*br*yr*cr,pr+ir*br*yr*cr,dr,!0),Xe=!Xe,lr+=Ke*cr}},convertPolygonToPath:function(){var Ye=Math.floor(this.pt.v),Ke=Math.PI*2/Ye,Xe=this.or.v,Ze=this.os.v,er=2*Math.PI*Xe/(Ye*4),St,ar=-Math.PI*.5,hr=this.data.d===3?-1:1;for(ar+=this.r.v,this.v._length=0,St=0;St<Ye;St+=1){var ur=Xe*Math.cos(ar),dr=Xe*Math.sin(ar),vr=ur===0&&dr===0?0:dr/Math.sqrt(ur*ur+dr*dr),yr=ur===0&&dr===0?0:-ur/Math.sqrt(ur*ur+dr*dr);ur+=+this.p.v[0],dr+=+this.p.v[1],this.v.setTripleAt(ur,dr,ur-vr*er*Ze*hr,dr-yr*er*Ze*hr,ur+vr*er*Ze*hr,dr+yr*er*Ze*hr,St,!0),ar+=Ke*hr}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],qe),qe}(),$e=function(){function qe(Ge,Ye){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Ge,this.comp=Ge.comp,this.frameId=-1,this.d=Ye.d,this.initDynamicPropertyContainer(Ge),this.p=PropertyFactory.getProp(Ge,Ye.p,1,0,this),this.s=PropertyFactory.getProp(Ge,Ye.s,1,0,this),this.r=PropertyFactory.getProp(Ge,Ye.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return qe.prototype={convertRectToPath:function(){var Ye=this.p.v[0],Ke=this.p.v[1],Xe=this.s.v[0]/2,Ze=this.s.v[1]/2,er=bmMin(Xe,Ze,this.r.v),St=er*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Ye+Xe,Ke-Ze+er,Ye+Xe,Ke-Ze+er,Ye+Xe,Ke-Ze+St,0,!0),this.v.setTripleAt(Ye+Xe,Ke+Ze-er,Ye+Xe,Ke+Ze-St,Ye+Xe,Ke+Ze-er,1,!0),er!==0?(this.v.setTripleAt(Ye+Xe-er,Ke+Ze,Ye+Xe-er,Ke+Ze,Ye+Xe-St,Ke+Ze,2,!0),this.v.setTripleAt(Ye-Xe+er,Ke+Ze,Ye-Xe+St,Ke+Ze,Ye-Xe+er,Ke+Ze,3,!0),this.v.setTripleAt(Ye-Xe,Ke+Ze-er,Ye-Xe,Ke+Ze-er,Ye-Xe,Ke+Ze-St,4,!0),this.v.setTripleAt(Ye-Xe,Ke-Ze+er,Ye-Xe,Ke-Ze+St,Ye-Xe,Ke-Ze+er,5,!0),this.v.setTripleAt(Ye-Xe+er,Ke-Ze,Ye-Xe+er,Ke-Ze,Ye-Xe+St,Ke-Ze,6,!0),this.v.setTripleAt(Ye+Xe-er,Ke-Ze,Ye+Xe-St,Ke-Ze,Ye+Xe-er,Ke-Ze,7,!0)):(this.v.setTripleAt(Ye-Xe,Ke+Ze,Ye-Xe+St,Ke+Ze,Ye-Xe,Ke+Ze,2),this.v.setTripleAt(Ye-Xe,Ke-Ze,Ye-Xe,Ke-Ze+St,Ye-Xe,Ke-Ze,3))):(this.v.setTripleAt(Ye+Xe,Ke-Ze+er,Ye+Xe,Ke-Ze+St,Ye+Xe,Ke-Ze+er,0,!0),er!==0?(this.v.setTripleAt(Ye+Xe-er,Ke-Ze,Ye+Xe-er,Ke-Ze,Ye+Xe-St,Ke-Ze,1,!0),this.v.setTripleAt(Ye-Xe+er,Ke-Ze,Ye-Xe+St,Ke-Ze,Ye-Xe+er,Ke-Ze,2,!0),this.v.setTripleAt(Ye-Xe,Ke-Ze+er,Ye-Xe,Ke-Ze+er,Ye-Xe,Ke-Ze+St,3,!0),this.v.setTripleAt(Ye-Xe,Ke+Ze-er,Ye-Xe,Ke+Ze-St,Ye-Xe,Ke+Ze-er,4,!0),this.v.setTripleAt(Ye-Xe+er,Ke+Ze,Ye-Xe+er,Ke+Ze,Ye-Xe+St,Ke+Ze,5,!0),this.v.setTripleAt(Ye+Xe-er,Ke+Ze,Ye+Xe-St,Ke+Ze,Ye+Xe-er,Ke+Ze,6,!0),this.v.setTripleAt(Ye+Xe,Ke+Ze-er,Ye+Xe,Ke+Ze-er,Ye+Xe,Ke+Ze-St,7,!0)):(this.v.setTripleAt(Ye-Xe,Ke-Ze,Ye-Xe+St,Ke-Ze,Ye-Xe,Ke-Ze,1,!0),this.v.setTripleAt(Ye-Xe,Ke+Ze,Ye-Xe,Ke+Ze-St,Ye-Xe,Ke+Ze,2,!0),this.v.setTripleAt(Ye+Xe,Ke+Ze,Ye+Xe-St,Ke+Ze,Ye+Xe,Ke+Ze,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:Ee},extendPrototype([DynamicPropertyContainer],qe),qe}();function He(qe,Ge,Ye){var Ke;if(Ye===3||Ye===4){var Xe=Ye===3?Ge.pt:Ge.ks,Ze=Xe.k;Ze.length?Ke=new Oe(qe,Ge,Ye):Ke=new Me(qe,Ge,Ye)}else Ye===5?Ke=new $e(qe,Ge):Ye===6?Ke=new Be(qe,Ge):Ye===7&&(Ke=new ze(qe,Ge));return Ke.k&&qe.addDynamicProperty(Ke),Ke}function Ue(){return Me}function Ve(){return Oe}var We={};return We.getShapeProp=He,We.getConstructorFunction=Ue,We.getKeyframedConstructorFunction=Ve,We}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var e=Math.cos,t=Math.sin,n=Math.tan,Ee=Math.round;function Re(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function Ce(rr){if(rr===0)return this;var pr=e(rr),mr=t(rr);return this._t(pr,-mr,0,0,mr,pr,0,0,0,0,1,0,0,0,0,1)}function Te(rr){if(rr===0)return this;var pr=e(rr),mr=t(rr);return this._t(1,0,0,0,0,pr,-mr,0,0,mr,pr,0,0,0,0,1)}function Me(rr){if(rr===0)return this;var pr=e(rr),mr=t(rr);return this._t(pr,0,mr,0,0,1,0,0,-mr,0,pr,0,0,0,0,1)}function De(rr){if(rr===0)return this;var pr=e(rr),mr=t(rr);return this._t(pr,-mr,0,0,mr,pr,0,0,0,0,1,0,0,0,0,1)}function Oe(rr,pr){return this._t(1,pr,rr,1,0,0)}function Be(rr,pr){return this.shear(n(rr),n(pr))}function ze(rr,pr){var mr=e(pr),ir=t(pr);return this._t(mr,ir,0,0,-ir,mr,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(rr),1,0,0,0,0,1,0,0,0,0,1)._t(mr,-ir,0,0,ir,mr,0,0,0,0,1,0,0,0,0,1)}function $e(rr,pr,mr){return!mr&&mr!==0&&(mr=1),rr===1&&pr===1&&mr===1?this:this._t(rr,0,0,0,0,pr,0,0,0,0,mr,0,0,0,0,1)}function He(rr,pr,mr,ir,nr,gr,Er,Cr,Nr,Mr,Fr,$r,Wr,Zr,nn,an){return this.props[0]=rr,this.props[1]=pr,this.props[2]=mr,this.props[3]=ir,this.props[4]=nr,this.props[5]=gr,this.props[6]=Er,this.props[7]=Cr,this.props[8]=Nr,this.props[9]=Mr,this.props[10]=Fr,this.props[11]=$r,this.props[12]=Wr,this.props[13]=Zr,this.props[14]=nn,this.props[15]=an,this}function Ue(rr,pr,mr){return mr=mr||0,rr!==0||pr!==0||mr!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,rr,pr,mr,1):this}function Ve(rr,pr,mr,ir,nr,gr,Er,Cr,Nr,Mr,Fr,$r,Wr,Zr,nn,an){var Yr=this.props;if(rr===1&&pr===0&&mr===0&&ir===0&&nr===0&&gr===1&&Er===0&&Cr===0&&Nr===0&&Mr===0&&Fr===1&&$r===0)return Yr[12]=Yr[12]*rr+Yr[15]*Wr,Yr[13]=Yr[13]*gr+Yr[15]*Zr,Yr[14]=Yr[14]*Fr+Yr[15]*nn,Yr[15]*=an,this._identityCalculated=!1,this;var Rr=Yr[0],Xr=Yr[1],mn=Yr[2],En=Yr[3],rn=Yr[4],_r=Yr[5],Lr=Yr[6],Or=Yr[7],tn=Yr[8],sn=Yr[9],en=Yr[10],fn=Yr[11],Sn=Yr[12],Rn=Yr[13],jn=Yr[14],On=Yr[15];return Yr[0]=Rr*rr+Xr*nr+mn*Nr+En*Wr,Yr[1]=Rr*pr+Xr*gr+mn*Mr+En*Zr,Yr[2]=Rr*mr+Xr*Er+mn*Fr+En*nn,Yr[3]=Rr*ir+Xr*Cr+mn*$r+En*an,Yr[4]=rn*rr+_r*nr+Lr*Nr+Or*Wr,Yr[5]=rn*pr+_r*gr+Lr*Mr+Or*Zr,Yr[6]=rn*mr+_r*Er+Lr*Fr+Or*nn,Yr[7]=rn*ir+_r*Cr+Lr*$r+Or*an,Yr[8]=tn*rr+sn*nr+en*Nr+fn*Wr,Yr[9]=tn*pr+sn*gr+en*Mr+fn*Zr,Yr[10]=tn*mr+sn*Er+en*Fr+fn*nn,Yr[11]=tn*ir+sn*Cr+en*$r+fn*an,Yr[12]=Sn*rr+Rn*nr+jn*Nr+On*Wr,Yr[13]=Sn*pr+Rn*gr+jn*Mr+On*Zr,Yr[14]=Sn*mr+Rn*Er+jn*Fr+On*nn,Yr[15]=Sn*ir+Rn*Cr+jn*$r+On*an,this._identityCalculated=!1,this}function We(rr){var pr=rr.props;return this.transform(pr[0],pr[1],pr[2],pr[3],pr[4],pr[5],pr[6],pr[7],pr[8],pr[9],pr[10],pr[11],pr[12],pr[13],pr[14],pr[15])}function qe(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Ge(rr){for(var pr=0;pr<16;){if(rr.props[pr]!==this.props[pr])return!1;pr+=1}return!0}function Ye(rr){var pr;for(pr=0;pr<16;pr+=1)rr.props[pr]=this.props[pr];return rr}function Ke(rr){var pr;for(pr=0;pr<16;pr+=1)this.props[pr]=rr[pr]}function Xe(rr,pr,mr){return{x:rr*this.props[0]+pr*this.props[4]+mr*this.props[8]+this.props[12],y:rr*this.props[1]+pr*this.props[5]+mr*this.props[9]+this.props[13],z:rr*this.props[2]+pr*this.props[6]+mr*this.props[10]+this.props[14]}}function Ze(rr,pr,mr){return rr*this.props[0]+pr*this.props[4]+mr*this.props[8]+this.props[12]}function er(rr,pr,mr){return rr*this.props[1]+pr*this.props[5]+mr*this.props[9]+this.props[13]}function St(rr,pr,mr){return rr*this.props[2]+pr*this.props[6]+mr*this.props[10]+this.props[14]}function ar(){var rr=this.props[0]*this.props[5]-this.props[1]*this.props[4],pr=this.props[5]/rr,mr=-this.props[1]/rr,ir=-this.props[4]/rr,nr=this.props[0]/rr,gr=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/rr,Er=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/rr,Cr=new Matrix;return Cr.props[0]=pr,Cr.props[1]=mr,Cr.props[4]=ir,Cr.props[5]=nr,Cr.props[12]=gr,Cr.props[13]=Er,Cr}function hr(rr){var pr=this.getInverseMatrix();return pr.applyToPointArray(rr[0],rr[1],rr[2]||0)}function ur(rr){var pr,mr=rr.length,ir=[];for(pr=0;pr<mr;pr+=1)ir[pr]=hr(rr[pr]);return ir}function dr(rr,pr,mr){var ir=createTypedArray("float32",6);if(this.isIdentity())ir[0]=rr[0],ir[1]=rr[1],ir[2]=pr[0],ir[3]=pr[1],ir[4]=mr[0],ir[5]=mr[1];else{var nr=this.props[0],gr=this.props[1],Er=this.props[4],Cr=this.props[5],Nr=this.props[12],Mr=this.props[13];ir[0]=rr[0]*nr+rr[1]*Er+Nr,ir[1]=rr[0]*gr+rr[1]*Cr+Mr,ir[2]=pr[0]*nr+pr[1]*Er+Nr,ir[3]=pr[0]*gr+pr[1]*Cr+Mr,ir[4]=mr[0]*nr+mr[1]*Er+Nr,ir[5]=mr[0]*gr+mr[1]*Cr+Mr}return ir}function vr(rr,pr,mr){var ir;return this.isIdentity()?ir=[rr,pr,mr]:ir=[rr*this.props[0]+pr*this.props[4]+mr*this.props[8]+this.props[12],rr*this.props[1]+pr*this.props[5]+mr*this.props[9]+this.props[13],rr*this.props[2]+pr*this.props[6]+mr*this.props[10]+this.props[14]],ir}function yr(rr,pr){if(this.isIdentity())return rr+","+pr;var mr=this.props;return Math.round((rr*mr[0]+pr*mr[4]+mr[12])*100)/100+","+Math.round((rr*mr[1]+pr*mr[5]+mr[13])*100)/100}function br(){for(var rr=0,pr=this.props,mr="matrix3d(",ir=1e4;rr<16;)mr+=Ee(pr[rr]*ir)/ir,mr+=rr===15?")":",",rr+=1;return mr}function lr(rr){var pr=1e4;return rr<1e-6&&rr>0||rr>-1e-6&&rr<0?Ee(rr*pr)/pr:rr}function cr(){var rr=this.props,pr=lr(rr[0]),mr=lr(rr[1]),ir=lr(rr[4]),nr=lr(rr[5]),gr=lr(rr[12]),Er=lr(rr[13]);return"matrix("+pr+","+mr+","+ir+","+nr+","+gr+","+Er+")"}return function(){this.reset=Re,this.rotate=Ce,this.rotateX=Te,this.rotateY=Me,this.rotateZ=De,this.skew=Be,this.skewFromAxis=ze,this.shear=Oe,this.scale=$e,this.setTransform=He,this.translate=Ue,this.transform=Ve,this.multiply=We,this.applyToPoint=Xe,this.applyToX=Ze,this.applyToY=er,this.applyToZ=St,this.applyToPointArray=vr,this.applyToTriplePoints=dr,this.applyToPointStringified=yr,this.toCSS=br,this.to2dCSS=cr,this.clone=Ye,this.cloneFromProps=Ke,this.equals=Ge,this.inversePoints=ur,this.inversePoint=hr,this.getInverseMatrix=ar,this._t=this.transform,this.isIdentity=qe,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(e){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(e)}var lottie={};function setLocation(e){setLocationHref(e)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(e){setSubframeEnabled(e)}function setPrefix(e){setIdPrefix(e)}function loadAnimation(e){return animationManager.loadAnimation(e)}function setQuality(e){if(typeof e=="string")switch(e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(e)&&e>1&&setDefaultCurveSegments(e)}function inBrowser(){return typeof navigator<"u"}function installPlugin(e,t){e==="expressions"&&setExpressionsPlugin(t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),n=0;n<t.length;n+=1){var Ee=t[n].split("=");if(decodeURIComponent(Ee[0])==e)return decodeURIComponent(Ee[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports$1)!=="object"&&(window.bodymovin=lottie)}catch(e){}var ShapeModifiers=function(){var e={},t={};e.registerModifier=n,e.getModifier=Ee;function n(Re,Ce){t[Re]||(t[Re]=Ce)}function Ee(Re,Ce,Te){return new t[Re](Ce,Te)}return e}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var t={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,n,Ee,Re){var Ce=[];t<=1?Ce.push({s:e,e:t}):e>=1?Ce.push({s:e-1,e:t-1}):(Ce.push({s:e,e:1}),Ce.push({s:0,e:t-1}));var Te=[],Me,De=Ce.length,Oe;for(Me=0;Me<De;Me+=1)if(Oe=Ce[Me],!(Oe.e*Re<Ee||Oe.s*Re>Ee+n)){var Be,ze;Oe.s*Re<=Ee?Be=0:Be=(Oe.s*Re-Ee)/n,Oe.e*Re>=Ee+n?ze=1:ze=(Oe.e*Re-Ee)/n,Te.push([Be,ze])}return Te.length||Te.push([0,0]),Te},TrimModifier.prototype.releasePathsData=function(e){var t,n=e.length;for(t=0;t<n;t+=1)segmentsLengthPool.release(e[t]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,n;if(this._mdf||e){var Ee=this.o.v%360/360;if(Ee<0&&(Ee+=1),this.s.v>1?t=1+Ee:this.s.v<0?t=0+Ee:t=this.s.v+Ee,this.e.v>1?n=1+Ee:this.e.v<0?n=0+Ee:n=this.e.v+Ee,t>n){var Re=t;t=n,n=Re}t=Math.round(t*1e4)*1e-4,n=Math.round(n*1e4)*1e-4,this.sValue=t,this.eValue=n}else t=this.sValue,n=this.eValue;var Ce,Te,Me=this.shapes.length,De,Oe,Be,ze,$e,He=0;if(n===t)for(Te=0;Te<Me;Te+=1)this.shapes[Te].localShapeCollection.releaseShapes(),this.shapes[Te].shape._mdf=!0,this.shapes[Te].shape.paths=this.shapes[Te].localShapeCollection,this._mdf&&(this.shapes[Te].pathsData.length=0);else if(n===1&&t===0||n===0&&t===1){if(this._mdf)for(Te=0;Te<Me;Te+=1)this.shapes[Te].pathsData.length=0,this.shapes[Te].shape._mdf=!0}else{var Ue=[],Ve,We;for(Te=0;Te<Me;Te+=1)if(Ve=this.shapes[Te],!Ve.shape._mdf&&!this._mdf&&!e&&this.m!==2)Ve.shape.paths=Ve.localShapeCollection;else{if(Ce=Ve.shape.paths,Oe=Ce._length,$e=0,!Ve.shape._mdf&&Ve.pathsData.length)$e=Ve.totalShapeLength;else{for(Be=this.releasePathsData(Ve.pathsData),De=0;De<Oe;De+=1)ze=bez.getSegmentsLength(Ce.shapes[De]),Be.push(ze),$e+=ze.totalLength;Ve.totalShapeLength=$e,Ve.pathsData=Be}He+=$e,Ve.shape._mdf=!0}var qe=t,Ge=n,Ye=0,Ke;for(Te=Me-1;Te>=0;Te-=1)if(Ve=this.shapes[Te],Ve.shape._mdf){for(We=Ve.localShapeCollection,We.releaseShapes(),this.m===2&&Me>1?(Ke=this.calculateShapeEdges(t,n,Ve.totalShapeLength,Ye,He),Ye+=Ve.totalShapeLength):Ke=[[qe,Ge]],Oe=Ke.length,De=0;De<Oe;De+=1){qe=Ke[De][0],Ge=Ke[De][1],Ue.length=0,Ge<=1?Ue.push({s:Ve.totalShapeLength*qe,e:Ve.totalShapeLength*Ge}):qe>=1?Ue.push({s:Ve.totalShapeLength*(qe-1),e:Ve.totalShapeLength*(Ge-1)}):(Ue.push({s:Ve.totalShapeLength*qe,e:Ve.totalShapeLength}),Ue.push({s:0,e:Ve.totalShapeLength*(Ge-1)}));var Xe=this.addShapes(Ve,Ue[0]);if(Ue[0].s!==Ue[0].e){if(Ue.length>1){var Ze=Ve.shape.paths.shapes[Ve.shape.paths._length-1];if(Ze.c){var er=Xe.pop();this.addPaths(Xe,We),Xe=this.addShapes(Ve,Ue[1],er)}else this.addPaths(Xe,We),Xe=this.addShapes(Ve,Ue[1])}this.addPaths(Xe,We)}}Ve.shape.paths=We}}},TrimModifier.prototype.addPaths=function(e,t){var n,Ee=e.length;for(n=0;n<Ee;n+=1)t.addShape(e[n])},TrimModifier.prototype.addSegment=function(e,t,n,Ee,Re,Ce,Te){Re.setXYAt(t[0],t[1],"o",Ce),Re.setXYAt(n[0],n[1],"i",Ce+1),Te&&Re.setXYAt(e[0],e[1],"v",Ce),Re.setXYAt(Ee[0],Ee[1],"v",Ce+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,n,Ee){t.setXYAt(e[1],e[5],"o",n),t.setXYAt(e[2],e[6],"i",n+1),Ee&&t.setXYAt(e[0],e[4],"v",n),t.setXYAt(e[3],e[7],"v",n+1)},TrimModifier.prototype.addShapes=function(e,t,n){var Ee=e.pathsData,Re=e.shape.paths.shapes,Ce,Te=e.shape.paths._length,Me,De,Oe=0,Be,ze,$e,He,Ue=[],Ve,We=!0;for(n?(ze=n._length,Ve=n._length):(n=shapePool.newElement(),ze=0,Ve=0),Ue.push(n),Ce=0;Ce<Te;Ce+=1){for($e=Ee[Ce].lengths,n.c=Re[Ce].c,De=Re[Ce].c?$e.length:$e.length+1,Me=1;Me<De;Me+=1)if(Be=$e[Me-1],Oe+Be.addedLength<t.s)Oe+=Be.addedLength,n.c=!1;else if(Oe>t.e){n.c=!1;break}else t.s<=Oe&&t.e>=Oe+Be.addedLength?(this.addSegment(Re[Ce].v[Me-1],Re[Ce].o[Me-1],Re[Ce].i[Me],Re[Ce].v[Me],n,ze,We),We=!1):(He=bez.getNewSegment(Re[Ce].v[Me-1],Re[Ce].v[Me],Re[Ce].o[Me-1],Re[Ce].i[Me],(t.s-Oe)/Be.addedLength,(t.e-Oe)/Be.addedLength,$e[Me-1]),this.addSegmentFromArray(He,n,ze,We),We=!1,n.c=!1),Oe+=Be.addedLength,ze+=1;if(Re[Ce].c&&$e.length){if(Be=$e[Me-1],Oe<=t.e){var qe=$e[Me-1].addedLength;t.s<=Oe&&t.e>=Oe+qe?(this.addSegment(Re[Ce].v[Me-1],Re[Ce].o[Me-1],Re[Ce].i[0],Re[Ce].v[0],n,ze,We),We=!1):(He=bez.getNewSegment(Re[Ce].v[Me-1],Re[Ce].v[0],Re[Ce].o[Me-1],Re[Ce].i[0],(t.s-Oe)/qe,(t.e-Oe)/qe,$e[Me-1]),this.addSegmentFromArray(He,n,ze,We),We=!1,n.c=!1)}else n.c=!1;Oe+=Be.addedLength,ze+=1}if(n._length&&(n.setXYAt(n.v[Ve][0],n.v[Ve][1],"i",Ve),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),Oe>t.e)break;Ce<Te-1&&(n=shapePool.newElement(),We=!0,Ue.push(n),ze=0)}return Ue};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,t){var n=t/100,Ee=[0,0],Re=e._length,Ce=0;for(Ce=0;Ce<Re;Ce+=1)Ee[0]+=e.v[Ce][0],Ee[1]+=e.v[Ce][1];Ee[0]/=Re,Ee[1]/=Re;var Te=shapePool.newElement();Te.c=e.c;var Me,De,Oe,Be,ze,$e;for(Ce=0;Ce<Re;Ce+=1)Me=e.v[Ce][0]+(Ee[0]-e.v[Ce][0])*n,De=e.v[Ce][1]+(Ee[1]-e.v[Ce][1])*n,Oe=e.o[Ce][0]+(Ee[0]-e.o[Ce][0])*-n,Be=e.o[Ce][1]+(Ee[1]-e.o[Ce][1])*-n,ze=e.i[Ce][0]+(Ee[0]-e.i[Ce][0])*-n,$e=e.i[Ce][1]+(Ee[1]-e.i[Ce][1])*-n,Te.setTripleAt(Me,De,Oe,Be,ze,$e,Ce);return Te},PuckerAndBloatModifier.prototype.processShapes=function(e){var t,n,Ee=this.shapes.length,Re,Ce,Te=this.amount.v;if(Te!==0){var Me,De;for(n=0;n<Ee;n+=1){if(Me=this.shapes[n],De=Me.localShapeCollection,!(!Me.shape._mdf&&!this._mdf&&!e))for(De.releaseShapes(),Me.shape._mdf=!0,t=Me.shape.paths.shapes,Ce=Me.shape.paths._length,Re=0;Re<Ce;Re+=1)De.addShape(this.processPath(t[Re],Te));Me.shape.paths=Me.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var e=[0,0];function t(De){var Oe=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||Oe,this.a&&De.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&De.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&De.skewFromAxis(-this.sk.v,this.sa.v),this.r?De.rotate(-this.r.v):De.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?De.translate(this.px.v,this.py.v,-this.pz.v):De.translate(this.px.v,this.py.v,0):De.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function n(De){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||De){var Oe;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Be,ze;if(Oe=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Be=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/Oe,0),ze=this.p.getValueAtTime(this.p.keyframes[0].t/Oe,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Be=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/Oe,0),ze=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/Oe,0)):(Be=this.p.pv,ze=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/Oe,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Be=[],ze=[];var $e=this.px,He=this.py;$e._caching.lastFrame+$e.offsetTime<=$e.keyframes[0].t?(Be[0]=$e.getValueAtTime(($e.keyframes[0].t+.01)/Oe,0),Be[1]=He.getValueAtTime((He.keyframes[0].t+.01)/Oe,0),ze[0]=$e.getValueAtTime($e.keyframes[0].t/Oe,0),ze[1]=He.getValueAtTime(He.keyframes[0].t/Oe,0)):$e._caching.lastFrame+$e.offsetTime>=$e.keyframes[$e.keyframes.length-1].t?(Be[0]=$e.getValueAtTime($e.keyframes[$e.keyframes.length-1].t/Oe,0),Be[1]=He.getValueAtTime(He.keyframes[He.keyframes.length-1].t/Oe,0),ze[0]=$e.getValueAtTime(($e.keyframes[$e.keyframes.length-1].t-.01)/Oe,0),ze[1]=He.getValueAtTime((He.keyframes[He.keyframes.length-1].t-.01)/Oe,0)):(Be=[$e.pv,He.pv],ze[0]=$e.getValueAtTime(($e._caching.lastFrame+$e.offsetTime-.01)/Oe,$e.offsetTime),ze[1]=He.getValueAtTime((He._caching.lastFrame+He.offsetTime-.01)/Oe,He.offsetTime))}else ze=e,Be=ze;this.v.rotate(-Math.atan2(Be[1]-ze[1],Be[0]-ze[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function Ee(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function Re(){}function Ce(De){this._addDynamicProperty(De),this.elem.addDynamicProperty(De),this._isDirty=!0}function Te(De,Oe,Be){if(this.elem=De,this.frameId=-1,this.propType="transform",this.data=Oe,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Be||De),Oe.p&&Oe.p.s?(this.px=PropertyFactory.getProp(De,Oe.p.x,0,0,this),this.py=PropertyFactory.getProp(De,Oe.p.y,0,0,this),Oe.p.z&&(this.pz=PropertyFactory.getProp(De,Oe.p.z,0,0,this))):this.p=PropertyFactory.getProp(De,Oe.p||{k:[0,0,0]},1,0,this),Oe.rx){if(this.rx=PropertyFactory.getProp(De,Oe.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(De,Oe.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(De,Oe.rz,0,degToRads,this),Oe.or.k[0].ti){var ze,$e=Oe.or.k.length;for(ze=0;ze<$e;ze+=1)Oe.or.k[ze].to=null,Oe.or.k[ze].ti=null}this.or=PropertyFactory.getProp(De,Oe.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(De,Oe.r||{k:0},0,degToRads,this);Oe.sk&&(this.sk=PropertyFactory.getProp(De,Oe.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(De,Oe.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(De,Oe.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(De,Oe.s||{k:[100,100,100]},1,.01,this),Oe.o?this.o=PropertyFactory.getProp(De,Oe.o,0,.01,De):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}Te.prototype={applyToMatrix:t,getValue:n,precalculateMatrix:Ee,autoOrient:Re},extendPrototype([DynamicPropertyContainer],Te),Te.prototype.addDynamicProperty=Ce,Te.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function Me(De,Oe,Be){return new Te(De,Oe,Be)}return{getTransformProperty:Me}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,n,Ee,Re,Ce){var Te=Ce?-1:1,Me=Ee.s.v[0]+(1-Ee.s.v[0])*(1-Re),De=Ee.s.v[1]+(1-Ee.s.v[1])*(1-Re);e.translate(Ee.p.v[0]*Te*Re,Ee.p.v[1]*Te*Re,Ee.p.v[2]),t.translate(-Ee.a.v[0],-Ee.a.v[1],Ee.a.v[2]),t.rotate(-Ee.r.v*Te*Re),t.translate(Ee.a.v[0],Ee.a.v[1],Ee.a.v[2]),n.translate(-Ee.a.v[0],-Ee.a.v[1],Ee.a.v[2]),n.scale(Ce?1/Me:Me,Ce?1/De:De),n.translate(Ee.a.v[0],Ee.a.v[1],Ee.a.v[2])},RepeaterModifier.prototype.init=function(e,t,n,Ee){for(this.elem=e,this.arr=t,this.pos=n,this.elemsData=Ee,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[n]);n>0;)n-=1,this._elements.unshift(t[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t]._processed=!1,e[t].ty==="gr"&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var n,Ee=e.length;for(n=0;n<Ee;n+=1)e[n]._render=t,e[n].ty==="gr"&&this.changeGroupRender(e[n].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,n,Ee,Re,Ce,Te=!1;if(this._mdf||e){var Me=Math.ceil(this.c.v);if(this._groups.length<Me){for(;this._groups.length<Me;){var De={it:this.cloneElements(this._elements),ty:"gr"};De.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,De),this._groups.splice(0,0,De),this._currentCopies+=1}this.elem.reloadShapes(),Te=!0}Ce=0;var Oe;for(Ee=0;Ee<=this._groups.length-1;Ee+=1){if(Oe=Ce<Me,this._groups[Ee]._render=Oe,this.changeGroupRender(this._groups[Ee].it,Oe),!Oe){var Be=this.elemsData[Ee].it,ze=Be[Be.length-1];ze.transform.op.v!==0?(ze.transform.op._mdf=!0,ze.transform.op.v=0):ze.transform.op._mdf=!1}Ce+=1}this._currentCopies=Me;var $e=this.o.v,He=$e%1,Ue=$e>0?Math.floor($e):Math.ceil($e),Ve=this.pMatrix.props,We=this.rMatrix.props,qe=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Ge=0;if($e>0){for(;Ge<Ue;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Ge+=1;He&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,He,!1),Ge+=He)}else if($e<0){for(;Ge>Ue;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Ge-=1;He&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-He,!0),Ge-=He)}Ee=this.data.m===1?0:this._currentCopies-1,Re=this.data.m===1?1:-1,Ce=this._currentCopies;for(var Ye,Ke;Ce;){if(t=this.elemsData[Ee].it,n=t[t.length-1].transform.mProps.v.props,Ke=n.length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(Ee/(this._currentCopies-1)),Ge!==0){for((Ee!==0&&Re===1||Ee!==this._currentCopies-1&&Re===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(We[0],We[1],We[2],We[3],We[4],We[5],We[6],We[7],We[8],We[9],We[10],We[11],We[12],We[13],We[14],We[15]),this.matrix.transform(qe[0],qe[1],qe[2],qe[3],qe[4],qe[5],qe[6],qe[7],qe[8],qe[9],qe[10],qe[11],qe[12],qe[13],qe[14],qe[15]),this.matrix.transform(Ve[0],Ve[1],Ve[2],Ve[3],Ve[4],Ve[5],Ve[6],Ve[7],Ve[8],Ve[9],Ve[10],Ve[11],Ve[12],Ve[13],Ve[14],Ve[15]),Ye=0;Ye<Ke;Ye+=1)n[Ye]=this.matrix.props[Ye];this.matrix.reset()}else for(this.matrix.reset(),Ye=0;Ye<Ke;Ye+=1)n[Ye]=this.matrix.props[Ye];Ge+=1,Ce-=1,Ee+=Re}}else for(Ce=this._currentCopies,Ee=0,Re=1;Ce;)t=this.elemsData[Ee].it,n=t[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,Ce-=1,Ee+=Re;return Te},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var n=shapePool.newElement();n.c=e.c;var Ee,Re=e._length,Ce,Te,Me,De,Oe,Be,ze=0,$e,He,Ue,Ve,We,qe;for(Ee=0;Ee<Re;Ee+=1)Ce=e.v[Ee],Me=e.o[Ee],Te=e.i[Ee],Ce[0]===Me[0]&&Ce[1]===Me[1]&&Ce[0]===Te[0]&&Ce[1]===Te[1]?(Ee===0||Ee===Re-1)&&!e.c?(n.setTripleAt(Ce[0],Ce[1],Me[0],Me[1],Te[0],Te[1],ze),ze+=1):(Ee===0?De=e.v[Re-1]:De=e.v[Ee-1],Oe=Math.sqrt(Math.pow(Ce[0]-De[0],2)+Math.pow(Ce[1]-De[1],2)),Be=Oe?Math.min(Oe/2,t)/Oe:0,We=Ce[0]+(De[0]-Ce[0])*Be,$e=We,qe=Ce[1]-(Ce[1]-De[1])*Be,He=qe,Ue=$e-($e-Ce[0])*roundCorner,Ve=He-(He-Ce[1])*roundCorner,n.setTripleAt($e,He,Ue,Ve,We,qe,ze),ze+=1,Ee===Re-1?De=e.v[0]:De=e.v[Ee+1],Oe=Math.sqrt(Math.pow(Ce[0]-De[0],2)+Math.pow(Ce[1]-De[1],2)),Be=Oe?Math.min(Oe/2,t)/Oe:0,Ue=Ce[0]+(De[0]-Ce[0])*Be,$e=Ue,Ve=Ce[1]+(De[1]-Ce[1])*Be,He=Ve,We=$e-($e-Ce[0])*roundCorner,qe=He-(He-Ce[1])*roundCorner,n.setTripleAt($e,He,Ue,Ve,We,qe,ze),ze+=1):(n.setTripleAt(e.v[Ee][0],e.v[Ee][1],e.o[Ee][0],e.o[Ee][1],e.i[Ee][0],e.i[Ee][1],ze),ze+=1);return n},RoundCornersModifier.prototype.processShapes=function(e){var t,n,Ee=this.shapes.length,Re,Ce,Te=this.rd.v;if(Te!==0){var Me,De;for(n=0;n<Ee;n+=1){if(Me=this.shapes[n],De=Me.localShapeCollection,!(!Me.shape._mdf&&!this._mdf&&!e))for(De.releaseShapes(),Me.shape._mdf=!0,t=Me.shape.paths.shapes,Ce=Me.shape.paths._length,Re=0;Re<Ce;Re+=1)De.addShape(this.processPath(t[Re],Te));Me.shape.paths=Me.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(e,t){return Math.abs(e-t)*1e5<=Math.min(Math.abs(e),Math.abs(t))}function floatZero(e){return Math.abs(e)<=1e-5}function lerp(e,t,n){return e*(1-n)+t*n}function lerpPoint(e,t,n){return[lerp(e[0],t[0],n),lerp(e[1],t[1],n)]}function quadRoots(e,t,n){if(e===0)return[];var Ee=t*t-4*e*n;if(Ee<0)return[];var Re=-t/(2*e);if(Ee===0)return[Re];var Ce=Math.sqrt(Ee)/(2*e);return[Re-Ce,Re+Ce]}function polynomialCoefficients(e,t,n,Ee){return[-e+3*t-3*n+Ee,3*e-6*t+3*n,-3*e+3*t,e]}function singlePoint(e){return new PolynomialBezier(e,e,e,e,!1)}function PolynomialBezier(e,t,n,Ee,Re){Re&&pointEqual(e,t)&&(t=lerpPoint(e,Ee,1/3)),Re&&pointEqual(n,Ee)&&(n=lerpPoint(e,Ee,2/3));var Ce=polynomialCoefficients(e[0],t[0],n[0],Ee[0]),Te=polynomialCoefficients(e[1],t[1],n[1],Ee[1]);this.a=[Ce[0],Te[0]],this.b=[Ce[1],Te[1]],this.c=[Ce[2],Te[2]],this.d=[Ce[3],Te[3]],this.points=[e,t,n,Ee]}PolynomialBezier.prototype.point=function(e){return[((this.a[0]*e+this.b[0])*e+this.c[0])*e+this.d[0],((this.a[1]*e+this.b[1])*e+this.c[1])*e+this.d[1]]},PolynomialBezier.prototype.derivative=function(e){return[(3*e*this.a[0]+2*this.b[0])*e+this.c[0],(3*e*this.a[1]+2*this.b[1])*e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(e){var t=this.derivative(e);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(e){var t=this.derivative(e);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(e))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/e,n=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/e;if(n<0)return[];var Ee=Math.sqrt(n);return floatZero(Ee)?Ee>0&&Ee<1?[t]:[]:[t-Ee,t+Ee].filter(function(Re){return Re>0&&Re<1})},PolynomialBezier.prototype.split=function(e){if(e<=0)return[singlePoint(this.points[0]),this];if(e>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],e),n=lerpPoint(this.points[1],this.points[2],e),Ee=lerpPoint(this.points[2],this.points[3],e),Re=lerpPoint(t,n,e),Ce=lerpPoint(n,Ee,e),Te=lerpPoint(Re,Ce,e);return[new PolynomialBezier(this.points[0],t,Re,Te,!0),new PolynomialBezier(Te,Ce,Ee,this.points[3],!0)]};function extrema(e,t){var n=e.points[0][t],Ee=e.points[e.points.length-1][t];if(n>Ee){var Re=Ee;Ee=n,n=Re}for(var Ce=quadRoots(3*e.a[t],2*e.b[t],e.c[t]),Te=0;Te<Ce.length;Te+=1)if(Ce[Te]>0&&Ce[Te]<1){var Me=e.point(Ce[Te])[t];Me<n?n=Me:Me>Ee&&(Ee=Me)}return{min:n,max:Ee}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var e=this.bounds();return{left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max,width:e.x.max-e.x.min,height:e.y.max-e.y.min,cx:(e.x.max+e.x.min)/2,cy:(e.y.max+e.y.min)/2}};function intersectData(e,t,n){var Ee=e.boundingBox();return{cx:Ee.cx,cy:Ee.cy,width:Ee.width,height:Ee.height,bez:e,t:(t+n)/2,t1:t,t2:n}}function splitData(e){var t=e.bez.split(.5);return[intersectData(t[0],e.t1,e.t),intersectData(t[1],e.t,e.t2)]}function boxIntersect(e,t){return Math.abs(e.cx-t.cx)*2<e.width+t.width&&Math.abs(e.cy-t.cy)*2<e.height+t.height}function intersectsImpl(e,t,n,Ee,Re,Ce){if(boxIntersect(e,t)){if(n>=Ce||e.width<=Ee&&e.height<=Ee&&t.width<=Ee&&t.height<=Ee){Re.push([e.t,t.t]);return}var Te=splitData(e),Me=splitData(t);intersectsImpl(Te[0],Me[0],n+1,Ee,Re,Ce),intersectsImpl(Te[0],Me[1],n+1,Ee,Re,Ce),intersectsImpl(Te[1],Me[0],n+1,Ee,Re,Ce),intersectsImpl(Te[1],Me[1],n+1,Ee,Re,Ce)}}PolynomialBezier.prototype.intersections=function(e,t,n){t===void 0&&(t=2),n===void 0&&(n=7);var Ee=[];return intersectsImpl(intersectData(this,0,1),intersectData(e,0,1),0,t,Ee,n),Ee},PolynomialBezier.shapeSegment=function(e,t){var n=(t+1)%e.length();return new PolynomialBezier(e.v[t],e.o[t],e.i[n],e.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(e,t){var n=(t+1)%e.length();return new PolynomialBezier(e.v[n],e.i[n],e.o[t],e.v[t],!0)};function crossProduct(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function lineIntersection(e,t,n,Ee){var Re=[e[0],e[1],1],Ce=[t[0],t[1],1],Te=[n[0],n[1],1],Me=[Ee[0],Ee[1],1],De=crossProduct(crossProduct(Re,Ce),crossProduct(Te,Me));return floatZero(De[2])?null:[De[0]/De[2],De[1]/De[2]]}function polarOffset(e,t,n){return[e[0]+Math.cos(t)*n,e[1]-Math.sin(t)*n]}function pointDistance(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1])}function pointEqual(e,t){return floatEqual(e[0],t[0])&&floatEqual(e[1],t[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(e,t.s,0,null,this),this.frequency=PropertyFactory.getProp(e,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(e,t.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(e,t,n,Ee,Re,Ce,Te){var Me=n-Math.PI/2,De=n+Math.PI/2,Oe=t[0]+Math.cos(n)*Ee*Re,Be=t[1]-Math.sin(n)*Ee*Re;e.setTripleAt(Oe,Be,Oe+Math.cos(Me)*Ce,Be-Math.sin(Me)*Ce,Oe+Math.cos(De)*Te,Be-Math.sin(De)*Te,e.length())}function getPerpendicularVector(e,t){var n=[t[0]-e[0],t[1]-e[1]],Ee=-Math.PI*.5,Re=[Math.cos(Ee)*n[0]-Math.sin(Ee)*n[1],Math.sin(Ee)*n[0]+Math.cos(Ee)*n[1]];return Re}function getProjectingAngle(e,t){var n=t===0?e.length()-1:t-1,Ee=(t+1)%e.length(),Re=e.v[n],Ce=e.v[Ee],Te=getPerpendicularVector(Re,Ce);return Math.atan2(0,1)-Math.atan2(Te[1],Te[0])}function zigZagCorner(e,t,n,Ee,Re,Ce,Te){var Me=getProjectingAngle(t,n),De=t.v[n%t._length],Oe=t.v[n===0?t._length-1:n-1],Be=t.v[(n+1)%t._length],ze=Ce===2?Math.sqrt(Math.pow(De[0]-Oe[0],2)+Math.pow(De[1]-Oe[1],2)):0,$e=Ce===2?Math.sqrt(Math.pow(De[0]-Be[0],2)+Math.pow(De[1]-Be[1],2)):0;setPoint(e,t.v[n%t._length],Me,Te,Ee,$e/((Re+1)*2),ze/((Re+1)*2))}function zigZagSegment(e,t,n,Ee,Re,Ce){for(var Te=0;Te<Ee;Te+=1){var Me=(Te+1)/(Ee+1),De=Re===2?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,Oe=t.normalAngle(Me),Be=t.point(Me);setPoint(e,Be,Oe,Ce,n,De/((Ee+1)*2),De/((Ee+1)*2)),Ce=-Ce}return Ce}ZigZagModifier.prototype.processPath=function(e,t,n,Ee){var Re=e._length,Ce=shapePool.newElement();if(Ce.c=e.c,e.c||(Re-=1),Re===0)return Ce;var Te=-1,Me=PolynomialBezier.shapeSegment(e,0);zigZagCorner(Ce,e,0,t,n,Ee,Te);for(var De=0;De<Re;De+=1)Te=zigZagSegment(Ce,Me,t,n,Ee,-Te),De===Re-1&&!e.c?Me=null:Me=PolynomialBezier.shapeSegment(e,(De+1)%Re),zigZagCorner(Ce,e,De+1,t,n,Ee,Te);return Ce},ZigZagModifier.prototype.processShapes=function(e){var t,n,Ee=this.shapes.length,Re,Ce,Te=this.amplitude.v,Me=Math.max(0,Math.round(this.frequency.v)),De=this.pointsType.v;if(Te!==0){var Oe,Be;for(n=0;n<Ee;n+=1){if(Oe=this.shapes[n],Be=Oe.localShapeCollection,!(!Oe.shape._mdf&&!this._mdf&&!e))for(Be.releaseShapes(),Oe.shape._mdf=!0,t=Oe.shape.paths.shapes,Ce=Oe.shape.paths._length,Re=0;Re<Ce;Re+=1)Be.addShape(this.processPath(t[Re],Te,Me,De));Oe.shape.paths=Oe.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(e,t,n){var Ee=Math.atan2(t[0]-e[0],t[1]-e[1]);return[polarOffset(e,Ee,n),polarOffset(t,Ee,n)]}function offsetSegment(e,t){var n,Ee,Re,Ce,Te,Me,De;De=linearOffset(e.points[0],e.points[1],t),n=De[0],Ee=De[1],De=linearOffset(e.points[1],e.points[2],t),Re=De[0],Ce=De[1],De=linearOffset(e.points[2],e.points[3],t),Te=De[0],Me=De[1];var Oe=lineIntersection(n,Ee,Re,Ce);Oe===null&&(Oe=Ee);var Be=lineIntersection(Te,Me,Re,Ce);return Be===null&&(Be=Te),new PolynomialBezier(n,Oe,Be,Me)}function joinLines(e,t,n,Ee,Re){var Ce=t.points[3],Te=n.points[0];if(Ee===3||pointEqual(Ce,Te))return Ce;if(Ee===2){var Me=-t.tangentAngle(1),De=-n.tangentAngle(0)+Math.PI,Oe=lineIntersection(Ce,polarOffset(Ce,Me+Math.PI/2,100),Te,polarOffset(Te,Me+Math.PI/2,100)),Be=Oe?pointDistance(Oe,Ce):pointDistance(Ce,Te)/2,ze=polarOffset(Ce,Me,2*Be*roundCorner);return e.setXYAt(ze[0],ze[1],"o",e.length()-1),ze=polarOffset(Te,De,2*Be*roundCorner),e.setTripleAt(Te[0],Te[1],Te[0],Te[1],ze[0],ze[1],e.length()),Te}var $e=pointEqual(Ce,t.points[2])?t.points[0]:t.points[2],He=pointEqual(Te,n.points[1])?n.points[3]:n.points[1],Ue=lineIntersection($e,Ce,Te,He);return Ue&&pointDistance(Ue,Ce)<Re?(e.setTripleAt(Ue[0],Ue[1],Ue[0],Ue[1],Ue[0],Ue[1],e.length()),Ue):Ce}function getIntersection(e,t){var n=e.intersections(t);return n.length&&floatEqual(n[0][0],1)&&n.shift(),n.length?n[0]:null}function pruneSegmentIntersection(e,t){var n=e.slice(),Ee=t.slice(),Re=getIntersection(e[e.length-1],t[0]);return Re&&(n[e.length-1]=e[e.length-1].split(Re[0])[0],Ee[0]=t[0].split(Re[1])[1]),e.length>1&&t.length>1&&(Re=getIntersection(e[0],t[t.length-1]),Re)?[[e[0].split(Re[0])[0]],[t[t.length-1].split(Re[1])[1]]]:[n,Ee]}function pruneIntersections(e){for(var t,n=1;n<e.length;n+=1)t=pruneSegmentIntersection(e[n-1],e[n]),e[n-1]=t[0],e[n]=t[1];return e.length>1&&(t=pruneSegmentIntersection(e[e.length-1],e[0]),e[e.length-1]=t[0],e[0]=t[1]),e}function offsetSegmentSplit(e,t){var n=e.inflectionPoints(),Ee,Re,Ce,Te;if(n.length===0)return[offsetSegment(e,t)];if(n.length===1||floatEqual(n[1],1))return Ce=e.split(n[0]),Ee=Ce[0],Re=Ce[1],[offsetSegment(Ee,t),offsetSegment(Re,t)];Ce=e.split(n[0]),Ee=Ce[0];var Me=(n[1]-n[0])/(1-n[0]);return Ce=Ce[1].split(Me),Te=Ce[0],Re=Ce[1],[offsetSegment(Ee,t),offsetSegment(Te,t),offsetSegment(Re,t)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(e,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(e,t,n,Ee){var Re=shapePool.newElement();Re.c=e.c;var Ce=e.length();e.c||(Ce-=1);var Te,Me,De,Oe=[];for(Te=0;Te<Ce;Te+=1)De=PolynomialBezier.shapeSegment(e,Te),Oe.push(offsetSegmentSplit(De,t));if(!e.c)for(Te=Ce-1;Te>=0;Te-=1)De=PolynomialBezier.shapeSegmentInverted(e,Te),Oe.push(offsetSegmentSplit(De,t));Oe=pruneIntersections(Oe);var Be=null,ze=null;for(Te=0;Te<Oe.length;Te+=1){var $e=Oe[Te];for(ze&&(Be=joinLines(Re,ze,$e[0],n,Ee)),ze=$e[$e.length-1],Me=0;Me<$e.length;Me+=1)De=$e[Me],Be&&pointEqual(De.points[0],Be)?Re.setXYAt(De.points[1][0],De.points[1][1],"o",Re.length()-1):Re.setTripleAt(De.points[0][0],De.points[0][1],De.points[1][0],De.points[1][1],De.points[0][0],De.points[0][1],Re.length()),Re.setTripleAt(De.points[3][0],De.points[3][1],De.points[3][0],De.points[3][1],De.points[2][0],De.points[2][1],Re.length()),Be=De.points[3]}return Oe.length&&joinLines(Re,ze,Oe[0][0],n,Ee),Re},OffsetPathModifier.prototype.processShapes=function(e){var t,n,Ee=this.shapes.length,Re,Ce,Te=this.amount.v,Me=this.miterLimit.v,De=this.lineJoin;if(Te!==0){var Oe,Be;for(n=0;n<Ee;n+=1){if(Oe=this.shapes[n],Be=Oe.localShapeCollection,!(!Oe.shape._mdf&&!this._mdf&&!e))for(Be.releaseShapes(),Oe.shape._mdf=!0,t=Oe.shape.paths.shapes,Ce=Oe.shape.paths._length,Re=0;Re<Ce;Re+=1)Be.addShape(this.processPath(t[Re],Te,De,Me));Oe.shape.paths=Oe.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(e){for(var t=e.fStyle?e.fStyle.split(" "):[],n="normal",Ee="normal",Re=t.length,Ce,Te=0;Te<Re;Te+=1)switch(Ce=t[Te].toLowerCase(),Ce){case"italic":Ee="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200";break}return{style:Ee,weight:e.fWeight||n}}var FontManager=function(){var e=5e3,t={w:0,size:0,shapes:[],data:{shapes:[]}},n=[];n=n.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var Ee=127988,Re=917631,Ce=917601,Te=917626,Me=65039,De=8205,Oe=127462,Be=127487,ze=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function $e(lr){var cr=lr.split(","),rr,pr=cr.length,mr=[];for(rr=0;rr<pr;rr+=1)cr[rr]!=="sans-serif"&&cr[rr]!=="monospace"&&mr.push(cr[rr]);return mr.join(",")}function He(lr,cr){var rr=createTag("span");rr.setAttribute("aria-hidden",!0),rr.style.fontFamily=cr;var pr=createTag("span");pr.innerText="giItT1WQy@!-/#",rr.style.position="absolute",rr.style.left="-10000px",rr.style.top="-10000px",rr.style.fontSize="300px",rr.style.fontVariant="normal",rr.style.fontStyle="normal",rr.style.fontWeight="normal",rr.style.letterSpacing="0",rr.appendChild(pr),document.body.appendChild(rr);var mr=pr.offsetWidth;return pr.style.fontFamily=$e(lr)+", "+cr,{node:pr,w:mr,parent:rr}}function Ue(){var lr,cr=this.fonts.length,rr,pr,mr=cr;for(lr=0;lr<cr;lr+=1)this.fonts[lr].loaded?mr-=1:this.fonts[lr].fOrigin==="n"||this.fonts[lr].origin===0?this.fonts[lr].loaded=!0:(rr=this.fonts[lr].monoCase.node,pr=this.fonts[lr].monoCase.w,rr.offsetWidth!==pr?(mr-=1,this.fonts[lr].loaded=!0):(rr=this.fonts[lr].sansCase.node,pr=this.fonts[lr].sansCase.w,rr.offsetWidth!==pr&&(mr-=1,this.fonts[lr].loaded=!0)),this.fonts[lr].loaded&&(this.fonts[lr].sansCase.parent.parentNode.removeChild(this.fonts[lr].sansCase.parent),this.fonts[lr].monoCase.parent.parentNode.removeChild(this.fonts[lr].monoCase.parent)));mr!==0&&Date.now()-this.initTime<e?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function Ve(lr,cr){var rr=document.body&&cr?"svg":"canvas",pr,mr=getFontProperties(lr);if(rr==="svg"){var ir=createNS("text");ir.style.fontSize="100px",ir.setAttribute("font-family",lr.fFamily),ir.setAttribute("font-style",mr.style),ir.setAttribute("font-weight",mr.weight),ir.textContent="1",lr.fClass?(ir.style.fontFamily="inherit",ir.setAttribute("class",lr.fClass)):ir.style.fontFamily=lr.fFamily,cr.appendChild(ir),pr=ir}else{var nr=new OffscreenCanvas(500,500).getContext("2d");nr.font=mr.style+" "+mr.weight+" 100px "+lr.fFamily,pr=nr}function gr(Er){return rr==="svg"?(pr.textContent=Er,pr.getComputedTextLength()):pr.measureText(Er).width}return{measureText:gr}}function We(lr,cr){if(!lr){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=lr.list;return}if(!document.body){this.isLoaded=!0,lr.list.forEach(function(Fr){Fr.helper=Ve(Fr),Fr.cache={}}),this.fonts=lr.list;return}var rr=lr.list,pr,mr=rr.length,ir=mr;for(pr=0;pr<mr;pr+=1){var nr=!0,gr,Er;if(rr[pr].loaded=!1,rr[pr].monoCase=He(rr[pr].fFamily,"monospace"),rr[pr].sansCase=He(rr[pr].fFamily,"sans-serif"),!rr[pr].fPath)rr[pr].loaded=!0,ir-=1;else if(rr[pr].fOrigin==="p"||rr[pr].origin===3){if(gr=document.querySelectorAll('style[f-forigin="p"][f-family="'+rr[pr].fFamily+'"], style[f-origin="3"][f-family="'+rr[pr].fFamily+'"]'),gr.length>0&&(nr=!1),nr){var Cr=createTag("style");Cr.setAttribute("f-forigin",rr[pr].fOrigin),Cr.setAttribute("f-origin",rr[pr].origin),Cr.setAttribute("f-family",rr[pr].fFamily),Cr.type="text/css",Cr.innerText="@font-face {font-family: "+rr[pr].fFamily+"; font-style: normal; src: url('"+rr[pr].fPath+"');}",cr.appendChild(Cr)}}else if(rr[pr].fOrigin==="g"||rr[pr].origin===1){for(gr=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Er=0;Er<gr.length;Er+=1)gr[Er].href.indexOf(rr[pr].fPath)!==-1&&(nr=!1);if(nr){var Nr=createTag("link");Nr.setAttribute("f-forigin",rr[pr].fOrigin),Nr.setAttribute("f-origin",rr[pr].origin),Nr.type="text/css",Nr.rel="stylesheet",Nr.href=rr[pr].fPath,document.body.appendChild(Nr)}}else if(rr[pr].fOrigin==="t"||rr[pr].origin===2){for(gr=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Er=0;Er<gr.length;Er+=1)rr[pr].fPath===gr[Er].src&&(nr=!1);if(nr){var Mr=createTag("link");Mr.setAttribute("f-forigin",rr[pr].fOrigin),Mr.setAttribute("f-origin",rr[pr].origin),Mr.setAttribute("rel","stylesheet"),Mr.setAttribute("href",rr[pr].fPath),cr.appendChild(Mr)}}rr[pr].helper=Ve(rr[pr],cr),rr[pr].cache={},this.fonts.push(rr[pr])}ir===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function qe(lr){if(lr){this.chars||(this.chars=[]);var cr,rr=lr.length,pr,mr=this.chars.length,ir;for(cr=0;cr<rr;cr+=1){for(pr=0,ir=!1;pr<mr;)this.chars[pr].style===lr[cr].style&&this.chars[pr].fFamily===lr[cr].fFamily&&this.chars[pr].ch===lr[cr].ch&&(ir=!0),pr+=1;ir||(this.chars.push(lr[cr]),mr+=1)}}}function Ge(lr,cr,rr){for(var pr=0,mr=this.chars.length;pr<mr;){if(this.chars[pr].ch===lr&&this.chars[pr].style===cr&&this.chars[pr].fFamily===rr)return this.chars[pr];pr+=1}return(typeof lr=="string"&&lr.charCodeAt(0)!==13||!lr)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",lr,cr,rr)),t}function Ye(lr,cr,rr){var pr=this.getFontByName(cr),mr=lr;if(!pr.cache[mr]){var ir=pr.helper;if(lr===" "){var nr=ir.measureText("|"+lr+"|"),gr=ir.measureText("||");pr.cache[mr]=(nr-gr)/100}else pr.cache[mr]=ir.measureText(lr)/100}return pr.cache[mr]*rr}function Ke(lr){for(var cr=0,rr=this.fonts.length;cr<rr;){if(this.fonts[cr].fName===lr)return this.fonts[cr];cr+=1}return this.fonts[0]}function Xe(lr){var cr=0,rr=lr.charCodeAt(0);if(rr>=55296&&rr<=56319){var pr=lr.charCodeAt(1);pr>=56320&&pr<=57343&&(cr=(rr-55296)*1024+pr-56320+65536)}return cr}function Ze(lr,cr){var rr=lr.toString(16)+cr.toString(16);return ze.indexOf(rr)!==-1}function er(lr){return lr===De}function St(lr){return lr===Me}function ar(lr){var cr=Xe(lr);return cr>=Oe&&cr<=Be}function hr(lr){return ar(lr.substr(0,2))&&ar(lr.substr(2,2))}function ur(lr){return n.indexOf(lr)!==-1}function dr(lr,cr){var rr=Xe(lr.substr(cr,2));if(rr!==Ee)return!1;var pr=0;for(cr+=2;pr<5;){if(rr=Xe(lr.substr(cr,2)),rr<Ce||rr>Te)return!1;pr+=1,cr+=2}return Xe(lr.substr(cr,2))===Re}function vr(){this.isLoaded=!0}var yr=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};yr.isModifier=Ze,yr.isZeroWidthJoiner=er,yr.isFlagEmoji=hr,yr.isRegionalCode=ar,yr.isCombinedCharacter=ur,yr.isRegionalFlag=dr,yr.isVariationSelector=St,yr.BLACK_FLAG_CODE_POINT=Ee;var br={addChars:qe,addFonts:We,getCharData:Ge,getFontByName:Ke,measureText:Ye,checkLoadedFonts:Ue,setIsLoaded:vr};return yr.prototype=br,yr}();function SlotManager(e){this.animationData=e}SlotManager.prototype.getProp=function(e){return this.animationData.slots&&this.animationData.slots[e.sid]?Object.assign(e,this.animationData.slots[e.sid].p):e};function slotFactory(e){return new SlotManager(e)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){this.renderableComponents.indexOf(t)===-1&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){this.renderableComponents.indexOf(t)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,n=this.renderableComponents.length;for(t=0;t<n;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var e={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(t){return e[t]||""}}();function SliderEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function AngleEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function ColorEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function PointEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function LayerIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function MaskIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function CheckboxEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(e,t){var n=e.ef||[];this.effectElements=[];var Ee,Re=n.length,Ce;for(Ee=0;Ee<Re;Ee+=1)Ce=new GroupEffect(n[Ee],t),this.effectElements.push(Ce)}function GroupEffect(e,t){this.init(e,t)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);var n,Ee=this.data.ef.length,Re,Ce=this.data.ef;for(n=0;n<Ee;n+=1){switch(Re=null,Ce[n].ty){case 0:Re=new SliderEffect(Ce[n],t,this);break;case 1:Re=new AngleEffect(Ce[n],t,this);break;case 2:Re=new ColorEffect(Ce[n],t,this);break;case 3:Re=new PointEffect(Ce[n],t,this);break;case 4:case 7:Re=new CheckboxEffect(Ce[n],t,this);break;case 10:Re=new LayerIndexEffect(Ce[n],t,this);break;case 11:Re=new MaskIndexEffect(Ce[n],t,this);break;case 5:Re=new EffectsManager(Ce[n],t);break;default:Re=new NoValueEffect(Ce[n]);break}Re&&this.effectElements.push(Re)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,n=this.data.masksProperties.length;t<n;){if(this.data.masksProperties[t].mode!=="n"&&this.data.masksProperties[t].cl!==!1)return!0;t+=1}return!1},initExpressions:function(){var t=getExpressionInterfaces();if(t){var n=t("layer"),Ee=t("effects"),Re=t("shape"),Ce=t("text"),Te=t("comp");this.layerInterface=n(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var Me=Ee.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(Me),this.data.ty===0||this.data.xt?this.compInterface=Te(this):this.data.ty===4?(this.layerInterface.shapeInterface=Re(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=Ce(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var t=getBlendMode(this.data.bm),n=this.baseElement||this.layerElement;n.style["mix-blend-mode"]=t},initBaseData:function(t,n,Ee){this.globalData=n,this.comp=Ee,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,n){var Ee,Re=this.dynamicProperties.length;for(Ee=0;Ee<Re;Ee+=1)(n||this._isParent&&this.dynamicProperties[Ee].propType==="transform")&&(this.dynamicProperties[Ee].getValue(),this.dynamicProperties[Ee]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){this.dynamicProperties.indexOf(t)===-1&&this.dynamicProperties.push(t)}};function FootageElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(e,t,n)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var e=getExpressionInterfaces();if(e){var t=e("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,n),this._isPlaying=!1,this._canPlay=!1;var Ee=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(Ee),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,e.au&&e.au.lv?e.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this._volumeMultiplier=e,this._previousVolume=e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(e){var t,n=this.layers.length,Ee;for(this.completeLayers=!0,t=n-1;t>=0;t-=1)this.elements[t]||(Ee=this.layers[t],Ee.ip-Ee.st<=e-this.layers[t].st&&Ee.op-Ee.st>e-this.layers[t].st&&this.buildItem(t)),this.completeLayers=this.elements[t]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e);default:return this.createNull(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){this.completeLayers=!1;var t,n=e.length,Ee,Re=this.layers.length;for(t=0;t<n;t+=1)for(Ee=0;Ee<Re;){if(this.layers[Ee].id===e[t].id){this.layers[Ee]=e[t];break}Ee+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,n){for(var Ee=this.elements,Re=this.layers,Ce=0,Te=Re.length;Ce<Te;)Re[Ce].ind==t&&(!Ee[Ce]||Ee[Ce]===!0?(this.buildItem(Ce),this.addPendingElement(e)):(n.push(Ee[Ce]),Ee[Ce].setAsParent(),Re[Ce].parent!==void 0?this.buildElementParenting(e,Re[Ce].parent,n):e.setHierarchy(n))),Ce+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length;for(t=0;t<n;t+=1)if(e[t].xt){var Ee=this.createComp(e[t]);Ee.initExpressions(),this.globalData.projectInterface.registerComposition(Ee)}},BaseRenderer.prototype.getElementById=function(e){var t,n=this.elements.length;for(t=0;t<n;t+=1)if(this.elements[t].data.ind===e)return this.elements[t];return null},BaseRenderer.prototype.getElementByPath=function(e){var t=e.shift(),n;if(typeof t=="number")n=this.elements[t];else{var Ee,Re=this.elements.length;for(Ee=0;Ee<Re;Ee+=1)if(this.elements[Ee].data.nm===t){n=this.elements[Ee];break}}return e.length===0?n:n.getElementByPath(e)},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(e),this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var t=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:t,localMat:t,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,n=this.finalTransform.mat,Ee=0,Re=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;Ee<Re;){if(this.hierarchy[Ee].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}Ee+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,n.cloneFromProps(t),Ee=0;Ee<Re;Ee+=1)n.multiply(this.hierarchy[Ee].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var t=0,n=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;t<n;)this.localTransforms[t]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[t]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),t+=1;if(this.finalTransform._localMatMdf){var Ee=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(Ee),t=1;t<n;t+=1){var Re=this.localTransforms[t].matrix;Ee.multiply(Re)}Ee.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var Ce=this.finalTransform.localOpacity;for(t=0;t<n;t+=1)Ce*=this.localTransforms[t].opacity*.01;this.finalTransform.localOpacity=Ce}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var t=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(t.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var n=0,Ee=t.length;for(n=0;n<Ee;n+=1)this.localTransforms.push(t[n])}}},globalToLocal:function(t){var n=[];n.push(this.finalTransform);for(var Ee=!0,Re=this.comp;Ee;)Re.finalTransform?(Re.data.hasMask&&n.splice(0,0,Re.finalTransform),Re=Re.comp):Ee=!1;var Ce,Te=n.length,Me;for(Ce=0;Ce<Te;Ce+=1)Me=n[Ce].mat.applyToPointArray(0,0,0),t=[t[0]-Me[0],t[1]-Me[1],0];return t},mHelper:new Matrix};function MaskElement(e,t,n){this.data=e,this.element=t,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var Ee=this.globalData.defs,Re,Ce=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(Ce),this.solidPath="";var Te,Me=this.masksProperties,De=0,Oe=[],Be,ze,$e=createElementID(),He,Ue,Ve,We,qe="clipPath",Ge="clip-path";for(Re=0;Re<Ce;Re+=1)if((Me[Re].mode!=="a"&&Me[Re].mode!=="n"||Me[Re].inv||Me[Re].o.k!==100||Me[Re].o.x)&&(qe="mask",Ge="mask"),(Me[Re].mode==="s"||Me[Re].mode==="i")&&De===0?(He=createNS("rect"),He.setAttribute("fill","#ffffff"),He.setAttribute("width",this.element.comp.data.w||0),He.setAttribute("height",this.element.comp.data.h||0),Oe.push(He)):He=null,Te=createNS("path"),Me[Re].mode==="n")this.viewData[Re]={op:PropertyFactory.getProp(this.element,Me[Re].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,Me[Re],3),elem:Te,lastPath:""},Ee.appendChild(Te);else{De+=1,Te.setAttribute("fill",Me[Re].mode==="s"?"#000000":"#ffffff"),Te.setAttribute("clip-rule","nonzero");var Ye;if(Me[Re].x.k!==0?(qe="mask",Ge="mask",We=PropertyFactory.getProp(this.element,Me[Re].x,0,null,this.element),Ye=createElementID(),Ue=createNS("filter"),Ue.setAttribute("id",Ye),Ve=createNS("feMorphology"),Ve.setAttribute("operator","erode"),Ve.setAttribute("in","SourceGraphic"),Ve.setAttribute("radius","0"),Ue.appendChild(Ve),Ee.appendChild(Ue),Te.setAttribute("stroke",Me[Re].mode==="s"?"#000000":"#ffffff")):(Ve=null,We=null),this.storedData[Re]={elem:Te,x:We,expan:Ve,lastPath:"",lastOperator:"",filterId:Ye,lastRadius:0},Me[Re].mode==="i"){ze=Oe.length;var Ke=createNS("g");for(Be=0;Be<ze;Be+=1)Ke.appendChild(Oe[Be]);var Xe=createNS("mask");Xe.setAttribute("mask-type","alpha"),Xe.setAttribute("id",$e+"_"+De),Xe.appendChild(Te),Ee.appendChild(Xe),Ke.setAttribute("mask","url("+getLocationHref()+"#"+$e+"_"+De+")"),Oe.length=0,Oe.push(Ke)}else Oe.push(Te);Me[Re].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[Re]={elem:Te,lastPath:"",op:PropertyFactory.getProp(this.element,Me[Re].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,Me[Re],3),invRect:He},this.viewData[Re].prop.k||this.drawPath(Me[Re],this.viewData[Re].prop.v,this.viewData[Re])}for(this.maskElement=createNS(qe),Ce=Oe.length,Re=0;Re<Ce;Re+=1)this.maskElement.appendChild(Oe[Re]);De>0&&(this.maskElement.setAttribute("id",$e),this.element.maskedElement.setAttribute(Ge,"url("+getLocationHref()+"#"+$e+")"),Ee.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var t=this.element.finalTransform.mat,n,Ee=this.masksProperties.length;for(n=0;n<Ee;n+=1)if((this.viewData[n].prop._mdf||e)&&this.drawPath(this.masksProperties[n],this.viewData[n].prop.v,this.viewData[n]),(this.viewData[n].op._mdf||e)&&this.viewData[n].elem.setAttribute("fill-opacity",this.viewData[n].op.v),this.masksProperties[n].mode!=="n"&&(this.viewData[n].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[n].invRect.setAttribute("transform",t.getInverseMatrix().to2dCSS()),this.storedData[n].x&&(this.storedData[n].x._mdf||e))){var Re=this.storedData[n].expan;this.storedData[n].x.v<0?(this.storedData[n].lastOperator!=="erode"&&(this.storedData[n].lastOperator="erode",this.storedData[n].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[n].filterId+")")),Re.setAttribute("radius",-this.storedData[n].x.v)):(this.storedData[n].lastOperator!=="dilate"&&(this.storedData[n].lastOperator="dilate",this.storedData[n].elem.setAttribute("filter",null)),this.storedData[n].elem.setAttribute("stroke-width",this.storedData[n].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" ",e},MaskElement.prototype.drawPath=function(e,t,n){var Ee=" M"+t.v[0][0]+","+t.v[0][1],Re,Ce;for(Ce=t._length,Re=1;Re<Ce;Re+=1)Ee+=" C"+t.o[Re-1][0]+","+t.o[Re-1][1]+" "+t.i[Re][0]+","+t.i[Re][1]+" "+t.v[Re][0]+","+t.v[Re][1];if(t.c&&Ce>1&&(Ee+=" C"+t.o[Re-1][0]+","+t.o[Re-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),n.lastPath!==Ee){var Te="";n.elem&&(t.c&&(Te=e.inv?this.solidPath+Ee:Ee),n.elem.setAttribute("d",Te)),n.lastPath=Ee}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var e={};e.createFilter=t,e.createAlphaToLuminanceFilter=n;function t(Ee,Re){var Ce=createNS("filter");return Ce.setAttribute("id",Ee),Re!==!0&&(Ce.setAttribute("filterUnits","objectBoundingBox"),Ce.setAttribute("x","0%"),Ce.setAttribute("y","0%"),Ce.setAttribute("width","100%"),Ce.setAttribute("height","100%")),Ce}function n(){var Ee=createNS("feColorMatrix");return Ee.setAttribute("type","matrix"),Ee.setAttribute("color-interpolation-filters","sRGB"),Ee.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),Ee}return e}(),featureSupport=function(){var e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(e.svgLumaHidden=!1),e}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(e){var t,n="SourceGraphic",Ee=e.data.ef?e.data.ef.length:0,Re=createElementID(),Ce=filtersFactory.createFilter(Re,!0),Te=0;this.filters=[];var Me;for(t=0;t<Ee;t+=1){Me=null;var De=e.data.ef[t].ty;if(registeredEffects$1[De]){var Oe=registeredEffects$1[De].effect;Me=new Oe(Ce,e.effectsManager.effectElements[t],e,idPrefix+Te,n),n=idPrefix+Te,registeredEffects$1[De].countsAsEffect&&(Te+=1)}Me&&this.filters.push(Me)}Te&&(e.globalData.defs.appendChild(Ce),e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+Re+")")),this.filters.length&&e.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},SVGEffects.prototype.getEffects=function(e){var t,n=this.filters.length,Ee=[];for(t=0;t<n;t+=1)this.filters[t].type===e&&Ee.push(this.filters[t]);return Ee};function registerEffect$1(e,t,n){registeredEffects$1[e]={effect:t,countsAsEffect:n}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t=null;if(this.data.td){this.matteMasks={};var n=createNS("g");n.setAttribute("id",this.layerId),n.appendChild(this.layerElement),t=n,this.globalData.defs.appendChild(n)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var Ee=createNS("clipPath"),Re=createNS("path");Re.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var Ce=createElementID();if(Ee.setAttribute("id",Ce),Ee.appendChild(Re),this.globalData.defs.appendChild(Ee),this.checkMasks()){var Te=createNS("g");Te.setAttribute("clip-path","url("+getLocationHref()+"#"+Ce+")"),Te.appendChild(this.layerElement),this.transformedElement=Te,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+Ce+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(t){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[t]){var n=this.layerId+"_"+t,Ee,Re,Ce,Te;if(t===1||t===3){var Me=createNS("mask");Me.setAttribute("id",n),Me.setAttribute("mask-type",t===3?"luminance":"alpha"),Ce=createNS("use"),Ce.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Me.appendChild(Ce),this.globalData.defs.appendChild(Me),!featureSupport.maskType&&t===1&&(Me.setAttribute("mask-type","luminance"),Ee=createElementID(),Re=filtersFactory.createFilter(Ee),this.globalData.defs.appendChild(Re),Re.appendChild(filtersFactory.createAlphaToLuminanceFilter()),Te=createNS("g"),Te.appendChild(Ce),Me.appendChild(Te),Te.setAttribute("filter","url("+getLocationHref()+"#"+Ee+")"))}else if(t===2){var De=createNS("mask");De.setAttribute("id",n),De.setAttribute("mask-type","alpha");var Oe=createNS("g");De.appendChild(Oe),Ee=createElementID(),Re=filtersFactory.createFilter(Ee);var Be=createNS("feComponentTransfer");Be.setAttribute("in","SourceGraphic"),Re.appendChild(Be);var ze=createNS("feFuncA");ze.setAttribute("type","table"),ze.setAttribute("tableValues","1.0 0.0"),Be.appendChild(ze),this.globalData.defs.appendChild(Re);var $e=createNS("rect");$e.setAttribute("width",this.comp.data.w),$e.setAttribute("height",this.comp.data.h),$e.setAttribute("x","0"),$e.setAttribute("y","0"),$e.setAttribute("fill","#ffffff"),$e.setAttribute("opacity","0"),Oe.setAttribute("filter","url("+getLocationHref()+"#"+Ee+")"),Oe.appendChild($e),Ce=createNS("use"),Ce.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Oe.appendChild(Ce),featureSupport.maskType||(De.setAttribute("mask-type","luminance"),Re.appendChild(filtersFactory.createAlphaToLuminanceFilter()),Te=createNS("g"),Oe.appendChild($e),Te.appendChild(this.layerElement),Oe.appendChild(Te)),this.globalData.defs.appendChild(De)}this.matteMasks[t]=n}return this.matteMasks[t]},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+t+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var e={initElement:function(n,Ee,Re){this.initFrame(),this.initBaseData(n,Ee,Re),this.initTransform(n,Ee,Re),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var n=this.baseElement||this.layerElement;n.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var n=this.baseElement||this.layerElement;n.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(n){this._mdf=!1,this.prepareRenderableFrame(n),this.prepareProperties(n,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(e)],RenderableDOMElement)})();function IImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(e,t,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(e,t){this.elem=e,this.pos=t}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(t){var n,Ee=this.shapeModifiers.length;for(n=0;n<Ee;n+=1)this.shapeModifiers[n].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var n=0,Ee=this.shapeModifiers.length;n<Ee;)if(this.shapeModifiers[n].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,n=this.shapes.length;for(t=0;t<n;t+=1)this.shapes[t].sh.reset();n=this.shapeModifiers.length;var Ee;for(t=n-1;t>=0&&(Ee=this.shapeModifiers[t].processShapes(this._isFirstFrame),!Ee);t-=1);}},searchProcessedElement:function(t){for(var n=this.processedElements,Ee=0,Re=n.length;Ee<Re;){if(n[Ee].elem===t)return n[Ee].pos;Ee+=1}return 0},addProcessedElement:function(t,n){for(var Ee=this.processedElements,Re=Ee.length;Re;)if(Re-=1,Ee[Re].elem===t){Ee[Re].pos=n;return}Ee.push(new ProcessedElement(t,n))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(e,t,n){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=n,this.lvl=t,this._isAnimated=!!n.k;for(var Ee=0,Re=e.length;Ee<Re;){if(e[Ee].mProps.dynamicProperties.length){this._isAnimated=!0;break}Ee+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=e.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(e,t,n,Ee){this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(Ee);var Re,Ce=t.length||0,Te;for(Re=0;Re<Ce;Re+=1)Te=PropertyFactory.getProp(e,t[Re].v,0,0,this),this.k=Te.k||this.k,this.dataProps[Re]={n:t[Re].n,p:Te};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(e){if(!(this.elem.globalData.frameId===this.frameId&&!e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,n=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),t=0;t<n;t+=1)this.dataProps[t].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.style=n}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(e,t,n){this.data=t,this.c=createTypedArray("uint8c",t.p*4);var Ee=t.k.k[0].s?t.k.k[0].s.length-t.p*4:t.k.k.length-t.p*4;this.o=createTypedArray("float32",Ee),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=Ee,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(e,t){for(var n=0,Ee=this.o.length/2,Re;n<Ee;){if(Re=Math.abs(e[n*4]-e[t*4+n*2]),Re>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var t,n=this.data.p*4,Ee,Re;for(t=0;t<n;t+=1)Ee=t%4===0?100:255,Re=Math.round(this.prop.v[t]*Ee),this.c[t]!==Re&&(this.c[t]=Re,this._cmdf=!e);if(this.o.length)for(n=this.prop.v.length,t=this.data.p*4;t<n;t+=1)Ee=t%2===0?100:1,Re=t%2===0?Math.round(this.prop.v[t]*100):this.prop.v[t],this.o[t-this.data.p*4]!==Re&&(this.o[t-this.data.p*4]=Re,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,n)}SVGGradientFillStyleData.prototype.initGradientData=function(e,t,n){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,t),this.setGradientOpacity(t,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var n=createElementID(),Ee=createNS(t.t===1?"linearGradient":"radialGradient");Ee.setAttribute("id",n),Ee.setAttribute("spreadMethod","pad"),Ee.setAttribute("gradientUnits","userSpaceOnUse");var Re=[],Ce,Te,Me;for(Me=t.g.p*4,Te=0;Te<Me;Te+=4)Ce=createNS("stop"),Ee.appendChild(Ce),Re.push(Ce);e.setAttribute(t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+n+")"),this.gf=Ee,this.cst=Re},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var n,Ee,Re,Ce=createNS("mask"),Te=createNS("path");Ce.appendChild(Te);var Me=createElementID(),De=createElementID();Ce.setAttribute("id",De);var Oe=createNS(e.t===1?"linearGradient":"radialGradient");Oe.setAttribute("id",Me),Oe.setAttribute("spreadMethod","pad"),Oe.setAttribute("gradientUnits","userSpaceOnUse"),Re=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var Be=this.stops;for(Ee=e.g.p*4;Ee<Re;Ee+=2)n=createNS("stop"),n.setAttribute("stop-color","rgb(255,255,255)"),Oe.appendChild(n),Be.push(n);Te.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+Me+")"),e.ty==="gs"&&(Te.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),Te.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),e.lj===1&&Te.setAttribute("stroke-miterlimit",e.ml)),this.of=Oe,this.ms=Ce,this.ost=Be,this.maskId=De,t.msElem=Te}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,n),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(e,t,n){this.transform={mProps:e,op:t,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(t,n,Ee,Re){if(n===0)return"";var Ce=t.o,Te=t.i,Me=t.v,De,Oe=" M"+Re.applyToPointStringified(Me[0][0],Me[0][1]);for(De=1;De<n;De+=1)Oe+=" C"+Re.applyToPointStringified(Ce[De-1][0],Ce[De-1][1])+" "+Re.applyToPointStringified(Te[De][0],Te[De][1])+" "+Re.applyToPointStringified(Me[De][0],Me[De][1]);return Ee&&n&&(Oe+=" C"+Re.applyToPointStringified(Ce[De-1][0],Ce[De-1][1])+" "+Re.applyToPointStringified(Te[0][0],Te[0][1])+" "+Re.applyToPointStringified(Me[0][0],Me[0][1]),Oe+="z"),Oe},SVGElementsRenderer=function(){var e=new Matrix,t=new Matrix,n={createRenderFunction:Ee};function Ee(ze){switch(ze.ty){case"fl":return Me;case"gf":return Oe;case"gs":return De;case"st":return Be;case"sh":case"el":case"rc":case"sr":return Te;case"tr":return Re;case"no":return Ce;default:return null}}function Re(ze,$e,He){(He||$e.transform.op._mdf)&&$e.transform.container.setAttribute("opacity",$e.transform.op.v),(He||$e.transform.mProps._mdf)&&$e.transform.container.setAttribute("transform",$e.transform.mProps.v.to2dCSS())}function Ce(){}function Te(ze,$e,He){var Ue,Ve,We,qe,Ge,Ye,Ke=$e.styles.length,Xe=$e.lvl,Ze,er,St,ar;for(Ye=0;Ye<Ke;Ye+=1){if(qe=$e.sh._mdf||He,$e.styles[Ye].lvl<Xe){for(er=t.reset(),St=Xe-$e.styles[Ye].lvl,ar=$e.transformers.length-1;!qe&&St>0;)qe=$e.transformers[ar].mProps._mdf||qe,St-=1,ar-=1;if(qe)for(St=Xe-$e.styles[Ye].lvl,ar=$e.transformers.length-1;St>0;)er.multiply($e.transformers[ar].mProps.v),St-=1,ar-=1}else er=e;if(Ze=$e.sh.paths,Ve=Ze._length,qe){for(We="",Ue=0;Ue<Ve;Ue+=1)Ge=Ze.shapes[Ue],Ge&&Ge._length&&(We+=buildShapeString(Ge,Ge._length,Ge.c,er));$e.caches[Ye]=We}else We=$e.caches[Ye];$e.styles[Ye].d+=ze.hd===!0?"":We,$e.styles[Ye]._mdf=qe||$e.styles[Ye]._mdf}}function Me(ze,$e,He){var Ue=$e.style;($e.c._mdf||He)&&Ue.pElem.setAttribute("fill","rgb("+bmFloor($e.c.v[0])+","+bmFloor($e.c.v[1])+","+bmFloor($e.c.v[2])+")"),($e.o._mdf||He)&&Ue.pElem.setAttribute("fill-opacity",$e.o.v)}function De(ze,$e,He){Oe(ze,$e,He),Be(ze,$e,He)}function Oe(ze,$e,He){var Ue=$e.gf,Ve=$e.g._hasOpacity,We=$e.s.v,qe=$e.e.v;if($e.o._mdf||He){var Ge=ze.ty==="gf"?"fill-opacity":"stroke-opacity";$e.style.pElem.setAttribute(Ge,$e.o.v)}if($e.s._mdf||He){var Ye=ze.t===1?"x1":"cx",Ke=Ye==="x1"?"y1":"cy";Ue.setAttribute(Ye,We[0]),Ue.setAttribute(Ke,We[1]),Ve&&!$e.g._collapsable&&($e.of.setAttribute(Ye,We[0]),$e.of.setAttribute(Ke,We[1]))}var Xe,Ze,er,St;if($e.g._cmdf||He){Xe=$e.cst;var ar=$e.g.c;for(er=Xe.length,Ze=0;Ze<er;Ze+=1)St=Xe[Ze],St.setAttribute("offset",ar[Ze*4]+"%"),St.setAttribute("stop-color","rgb("+ar[Ze*4+1]+","+ar[Ze*4+2]+","+ar[Ze*4+3]+")")}if(Ve&&($e.g._omdf||He)){var hr=$e.g.o;for($e.g._collapsable?Xe=$e.cst:Xe=$e.ost,er=Xe.length,Ze=0;Ze<er;Ze+=1)St=Xe[Ze],$e.g._collapsable||St.setAttribute("offset",hr[Ze*2]+"%"),St.setAttribute("stop-opacity",hr[Ze*2+1])}if(ze.t===1)($e.e._mdf||He)&&(Ue.setAttribute("x2",qe[0]),Ue.setAttribute("y2",qe[1]),Ve&&!$e.g._collapsable&&($e.of.setAttribute("x2",qe[0]),$e.of.setAttribute("y2",qe[1])));else{var ur;if(($e.s._mdf||$e.e._mdf||He)&&(ur=Math.sqrt(Math.pow(We[0]-qe[0],2)+Math.pow(We[1]-qe[1],2)),Ue.setAttribute("r",ur),Ve&&!$e.g._collapsable&&$e.of.setAttribute("r",ur)),$e.s._mdf||$e.e._mdf||$e.h._mdf||$e.a._mdf||He){ur||(ur=Math.sqrt(Math.pow(We[0]-qe[0],2)+Math.pow(We[1]-qe[1],2)));var dr=Math.atan2(qe[1]-We[1],qe[0]-We[0]),vr=$e.h.v;vr>=1?vr=.99:vr<=-1&&(vr=-.99);var yr=ur*vr,br=Math.cos(dr+$e.a.v)*yr+We[0],lr=Math.sin(dr+$e.a.v)*yr+We[1];Ue.setAttribute("fx",br),Ue.setAttribute("fy",lr),Ve&&!$e.g._collapsable&&($e.of.setAttribute("fx",br),$e.of.setAttribute("fy",lr))}}}function Be(ze,$e,He){var Ue=$e.style,Ve=$e.d;Ve&&(Ve._mdf||He)&&Ve.dashStr&&(Ue.pElem.setAttribute("stroke-dasharray",Ve.dashStr),Ue.pElem.setAttribute("stroke-dashoffset",Ve.dashoffset[0])),$e.c&&($e.c._mdf||He)&&Ue.pElem.setAttribute("stroke","rgb("+bmFloor($e.c.v[0])+","+bmFloor($e.c.v[1])+","+bmFloor($e.c.v[2])+")"),($e.o._mdf||He)&&Ue.pElem.setAttribute("stroke-opacity",$e.o.v),($e.w._mdf||He)&&(Ue.pElem.setAttribute("stroke-width",$e.w.v),Ue.msElem&&Ue.msElem.setAttribute("stroke-width",$e.w.v))}return n}();function SVGShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,n),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,t=this.shapes.length,n,Ee,Re=this.stylesList.length,Ce,Te=[],Me=!1;for(Ee=0;Ee<Re;Ee+=1){for(Ce=this.stylesList[Ee],Me=!1,Te.length=0,e=0;e<t;e+=1)n=this.shapes[e],n.styles.indexOf(Ce)!==-1&&(Te.push(n),Me=n._isAnimated||Me);Te.length>1&&Me&&this.setShapesAsAnimated(Te)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var n,Ee=new SVGStyleData(e,t),Re=Ee.pElem;if(e.ty==="st")n=new SVGStrokeStyleData(this,e,Ee);else if(e.ty==="fl")n=new SVGFillStyleData(this,e,Ee);else if(e.ty==="gf"||e.ty==="gs"){var Ce=e.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;n=new Ce(this,e,Ee),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),Re.setAttribute("mask","url("+getLocationHref()+"#"+n.maskId+")"))}else e.ty==="no"&&(n=new SVGNoStyleData(this,e,Ee));return(e.ty==="st"||e.ty==="gs")&&(Re.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),Re.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),Re.setAttribute("fill-opacity","0"),e.lj===1&&Re.setAttribute("stroke-miterlimit",e.ml)),e.r===2&&Re.setAttribute("fill-rule","evenodd"),e.ln&&Re.setAttribute("id",e.ln),e.cl&&Re.setAttribute("class",e.cl),e.bm&&(Re.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(Ee),this.addToAnimatedContents(e,n),n},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var n=TransformPropertyFactory.getTransformProperty(this,e,this),Ee=new SVGTransformData(n,n.o,t);return this.addToAnimatedContents(e,Ee),Ee},SVGShapeElement.prototype.createShapeElement=function(e,t,n){var Ee=4;e.ty==="rc"?Ee=5:e.ty==="el"?Ee=6:e.ty==="sr"&&(Ee=7);var Re=ShapePropertyFactory.getShapeProp(this,e,Ee,this),Ce=new SVGShapeData(t,n,Re);return this.shapes.push(Ce),this.addShapeToModifiers(Ce),this.addToAnimatedContents(e,Ce),Ce},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var n=0,Ee=this.animatedContents.length;n<Ee;){if(this.animatedContents[n].element===t)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var t=e.styles,n,Ee=this.stylesList.length;for(n=0;n<Ee;n+=1)t.indexOf(this.stylesList[n])===-1&&!this.stylesList[n].closed&&t.push(this.stylesList[n])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,n,Ee,Re,Ce,Te){var Me=[].concat(Ce),De,Oe=e.length-1,Be,ze,$e=[],He=[],Ue,Ve,We;for(De=Oe;De>=0;De-=1){if(We=this.searchProcessedElement(e[De]),We?t[De]=n[We-1]:e[De]._render=Te,e[De].ty==="fl"||e[De].ty==="st"||e[De].ty==="gf"||e[De].ty==="gs"||e[De].ty==="no")We?t[De].style.closed=e[De].hd:t[De]=this.createStyleElement(e[De],Re),e[De]._render&&t[De].style.pElem.parentNode!==Ee&&Ee.appendChild(t[De].style.pElem),$e.push(t[De].style);else if(e[De].ty==="gr"){if(!We)t[De]=this.createGroupElement(e[De]);else for(ze=t[De].it.length,Be=0;Be<ze;Be+=1)t[De].prevViewData[Be]=t[De].it[Be];this.searchShapes(e[De].it,t[De].it,t[De].prevViewData,t[De].gr,Re+1,Me,Te),e[De]._render&&t[De].gr.parentNode!==Ee&&Ee.appendChild(t[De].gr)}else e[De].ty==="tr"?(We||(t[De]=this.createTransformElement(e[De],Ee)),Ue=t[De].transform,Me.push(Ue)):e[De].ty==="sh"||e[De].ty==="rc"||e[De].ty==="el"||e[De].ty==="sr"?(We||(t[De]=this.createShapeElement(e[De],Me,Re)),this.setElementStyles(t[De])):e[De].ty==="tm"||e[De].ty==="rd"||e[De].ty==="ms"||e[De].ty==="pb"||e[De].ty==="zz"||e[De].ty==="op"?(We?(Ve=t[De],Ve.closed=!1):(Ve=ShapeModifiers.getModifier(e[De].ty),Ve.init(this,e[De]),t[De]=Ve,this.shapeModifiers.push(Ve)),He.push(Ve)):e[De].ty==="rp"&&(We?(Ve=t[De],Ve.closed=!0):(Ve=ShapeModifiers.getModifier(e[De].ty),t[De]=Ve,Ve.init(this,e,De,t),this.shapeModifiers.push(Ve),Te=!1),He.push(Ve));this.addProcessedElement(e[De],De+1)}for(Oe=$e.length,De=0;De<Oe;De+=1)$e[De].closed=!0;for(Oe=He.length,De=0;De<Oe;De+=1)He[De].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,t=this.animatedContents.length,n;for(e=0;e<t;e+=1)n=this.animatedContents[e],(this._isFirstFrame||n.element._isAnimated)&&n.data!==!0&&n.fn(n.data,n.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(e,t,n,Ee,Re,Ce){this.o=e,this.sw=t,this.sc=n,this.fc=Ee,this.m=Re,this.p=Ce,this._mdf={o:!0,sw:!!t,sc:!!n,fc:!!Ee,m:!0,p:!0}}LetterProps.prototype.update=function(e,t,n,Ee,Re,Ce){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var Te=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,Te=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,Te=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,Te=!0),this.fc!==Ee&&(this.fc=Ee,this._mdf.fc=!0,Te=!0),this.m!==Re&&(this.m=Re,this._mdf.m=!0,Te=!0),Ce.length&&(this.p[0]!==Ce[0]||this.p[1]!==Ce[1]||this.p[4]!==Ce[4]||this.p[5]!==Ce[5]||this.p[12]!==Ce[12]||this.p[13]!==Ce[13])&&(this.p=Ce,this._mdf.p=!0,Te=!0),Te};function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,t.d&&t.d.sid&&(t.d=e.globalData.slotManager.getProp(t.d)),this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!e)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,n=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var Ee,Re=this.effectsSequence.length,Ce=e||this.data.d.k[this.keysIndex].s;for(Ee=0;Ee<Re;Ee+=1)n!==this.keysIndex?Ce=this.effectsSequence[Ee](Ce,Ce.t):Ce=this.effectsSequence[Ee](this.currentData,Ce.t);t!==Ce&&this.setCurrentData(Ce),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,n=0,Ee=e.length;n<=Ee-1&&!(n===Ee-1||e[n+1].t>t);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t=[],n=0,Ee=e.length,Re,Ce,Te=!1,Me=!1,De="";n<Ee;)Te=Me,Me=!1,Re=e.charCodeAt(n),De=e.charAt(n),FontManager.isCombinedCharacter(Re)?Te=!0:Re>=55296&&Re<=56319?FontManager.isRegionalFlag(e,n)?De=e.substr(n,14):(Ce=e.charCodeAt(n+1),Ce>=56320&&Ce<=57343&&(FontManager.isModifier(Re,Ce)?(De=e.substr(n,2),Te=!0):FontManager.isFlagEmoji(e.substr(n,4))?De=e.substr(n,4):De=e.substr(n,2))):Re>56319?(Ce=e.charCodeAt(n+1),FontManager.isVariationSelector(Re)&&(Te=!0)):FontManager.isZeroWidthJoiner(Re)&&(Te=!0,Me=!0),Te?(t[t.length-1]+=De,Te=!1):t.push(De),n+=De.length;return t},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t=this.elem.globalData.fontManager,n=this.data,Ee=[],Re,Ce,Te,Me=0,De,Oe=n.m.g,Be=0,ze=0,$e=0,He=[],Ue=0,Ve=0,We,qe,Ge=t.getFontByName(e.f),Ye,Ke=0,Xe=getFontProperties(Ge);e.fWeight=Xe.weight,e.fStyle=Xe.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),Ce=e.finalText.length,e.finalLineHeight=e.lh;var Ze=e.tr/1e3*e.finalSize,er;if(e.sz)for(var St=!0,ar=e.sz[0],hr=e.sz[1],ur,dr;St;){dr=this.buildFinalText(e.t),ur=0,Ue=0,Ce=dr.length,Ze=e.tr/1e3*e.finalSize;var vr=-1;for(Re=0;Re<Ce;Re+=1)er=dr[Re].charCodeAt(0),Te=!1,dr[Re]===" "?vr=Re:(er===13||er===3)&&(Ue=0,Te=!0,ur+=e.finalLineHeight||e.finalSize*1.2),t.chars?(Ye=t.getCharData(dr[Re],Ge.fStyle,Ge.fFamily),Ke=Te?0:Ye.w*e.finalSize/100):Ke=t.measureText(dr[Re],e.f,e.finalSize),Ue+Ke>ar&&dr[Re]!==" "?(vr===-1?Ce+=1:Re=vr,ur+=e.finalLineHeight||e.finalSize*1.2,dr.splice(Re,vr===Re?1:0,"\r"),vr=-1,Ue=0):(Ue+=Ke,Ue+=Ze);ur+=Ge.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&hr<ur?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=dr,Ce=e.finalText.length,St=!1)}Ue=-Ze,Ke=0;var yr=0,br;for(Re=0;Re<Ce;Re+=1)if(Te=!1,br=e.finalText[Re],er=br.charCodeAt(0),er===13||er===3?(yr=0,He.push(Ue),Ve=Ue>Ve?Ue:Ve,Ue=-2*Ze,De="",Te=!0,$e+=1):De=br,t.chars?(Ye=t.getCharData(br,Ge.fStyle,t.getFontByName(e.f).fFamily),Ke=Te?0:Ye.w*e.finalSize/100):Ke=t.measureText(De,e.f,e.finalSize),br===" "?yr+=Ke+Ze:(Ue+=Ke+Ze+yr,yr=0),Ee.push({l:Ke,an:Ke,add:Be,n:Te,anIndexes:[],val:De,line:$e,animatorJustifyOffset:0}),Oe==2){if(Be+=Ke,De===""||De===" "||Re===Ce-1){for((De===""||De===" ")&&(Be-=Ke);ze<=Re;)Ee[ze].an=Be,Ee[ze].ind=Me,Ee[ze].extra=Ke,ze+=1;Me+=1,Be=0}}else if(Oe==3){if(Be+=Ke,De===""||Re===Ce-1){for(De===""&&(Be-=Ke);ze<=Re;)Ee[ze].an=Be,Ee[ze].ind=Me,Ee[ze].extra=Ke,ze+=1;Be=0,Me+=1}}else Ee[Me].ind=Me,Ee[Me].extra=0,Me+=1;if(e.l=Ee,Ve=Ue>Ve?Ue:Ve,He.push(Ue),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=Ve,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=He;var lr=n.a,cr,rr;qe=lr.length;var pr,mr,ir=[];for(We=0;We<qe;We+=1){for(cr=lr[We],cr.a.sc&&(e.strokeColorAnim=!0),cr.a.sw&&(e.strokeWidthAnim=!0),(cr.a.fc||cr.a.fh||cr.a.fs||cr.a.fb)&&(e.fillColorAnim=!0),mr=0,pr=cr.s.b,Re=0;Re<Ce;Re+=1)rr=Ee[Re],rr.anIndexes[We]=mr,(pr==1&&rr.val!==""||pr==2&&rr.val!==""&&rr.val!==" "||pr==3&&(rr.n||rr.val==" "||Re==Ce-1)||pr==4&&(rr.n||Re==Ce-1))&&(cr.s.rn===1&&ir.push(mr),mr+=1);n.a[We].s.totalChars=mr;var nr=-1,gr;if(cr.s.rn===1)for(Re=0;Re<Ce;Re+=1)rr=Ee[Re],nr!=rr.anIndexes[We]&&(nr=rr.anIndexes[We],gr=ir.splice(Math.floor(Math.random()*ir.length),1)[0]),rr.anIndexes[We]=gr}e.yOffset=e.finalLineHeight||e.finalSize*1.2,e.ls=e.ls||0,e.ascent=Ge.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=t===void 0?this.keysIndex:t;var n=this.copyData({},this.data.d.k[t].s);n=this.copyData(n,e),this.data.d.k[t].s=n,this.recalculate(t),this.setCurrentData(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,t=Math.min,n=Math.floor;function Ee(Ce,Te){this._currentTextLength=-1,this.k=!1,this.data=Te,this.elem=Ce,this.comp=Ce.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(Ce),this.s=PropertyFactory.getProp(Ce,Te.s||{k:0},0,0,this),"e"in Te?this.e=PropertyFactory.getProp(Ce,Te.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(Ce,Te.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(Ce,Te.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(Ce,Te.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(Ce,Te.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(Ce,Te.a,0,.01,this),this.dynamicProperties.length||this.getValue()}Ee.prototype={getMult:function(Te){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var Me=0,De=0,Oe=1,Be=1;this.ne.v>0?Me=this.ne.v/100:De=-this.ne.v/100,this.xe.v>0?Oe=1-this.xe.v/100:Be=1+this.xe.v/100;var ze=BezierFactory.getBezierEasing(Me,De,Oe,Be).get,$e=0,He=this.finalS,Ue=this.finalE,Ve=this.data.sh;if(Ve===2)Ue===He?$e=Te>=Ue?1:0:$e=e(0,t(.5/(Ue-He)+(Te-He)/(Ue-He),1)),$e=ze($e);else if(Ve===3)Ue===He?$e=Te>=Ue?0:1:$e=1-e(0,t(.5/(Ue-He)+(Te-He)/(Ue-He),1)),$e=ze($e);else if(Ve===4)Ue===He?$e=0:($e=e(0,t(.5/(Ue-He)+(Te-He)/(Ue-He),1)),$e<.5?$e*=2:$e=1-2*($e-.5)),$e=ze($e);else if(Ve===5){if(Ue===He)$e=0;else{var We=Ue-He;Te=t(e(0,Te+.5-He),Ue-He);var qe=-We/2+Te,Ge=We/2;$e=Math.sqrt(1-qe*qe/(Ge*Ge))}$e=ze($e)}else Ve===6?(Ue===He?$e=0:(Te=t(e(0,Te+.5-He),Ue-He),$e=(1+Math.cos(Math.PI+Math.PI*2*Te/(Ue-He)))/2),$e=ze($e)):(Te>=n(He)&&(Te-He<0?$e=e(0,t(t(Ue,1)-(He-Te),1)):$e=e(0,t(Ue-Te,1))),$e=ze($e));if(this.sm.v!==100){var Ye=this.sm.v*.01;Ye===0&&(Ye=1e-8);var Ke=.5-Ye*.5;$e<Ke?$e=0:($e=($e-Ke)/Ye,$e>1&&($e=1))}return $e*this.a.v},getValue:function(Te){this.iterateDynamicProperties(),this._mdf=Te||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,Te&&this.data.r===2&&(this.e.v=this._currentTextLength);var Me=this.data.r===2?1:100/this.data.totalChars,De=this.o.v/Me,Oe=this.s.v/Me+De,Be=this.e.v/Me+De;if(Oe>Be){var ze=Oe;Oe=Be,Be=ze}this.finalS=Oe,this.finalE=Be}},extendPrototype([DynamicPropertyContainer],Ee);function Re(Ce,Te,Me){return new Ee(Ce,Te)}return{getTextSelectorProp:Re}}();function TextAnimatorDataProperty(e,t,n){var Ee={propType:!1},Re=PropertyFactory.getProp,Ce=t.a;this.a={r:Ce.r?Re(e,Ce.r,0,degToRads,n):Ee,rx:Ce.rx?Re(e,Ce.rx,0,degToRads,n):Ee,ry:Ce.ry?Re(e,Ce.ry,0,degToRads,n):Ee,sk:Ce.sk?Re(e,Ce.sk,0,degToRads,n):Ee,sa:Ce.sa?Re(e,Ce.sa,0,degToRads,n):Ee,s:Ce.s?Re(e,Ce.s,1,.01,n):Ee,a:Ce.a?Re(e,Ce.a,1,0,n):Ee,o:Ce.o?Re(e,Ce.o,0,.01,n):Ee,p:Ce.p?Re(e,Ce.p,1,0,n):Ee,sw:Ce.sw?Re(e,Ce.sw,0,0,n):Ee,sc:Ce.sc?Re(e,Ce.sc,1,0,n):Ee,fc:Ce.fc?Re(e,Ce.fc,1,0,n):Ee,fh:Ce.fh?Re(e,Ce.fh,0,0,n):Ee,fs:Ce.fs?Re(e,Ce.fs,0,.01,n):Ee,fb:Ce.fb?Re(e,Ce.fb,0,.01,n):Ee,t:Ce.t?Re(e,Ce.t,0,0,n):Ee},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,n),this.s.t=t.s.t}function TextAnimatorProperty(e,t,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}TextAnimatorProperty.prototype.searchProperties=function(){var e,t=this._textData.a.length,n,Ee=PropertyFactory.getProp;for(e=0;e<t;e+=1)n=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,n,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:Ee(this._elem,this._textData.p.a,0,0,this),f:Ee(this._elem,this._textData.p.f,0,0,this),l:Ee(this._elem,this._textData.p.l,0,0,this),r:Ee(this._elem,this._textData.p.r,0,0,this),p:Ee(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=Ee(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,!(!this._mdf&&!this._isFirstFrame&&!t&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var n=this._moreOptions.alignment.v,Ee=this._animatorsData,Re=this._textData,Ce=this.mHelper,Te=this._renderType,Me=this.renderedLetters.length,De,Oe,Be,ze,$e=e.l,He,Ue,Ve,We,qe,Ge,Ye,Ke,Xe,Ze,er,St,ar,hr,ur;if(this._hasMaskedPath){if(ur=this._pathData.m,!this._pathData.n||this._pathData._mdf){var dr=ur.v;this._pathData.r.v&&(dr=dr.reverse()),He={tLength:0,segments:[]},ze=dr._length-1;var vr;for(St=0,Be=0;Be<ze;Be+=1)vr=bez.buildBezierData(dr.v[Be],dr.v[Be+1],[dr.o[Be][0]-dr.v[Be][0],dr.o[Be][1]-dr.v[Be][1]],[dr.i[Be+1][0]-dr.v[Be+1][0],dr.i[Be+1][1]-dr.v[Be+1][1]]),He.tLength+=vr.segmentLength,He.segments.push(vr),St+=vr.segmentLength;Be=ze,ur.v.c&&(vr=bez.buildBezierData(dr.v[Be],dr.v[0],[dr.o[Be][0]-dr.v[Be][0],dr.o[Be][1]-dr.v[Be][1]],[dr.i[0][0]-dr.v[0][0],dr.i[0][1]-dr.v[0][1]]),He.tLength+=vr.segmentLength,He.segments.push(vr),St+=vr.segmentLength),this._pathData.pi=He}if(He=this._pathData.pi,Ue=this._pathData.f.v,Ye=0,Ge=1,We=0,qe=!0,Ze=He.segments,Ue<0&&ur.v.c)for(He.tLength<Math.abs(Ue)&&(Ue=-Math.abs(Ue)%He.tLength),Ye=Ze.length-1,Xe=Ze[Ye].points,Ge=Xe.length-1;Ue<0;)Ue+=Xe[Ge].partialLength,Ge-=1,Ge<0&&(Ye-=1,Xe=Ze[Ye].points,Ge=Xe.length-1);Xe=Ze[Ye].points,Ke=Xe[Ge-1],Ve=Xe[Ge],er=Ve.partialLength}ze=$e.length,De=0,Oe=0;var yr=e.finalSize*1.2*.714,br=!0,lr,cr,rr,pr,mr;pr=Ee.length;var ir,nr=-1,gr,Er,Cr,Nr=Ue,Mr=Ye,Fr=Ge,$r=-1,Wr,Zr,nn,an,Yr,Rr,Xr,mn,En="",rn=this.defaultPropsArray,_r;if(e.j===2||e.j===1){var Lr=0,Or=0,tn=e.j===2?-.5:-1,sn=0,en=!0;for(Be=0;Be<ze;Be+=1)if($e[Be].n){for(Lr&&(Lr+=Or);sn<Be;)$e[sn].animatorJustifyOffset=Lr,sn+=1;Lr=0,en=!0}else{for(rr=0;rr<pr;rr+=1)lr=Ee[rr].a,lr.t.propType&&(en&&e.j===2&&(Or+=lr.t.v*tn),cr=Ee[rr].s,ir=cr.getMult($e[Be].anIndexes[rr],Re.a[rr].s.totalChars),ir.length?Lr+=lr.t.v*ir[0]*tn:Lr+=lr.t.v*ir*tn);en=!1}for(Lr&&(Lr+=Or);sn<Be;)$e[sn].animatorJustifyOffset=Lr,sn+=1}for(Be=0;Be<ze;Be+=1){if(Ce.reset(),Wr=1,$e[Be].n)De=0,Oe+=e.yOffset,Oe+=br?1:0,Ue=Nr,br=!1,this._hasMaskedPath&&(Ye=Mr,Ge=Fr,Xe=Ze[Ye].points,Ke=Xe[Ge-1],Ve=Xe[Ge],er=Ve.partialLength,We=0),En="",mn="",Rr="",_r="",rn=this.defaultPropsArray;else{if(this._hasMaskedPath){if($r!==$e[Be].line){switch(e.j){case 1:Ue+=St-e.lineWidths[$e[Be].line];break;case 2:Ue+=(St-e.lineWidths[$e[Be].line])/2;break}$r=$e[Be].line}nr!==$e[Be].ind&&($e[nr]&&(Ue+=$e[nr].extra),Ue+=$e[Be].an/2,nr=$e[Be].ind),Ue+=n[0]*$e[Be].an*.005;var fn=0;for(rr=0;rr<pr;rr+=1)lr=Ee[rr].a,lr.p.propType&&(cr=Ee[rr].s,ir=cr.getMult($e[Be].anIndexes[rr],Re.a[rr].s.totalChars),ir.length?fn+=lr.p.v[0]*ir[0]:fn+=lr.p.v[0]*ir),lr.a.propType&&(cr=Ee[rr].s,ir=cr.getMult($e[Be].anIndexes[rr],Re.a[rr].s.totalChars),ir.length?fn+=lr.a.v[0]*ir[0]:fn+=lr.a.v[0]*ir);for(qe=!0,this._pathData.a.v&&(Ue=$e[0].an*.5+(St-this._pathData.f.v-$e[0].an*.5-$e[$e.length-1].an*.5)*nr/(ze-1),Ue+=this._pathData.f.v);qe;)We+er>=Ue+fn||!Xe?(ar=(Ue+fn-We)/Ve.partialLength,Er=Ke.point[0]+(Ve.point[0]-Ke.point[0])*ar,Cr=Ke.point[1]+(Ve.point[1]-Ke.point[1])*ar,Ce.translate(-n[0]*$e[Be].an*.005,-(n[1]*yr)*.01),qe=!1):Xe&&(We+=Ve.partialLength,Ge+=1,Ge>=Xe.length&&(Ge=0,Ye+=1,Ze[Ye]?Xe=Ze[Ye].points:ur.v.c?(Ge=0,Ye=0,Xe=Ze[Ye].points):(We-=Ve.partialLength,Xe=null)),Xe&&(Ke=Ve,Ve=Xe[Ge],er=Ve.partialLength));gr=$e[Be].an/2-$e[Be].add,Ce.translate(-gr,0,0)}else gr=$e[Be].an/2-$e[Be].add,Ce.translate(-gr,0,0),Ce.translate(-n[0]*$e[Be].an*.005,-n[1]*yr*.01,0);for(rr=0;rr<pr;rr+=1)lr=Ee[rr].a,lr.t.propType&&(cr=Ee[rr].s,ir=cr.getMult($e[Be].anIndexes[rr],Re.a[rr].s.totalChars),(De!==0||e.j!==0)&&(this._hasMaskedPath?ir.length?Ue+=lr.t.v*ir[0]:Ue+=lr.t.v*ir:ir.length?De+=lr.t.v*ir[0]:De+=lr.t.v*ir));for(e.strokeWidthAnim&&(nn=e.sw||0),e.strokeColorAnim&&(e.sc?Zr=[e.sc[0],e.sc[1],e.sc[2]]:Zr=[0,0,0]),e.fillColorAnim&&e.fc&&(an=[e.fc[0],e.fc[1],e.fc[2]]),rr=0;rr<pr;rr+=1)lr=Ee[rr].a,lr.a.propType&&(cr=Ee[rr].s,ir=cr.getMult($e[Be].anIndexes[rr],Re.a[rr].s.totalChars),ir.length?Ce.translate(-lr.a.v[0]*ir[0],-lr.a.v[1]*ir[1],lr.a.v[2]*ir[2]):Ce.translate(-lr.a.v[0]*ir,-lr.a.v[1]*ir,lr.a.v[2]*ir));for(rr=0;rr<pr;rr+=1)lr=Ee[rr].a,lr.s.propType&&(cr=Ee[rr].s,ir=cr.getMult($e[Be].anIndexes[rr],Re.a[rr].s.totalChars),ir.length?Ce.scale(1+(lr.s.v[0]-1)*ir[0],1+(lr.s.v[1]-1)*ir[1],1):Ce.scale(1+(lr.s.v[0]-1)*ir,1+(lr.s.v[1]-1)*ir,1));for(rr=0;rr<pr;rr+=1){if(lr=Ee[rr].a,cr=Ee[rr].s,ir=cr.getMult($e[Be].anIndexes[rr],Re.a[rr].s.totalChars),lr.sk.propType&&(ir.length?Ce.skewFromAxis(-lr.sk.v*ir[0],lr.sa.v*ir[1]):Ce.skewFromAxis(-lr.sk.v*ir,lr.sa.v*ir)),lr.r.propType&&(ir.length?Ce.rotateZ(-lr.r.v*ir[2]):Ce.rotateZ(-lr.r.v*ir)),lr.ry.propType&&(ir.length?Ce.rotateY(lr.ry.v*ir[1]):Ce.rotateY(lr.ry.v*ir)),lr.rx.propType&&(ir.length?Ce.rotateX(lr.rx.v*ir[0]):Ce.rotateX(lr.rx.v*ir)),lr.o.propType&&(ir.length?Wr+=(lr.o.v*ir[0]-Wr)*ir[0]:Wr+=(lr.o.v*ir-Wr)*ir),e.strokeWidthAnim&&lr.sw.propType&&(ir.length?nn+=lr.sw.v*ir[0]:nn+=lr.sw.v*ir),e.strokeColorAnim&&lr.sc.propType)for(Yr=0;Yr<3;Yr+=1)ir.length?Zr[Yr]+=(lr.sc.v[Yr]-Zr[Yr])*ir[0]:Zr[Yr]+=(lr.sc.v[Yr]-Zr[Yr])*ir;if(e.fillColorAnim&&e.fc){if(lr.fc.propType)for(Yr=0;Yr<3;Yr+=1)ir.length?an[Yr]+=(lr.fc.v[Yr]-an[Yr])*ir[0]:an[Yr]+=(lr.fc.v[Yr]-an[Yr])*ir;lr.fh.propType&&(ir.length?an=addHueToRGB(an,lr.fh.v*ir[0]):an=addHueToRGB(an,lr.fh.v*ir)),lr.fs.propType&&(ir.length?an=addSaturationToRGB(an,lr.fs.v*ir[0]):an=addSaturationToRGB(an,lr.fs.v*ir)),lr.fb.propType&&(ir.length?an=addBrightnessToRGB(an,lr.fb.v*ir[0]):an=addBrightnessToRGB(an,lr.fb.v*ir))}}for(rr=0;rr<pr;rr+=1)lr=Ee[rr].a,lr.p.propType&&(cr=Ee[rr].s,ir=cr.getMult($e[Be].anIndexes[rr],Re.a[rr].s.totalChars),this._hasMaskedPath?ir.length?Ce.translate(0,lr.p.v[1]*ir[0],-lr.p.v[2]*ir[1]):Ce.translate(0,lr.p.v[1]*ir,-lr.p.v[2]*ir):ir.length?Ce.translate(lr.p.v[0]*ir[0],lr.p.v[1]*ir[1],-lr.p.v[2]*ir[2]):Ce.translate(lr.p.v[0]*ir,lr.p.v[1]*ir,-lr.p.v[2]*ir));if(e.strokeWidthAnim&&(Rr=nn<0?0:nn),e.strokeColorAnim&&(Xr="rgb("+Math.round(Zr[0]*255)+","+Math.round(Zr[1]*255)+","+Math.round(Zr[2]*255)+")"),e.fillColorAnim&&e.fc&&(mn="rgb("+Math.round(an[0]*255)+","+Math.round(an[1]*255)+","+Math.round(an[2]*255)+")"),this._hasMaskedPath){if(Ce.translate(0,-e.ls),Ce.translate(0,n[1]*yr*.01+Oe,0),this._pathData.p.v){hr=(Ve.point[1]-Ke.point[1])/(Ve.point[0]-Ke.point[0]);var Sn=Math.atan(hr)*180/Math.PI;Ve.point[0]<Ke.point[0]&&(Sn+=180),Ce.rotate(-Sn*Math.PI/180)}Ce.translate(Er,Cr,0),Ue-=n[0]*$e[Be].an*.005,$e[Be+1]&&nr!==$e[Be+1].ind&&(Ue+=$e[Be].an/2,Ue+=e.tr*.001*e.finalSize)}else{switch(Ce.translate(De,Oe,0),e.ps&&Ce.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:Ce.translate($e[Be].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[$e[Be].line]),0,0);break;case 2:Ce.translate($e[Be].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[$e[Be].line])/2,0,0);break}Ce.translate(0,-e.ls),Ce.translate(gr,0,0),Ce.translate(n[0]*$e[Be].an*.005,n[1]*yr*.01,0),De+=$e[Be].l+e.tr*.001*e.finalSize}Te==="html"?En=Ce.toCSS():Te==="svg"?En=Ce.to2dCSS():rn=[Ce.props[0],Ce.props[1],Ce.props[2],Ce.props[3],Ce.props[4],Ce.props[5],Ce.props[6],Ce.props[7],Ce.props[8],Ce.props[9],Ce.props[10],Ce.props[11],Ce.props[12],Ce.props[13],Ce.props[14],Ce.props[15]],_r=Wr}Me<=Be?(mr=new LetterProps(_r,Rr,Xr,mn,En,rn),this.renderedLetters.push(mr),Me+=1,this.lettersChangedFlag=!0):(mr=this.renderedLetters[Be],this.lettersChangedFlag=mr.update(_r,Rr,Xr,mn,En,rn)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(e,t,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,n),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)},ITextElement.prototype.createPathShape=function(e,t){var n,Ee=t.length,Re,Ce="";for(n=0;n<Ee;n+=1)t[n].ty==="sh"&&(Re=t[n].ks.k,Ce+=buildShapeString(Re,Re.i.length,!0,e));return Ce},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,n,Ee,Re){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n])/2,0,0);break}t.translate(Ee,Re,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(e[0]*255)+","+Math.round(e[1]*255)+","+Math.round(e[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(e,t,n){this.textSpans=[],this.renderType="svg",this.initElement(e,t,n)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var t=0,n=e.length,Ee=[],Re="";t<n;)e[t]==="\r"||e[t]===""?(Ee.push(Re),Re=""):Re+=e[t],t+=1;return Ee.push(Re),Ee},SVGTextLottieElement.prototype.buildShapeData=function(e,t){if(e.shapes&&e.shapes.length){var n=e.shapes[0];if(n.it){var Ee=n.it[n.it.length-1];Ee.s&&(Ee.s.k[0]=t,Ee.s.k[1]=t)}}return e},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var e,t,n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var Ee=this.globalData.fontManager.getFontByName(n.f);if(Ee.fClass)this.layerElement.setAttribute("class",Ee.fClass);else{this.layerElement.setAttribute("font-family",Ee.fFamily);var Re=n.fWeight,Ce=n.fStyle;this.layerElement.setAttribute("font-style",Ce),this.layerElement.setAttribute("font-weight",Re)}this.layerElement.setAttribute("aria-label",n.t);var Te=n.l||[],Me=!!this.globalData.fontManager.chars;t=Te.length;var De,Oe=this.mHelper,Be="",ze=this.data.singleShape,$e=0,He=0,Ue=!0,Ve=n.tr*.001*n.finalSize;if(ze&&!Me&&!n.sz){var We=this.textContainer,qe="start";switch(n.j){case 1:qe="end";break;case 2:qe="middle";break;default:qe="start";break}We.setAttribute("text-anchor",qe),We.setAttribute("letter-spacing",Ve);var Ge=this.buildTextContents(n.finalText);for(t=Ge.length,He=n.ps?n.ps[1]+n.ascent:0,e=0;e<t;e+=1)De=this.textSpans[e].span||createNS("tspan"),De.textContent=Ge[e],De.setAttribute("x",0),De.setAttribute("y",He),De.style.display="inherit",We.appendChild(De),this.textSpans[e]||(this.textSpans[e]={span:null,glyph:null}),this.textSpans[e].span=De,He+=n.finalLineHeight;this.layerElement.appendChild(We)}else{var Ye=this.textSpans.length,Ke;for(e=0;e<t;e+=1){if(this.textSpans[e]||(this.textSpans[e]={span:null,childSpan:null,glyph:null}),!Me||!ze||e===0){if(De=Ye>e?this.textSpans[e].span:createNS(Me?"g":"text"),Ye<=e){if(De.setAttribute("stroke-linecap","butt"),De.setAttribute("stroke-linejoin","round"),De.setAttribute("stroke-miterlimit","4"),this.textSpans[e].span=De,Me){var Xe=createNS("g");De.appendChild(Xe),this.textSpans[e].childSpan=Xe}this.textSpans[e].span=De,this.layerElement.appendChild(De)}De.style.display="inherit"}if(Oe.reset(),ze&&(Te[e].n&&($e=-Ve,He+=n.yOffset,He+=Ue?1:0,Ue=!1),this.applyTextPropertiesToMatrix(n,Oe,Te[e].line,$e,He),$e+=Te[e].l||0,$e+=Ve),Me){Ke=this.globalData.fontManager.getCharData(n.finalText[e],Ee.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily);var Ze;if(Ke.t===1)Ze=new SVGCompElement(Ke.data,this.globalData,this);else{var er=emptyShapeData;Ke.data&&Ke.data.shapes&&(er=this.buildShapeData(Ke.data,n.finalSize)),Ze=new SVGShapeElement(er,this.globalData,this)}if(this.textSpans[e].glyph){var St=this.textSpans[e].glyph;this.textSpans[e].childSpan.removeChild(St.layerElement),St.destroy()}this.textSpans[e].glyph=Ze,Ze._debug=!0,Ze.prepareFrame(0),Ze.renderFrame(),this.textSpans[e].childSpan.appendChild(Ze.layerElement),Ke.t===1&&this.textSpans[e].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else ze&&De.setAttribute("transform","translate("+Oe.props[12]+","+Oe.props[13]+")"),De.textContent=Te[e].val,De.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}ze&&De&&De.setAttribute("d",Be)}for(;e<this.textSpans.length;)this.textSpans[e].span.style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var e,t=this.textSpans.length,n;for(this.renderedFrame=this.comp.renderedFrame,e=0;e<t;e+=1)n=this.textSpans[e].glyph,n&&(n.prepareFrame(this.comp.renderedFrame-this.data.st),n._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var e,t,n=this.textAnimator.renderedLetters,Ee=this.textProperty.currentData.l;t=Ee.length;var Re,Ce,Te;for(e=0;e<t;e+=1)Ee[e].n||(Re=n[e],Ce=this.textSpans[e].span,Te=this.textSpans[e].glyph,Te&&Te.renderFrame(),Re._mdf.m&&Ce.setAttribute("transform",Re.m),Re._mdf.o&&Ce.setAttribute("opacity",Re.o),Re._mdf.sw&&Ce.setAttribute("stroke-width",Re.sw),Re._mdf.sc&&Ce.setAttribute("stroke",Re.sc),Re._mdf.fc&&Ce.setAttribute("fill",Re.fc))}};function ISolidElement(e,t,n){this.initElement(e,t,n)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)};function NullElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initFrame(),this.initTransform(e,t,n),this.initHierarchy()}NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRendererBase.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var n=createNS("clipPath"),Ee=createNS("rect");Ee.setAttribute("width",e.w),Ee.setAttribute("height",e.h),Ee.setAttribute("x",0),Ee.setAttribute("y",0);var Re=createElementID();n.setAttribute("id",Re),n.appendChild(Ee),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+Re+")"),t.appendChild(n),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e,t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(e){var t=0,n=this.layers.length;for(t=0;t<n;t+=1)if(this.layers[t].ind===e)return t;return-1},SVGRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!(t[e]||this.layers[e].ty===99)){t[e]=!0;var n=this.createItem(this.layers[e]);if(t[e]=n,getExpressionsPlugin()&&(this.layers[e].ty===0&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,e),this.layers[e].tt){var Ee="tp"in this.layers[e]?this.findIndexByInd(this.layers[e].tp):e-1;if(Ee===-1)return;if(!this.elements[Ee]||this.elements[Ee]===!0)this.buildItem(Ee),this.addPendingElement(n);else{var Re=t[Ee],Ce=Re.getMatte(this.layers[e].tt);n.setMatte(Ce)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,n=this.elements.length;t<n;){if(this.elements[t]===e){var Ee="tp"in e.data?this.findIndexByInd(e.data.tp):t-1,Re=this.elements[Ee],Ce=Re.getMatte(this.layers[t].tt);e.setMatte(Ce);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(e){if(!(this.renderedFrame===e||this.destroyed)){e===null?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var t,n=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<n;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){for(var Ee=0,Re;Ee<t;)this.elements[Ee]&&this.elements[Ee]!==!0&&this.elements[Ee].getBaseElement()&&(Re=this.elements[Ee].getBaseElement()),Ee+=1;Re?this.layerElement.insertBefore(n,Re):this.layerElement.appendChild(n)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!t.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var n,Ee=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=Ee-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(e,t,n){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)};function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(t&&t.title){var Ee=createNS("title"),Re=createElementID();Ee.setAttribute("id",Re),Ee.textContent=t.title,this.svgElement.appendChild(Ee),n+=Re}if(t&&t.description){var Ce=createNS("desc"),Te=createElementID();Ce.setAttribute("id",Te),Ce.textContent=t.description,this.svgElement.appendChild(Ce),n+=" "+Te}n&&this.svgElement.setAttribute("aria-labelledby",n);var Me=createNS("defs");this.svgElement.appendChild(Me);var De=createNS("g");this.svgElement.appendChild(De),this.layerElement=De,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&t.hideOnTransparent===!1),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:Me,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(t){var n,Ee=t.length,Re="_";for(n=0;n<Ee;n+=1)Re+=t[n].transform.key+"_";var Ce=this.sequences[Re];return Ce||(Ce={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[Re]=Ce,this.sequenceList.push(Ce)),Ce},processSequence:function(t,n){for(var Ee=0,Re=t.transforms.length,Ce=n;Ee<Re&&!n;){if(t.transforms[Ee].transform.mProps._mdf){Ce=!0;break}Ee+=1}if(Ce)for(t.finalTransform.reset(),Ee=Re-1;Ee>=0;Ee-=1)t.finalTransform.multiply(t.transforms[Ee].transform.mProps.v);t._mdf=Ce},processSequences:function(t){var n,Ee=this.sequenceList.length;for(n=0;n<Ee;n+=1)this.processSequence(this.sequenceList[n],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var t="__lottie_element_luma_buffer",n=null,Ee=null,Re=null;function Ce(){var De=createNS("svg"),Oe=createNS("filter"),Be=createNS("feColorMatrix");return Oe.setAttribute("id",t),Be.setAttribute("type","matrix"),Be.setAttribute("color-interpolation-filters","sRGB"),Be.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),Oe.appendChild(Be),De.appendChild(Oe),De.setAttribute("id",t+"_svg"),featureSupport.svgLumaHidden&&(De.style.display="none"),De}function Te(){n||(Re=Ce(),document.body.appendChild(Re),n=createTag("canvas"),Ee=n.getContext("2d"),Ee.filter="url(#"+t+")",Ee.fillStyle="rgba(0,0,0,0)",Ee.fillRect(0,0,1,1))}function Me(De){return n||Te(),n.width=De.width,n.height=De.height,Ee.filter="url(#"+t+")",n}return{load:Te,get:Me}};function createCanvas(e,t){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(e,t);var n=createTag("canvas");return n.width=e,n.height=t,n}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(e){var t,n=e.data.ef?e.data.ef.length:0;this.filters=[];var Ee;for(t=0;t<n;t+=1){Ee=null;var Re=e.data.ef[t].ty;if(registeredEffects[Re]){var Ce=registeredEffects[Re].effect;Ee=new Ce(e.effectsManager.effectElements[t],e)}Ee&&this.filters.push(Ee)}this.filters.length&&e.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},CVEffects.prototype.getEffects=function(e){var t,n=this.filters.length,Ee=[];for(t=0;t<n;t+=1)this.filters[t].type===e&&Ee.push(this.filters[t]);return Ee};function registerEffect(e,t){registeredEffects[e]={effect:t}}function CVMaskElement(e,t){this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var n,Ee=this.masksProperties.length,Re=!1;for(n=0;n<Ee;n+=1)this.masksProperties[n].mode!=="n"&&(Re=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=Re,Re&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e=this.element.finalTransform.mat,t=this.element.canvasContext,n,Ee=this.masksProperties.length,Re,Ce,Te;for(t.beginPath(),n=0;n<Ee;n+=1)if(this.masksProperties[n].mode!=="n"){this.masksProperties[n].inv&&(t.moveTo(0,0),t.lineTo(this.element.globalData.compSize.w,0),t.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),t.lineTo(0,this.element.globalData.compSize.h),t.lineTo(0,0)),Te=this.viewData[n].v,Re=e.applyToPointArray(Te.v[0][0],Te.v[0][1],0),t.moveTo(Re[0],Re[1]);var Me,De=Te._length;for(Me=1;Me<De;Me+=1)Ce=e.applyToTriplePoints(Te.o[Me-1],Te.i[Me],Te.v[Me]),t.bezierCurveTo(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5]);Ce=e.applyToTriplePoints(Te.o[Me-1],Te.i[0],Te.v[0]),t.bezierCurveTo(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5])}this.element.globalData.renderer.save(!0),t.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var t=this.globalData.canvasContext,n=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(n);var Ee=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(Ee),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var n=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=n}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(t){t.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var t=this.buffers[0],n=t.getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var t=this.buffers[1],n=t.getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var Ee=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(Ee.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var Re=assetLoader.getLumaCanvas(this.canvasContext.canvas),Ce=Re.getContext("2d");Ce.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(Re,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(t,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(t){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!t)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var n=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(n),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(n),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(e,t,n,Ee){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var Re=4;t.ty==="rc"?Re=5:t.ty==="el"?Re=6:t.ty==="sr"&&(Re=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,Re,e);var Ce,Te=n.length,Me;for(Ce=0;Ce<Te;Ce+=1)n[Ce].closed||(Me={transforms:Ee.addTransformSequence(n[Ce].transforms),trNodes:[]},this.styledShapes.push(Me),n[Ce].elements.push(Me))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var n={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:e.hd===!0},Ee={};if(e.ty==="fl"||e.ty==="st"?(Ee.c=PropertyFactory.getProp(this,e.c,1,255,this),Ee.c.k||(n.co="rgb("+bmFloor(Ee.c.v[0])+","+bmFloor(Ee.c.v[1])+","+bmFloor(Ee.c.v[2])+")")):(e.ty==="gf"||e.ty==="gs")&&(Ee.s=PropertyFactory.getProp(this,e.s,1,null,this),Ee.e=PropertyFactory.getProp(this,e.e,1,null,this),Ee.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),Ee.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),Ee.g=new GradientProperty(this,e.g,this)),Ee.o=PropertyFactory.getProp(this,e.o,0,.01,this),e.ty==="st"||e.ty==="gs"){if(n.lc=lineCapEnum[e.lc||2],n.lj=lineJoinEnum[e.lj||2],e.lj==1&&(n.ml=e.ml),Ee.w=PropertyFactory.getProp(this,e.w,0,null,this),Ee.w.k||(n.wi=Ee.w.v),e.d){var Re=new DashProperty(this,e.d,"canvas",this);Ee.d=Re,Ee.d.k||(n.da=Ee.d.dashArray,n.do=Ee.d.dashoffset[0])}}else n.r=e.r===2?"evenodd":"nonzero";return this.stylesList.push(n),Ee.style=n,Ee},CVShapeElement.prototype.createGroupElement=function(){var e={it:[],prevViewData:[]};return e},CVShapeElement.prototype.createTransformElement=function(e){var t={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}};return t},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var t,n=this.stylesList.length;for(t=0;t<n;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,n,Ee,Re){var Ce,Te=e.length-1,Me,De,Oe=[],Be=[],ze,$e,He,Ue=[].concat(Re);for(Ce=Te;Ce>=0;Ce-=1){if(ze=this.searchProcessedElement(e[Ce]),ze?t[Ce]=n[ze-1]:e[Ce]._shouldRender=Ee,e[Ce].ty==="fl"||e[Ce].ty==="st"||e[Ce].ty==="gf"||e[Ce].ty==="gs")ze?t[Ce].style.closed=!1:t[Ce]=this.createStyleElement(e[Ce],Ue),Oe.push(t[Ce].style);else if(e[Ce].ty==="gr"){if(!ze)t[Ce]=this.createGroupElement(e[Ce]);else for(De=t[Ce].it.length,Me=0;Me<De;Me+=1)t[Ce].prevViewData[Me]=t[Ce].it[Me];this.searchShapes(e[Ce].it,t[Ce].it,t[Ce].prevViewData,Ee,Ue)}else e[Ce].ty==="tr"?(ze||(He=this.createTransformElement(e[Ce]),t[Ce]=He),Ue.push(t[Ce]),this.addTransformToStyleList(t[Ce])):e[Ce].ty==="sh"||e[Ce].ty==="rc"||e[Ce].ty==="el"||e[Ce].ty==="sr"?ze||(t[Ce]=this.createShapeElement(e[Ce])):e[Ce].ty==="tm"||e[Ce].ty==="rd"||e[Ce].ty==="pb"||e[Ce].ty==="zz"||e[Ce].ty==="op"?(ze?($e=t[Ce],$e.closed=!1):($e=ShapeModifiers.getModifier(e[Ce].ty),$e.init(this,e[Ce]),t[Ce]=$e,this.shapeModifiers.push($e)),Be.push($e)):e[Ce].ty==="rp"&&(ze?($e=t[Ce],$e.closed=!0):($e=ShapeModifiers.getModifier(e[Ce].ty),t[Ce]=$e,$e.init(this,e,Ce,t),this.shapeModifiers.push($e),Ee=!1),Be.push($e));this.addProcessedElement(e[Ce],Ce+1)}for(this.removeTransformFromStyleList(),this.closeStyles(Oe),Te=Be.length,Ce=0;Ce<Te;Ce+=1)Be[Ce].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,t=this.stylesList.length,n,Ee,Re,Ce,Te,Me,De=this.globalData.renderer,Oe=this.globalData.canvasContext,Be,ze;for(e=0;e<t;e+=1)if(ze=this.stylesList[e],Be=ze.type,!((Be==="st"||Be==="gs")&&ze.wi===0||!ze.data._shouldRender||ze.coOp===0||this.globalData.currentGlobalAlpha===0)){for(De.save(),Te=ze.elements,Be==="st"||Be==="gs"?(De.ctxStrokeStyle(Be==="st"?ze.co:ze.grd),De.ctxLineWidth(ze.wi),De.ctxLineCap(ze.lc),De.ctxLineJoin(ze.lj),De.ctxMiterLimit(ze.ml||0)):De.ctxFillStyle(Be==="fl"?ze.co:ze.grd),De.ctxOpacity(ze.coOp),Be!=="st"&&Be!=="gs"&&Oe.beginPath(),De.ctxTransform(ze.preTransforms.finalTransform.props),Ee=Te.length,n=0;n<Ee;n+=1){for((Be==="st"||Be==="gs")&&(Oe.beginPath(),ze.da&&(Oe.setLineDash(ze.da),Oe.lineDashOffset=ze.do)),Me=Te[n].trNodes,Ce=Me.length,Re=0;Re<Ce;Re+=1)Me[Re].t==="m"?Oe.moveTo(Me[Re].p[0],Me[Re].p[1]):Me[Re].t==="c"?Oe.bezierCurveTo(Me[Re].pts[0],Me[Re].pts[1],Me[Re].pts[2],Me[Re].pts[3],Me[Re].pts[4],Me[Re].pts[5]):Oe.closePath();(Be==="st"||Be==="gs")&&(De.ctxStroke(),ze.da&&Oe.setLineDash(this.dashResetter))}Be!=="st"&&Be!=="gs"&&this.globalData.renderer.ctxFill(ze.r),De.restore()}},CVShapeElement.prototype.renderShape=function(e,t,n,Ee){var Re,Ce=t.length-1,Te;for(Te=e,Re=Ce;Re>=0;Re-=1)t[Re].ty==="tr"?(Te=n[Re].transform,this.renderShapeTransform(e,Te)):t[Re].ty==="sh"||t[Re].ty==="el"||t[Re].ty==="rc"||t[Re].ty==="sr"?this.renderPath(t[Re],n[Re]):t[Re].ty==="fl"?this.renderFill(t[Re],n[Re],Te):t[Re].ty==="st"?this.renderStroke(t[Re],n[Re],Te):t[Re].ty==="gf"||t[Re].ty==="gs"?this.renderGradientFill(t[Re],n[Re],Te):t[Re].ty==="gr"?this.renderShape(Te,t[Re].it,n[Re].it):t[Re].ty;Ee&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var n=e.trNodes,Ee=t.paths,Re,Ce,Te,Me=Ee._length;n.length=0;var De=e.transforms.finalTransform;for(Te=0;Te<Me;Te+=1){var Oe=Ee.shapes[Te];if(Oe&&Oe.v){for(Ce=Oe._length,Re=1;Re<Ce;Re+=1)Re===1&&n.push({t:"m",p:De.applyToPointArray(Oe.v[0][0],Oe.v[0][1],0)}),n.push({t:"c",pts:De.applyToTriplePoints(Oe.o[Re-1],Oe.i[Re],Oe.v[Re])});Ce===1&&n.push({t:"m",p:De.applyToPointArray(Oe.v[0][0],Oe.v[0][1],0)}),Oe.c&&Ce&&(n.push({t:"c",pts:De.applyToTriplePoints(Oe.o[Re-1],Oe.i[0],Oe.v[0])}),n.push({t:"z"}))}}e.trNodes=n}},CVShapeElement.prototype.renderPath=function(e,t){if(e.hd!==!0&&e._shouldRender){var n,Ee=t.styledShapes.length;for(n=0;n<Ee;n+=1)this.renderStyledShape(t.styledShapes[n],t.sh)}},CVShapeElement.prototype.renderFill=function(e,t,n){var Ee=t.style;(t.c._mdf||this._isFirstFrame)&&(Ee.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(Ee.coOp=t.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,n){var Ee=t.style,Re;if(!Ee.grd||t.g._mdf||t.s._mdf||t.e._mdf||e.t!==1&&(t.h._mdf||t.a._mdf)){var Ce=this.globalData.canvasContext,Te=t.s.v,Me=t.e.v;if(e.t===1)Re=Ce.createLinearGradient(Te[0],Te[1],Me[0],Me[1]);else{var De=Math.sqrt(Math.pow(Te[0]-Me[0],2)+Math.pow(Te[1]-Me[1],2)),Oe=Math.atan2(Me[1]-Te[1],Me[0]-Te[0]),Be=t.h.v;Be>=1?Be=.99:Be<=-1&&(Be=-.99);var ze=De*Be,$e=Math.cos(Oe+t.a.v)*ze+Te[0],He=Math.sin(Oe+t.a.v)*ze+Te[1];Re=Ce.createRadialGradient($e,He,0,Te[0],Te[1],De)}var Ue,Ve=e.g.p,We=t.g.c,qe=1;for(Ue=0;Ue<Ve;Ue+=1)t.g._hasOpacity&&t.g._collapsable&&(qe=t.g.o[Ue*2+1]),Re.addColorStop(We[Ue*4]/100,"rgba("+We[Ue*4+1]+","+We[Ue*4+2]+","+We[Ue*4+3]+","+qe+")");Ee.grd=Re}Ee.coOp=t.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(e,t,n){var Ee=t.style,Re=t.d;Re&&(Re._mdf||this._isFirstFrame)&&(Ee.da=Re.dashArray,Ee.do=Re.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(Ee.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(Ee.coOp=t.o.v*n.opacity),(t.w._mdf||this._isFirstFrame)&&(Ee.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(e,t,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var n=!1;e.sc&&(n=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var Ee=this.globalData.fontManager.getFontByName(e.f),Re,Ce,Te=e.l,Me=this.mHelper;this.stroke=n,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,Ce=e.finalText.length;var De,Oe,Be,ze,$e,He,Ue,Ve,We,qe,Ge=this.data.singleShape,Ye=e.tr*.001*e.finalSize,Ke=0,Xe=0,Ze=!0,er=0;for(Re=0;Re<Ce;Re+=1){De=this.globalData.fontManager.getCharData(e.finalText[Re],Ee.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily),Oe=De&&De.data||{},Me.reset(),Ge&&Te[Re].n&&(Ke=-Ye,Xe+=e.yOffset,Xe+=Ze?1:0,Ze=!1),$e=Oe.shapes?Oe.shapes[0].it:[],Ue=$e.length,Me.scale(e.finalSize/100,e.finalSize/100),Ge&&this.applyTextPropertiesToMatrix(e,Me,Te[Re].line,Ke,Xe),We=createSizedArray(Ue-1);var St=0;for(He=0;He<Ue;He+=1)if($e[He].ty==="sh"){for(ze=$e[He].ks.k.i.length,Ve=$e[He].ks.k,qe=[],Be=1;Be<ze;Be+=1)Be===1&&qe.push(Me.applyToX(Ve.v[0][0],Ve.v[0][1],0),Me.applyToY(Ve.v[0][0],Ve.v[0][1],0)),qe.push(Me.applyToX(Ve.o[Be-1][0],Ve.o[Be-1][1],0),Me.applyToY(Ve.o[Be-1][0],Ve.o[Be-1][1],0),Me.applyToX(Ve.i[Be][0],Ve.i[Be][1],0),Me.applyToY(Ve.i[Be][0],Ve.i[Be][1],0),Me.applyToX(Ve.v[Be][0],Ve.v[Be][1],0),Me.applyToY(Ve.v[Be][0],Ve.v[Be][1],0));qe.push(Me.applyToX(Ve.o[Be-1][0],Ve.o[Be-1][1],0),Me.applyToY(Ve.o[Be-1][0],Ve.o[Be-1][1],0),Me.applyToX(Ve.i[0][0],Ve.i[0][1],0),Me.applyToY(Ve.i[0][0],Ve.i[0][1],0),Me.applyToX(Ve.v[0][0],Ve.v[0][1],0),Me.applyToY(Ve.v[0][0],Ve.v[0][1],0)),We[St]=qe,St+=1}Ge&&(Ke+=Te[Re].l,Ke+=Ye),this.textSpans[er]?this.textSpans[er].elem=We:this.textSpans[er]={elem:We},er+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var e=this.canvasContext;e.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var t,n,Ee,Re,Ce,Te,Me=this.textAnimator.renderedLetters,De=this.textProperty.currentData.l;n=De.length;var Oe,Be=null,ze=null,$e=null,He,Ue,Ve=this.globalData.renderer;for(t=0;t<n;t+=1)if(!De[t].n){if(Oe=Me[t],Oe&&(Ve.save(),Ve.ctxTransform(Oe.p),Ve.ctxOpacity(Oe.o)),this.fill){for(Oe&&Oe.fc?Be!==Oe.fc&&(Ve.ctxFillStyle(Oe.fc),Be=Oe.fc):Be!==this.values.fill&&(Be=this.values.fill,Ve.ctxFillStyle(this.values.fill)),He=this.textSpans[t].elem,Re=He.length,this.globalData.canvasContext.beginPath(),Ee=0;Ee<Re;Ee+=1)for(Ue=He[Ee],Te=Ue.length,this.globalData.canvasContext.moveTo(Ue[0],Ue[1]),Ce=2;Ce<Te;Ce+=6)this.globalData.canvasContext.bezierCurveTo(Ue[Ce],Ue[Ce+1],Ue[Ce+2],Ue[Ce+3],Ue[Ce+4],Ue[Ce+5]);this.globalData.canvasContext.closePath(),Ve.ctxFill()}if(this.stroke){for(Oe&&Oe.sw?$e!==Oe.sw&&($e=Oe.sw,Ve.ctxLineWidth(Oe.sw)):$e!==this.values.sWidth&&($e=this.values.sWidth,Ve.ctxLineWidth(this.values.sWidth)),Oe&&Oe.sc?ze!==Oe.sc&&(ze=Oe.sc,Ve.ctxStrokeStyle(Oe.sc)):ze!==this.values.stroke&&(ze=this.values.stroke,Ve.ctxStrokeStyle(this.values.stroke)),He=this.textSpans[t].elem,Re=He.length,this.globalData.canvasContext.beginPath(),Ee=0;Ee<Re;Ee+=1)for(Ue=He[Ee],Te=Ue.length,this.globalData.canvasContext.moveTo(Ue[0],Ue[1]),Ce=2;Ce<Te;Ce+=6)this.globalData.canvasContext.bezierCurveTo(Ue[Ce],Ue[Ce+1],Ue[Ce+2],Ue[Ce+3],Ue[Ce+4],Ue[Ce+5]);this.globalData.canvasContext.closePath(),Ve.ctxStroke()}Oe&&this.globalData.renderer.restore()}};function CVImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(e,t,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t=e.getContext("2d"),n=this.img.width,Ee=this.img.height,Re=n/Ee,Ce=this.assetData.w/this.assetData.h,Te,Me,De=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;Re>Ce&&De==="xMidYMid slice"||Re<Ce&&De!=="xMidYMid slice"?(Me=Ee,Te=Me*Ce):(Te=n,Me=Te/Ce),t.drawImage(this.img,(n-Te)/2,(Ee-Me)/2,Te,Me,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(e,t,n){this.initElement(e,t,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(e){e[0]===1&&e[1]===0&&e[4]===0&&e[5]===1&&e[12]===0&&e[13]===0||this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRendererBase.prototype.ctxOpacity=function(e){this.canvasContext.globalAlpha*=e<0?0:e},CanvasRendererBase.prototype.ctxFillStyle=function(e){this.canvasContext.fillStyle=e},CanvasRendererBase.prototype.ctxStrokeStyle=function(e){this.canvasContext.strokeStyle=e},CanvasRendererBase.prototype.ctxLineWidth=function(e){this.canvasContext.lineWidth=e},CanvasRendererBase.prototype.ctxLineCap=function(e){this.canvasContext.lineCap=e},CanvasRendererBase.prototype.ctxLineJoin=function(e){this.canvasContext.lineJoin=e},CanvasRendererBase.prototype.ctxMiterLimit=function(e){this.canvasContext.miterLimit=e},CanvasRendererBase.prototype.ctxFill=function(e){this.canvasContext.fill(e)},CanvasRendererBase.prototype.ctxFillRect=function(e,t,n,Ee){this.canvasContext.fillRect(e,t,n,Ee)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(e){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}e&&(this.globalData.blendMode="source-over"),this.contextData.restore(e)},CanvasRendererBase.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var n="0px 0px 0px";t.transformOrigin=n,t.mozTransformOrigin=n,t.webkitTransformOrigin=n,t["-webkit-transform"]=n,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(e,t){this.reset();var n,Ee;e?(n=e,Ee=t,this.canvasContext.canvas.width=n,this.canvasContext.canvas.height=Ee):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,Ee=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,Ee=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=Ee*this.renderConfig.dpr);var Re,Ce;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var Te=this.renderConfig.preserveAspectRatio.split(" "),Me=Te[1]||"meet",De=Te[0]||"xMidYMid",Oe=De.substr(0,4),Be=De.substr(4);Re=n/Ee,Ce=this.transformCanvas.w/this.transformCanvas.h,Ce>Re&&Me==="meet"||Ce<Re&&Me==="slice"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=Ee/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=Ee/(this.transformCanvas.h/this.renderConfig.dpr)),Oe==="xMid"&&(Ce<Re&&Me==="meet"||Ce>Re&&Me==="slice")?this.transformCanvas.tx=(n-this.transformCanvas.w*(Ee/this.transformCanvas.h))/2*this.renderConfig.dpr:Oe==="xMax"&&(Ce<Re&&Me==="meet"||Ce>Re&&Me==="slice")?this.transformCanvas.tx=(n-this.transformCanvas.w*(Ee/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Be==="YMid"&&(Ce>Re&&Me==="meet"||Ce<Re&&Me==="slice")?this.transformCanvas.ty=(Ee-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:Be==="YMax"&&(Ce>Re&&Me==="meet"||Ce<Re&&Me==="slice")?this.transformCanvas.ty=(Ee-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=Ee/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var e,t=this.layers?this.layers.length:0;for(e=t-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(e,t){if(!(this.renderedFrame===e&&this.renderConfig.clearCanvas===!0&&!t||this.destroyed||e===-1)){this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var n,Ee=this.layers.length;for(this.completeLayers||this.checkLayers(e),n=Ee-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(e-this.layers[n].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=Ee-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!(t[e]||this.layers[e].ty===99)){var n=this.createItem(this.layers[e],this,this.globalData);t[e]=n,n.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();e.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var e,t=15;for(e=0;e<t;e+=1){var n=new CanvasContext;this.stack[e]=n}this._length=t,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var e=this._length*2,t=0;for(t=this._length;t<e;t+=1)this.stack[t]=new CanvasContext;this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(e){this.cArrPos-=1;var t=this.stack[this.cArrPos],n=t.transform,Ee,Re=this.cTr.props;for(Ee=0;Ee<16;Ee+=1)Re[Ee]=n[Ee];if(e){this.nativeContext.restore();var Ce=this.stack[this.cArrPos+1];this.appliedFillStyle=Ce.fillStyle,this.appliedStrokeStyle=Ce.strokeStyle,this.appliedLineWidth=Ce.lineWidth,this.appliedLineCap=Ce.lineCap,this.appliedLineJoin=Ce.lineJoin,this.appliedMiterLimit=Ce.miterLimit}this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),(e||t.opacity!==-1&&this.currentOpacity!==t.opacity)&&(this.nativeContext.globalAlpha=t.opacity,this.currentOpacity=t.opacity),this.currentFillStyle=t.fillStyle,this.currentStrokeStyle=t.strokeStyle,this.currentLineWidth=t.lineWidth,this.currentLineCap=t.lineCap,this.currentLineJoin=t.lineJoin,this.currentMiterLimit=t.miterLimit},CVContextData.prototype.save=function(e){e&&this.nativeContext.save();var t=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var n=this.stack[this.cArrPos],Ee;for(Ee=0;Ee<16;Ee+=1)n.transform[Ee]=t[Ee];this.cArrPos+=1;var Re=this.stack[this.cArrPos];Re.opacity=n.opacity,Re.fillStyle=n.fillStyle,Re.strokeStyle=n.strokeStyle,Re.lineWidth=n.lineWidth,Re.lineCap=n.lineCap,Re.lineJoin=n.lineJoin,Re.miterLimit=n.miterLimit},CVContextData.prototype.setOpacity=function(e){this.stack[this.cArrPos].opacity=e},CVContextData.prototype.setContext=function(e){this.nativeContext=e},CVContextData.prototype.fillStyle=function(e){this.stack[this.cArrPos].fillStyle!==e&&(this.currentFillStyle=e,this.stack[this.cArrPos].fillStyle=e)},CVContextData.prototype.strokeStyle=function(e){this.stack[this.cArrPos].strokeStyle!==e&&(this.currentStrokeStyle=e,this.stack[this.cArrPos].strokeStyle=e)},CVContextData.prototype.lineWidth=function(e){this.stack[this.cArrPos].lineWidth!==e&&(this.currentLineWidth=e,this.stack[this.cArrPos].lineWidth=e)},CVContextData.prototype.lineCap=function(e){this.stack[this.cArrPos].lineCap!==e&&(this.currentLineCap=e,this.stack[this.cArrPos].lineCap=e)},CVContextData.prototype.lineJoin=function(e){this.stack[this.cArrPos].lineJoin!==e&&(this.currentLineJoin=e,this.stack[this.cArrPos].lineJoin=e)},CVContextData.prototype.miterLimit=function(e){this.stack[this.cArrPos].miterLimit!==e&&(this.currentMiterLimit=e,this.stack[this.cArrPos].miterLimit=e)},CVContextData.prototype.transform=function(e){this.transformMat.cloneFromProps(e);var t=this.cTr;this.transformMat.multiply(t),t.cloneFromProps(this.transformMat.props);var n=t.props;this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])},CVContextData.prototype.opacity=function(e){var t=this.stack[this.cArrPos].opacity;t*=e<0?0:e,this.stack[this.cArrPos].opacity!==t&&(this.currentOpacity!==e&&(this.nativeContext.globalAlpha=e,this.currentOpacity=e),this.stack[this.cArrPos].opacity=t)},CVContextData.prototype.fill=function(e){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(e)},CVContextData.prototype.fillRect=function(e,t,n,Ee){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(e,t,n,Ee)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(e,t,n){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip();var t,n=this.layers.length;for(t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var e,t=this.layers.length;for(e=t-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)};function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:t&&t.clearCanvas!==void 0?t.clearCanvas:!0,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var n=this.finalTransform.mat.toCSS();t.transform=n,t.webkitTransform=n}this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(e,t,n){this.initElement(e,t,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?(e=createNS("rect"),e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(e=createTag("div"),e.style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)};function HShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){var n,Ee=e.length;for(n=0;n<Ee;n+=1)t=e[n].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var n=e.sh.v,Ee=e.transformers,Re,Ce=n._length,Te,Me,De,Oe;if(!(Ce<=1)){for(Re=0;Re<Ce-1;Re+=1)Te=this.getTransformedPoint(Ee,n.v[Re]),Me=this.getTransformedPoint(Ee,n.o[Re]),De=this.getTransformedPoint(Ee,n.i[Re+1]),Oe=this.getTransformedPoint(Ee,n.v[Re+1]),this.checkBounds(Te,Me,De,Oe,t);n.c&&(Te=this.getTransformedPoint(Ee,n.v[Re]),Me=this.getTransformedPoint(Ee,n.o[Re]),De=this.getTransformedPoint(Ee,n.i[0]),Oe=this.getTransformedPoint(Ee,n.v[0]),this.checkBounds(Te,Me,De,Oe,t))}},HShapeElement.prototype.checkBounds=function(e,t,n,Ee,Re){this.getBoundsOfCurve(e,t,n,Ee);var Ce=this.shapeBoundingBox;Re.x=bmMin(Ce.left,Re.x),Re.xMax=bmMax(Ce.right,Re.xMax),Re.y=bmMin(Ce.top,Re.y),Re.yMax=bmMax(Ce.bottom,Re.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,n,Ee){for(var Re=[[e[0],Ee[0]],[e[1],Ee[1]]],Ce,Te,Me,De,Oe,Be,ze,$e=0;$e<2;++$e)Te=6*e[$e]-12*t[$e]+6*n[$e],Ce=-3*e[$e]+9*t[$e]-9*n[$e]+3*Ee[$e],Me=3*t[$e]-3*e[$e],Te|=0,Ce|=0,Me|=0,Ce===0&&Te===0||(Ce===0?(De=-Me/Te,De>0&&De<1&&Re[$e].push(this.calculateF(De,e,t,n,Ee,$e))):(Oe=Te*Te-4*Me*Ce,Oe>=0&&(Be=(-Te+bmSqrt(Oe))/(2*Ce),Be>0&&Be<1&&Re[$e].push(this.calculateF(Be,e,t,n,Ee,$e)),ze=(-Te-bmSqrt(Oe))/(2*Ce),ze>0&&ze<1&&Re[$e].push(this.calculateF(ze,e,t,n,Ee,$e)))));this.shapeBoundingBox.left=bmMin.apply(null,Re[0]),this.shapeBoundingBox.top=bmMin.apply(null,Re[1]),this.shapeBoundingBox.right=bmMax.apply(null,Re[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,Re[1])},HShapeElement.prototype.calculateF=function(e,t,n,Ee,Re,Ce){return bmPow(1-e,3)*t[Ce]+3*bmPow(1-e,2)*e*n[Ce]+3*(1-e)*bmPow(e,2)*Ee[Ce]+bmPow(e,3)*Re[Ce]},HShapeElement.prototype.calculateBoundingBox=function(e,t){var n,Ee=e.length;for(n=0;n<Ee;n+=1)e[n]&&e[n].sh?this.calculateShapeBoundingBox(e[n],t):e[n]&&e[n].it?this.calculateBoundingBox(e[n].it,t):e[n]&&e[n].style&&e[n].w&&this.expandStrokeBoundingBox(e[n].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(e,t){var n=0;if(e.keyframes){for(var Ee=0;Ee<e.keyframes.length;Ee+=1){var Re=e.keyframes[Ee].s;Re>n&&(n=Re)}n*=e.mult}else n=e.v*e.mult;t.x-=n,t.xMax+=n,t.y-=n,t.yMax+=n},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var n=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),n=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),n=!0),n||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var Ee=this.shapeCont.style,Re="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";Ee.transform=Re,Ee.webkitTransform=Re}}};function HTextElement(e,t,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style,n=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";t.fill=n,t.color=n,e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var Ee=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",Ee.fClass)this.innerElem.className=Ee.fClass;else{t.fontFamily=Ee.fFamily;var Re=e.fWeight,Ce=e.fStyle;t.fontStyle=Ce,t.fontWeight=Re}var Te,Me,De=e.l;Me=De.length;var Oe,Be,ze,$e=this.mHelper,He,Ue="",Ve=0;for(Te=0;Te<Me;Te+=1){if(this.globalData.fontManager.chars?(this.textPaths[Ve]?Oe=this.textPaths[Ve]:(Oe=createNS("path"),Oe.setAttribute("stroke-linecap",lineCapEnum[1]),Oe.setAttribute("stroke-linejoin",lineJoinEnum[2]),Oe.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[Ve]?(Be=this.textSpans[Ve],ze=Be.children[0]):(Be=createTag("div"),Be.style.lineHeight=0,ze=createNS("svg"),ze.appendChild(Oe),styleDiv(Be)))):this.isMasked?Oe=this.textPaths[Ve]?this.textPaths[Ve]:createNS("text"):this.textSpans[Ve]?(Be=this.textSpans[Ve],Oe=this.textPaths[Ve]):(Be=createTag("span"),styleDiv(Be),Oe=createTag("span"),styleDiv(Oe),Be.appendChild(Oe)),this.globalData.fontManager.chars){var We=this.globalData.fontManager.getCharData(e.finalText[Te],Ee.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily),qe;if(We?qe=We.data:qe=null,$e.reset(),qe&&qe.shapes&&qe.shapes.length&&(He=qe.shapes[0].it,$e.scale(e.finalSize/100,e.finalSize/100),Ue=this.createPathShape($e,He),Oe.setAttribute("d",Ue)),this.isMasked)this.innerElem.appendChild(Oe);else{if(this.innerElem.appendChild(Be),qe&&qe.shapes){document.body.appendChild(ze);var Ge=ze.getBBox();ze.setAttribute("width",Ge.width+2),ze.setAttribute("height",Ge.height+2),ze.setAttribute("viewBox",Ge.x-1+" "+(Ge.y-1)+" "+(Ge.width+2)+" "+(Ge.height+2));var Ye=ze.style,Ke="translate("+(Ge.x-1)+"px,"+(Ge.y-1)+"px)";Ye.transform=Ke,Ye.webkitTransform=Ke,De[Te].yOffset=Ge.y-1}else ze.setAttribute("width",1),ze.setAttribute("height",1);Be.appendChild(ze)}}else if(Oe.textContent=De[Te].val,Oe.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(Oe);else{this.innerElem.appendChild(Be);var Xe=Oe.style,Ze="translate3d(0,"+-e.finalSize/1.2+"px,0)";Xe.transform=Ze,Xe.webkitTransform=Ze}this.isMasked?this.textSpans[Ve]=Oe:this.textSpans[Ve]=Be,this.textSpans[Ve].style.display="block",this.textPaths[Ve]=Oe,Ve+=1}for(;Ve<this.textSpans.length;)this.textSpans[Ve].style.display="none",Ve+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var e;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=t,e.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var n,Ee,Re=0,Ce=this.textAnimator.renderedLetters,Te=this.textProperty.currentData.l;Ee=Te.length;var Me,De,Oe;for(n=0;n<Ee;n+=1)Te[n].n?Re+=1:(De=this.textSpans[n],Oe=this.textPaths[n],Me=Ce[Re],Re+=1,Me._mdf.m&&(this.isMasked?De.setAttribute("transform",Me.m):(De.style.webkitTransform=Me.m,De.style.transform=Me.m)),De.style.opacity=Me.o,Me.sw&&Me._mdf.sw&&Oe.setAttribute("stroke-width",Me.sw),Me.sc&&Me._mdf.sc&&Oe.setAttribute("stroke",Me.sc),Me.fc&&Me._mdf.fc&&(Oe.setAttribute("fill",Me.fc),Oe.style.color=Me.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Be=this.innerElem.getBBox();this.currentBBox.w!==Be.width&&(this.currentBBox.w=Be.width,this.svgElement.setAttribute("width",Be.width)),this.currentBBox.h!==Be.height&&(this.currentBBox.h=Be.height,this.svgElement.setAttribute("height",Be.height));var ze=1;if(this.currentBBox.w!==Be.width+ze*2||this.currentBBox.h!==Be.height+ze*2||this.currentBBox.x!==Be.x-ze||this.currentBBox.y!==Be.y-ze){this.currentBBox.w=Be.width+ze*2,this.currentBBox.h=Be.height+ze*2,this.currentBBox.x=Be.x-ze,this.currentBBox.y=Be.y-ze,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var $e="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=$e,e.webkitTransform=$e}}}};function HCameraElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initHierarchy();var Ee=PropertyFactory.getProp;if(this.pe=Ee(this,e.pe,0,0,this),e.ks.p.s?(this.px=Ee(this,e.ks.p.x,1,0,this),this.py=Ee(this,e.ks.p.y,1,0,this),this.pz=Ee(this,e.ks.p.z,1,0,this)):this.p=Ee(this,e.ks.p,1,0,this),e.ks.a&&(this.a=Ee(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var Re,Ce=e.ks.or.k.length;for(Re=0;Re<Ce;Re+=1)e.ks.or.k[Re].to=null,e.ks.or.k[Re].ti=null}this.or=Ee(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=Ee(this,e.ks.rx,0,degToRads,this),this.ry=Ee(this,e.ks.ry,0,degToRads,this),this.rz=Ee(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,t=this.comp.threeDElements.length,n,Ee,Re;for(e=0;e<t;e+=1)if(n=this.comp.threeDElements[e],n.type==="3d"){Ee=n.perspectiveElem.style,Re=n.container.style;var Ce=this.pe.v+"px",Te="0px 0px 0px",Me="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";Ee.perspective=Ce,Ee.webkitPerspective=Ce,Re.transformOrigin=Te,Re.mozTransformOrigin=Te,Re.webkitTransformOrigin=Te,Ee.transform=Me,Ee.webkitTransform=Me}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e=this._isFirstFrame,t,n;if(this.hierarchy)for(n=this.hierarchy.length,t=0;t<n;t+=1)e=this.hierarchy[t].finalTransform.mProp._mdf||e;if(e||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(n=this.hierarchy.length-1,t=n;t>=0;t-=1){var Ee=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-Ee.p.v[0],-Ee.p.v[1],Ee.p.v[2]),this.mat.rotateX(-Ee.or.v[0]).rotateY(-Ee.or.v[1]).rotateZ(Ee.or.v[2]),this.mat.rotateX(-Ee.rx.v).rotateY(-Ee.ry.v).rotateZ(Ee.rz.v),this.mat.scale(1/Ee.s.v[0],1/Ee.s.v[1],1/Ee.s.v[2]),this.mat.translate(Ee.a.v[0],Ee.a.v[1],Ee.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var Re;this.p?Re=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:Re=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var Ce=Math.sqrt(Math.pow(Re[0],2)+Math.pow(Re[1],2)+Math.pow(Re[2],2)),Te=[Re[0]/Ce,Re[1]/Ce,Re[2]/Ce],Me=Math.sqrt(Te[2]*Te[2]+Te[0]*Te[0]),De=Math.atan2(Te[1],Me),Oe=Math.atan2(Te[0],-Te[2]);this.mat.rotateY(Oe).rotateX(-De)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Be=!this._prevMat.equals(this.mat);if((Be||this.pe._mdf)&&this.comp.threeDElements){n=this.comp.threeDElements.length;var ze,$e,He;for(t=0;t<n;t+=1)if(ze=this.comp.threeDElements[t],ze.type==="3d"){if(Be){var Ue=this.mat.toCSS();He=ze.container.style,He.transform=Ue,He.webkitTransform=Ue}this.pe._mdf&&($e=ze.perspectiveElem.style,$e.perspective=this.pe.v+"px",$e.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&t.hideOnTransparent===!1),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();e.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){var Ee=this.layers[t];if(!Ee.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(n,t);else{for(var Re=0,Ce,Te,Me;Re<t;)this.elements[Re]&&this.elements[Re]!==!0&&this.elements[Re].getBaseElement&&(Te=this.elements[Re],Me=this.layers[Re].ddd?this.getThreeDContainerByPos(Re):Te.getBaseElement(),Ce=Me||Ce),Re+=1;Ce?(!Ee.ddd||!this.supports3d)&&this.layerElement.insertBefore(n,Ce):(!Ee.ddd||!this.supports3d)&&this.layerElement.appendChild(n)}else this.addTo3dContainer(n,t)}},HybridRendererBase.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRendererBase.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(e){for(var t=0,n=this.threeDElements.length;t<n;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(e,t){var n=createTag("div"),Ee,Re;styleDiv(n);var Ce=createTag("div");if(styleDiv(Ce),t==="3d"){Ee=n.style,Ee.width=this.globalData.compSize.w+"px",Ee.height=this.globalData.compSize.h+"px";var Te="50% 50%";Ee.webkitTransformOrigin=Te,Ee.mozTransformOrigin=Te,Ee.transformOrigin=Te,Re=Ce.style;var Me="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";Re.transform=Me,Re.webkitTransform=Me}n.appendChild(Ce);var De={container:Ce,perspectiveElem:n,startPos:e,endPos:e,type:t};return this.threeDElements.push(De),De},HybridRendererBase.prototype.build3dContainers=function(){var e,t=this.layers.length,n,Ee="";for(e=0;e<t;e+=1)this.layers[e].ddd&&this.layers[e].ty!==3?(Ee!=="3d"&&(Ee="3d",n=this.createThreeDContainer(e,"3d")),n.endPos=Math.max(n.endPos,e)):(Ee!=="2d"&&(Ee="2d",n=this.createThreeDContainer(e,"2d")),n.endPos=Math.max(n.endPos,e));for(t=this.threeDElements.length,e=t-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(e,t){for(var n=0,Ee=this.threeDElements.length;n<Ee;){if(t<=this.threeDElements[n].endPos){for(var Re=this.threeDElements[n].startPos,Ce;Re<t;)this.elements[Re]&&this.elements[Re].getBaseElement&&(Ce=this.elements[Re].getBaseElement()),Re+=1;Ce?this.threeDElements[n].container.insertBefore(e,Ce):this.threeDElements[n].container.appendChild(e);break}n+=1}},HybridRendererBase.prototype.configAnimation=function(e){var t=createTag("div"),n=this.animationItem.wrapper,Ee=t.style;Ee.width=e.w+"px",Ee.height=e.h+"px",this.resizerElem=t,styleDiv(t),Ee.transformStyle="flat",Ee.mozTransformStyle="flat",Ee.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),n.appendChild(t),Ee.overflow="hidden";var Re=createNS("svg");Re.setAttribute("width","1"),Re.setAttribute("height","1"),styleDiv(Re),this.resizerElem.appendChild(Re);var Ce=createNS("defs");Re.appendChild(Ce),this.data=e,this.setupGlobalData(e,Re),this.globalData.defs=Ce,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e,t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var e=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight,n=e/t,Ee=this.globalData.compSize.w/this.globalData.compSize.h,Re,Ce,Te,Me;Ee>n?(Re=e/this.globalData.compSize.w,Ce=e/this.globalData.compSize.w,Te=0,Me=(t-this.globalData.compSize.h*(e/this.globalData.compSize.w))/2):(Re=t/this.globalData.compSize.h,Ce=t/this.globalData.compSize.h,Te=(e-this.globalData.compSize.w*(t/this.globalData.compSize.h))/2,Me=0);var De=this.resizerElem.style;De.webkitTransform="matrix3d("+Re+",0,0,0,0,"+Ce+",0,0,0,0,1,0,"+Te+","+Me+",0,1)",De.transform=De.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e=this.globalData.compSize.w,t=this.globalData.compSize.h,n,Ee=this.threeDElements.length;for(n=0;n<Ee;n+=1){var Re=this.threeDElements[n].perspectiveElem.style;Re.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(t,2))+"px",Re.perspective=Re.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(e){var t,n=e.length,Ee=createTag("div");for(t=0;t<n;t+=1)if(e[t].xt){var Re=this.createComp(e[t],Ee,this.globalData.comp,null);Re.initExpressions(),this.globalData.projectInterface.registerComposition(Re)}};function HCompElement(e,t,n){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var n=0,Ee;n<t;)this.elements[n]&&this.elements[n].getBaseElement&&(Ee=this.elements[n].getBaseElement()),n+=1;Ee?this.layerElement.insertBefore(e,Ee):this.layerElement.appendChild(e)},HCompElement.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&t.hideOnTransparent===!1),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};var CompExpressionInterface=function(){return function(e){function t(n){for(var Ee=0,Re=e.layers.length;Ee<Re;){if(e.layers[Ee].nm===n||e.layers[Ee].ind===n)return e.elements[Ee].layerInterface;Ee+=1}return null}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.data.h||e.globalData.compSize.h,t.width=e.data.w||e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t.displayStartTime=0,t.numLayers=e.layers.length,t}}();function _typeof$2(e){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(e)}function seedRandom(e,t){var n=this,Ee=256,Re=6,Ce=52,Te="random",Me=t.pow(Ee,Re),De=t.pow(2,Ce),Oe=De*2,Be=Ee-1,ze;function $e(Ye,Ke,Xe){var Ze=[];Ke=Ke===!0?{entropy:!0}:Ke||{};var er=We(Ve(Ke.entropy?[Ye,Ge(e)]:Ye===null?qe():Ye,3),Ze),St=new He(Ze),ar=function(){for(var ur=St.g(Re),dr=Me,vr=0;ur<De;)ur=(ur+vr)*Ee,dr*=Ee,vr=St.g(1);for(;ur>=Oe;)ur/=2,dr/=2,vr>>>=1;return(ur+vr)/dr};return ar.int32=function(){return St.g(4)|0},ar.quick=function(){return St.g(4)/4294967296},ar.double=ar,We(Ge(St.S),e),(Ke.pass||Xe||function(hr,ur,dr,vr){return vr&&(vr.S&&Ue(vr,St),hr.state=function(){return Ue(St,{})}),dr?(t[Te]=hr,ur):hr})(ar,er,"global"in Ke?Ke.global:this==t,Ke.state)}t["seed"+Te]=$e;function He(Ye){var Ke,Xe=Ye.length,Ze=this,er=0,St=Ze.i=Ze.j=0,ar=Ze.S=[];for(Xe||(Ye=[Xe++]);er<Ee;)ar[er]=er++;for(er=0;er<Ee;er++)ar[er]=ar[St=Be&St+Ye[er%Xe]+(Ke=ar[er])],ar[St]=Ke;Ze.g=function(hr){for(var ur,dr=0,vr=Ze.i,yr=Ze.j,br=Ze.S;hr--;)ur=br[vr=Be&vr+1],dr=dr*Ee+br[Be&(br[vr]=br[yr=Be&yr+ur])+(br[yr]=ur)];return Ze.i=vr,Ze.j=yr,dr}}function Ue(Ye,Ke){return Ke.i=Ye.i,Ke.j=Ye.j,Ke.S=Ye.S.slice(),Ke}function Ve(Ye,Ke){var Xe=[],Ze=_typeof$2(Ye),er;if(Ke&&Ze=="object")for(er in Ye)try{Xe.push(Ve(Ye[er],Ke-1))}catch{}return Xe.length?Xe:Ze=="string"?Ye:Ye+"\0"}function We(Ye,Ke){for(var Xe=Ye+"",Ze,er=0;er<Xe.length;)Ke[Be&er]=Be&(Ze^=Ke[Be&er]*19)+Xe.charCodeAt(er++);return Ge(Ke)}function qe(){try{var Ye=new Uint8Array(Ee);return(n.crypto||n.msCrypto).getRandomValues(Ye),Ge(Ye)}catch{var Ke=n.navigator,Xe=Ke&&Ke.plugins;return[+new Date,n,Xe,n.screen,Ge(e)]}}function Ge(Ye){return String.fromCharCode.apply(0,Ye)}We(t.random(),e)}function initialize$2(e){seedRandom([],e)}var propTypes={SHAPE:"shape"};function _typeof$1(e){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return e==="number"||t instanceof Number||e==="boolean"||e==="string"}function $bm_neg(e){var t=_typeof$1(e);if(t==="number"||e instanceof Number||t==="boolean")return-e;if($bm_isInstanceOfArray(e)){var n,Ee=e.length,Re=[];for(n=0;n<Ee;n+=1)Re[n]=-e[n];return Re}return e.propType?e.v:-e}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var n=_typeof$1(e),Ee=_typeof$1(t);if(isNumerable(n,e)&&isNumerable(Ee,t)||n==="string"||Ee==="string")return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(Ee,t))return e=e.slice(0),e[0]+=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return t=t.slice(0),t[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var Re=0,Ce=e.length,Te=t.length,Me=[];Re<Ce||Re<Te;)(typeof e[Re]=="number"||e[Re]instanceof Number)&&(typeof t[Re]=="number"||t[Re]instanceof Number)?Me[Re]=e[Re]+t[Re]:Me[Re]=t[Re]===void 0?e[Re]:e[Re]||t[Re],Re+=1;return Me}return 0}var add=sum;function sub(e,t){var n=_typeof$1(e),Ee=_typeof$1(t);if(isNumerable(n,e)&&isNumerable(Ee,t))return n==="string"&&(e=parseInt(e,10)),Ee==="string"&&(t=parseInt(t,10)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(Ee,t))return e=e.slice(0),e[0]-=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return t=t.slice(0),t[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var Re=0,Ce=e.length,Te=t.length,Me=[];Re<Ce||Re<Te;)(typeof e[Re]=="number"||e[Re]instanceof Number)&&(typeof t[Re]=="number"||t[Re]instanceof Number)?Me[Re]=e[Re]-t[Re]:Me[Re]=t[Re]===void 0?e[Re]:e[Re]||t[Re],Re+=1;return Me}return 0}function mul(e,t){var n=_typeof$1(e),Ee=_typeof$1(t),Re;if(isNumerable(n,e)&&isNumerable(Ee,t))return e*t;var Ce,Te;if($bm_isInstanceOfArray(e)&&isNumerable(Ee,t)){for(Te=e.length,Re=createTypedArray("float32",Te),Ce=0;Ce<Te;Ce+=1)Re[Ce]=e[Ce]*t;return Re}if(isNumerable(n,e)&&$bm_isInstanceOfArray(t)){for(Te=t.length,Re=createTypedArray("float32",Te),Ce=0;Ce<Te;Ce+=1)Re[Ce]=e*t[Ce];return Re}return 0}function div(e,t){var n=_typeof$1(e),Ee=_typeof$1(t),Re;if(isNumerable(n,e)&&isNumerable(Ee,t))return e/t;var Ce,Te;if($bm_isInstanceOfArray(e)&&isNumerable(Ee,t)){for(Te=e.length,Re=createTypedArray("float32",Te),Ce=0;Ce<Te;Ce+=1)Re[Ce]=e[Ce]/t;return Re}if(isNumerable(n,e)&&$bm_isInstanceOfArray(t)){for(Te=t.length,Re=createTypedArray("float32",Te),Ce=0;Ce<Te;Ce+=1)Re[Ce]=e/t[Ce];return Re}return 0}function mod(e,t){return typeof e=="string"&&(e=parseInt(e,10)),typeof t=="string"&&(t=parseInt(t,10)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,n){if(t>n){var Ee=n;n=t,t=Ee}return Math.min(Math.max(e,t),n)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if(typeof e=="number"||e instanceof Number)return t=t||0,Math.abs(e-t);t||(t=helperLengthArray);var n,Ee=Math.min(e.length,t.length),Re=0;for(n=0;n<Ee;n+=1)Re+=Math.pow(t[n]-e[n],2);return Math.sqrt(Re)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t=e[0],n=e[1],Ee=e[2],Re=Math.max(t,n,Ee),Ce=Math.min(t,n,Ee),Te,Me,De=(Re+Ce)/2;if(Re===Ce)Te=0,Me=0;else{var Oe=Re-Ce;switch(Me=De>.5?Oe/(2-Re-Ce):Oe/(Re+Ce),Re){case t:Te=(n-Ee)/Oe+(n<Ee?6:0);break;case n:Te=(Ee-t)/Oe+2;break;case Ee:Te=(t-n)/Oe+4;break}Te/=6}return[Te,Me,De,e[3]]}function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hslToRgb(e){var t=e[0],n=e[1],Ee=e[2],Re,Ce,Te;if(n===0)Re=Ee,Te=Ee,Ce=Ee;else{var Me=Ee<.5?Ee*(1+n):Ee+n-Ee*n,De=2*Ee-Me;Re=hue2rgb(De,Me,t+1/3),Ce=hue2rgb(De,Me,t),Te=hue2rgb(De,Me,t-1/3)}return[Re,Ce,Te,e[3]]}function linear(e,t,n,Ee,Re){if((Ee===void 0||Re===void 0)&&(Ee=t,Re=n,t=0,n=1),n<t){var Ce=n;n=t,t=Ce}if(e<=t)return Ee;if(e>=n)return Re;var Te=n===t?0:(e-t)/(n-t);if(!Ee.length)return Ee+(Re-Ee)*Te;var Me,De=Ee.length,Oe=createTypedArray("float32",De);for(Me=0;Me<De;Me+=1)Oe[Me]=Ee[Me]+(Re[Me]-Ee[Me])*Te;return Oe}function random(e,t){if(t===void 0&&(e===void 0?(e=0,t=1):(t=e,e=void 0)),t.length){var n,Ee=t.length;e||(e=createTypedArray("float32",Ee));var Re=createTypedArray("float32",Ee),Ce=BMMath.random();for(n=0;n<Ee;n+=1)Re[n]=e[n]+Ce*(t[n]-e[n]);return Re}e===void 0&&(e=0);var Te=BMMath.random();return e+Te*(t-e)}function createPath(e,t,n,Ee){var Re,Ce=e.length,Te=shapePool.newElement();Te.setPathData(!!Ee,Ce);var Me=[0,0],De,Oe;for(Re=0;Re<Ce;Re+=1)De=t&&t[Re]?t[Re]:Me,Oe=n&&n[Re]?n[Re]:Me,Te.setTripleAt(e[Re][0],e[Re][1],Oe[0]+e[Re][0],Oe[1]+e[Re][1],De[0]+e[Re][0],De[1]+e[Re][1],Re,!0);return Te}function initiateExpression(elem,data,property){function noOp(e){return e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function e(t,n){var Ee,Re,Ce=this.pv.length?this.pv.length:1,Te=createTypedArray("float32",Ce);t=5;var Me=Math.floor(time*t);for(Ee=0,Re=0;Ee<Me;){for(Re=0;Re<Ce;Re+=1)Te[Re]+=-n+n*2*BMMath.random();Ee+=1}var De=time*t,Oe=De-Math.floor(De),Be=createTypedArray("float32",Ce);if(Ce>1){for(Re=0;Re<Ce;Re+=1)Be[Re]=this.pv[Re]+Te[Re]+(-n+n*2*BMMath.random())*Oe;return Be}return this.pv+Te[0]+(-n+n*2*BMMath.random())*Oe}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(e,t){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],Ee=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads,Re=-Math.atan2(n[1],n[2])/degToRads;return[Re,Ee,0]}function easeOut(e,t,n,Ee,Re){return applyEase(easeOutBez,e,t,n,Ee,Re)}function easeIn(e,t,n,Ee,Re){return applyEase(easeInBez,e,t,n,Ee,Re)}function ease(e,t,n,Ee,Re){return applyEase(easeInOutBez,e,t,n,Ee,Re)}function applyEase(e,t,n,Ee,Re,Ce){Re===void 0?(Re=n,Ce=Ee):t=(t-n)/(Ee-n),t>1?t=1:t<0&&(t=0);var Te=e(t);if($bm_isInstanceOfArray(Re)){var Me,De=Re.length,Oe=createTypedArray("float32",De);for(Me=0;Me<De;Me+=1)Oe[Me]=(Ce[Me]-Re[Me])*Te+Re[Me];return Oe}return(Ce-Re)*Te+Re}function nearestKey(e){var t,n=data.k.length,Ee,Re;if(!data.k.length||typeof data.k[0]=="number")Ee=0,Re=0;else if(Ee=-1,e*=elem.comp.globalData.frameRate,e<data.k[0].t)Ee=1,Re=data.k[0].t;else{for(t=0;t<n-1;t+=1)if(e===data.k[t].t){Ee=t+1,Re=data.k[t].t;break}else if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(Ee=t+2,Re=data.k[t+1].t):(Ee=t+1,Re=data.k[t].t);break}Ee===-1&&(Ee=t+1,Re=data.k[t].t)}var Ce={};return Ce.index=Ee,Ce.time=Re/elem.comp.globalData.frameRate,Ce}function key(e){var t,n,Ee;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+e);e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var Re=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(Ee=Re.length,n=0;n<Ee;n+=1)t[n]=Re[n],t.value[n]=Re[n];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return!e&&e!==0&&(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return typeof value=="string"?t===void 0?value.substring(e):value.substring(e,t):""}function substr(e,t){return typeof value=="string"?t===void 0?value.substr(e):value.substr(e,t):""}function posterizeTime(e){time=e===0?0:Math.floor(time*e)/e,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(e){return value=e,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var e={};e.initExpressions=t,e.resetFrame=ExpressionManager.resetFrame;function t(n){var Ee=0,Re=[];function Ce(){Ee+=1}function Te(){Ee-=1,Ee===0&&De()}function Me(Oe){Re.indexOf(Oe)===-1&&Re.push(Oe)}function De(){var Oe,Be=Re.length;for(Oe=0;Oe<Be;Oe+=1)Re[Oe].release();Re.length=0}n.renderer.compInterface=CompExpressionInterface(n.renderer),n.renderer.globalData.projectInterface.registerComposition(n.renderer),n.renderer.globalData.pushExpression=Ce,n.renderer.globalData.popExpression=Te,n.renderer.globalData.registerExpressionProperty=Me}return e}(),MaskManagerInterface=function(){function e(n,Ee){this._mask=n,this._data=Ee}Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var t=function(Ee){var Re=createSizedArray(Ee.viewData.length),Ce,Te=Ee.viewData.length;for(Ce=0;Ce<Te;Ce+=1)Re[Ce]=new e(Ee.viewData[Ce],Ee.masksProperties[Ce]);var Me=function(Oe){for(Ce=0;Ce<Te;){if(Ee.masksProperties[Ce].nm===Oe)return Re[Ce];Ce+=1}return null};return Me};return t}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function n(Te,Me,De){Object.defineProperty(Te,"velocity",{get:function(){return Me.getVelocityAtTime(Me.comp.currentFrame)}}),Te.numKeys=Me.keyframes?Me.keyframes.length:0,Te.key=function(Oe){if(!Te.numKeys)return 0;var Be="";"s"in Me.keyframes[Oe-1]?Be=Me.keyframes[Oe-1].s:"e"in Me.keyframes[Oe-2]?Be=Me.keyframes[Oe-2].e:Be=Me.keyframes[Oe-2].s;var ze=De==="unidimensional"?new Number(Be):Object.assign({},Be);return ze.time=Me.keyframes[Oe-1].t/Me.elem.comp.globalData.frameRate,ze.value=De==="unidimensional"?Be[0]:Be,ze},Te.valueAtTime=Me.getValueAtTime,Te.speedAtTime=Me.getSpeedAtTime,Te.velocityAtTime=Me.getVelocityAtTime,Te.propertyGroup=Me.propertyGroup}function Ee(Te){(!Te||!("pv"in Te))&&(Te=e);var Me=1/Te.mult,De=Te.pv*Me,Oe=new Number(De);return Oe.value=De,n(Oe,Te,"unidimensional"),function(){return Te.k&&Te.getValue(),De=Te.v*Me,Oe.value!==De&&(Oe=new Number(De),Oe.value=De,Oe[0]=De,n(Oe,Te,"unidimensional")),Oe}}function Re(Te){(!Te||!("pv"in Te))&&(Te=t);var Me=1/Te.mult,De=Te.data&&Te.data.l||Te.pv.length,Oe=createTypedArray("float32",De),Be=createTypedArray("float32",De);return Oe.value=Be,n(Oe,Te,"multidimensional"),function(){Te.k&&Te.getValue();for(var ze=0;ze<De;ze+=1)Be[ze]=Te.v[ze]*Me,Oe[ze]=Be[ze];return Oe}}function Ce(){return e}return function(Te){return Te?Te.propType==="unidimensional"?Ee(Te):Re(Te):Ce}}(),TransformExpressionInterface=function(){return function(e){function t(Te){switch(Te){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)});var n,Ee,Re,Ce;return e.p?Ce=ExpressionPropertyInterface(e.p):(n=ExpressionPropertyInterface(e.px),Ee=ExpressionPropertyInterface(e.py),e.pz&&(Re=ExpressionPropertyInterface(e.pz))),Object.defineProperty(t,"position",{get:function(){return e.p?Ce():[n(),Ee(),Re?Re():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t}}(),LayerExpressionInterface=function(){function e(Oe){var Be=new Matrix;if(Oe!==void 0){var ze=this._elem.finalTransform.mProp.getValueAtTime(Oe);ze.clone(Be)}else{var $e=this._elem.finalTransform.mProp;$e.applyToMatrix(Be)}return Be}function t(Oe,Be){var ze=this.getMatrix(Be);return ze.props[12]=0,ze.props[13]=0,ze.props[14]=0,this.applyPoint(ze,Oe)}function n(Oe,Be){var ze=this.getMatrix(Be);return this.applyPoint(ze,Oe)}function Ee(Oe,Be){var ze=this.getMatrix(Be);return ze.props[12]=0,ze.props[13]=0,ze.props[14]=0,this.invertPoint(ze,Oe)}function Re(Oe,Be){var ze=this.getMatrix(Be);return this.invertPoint(ze,Oe)}function Ce(Oe,Be){if(this._elem.hierarchy&&this._elem.hierarchy.length){var ze,$e=this._elem.hierarchy.length;for(ze=0;ze<$e;ze+=1)this._elem.hierarchy[ze].finalTransform.mProp.applyToMatrix(Oe)}return Oe.applyToPointArray(Be[0],Be[1],Be[2]||0)}function Te(Oe,Be){if(this._elem.hierarchy&&this._elem.hierarchy.length){var ze,$e=this._elem.hierarchy.length;for(ze=0;ze<$e;ze+=1)this._elem.hierarchy[ze].finalTransform.mProp.applyToMatrix(Oe)}return Oe.inversePoint(Be)}function Me(Oe){var Be=new Matrix;if(Be.reset(),this._elem.finalTransform.mProp.applyToMatrix(Be),this._elem.hierarchy&&this._elem.hierarchy.length){var ze,$e=this._elem.hierarchy.length;for(ze=0;ze<$e;ze+=1)this._elem.hierarchy[ze].finalTransform.mProp.applyToMatrix(Be);return Be.inversePoint(Oe)}return Be.inversePoint(Oe)}function De(){return[1,1,1,1]}return function(Oe){var Be;function ze(Ve){He.mask=new MaskManagerInterface(Ve,Oe)}function $e(Ve){He.effect=Ve}function He(Ve){switch(Ve){case"ADBE Root Vectors Group":case"Contents":case 2:return He.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Be;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return He.effect;case"ADBE Text Properties":return He.textInterface;default:return null}}He.getMatrix=e,He.invertPoint=Te,He.applyPoint=Ce,He.toWorld=n,He.toWorldVec=t,He.fromWorld=Re,He.fromWorldVec=Ee,He.toComp=n,He.fromComp=Me,He.sampleImage=De,He.sourceRectAtTime=Oe.sourceRectAtTime.bind(Oe),He._elem=Oe,Be=TransformExpressionInterface(Oe.finalTransform.mProp);var Ue=getDescriptor(Be,"anchorPoint");return Object.defineProperties(He,{hasParent:{get:function(){return Oe.hierarchy.length}},parent:{get:function(){return Oe.hierarchy[0].layerInterface}},rotation:getDescriptor(Be,"rotation"),scale:getDescriptor(Be,"scale"),position:getDescriptor(Be,"position"),opacity:getDescriptor(Be,"opacity"),anchorPoint:Ue,anchor_point:Ue,transform:{get:function(){return Be}},active:{get:function(){return Oe.isInRange}}}),He.startTime=Oe.data.st,He.index=Oe.data.ind,He.source=Oe.data.refId,He.height=Oe.data.ty===0?Oe.data.h:100,He.width=Oe.data.ty===0?Oe.data.w:100,He.inPoint=Oe.data.ip/Oe.comp.globalData.frameRate,He.outPoint=Oe.data.op/Oe.comp.globalData.frameRate,He._name=Oe.data.nm,He.registerMaskInterface=ze,He.registerEffectsInterface=$e,He}}(),propertyGroupFactory=function(){return function(e,t){return function(n){return n=n===void 0?1:n,n<=0?e:t(n-1)}}}(),PropertyInterface=function(){return function(e,t){var n={_name:e};function Ee(Re){return Re=Re===void 0?1:Re,Re<=0?n:t(Re-1)}return Ee}}(),EffectsExpressionInterface=function(){var e={createEffectsInterface:t};function t(Re,Ce){if(Re.effectsManager){var Te=[],Me=Re.data.ef,De,Oe=Re.effectsManager.effectElements.length;for(De=0;De<Oe;De+=1)Te.push(n(Me[De],Re.effectsManager.effectElements[De],Ce,Re));var Be=Re.data.ef||[],ze=function(He){for(De=0,Oe=Be.length;De<Oe;){if(He===Be[De].nm||He===Be[De].mn||He===Be[De].ix)return Te[De];De+=1}return null};return Object.defineProperty(ze,"numProperties",{get:function(){return Be.length}}),ze}return null}function n(Re,Ce,Te,Me){function De(He){for(var Ue=Re.ef,Ve=0,We=Ue.length;Ve<We;){if(He===Ue[Ve].nm||He===Ue[Ve].mn||He===Ue[Ve].ix)return Ue[Ve].ty===5?Be[Ve]:Be[Ve]();Ve+=1}throw new Error}var Oe=propertyGroupFactory(De,Te),Be=[],ze,$e=Re.ef.length;for(ze=0;ze<$e;ze+=1)Re.ef[ze].ty===5?Be.push(n(Re.ef[ze],Ce.effectElements[ze],Ce.effectElements[ze].propertyGroup,Me)):Be.push(Ee(Ce.effectElements[ze],Re.ef[ze].ty,Me,Oe));return Re.mn==="ADBE Color Control"&&Object.defineProperty(De,"color",{get:function(){return Be[0]()}}),Object.defineProperties(De,{numProperties:{get:function(){return Re.np}},_name:{value:Re.nm},propertyGroup:{value:Oe}}),De.enabled=Re.en!==0,De.active=De.enabled,De}function Ee(Re,Ce,Te,Me){var De=ExpressionPropertyInterface(Re.p);function Oe(){return Ce===10?Te.comp.compInterface(Re.p.v):De()}return Re.p.setGroupProperty&&Re.p.setGroupProperty(PropertyInterface("",Me)),Oe}return e}(),ShapePathInterface=function(){return function(t,n,Ee){var Re=n.sh;function Ce(Me){return Me==="Shape"||Me==="shape"||Me==="Path"||Me==="path"||Me==="ADBE Vector Shape"||Me===2?Ce.path:null}var Te=propertyGroupFactory(Ce,Ee);return Re.setGroupProperty(PropertyInterface("Path",Te)),Object.defineProperties(Ce,{path:{get:function(){return Re.k&&Re.getValue(),Re}},shape:{get:function(){return Re.k&&Re.getValue(),Re}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:Ee}}),Ce}}(),ShapeExpressionInterface=function(){function e(Ue,Ve,We){var qe=[],Ge,Ye=Ue?Ue.length:0;for(Ge=0;Ge<Ye;Ge+=1)Ue[Ge].ty==="gr"?qe.push(n(Ue[Ge],Ve[Ge],We)):Ue[Ge].ty==="fl"?qe.push(Ee(Ue[Ge],Ve[Ge],We)):Ue[Ge].ty==="st"?qe.push(Te(Ue[Ge],Ve[Ge],We)):Ue[Ge].ty==="tm"?qe.push(Me(Ue[Ge],Ve[Ge],We)):Ue[Ge].ty==="tr"||(Ue[Ge].ty==="el"?qe.push(Oe(Ue[Ge],Ve[Ge],We)):Ue[Ge].ty==="sr"?qe.push(Be(Ue[Ge],Ve[Ge],We)):Ue[Ge].ty==="sh"?qe.push(ShapePathInterface(Ue[Ge],Ve[Ge],We)):Ue[Ge].ty==="rc"?qe.push(ze(Ue[Ge],Ve[Ge],We)):Ue[Ge].ty==="rd"?qe.push($e(Ue[Ge],Ve[Ge],We)):Ue[Ge].ty==="rp"?qe.push(He(Ue[Ge],Ve[Ge],We)):Ue[Ge].ty==="gf"?qe.push(Re(Ue[Ge],Ve[Ge],We)):qe.push(Ce(Ue[Ge],Ve[Ge])));return qe}function t(Ue,Ve,We){var qe,Ge=function(Xe){for(var Ze=0,er=qe.length;Ze<er;){if(qe[Ze]._name===Xe||qe[Ze].mn===Xe||qe[Ze].propertyIndex===Xe||qe[Ze].ix===Xe||qe[Ze].ind===Xe)return qe[Ze];Ze+=1}return typeof Xe=="number"?qe[Xe-1]:null};Ge.propertyGroup=propertyGroupFactory(Ge,We),qe=e(Ue.it,Ve.it,Ge.propertyGroup),Ge.numProperties=qe.length;var Ye=De(Ue.it[Ue.it.length-1],Ve.it[Ve.it.length-1],Ge.propertyGroup);return Ge.transform=Ye,Ge.propertyIndex=Ue.cix,Ge._name=Ue.nm,Ge}function n(Ue,Ve,We){var qe=function(Xe){switch(Xe){case"ADBE Vectors Group":case"Contents":case 2:return qe.content;default:return qe.transform}};qe.propertyGroup=propertyGroupFactory(qe,We);var Ge=t(Ue,Ve,qe.propertyGroup),Ye=De(Ue.it[Ue.it.length-1],Ve.it[Ve.it.length-1],qe.propertyGroup);return qe.content=Ge,qe.transform=Ye,Object.defineProperty(qe,"_name",{get:function(){return Ue.nm}}),qe.numProperties=Ue.np,qe.propertyIndex=Ue.ix,qe.nm=Ue.nm,qe.mn=Ue.mn,qe}function Ee(Ue,Ve,We){function qe(Ge){return Ge==="Color"||Ge==="color"?qe.color:Ge==="Opacity"||Ge==="opacity"?qe.opacity:null}return Object.defineProperties(qe,{color:{get:ExpressionPropertyInterface(Ve.c)},opacity:{get:ExpressionPropertyInterface(Ve.o)},_name:{value:Ue.nm},mn:{value:Ue.mn}}),Ve.c.setGroupProperty(PropertyInterface("Color",We)),Ve.o.setGroupProperty(PropertyInterface("Opacity",We)),qe}function Re(Ue,Ve,We){function qe(Ge){return Ge==="Start Point"||Ge==="start point"?qe.startPoint:Ge==="End Point"||Ge==="end point"?qe.endPoint:Ge==="Opacity"||Ge==="opacity"?qe.opacity:null}return Object.defineProperties(qe,{startPoint:{get:ExpressionPropertyInterface(Ve.s)},endPoint:{get:ExpressionPropertyInterface(Ve.e)},opacity:{get:ExpressionPropertyInterface(Ve.o)},type:{get:function(){return"a"}},_name:{value:Ue.nm},mn:{value:Ue.mn}}),Ve.s.setGroupProperty(PropertyInterface("Start Point",We)),Ve.e.setGroupProperty(PropertyInterface("End Point",We)),Ve.o.setGroupProperty(PropertyInterface("Opacity",We)),qe}function Ce(){function Ue(){return null}return Ue}function Te(Ue,Ve,We){var qe=propertyGroupFactory(er,We),Ge=propertyGroupFactory(Ze,qe);function Ye(St){Object.defineProperty(Ze,Ue.d[St].nm,{get:ExpressionPropertyInterface(Ve.d.dataProps[St].p)})}var Ke,Xe=Ue.d?Ue.d.length:0,Ze={};for(Ke=0;Ke<Xe;Ke+=1)Ye(Ke),Ve.d.dataProps[Ke].p.setGroupProperty(Ge);function er(St){return St==="Color"||St==="color"?er.color:St==="Opacity"||St==="opacity"?er.opacity:St==="Stroke Width"||St==="stroke width"?er.strokeWidth:null}return Object.defineProperties(er,{color:{get:ExpressionPropertyInterface(Ve.c)},opacity:{get:ExpressionPropertyInterface(Ve.o)},strokeWidth:{get:ExpressionPropertyInterface(Ve.w)},dash:{get:function(){return Ze}},_name:{value:Ue.nm},mn:{value:Ue.mn}}),Ve.c.setGroupProperty(PropertyInterface("Color",qe)),Ve.o.setGroupProperty(PropertyInterface("Opacity",qe)),Ve.w.setGroupProperty(PropertyInterface("Stroke Width",qe)),er}function Me(Ue,Ve,We){function qe(Ye){return Ye===Ue.e.ix||Ye==="End"||Ye==="end"?qe.end:Ye===Ue.s.ix?qe.start:Ye===Ue.o.ix?qe.offset:null}var Ge=propertyGroupFactory(qe,We);return qe.propertyIndex=Ue.ix,Ve.s.setGroupProperty(PropertyInterface("Start",Ge)),Ve.e.setGroupProperty(PropertyInterface("End",Ge)),Ve.o.setGroupProperty(PropertyInterface("Offset",Ge)),qe.propertyIndex=Ue.ix,qe.propertyGroup=We,Object.defineProperties(qe,{start:{get:ExpressionPropertyInterface(Ve.s)},end:{get:ExpressionPropertyInterface(Ve.e)},offset:{get:ExpressionPropertyInterface(Ve.o)},_name:{value:Ue.nm}}),qe.mn=Ue.mn,qe}function De(Ue,Ve,We){function qe(Ye){return Ue.a.ix===Ye||Ye==="Anchor Point"?qe.anchorPoint:Ue.o.ix===Ye||Ye==="Opacity"?qe.opacity:Ue.p.ix===Ye||Ye==="Position"?qe.position:Ue.r.ix===Ye||Ye==="Rotation"||Ye==="ADBE Vector Rotation"?qe.rotation:Ue.s.ix===Ye||Ye==="Scale"?qe.scale:Ue.sk&&Ue.sk.ix===Ye||Ye==="Skew"?qe.skew:Ue.sa&&Ue.sa.ix===Ye||Ye==="Skew Axis"?qe.skewAxis:null}var Ge=propertyGroupFactory(qe,We);return Ve.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Ge)),Ve.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Ge)),Ve.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Ge)),Ve.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Ge)),Ve.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Ge)),Ve.transform.mProps.sk&&(Ve.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Ge)),Ve.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Ge))),Ve.transform.op.setGroupProperty(PropertyInterface("Opacity",Ge)),Object.defineProperties(qe,{opacity:{get:ExpressionPropertyInterface(Ve.transform.mProps.o)},position:{get:ExpressionPropertyInterface(Ve.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(Ve.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(Ve.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(Ve.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(Ve.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(Ve.transform.mProps.sa)},_name:{value:Ue.nm}}),qe.ty="tr",qe.mn=Ue.mn,qe.propertyGroup=We,qe}function Oe(Ue,Ve,We){function qe(Ke){return Ue.p.ix===Ke?qe.position:Ue.s.ix===Ke?qe.size:null}var Ge=propertyGroupFactory(qe,We);qe.propertyIndex=Ue.ix;var Ye=Ve.sh.ty==="tm"?Ve.sh.prop:Ve.sh;return Ye.s.setGroupProperty(PropertyInterface("Size",Ge)),Ye.p.setGroupProperty(PropertyInterface("Position",Ge)),Object.defineProperties(qe,{size:{get:ExpressionPropertyInterface(Ye.s)},position:{get:ExpressionPropertyInterface(Ye.p)},_name:{value:Ue.nm}}),qe.mn=Ue.mn,qe}function Be(Ue,Ve,We){function qe(Ke){return Ue.p.ix===Ke?qe.position:Ue.r.ix===Ke?qe.rotation:Ue.pt.ix===Ke?qe.points:Ue.or.ix===Ke||Ke==="ADBE Vector Star Outer Radius"?qe.outerRadius:Ue.os.ix===Ke?qe.outerRoundness:Ue.ir&&(Ue.ir.ix===Ke||Ke==="ADBE Vector Star Inner Radius")?qe.innerRadius:Ue.is&&Ue.is.ix===Ke?qe.innerRoundness:null}var Ge=propertyGroupFactory(qe,We),Ye=Ve.sh.ty==="tm"?Ve.sh.prop:Ve.sh;return qe.propertyIndex=Ue.ix,Ye.or.setGroupProperty(PropertyInterface("Outer Radius",Ge)),Ye.os.setGroupProperty(PropertyInterface("Outer Roundness",Ge)),Ye.pt.setGroupProperty(PropertyInterface("Points",Ge)),Ye.p.setGroupProperty(PropertyInterface("Position",Ge)),Ye.r.setGroupProperty(PropertyInterface("Rotation",Ge)),Ue.ir&&(Ye.ir.setGroupProperty(PropertyInterface("Inner Radius",Ge)),Ye.is.setGroupProperty(PropertyInterface("Inner Roundness",Ge))),Object.defineProperties(qe,{position:{get:ExpressionPropertyInterface(Ye.p)},rotation:{get:ExpressionPropertyInterface(Ye.r)},points:{get:ExpressionPropertyInterface(Ye.pt)},outerRadius:{get:ExpressionPropertyInterface(Ye.or)},outerRoundness:{get:ExpressionPropertyInterface(Ye.os)},innerRadius:{get:ExpressionPropertyInterface(Ye.ir)},innerRoundness:{get:ExpressionPropertyInterface(Ye.is)},_name:{value:Ue.nm}}),qe.mn=Ue.mn,qe}function ze(Ue,Ve,We){function qe(Ke){return Ue.p.ix===Ke?qe.position:Ue.r.ix===Ke?qe.roundness:Ue.s.ix===Ke||Ke==="Size"||Ke==="ADBE Vector Rect Size"?qe.size:null}var Ge=propertyGroupFactory(qe,We),Ye=Ve.sh.ty==="tm"?Ve.sh.prop:Ve.sh;return qe.propertyIndex=Ue.ix,Ye.p.setGroupProperty(PropertyInterface("Position",Ge)),Ye.s.setGroupProperty(PropertyInterface("Size",Ge)),Ye.r.setGroupProperty(PropertyInterface("Rotation",Ge)),Object.defineProperties(qe,{position:{get:ExpressionPropertyInterface(Ye.p)},roundness:{get:ExpressionPropertyInterface(Ye.r)},size:{get:ExpressionPropertyInterface(Ye.s)},_name:{value:Ue.nm}}),qe.mn=Ue.mn,qe}function $e(Ue,Ve,We){function qe(Ke){return Ue.r.ix===Ke||Ke==="Round Corners 1"?qe.radius:null}var Ge=propertyGroupFactory(qe,We),Ye=Ve;return qe.propertyIndex=Ue.ix,Ye.rd.setGroupProperty(PropertyInterface("Radius",Ge)),Object.defineProperties(qe,{radius:{get:ExpressionPropertyInterface(Ye.rd)},_name:{value:Ue.nm}}),qe.mn=Ue.mn,qe}function He(Ue,Ve,We){function qe(Ke){return Ue.c.ix===Ke||Ke==="Copies"?qe.copies:Ue.o.ix===Ke||Ke==="Offset"?qe.offset:null}var Ge=propertyGroupFactory(qe,We),Ye=Ve;return qe.propertyIndex=Ue.ix,Ye.c.setGroupProperty(PropertyInterface("Copies",Ge)),Ye.o.setGroupProperty(PropertyInterface("Offset",Ge)),Object.defineProperties(qe,{copies:{get:ExpressionPropertyInterface(Ye.c)},offset:{get:ExpressionPropertyInterface(Ye.o)},_name:{value:Ue.nm}}),qe.mn=Ue.mn,qe}return function(Ue,Ve,We){var qe;function Ge(Ke){if(typeof Ke=="number")return Ke=Ke===void 0?1:Ke,Ke===0?We:qe[Ke-1];for(var Xe=0,Ze=qe.length;Xe<Ze;){if(qe[Xe]._name===Ke)return qe[Xe];Xe+=1}return null}function Ye(){return We}return Ge.propertyGroup=propertyGroupFactory(Ge,Ye),qe=e(Ue,Ve,Ge.propertyGroup),Ge.numProperties=qe.length,Ge._name="Contents",Ge}}(),TextExpressionInterface=function(){return function(e){var t;function n(Ee){switch(Ee){case"ADBE Text Document":return n.sourceText;default:return null}}return Object.defineProperty(n,"sourceText",{get:function(){e.textProperty.getValue();var Re=e.textProperty.currentData.t;return(!t||Re!==t.value)&&(t=new String(Re),t.value=Re||new String(Re),Object.defineProperty(t,"style",{get:function(){return{fillColor:e.textProperty.currentData.fc}}})),t}}),n}}();function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var FootageInterface=function(){var e=function(Ee){var Re="",Ce=Ee.getFootageData();function Te(){return Re="",Ce=Ee.getFootageData(),Me}function Me(De){if(Ce[De])return Re=De,Ce=Ce[De],_typeof(Ce)==="object"?Me:Ce;var Oe=De.indexOf(Re);if(Oe!==-1){var Be=parseInt(De.substr(Oe+Re.length),10);return Ce=Ce[Be],_typeof(Ce)==="object"?Me:Ce}return""}return Te},t=function(Ee){function Re(Ce){return Ce==="Outline"?Re.outlineInterface():null}return Re._name="Outline",Re.outlineInterface=e(Ee),Re};return function(n){function Ee(Re){return Re==="Data"?Ee.dataInterface:null}return Ee._name="Data",Ee.dataInterface=t(n),Ee}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(e){return interfaces[e]||null}var expressionHelpers=function(){function e(Te,Me,De){Me.x&&(De.k=!0,De.x=!0,De.initiateExpression=ExpressionManager.initiateExpression,De.effectsSequence.push(De.initiateExpression(Te,Me,De).bind(De)))}function t(Te){return Te*=this.elem.globalData.frameRate,Te-=this.offsetTime,Te!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<Te?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(Te,this._cachingAtTime),this._cachingAtTime.lastFrame=Te),this._cachingAtTime.value}function n(Te){var Me=-.01,De=this.getValueAtTime(Te),Oe=this.getValueAtTime(Te+Me),Be=0;if(De.length){var ze;for(ze=0;ze<De.length;ze+=1)Be+=Math.pow(Oe[ze]-De[ze],2);Be=Math.sqrt(Be)*100}else Be=0;return Be}function Ee(Te){if(this.vel!==void 0)return this.vel;var Me=-.001,De=this.getValueAtTime(Te),Oe=this.getValueAtTime(Te+Me),Be;if(De.length){Be=createTypedArray("float32",De.length);var ze;for(ze=0;ze<De.length;ze+=1)Be[ze]=(Oe[ze]-De[ze])/Me}else Be=(Oe-De)/Me;return Be}function Re(){return this.pv}function Ce(Te){this.propertyGroup=Te}return{searchExpressions:e,getSpeedAtTime:n,getVelocityAtTime:Ee,getValueAtTime:t,getStaticValueAtTime:Re,setGroupProperty:Ce}}();function addPropertyDecorator(){function e($e,He,Ue){if(!this.k||!this.keyframes)return this.pv;$e=$e?$e.toLowerCase():"";var Ve=this.comp.renderedFrame,We=this.keyframes,qe=We[We.length-1].t;if(Ve<=qe)return this.pv;var Ge,Ye;Ue?(He?Ge=Math.abs(qe-this.elem.comp.globalData.frameRate*He):Ge=Math.max(0,qe-this.elem.data.ip),Ye=qe-Ge):((!He||He>We.length-1)&&(He=We.length-1),Ye=We[We.length-1-He].t,Ge=qe-Ye);var Ke,Xe,Ze;if($e==="pingpong"){var er=Math.floor((Ve-Ye)/Ge);if(er%2!==0)return this.getValueAtTime((Ge-(Ve-Ye)%Ge+Ye)/this.comp.globalData.frameRate,0)}else if($e==="offset"){var St=this.getValueAtTime(Ye/this.comp.globalData.frameRate,0),ar=this.getValueAtTime(qe/this.comp.globalData.frameRate,0),hr=this.getValueAtTime(((Ve-Ye)%Ge+Ye)/this.comp.globalData.frameRate,0),ur=Math.floor((Ve-Ye)/Ge);if(this.pv.length){for(Ze=new Array(St.length),Xe=Ze.length,Ke=0;Ke<Xe;Ke+=1)Ze[Ke]=(ar[Ke]-St[Ke])*ur+hr[Ke];return Ze}return(ar-St)*ur+hr}else if($e==="continue"){var dr=this.getValueAtTime(qe/this.comp.globalData.frameRate,0),vr=this.getValueAtTime((qe-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Ze=new Array(dr.length),Xe=Ze.length,Ke=0;Ke<Xe;Ke+=1)Ze[Ke]=dr[Ke]+(dr[Ke]-vr[Ke])*((Ve-qe)/this.comp.globalData.frameRate)/5e-4;return Ze}return dr+(dr-vr)*((Ve-qe)/.001)}return this.getValueAtTime(((Ve-Ye)%Ge+Ye)/this.comp.globalData.frameRate,0)}function t($e,He,Ue){if(!this.k)return this.pv;$e=$e?$e.toLowerCase():"";var Ve=this.comp.renderedFrame,We=this.keyframes,qe=We[0].t;if(Ve>=qe)return this.pv;var Ge,Ye;Ue?(He?Ge=Math.abs(this.elem.comp.globalData.frameRate*He):Ge=Math.max(0,this.elem.data.op-qe),Ye=qe+Ge):((!He||He>We.length-1)&&(He=We.length-1),Ye=We[He].t,Ge=Ye-qe);var Ke,Xe,Ze;if($e==="pingpong"){var er=Math.floor((qe-Ve)/Ge);if(er%2===0)return this.getValueAtTime(((qe-Ve)%Ge+qe)/this.comp.globalData.frameRate,0)}else if($e==="offset"){var St=this.getValueAtTime(qe/this.comp.globalData.frameRate,0),ar=this.getValueAtTime(Ye/this.comp.globalData.frameRate,0),hr=this.getValueAtTime((Ge-(qe-Ve)%Ge+qe)/this.comp.globalData.frameRate,0),ur=Math.floor((qe-Ve)/Ge)+1;if(this.pv.length){for(Ze=new Array(St.length),Xe=Ze.length,Ke=0;Ke<Xe;Ke+=1)Ze[Ke]=hr[Ke]-(ar[Ke]-St[Ke])*ur;return Ze}return hr-(ar-St)*ur}else if($e==="continue"){var dr=this.getValueAtTime(qe/this.comp.globalData.frameRate,0),vr=this.getValueAtTime((qe+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Ze=new Array(dr.length),Xe=Ze.length,Ke=0;Ke<Xe;Ke+=1)Ze[Ke]=dr[Ke]+(dr[Ke]-vr[Ke])*(qe-Ve)/.001;return Ze}return dr+(dr-vr)*(qe-Ve)/.001}return this.getValueAtTime((Ge-((qe-Ve)%Ge+qe))/this.comp.globalData.frameRate,0)}function n($e,He){if(!this.k)return this.pv;if($e=($e||.4)*.5,He=Math.floor(He||5),He<=1)return this.pv;var Ue=this.comp.renderedFrame/this.comp.globalData.frameRate,Ve=Ue-$e,We=Ue+$e,qe=He>1?(We-Ve)/(He-1):1,Ge=0,Ye=0,Ke;this.pv.length?Ke=createTypedArray("float32",this.pv.length):Ke=0;for(var Xe;Ge<He;){if(Xe=this.getValueAtTime(Ve+Ge*qe),this.pv.length)for(Ye=0;Ye<this.pv.length;Ye+=1)Ke[Ye]+=Xe[Ye];else Ke+=Xe;Ge+=1}if(this.pv.length)for(Ye=0;Ye<this.pv.length;Ye+=1)Ke[Ye]/=He;else Ke/=He;return Ke}function Ee($e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var He=this._transformCachingAtTime.v;if(He.cloneFromProps(this.pre.props),this.appliedTransformations<1){var Ue=this.a.getValueAtTime($e);He.translate(-Ue[0]*this.a.mult,-Ue[1]*this.a.mult,Ue[2]*this.a.mult)}if(this.appliedTransformations<2){var Ve=this.s.getValueAtTime($e);He.scale(Ve[0]*this.s.mult,Ve[1]*this.s.mult,Ve[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var We=this.sk.getValueAtTime($e),qe=this.sa.getValueAtTime($e);He.skewFromAxis(-We*this.sk.mult,qe*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Ge=this.r.getValueAtTime($e);He.rotate(-Ge*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Ye=this.rz.getValueAtTime($e),Ke=this.ry.getValueAtTime($e),Xe=this.rx.getValueAtTime($e),Ze=this.or.getValueAtTime($e);He.rotateZ(-Ye*this.rz.mult).rotateY(Ke*this.ry.mult).rotateX(Xe*this.rx.mult).rotateZ(-Ze[2]*this.or.mult).rotateY(Ze[1]*this.or.mult).rotateX(Ze[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var er=this.px.getValueAtTime($e),St=this.py.getValueAtTime($e);if(this.data.p.z){var ar=this.pz.getValueAtTime($e);He.translate(er*this.px.mult,St*this.py.mult,-ar*this.pz.mult)}else He.translate(er*this.px.mult,St*this.py.mult,0)}else{var hr=this.p.getValueAtTime($e);He.translate(hr[0]*this.p.mult,hr[1]*this.p.mult,-hr[2]*this.p.mult)}return He}function Re(){return this.v.clone(new Matrix)}var Ce=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function($e,He,Ue){var Ve=Ce($e,He,Ue);return Ve.dynamicProperties.length?Ve.getValueAtTime=Ee.bind(Ve):Ve.getValueAtTime=Re.bind(Ve),Ve.setGroupProperty=expressionHelpers.setGroupProperty,Ve};var Te=PropertyFactory.getProp;PropertyFactory.getProp=function($e,He,Ue,Ve,We){var qe=Te($e,He,Ue,Ve,We);qe.kf?qe.getValueAtTime=expressionHelpers.getValueAtTime.bind(qe):qe.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(qe),qe.setGroupProperty=expressionHelpers.setGroupProperty,qe.loopOut=e,qe.loopIn=t,qe.smooth=n,qe.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(qe),qe.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(qe),qe.numKeys=He.a===1?He.k.length:0,qe.propertyIndex=He.ix;var Ge=0;return Ue!==0&&(Ge=createTypedArray("float32",He.a===1?He.k[0].s.length:He.k.length)),qe._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Ge},expressionHelpers.searchExpressions($e,He,qe),qe.k&&We.addDynamicProperty(qe),qe};function Me($e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),$e*=this.elem.globalData.frameRate,$e-=this.offsetTime,$e!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<$e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=$e,this.interpolateShape($e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var De=ShapePropertyFactory.getConstructorFunction(),Oe=ShapePropertyFactory.getKeyframedConstructorFunction();function Be(){}Be.prototype={vertices:function(He,Ue){this.k&&this.getValue();var Ve=this.v;Ue!==void 0&&(Ve=this.getValueAtTime(Ue,0));var We,qe=Ve._length,Ge=Ve[He],Ye=Ve.v,Ke=createSizedArray(qe);for(We=0;We<qe;We+=1)He==="i"||He==="o"?Ke[We]=[Ge[We][0]-Ye[We][0],Ge[We][1]-Ye[We][1]]:Ke[We]=[Ge[We][0],Ge[We][1]];return Ke},points:function(He){return this.vertices("v",He)},inTangents:function(He){return this.vertices("i",He)},outTangents:function(He){return this.vertices("o",He)},isClosed:function(){return this.v.c},pointOnPath:function(He,Ue){var Ve=this.v;Ue!==void 0&&(Ve=this.getValueAtTime(Ue,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(Ve));for(var We=this._segmentsLength,qe=We.lengths,Ge=We.totalLength*He,Ye=0,Ke=qe.length,Xe=0,Ze;Ye<Ke;){if(Xe+qe[Ye].addedLength>Ge){var er=Ye,St=Ve.c&&Ye===Ke-1?0:Ye+1,ar=(Ge-Xe)/qe[Ye].addedLength;Ze=bez.getPointInSegment(Ve.v[er],Ve.v[St],Ve.o[er],Ve.i[St],ar,qe[Ye]);break}else Xe+=qe[Ye].addedLength;Ye+=1}return Ze||(Ze=Ve.c?[Ve.v[0][0],Ve.v[0][1]]:[Ve.v[Ve._length-1][0],Ve.v[Ve._length-1][1]]),Ze},vectorOnPath:function(He,Ue,Ve){He==1?He=this.v.c:He==0&&(He=.999);var We=this.pointOnPath(He,Ue),qe=this.pointOnPath(He+.001,Ue),Ge=qe[0]-We[0],Ye=qe[1]-We[1],Ke=Math.sqrt(Math.pow(Ge,2)+Math.pow(Ye,2));if(Ke===0)return[0,0];var Xe=Ve==="tangent"?[Ge/Ke,Ye/Ke]:[-Ye/Ke,Ge/Ke];return Xe},tangentOnPath:function(He,Ue){return this.vectorOnPath(He,Ue,"tangent")},normalOnPath:function(He,Ue){return this.vectorOnPath(He,Ue,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Be],De),extendPrototype([Be],Oe),Oe.prototype.getValueAtTime=Me,Oe.prototype.initiateExpression=ExpressionManager.initiateExpression;var ze=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function($e,He,Ue,Ve,We){var qe=ze($e,He,Ue,Ve,We);return qe.propertyIndex=He.ix,qe.lock=!1,Ue===3?expressionHelpers.searchExpressions($e,He.pt,qe):Ue===4&&expressionHelpers.searchExpressions($e,He.ks,qe),qe.k&&$e.addDynamicProperty(qe),qe}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function e(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(t,n){var Ee=this.calculateExpression(n);if(t.t!==Ee){var Re={};return this.copyData(Re,t),Re.t=Ee.toString(),Re.__complete=!1,Re}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),n=this.searchExpressions();return this.kf=t||n,this.kf},TextProperty.prototype.searchExpressions=e}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function e(t,n){var Ee=createNS("feMerge");Ee.setAttribute("result",t);var Re,Ce;for(Ce=0;Ce<n.length;Ce+=1)Re=createNS("feMergeNode"),Re.setAttribute("in",n[Ce]),Ee.appendChild(Re),Ee.appendChild(Re);return Ee}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(e,t,n,Ee,Re){this.filterManager=t;var Ce=createNS("feColorMatrix");Ce.setAttribute("type","matrix"),Ce.setAttribute("color-interpolation-filters","linearRGB"),Ce.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=Ce,Ce.setAttribute("result",Ee+"_tint_1"),e.appendChild(Ce),Ce=createNS("feColorMatrix"),Ce.setAttribute("type","matrix"),Ce.setAttribute("color-interpolation-filters","sRGB"),Ce.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),Ce.setAttribute("result",Ee+"_tint_2"),e.appendChild(Ce),this.matrixFilter=Ce;var Te=this.createMergeNode(Ee,[Re,Ee+"_tint_1",Ee+"_tint_2"]);e.appendChild(Te)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,Ee=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+Ee+" 0"),this.matrixFilter.setAttribute("values",n[0]-t[0]+" 0 0 0 "+t[0]+" "+(n[1]-t[1])+" 0 0 0 "+t[1]+" "+(n[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 1 0")}};function SVGFillFilter(e,t,n,Ee){this.filterManager=t;var Re=createNS("feColorMatrix");Re.setAttribute("type","matrix"),Re.setAttribute("color-interpolation-filters","sRGB"),Re.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),Re.setAttribute("result",Ee),e.appendChild(Re),this.matrixFilter=Re}SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+n+" 0")}};function SVGStrokeEffect(e,t,n){this.initialized=!1,this.filterManager=t,this.elem=n,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var e=this.elem.layerElement.children||this.elem.layerElement.childNodes,t,n,Ee,Re;for(this.filterManager.effectElements[1].p.v===1?(Re=this.elem.maskManager.masksProperties.length,Ee=0):(Ee=this.filterManager.effectElements[0].p.v-1,Re=Ee+1),n=createNS("g"),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-dashoffset",1),Ee;Ee<Re;Ee+=1)t=createNS("path"),n.appendChild(t),this.paths.push({p:t,m:Ee});if(this.filterManager.effectElements[10].p.v===3){var Ce=createNS("mask"),Te=createElementID();Ce.setAttribute("id",Te),Ce.setAttribute("mask-type","alpha"),Ce.appendChild(n),this.elem.globalData.defs.appendChild(Ce);var Me=createNS("g");for(Me.setAttribute("mask","url("+getLocationHref()+"#"+Te+")");e[0];)Me.appendChild(e[0]);this.elem.layerElement.appendChild(Me),this.masker=Ce,n.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(e=this.elem.layerElement.children||this.elem.layerElement.childNodes;e.length;)this.elem.layerElement.removeChild(e[0]);this.elem.layerElement.appendChild(n),this.elem.layerElement.removeAttribute("mask"),n.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=n},SVGStrokeEffect.prototype.renderFrame=function(e){this.initialized||this.initialize();var t,n=this.paths.length,Ee,Re;for(t=0;t<n;t+=1)if(this.paths[t].m!==-1&&(Ee=this.elem.maskManager.viewData[this.paths[t].m],Re=this.paths[t].p,(e||this.filterManager._mdf||Ee.prop._mdf)&&Re.setAttribute("d",Ee.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||Ee.prop._mdf)){var Ce;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var Te=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,Me=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,De=Re.getTotalLength();Ce="0 0 0 "+De*Te+" ";var Oe=De*(Me-Te),Be=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,ze=Math.floor(Oe/Be),$e;for($e=0;$e<ze;$e+=1)Ce+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";Ce+="0 "+De*10+" 0 0"}else Ce="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;Re.setAttribute("stroke-dasharray",Ce)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(e||this.filterManager.effectElements[3].p._mdf)){var He=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(He[0]*255)+","+bmFloor(He[1]*255)+","+bmFloor(He[2]*255)+")")}};function SVGTritoneFilter(e,t,n,Ee){this.filterManager=t;var Re=createNS("feColorMatrix");Re.setAttribute("type","matrix"),Re.setAttribute("color-interpolation-filters","linearRGB"),Re.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.appendChild(Re);var Ce=createNS("feComponentTransfer");Ce.setAttribute("color-interpolation-filters","sRGB"),Ce.setAttribute("result",Ee),this.matrixFilter=Ce;var Te=createNS("feFuncR");Te.setAttribute("type","table"),Ce.appendChild(Te),this.feFuncR=Te;var Me=createNS("feFuncG");Me.setAttribute("type","table"),Ce.appendChild(Me),this.feFuncG=Me;var De=createNS("feFuncB");De.setAttribute("type","table"),Ce.appendChild(De),this.feFuncB=De,e.appendChild(Ce)}SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,Ee=this.filterManager.effectElements[2].p.v,Re=Ee[0]+" "+n[0]+" "+t[0],Ce=Ee[1]+" "+n[1]+" "+t[1],Te=Ee[2]+" "+n[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",Re),this.feFuncG.setAttribute("tableValues",Ce),this.feFuncB.setAttribute("tableValues",Te)}};function SVGProLevelsFilter(e,t,n,Ee){this.filterManager=t;var Re=this.filterManager.effectElements,Ce=createNS("feComponentTransfer");(Re[10].p.k||Re[10].p.v!==0||Re[11].p.k||Re[11].p.v!==1||Re[12].p.k||Re[12].p.v!==1||Re[13].p.k||Re[13].p.v!==0||Re[14].p.k||Re[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",Ce)),(Re[17].p.k||Re[17].p.v!==0||Re[18].p.k||Re[18].p.v!==1||Re[19].p.k||Re[19].p.v!==1||Re[20].p.k||Re[20].p.v!==0||Re[21].p.k||Re[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",Ce)),(Re[24].p.k||Re[24].p.v!==0||Re[25].p.k||Re[25].p.v!==1||Re[26].p.k||Re[26].p.v!==1||Re[27].p.k||Re[27].p.v!==0||Re[28].p.k||Re[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",Ce)),(Re[31].p.k||Re[31].p.v!==0||Re[32].p.k||Re[32].p.v!==1||Re[33].p.k||Re[33].p.v!==1||Re[34].p.k||Re[34].p.v!==0||Re[35].p.k||Re[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",Ce)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(Ce.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(Ce)),(Re[3].p.k||Re[3].p.v!==0||Re[4].p.k||Re[4].p.v!==1||Re[5].p.k||Re[5].p.v!==1||Re[6].p.k||Re[6].p.v!==0||Re[7].p.k||Re[7].p.v!==1)&&(Ce=createNS("feComponentTransfer"),Ce.setAttribute("color-interpolation-filters","sRGB"),Ce.setAttribute("result",Ee),e.appendChild(Ce),this.feFuncRComposed=this.createFeFunc("feFuncR",Ce),this.feFuncGComposed=this.createFeFunc("feFuncG",Ce),this.feFuncBComposed=this.createFeFunc("feFuncB",Ce))}SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var n=createNS(e);return n.setAttribute("type","table"),t.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(e,t,n,Ee,Re){for(var Ce=0,Te=256,Me,De=Math.min(e,t),Oe=Math.max(e,t),Be=Array.call(null,{length:Te}),ze,$e=0,He=Re-Ee,Ue=t-e;Ce<=256;)Me=Ce/256,Me<=De?ze=Ue<0?Re:Ee:Me>=Oe?ze=Ue<0?Ee:Re:ze=Ee+He*Math.pow((Me-e)/Ue,1/n),Be[$e]=ze,$e+=1,Ce+=256/(Te-1);return Be.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t,n=this.filterManager.effectElements;this.feFuncRComposed&&(e||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(t=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(t=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(t=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(t=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(t=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",t))}};function SVGDropShadowEffect(e,t,n,Ee,Re){var Ce=t.container.globalData.renderConfig.filterSize,Te=t.data.fs||Ce;e.setAttribute("x",Te.x||Ce.x),e.setAttribute("y",Te.y||Ce.y),e.setAttribute("width",Te.width||Ce.width),e.setAttribute("height",Te.height||Ce.height),this.filterManager=t;var Me=createNS("feGaussianBlur");Me.setAttribute("in","SourceAlpha"),Me.setAttribute("result",Ee+"_drop_shadow_1"),Me.setAttribute("stdDeviation","0"),this.feGaussianBlur=Me,e.appendChild(Me);var De=createNS("feOffset");De.setAttribute("dx","25"),De.setAttribute("dy","0"),De.setAttribute("in",Ee+"_drop_shadow_1"),De.setAttribute("result",Ee+"_drop_shadow_2"),this.feOffset=De,e.appendChild(De);var Oe=createNS("feFlood");Oe.setAttribute("flood-color","#00ff00"),Oe.setAttribute("flood-opacity","1"),Oe.setAttribute("result",Ee+"_drop_shadow_3"),this.feFlood=Oe,e.appendChild(Oe);var Be=createNS("feComposite");Be.setAttribute("in",Ee+"_drop_shadow_3"),Be.setAttribute("in2",Ee+"_drop_shadow_2"),Be.setAttribute("operator","in"),Be.setAttribute("result",Ee+"_drop_shadow_4"),e.appendChild(Be);var ze=this.createMergeNode(Ee,[Ee+"_drop_shadow_4",Re]);e.appendChild(ze)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(t[0]*255),Math.round(t[1]*255),Math.round(t[2]*255)))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,Ee=(this.filterManager.effectElements[2].p.v-90)*degToRads,Re=n*Math.cos(Ee),Ce=n*Math.sin(Ee);this.feOffset.setAttribute("dx",Re),this.feOffset.setAttribute("dy",Ce)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,n){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,n=_svgMatteSymbols.length;t<n;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var n=e.layerElement.parentNode;if(n){for(var Ee=n.children,Re=0,Ce=Ee.length;Re<Ce&&Ee[Re]!==e.layerElement;)Re+=1;var Te;Re<=Ce-2&&(Te=Ee[Re+1]);var Me=createNS("use");Me.setAttribute("href","#"+t),Te?n.insertBefore(Me,Te):n.appendChild(Me)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){if(!this.findSymbol(t)){var n=createElementID(),Ee=createNS("mask");Ee.setAttribute("id",t.layerId),Ee.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var Re=e.globalData.defs;Re.appendChild(Ee);var Ce=createNS("symbol");Ce.setAttribute("id",n),this.replaceInParent(t,n),Ce.appendChild(t.layerElement),Re.appendChild(Ce);var Te=createNS("use");Te.setAttribute("href","#"+n),Ee.appendChild(Te),t.data.hd=!1,t.show()}e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,n=0,Ee=t.length;n<Ee;)t[n]&&t[n].data.ind===e&&this.setElementAsMask(this.elem,t[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(e,t,n,Ee){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var Re=createNS("feGaussianBlur");Re.setAttribute("result",Ee),e.appendChild(Re),this.feGaussianBlur=Re}SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=.3,n=this.filterManager.effectElements[0].p.v*t,Ee=this.filterManager.effectElements[1].p.v,Re=Ee==3?0:n,Ce=Ee==2?0:n;this.feGaussianBlur.setAttribute("stdDeviation",Re+" "+Ce);var Te=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",Te)}};function TransformEffect(){}TransformEffect.prototype.init=function(e){this.effectsManager=e,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(e){if(this._opMdf=!1,this._mdf=!1,e||this.effectsManager._mdf){var t=this.effectsManager.effectElements,n=t[0].p.v,Ee=t[1].p.v,Re=t[2].p.v===1,Ce=t[3].p.v,Te=Re?Ce:t[4].p.v,Me=t[5].p.v,De=t[6].p.v,Oe=t[7].p.v;this.matrix.reset(),this.matrix.translate(-n[0],-n[1],n[2]),this.matrix.scale(Te*.01,Ce*.01,1),this.matrix.rotate(-Oe*degToRads),this.matrix.skewFromAxis(-Me*degToRads,(De+90)*degToRads),this.matrix.translate(Ee[0],Ee[1],0),this._mdf=!0,this.opacity!==t[8].p.v&&(this.opacity=t[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(e,t){this.init(t)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(e){this.init(e)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,Ee=Array(t);n<t;n++)Ee[n]=e[n];return Ee}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _iterableToArrayLimit(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var Ee,Re,Ce,Te,Me=[],De=!0,Oe=!1;try{if(Ce=(n=n.call(e)).next,t!==0)for(;!(De=(Ee=Ce.call(n)).done)&&(Me.push(Ee.value),Me.length!==t);De=!0);}catch(Be){Oe=!0,Re=Be}finally{try{if(!De&&n.return!=null&&(Te=n.return(),Object(Te)!==Te))return}finally{if(Oe)throw Re}}return Me}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols(e);t&&(Ee=Ee.filter(function(Re){return Object.getOwnPropertyDescriptor(e,Re).enumerable})),n.push.apply(n,Ee)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(Ee){_defineProperty(e,Ee,n[Ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(Ee){Object.defineProperty(e,Ee,Object.getOwnPropertyDescriptor(n,Ee))})}return e}function _objectWithoutProperties(e,t){if(e==null)return{};var n,Ee,Re=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var Ce=Object.getOwnPropertySymbols(e);for(Ee=0;Ee<Ce.length;Ee++)n=Ce[Ee],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(Re[n]=e[n])}return Re}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var n={};for(var Ee in e)if({}.hasOwnProperty.call(e,Ee)){if(t.includes(Ee))continue;n[Ee]=e[Ee]}return n}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toPrimitive(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var Ee=n.call(e,t);if(typeof Ee!="object")return Ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t=="symbol"?t:t+""}function _unsupportedIterableToArray(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function e(t,n){var Ee=t.animationData,Re=t.loop,Ce=t.autoplay,Te=t.initialSegment,Me=t.onComplete,De=t.onLoopComplete,Oe=t.onEnterFrame,Be=t.onSegmentStart,ze=t.onConfigReady,$e=t.onDataReady,He=t.onDataFailed,Ue=t.onLoadedImages,Ve=t.onDOMLoaded,We=t.onDestroy;t.lottieRef,t.renderer,t.name,t.assetsPath,t.rendererSettings;var qe=_objectWithoutProperties(t,_excluded$1),Ge=reactExports.useState(!1),Ye=_slicedToArray(Ge,2),Ke=Ye[0],Xe=Ye[1],Ze=reactExports.useRef(),er=reactExports.useRef(null),St=function(){var nr;(nr=Ze.current)===null||nr===void 0||nr.play()},ar=function(){var nr;(nr=Ze.current)===null||nr===void 0||nr.stop()},hr=function(){var nr;(nr=Ze.current)===null||nr===void 0||nr.pause()},ur=function(nr){var gr;(gr=Ze.current)===null||gr===void 0||gr.setSpeed(nr)},dr=function(nr,gr){var Er;(Er=Ze.current)===null||Er===void 0||Er.goToAndPlay(nr,gr)},vr=function(nr,gr){var Er;(Er=Ze.current)===null||Er===void 0||Er.goToAndStop(nr,gr)},yr=function(nr){var gr;(gr=Ze.current)===null||gr===void 0||gr.setDirection(nr)},br=function(nr,gr){var Er;(Er=Ze.current)===null||Er===void 0||Er.playSegments(nr,gr)},lr=function(nr){var gr;(gr=Ze.current)===null||gr===void 0||gr.setSubframe(nr)},cr=function(nr){var gr;return(gr=Ze.current)===null||gr===void 0?void 0:gr.getDuration(nr)},rr=function(){var nr;(nr=Ze.current)===null||nr===void 0||nr.destroy(),Ze.current=void 0},pr=function(){var nr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},gr;if(er.current){(gr=Ze.current)===null||gr===void 0||gr.destroy();var Er=_objectSpread2(_objectSpread2(_objectSpread2({},t),nr),{},{container:er.current});return Ze.current=lottie.loadAnimation(Er),Xe(!!Ze.current),function(){var Cr;(Cr=Ze.current)===null||Cr===void 0||Cr.destroy(),Ze.current=void 0}}};reactExports.useEffect(function(){var ir=pr();return function(){return ir==null?void 0:ir()}},[Ee,Re]),reactExports.useEffect(function(){Ze.current&&(Ze.current.autoplay=!!Ce)},[Ce]),reactExports.useEffect(function(){if(Ze.current){if(!Te){Ze.current.resetSegments(!0);return}!Array.isArray(Te)||!Te.length||((Ze.current.currentRawFrame<Te[0]||Ze.current.currentRawFrame>Te[1])&&(Ze.current.currentRawFrame=Te[0]),Ze.current.setSegment(Te[0],Te[1]))}},[Te]),reactExports.useEffect(function(){var ir=[{name:"complete",handler:Me},{name:"loopComplete",handler:De},{name:"enterFrame",handler:Oe},{name:"segmentStart",handler:Be},{name:"config_ready",handler:ze},{name:"data_ready",handler:$e},{name:"data_failed",handler:He},{name:"loaded_images",handler:Ue},{name:"DOMLoaded",handler:Ve},{name:"destroy",handler:We}],nr=ir.filter(function(Er){return Er.handler!=null});if(nr.length){var gr=nr.map(function(Er){var Cr;return(Cr=Ze.current)===null||Cr===void 0||Cr.addEventListener(Er.name,Er.handler),function(){var Nr;(Nr=Ze.current)===null||Nr===void 0||Nr.removeEventListener(Er.name,Er.handler)}});return function(){gr.forEach(function(Er){return Er()})}}},[Me,De,Oe,Be,ze,$e,He,Ue,Ve,We]);var mr=React4.createElement("div",_objectSpread2({style:n,ref:er},qe));return{View:mr,play:St,stop:ar,pause:hr,setSpeed:ur,goToAndStop:vr,goToAndPlay:dr,setDirection:yr,playSegments:br,setSubframe:lr,getDuration:cr,destroy:rr,animationContainerRef:er,animationLoaded:Ke,animationItem:Ze.current}};function getContainerVisibility(e){var t=e.getBoundingClientRect(),n=t.top,Ee=t.height,Re=window.innerHeight-n,Ce=window.innerHeight+Ee;return Re/Ce}function getContainerCursorPosition(e,t,n){var Ee=e.getBoundingClientRect(),Re=Ee.top,Ce=Ee.left,Te=Ee.width,Me=Ee.height,De=(t-Ce)/Te,Oe=(n-Re)/Me;return{x:De,y:Oe}}var useInitInteractivity=function e(t){var n=t.wrapperRef,Ee=t.animationItem,Re=t.mode,Ce=t.actions;reactExports.useEffect(function(){var Te=n.current;if(!(!Te||!Ee||!Ce.length)){Ee.stop();var Me=function(){var Be=null,ze=function(){var He=getContainerVisibility(Te),Ue=Ce.find(function(We){var qe=We.visibility;return qe&&He>=qe[0]&&He<=qe[1]});if(Ue){if(Ue.type==="seek"&&Ue.visibility&&Ue.frames.length===2){var Ve=Ue.frames[0]+Math.ceil((He-Ue.visibility[0])/(Ue.visibility[1]-Ue.visibility[0])*Ue.frames[1]);//! goToAndStop must be relative to the start of the current segment
Ee.goToAndStop(Ve-Ee.firstFrame-1,!0)}Ue.type==="loop"&&(Be===null||Be!==Ue.frames||Ee.isPaused)&&(Ee.playSegments(Ue.frames,!0),Be=Ue.frames),Ue.type==="play"&&Ee.isPaused&&(Ee.resetSegments(!0),Ee.play()),Ue.type==="stop"&&Ee.goToAndStop(Ue.frames[0]-Ee.firstFrame-1,!0)}};return document.addEventListener("scroll",ze),function(){document.removeEventListener("scroll",ze)}},De=function(){var Be=function(Ue,Ve){var We=Ue,qe=Ve;if(We!==-1&&qe!==-1){var Ge=getContainerCursorPosition(Te,We,qe);We=Ge.x,qe=Ge.y}var Ye=Ce.find(function(Ze){var er=Ze.position;return er&&Array.isArray(er.x)&&Array.isArray(er.y)?We>=er.x[0]&&We<=er.x[1]&&qe>=er.y[0]&&qe<=er.y[1]:er&&!Number.isNaN(er.x)&&!Number.isNaN(er.y)?We===er.x&&qe===er.y:!1});if(Ye){if(Ye.type==="seek"&&Ye.position&&Array.isArray(Ye.position.x)&&Array.isArray(Ye.position.y)&&Ye.frames.length===2){var Ke=(We-Ye.position.x[0])/(Ye.position.x[1]-Ye.position.x[0]),Xe=(qe-Ye.position.y[0])/(Ye.position.y[1]-Ye.position.y[0]);Ee.playSegments(Ye.frames,!0),Ee.goToAndStop(Math.ceil((Ke+Xe)/2*(Ye.frames[1]-Ye.frames[0])),!0)}Ye.type==="loop"&&Ee.playSegments(Ye.frames,!0),Ye.type==="play"&&(Ee.isPaused&&Ee.resetSegments(!1),Ee.playSegments(Ye.frames)),Ye.type==="stop"&&Ee.goToAndStop(Ye.frames[0],!0)}},ze=function(Ue){Be(Ue.clientX,Ue.clientY)},$e=function(){Be(-1,-1)};return Te.addEventListener("mousemove",ze),Te.addEventListener("mouseout",$e),function(){Te.removeEventListener("mousemove",ze),Te.removeEventListener("mouseout",$e)}};switch(Re){case"scroll":return Me();case"cursor":return De()}}},[Re,Ee])},useLottieInteractivity=function e(t){var n=t.actions,Ee=t.mode,Re=t.lottieObj,Ce=Re.animationItem,Te=Re.View,Me=Re.animationContainerRef;return useInitInteractivity({actions:n,animationItem:Ce,mode:Ee,wrapperRef:Me}),Te},_excluded=["style","interactivity"],Lottie=function e(t){var n,Ee,Re,Ce=t.style,Te=t.interactivity,Me=_objectWithoutProperties(t,_excluded),De=useLottie(Me,Ce),Oe=De.View,Be=De.play,ze=De.stop,$e=De.pause,He=De.setSpeed,Ue=De.goToAndStop,Ve=De.goToAndPlay,We=De.setDirection,qe=De.playSegments,Ge=De.setSubframe,Ye=De.getDuration,Ke=De.destroy,Xe=De.animationContainerRef,Ze=De.animationLoaded,er=De.animationItem;return reactExports.useEffect(function(){t.lottieRef&&(t.lottieRef.current={play:Be,stop:ze,pause:$e,setSpeed:He,goToAndPlay:Ve,goToAndStop:Ue,setDirection:We,playSegments:qe,setSubframe:Ge,getDuration:Ye,destroy:Ke,animationContainerRef:Xe,animationLoaded:Ze,animationItem:er})},[(n=t.lottieRef)===null||n===void 0?void 0:n.current]),useLottieInteractivity({lottieObj:{View:Oe,play:Be,stop:ze,pause:$e,setSpeed:He,goToAndStop:Ue,goToAndPlay:Ve,setDirection:We,playSegments:qe,setSubframe:Ge,getDuration:Ye,destroy:Ke,animationContainerRef:Xe,animationLoaded:Ze,animationItem:er},actions:(Ee=Te==null?void 0:Te.actions)!==null&&Ee!==void 0?Ee:[],mode:(Re=Te==null?void 0:Te.mode)!==null&&Re!==void 0?Re:"scroll"})};function EmployeeDashboard(){var Ee,Re,Ce,Te;const{user:e}=useAuth(),{text:t,animationData:n}=useGreeting();return jsxRuntimeExports.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-bold text-text-primary flex items-center gap-3",children:[t,", ",e==null?void 0:e.name.split(" ")[0],"!"," ",jsxRuntimeExports.jsx("div",{className:"w-8 h-8",children:jsxRuntimeExports.jsx(Lottie,{animationData:n,loop:!0})})]}),jsxRuntimeExports.jsxs("p",{className:"text-text-secondary mt-1",children:["Here's your dashboard for today,"," ",new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),jsxRuntimeExports.jsx(AppreciationWidget,{})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mb-8",children:[(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("attendance")&&((Ee=e.accessibleModules)==null?void 0:Ee.includes("attendance")))&&jsxRuntimeExports.jsx(AttendanceWidget,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave")&&((Re=e.accessibleModules)==null?void 0:Re.includes("leave")))&&jsxRuntimeExports.jsx(LeaveWidget,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave")&&((Ce=e.accessibleModules)==null?void 0:Ce.includes("leave")))&&jsxRuntimeExports.jsx(UpcomingHolidayWidget,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("payroll")&&((Te=e.accessibleModules)==null?void 0:Te.includes("payroll")))&&jsxRuntimeExports.jsx(PayrollSummaryWidget,{}),jsxRuntimeExports.jsx(FeedbackWidget,{})]})]})}function PMDashboard(){var Ze,er,St,ar,hr,ur,dr,vr;const{user:e}=useAuth(),{text:t,animationData:n}=useGreeting(),[Ee,Re]=reactExports.useState([]),[Ce,Te]=reactExports.useState(!0),[Me,De]=reactExports.useState(0),[Oe,Be]=reactExports.useState(0),[ze,$e]=reactExports.useState([]),[He,Ue]=reactExports.useState(0);reactExports.useEffect(()=>{Ve(),We(),qe();const yr=setInterval(()=>{Ve(),We(),qe()},3e4);return()=>clearInterval(yr)},[]);const Ve=async()=>{try{const yr=await apiService.getTeamStatus();Re(yr.teamStatus||[])}catch{}finally{Te(!1)}},We=async()=>{var yr,br;try{const[lr,cr]=await Promise.all([apiService.getPendingTimesheetApprovals().catch(()=>({timesheets:[]})),apiService.getPendingLeaveApprovals().catch(()=>({leaveRequests:[]}))]);De(((yr=lr.timesheets)==null?void 0:yr.length)||0),Be(((br=cr.leaveRequests)==null?void 0:br.length)||0)}catch{}},qe=async()=>{try{const yr=await apiService.getProjects();$e(yr.projects||[])}catch{}},Ge=()=>{const yr=Ee.filter(cr=>cr.status==="clocked-in").length,br=Ee.filter(cr=>cr.status==="on-break").length,lr=Ee.filter(cr=>cr.status==="clocked-out").length;return{clockedIn:yr,onBreak:br,clockedOut:lr,total:Ee.length}},Ye=yr=>{switch(yr){case"clocked-in":return jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-green-700 bg-green-100 px-2 py-1 rounded-full",children:[jsxRuntimeExports.jsx(Clock,{size:12}),"Working"]});case"on-break":return jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-yellow-700 bg-yellow-100 px-2 py-1 rounded-full",children:[jsxRuntimeExports.jsx(Coffee,{size:12}),"Break"]});default:return jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:"Off"})}},Ke=Ge(),Xe=Me+Oe;return jsxRuntimeExports.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-bold text-text-primary flex items-center gap-3",children:[t,", ",e==null?void 0:e.name.split(" ")[0],"!"," ",jsxRuntimeExports.jsx("div",{className:"w-8 h-8",children:jsxRuntimeExports.jsx(Lottie,{animationData:n,loop:!0})})]}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Project status and team overview for today"})]}),jsxRuntimeExports.jsx(AppreciationWidget,{})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("attendance")&&((Ze=e.accessibleModules)==null?void 0:Ze.includes("attendance")))&&jsxRuntimeExports.jsx(AttendanceWidget,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave")&&((er=e.accessibleModules)==null?void 0:er.includes("leave")))&&jsxRuntimeExports.jsx(LeaveWidget,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave")&&((St=e.accessibleModules)==null?void 0:St.includes("leave")))&&jsxRuntimeExports.jsx(UpcomingHolidayWidget,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("attendance")&&((ar=e.accessibleModules)==null?void 0:ar.includes("attendance")))&&jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-xl shadow-sm border border-border md:col-span-2 lg:col-span-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-brand-primary/10 rounded-lg text-brand-primary",children:jsxRuntimeExports.jsx(Users,{size:24})}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Live Team Status"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 text-xs sm:text-sm hidden xl:flex",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-bg-main rounded-full border border-border",children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-status-success"}),jsxRuntimeExports.jsx("span",{className:"text-text-primary font-bold",children:Ke.clockedIn})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-bg-main rounded-full border border-border",children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-status-warning"}),jsxRuntimeExports.jsx("span",{className:"text-text-primary font-bold",children:Ke.onBreak})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-bg-main rounded-full border border-border",children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),jsxRuntimeExports.jsx("span",{className:"text-text-primary font-bold",children:Ke.clockedOut})]})]}),Ee.length>3&&jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ue(yr=>Math.max(0,yr-1)),disabled:He===0,className:"p-1 rounded-full hover:bg-bg-hover disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:jsxRuntimeExports.jsx(ChevronLeft,{size:20,className:"text-text-secondary"})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ue(yr=>Math.min(Math.ceil(Ee.length/3)-1,yr+1)),disabled:He>=Math.ceil(Ee.length/3)-1,className:"p-1 rounded-full hover:bg-bg-hover disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:jsxRuntimeExports.jsx(ChevronRight,{size:20,className:"text-text-secondary"})})]})]})]}),Ce?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 min-h-[90px]",children:[1,2,3].map(yr=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-main p-3 rounded-lg border border-border h-[90px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-8 h-8 rounded-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"w-16 h-5 rounded-full"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-24 h-3"}),jsxRuntimeExports.jsx(Skeleton,{className:"w-16 h-3"})]})]},yr))}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 min-h-[90px]",children:[Ee.slice(He*3,(He+1)*3).map(yr=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-main p-3 rounded-lg border border-border hover:border-brand-primary/30 transition-all group animate-in fade-in duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-secondary/10 text-brand-secondary flex items-center justify-center font-bold text-xs",children:yr.name.split(" ").map(br=>br[0]).join("").substring(0,2)}),Ye(yr.status)]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-text-primary truncate text-xs",children:yr.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary truncate",children:yr.role||"Member"})]})]},yr.employeeId)),Ee.length===0&&jsxRuntimeExports.jsx("div",{className:"col-span-full text-center py-8 text-xs text-text-secondary border border-border border-dashed rounded-lg bg-bg-main/50",children:"No team members found."})]})]}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("payroll")&&((hr=e.accessibleModules)==null?void 0:hr.includes("payroll")))&&jsxRuntimeExports.jsx(PayrollSummaryWidget,{}),jsxRuntimeExports.jsx(FeedbackWidget,{})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-xl shadow-sm border border-border h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-yellow-100 text-yellow-700 rounded-lg",children:jsxRuntimeExports.jsx(SquareCheckBig,{size:20})}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Pending Approvals"}),Xe>0&&jsxRuntimeExports.jsxs("span",{className:"ml-auto px-2.5 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-bold",children:[Xe," New"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[Me>0&&(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("attendance")&&((ur=e.accessibleModules)!=null&&ur.includes("attendance")))?jsxRuntimeExports.jsxs("div",{onClick:()=>window.location.href="/attendance",className:"p-4 bg-bg-main hover:bg-bg-hover border border-border rounded-xl flex justify-between items-center cursor-pointer transition-colors group",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:jsxRuntimeExports.jsx(Clock,{size:18})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-text-primary group-hover:text-brand-primary transition-colors",children:"Timesheets"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-text-secondary",children:[Me," submission",Me!==1?"s":""]})]})]}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",className:"text-xs",children:"Review"})]}):null,Oe>0&&(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave")&&((dr=e.accessibleModules)!=null&&dr.includes("leave")))?jsxRuntimeExports.jsxs("div",{onClick:()=>window.location.href="/leave",className:"p-4 bg-bg-main hover:bg-bg-hover border border-border rounded-xl flex justify-between items-center cursor-pointer transition-colors group",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center",children:jsxRuntimeExports.jsx(Coffee,{size:18})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-text-primary group-hover:text-brand-primary transition-colors",children:"Leave Requests"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-text-secondary",children:[Oe," request",Oe!==1?"s":""]})]})]}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",className:"text-xs",children:"Review"})]}):null,Xe===0&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-green-50 text-green-500 rounded-full flex items-center justify-center mb-3",children:jsxRuntimeExports.jsx(SquareCheckBig,{size:24})}),jsxRuntimeExports.jsx("p",{className:"text-text-primary font-medium",children:"All caught up!"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary",children:"No pending approvals at the moment."})]})]})]}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("projects")&&((vr=e.accessibleModules)==null?void 0:vr.includes("projects")))&&jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-xl shadow-sm border border-border h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-100 text-blue-700 rounded-lg",children:jsxRuntimeExports.jsx(Briefcase,{size:20})}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Active Projects"})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>window.location.href="/projects",className:"text-brand-primary hover:bg-brand-primary/10",children:"View All"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:Ce?[1,2].map(yr=>jsxRuntimeExports.jsxs("div",{className:"p-4 bg-bg-main rounded-xl border border-border h-[100px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-32 h-4"}),jsxRuntimeExports.jsx(Skeleton,{className:"w-20 h-3"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"w-16 h-5 rounded-full"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"w-full h-8"})]},yr)):ze.filter(yr=>yr.status==="Active").length>0?ze.filter(yr=>yr.status==="Active").slice(0,3).map(yr=>jsxRuntimeExports.jsxs("div",{className:"p-4 bg-bg-main rounded-xl border border-border hover:border-brand-primary/30 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-text-primary text-sm",children:yr.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mt-0.5",children:yr.client})]}),jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 bg-status-success/10 text-status-success text-[10px] font-bold uppercase rounded-full tracking-wider",children:yr.status})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-brand-primary w-2/3 rounded-full"})}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-text-primary",children:"66%"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-3 text-xs text-text-muted",children:[jsxRuntimeExports.jsxs("span",{children:["Due ",new Date(yr.endDate).toLocaleDateString()]}),jsxRuntimeExports.jsx("span",{children:"Team: 4"})]})]},yr._id)):jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-text-secondary text-sm",children:"No active projects found."})})]})]})]})}function HRDashboard(){const{user:e}=useAuth(),{text:t,animationData:n}=useGreeting();return jsxRuntimeExports.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-bold text-text-primary flex items-center gap-3",children:[t,", ",e==null?void 0:e.name.split(" ")[0],"!"," ",jsxRuntimeExports.jsx("div",{className:"w-8 h-8",children:jsxRuntimeExports.jsx(Lottie,{animationData:n,loop:!0})})]}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"HR Operations Overview"})]}),jsxRuntimeExports.jsx(AppreciationWidget,{})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("attendance"))&&jsxRuntimeExports.jsx(AttendanceWidget,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave"))&&jsxRuntimeExports.jsx(LeaveWidget,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave"))&&jsxRuntimeExports.jsx(UpcomingHolidayWidget,{}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("payroll"))&&jsxRuntimeExports.jsx(PayrollSummaryWidget,{}),jsxRuntimeExports.jsx(FeedbackWidget,{})]})]})}function AccountantDashboard(){const{user:e}=useAuth(),{text:t,animationData:n}=useGreeting();return jsxRuntimeExports.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-bold text-text-primary flex items-center gap-3",children:[t,", ",e==null?void 0:e.name.split(" ")[0],"!"," ",jsxRuntimeExports.jsx("div",{className:"w-8 h-8",children:jsxRuntimeExports.jsx(Lottie,{animationData:n,loop:!0})})]}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Financial Overview & Payroll Status"})]}),jsxRuntimeExports.jsx(AppreciationWidget,{})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("leave"))&&jsxRuntimeExports.jsx(UpcomingHolidayWidget,{})}),(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("payroll"))&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(DollarSign,{className:"text-brand-primary",size:24}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Payroll Summary"})]}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-text-primary",children:"$142,500"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Total payout for June"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-status-warning animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-status-warning font-medium",children:"Processing"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(CreditCard,{className:"text-status-success",size:24}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Salary Status"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Disbursed"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-status-success",children:"85%"})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-bg-main rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-status-success h-2 rounded-full w-[85%]"})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary text-right",children:"Remaining: 22 employees"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(ChartPie,{className:"text-status-info",size:24}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Expenses"})]}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-text-primary",children:"$12,450"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Reimbursements pending"}),jsxRuntimeExports.jsx("button",{className:"text-sm text-brand-primary font-medium hover:underline",children:"View Details"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"text-brand-secondary",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Billing Overview"})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-bg-main rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:"Unbilled Hours (T&M)"}),jsxRuntimeExports.jsx("span",{className:"text-brand-primary font-bold",children:"450 hrs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"~ $22,500 potential revenue"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-bg-main rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:"Retainer Utilization"}),jsxRuntimeExports.jsx("span",{className:"text-status-success font-bold",children:"92%"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"Client: Acme Corp"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"text-status-success",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Profitability"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:"Fixed Bid Projects"}),jsxRuntimeExports.jsx("span",{className:"text-status-success text-sm",children:"+15% Margin"})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-bg-main rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-status-success w-[65%] rounded-full"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:"Resource Utilization"}),jsxRuntimeExports.jsx("span",{className:"text-brand-primary text-sm",children:"88%"})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-bg-main rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-brand-primary w-[88%] rounded-full"})})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx(Download,{className:"text-text-secondary",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Quick Exports"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-border rounded-lg hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx(FileText,{size:16,className:"text-status-success"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Payroll Report (CSV)"})]}),jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-border rounded-lg hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx(FileText,{size:16,className:"text-status-info"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Tax Deductions (Excel)"})]}),jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-border rounded-lg hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx(FileText,{size:16,className:"text-status-warning"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Expense Sheet (PDF)"})]})]})]})]})}function ContractorDashboard(){const{user:e}=useAuth(),{text:t,animationData:n}=useGreeting();return jsxRuntimeExports.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-bold text-text-primary flex items-center gap-3",children:[t,", ",e==null?void 0:e.name.split(" ")[0],"!"," ",jsxRuntimeExports.jsx("div",{className:"w-8 h-8",children:jsxRuntimeExports.jsx(Lottie,{animationData:n,loop:!0})})]}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Contractor Portal"})]}),jsxRuntimeExports.jsx(AppreciationWidget,{})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx(AttendanceWidget,{}),jsxRuntimeExports.jsx(LeaveWidget,{}),jsxRuntimeExports.jsx(UpcomingHolidayWidget,{}),jsxRuntimeExports.jsx(PayrollSummaryWidget,{}),jsxRuntimeExports.jsx(FeedbackWidget,{})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx(Briefcase,{className:"text-brand-primary",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Current Assignment"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-bg-main rounded-lg mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-text-primary text-lg mb-1",children:"Project Phoenix"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary",children:"Frontend Development  React/TypeScript"}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs text-text-muted",children:[jsxRuntimeExports.jsx(Clock,{size:14}),jsxRuntimeExports.jsx("span",{children:"Contract ends: Dec 31, 2025"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("span",{className:"px-3 py-1 bg-brand-primary/10 text-brand-primary rounded-full text-xs font-medium",children:"Active"}),jsxRuntimeExports.jsx("span",{className:"px-3 py-1 bg-bg-main text-text-secondary rounded-full text-xs font-medium",children:"Remote"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx(Clock,{className:"text-status-info",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Timesheet Entry"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-main rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-text-primary",children:"Today's Log"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"6h 30m recorded"})]}),jsxRuntimeExports.jsx("button",{className:"text-xs bg-brand-primary text-white px-3 py-1 rounded-lg",children:"Add Time"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-main rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-text-primary",children:"Submission Status"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-status-success flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12})," Last week approved"]})]}),jsxRuntimeExports.jsx("button",{className:"text-xs text-text-secondary hover:underline",children:"View History"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border flex items-center gap-4 cursor-pointer hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-status-success/10 rounded-lg text-status-success",children:jsxRuntimeExports.jsx(FileText,{size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-text-primary",children:"Invoices"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"Upload or download"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border flex items-center gap-4 cursor-pointer hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-brand-secondary/10 rounded-lg text-brand-secondary",children:jsxRuntimeExports.jsx(FileText,{size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-text-primary",children:"Payslips"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"View generated slips"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-text-muted/10 rounded-lg text-text-muted",children:jsxRuntimeExports.jsx(Monitor,{size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-text-primary",children:"Asset Status"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"MacBook Pro (Assigned)"})]})]})]})]})}function InternDashboard(){const{user:e}=useAuth(),{text:t,animationData:n}=useGreeting();return jsxRuntimeExports.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-bold text-text-primary flex items-center gap-3",children:[t,", ",e==null?void 0:e.name.split(" ")[0],"!"," ",jsxRuntimeExports.jsx("div",{className:"w-8 h-8",children:jsxRuntimeExports.jsx(Lottie,{animationData:n,loop:!0})})]}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Learning & Development Track"})]}),jsxRuntimeExports.jsx(AppreciationWidget,{})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx(AttendanceWidget,{}),jsxRuntimeExports.jsx(LeaveWidget,{}),jsxRuntimeExports.jsx(UpcomingHolidayWidget,{}),jsxRuntimeExports.jsx(PayrollSummaryWidget,{}),jsxRuntimeExports.jsx(FeedbackWidget,{})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx(SquareCheckBig,{className:"text-brand-primary",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Onboarding Checklist"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"text-status-success",children:jsxRuntimeExports.jsx(SquareCheckBig,{size:18})}),jsxRuntimeExports.jsx("span",{className:"text-text-primary line-through text-text-muted",children:"Setup Development Environment"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"text-status-success",children:jsxRuntimeExports.jsx(SquareCheckBig,{size:18})}),jsxRuntimeExports.jsx("span",{className:"text-text-primary line-through text-text-muted",children:"Company Policy Review"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-brand-primary rounded-sm"}),jsxRuntimeExports.jsx("span",{className:"text-text-primary",children:"Complete React Fundamentals"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-text-muted rounded-sm"}),jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Submit First Pull Request"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx(BookOpen,{className:"text-status-info",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Training Modules"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:"Frontend Basics"}),jsxRuntimeExports.jsx("span",{className:"text-status-success text-sm",children:"Completed"})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-bg-main rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-status-success w-full rounded-full"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:"Advanced React"}),jsxRuntimeExports.jsx("span",{className:"text-brand-primary text-sm",children:"45%"})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-bg-main rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-brand-primary w-[45%] rounded-full"})})]}),jsxRuntimeExports.jsx("button",{className:"text-sm text-brand-primary font-medium hover:underline mt-2",children:"View All Modules"})]})]})]})]})}function AdminDashboard(){const{user:e}=useAuth(),t=useNavigate(),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState({users:0,roles:0,assets:0,departments:0}),[Te,Me]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{try{const[ze,$e,He,Ue]=await Promise.all([apiService.getAllEmployees().catch(()=>[]),apiService.getRoles().catch(()=>[]),apiService.getAssetStats().catch(()=>({totalAssets:0})),apiService.getAuditLogs({limit:5}).catch(()=>({logs:[]}))]),Ve=Array.isArray(ze)?ze:ze.employees||[],We=Ve.length,qe=new Set(Ve.map(Ye=>Ye.department).filter(Ye=>Ye)).size;Ce({users:We,roles:$e.length||0,assets:He.totalAssets||0,departments:qe});const Ge=(Ue.logs||[]).map(Ye=>{var ar;const Ke=new Date(Ye.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Xe=new Date,Ze=new Date(Ye.createdAt),er=Math.floor((Xe.getTime()-Ze.getTime())/1e3);let St=Ke;return er<60?St="Just now":er<3600?St=`${Math.floor(er/60)} mins ago`:er<86400?St=`${Math.floor(er/3600)} hours ago`:St=`${Math.floor(er/86400)} days ago`,{id:Ye._id,user:Ye.performedBy?Ye.performedBy.name:"System",action:De(Ye.action),target:`${Ye.entityType}${(ar=Ye.metadata)!=null&&ar.name?`: ${Ye.metadata.name}`:""}`,time:St,isAlert:Ye.action==="delete"||Ye.action==="reject"}});Me(Ge)}catch(ze){console.error("Failed to fetch admin stats:",ze)}finally{Ee(!1)}})()},[]);const De=Be=>Be.charAt(0).toUpperCase()+Be.slice(1).replace(/_/g," "),Oe=[{label:"Total Employees",value:Re.users.toString(),change:"Active employees",icon:Users,color:"text-blue-600",bg:"bg-blue-100"},{label:"Active Roles",value:Re.roles.toString(),change:"Configured roles",icon:Shield,color:"text-purple-600",bg:"bg-purple-100"},{label:"Total Assets",value:Re.assets.toString(),change:"Tracked inventory",icon:Box,color:"text-amber-600",bg:"bg-amber-100"},{label:"Departments",value:Re.departments.toString(),change:"Active departments",icon:Building2,color:"text-green-600",bg:"bg-green-100"}];return jsxRuntimeExports.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Admin Console"}),jsxRuntimeExports.jsxs("p",{className:"text-text-secondary mt-1",children:["Welcome back, ",e==null?void 0:e.name,".",(e==null?void 0:e.tenantId)&&typeof e.tenantId=="object"&&jsxRuntimeExports.jsxs("span",{className:"ml-1 text-brand-primary font-medium",children:["@ ",e.tenantId.companyName]})]})]}),jsxRuntimeExports.jsx(AppreciationWidget,{})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Oe.map((Be,ze)=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-6 rounded-xl border border-border shadow-sm hover:shadow-md transition-shadow",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm font-medium",children:Be.label}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:n?jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-16"}):jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:Be.value})})]}),jsxRuntimeExports.jsx("div",{className:`p-3 rounded-lg ${Be.bg.replace("bg-","bg-")}/10 ${Be.color}`,children:jsxRuntimeExports.jsx(Be.icon,{size:20})})]}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:n?jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"}):jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary font-medium",children:Be.change})})]},ze))}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:jsxRuntimeExports.jsx("div",{className:"lg:col-span-3 space-y-8",children:jsxRuntimeExports.jsxs("section",{className:"bg-bg-card rounded-xl border border-border shadow-sm overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-border flex justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Recent System Activity"}),jsxRuntimeExports.jsx("button",{onClick:()=>t("/audit"),className:"text-sm text-brand-primary hover:underline",children:"View All Logs"})]}),jsxRuntimeExports.jsx("div",{className:"divide-y divide-border",children:n?[...Array(5)].map((Be,ze)=>jsxRuntimeExports.jsxs("div",{className:"p-4 flex items-start gap-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"mt-1 w-2 h-2 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-3/4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-1/2"})]})]},ze)):Te.length>0?Te.map(Be=>jsxRuntimeExports.jsxs("div",{className:"p-4 flex items-start gap-4 hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx("div",{className:`mt-1 w-2 h-2 rounded-full ${Be.isAlert?"bg-status-error":"bg-brand-primary"}`}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-primary",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:Be.user})," ",Be.action]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:["Target: ",Be.target,"  ",Be.time]})]})]},Be.id)):jsxRuntimeExports.jsx("div",{className:"p-8 text-center text-text-secondary",children:"No recent activity found"})})]})})})]})}function Dashboard(){const{user:e}=useAuth();if(!e)return null;switch(e.role){case"Admin":return jsxRuntimeExports.jsx(AdminDashboard,{});case"HR":return jsxRuntimeExports.jsx(HRDashboard,{});case"Project Manager":return jsxRuntimeExports.jsx(PMDashboard,{});case"Accountant":return jsxRuntimeExports.jsx(AccountantDashboard,{});case"Consultant":return jsxRuntimeExports.jsx(ContractorDashboard,{});case"Intern":return jsxRuntimeExports.jsx(InternDashboard,{});case"Employee":default:return jsxRuntimeExports.jsx(EmployeeDashboard,{})}}const ChangePasswordModal=({isOpen:e,onClose:t,onSubmit:n})=>{const[Ee,Re]=reactExports.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Ce,Te]=reactExports.useState(!1),[Me,De]=reactExports.useState(""),Oe=ze=>{Re({...Ee,[ze.target.name]:ze.target.value}),De("")},Be=async ze=>{if(ze.preventDefault(),De(""),Ee.newPassword!==Ee.confirmPassword){De("New passwords do not match");return}if(Ee.newPassword.length<6){De("Password must be at least 6 characters long");return}Te(!0);try{await n({currentPassword:Ee.currentPassword,newPassword:Ee.newPassword}),t()}catch($e){De($e.message||"Failed to change password")}finally{Te(!1)}};return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:t,title:"Change Password",maxWidth:"max-w-md",children:jsxRuntimeExports.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[Me&&jsxRuntimeExports.jsx("div",{className:"bg-status-error/10 text-status-error p-3 rounded-lg text-sm",children:Me}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Current Password"}),jsxRuntimeExports.jsx(Input,{type:"password",name:"currentPassword",value:Ee.currentPassword,onChange:Oe,required:!0,leftIcon:jsxRuntimeExports.jsx(Lock,{size:16}),placeholder:"Enter current password"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"New Password"}),jsxRuntimeExports.jsx(Input,{type:"password",name:"newPassword",value:Ee.newPassword,onChange:Oe,required:!0,leftIcon:jsxRuntimeExports.jsx(Lock,{size:16}),placeholder:"Enter new password"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Confirm New Password"}),jsxRuntimeExports.jsx(Input,{type:"password",name:"confirmPassword",value:Ee.confirmPassword,onChange:Oe,required:!0,leftIcon:jsxRuntimeExports.jsx(Lock,{size:16}),placeholder:"Confirm new password"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-text-secondary bg-bg-main border border-border rounded-lg hover:bg-bg-hover transition-colors",disabled:Ce,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ce,className:"px-4 py-2 text-sm font-medium text-white bg-brand-primary rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 transition-colors",children:Ce?"Changing...":"Change Password"})]})]})})},ALL_TABS=["Basic Info","Work Info","Personal","Contact","Identity","Bank Details","Documents","Additional"];function Profile(){var gr,Er,Cr,Nr,Mr,Fr,$r,Wr,Zr,nn,an,Yr;const{user:e,refreshUser:t}=useAuth(),n=ALL_TABS.filter(Rr=>{var Xr;return!(Rr==="Documents"&&!((Xr=e==null?void 0:e.accessibleModules)!=null&&Xr.includes("documents")))}),[Ee,Re]=reactExports.useState(n[0]),[Ce,Te]=reactExports.useState(!1),[Me,De]=reactExports.useState(!0),[Oe,Be]=reactExports.useState(!1),[ze,$e]=reactExports.useState(null),[He,Ue]=reactExports.useState(null),[Ve]=reactExports.useState([]),[We,qe]=reactExports.useState({employeeId:(e==null?void 0:e.id)||"",firstName:((gr=e==null?void 0:e.name)==null?void 0:gr.split(" ")[0])||"",lastName:((Er=e==null?void 0:e.name)==null?void 0:Er.split(" ").slice(1).join(" "))||"",nickName:"",email:(e==null?void 0:e.email)||"",department:(e==null?void 0:e.department)||"",location:"",designation:(e==null?void 0:e.designation)||"",role:(e==null?void 0:e.role)||"",employmentType:"",employeeStatus:"Active",sourceOfHire:"",dateOfJoining:"",totalExperience:"",reportingManager:"",reportingManagerName:"",dateOfBirth:"",gender:"",maritalStatus:"",aboutMe:"",expertise:"",uan:"",pan:"",aadhaar:"",workPhone:"",extension:"",seatingLocation:"",presentAddress:"",permanentAddress:"",personalMobile:"",personalEmail:"",workExperience:[],education:[],bankDetails:{accountName:"",accountNumber:"",bankName:"",ifscCode:""}}),[Ge,Ye]=reactExports.useState(null),[Ke,Xe]=reactExports.useState(null),[Ze,er]=reactExports.useState(!1),[St,ar]=reactExports.useState(!1),[hr,ur]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{var Xr,mn;De(!0),$e(null);try{const En=await apiService.getCurrentUser(),rn=En.user.id||En.user._id;console.log("Profile: Current User ID:",rn);const _r=await apiService.getEmployees(),Lr=Array.isArray(_r)?_r:_r.employees||[];console.log("Profile: Total Employees:",Lr.length);const Or=Lr.find(tn=>{var sn,en,fn;return(((sn=tn.user)==null?void 0:sn._id)||tn.user)===rn||((fn=((en=tn.user)==null?void 0:en._id)||tn.user)==null?void 0:fn.toString())===(rn==null?void 0:rn.toString())});console.log("Profile: Found Employee Record:",Or?"Yes":"No"),Or&&(Ue(Or._id),qe({employeeId:Or.employeeId||"",firstName:Or.firstName||"",lastName:Or.lastName||"",nickName:Or.nickName||"",email:Or.email||"",department:Or.department||"",location:Or.location||"",designation:Or.designation||"",role:Or.role||"",employmentType:Or.employmentType||"",employeeStatus:Or.employeeStatus||"Active",sourceOfHire:Or.sourceOfHire||"",dateOfJoining:Or.dateOfJoining?new Date(Or.dateOfJoining).toISOString().split("T")[0]:"",totalExperience:Or.totalExperience||"",reportingManager:((Xr=Or.reportingManager)==null?void 0:Xr._id)||Or.reportingManager||"",reportingManagerName:(mn=Or.reportingManager)!=null&&mn.firstName?`${Or.reportingManager.firstName} ${Or.reportingManager.lastName||""}`:"",dateOfBirth:Or.dateOfBirth?new Date(Or.dateOfBirth).toISOString().split("T")[0]:"",gender:Or.gender||"",maritalStatus:Or.maritalStatus||"",aboutMe:Or.aboutMe||"",expertise:Or.expertise||"",uan:Or.uan||"",pan:Or.pan||"",aadhaar:Or.aadhaar||"",workPhone:Or.workPhone||"",extension:Or.extension||"",seatingLocation:Or.seatingLocation||"",presentAddress:Or.presentAddress||"",permanentAddress:Or.permanentAddress||"",personalMobile:Or.personalMobile||"",personalEmail:Or.personalEmail||"",workExperience:Or.workExperience||[],education:Or.education||[],bankDetails:Or.bankDetails||{accountName:"",accountNumber:"",bankName:"",ifscCode:""}}),Or.profilePicture&&Xe(Or.profilePicture.startsWith("http")?Or.profilePicture:`${ASSET_BASE_URL}/${Or.profilePicture}`))}catch(En){console.error("Failed to fetch employee data:",En),$e(En.message||"Failed to load profile data")}finally{De(!1)}})()},[]);const dr=Rr=>{qe({...We,[Rr.target.name]:Rr.target.value})},vr=Rr=>{var mn;const Xr=(mn=Rr.target.files)==null?void 0:mn[0];if(Xr){Ye(Xr);const En=new FileReader;En.onloadend=()=>{Xe(En.result)},En.readAsDataURL(Xr)}},yr=async()=>{if(!He){alert("Employee ID not found. Cannot update profile.");return}Be(!0);try{const Rr=new FormData;Object.keys(We).forEach(Xr=>{const mn=We[Xr];Array.isArray(mn)||Xr==="bankDetails"?Rr.append(Xr,JSON.stringify(mn)):mn!=null&&Rr.append(Xr,mn)}),Ge&&Rr.append("profilePicture",Ge),await apiService.updateEmployee(He,Rr),Te(!1),await t(),er(!0)}catch(Rr){console.error("Failed to update profile:",Rr),alert(Rr.message||"Failed to update profile. Please try again.")}finally{Be(!1)}},br=async Rr=>{try{await apiService.updateCurrentUser(Rr),ar(!0)}catch(Xr){throw Xr}},lr=()=>{Te(!1),Ye(null)},cr=(Rr,Xr,mn,En)=>{qe(rn=>{const _r=[...rn[Rr]];return _r[Xr]={..._r[Xr],[mn]:En},{...rn,[Rr]:_r}})},rr=(Rr,Xr)=>{qe(mn=>({...mn,[Rr]:[...mn[Rr],Xr]}))},pr=(Rr,Xr)=>{qe(mn=>({...mn,[Rr]:mn[Rr].filter((En,rn)=>rn!==Xr)}))},mr=Rr=>{qe(Xr=>({...Xr,bankDetails:{...Xr.bankDetails,[Rr.target.name]:Rr.target.value}}))},ir=(Rr,Xr,mn,En,rn="text")=>{const _r=En;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[_r&&jsxRuntimeExports.jsx(_r,{size:16}),Rr]}),Ce?rn==="date"?jsxRuntimeExports.jsx(DatePicker,{name:Xr,value:mn,onChange:dr}):jsxRuntimeExports.jsx(Input,{type:rn,name:Xr,value:mn,onChange:dr}):jsxRuntimeExports.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:mn||"N/A"})]})},nr=(Rr,Xr,mn)=>jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:Rr}),Ce?jsxRuntimeExports.jsx("textarea",{name:Xr,value:mn,onChange:dr,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20",rows:3}):jsxRuntimeExports.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg whitespace-pre-wrap",children:mn||"N/A"})]});return jsxRuntimeExports.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[Me&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-48"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-64"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-32 rounded-lg"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border lg:col-span-1 h-fit",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-32 h-32 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 w-full flex flex-col items-center",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-3/4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-1/2"})]}),jsxRuntimeExports.jsx("div",{className:"w-full space-y-3 mt-4",children:[1,2,3].map(Rr=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-20"})]},Rr))})]})}),jsxRuntimeExports.jsxs("div",{className:"lg:col-span-3 bg-bg-card rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsx("div",{className:"flex border-b border-border p-1",children:[1,2,3,4].map(Rr=>jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-24 mr-4 rounded-t-lg"},Rr))}),jsxRuntimeExports.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4,5,6].map(Rr=>jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-full rounded-lg"})]},Rr))})]})]})]}),ze&&!Me&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Failed to load profile"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:ze})]}),!Me&&!ze&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"My Profile"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Manage your personal information"})]}),Ce?jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:lr,disabled:Oe,leftIcon:jsxRuntimeExports.jsx(X$1,{size:16}),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:yr,disabled:Oe,isLoading:Oe,leftIcon:!Oe&&jsxRuntimeExports.jsx(Save,{size:16}),children:"Save Changes"})]}):jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",leftIcon:jsxRuntimeExports.jsx(Lock,{size:16}),onClick:()=>ur(!0),children:"Change Password"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Te(!0),children:"Edit Profile"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-bg-card p-6 rounded-lg shadow-sm border border-border lg:col-span-1",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-32 h-32 rounded-full bg-brand-secondary flex items-center justify-center text-white text-4xl font-bold overflow-hidden mb-4 relative group",children:[Ke?jsxRuntimeExports.jsx("img",{src:Ke,alt:"Profile",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsxs("span",{children:[(Cr=We.firstName)==null?void 0:Cr[0],(Nr=We.lastName)==null?void 0:Nr[0]]}),Ce&&jsxRuntimeExports.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",children:[jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:vr}),jsxRuntimeExports.jsx("span",{className:"text-white text-xs font-medium",children:"Change Photo"})]})]}),jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-text-primary text-center",children:[We.firstName," ",We.lastName]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary capitalize",children:We.designation||(e==null?void 0:e.role)}),jsxRuntimeExports.jsxs("div",{className:"mt-4 w-full space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Employee ID"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:We.employeeId})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Status"}),jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:We.employeeStatus})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Role"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary capitalize",children:We.role})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"lg:col-span-3 bg-bg-card rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsx("div",{className:"flex overflow-x-auto border-b border-border",children:n.map(Rr=>jsxRuntimeExports.jsx("button",{onClick:()=>Re(Rr),className:`px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${Ee===Rr?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:Rr},Rr))}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[Ee==="Basic Info"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ir("First Name","firstName",We.firstName,User),ir("Last Name","lastName",We.lastName,User),ir("Nick Name","nickName",We.nickName),ir("Email Address","email",We.email,Mail,"email")]}),Ee==="Work Info"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ir("Department","department",We.department,Building2),ir("Location","location",We.location,MapPin),ir("Designation","designation",We.designation,Briefcase),ir("Employment Type","employmentType",We.employmentType),ir("Source of Hire","sourceOfHire",We.sourceOfHire),ir("Date of Joining","dateOfJoining",We.dateOfJoining,Calendar$1,"date"),ir("Total Experience","totalExperience",We.totalExperience),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[jsxRuntimeExports.jsx(UsersRound,{size:16}),"Reporting Manager"]}),Ce?jsxRuntimeExports.jsxs("select",{name:"reportingManager",value:We.reportingManager||"",onChange:dr,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select Manager"}),Ve.filter(Rr=>Rr._id!==He).map(Rr=>jsxRuntimeExports.jsxs("option",{value:Rr._id,children:[Rr.firstName," ",Rr.lastName," (",Rr.employeeId,")"]},Rr._id))]}):jsxRuntimeExports.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:We.reportingManagerName||"N/A"})]})]}),Ee==="Personal"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ir("Date of Birth","dateOfBirth",We.dateOfBirth,Calendar$1,"date"),ir("Gender","gender",We.gender),ir("Marital Status","maritalStatus",We.maritalStatus,Heart),nr("About Me","aboutMe",We.aboutMe),nr("Expertise / Ask Me","expertise",We.expertise)]}),Ee==="Contact"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ir("Work Phone","workPhone",We.workPhone,Phone),ir("Extension","extension",We.extension),ir("Seating Location","seatingLocation",We.seatingLocation,MapPin),ir("Personal Mobile","personalMobile",We.personalMobile,Phone),ir("Personal Email","personalEmail",We.personalEmail,Mail,"email"),nr("Present Address","presentAddress",We.presentAddress),nr("Permanent Address","permanentAddress",We.permanentAddress)]}),Ee==="Identity"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ir("UAN","uan",We.uan,IdCard),ir("PAN","pan",We.pan,IdCard),ir("Aadhaar","aadhaar",We.aadhaar,IdCard)]}),Ee==="Bank Details"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[jsxRuntimeExports.jsx(User,{size:16}),"Account Name"]}),Ce?jsxRuntimeExports.jsx(Input,{type:"text",name:"accountName",value:((Mr=We.bankDetails)==null?void 0:Mr.accountName)||"",onChange:mr}):jsxRuntimeExports.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:((Fr=We.bankDetails)==null?void 0:Fr.accountName)||"N/A"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[jsxRuntimeExports.jsx(IdCard,{size:16}),"Account Number"]}),Ce?jsxRuntimeExports.jsx(Input,{type:"text",name:"accountNumber",value:(($r=We.bankDetails)==null?void 0:$r.accountNumber)||"",onChange:mr}):jsxRuntimeExports.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:((Wr=We.bankDetails)==null?void 0:Wr.accountNumber)||"N/A"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[jsxRuntimeExports.jsx(Landmark,{size:16}),"Bank Name"]}),Ce?jsxRuntimeExports.jsx(Input,{type:"text",name:"bankName",value:((Zr=We.bankDetails)==null?void 0:Zr.bankName)||"",onChange:mr}):jsxRuntimeExports.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:((nn=We.bankDetails)==null?void 0:nn.bankName)||"N/A"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary mb-2",children:[jsxRuntimeExports.jsx(Building2,{size:16}),"IFSC Code"]}),Ce?jsxRuntimeExports.jsx(Input,{type:"text",name:"ifscCode",value:((an=We.bankDetails)==null?void 0:an.ifscCode)||"",onChange:mr}):jsxRuntimeExports.jsx("p",{className:"text-text-primary px-3 py-2 bg-bg-main rounded-lg",children:((Yr=We.bankDetails)==null?void 0:Yr.ifscCode)||"N/A"})]})]}),Ee==="Documents"&&He&&jsxRuntimeExports.jsx(DocumentsTab,{employeeId:He,roleName:We.role}),Ee==="Additional"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-text-primary",children:[jsxRuntimeExports.jsx(Briefcase,{size:18}),"Work Experience"]}),Ce&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>rr("workExperience",{companyName:"",jobTitle:"",fromDate:"",toDate:"",description:""}),className:"text-brand-primary text-sm flex items-center gap-1 hover:text-brand-secondary",children:[jsxRuntimeExports.jsx(Plus,{size:16})," Add Experience"]})]}),We.workExperience.length===0?jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm",children:"No work experience added yet."}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:We.workExperience.map((Rr,Xr)=>Ce?jsxRuntimeExports.jsxs("div",{className:"border border-border rounded-lg p-4 relative",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>pr("workExperience",Xr),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{size:16})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Company Name",value:Rr.companyName||"",onChange:mn=>cr("workExperience",Xr,"companyName",mn.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Job Title",value:Rr.jobTitle||"",onChange:mn=>cr("workExperience",Xr,"jobTitle",mn.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"}),jsxRuntimeExports.jsx(DatePicker,{placeholder:"From Date",value:Rr.fromDate?new Date(Rr.fromDate).toISOString().split("T")[0]:"",onChange:mn=>cr("workExperience",Xr,"fromDate",mn.target.value)}),jsxRuntimeExports.jsx(DatePicker,{placeholder:"To Date",value:Rr.toDate?new Date(Rr.toDate).toISOString().split("T")[0]:"",onChange:mn=>cr("workExperience",Xr,"toDate",mn.target.value)}),jsxRuntimeExports.jsx("textarea",{placeholder:"Description",value:Rr.description||"",onChange:mn=>cr("workExperience",Xr,"description",mn.target.value),className:"col-span-2 px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20",rows:2})]})]},Xr):jsxRuntimeExports.jsxs("div",{className:"border border-border rounded-lg p-4 bg-bg-main",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-text-primary",children:Rr.jobTitle||"N/A"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-text-secondary",children:Rr.companyName||"N/A"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-text-muted mt-1",children:[Rr.fromDate?new Date(Rr.fromDate).toLocaleDateString():"N/A"," ","-"," ",Rr.toDate?new Date(Rr.toDate).toLocaleDateString():"Present"]}),Rr.description&&jsxRuntimeExports.jsx("div",{className:"text-sm text-text-secondary mt-2",children:Rr.description})]},Xr))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-text-primary",children:[jsxRuntimeExports.jsx(GraduationCap,{size:18}),"Education"]}),Ce&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>rr("education",{instituteName:"",degree:"",specialization:"",dateOfCompletion:""}),className:"text-brand-primary text-sm flex items-center gap-1 hover:text-brand-secondary",children:[jsxRuntimeExports.jsx(Plus,{size:16})," Add Education"]})]}),We.education.length===0?jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm",children:"No education records added yet."}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:We.education.map((Rr,Xr)=>Ce?jsxRuntimeExports.jsxs("div",{className:"border border-border rounded-lg p-4 relative",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>pr("education",Xr),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{size:16})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Institute Name",value:Rr.instituteName||"",onChange:mn=>cr("education",Xr,"instituteName",mn.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Degree",value:Rr.degree||"",onChange:mn=>cr("education",Xr,"degree",mn.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Specialization",value:Rr.specialization||"",onChange:mn=>cr("education",Xr,"specialization",mn.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"}),jsxRuntimeExports.jsx("input",{type:"date",placeholder:"Date of Completion",value:Rr.dateOfCompletion?new Date(Rr.dateOfCompletion).toISOString().split("T")[0]:"",onChange:mn=>cr("education",Xr,"dateOfCompletion",mn.target.value),className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]})]},Xr):jsxRuntimeExports.jsxs("div",{className:"border border-border rounded-lg p-4 bg-bg-main",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-text-primary",children:Rr.degree||"N/A"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-text-secondary",children:Rr.instituteName||"N/A"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-text-muted mt-1",children:[Rr.specialization||"N/A"," -"," ",Rr.dateOfCompletion?new Date(Rr.dateOfCompletion).toLocaleDateString():"N/A"]})]},Xr))})]})]})]})]})]}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:Ze,onClose:()=>er(!1),onConfirm:()=>er(!1),title:"Success",message:"Profile updated successfully!",confirmText:"OK",variant:"info",showCancel:!1}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:St,onClose:()=>ar(!1),onConfirm:()=>ar(!1),title:"Success",message:"Password changed successfully",variant:"success",confirmText:"OK",showCancel:!1})]}),jsxRuntimeExports.jsx(ChangePasswordModal,{isOpen:hr,onClose:()=>ur(!1),onSubmit:br})]})}function ClockInOut(){var hr,ur,dr;const[e,t]=reactExports.useState("clocked-out"),[n,Ee]=reactExports.useState(null),[Re,Ce]=reactExports.useState(!0),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(0),[Be,ze]=reactExports.useState(null),[$e,He]=reactExports.useState(!1),[Ue,Ve]=reactExports.useState("");reactExports.useEffect(()=>{qe(),We()},[]);const We=async()=>{var vr;try{const yr=await apiService.getCurrentUser();(vr=yr==null?void 0:yr.user)!=null&&vr.shiftId&&ze(yr.user.shiftId)}catch(yr){console.error("Failed to fetch shift info:",yr)}};reactExports.useEffect(()=>{if(e!=="clocked-out"&&(n!=null&&n.clockIn)){const vr=setInterval(()=>{const yr=new Date(n.clockIn).getTime(),br=Date.now();Oe(Math.floor((br-yr)/1e3))},1e3);return()=>clearInterval(vr)}},[e,n]);const qe=async()=>{try{const vr=await apiService.getAttendanceStatus();t(vr.status),Ee(vr.timeEntry)}catch(vr){console.error("Failed to fetch status:",vr)}finally{Ce(!1)}},Ge=async()=>{Me(!0);try{const vr=await apiService.clockIn();t("clocked-in"),Ee(vr.timeEntry)}catch(vr){alert(vr.message)}finally{Me(!1)}},Ye=()=>{He(!0)},Ke=async()=>{Me(!0);try{await apiService.clockOut(Ue),t("clocked-out"),Ee(null),Oe(0),He(!1),Ve("")}catch(vr){alert(vr.message)}finally{Me(!1)}},Xe=async()=>{Me(!0);try{const vr=await apiService.startBreak();t("on-break"),Ee(vr.timeEntry)}catch(vr){alert(vr.message)}finally{Me(!1)}},Ze=async()=>{Me(!0);try{const vr=await apiService.endBreak();t("clocked-in"),Ee(vr.timeEntry)}catch(vr){alert(vr.message)}finally{Me(!1)}},er=vr=>{const yr=Math.floor(vr/3600),br=Math.floor(vr%3600/60),lr=vr%60;return`${yr.toString().padStart(2,"0")}:${br.toString().padStart(2,"0")}:${lr.toString().padStart(2,"0")}`},St=()=>{if(!Be||!(n!=null&&n.clockIn))return 0;const vr=new Date,[yr,br]=Be.startTime.split(":").map(Number);vr.setHours(yr,br,0);const lr=new Date,[cr,rr]=Be.endTime.split(":").map(Number);lr.setHours(cr,rr,0);const pr=lr.getTime()-vr.getTime(),mr=Date.now()-new Date(n.clockIn).getTime();return Math.min(mr/pr*100,100)};if(Re)return jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-16 w-full rounded-lg"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-24 w-full rounded-lg"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-64 w-full rounded-lg"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-16 w-full rounded-lg"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-16 w-full rounded-lg"})]})]});const ar=St();return jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-in fade-in duration-500",children:[Be&&jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-xl p-4 border border-border shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-lg bg-brand-primary/10 flex items-center justify-center",children:jsxRuntimeExports.jsx(Calendar$1,{className:"text-brand-primary",size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary",children:"Your Shift"}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-text-primary text-lg",children:Be.name})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{size:16,className:"text-text-secondary"}),jsxRuntimeExports.jsxs("span",{className:"text-text-primary font-medium",children:[Be.startTime," - ",Be.endTime]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Sun,{size:16,className:"text-text-secondary"}),jsxRuntimeExports.jsx("span",{className:"text-text-primary font-medium",children:((hr=Be.workingDays)==null?void 0:hr.length)===5&&Be.workingDays.includes("Monday")&&Be.workingDays.includes("Friday")?"Mon - Fri":(ur=Be.workingDays)==null?void 0:ur.join(", ")})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-brand-primary to-brand-secondary rounded-2xl p-8 text-white shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-10",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center animate-pulse",children:[e==="clocked-out"&&jsxRuntimeExports.jsx(Clock,{size:32}),e==="clocked-in"&&jsxRuntimeExports.jsx(Activity,{size:32,className:"animate-pulse"}),e==="on-break"&&jsxRuntimeExports.jsx(Coffee,{size:32})]}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsxs("h3",{className:"text-3xl font-bold",children:[e==="clocked-out"&&"Ready to Start",e==="clocked-in"&&"You're Productive!",e==="on-break"&&"Taking a Break"]}),jsxRuntimeExports.jsxs("p",{className:"text-white/80 text-sm",children:[e==="clocked-out"&&"Click below to begin your day",e==="clocked-in"&&"Keep up the great work",e==="on-break"&&"Relax and recharge"]})]})]}),e!=="clocked-out"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-white/90 text-sm mb-2",children:["Clocked in at"," ",n!=null&&n.clockIn?new Date(n.clockIn).toLocaleTimeString():"N/A"]}),jsxRuntimeExports.jsx("div",{className:"text-6xl font-mono font-bold tracking-wider mb-2",children:er(De)}),jsxRuntimeExports.jsx("p",{className:"text-white/80 text-sm",children:"Hours worked today"})]}),Be&&jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-white/80 mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Shift Progress"}),jsxRuntimeExports.jsxs("span",{children:[Math.round(ar),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-3 bg-white/20 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-1000 ease-out",style:{width:`${ar}%`}})})]})]}),e==="clocked-out"&&jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"text-7xl mb-4",children:""}),jsxRuntimeExports.jsx("p",{className:"text-xl text-white/90",children:"Start your productive day!"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e==="clocked-out"&&jsxRuntimeExports.jsxs("button",{onClick:Ge,disabled:Te,className:"col-span-full flex items-center justify-center gap-3 px-8 py-6 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-xl font-semibold text-lg transition-all transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:[Te?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:24}):jsxRuntimeExports.jsx(Play,{size:24}),"Clock In"]}),e==="clocked-in"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:Xe,disabled:Te,className:"flex items-center justify-center gap-3 px-6 py-5 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white rounded-xl font-semibold transition-all transform hover:scale-105 active:scale-95 disabled:opacity-50 shadow-lg hover:shadow-xl",children:[Te?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:20}):jsxRuntimeExports.jsx(Coffee,{size:20}),"Start Break"]}),jsxRuntimeExports.jsxs("button",{onClick:Ye,disabled:Te,className:"flex items-center justify-center gap-3 px-6 py-5 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-xl font-semibold transition-all transform hover:scale-105 active:scale-95 disabled:opacity-50 shadow-lg hover:shadow-xl",children:[Te?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:20}):jsxRuntimeExports.jsx(LogOut,{size:20}),"Clock Out"]})]}),e==="on-break"&&jsxRuntimeExports.jsxs("button",{onClick:Ze,disabled:Te,className:"col-span-full flex items-center justify-center gap-3 px-8 py-6 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl font-semibold text-lg transition-all transform hover:scale-105 active:scale-95 disabled:opacity-50 shadow-lg hover:shadow-xl",children:[Te?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:24}):jsxRuntimeExports.jsx(Coffee,{size:24}),"End Break & Resume Work"]})]}),n&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-text-primary flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{size:20,className:"text-brand-primary"}),"Today's Activity"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-xl p-4 border border-border hover:border-brand-primary/50 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/10 flex items-center justify-center",children:jsxRuntimeExports.jsx(Clock,{className:"text-green-600",size:20})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mb-1",children:"Clock In"}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-text-primary truncate",children:new Date(n.clockIn).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})}),n.clockOut&&jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-xl p-4 border border-border hover:border-brand-primary/50 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-500/10 flex items-center justify-center",children:jsxRuntimeExports.jsx(LogOut,{className:"text-red-600",size:20})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mb-1",children:"Clock Out"}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-text-primary truncate",children:new Date(n.clockOut).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-xl p-4 border border-border hover:border-brand-primary/50 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/10 flex items-center justify-center",children:jsxRuntimeExports.jsx(Coffee,{className:"text-yellow-600",size:20})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mb-1",children:"Total Breaks"}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-text-primary",children:((dr=n.breaks)==null?void 0:dr.length)||0})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-xl p-4 border border-border hover:border-brand-primary/50 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:jsxRuntimeExports.jsx(Activity,{className:"text-blue-600",size:20})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mb-1",children:"Break Time"}),jsxRuntimeExports.jsxs("p",{className:"font-semibold text-text-primary",children:[n.totalBreakMinutes||0," min"]})]})]})})]})]}),$e&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm animate-in fade-in duration-200",children:jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in duration-200 border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-border bg-gradient-to-r from-brand-primary/10 to-brand-secondary/10",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-xl text-text-primary flex items-center gap-2",children:[jsxRuntimeExports.jsx(LogOut,{size:24,className:"text-brand-primary"}),"Clock Out"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Great work today! Share what you accomplished"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-medium text-text-primary flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{size:16}),"Today's Accomplishments"]}),jsxRuntimeExports.jsx("textarea",{value:Ue,onChange:vr=>Ve(vr.target.value),placeholder:` Completed the dashboard redesign
 Fixed critical bugs in the payment module
 Attended team meeting...`,className:"w-full p-3 border border-border rounded-xl bg-bg-main focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary min-h-[120px] text-sm text-text-primary resize-none",autoFocus:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"Optional: Share your key accomplishments for today"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>He(!1),className:"px-6 py-2.5 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),jsxRuntimeExports.jsxs("button",{onClick:Ke,disabled:Te,className:"px-6 py-2.5 bg-gradient-to-r from-brand-primary to-brand-secondary text-white rounded-lg hover:opacity-90 text-sm font-medium flex items-center gap-2 transition-all disabled:opacity-50",children:[Te&&jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:16}),"Confirm Clock Out"]})]})]})]})})]})}const Textarea=reactExports.forwardRef(({label:e,error:t,helperText:n,className:Ee="",id:Re,rows:Ce=3,...Te},Me)=>{const De=Re||Te.name||Math.random().toString(36).substr(2,9);return jsxRuntimeExports.jsxs("div",{className:"w-full",children:[e&&jsxRuntimeExports.jsx("label",{htmlFor:De,className:"block text-sm font-medium text-text-secondary mb-1",children:e}),jsxRuntimeExports.jsx("textarea",{ref:Me,id:De,rows:Ce,className:`
          w-full rounded-lg border bg-bg-card px-3 py-2 text-sm text-text-primary placeholder-text-muted
          ${t?"border-status-error focus:ring-status-error":"border-border focus:ring-brand-primary"}
          focus:outline-none focus:ring-2 focus:border-transparent
          disabled:bg-bg-main disabled:text-text-muted
          ${Ee}
        `,...Te}),t&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-status-error",children:t}),!t&&n&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-text-muted",children:n})]})});Textarea.displayName="Textarea";function SubmitConfirmationModal({isOpen:e,onClose:t,onConfirm:n,weekStartDate:Ee,totalHours:Re}){return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:t,title:"Confirm Submission",maxWidth:"max-w-md",footer:jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:t,className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:n,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors",children:"Confirm Submit"})]}),children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-brand-primary/10 rounded-lg text-brand-primary",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"shrink-0 mt-0.5",size:20}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold mb-1",children:"Attention Required"}),jsxRuntimeExports.jsx("p",{children:"Once submitted, you will not be able to edit these timesheet entries without manager approval."})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-main p-4 rounded-lg space-y-2 border border-border-dim",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Week Starting:"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:Ee?format(Ee,"MMM d, yyyy"):"-"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Total Hours:"}),jsxRuntimeExports.jsxs("span",{className:"font-bold text-text-primary",children:[Re," hrs"]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm",children:"Are you sure you want to submit your timesheet for this week?"})]})})}function Timesheet(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(!1),[Be,ze]=reactExports.useState(!1),[$e,He]=reactExports.useState(""),[Ue,Ve]=reactExports.useState({date:new Date().toISOString().split("T")[0],project:"",task:"",startTime:"",endTime:"",description:""}),[We,qe]=reactExports.useState([]),[Ge,Ye]=reactExports.useState([]),[Ke,Xe]=reactExports.useState(void 0);reactExports.useEffect(()=>{St(),Ze()},[]),reactExports.useEffect(()=>{if(Ue.project&&We.length>0){const cr=We.find(rr=>rr._id===Ue.project||rr.name===Ue.project);cr?er(cr._id):Ye([])}else Ye([])},[Ue.project,We]);const Ze=async()=>{try{const cr=await apiService.getProjects();qe(cr.projects||[])}catch{console.error("Failed to fetch projects")}},er=async cr=>{try{const rr=await apiService.getTasks({projectId:cr});Ye(rr.tasks||[])}catch{console.error("Failed to fetch tasks")}},St=async()=>{try{const cr=new Date;cr.setDate(cr.getDate()-30);const rr=await apiService.getTimesheetEntries({startDate:cr.toISOString().split("T")[0]});t(rr.entries||[])}catch(cr){console.error("Failed to fetch entries:",cr)}finally{Ee(!1)}},ar=async cr=>{cr.preventDefault();try{const rr=We.find(ir=>ir._id===Ue.project),pr=Ge.find(ir=>ir._id===Ue.task),mr={...Ue,project:rr?rr.name:Ue.project,projectId:rr?rr._id:void 0,task:pr?pr.title:Ue.task,taskId:pr?pr._id:void 0};await apiService.createTimesheetEntry(mr),Ce(!1),Ve({date:new Date().toISOString().split("T")[0],project:"",task:"",startTime:"",endTime:"",description:""}),St()}catch(rr){alert(rr.message)}},hr=async cr=>{if(confirm("Delete this timesheet entry?"))try{await apiService.deleteTimesheetEntry(cr),St()}catch(rr){alert(rr.message)}},ur=async()=>{const cr=new Date,rr=cr.getDay(),pr=rr===0?0:7-rr,mr=new Date(cr);mr.setDate(cr.getDate()+pr);const ir=new Date(mr);ir.setDate(mr.getDate()-6),Xe(ir),Oe(!0)},dr=async()=>{if(Ke){Me(!0);try{const cr=new Date(Ke);cr.setDate(Ke.getDate()+6);const rr=await apiService.submitTimesheets(cr.toISOString().split("T")[0]);He(rr.message),ze(!0),St(),Oe(!1)}catch(cr){alert(cr.message)}finally{Me(!1)}}},vr=()=>{if(e.length===0){alert("No entries to export");return}const cr=["Date","Project","Task","Description","Start Time","End Time","Hours","Status","Review Comments"],rr=e.map(gr=>[new Date(gr.date).toLocaleDateString(),gr.project,gr.task,`"${(gr.description||"").replace(/"/g,'""')}"`,gr.startTime,gr.endTime,gr.hours,gr.status,`"${(gr.reviewComments||"").replace(/"/g,'""')}"`]),pr=[cr.join(","),...rr.map(gr=>gr.join(","))].join(`
`),mr=new Blob([pr],{type:"text/csv;charset=utf-8;"}),ir=URL.createObjectURL(mr),nr=document.createElement("a");nr.setAttribute("href",ir),nr.setAttribute("download",`timesheet_export_${new Date().toISOString().split("T")[0]}.csv`),nr.style.visibility="hidden",document.body.appendChild(nr),nr.click(),document.body.removeChild(nr)},yr=cr=>{switch(cr){case"draft":return jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-gray-600 bg-gray-100 px-2 py-1 rounded-full",children:[jsxRuntimeExports.jsx(CircleAlert,{size:12}),"Draft"]});case"submitted":return jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-blue-700 bg-blue-100 px-2 py-1 rounded-full",children:[jsxRuntimeExports.jsx(Send,{size:12}),"Submitted"]});case"approved":return jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-green-700 bg-green-100 px-2 py-1 rounded-full",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12}),"Approved"]});case"rejected":return jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-red-700 bg-red-100 px-2 py-1 rounded-full",children:[jsxRuntimeExports.jsx(CircleX,{size:12}),"Rejected"]});default:return null}},br=()=>e.reduce((cr,rr)=>cr+(rr.hours||0),0).toFixed(2),lr=e.some(cr=>cr.status==="draft");return n?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-7 w-48"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-64"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-32"})]})]}),jsxRuntimeExports.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4,5].map(cr=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-24"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-48"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-24"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-16"})]},cr))})})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Timesheet Entries"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary",children:"Track time spent on projects and tasks"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[e.length>0&&jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:vr,leftIcon:jsxRuntimeExports.jsx(Download,{size:18}),children:"Export CSV"}),lr&&jsxRuntimeExports.jsx(Button,{className:"bg-green-600 hover:bg-green-700",onClick:ur,disabled:Te,isLoading:Te,leftIcon:!Te&&jsxRuntimeExports.jsx(Send,{size:18}),children:"Submit for Approval"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Ce(!Re),leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Add Entry"})]})]}),Re&&jsxRuntimeExports.jsxs("form",{onSubmit:ar,className:"bg-bg-main border border-border rounded-lg p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DatePicker,{label:"Date",value:Ue.date,onChange:cr=>Ve({...Ue,date:cr.target.value}),required:!0})}),jsxRuntimeExports.jsx("div",{children:We.length>0?jsxRuntimeExports.jsx(Select,{label:"Project",value:Ue.project,onChange:cr=>Ve({...Ue,project:cr,task:""}),required:!0,options:We.map(cr=>({value:cr._id,label:cr.name})),placeholder:"Select Project"}):jsxRuntimeExports.jsx(Input,{label:"Project",type:"text",value:Ue.project,onChange:cr=>Ve({...Ue,project:cr.target.value}),required:!0,placeholder:"Project name"})}),jsxRuntimeExports.jsx("div",{children:Ge.length>0?jsxRuntimeExports.jsx(Select,{label:"Task",value:Ue.task,onChange:cr=>Ve({...Ue,task:cr}),required:!0,options:Ge.map(cr=>({value:cr._id,label:cr.title})),placeholder:"Select Task"}):jsxRuntimeExports.jsx(Input,{label:"Task",type:"text",value:Ue.task,onChange:cr=>Ve({...Ue,task:cr.target.value}),required:!0,placeholder:"Task description"})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"Start Time",type:"time",value:Ue.startTime,onChange:cr=>Ve({...Ue,startTime:cr.target.value}),required:!0})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"End Time",type:"time",value:Ue.endTime,onChange:cr=>Ve({...Ue,endTime:cr.target.value}),required:!0})})]}),jsxRuntimeExports.jsx("div",{className:"col-span-2",children:jsxRuntimeExports.jsx(Textarea,{label:"Description (Optional)",value:Ue.description,onChange:cr=>Ve({...Ue,description:cr.target.value}),rows:2,placeholder:"Additional details..."})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"submit",leftIcon:jsxRuntimeExports.jsx(Save,{size:16}),children:"Save Entry"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"secondary",onClick:()=>Ce(!1),children:"Cancel"})]})]}),jsxRuntimeExports.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:jsxRuntimeExports.jsx(Table$1,{columns:[{header:"Date",accessorKey:"date",render:cr=>jsxRuntimeExports.jsx("span",{className:"text-sm",children:new Date(cr.date).toLocaleDateString()})},{header:"Project",accessorKey:"project",render:cr=>jsxRuntimeExports.jsx("span",{className:"font-medium",children:cr.project})},{header:"Task",accessorKey:"task",render:cr=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{children:cr.task}),cr.description&&jsxRuntimeExports.jsx("span",{className:"text-xs text-text-muted truncate max-w-xs",children:cr.description}),cr.reviewComments&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-yellow-700 mt-1",children:["Review: ",cr.reviewComments]})]})},{header:"Time",render:cr=>jsxRuntimeExports.jsxs("span",{className:"text-sm",children:[cr.startTime," - ",cr.endTime]})},{header:"Hours",accessorKey:"hours",render:cr=>jsxRuntimeExports.jsxs("span",{className:"font-medium text-brand-primary",children:[cr.hours,"h"]})},{header:"Status",accessorKey:"status",render:cr=>yr(cr.status)},{header:"Actions",render:cr=>cr.status==="draft"||cr.status==="rejected"?jsxRuntimeExports.jsx("button",{onClick:()=>hr(cr._id),className:"text-text-muted hover:text-red-500 transition-colors p-1",title:"Delete Entry",children:jsxRuntimeExports.jsx(Trash2,{size:16})}):null}],data:e,isLoading:n,emptyMessage:"No timesheet entries found"})}),e.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-brand-primary/10 border border-brand-primary/20 rounded-lg p-4 flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-text-primary",children:"Total Hours (Last 30 Days)"}),jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-brand-primary",children:[br(),"h"]})]}),jsxRuntimeExports.jsx(SubmitConfirmationModal,{isOpen:De,onClose:()=>Oe(!1),onConfirm:dr,weekStartDate:Ke,totalHours:e.filter(cr=>cr.status==="draft").reduce((cr,rr)=>cr+(rr.hours||0),0)}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:Be,onClose:()=>ze(!1),onConfirm:()=>ze(!1),title:"Success",message:$e,confirmText:"OK",variant:"success",showCancel:!1})]})}function TimeHistory(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState({startDate:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],endDate:new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0]});reactExports.useEffect(()=>{Te()},[Re]);const Te=async()=>{Ee(!0);try{console.log("Fetching history with date range:",Re);const De=await apiService.getAttendanceHistory(Re);console.log("Received attendance history:",De),t(De.entries||[])}catch(De){console.error("Failed to fetch history:",De)}finally{Ee(!1)}},Me=De=>{const Oe=Math.floor(De),Be=Math.round((De-Oe)*60);return`${Oe}h ${Be}m`};return n?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-main border border-border rounded-lg p-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-24 mb-3"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-full"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-[200px] w-full rounded-lg"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-[200px] w-full rounded-lg"})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-main border border-border rounded-lg p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Date Range"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DatePicker,{label:"From",value:Re.startDate,onChange:De=>Ce({...Re,startDate:De.target.value})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DatePicker,{label:"To",value:Re.endDate,onChange:De=>Ce({...Re,endDate:De.target.value})})})]})]}),e.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[jsxRuntimeExports.jsx(Calendar$1,{size:48,className:"mx-auto mb-3 opacity-50"}),jsxRuntimeExports.jsx("p",{children:"No attendance records found for this period"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:e.map(De=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-main border border-border rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar$1,{size:18,className:"text-brand-primary"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-text-primary",children:new Date(De.clockIn).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),jsxRuntimeExports.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${De.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:De.status==="completed"?"Completed":"Active"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-text-secondary mb-1",children:"Clock In"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{size:14,className:"text-green-600"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:new Date(De.clockIn).toLocaleTimeString()})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-text-secondary mb-1",children:"Clock Out"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{size:14,className:"text-red-600"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:De.clockOut?new Date(De.clockOut).toLocaleTimeString():"In Progress"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-text-secondary mb-1",children:"Total Hours"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-brand-primary",children:De.totalHours?Me(De.totalHours):"0h 0m"})]})]}),De.breaks&&De.breaks.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-text-secondary mb-2",children:["Breaks: ",De.breaks.length," (",De.totalBreakMinutes," min total)"]})}),De.completedTasks&&jsxRuntimeExports.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-text-secondary mb-1",children:"Completed Tasks:"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-primary whitespace-pre-wrap",children:De.completedTasks})]})]},De._id))})]})}function CorrectionRequests(){const{user:e}=useAuth(),[t,n]=reactExports.useState([]),[Ee,Re]=reactExports.useState([]),[Ce,Te]=reactExports.useState(!0),[Me,De]=reactExports.useState(!1),[Oe,Be]=reactExports.useState({correctionType:"add",requestedDate:new Date().toISOString().split("T")[0],requestedClockIn:"",requestedClockOut:"",reason:""}),ze=["HR","Project Manager"].includes((e==null?void 0:e.role)||"");reactExports.useEffect(()=>{$e()},[]);const $e=async()=>{Te(!0);try{const We=await apiService.getMyCorrections();if(n(We.corrections||[]),ze){const qe=await apiService.getPendingCorrections();Re(qe.corrections||[])}}catch(We){console.error("Failed to fetch corrections:",We)}finally{Te(!1)}},He=async We=>{We.preventDefault();try{await apiService.requestTimeCorrection(Oe),De(!1),Be({correctionType:"add",requestedDate:new Date().toISOString().split("T")[0],requestedClockIn:"",requestedClockOut:"",reason:""}),$e()}catch(qe){alert(qe.message)}},Ue=async We=>{try{await apiService.approveCorrection(We,""),$e()}catch(qe){alert(qe.message)}},Ve=async We=>{const qe=prompt("Reason for rejection:");if(qe)try{await apiService.rejectCorrection(We,qe),$e()}catch(Ge){alert(Ge.message)}};return Ce?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-48"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-64"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-32 rounded-lg"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:[1,2].map(We=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-main border border-border rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-24 rounded-full"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-48 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"})]},We))})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"My Correction Requests"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary",children:"Request corrections for missed clock in/out"})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>De(!Me),leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"New Request"})]}),Me&&jsxRuntimeExports.jsxs("form",{onSubmit:He,className:"bg-bg-main border border-border rounded-lg p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Type",value:Oe.correctionType,onChange:We=>Be({...Oe,correctionType:We}),options:[{value:"add",label:"Add Missing Entry"},{value:"edit",label:"Edit Existing Entry"}]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DatePicker,{label:"Date",value:Oe.requestedDate,onChange:We=>Be({...Oe,requestedDate:We.target.value}),required:!0,max:new Date().toISOString().split("T")[0]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Clock In Time"}),jsxRuntimeExports.jsx("input",{type:"time",value:Oe.requestedClockIn,onChange:We=>Be({...Oe,requestedClockIn:We.target.value}),required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Clock Out Time"}),jsxRuntimeExports.jsx("input",{type:"time",value:Oe.requestedClockOut,onChange:We=>Be({...Oe,requestedClockOut:We.target.value}),required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Reason *"}),jsxRuntimeExports.jsx("textarea",{value:Oe.reason,onChange:We=>Be({...Oe,reason:We.target.value}),required:!0,rows:3,placeholder:"Explain why this correction is needed...",className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary transition-colors",children:"Submit Request"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>De(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:t.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-text-secondary border border-border rounded-lg",children:[jsxRuntimeExports.jsx(Clock,{size:32,className:"mx-auto mb-2 opacity-50"}),jsxRuntimeExports.jsx("p",{children:"No correction requests yet"})]}):t.map(We=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-main border border-border rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-text-primary",children:new Date(We.requestedDate).toLocaleDateString()}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-text-secondary ml-2",children:["(",We.correctionType,")"]})]}),jsxRuntimeExports.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${We.status==="pending"?"bg-yellow-100 text-yellow-700":We.status==="approved"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:We.status})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-secondary mb-2",children:[We.requestedClockIn," - ",We.requestedClockOut]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-primary italic",children:['"',We.reason,'"']}),We.managerComments&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-secondary mt-2 pt-2 border-t border-border",children:["Manager: ",We.managerComments]})]},We._id))}),ze&&jsxRuntimeExports.jsxs("div",{className:"pt-6 border-t border-border",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Pending Approvals"}),Ee.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-text-secondary border border-border rounded-lg",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:32,className:"mx-auto mb-2 opacity-50"}),jsxRuntimeExports.jsx("p",{children:"No pending approvals"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Ee.map(We=>{var qe,Ge,Ye;return jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{className:"font-semibold text-text-primary",children:[(qe=We.employee)==null?void 0:qe.firstName," ",(Ge=We.employee)==null?void 0:Ge.lastName]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-text-secondary ml-2",children:["(",(Ye=We.employee)==null?void 0:Ye.employeeId,")"]})]}),jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary",children:new Date(We.requestedDate).toLocaleDateString()})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm mb-2",children:[We.requestedClockIn," - ",We.requestedClockOut]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-primary italic mb-3",children:['Reason: "',We.reason,'"']}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Ue(We._id),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:14}),"Approve"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ve(We._id),className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:[jsxRuntimeExports.jsx(CircleX,{size:14}),"Reject"]})]})]},We._id)})})]})]})}function PendingApprovals(){const{user:e}=useAuth(),[t,n]=reactExports.useState([]),[Ee,Re]=reactExports.useState(!0),[Ce,Te]=reactExports.useState(null),Me=["HR","Project Manager"].includes((e==null?void 0:e.role)||"");reactExports.useEffect(()=>{if(Me){De();const ze=setInterval(De,6e4);return()=>clearInterval(ze)}},[Me]);const De=async()=>{try{const ze=await apiService.getPendingTimesheetApprovals();n(ze.timesheets||[])}catch(ze){console.error("Failed to fetch pending approvals:",ze)}finally{Re(!1)}},Oe=async ze=>{Te(ze);try{await apiService.approveTimesheet(ze,""),De()}catch($e){alert($e.message)}finally{Te(null)}};if(!Me)return null;if(Ee)return jsxRuntimeExports.jsx("div",{className:"space-y-4",children:[1,2].map(ze=>jsxRuntimeExports.jsxs("div",{className:"border border-border rounded-lg p-4 bg-bg-card",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-48"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-32"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-16 w-full rounded"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-16 w-full rounded"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-9 w-24 rounded"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-9 w-24 rounded"})]})]},ze))});const Be=t.reduce((ze,$e)=>{const He=$e.employee._id;return ze[He]||(ze[He]={employee:$e.employee,timesheets:[]}),ze[He].timesheets.push($e),ze},{});return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Pending Approvals"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary",children:"Review and approve timesheet submissions from your team"})]}),t.length>0&&jsxRuntimeExports.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:[t.length," pending"]})]}),Object.keys(Be).length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-text-secondary border border-border rounded-lg",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:48,className:"mx-auto mb-3 opacity-50"}),jsxRuntimeExports.jsx("p",{children:"No pending approvals"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1",children:"All timesheets are up to date"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:Object.values(Be).map(ze=>{const $e=ze.timesheets.reduce((He,Ue)=>He+(Ue.hours||0),0).toFixed(2);return jsxRuntimeExports.jsxs("div",{className:"border border-border rounded-lg p-4 bg-yellow-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4 pb-3 border-b border-yellow-200",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-text-primary",children:[ze.employee.firstName," ",ze.employee.lastName]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-secondary",children:[ze.employee.employeeId,"  ",ze.timesheets.length," ","entries  ",$e,"h total"]})]}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-text-secondary flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{size:12}),"Submitted"," ",new Date(ze.timesheets[0].submittedAt).toLocaleDateString()]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 mb-4",children:ze.timesheets.map(He=>jsxRuntimeExports.jsx("div",{className:"bg-white border border-yellow-200 rounded p-3 text-sm",children:jsxRuntimeExports.jsx("div",{className:"flex justify-between",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:He.project}),jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:He.task})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-xs text-text-secondary",children:[jsxRuntimeExports.jsx("span",{children:new Date(He.date).toLocaleDateString()}),jsxRuntimeExports.jsxs("span",{children:[He.startTime," - ",He.endTime]}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-brand-primary",children:[He.hours,"h"]})]}),He.description&&jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mt-1 italic",children:He.description})]})})},He._id))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{ze.timesheets.forEach(He=>Oe(He._id))},disabled:Ce!==null,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 text-sm font-medium",children:[Ce?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:16}):jsxRuntimeExports.jsx(CircleCheckBig,{size:16}),"Approve All"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{const He=prompt("Reason for rejecting all entries:");He&&(ze.timesheets.forEach(Ue=>apiService.rejectTimesheet(Ue._id,He)),De())},disabled:Ce!==null,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 text-sm font-medium",children:[jsxRuntimeExports.jsx(CircleX,{size:16}),"Reject All"]})]})]},ze.employee._id)})})]})}const TABS=["Clock In/Out","Timesheets","History","Corrections"];function Attendance(){const{user:e}=useAuth(),n=["HR","Project Manager"].includes((e==null?void 0:e.role)||"")?["Clock In/Out","Timesheets","Pending Approvals","History","Corrections"]:TABS,[Ee,Re]=reactExports.useState(n[0]),Ce=Te=>{switch(Te){case"Clock In/Out":return jsxRuntimeExports.jsx(Clock,{size:18});case"Timesheets":return jsxRuntimeExports.jsx(FileText,{size:18});case"Pending Approvals":return jsxRuntimeExports.jsx(GitPullRequest,{size:18});case"History":return jsxRuntimeExports.jsx(History,{size:18});case"Corrections":return jsxRuntimeExports.jsx(GitPullRequest,{size:18});default:return null}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Attendance & Time Tracking"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Track your time, manage timesheets, and request corrections"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsx("div",{className:"flex overflow-x-auto border-b border-border",children:n.map(Te=>jsxRuntimeExports.jsxs("button",{onClick:()=>Re(Te),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${Ee===Te?"border-brand-primary text-brand-primary bg-brand-primary/5":"border-transparent text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[Ce(Te),Te]},Te))}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[Ee==="Clock In/Out"&&jsxRuntimeExports.jsx(ClockInOut,{}),Ee==="Timesheets"&&jsxRuntimeExports.jsx(Timesheet,{}),Ee==="Pending Approvals"&&jsxRuntimeExports.jsx(PendingApprovals,{}),Ee==="History"&&jsxRuntimeExports.jsx(TimeHistory,{}),Ee==="Corrections"&&jsxRuntimeExports.jsx(CorrectionRequests,{})]})]})]})}function AuditTrail(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState({entityType:"",action:"",startDate:"",endDate:""}),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}});reactExports.useEffect(()=>{$e()},[]);const Be=()=>{Oe({isOpen:!0,title:"Clear Audit Trail",message:"Are you sure you want to delete ALL audit logs? This action cannot be undone.",onConfirm:async()=>{Me(!0);try{await apiService.clearAuditLogs(),t([]),Oe(We=>({...We,isOpen:!1}))}catch(We){console.error("Failed to clear logs",We),alert("Failed to clear logs")}finally{Me(!1)}}})},ze=We=>{Oe({isOpen:!0,title:"Delete Audit Log",message:"Are you sure you want to delete this log entry?",onConfirm:async()=>{Me(!0);try{await apiService.deleteAuditLog(We),t(qe=>qe.filter(Ge=>Ge._id!==We)),Oe(qe=>({...qe,isOpen:!1}))}catch(qe){console.error("Failed to delete log",qe),alert("Failed to delete log")}finally{Me(!1)}}})},$e=async()=>{Ee(!0);try{const We=await apiService.getAuditLogs({...Re,limit:100});t(We.logs||[])}catch(We){console.error("Failed to fetch audit logs:",We)}finally{Ee(!1)}},He=()=>{$e()},Ue=We=>{const qe={create:"bg-status-success/10 text-status-success",update:"bg-brand-primary/10 text-brand-primary",delete:"bg-status-error/10 text-status-error",approve:"bg-status-success/10 text-status-success",reject:"bg-status-error/10 text-status-error",submit:"bg-status-warning/10 text-status-warning",login:"bg-blue-100 text-blue-700",logout:"bg-gray-100 text-gray-700"};return jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${qe[We]||"bg-bg-main text-text-secondary"}`,children:We.toUpperCase()})},Ve=We=>{switch(We){case"TimeEntry":return jsxRuntimeExports.jsx(Clock,{size:16,className:"text-blue-600"});case"Timesheet":return jsxRuntimeExports.jsx(FileText,{size:16,className:"text-green-600"});case"TimeCorrection":return jsxRuntimeExports.jsx(User,{size:16,className:"text-purple-600"});case"User":return jsxRuntimeExports.jsx(User,{size:16,className:"text-indigo-600"});default:return null}};return n?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-48 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-64"}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-9 w-32 rounded-lg"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-4 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-20"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-4",children:[1,2,3,4].map(We=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-20 mb-1"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-full rounded-lg"})]},We))}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-32 mt-4 rounded-lg"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(We=>jsxRuntimeExports.jsx("div",{className:"bg-bg-card p-4 rounded-lg shadow-sm border border-border",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-5 h-5 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-16 rounded-full"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-48 mt-1"})]})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-32"})]})},We))})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Audit Trail"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Complete history of all time-related changes"}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsxs("button",{onClick:Be,disabled:Te||e.length===0,className:"text-red-600 hover:text-red-700 hover:bg-red-50 px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[jsxRuntimeExports.jsx(Trash2,{size:16}),"Clear Audit Trail"]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-4 rounded-lg shadow-sm border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Funnel,{size:18,className:"text-brand-primary"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-text-primary",children:"Filters"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Entity Type",value:Re.entityType,onChange:We=>Ce({...Re,entityType:We}),options:[{value:"",label:"All"},{value:"TimeEntry",label:"Time Entry"},{value:"Timesheet",label:"Timesheet"},{value:"TimeCorrection",label:"Time Correction"},{value:"User",label:"User"}]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Action",value:Re.action,onChange:We=>Ce({...Re,action:We}),options:[{value:"",label:"All"},{value:"create",label:"Create"},{value:"update",label:"Update"},{value:"delete",label:"Delete"},{value:"submit",label:"Submit"},{value:"approve",label:"Approve"},{value:"reject",label:"Reject"},{value:"login",label:"Login"},{value:"logout",label:"Logout"}]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DatePicker,{label:"Start Date",value:Re.startDate,onChange:We=>Ce({...Re,startDate:We.target.value})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DatePicker,{label:"End Date",value:Re.endDate,onChange:We=>Ce({...Re,endDate:We.target.value})})})]}),jsxRuntimeExports.jsx("button",{onClick:He,className:"mt-4 px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary transition-colors",children:"Apply Filters"})]}),e.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-text-secondary border border-border rounded-lg",children:jsxRuntimeExports.jsx("p",{children:"No audit logs found"})}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:e.map(We=>{var qe;return jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-4 rounded-lg shadow-sm border border-border hover:border-brand-primary transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[Ve(We.entityType),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:We.entityType}),Ue(We.action)]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["by ",((qe=We.performedBy)==null?void 0:qe.name)||"Unknown",We.employee&&`  ${We.employee.firstName} ${We.employee.lastName}`]})]})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-text-secondary",children:new Date(We.createdAt).toLocaleString()}),jsxRuntimeExports.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),ze(We._id)},className:"p-1 text-text-muted hover:text-red-600 hover:bg-red-50 rounded transition-colors ml-2",title:"Delete Log",children:jsxRuntimeExports.jsx(Trash2,{size:14})})]}),We.changes&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-3 bg-bg-main rounded border border-border",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-medium text-text-secondary mb-2",children:"Changes:"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[We.changes.old&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Old:"}),jsxRuntimeExports.jsx("pre",{className:"text-xs bg-status-error/5 p-2 rounded overflow-auto text-text-primary",children:JSON.stringify(We.changes.old,null,2)})]}),We.changes.new&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"New:"}),jsxRuntimeExports.jsx("pre",{className:"text-xs bg-status-success/5 p-2 rounded overflow-auto text-text-primary",children:JSON.stringify(We.changes.new,null,2)})]})]})]}),We.metadata&&Object.keys(We.metadata).length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-text-secondary",children:[jsxRuntimeExports.jsx("strong",{children:"Details:"})," ",jsxRuntimeExports.jsxs("div",{className:"mt-2 flex flex-col gap-1.5",children:[(We.metadata.ip||We.metadata.device)&&jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4",children:[We.metadata.ip&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 text-xs bg-bg-main px-2 py-1 rounded border border-border",children:[jsxRuntimeExports.jsx(Globe,{size:12,className:"text-brand-primary"}),jsxRuntimeExports.jsx("span",{className:"font-mono text-text-primary",children:We.metadata.ip})]}),We.metadata.device&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 text-xs bg-bg-main px-2 py-1 rounded border border-border",children:[We.metadata.device.toLowerCase().includes("mobile")?jsxRuntimeExports.jsx(Smartphone,{size:12,className:"text-brand-primary"}):jsxRuntimeExports.jsx(Monitor,{size:12,className:"text-brand-primary"}),jsxRuntimeExports.jsx("span",{className:"truncate max-w-[200px]",title:We.metadata.device,children:We.metadata.device.includes("Mozilla")?We.metadata.device.includes("Mac")?"Mac OS":We.metadata.device.includes("Windows")?"Windows":"Web Browser":We.metadata.device})]})]}),We.metadata.location&&jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsxs("a",{href:`https://www.google.com/maps?q=${We.metadata.location.lat},${We.metadata.location.lng}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-brand-primary hover:underline font-medium text-xs bg-brand-primary/5 px-2 py-1 rounded border border-brand-primary/20 hover:bg-brand-primary/10 transition-colors",children:[jsxRuntimeExports.jsx(MapPin,{size:12}),"View Location"]})}),Object.keys(We.metadata).filter(Ge=>!["ip","device","location"].includes(Ge)).length>0&&jsxRuntimeExports.jsx("pre",{className:"text-[10px] bg-bg-main p-2 rounded overflow-auto mt-1 border border-border",children:JSON.stringify(Object.fromEntries(Object.entries(We.metadata).filter(([Ge])=>!["ip","device","location"].includes(Ge))),null,2)})]})]})]},We._id)})}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:De.isOpen,onClose:()=>Oe({...De,isOpen:!1}),onConfirm:De.onConfirm,title:De.title,message:De.message,confirmText:"Delete",isLoading:Te,variant:"danger"})]})}function LeaveBalance(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0);reactExports.useEffect(()=>{Re()},[]);const Re=async()=>{try{const Te=await apiService.getLeaveStats();t(Te.stats)}catch(Te){console.error("Failed to fetch leave stats:",Te)}finally{Ee(!1)}},Ce=Te=>{const De=(Oe=>Oe.toLowerCase())(Te);return De.includes("casual")?{icon:jsxRuntimeExports.jsx(Plane,{size:24,className:"text-blue-600"}),color:"bg-blue-50/50 border-blue-100 dark:bg-blue-900/10 dark:border-blue-800"}:De.includes("sick")||De.includes("medical")?{icon:jsxRuntimeExports.jsx(Pill,{size:24,className:"text-red-600"}),color:"bg-red-50/50 border-red-100 dark:bg-red-900/10 dark:border-red-800"}:De.includes("annual")||De.includes("earned")||De.includes("privilege")?{icon:jsxRuntimeExports.jsx(CalendarDays,{size:24,className:"text-purple-600"}),color:"bg-purple-50/50 border-purple-100 dark:bg-purple-900/10 dark:border-purple-800"}:De.includes("maternity")||De.includes("paternity")||De.includes("parental")?{icon:jsxRuntimeExports.jsx(Users,{size:24,className:"text-pink-600"}),color:"bg-pink-50/50 border-pink-100 dark:bg-pink-900/10 dark:border-pink-800"}:De.includes("unpaid")||De.includes("lop")?{icon:jsxRuntimeExports.jsx(CalendarDays,{size:24,className:"text-orange-600"}),color:"bg-orange-50/50 border-orange-100 dark:bg-orange-900/10 dark:border-orange-800"}:{icon:jsxRuntimeExports.jsx(CalendarDays,{size:24,className:"text-teal-600"}),color:"bg-teal-50/50 border-teal-100 dark:bg-teal-900/10 dark:border-teal-800"}};return n?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[1,2,3].map(Te=>jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-xl border border-border bg-bg-card",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-10 rounded-lg"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-24 rounded-full"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-16"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-32"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-3 border-t border-border flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-16"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-16"})]})]},Te))}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:e.map(Te=>{const Me=Ce(Te.type);return jsxRuntimeExports.jsxs("div",{className:`p-4 rounded-xl border transition-colors ${Me.color}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-white dark:bg-bg-card rounded-lg shadow-sm border border-border",children:Me.icon}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-semibold px-2 py-1 bg-white/50 dark:bg-white/10 rounded-full text-text-primary",children:[Te.type," Leave"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("h3",{className:"text-2xl font-bold text-text-primary",children:[Te.pending,"/",Te.total]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary font-medium",children:"Available Balance"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-3 border-t border-black/5 dark:border-white/5 flex justify-between text-xs text-text-muted",children:[jsxRuntimeExports.jsxs("span",{children:["Used: ",Te.used]}),jsxRuntimeExports.jsxs("span",{children:["Total: ",Te.total]})]})]},Te.type)})})}function LeaveList(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),Re=async()=>{try{const Te=await apiService.getMyLeaves();t(Te.leaves||[])}catch(Te){console.error("Failed to fetch leaves:",Te)}finally{Ee(!1)}};reactExports.useEffect(()=>{Re()},[]);const Ce=Te=>{switch(Te.toLowerCase()){case"approved":return"bg-status-success/10 text-status-success";case"rejected":return"bg-status-error/10 text-status-error";case"pending":default:return"bg-status-warning/10 text-status-warning"}};return jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-lg border border-border overflow-hidden",children:jsxRuntimeExports.jsx(Table$1,{isLoading:n,data:e,emptyMessage:"No leave history found.",columns:[{header:"Type",accessorKey:"type",render:Te=>jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:Te.type})},{header:"Duration",accessorKey:"totalDays",render:Te=>jsxRuntimeExports.jsxs("span",{className:"text-sm text-text-secondary",children:[Te.totalDays," day",Te.totalDays>1?"s":""]})},{header:"Dates",accessorKey:"startDate",render:Te=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx(Calendar$1,{size:14}),jsxRuntimeExports.jsxs("span",{children:[format(new Date(Te.startDate),"MMM d, yyyy")," -"," ",format(new Date(Te.endDate),"MMM d, yyyy")]})]})},{header:"Reason",accessorKey:"reason",render:Te=>jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary max-w-xs truncate block",title:Te.reason,children:Te.reason})},{header:"Status",accessorKey:"status",render:Te=>jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ce(Te.status)}`,children:Te.status})},{header:"Workflow",accessorKey:"workflowStatus",render:Te=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx(Clock,{size:14}),Te.workflowStatus]})}]})})}function LeaveApproval(){var We,qe;const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(null),[Te,Me]=reactExports.useState(null),[De,Oe]=reactExports.useState(""),[Be,ze]=reactExports.useState(!1),$e=async()=>{try{const Ge=await apiService.getPendingLeaveApprovals();t(Ge.leaves||[])}catch(Ge){console.error("Failed to fetch approvals:",Ge)}finally{Ee(!1)}};reactExports.useEffect(()=>{$e()},[]);const He=(Ge,Ye)=>{Ce(Ge),Me(Ye),Oe("")},Ue=()=>{Ce(null),Me(null),Oe("")},Ve=async()=>{if(!(!Re||!Te)){if(Te==="reject"&&!De.trim()){alert("Please provide a reason for rejection.");return}ze(!0);try{Te==="approve"?await apiService.approveLeave(Re._id,De):await apiService.rejectLeave(Re._id,De),$e(),Ue()}catch(Ge){console.error(`Failed to ${Te} leave:`,Ge),alert(`Failed to ${Te} leave`)}finally{ze(!1)}}};return n?jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(Ge=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-border p-4 shadow-sm flex flex-col h-[280px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-10 h-10 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-24"})]})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-16 rounded"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-12"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-20"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-12"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-20 w-full rounded"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-auto",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-10 flex-1 rounded-lg"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 flex-1 rounded-lg"})]})]},Ge))}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length===0?jsxRuntimeExports.jsx("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-text-muted",children:[jsxRuntimeExports.jsx(Check,{className:"w-12 h-12 mb-2 opacity-20"}),jsxRuntimeExports.jsx("p",{children:"No pending approvals found."})]})}):e.map(Ge=>{var Ye,Ke,Xe;return jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-border p-4 shadow-sm hover:shadow-md transition-shadow flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-secondary/10 flex items-center justify-center text-brand-secondary",children:jsxRuntimeExports.jsx(User,{size:20})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"font-medium text-text-primary",children:[(Ye=Ge.employee)==null?void 0:Ye.firstName," ",(Ke=Ge.employee)==null?void 0:Ke.lastName]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted",children:(Xe=Ge.employee)==null?void 0:Xe.designation})]})]}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-brand-primary/5 text-brand-primary text-xs font-medium rounded",children:Ge.type})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Duration"}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-text-primary",children:[Ge.totalDays," Day",Ge.totalDays>1?"s":""]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Dates"}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-text-primary",children:[format(new Date(Ge.startDate),"MMM d")," -"," ",format(new Date(Ge.endDate),"MMM d, yyyy")]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-main p-3 rounded text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase text-text-muted font-semibold mb-1",children:"Reason"}),jsxRuntimeExports.jsxs("p",{className:"line-clamp-3 italic",title:Ge.reason,children:['"',Ge.reason,'"']})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-auto",children:[jsxRuntimeExports.jsx(Button,{variant:"danger",className:"flex-1",onClick:()=>He(Ge,"reject"),leftIcon:jsxRuntimeExports.jsx(X$1,{size:16}),children:"Reject"}),jsxRuntimeExports.jsx(Button,{variant:"primary",className:"flex-1",onClick:()=>He(Ge,"approve"),leftIcon:jsxRuntimeExports.jsx(Check,{size:16}),children:"Approve"})]})]},Ge._id)})}),Re&&Te&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200",children:[jsxRuntimeExports.jsxs("div",{className:`p-4 border-b ${Te==="approve"?"bg-green-50 border-green-100":"bg-red-50 border-red-100"} flex items-center justify-between`,children:[jsxRuntimeExports.jsxs("h3",{className:`font-semibold ${Te==="approve"?"text-green-800":"text-red-800"} flex items-center gap-2`,children:[Te==="approve"?jsxRuntimeExports.jsx(Check,{size:18}):jsxRuntimeExports.jsx(CircleAlert,{size:18}),Te==="approve"?"Approve Request":"Reject Request"]}),jsxRuntimeExports.jsx("button",{onClick:Ue,className:"text-gray-500 hover:text-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X$1,{size:20})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["You are about to ",jsxRuntimeExports.jsx("strong",{children:Te})," the leave request for",jsxRuntimeExports.jsxs("span",{className:"font-semibold text-gray-900",children:[" ",(We=Re.employee)==null?void 0:We.firstName," ",(qe=Re.employee)==null?void 0:qe.lastName]}),"."]}),jsxRuntimeExports.jsx(Textarea,{label:Te==="reject"?"Reason for Rejection *":"Comments (Optional)",placeholder:Te==="reject"?"Please explain why this request is being rejected...":"Add any comments...",value:De,onChange:Ge=>Oe(Ge.target.value),rows:3,autoFocus:!0}),Te==="reject"&&!De.trim()&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-amber-600 flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleAlert,{size:12})," Reason is required for rejection."]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-gray-100 flex justify-end gap-3 bg-gray-50",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:Ue,disabled:Be,children:"Cancel"}),jsxRuntimeExports.jsxs(Button,{variant:Te==="approve"?"primary":"danger",onClick:Ve,isLoading:Be,disabled:Te==="reject"&&!De.trim(),children:["Confirm ",Te==="approve"?"Approval":"Rejection"]})]})]})})]})}const Checkbox=reactExports.forwardRef(({label:e,error:t,className:n="",id:Ee,...Re},Ce)=>{const Te=Ee||Re.name||Math.random().toString(36).substr(2,9);return jsxRuntimeExports.jsxs("div",{className:cn$2("flex items-start group",n),children:[jsxRuntimeExports.jsxs("label",{htmlFor:Te,className:"flex items-center h-5 relative cursor-pointer",children:[jsxRuntimeExports.jsx("input",{ref:Ce,id:Te,type:"checkbox",className:"peer sr-only",...Re}),jsxRuntimeExports.jsx("div",{className:cn$2("w-5 h-5 rounded-md border border-border bg-bg-card transition-all duration-200 ease-in-out","peer-focus:ring-2 peer-focus:ring-brand-primary peer-focus:ring-offset-1 peer-focus:ring-offset-bg-main","peer-checked:bg-brand-primary peer-checked:border-brand-primary peer-checked:text-white","peer-checked:[&_svg]:opacity-100 peer-checked:[&_svg]:scale-100","peer-disabled:opacity-50 peer-disabled:cursor-not-allowed","flex items-center justify-center shadow-sm"),children:jsxRuntimeExports.jsx(Check,{size:12,strokeWidth:3,className:"opacity-0 scale-50 transition-all duration-200"})})]}),e&&jsxRuntimeExports.jsxs("div",{className:"ml-2.5 text-sm select-none",children:[jsxRuntimeExports.jsx("label",{htmlFor:Te,className:"font-medium text-text-primary cursor-pointer group-hover:text-brand-primary transition-colors",children:e}),t&&jsxRuntimeExports.jsx("p",{className:"text-xs text-status-error mt-1",children:t})]})]})});Checkbox.displayName="Checkbox";function ApplyLeaveModal({isOpen:e,onClose:t}){const[n,Ee]=reactExports.useState({type:"",startDate:"",endDate:"",reason:"",isHalfDay:!1}),[Re,Ce]=reactExports.useState([]),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(""),Be=$e=>{const{name:He,value:Ue,type:Ve}=$e.target;if(Ve==="checkbox"){const We=$e.target.checked;Ee(qe=>({...qe,[He]:We,endDate:He==="isHalfDay"&&We?qe.startDate:qe.endDate}))}else Ee(We=>{const qe={...We,[He]:Ue};return We.isHalfDay&&He==="startDate"&&(qe.endDate=Ue),qe})};reactExports.useEffect(()=>{e&&(console.log("DEBUG: Fetching leave stats..."),apiService.getLeaveStats().then($e=>{if(console.log("DEBUG: getLeaveStats response:",$e),$e&&$e.stats){const He=$e.stats.map(Ue=>Ue.type);console.log("DEBUG: Extracted Leave Types:",He),Ce(He),He.length>0&&!He.includes(n.type)&&Ee(Ue=>({...Ue,type:He[0]}))}else if($e&&$e.leavePolicy){const He=Object.keys($e.leavePolicy);Ce(He),He.length>0&&!He.includes(n.type)&&Ee(Ue=>({...Ue,type:He[0]}))}else console.log("DEBUG: No stats or leavePolicy in data",$e)}))},[e]);const ze=async $e=>{$e.preventDefault(),Me(!0),Oe("");try{await apiService.applyLeave(n),t(),window.location.reload()}catch(He){Oe(He.message||"Failed to submit leave request")}finally{Me(!1)}};return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:t,title:"Apply for Leave",maxWidth:"max-w-md",footer:jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:t,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>ze({preventDefault:()=>{}}),disabled:Te,isLoading:Te,children:"Submit Application"})]}),children:jsxRuntimeExports.jsxs("form",{onSubmit:ze,className:"space-y-4",children:[De&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-status-error/10 text-status-error text-sm rounded-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(X$1,{size:14})," ",De]}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:jsxRuntimeExports.jsx(Select,{label:"Leave Type",value:n.type,onChange:$e=>Ee({...n,type:$e}),options:Re.map($e=>({value:$e,label:$e}))})}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx(Checkbox,{id:"isHalfDay",name:"isHalfDay",checked:n.isHalfDay,onChange:Be,label:"Half Day Leave"})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx("div",{className:"space-y-1",children:jsxRuntimeExports.jsx(DatePicker,{label:"Start Date",name:"startDate",value:n.startDate,onChange:Be,required:!0})}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:jsxRuntimeExports.jsx(DatePicker,{label:"End Date",name:"endDate",value:n.endDate,onChange:Be,required:!0,disabled:n.isHalfDay,className:n.isHalfDay?"opacity-50 cursor-not-allowed":""})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-text-secondary uppercase",children:"Reason"}),jsxRuntimeExports.jsx(Textarea,{name:"reason",value:n.reason,onChange:Be,required:!0,rows:3,placeholder:"Please provide a reason for your leave...",className:"bg-bg-card"})]})]})})}var isCheckBoxInput=e=>e.type==="checkbox",isDateObject=e=>e instanceof Date,isNullOrUndefined=e=>e==null;const isObjectType=e=>typeof e=="object";var isObject=e=>!isNullOrUndefined(e)&&!Array.isArray(e)&&isObjectType(e)&&!isDateObject(e),getEventValue=e=>isObject(e)&&e.target?isCheckBoxInput(e.target)?e.target.checked:e.target.value:e,getNodeParentName=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,isNameInFieldArray=(e,t)=>e.has(getNodeParentName(t)),isPlainObject$1=e=>{const t=e.constructor&&e.constructor.prototype;return isObject(t)&&t.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(e){let t;const n=Array.isArray(e),Ee=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(isWeb&&(e instanceof Blob||Ee))&&(n||isObject(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!isPlainObject$1(e))t=e;else for(const Re in e)e.hasOwnProperty(Re)&&(t[Re]=cloneObject(e[Re]));else return e;return t}var isKey=e=>/^\w*$/.test(e),isUndefined=e=>e===void 0,compact=e=>Array.isArray(e)?e.filter(Boolean):[],stringToPath=e=>compact(e.replace(/["|']|\]/g,"").split(/\.|\[/)),get=(e,t,n)=>{if(!t||!isObject(e))return n;const Ee=(isKey(t)?[t]:stringToPath(t)).reduce((Re,Ce)=>isNullOrUndefined(Re)?Re:Re[Ce],e);return isUndefined(Ee)||Ee===e?isUndefined(e[t])?n:e[t]:Ee},isBoolean=e=>typeof e=="boolean",set=(e,t,n)=>{let Ee=-1;const Re=isKey(t)?[t]:stringToPath(t),Ce=Re.length,Te=Ce-1;for(;++Ee<Ce;){const Me=Re[Ee];let De=n;if(Ee!==Te){const Oe=e[Me];De=isObject(Oe)||Array.isArray(Oe)?Oe:isNaN(+Re[Ee+1])?{}:[]}if(Me==="__proto__"||Me==="constructor"||Me==="prototype")return;e[Me]=De,e=e[Me]}};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React4.createContext(null);HookFormContext.displayName="HookFormContext";const useFormContext=()=>React4.useContext(HookFormContext);var getProxyFormState=(e,t,n,Ee=!0)=>{const Re={defaultValues:t._defaultValues};for(const Ce in e)Object.defineProperty(Re,Ce,{get:()=>{const Te=Ce;return t._proxyFormState[Te]!==VALIDATION_MODE.all&&(t._proxyFormState[Te]=!Ee||VALIDATION_MODE.all),n&&(n[Te]=!0),e[Te]}});return Re};const useIsomorphicLayoutEffect$1=typeof window<"u"?React4.useLayoutEffect:React4.useEffect;function useFormState(e){const t=useFormContext(),{control:n=t.control,disabled:Ee,name:Re,exact:Ce}=e||{},[Te,Me]=React4.useState(n._formState),De=React4.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return useIsomorphicLayoutEffect$1(()=>n._subscribe({name:Re,formState:De.current,exact:Ce,callback:Oe=>{!Ee&&Me({...n._formState,...Oe})}}),[Re,Ee,Ce]),React4.useEffect(()=>{De.current.isValid&&n._setValid(!0)},[n]),React4.useMemo(()=>getProxyFormState(Te,n,De.current,!1),[Te,n])}var isString=e=>typeof e=="string",generateWatchOutput=(e,t,n,Ee,Re)=>isString(e)?(Ee&&t.watch.add(e),get(n,e,Re)):Array.isArray(e)?e.map(Ce=>(Ee&&t.watch.add(Ce),get(n,Ce))):(Ee&&(t.watchAll=!0),n),isPrimitive=e=>isNullOrUndefined(e)||!isObjectType(e);function deepEqual$1(e,t,n=new WeakSet){if(isPrimitive(e)||isPrimitive(t))return Object.is(e,t);if(isDateObject(e)&&isDateObject(t))return e.getTime()===t.getTime();const Ee=Object.keys(e),Re=Object.keys(t);if(Ee.length!==Re.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const Ce of Ee){const Te=e[Ce];if(!Re.includes(Ce))return!1;if(Ce!=="ref"){const Me=t[Ce];if(isDateObject(Te)&&isDateObject(Me)||isObject(Te)&&isObject(Me)||Array.isArray(Te)&&Array.isArray(Me)?!deepEqual$1(Te,Me,n):!Object.is(Te,Me))return!1}}return!0}function useWatch(e){const t=useFormContext(),{control:n=t.control,name:Ee,defaultValue:Re,disabled:Ce,exact:Te,compute:Me}=e||{},De=React4.useRef(Re),Oe=React4.useRef(Me),Be=React4.useRef(void 0),ze=React4.useRef(n),$e=React4.useRef(Ee);Oe.current=Me;const[He,Ue]=React4.useState(()=>{const Ke=n._getWatch(Ee,De.current);return Oe.current?Oe.current(Ke):Ke}),Ve=React4.useCallback(Ke=>{const Xe=generateWatchOutput(Ee,n._names,Ke||n._formValues,!1,De.current);return Oe.current?Oe.current(Xe):Xe},[n._formValues,n._names,Ee]),We=React4.useCallback(Ke=>{if(!Ce){const Xe=generateWatchOutput(Ee,n._names,Ke||n._formValues,!1,De.current);if(Oe.current){const Ze=Oe.current(Xe);deepEqual$1(Ze,Be.current)||(Ue(Ze),Be.current=Ze)}else Ue(Xe)}},[n._formValues,n._names,Ce,Ee]);useIsomorphicLayoutEffect$1(()=>((ze.current!==n||!deepEqual$1($e.current,Ee))&&(ze.current=n,$e.current=Ee,We()),n._subscribe({name:Ee,formState:{values:!0},exact:Te,callback:Ke=>{We(Ke.values)}})),[n,Te,Ee,We]),React4.useEffect(()=>n._removeUnmounted());const qe=ze.current!==n,Ge=$e.current,Ye=React4.useMemo(()=>{if(Ce)return null;const Ke=!qe&&!deepEqual$1(Ge,Ee);return qe||Ke?Ve():null},[Ce,qe,Ee,Ge,Ve]);return Ye!==null?Ye:He}function useController(e){const t=useFormContext(),{name:n,disabled:Ee,control:Re=t.control,shouldUnregister:Ce,defaultValue:Te,exact:Me=!0}=e,De=isNameInFieldArray(Re._names.array,n),Oe=React4.useMemo(()=>get(Re._formValues,n,get(Re._defaultValues,n,Te)),[Re,n,Te]),Be=useWatch({control:Re,name:n,defaultValue:Oe,exact:Me}),ze=useFormState({control:Re,name:n,exact:Me}),$e=React4.useRef(e),He=React4.useRef(void 0),Ue=React4.useRef(Re.register(n,{...e.rules,value:Be,...isBoolean(e.disabled)?{disabled:e.disabled}:{}}));$e.current=e;const Ve=React4.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get(ze.errors,n)},isDirty:{enumerable:!0,get:()=>!!get(ze.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!get(ze.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!get(ze.validatingFields,n)},error:{enumerable:!0,get:()=>get(ze.errors,n)}}),[ze,n]),We=React4.useCallback(Ke=>Ue.current.onChange({target:{value:getEventValue(Ke),name:n},type:EVENTS.CHANGE}),[n]),qe=React4.useCallback(()=>Ue.current.onBlur({target:{value:get(Re._formValues,n),name:n},type:EVENTS.BLUR}),[n,Re._formValues]),Ge=React4.useCallback(Ke=>{const Xe=get(Re._fields,n);Xe&&Ke&&(Xe._f.ref={focus:()=>Ke.focus&&Ke.focus(),select:()=>Ke.select&&Ke.select(),setCustomValidity:Ze=>Ke.setCustomValidity(Ze),reportValidity:()=>Ke.reportValidity()})},[Re._fields,n]),Ye=React4.useMemo(()=>({name:n,value:Be,...isBoolean(Ee)||ze.disabled?{disabled:ze.disabled||Ee}:{},onChange:We,onBlur:qe,ref:Ge}),[n,Ee,ze.disabled,We,qe,Ge,Be]);return React4.useEffect(()=>{const Ke=Re._options.shouldUnregister||Ce,Xe=He.current;Xe&&Xe!==n&&!De&&Re.unregister(Xe),Re.register(n,{...$e.current.rules,...isBoolean($e.current.disabled)?{disabled:$e.current.disabled}:{}});const Ze=(er,St)=>{const ar=get(Re._fields,er);ar&&ar._f&&(ar._f.mount=St)};if(Ze(n,!0),Ke){const er=cloneObject(get(Re._options.defaultValues,n,$e.current.defaultValue));set(Re._defaultValues,n,er),isUndefined(get(Re._formValues,n))&&set(Re._formValues,n,er)}return!De&&Re.register(n),He.current=n,()=>{(De?Ke&&!Re._state.action:Ke)?Re.unregister(n):Ze(n,!1)}},[n,Re,De,Ce]),React4.useEffect(()=>{Re._setDisabledField({disabled:Ee,name:n})},[Ee,n,Re]),React4.useMemo(()=>({field:Ye,formState:ze,fieldState:Ve}),[Ye,ze,Ve])}const Controller=e=>e.render(useController(e));var appendErrors=(e,t,n,Ee,Re)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[Ee]:Re||!0}}:{},convertToArrayPayload=e=>Array.isArray(e)?e:[e],createSubject=()=>{let e=[];return{get observers(){return e},next:Re=>{for(const Ce of e)Ce.next&&Ce.next(Re)},subscribe:Re=>(e.push(Re),{unsubscribe:()=>{e=e.filter(Ce=>Ce!==Re)}}),unsubscribe:()=>{e=[]}}};function extractFormValues(e,t){const n={};for(const Ee in e)if(e.hasOwnProperty(Ee)){const Re=e[Ee],Ce=t[Ee];if(Re&&isObject(Re)&&Ce){const Te=extractFormValues(Re,Ce);isObject(Te)&&(n[Ee]=Te)}else e[Ee]&&(n[Ee]=Ce)}return n}var isEmptyObject$1=e=>isObject(e)&&!Object.keys(e).length,isFileInput=e=>e.type==="file",isFunction$1=e=>typeof e=="function",isHTMLElement=e=>{if(!isWeb)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},isMultipleSelect=e=>e.type==="select-multiple",isRadioInput=e=>e.type==="radio",isRadioOrCheckbox=e=>isRadioInput(e)||isCheckBoxInput(e),live=e=>isHTMLElement(e)&&e.isConnected;function baseGet(e,t){const n=t.slice(0,-1).length;let Ee=0;for(;Ee<n;)e=isUndefined(e)?Ee++:e[t[Ee++]];return e}function isEmptyArray(e){for(const t in e)if(e.hasOwnProperty(t)&&!isUndefined(e[t]))return!1;return!0}function unset(e,t){const n=Array.isArray(t)?t:isKey(t)?[t]:stringToPath(t),Ee=n.length===1?e:baseGet(e,n),Re=n.length-1,Ce=n[Re];return Ee&&delete Ee[Ce],Re!==0&&(isObject(Ee)&&isEmptyObject$1(Ee)||Array.isArray(Ee)&&isEmptyArray(Ee))&&unset(e,n.slice(0,-1)),e}var objectHasFunction=e=>{for(const t in e)if(isFunction$1(e[t]))return!0;return!1};function isTraversable(e){return Array.isArray(e)||isObject(e)&&!objectHasFunction(e)}function markFieldsDirty(e,t={}){for(const n in e){const Ee=e[n];isTraversable(Ee)?(t[n]=Array.isArray(Ee)?[]:{},markFieldsDirty(Ee,t[n])):isUndefined(Ee)||(t[n]=!0)}return t}function getDirtyFields(e,t,n){n||(n=markFieldsDirty(t));for(const Ee in e){const Re=e[Ee];if(isTraversable(Re))isUndefined(t)||isPrimitive(n[Ee])?n[Ee]=markFieldsDirty(Re,Array.isArray(Re)?[]:{}):getDirtyFields(Re,isNullOrUndefined(t)?{}:t[Ee],n[Ee]);else{const Ce=t[Ee];n[Ee]=!deepEqual$1(Re,Ce)}}return n}const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!isUndefined(e[0].attributes.value)?isUndefined(e[0].value)||e[0].value===""?validResult:{value:e[0].value,isValid:!0}:validResult:defaultResult}return defaultResult},getFieldValueAs=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:Ee})=>isUndefined(e)?e:t?e===""?NaN:e&&+e:n&&isString(e)?new Date(e):Ee?Ee(e):e;const defaultReturn={isValid:!1,value:null};var getRadioValue=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,defaultReturn):defaultReturn;function getFieldValue(e){const t=e.ref;return isFileInput(t)?t.files:isRadioInput(t)?getRadioValue(e.refs).value:isMultipleSelect(t)?[...t.selectedOptions].map(({value:n})=>n):isCheckBoxInput(t)?getCheckboxValue(e.refs).value:getFieldValueAs(isUndefined(t.value)?e.ref.value:t.value,e)}var getResolverOptions=(e,t,n,Ee)=>{const Re={};for(const Ce of e){const Te=get(t,Ce);Te&&set(Re,Ce,Te._f)}return{criteriaMode:n,names:[...e],fields:Re,shouldUseNativeValidation:Ee}},isRegex=e=>e instanceof RegExp,getRuleValue=e=>isUndefined(e)?e:isRegex(e)?e.source:isObject(e)?isRegex(e.value)?e.value.source:e.value:e,getValidationModes=e=>({isOnSubmit:!e||e===VALIDATION_MODE.onSubmit,isOnBlur:e===VALIDATION_MODE.onBlur,isOnChange:e===VALIDATION_MODE.onChange,isOnAll:e===VALIDATION_MODE.all,isOnTouch:e===VALIDATION_MODE.onTouched});const ASYNC_FUNCTION="AsyncFunction";var hasPromiseValidation=e=>!!e&&!!e.validate&&!!(isFunction$1(e.validate)&&e.validate.constructor.name===ASYNC_FUNCTION||isObject(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===ASYNC_FUNCTION)),hasValidation=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),isWatched=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(Ee=>e.startsWith(Ee)&&/^\.\w+/.test(e.slice(Ee.length))));const iterateFieldsByAction=(e,t,n,Ee)=>{for(const Re of n||Object.keys(e)){const Ce=get(e,Re);if(Ce){const{_f:Te,...Me}=Ce;if(Te){if(Te.refs&&Te.refs[0]&&t(Te.refs[0],Re)&&!Ee)return!0;if(Te.ref&&t(Te.ref,Te.name)&&!Ee)return!0;if(iterateFieldsByAction(Me,t))break}else if(isObject(Me)&&iterateFieldsByAction(Me,t))break}}};function schemaErrorLookup(e,t,n){const Ee=get(e,n);if(Ee||isKey(n))return{error:Ee,name:n};const Re=n.split(".");for(;Re.length;){const Ce=Re.join("."),Te=get(t,Ce),Me=get(e,Ce);if(Te&&!Array.isArray(Te)&&n!==Ce)return{name:n};if(Me&&Me.type)return{name:Ce,error:Me};if(Me&&Me.root&&Me.root.type)return{name:`${Ce}.root`,error:Me.root};Re.pop()}return{name:n}}var shouldRenderFormState=(e,t,n,Ee)=>{n(e);const{name:Re,...Ce}=e;return isEmptyObject$1(Ce)||Object.keys(Ce).length>=Object.keys(t).length||Object.keys(Ce).find(Te=>t[Te]===(!Ee||VALIDATION_MODE.all))},shouldSubscribeByName=(e,t,n)=>!e||!t||e===t||convertToArrayPayload(e).some(Ee=>Ee&&(n?Ee===t:Ee.startsWith(t)||t.startsWith(Ee))),skipValidation=(e,t,n,Ee,Re)=>Re.isOnAll?!1:!n&&Re.isOnTouch?!(t||e):(n?Ee.isOnBlur:Re.isOnBlur)?!e:(n?Ee.isOnChange:Re.isOnChange)?e:!0,unsetEmptyArray=(e,t)=>!compact(get(e,t)).length&&unset(e,t),updateFieldArrayRootError=(e,t,n)=>{const Ee=convertToArrayPayload(get(e,n));return set(Ee,"root",t[n]),set(e,n,Ee),e};function getValidateError(e,t,n="validate"){if(isString(e)||Array.isArray(e)&&e.every(isString)||isBoolean(e)&&!e)return{type:n,message:isString(e)?e:"",ref:t}}var getValueAndMessage=e=>isObject(e)&&!isRegex(e)?e:{value:e,message:""},validateField=async(e,t,n,Ee,Re,Ce)=>{const{ref:Te,refs:Me,required:De,maxLength:Oe,minLength:Be,min:ze,max:$e,pattern:He,validate:Ue,name:Ve,valueAsNumber:We,mount:qe}=e._f,Ge=get(n,Ve);if(!qe||t.has(Ve))return{};const Ye=Me?Me[0]:Te,Ke=dr=>{Re&&Ye.reportValidity&&(Ye.setCustomValidity(isBoolean(dr)?"":dr||""),Ye.reportValidity())},Xe={},Ze=isRadioInput(Te),er=isCheckBoxInput(Te),St=Ze||er,ar=(We||isFileInput(Te))&&isUndefined(Te.value)&&isUndefined(Ge)||isHTMLElement(Te)&&Te.value===""||Ge===""||Array.isArray(Ge)&&!Ge.length,hr=appendErrors.bind(null,Ve,Ee,Xe),ur=(dr,vr,yr,br=INPUT_VALIDATION_RULES.maxLength,lr=INPUT_VALIDATION_RULES.minLength)=>{const cr=dr?vr:yr;Xe[Ve]={type:dr?br:lr,message:cr,ref:Te,...hr(dr?br:lr,cr)}};if(Ce?!Array.isArray(Ge)||!Ge.length:De&&(!St&&(ar||isNullOrUndefined(Ge))||isBoolean(Ge)&&!Ge||er&&!getCheckboxValue(Me).isValid||Ze&&!getRadioValue(Me).isValid)){const{value:dr,message:vr}=isString(De)?{value:!!De,message:De}:getValueAndMessage(De);if(dr&&(Xe[Ve]={type:INPUT_VALIDATION_RULES.required,message:vr,ref:Ye,...hr(INPUT_VALIDATION_RULES.required,vr)},!Ee))return Ke(vr),Xe}if(!ar&&(!isNullOrUndefined(ze)||!isNullOrUndefined($e))){let dr,vr;const yr=getValueAndMessage($e),br=getValueAndMessage(ze);if(!isNullOrUndefined(Ge)&&!isNaN(Ge)){const lr=Te.valueAsNumber||Ge&&+Ge;isNullOrUndefined(yr.value)||(dr=lr>yr.value),isNullOrUndefined(br.value)||(vr=lr<br.value)}else{const lr=Te.valueAsDate||new Date(Ge),cr=mr=>new Date(new Date().toDateString()+" "+mr),rr=Te.type=="time",pr=Te.type=="week";isString(yr.value)&&Ge&&(dr=rr?cr(Ge)>cr(yr.value):pr?Ge>yr.value:lr>new Date(yr.value)),isString(br.value)&&Ge&&(vr=rr?cr(Ge)<cr(br.value):pr?Ge<br.value:lr<new Date(br.value))}if((dr||vr)&&(ur(!!dr,yr.message,br.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!Ee))return Ke(Xe[Ve].message),Xe}if((Oe||Be)&&!ar&&(isString(Ge)||Ce&&Array.isArray(Ge))){const dr=getValueAndMessage(Oe),vr=getValueAndMessage(Be),yr=!isNullOrUndefined(dr.value)&&Ge.length>+dr.value,br=!isNullOrUndefined(vr.value)&&Ge.length<+vr.value;if((yr||br)&&(ur(yr,dr.message,vr.message),!Ee))return Ke(Xe[Ve].message),Xe}if(He&&!ar&&isString(Ge)){const{value:dr,message:vr}=getValueAndMessage(He);if(isRegex(dr)&&!Ge.match(dr)&&(Xe[Ve]={type:INPUT_VALIDATION_RULES.pattern,message:vr,ref:Te,...hr(INPUT_VALIDATION_RULES.pattern,vr)},!Ee))return Ke(vr),Xe}if(Ue){if(isFunction$1(Ue)){const dr=await Ue(Ge,n),vr=getValidateError(dr,Ye);if(vr&&(Xe[Ve]={...vr,...hr(INPUT_VALIDATION_RULES.validate,vr.message)},!Ee))return Ke(vr.message),Xe}else if(isObject(Ue)){let dr={};for(const vr in Ue){if(!isEmptyObject$1(dr)&&!Ee)break;const yr=getValidateError(await Ue[vr](Ge,n),Ye,vr);yr&&(dr={...yr,...hr(vr,yr.message)},Ke(yr.message),Ee&&(Xe[Ve]=dr))}if(!isEmptyObject$1(dr)&&(Xe[Ve]={ref:Ye,...dr},!Ee))return Xe}}return Ke(!0),Xe};const defaultOptions={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(e={}){let t={...defaultOptions,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:isFunction$1(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},Ee={},Re=isObject(t.defaultValues)||isObject(t.values)?cloneObject(t.defaultValues||t.values)||{}:{},Ce=t.shouldUnregister?{}:cloneObject(Re),Te={action:!1,mount:!1,watch:!1},Me={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},De,Oe=0;const Be={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let ze={...Be};const $e={array:createSubject(),state:createSubject()},He=t.criteriaMode===VALIDATION_MODE.all,Ue=_r=>Lr=>{clearTimeout(Oe),Oe=setTimeout(_r,Lr)},Ve=async _r=>{if(!t.disabled&&(Be.isValid||ze.isValid||_r)){const Lr=t.resolver?isEmptyObject$1((await er()).errors):await ar(Ee,!0);Lr!==n.isValid&&$e.state.next({isValid:Lr})}},We=(_r,Lr)=>{!t.disabled&&(Be.isValidating||Be.validatingFields||ze.isValidating||ze.validatingFields)&&((_r||Array.from(Me.mount)).forEach(Or=>{Or&&(Lr?set(n.validatingFields,Or,Lr):unset(n.validatingFields,Or))}),$e.state.next({validatingFields:n.validatingFields,isValidating:!isEmptyObject$1(n.validatingFields)}))},qe=(_r,Lr=[],Or,tn,sn=!0,en=!0)=>{if(tn&&Or&&!t.disabled){if(Te.action=!0,en&&Array.isArray(get(Ee,_r))){const fn=Or(get(Ee,_r),tn.argA,tn.argB);sn&&set(Ee,_r,fn)}if(en&&Array.isArray(get(n.errors,_r))){const fn=Or(get(n.errors,_r),tn.argA,tn.argB);sn&&set(n.errors,_r,fn),unsetEmptyArray(n.errors,_r)}if((Be.touchedFields||ze.touchedFields)&&en&&Array.isArray(get(n.touchedFields,_r))){const fn=Or(get(n.touchedFields,_r),tn.argA,tn.argB);sn&&set(n.touchedFields,_r,fn)}(Be.dirtyFields||ze.dirtyFields)&&(n.dirtyFields=getDirtyFields(Re,Ce)),$e.state.next({name:_r,isDirty:ur(_r,Lr),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else set(Ce,_r,Lr)},Ge=(_r,Lr)=>{set(n.errors,_r,Lr),$e.state.next({errors:n.errors})},Ye=_r=>{n.errors=_r,$e.state.next({errors:n.errors,isValid:!1})},Ke=(_r,Lr,Or,tn)=>{const sn=get(Ee,_r);if(sn){const en=get(Ce,_r,isUndefined(Or)?get(Re,_r):Or);isUndefined(en)||tn&&tn.defaultChecked||Lr?set(Ce,_r,Lr?en:getFieldValue(sn._f)):yr(_r,en),Te.mount&&!Te.action&&Ve()}},Xe=(_r,Lr,Or,tn,sn)=>{let en=!1,fn=!1;const Sn={name:_r};if(!t.disabled){if(!Or||tn){(Be.isDirty||ze.isDirty)&&(fn=n.isDirty,n.isDirty=Sn.isDirty=ur(),en=fn!==Sn.isDirty);const Rn=deepEqual$1(get(Re,_r),Lr);fn=!!get(n.dirtyFields,_r),Rn?unset(n.dirtyFields,_r):set(n.dirtyFields,_r,!0),Sn.dirtyFields=n.dirtyFields,en=en||(Be.dirtyFields||ze.dirtyFields)&&fn!==!Rn}if(Or){const Rn=get(n.touchedFields,_r);Rn||(set(n.touchedFields,_r,Or),Sn.touchedFields=n.touchedFields,en=en||(Be.touchedFields||ze.touchedFields)&&Rn!==Or)}en&&sn&&$e.state.next(Sn)}return en?Sn:{}},Ze=(_r,Lr,Or,tn)=>{const sn=get(n.errors,_r),en=(Be.isValid||ze.isValid)&&isBoolean(Lr)&&n.isValid!==Lr;if(t.delayError&&Or?(De=Ue(()=>Ge(_r,Or)),De(t.delayError)):(clearTimeout(Oe),De=null,Or?set(n.errors,_r,Or):unset(n.errors,_r)),(Or?!deepEqual$1(sn,Or):sn)||!isEmptyObject$1(tn)||en){const fn={...tn,...en&&isBoolean(Lr)?{isValid:Lr}:{},errors:n.errors,name:_r};n={...n,...fn},$e.state.next(fn)}},er=async _r=>{We(_r,!0);const Lr=await t.resolver(Ce,t.context,getResolverOptions(_r||Me.mount,Ee,t.criteriaMode,t.shouldUseNativeValidation));return We(_r),Lr},St=async _r=>{const{errors:Lr}=await er(_r);if(_r)for(const Or of _r){const tn=get(Lr,Or);tn?set(n.errors,Or,tn):unset(n.errors,Or)}else n.errors=Lr;return Lr},ar=async(_r,Lr,Or={valid:!0})=>{for(const tn in _r){const sn=_r[tn];if(sn){const{_f:en,...fn}=sn;if(en){const Sn=Me.array.has(en.name),Rn=sn._f&&hasPromiseValidation(sn._f);Rn&&Be.validatingFields&&We([en.name],!0);const jn=await validateField(sn,Me.disabled,Ce,He,t.shouldUseNativeValidation&&!Lr,Sn);if(Rn&&Be.validatingFields&&We([en.name]),jn[en.name]&&(Or.valid=!1,Lr))break;!Lr&&(get(jn,en.name)?Sn?updateFieldArrayRootError(n.errors,jn,en.name):set(n.errors,en.name,jn[en.name]):unset(n.errors,en.name))}!isEmptyObject$1(fn)&&await ar(fn,Lr,Or)}}return Or.valid},hr=()=>{for(const _r of Me.unMount){const Lr=get(Ee,_r);Lr&&(Lr._f.refs?Lr._f.refs.every(Or=>!live(Or)):!live(Lr._f.ref))&&Mr(_r)}Me.unMount=new Set},ur=(_r,Lr)=>!t.disabled&&(_r&&Lr&&set(Ce,_r,Lr),!deepEqual$1(mr(),Re)),dr=(_r,Lr,Or)=>generateWatchOutput(_r,Me,{...Te.mount?Ce:isUndefined(Lr)?Re:isString(_r)?{[_r]:Lr}:Lr},Or,Lr),vr=_r=>compact(get(Te.mount?Ce:Re,_r,t.shouldUnregister?get(Re,_r,[]):[])),yr=(_r,Lr,Or={})=>{const tn=get(Ee,_r);let sn=Lr;if(tn){const en=tn._f;en&&(!en.disabled&&set(Ce,_r,getFieldValueAs(Lr,en)),sn=isHTMLElement(en.ref)&&isNullOrUndefined(Lr)?"":Lr,isMultipleSelect(en.ref)?[...en.ref.options].forEach(fn=>fn.selected=sn.includes(fn.value)):en.refs?isCheckBoxInput(en.ref)?en.refs.forEach(fn=>{(!fn.defaultChecked||!fn.disabled)&&(Array.isArray(sn)?fn.checked=!!sn.find(Sn=>Sn===fn.value):fn.checked=sn===fn.value||!!sn)}):en.refs.forEach(fn=>fn.checked=fn.value===sn):isFileInput(en.ref)?en.ref.value="":(en.ref.value=sn,en.ref.type||$e.state.next({name:_r,values:cloneObject(Ce)})))}(Or.shouldDirty||Or.shouldTouch)&&Xe(_r,sn,Or.shouldTouch,Or.shouldDirty,!0),Or.shouldValidate&&pr(_r)},br=(_r,Lr,Or)=>{for(const tn in Lr){if(!Lr.hasOwnProperty(tn))return;const sn=Lr[tn],en=_r+"."+tn,fn=get(Ee,en);(Me.array.has(_r)||isObject(sn)||fn&&!fn._f)&&!isDateObject(sn)?br(en,sn,Or):yr(en,sn,Or)}},lr=(_r,Lr,Or={})=>{const tn=get(Ee,_r),sn=Me.array.has(_r),en=cloneObject(Lr);set(Ce,_r,en),sn?($e.array.next({name:_r,values:cloneObject(Ce)}),(Be.isDirty||Be.dirtyFields||ze.isDirty||ze.dirtyFields)&&Or.shouldDirty&&$e.state.next({name:_r,dirtyFields:getDirtyFields(Re,Ce),isDirty:ur(_r,en)})):tn&&!tn._f&&!isNullOrUndefined(en)?br(_r,en,Or):yr(_r,en,Or),isWatched(_r,Me)&&$e.state.next({...n,name:_r}),$e.state.next({name:Te.mount?_r:void 0,values:cloneObject(Ce)})},cr=async _r=>{Te.mount=!0;const Lr=_r.target;let Or=Lr.name,tn=!0;const sn=get(Ee,Or),en=Rn=>{tn=Number.isNaN(Rn)||isDateObject(Rn)&&isNaN(Rn.getTime())||deepEqual$1(Rn,get(Ce,Or,Rn))},fn=getValidationModes(t.mode),Sn=getValidationModes(t.reValidateMode);if(sn){let Rn,jn;const On=Lr.type?getFieldValue(sn._f):getEventValue(_r),Nn=_r.type===EVENTS.BLUR||_r.type===EVENTS.FOCUS_OUT,js=!hasValidation(sn._f)&&!t.resolver&&!get(n.errors,Or)&&!sn._f.deps||skipValidation(Nn,get(n.touchedFields,Or),n.isSubmitted,Sn,fn),qn=isWatched(Or,Me,Nn);set(Ce,Or,On),Nn?(!Lr||!Lr.readOnly)&&(sn._f.onBlur&&sn._f.onBlur(_r),De&&De(0)):sn._f.onChange&&sn._f.onChange(_r);const Gn=Xe(Or,On,Nn),Xn=!isEmptyObject$1(Gn)||qn;if(!Nn&&$e.state.next({name:Or,type:_r.type,values:cloneObject(Ce)}),js)return(Be.isValid||ze.isValid)&&(t.mode==="onBlur"?Nn&&Ve():Nn||Ve()),Xn&&$e.state.next({name:Or,...qn?{}:Gn});if(!Nn&&qn&&$e.state.next({...n}),t.resolver){const{errors:xs}=await er([Or]);if(en(On),tn){const Bn=schemaErrorLookup(n.errors,Ee,Or),fs=schemaErrorLookup(xs,Ee,Bn.name||Or);Rn=fs.error,Or=fs.name,jn=isEmptyObject$1(xs)}}else We([Or],!0),Rn=(await validateField(sn,Me.disabled,Ce,He,t.shouldUseNativeValidation))[Or],We([Or]),en(On),tn&&(Rn?jn=!1:(Be.isValid||ze.isValid)&&(jn=await ar(Ee,!0)));tn&&(sn._f.deps&&(!Array.isArray(sn._f.deps)||sn._f.deps.length>0)&&pr(sn._f.deps),Ze(Or,jn,Rn,Gn))}},rr=(_r,Lr)=>{if(get(n.errors,Lr)&&_r.focus)return _r.focus(),1},pr=async(_r,Lr={})=>{let Or,tn;const sn=convertToArrayPayload(_r);if(t.resolver){const en=await St(isUndefined(_r)?_r:sn);Or=isEmptyObject$1(en),tn=_r?!sn.some(fn=>get(en,fn)):Or}else _r?(tn=(await Promise.all(sn.map(async en=>{const fn=get(Ee,en);return await ar(fn&&fn._f?{[en]:fn}:fn)}))).every(Boolean),!(!tn&&!n.isValid)&&Ve()):tn=Or=await ar(Ee);return $e.state.next({...!isString(_r)||(Be.isValid||ze.isValid)&&Or!==n.isValid?{}:{name:_r},...t.resolver||!_r?{isValid:Or}:{},errors:n.errors}),Lr.shouldFocus&&!tn&&iterateFieldsByAction(Ee,rr,_r?sn:Me.mount),tn},mr=(_r,Lr)=>{let Or={...Te.mount?Ce:Re};return Lr&&(Or=extractFormValues(Lr.dirtyFields?n.dirtyFields:n.touchedFields,Or)),isUndefined(_r)?Or:isString(_r)?get(Or,_r):_r.map(tn=>get(Or,tn))},ir=(_r,Lr)=>({invalid:!!get((Lr||n).errors,_r),isDirty:!!get((Lr||n).dirtyFields,_r),error:get((Lr||n).errors,_r),isValidating:!!get(n.validatingFields,_r),isTouched:!!get((Lr||n).touchedFields,_r)}),nr=_r=>{_r&&convertToArrayPayload(_r).forEach(Lr=>unset(n.errors,Lr)),$e.state.next({errors:_r?n.errors:{}})},gr=(_r,Lr,Or)=>{const tn=(get(Ee,_r,{_f:{}})._f||{}).ref,sn=get(n.errors,_r)||{},{ref:en,message:fn,type:Sn,...Rn}=sn;set(n.errors,_r,{...Rn,...Lr,ref:tn}),$e.state.next({name:_r,errors:n.errors,isValid:!1}),Or&&Or.shouldFocus&&tn&&tn.focus&&tn.focus()},Er=(_r,Lr)=>isFunction$1(_r)?$e.state.subscribe({next:Or=>"values"in Or&&_r(dr(void 0,Lr),Or)}):dr(_r,Lr,!0),Cr=_r=>$e.state.subscribe({next:Lr=>{shouldSubscribeByName(_r.name,Lr.name,_r.exact)&&shouldRenderFormState(Lr,_r.formState||Be,mn,_r.reRenderRoot)&&_r.callback({values:{...Ce},...n,...Lr,defaultValues:Re})}}).unsubscribe,Nr=_r=>(Te.mount=!0,ze={...ze,..._r.formState},Cr({..._r,formState:ze})),Mr=(_r,Lr={})=>{for(const Or of _r?convertToArrayPayload(_r):Me.mount)Me.mount.delete(Or),Me.array.delete(Or),Lr.keepValue||(unset(Ee,Or),unset(Ce,Or)),!Lr.keepError&&unset(n.errors,Or),!Lr.keepDirty&&unset(n.dirtyFields,Or),!Lr.keepTouched&&unset(n.touchedFields,Or),!Lr.keepIsValidating&&unset(n.validatingFields,Or),!t.shouldUnregister&&!Lr.keepDefaultValue&&unset(Re,Or);$e.state.next({values:cloneObject(Ce)}),$e.state.next({...n,...Lr.keepDirty?{isDirty:ur()}:{}}),!Lr.keepIsValid&&Ve()},Fr=({disabled:_r,name:Lr})=>{(isBoolean(_r)&&Te.mount||_r||Me.disabled.has(Lr))&&(_r?Me.disabled.add(Lr):Me.disabled.delete(Lr))},$r=(_r,Lr={})=>{let Or=get(Ee,_r);const tn=isBoolean(Lr.disabled)||isBoolean(t.disabled);return set(Ee,_r,{...Or||{},_f:{...Or&&Or._f?Or._f:{ref:{name:_r}},name:_r,mount:!0,...Lr}}),Me.mount.add(_r),Or?Fr({disabled:isBoolean(Lr.disabled)?Lr.disabled:t.disabled,name:_r}):Ke(_r,!0,Lr.value),{...tn?{disabled:Lr.disabled||t.disabled}:{},...t.progressive?{required:!!Lr.required,min:getRuleValue(Lr.min),max:getRuleValue(Lr.max),minLength:getRuleValue(Lr.minLength),maxLength:getRuleValue(Lr.maxLength),pattern:getRuleValue(Lr.pattern)}:{},name:_r,onChange:cr,onBlur:cr,ref:sn=>{if(sn){$r(_r,Lr),Or=get(Ee,_r);const en=isUndefined(sn.value)&&sn.querySelectorAll&&sn.querySelectorAll("input,select,textarea")[0]||sn,fn=isRadioOrCheckbox(en),Sn=Or._f.refs||[];if(fn?Sn.find(Rn=>Rn===en):en===Or._f.ref)return;set(Ee,_r,{_f:{...Or._f,...fn?{refs:[...Sn.filter(live),en,...Array.isArray(get(Re,_r))?[{}]:[]],ref:{type:en.type,name:_r}}:{ref:en}}}),Ke(_r,!1,void 0,en)}else Or=get(Ee,_r,{}),Or._f&&(Or._f.mount=!1),(t.shouldUnregister||Lr.shouldUnregister)&&!(isNameInFieldArray(Me.array,_r)&&Te.action)&&Me.unMount.add(_r)}}},Wr=()=>t.shouldFocusError&&iterateFieldsByAction(Ee,rr,Me.mount),Zr=_r=>{isBoolean(_r)&&($e.state.next({disabled:_r}),iterateFieldsByAction(Ee,(Lr,Or)=>{const tn=get(Ee,Or);tn&&(Lr.disabled=tn._f.disabled||_r,Array.isArray(tn._f.refs)&&tn._f.refs.forEach(sn=>{sn.disabled=tn._f.disabled||_r}))},0,!1))},nn=(_r,Lr)=>async Or=>{let tn;Or&&(Or.preventDefault&&Or.preventDefault(),Or.persist&&Or.persist());let sn=cloneObject(Ce);if($e.state.next({isSubmitting:!0}),t.resolver){const{errors:en,values:fn}=await er();n.errors=en,sn=cloneObject(fn)}else await ar(Ee);if(Me.disabled.size)for(const en of Me.disabled)unset(sn,en);if(unset(n.errors,"root"),isEmptyObject$1(n.errors)){$e.state.next({errors:{}});try{await _r(sn,Or)}catch(en){tn=en}}else Lr&&await Lr({...n.errors},Or),Wr(),setTimeout(Wr);if($e.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject$1(n.errors)&&!tn,submitCount:n.submitCount+1,errors:n.errors}),tn)throw tn},an=(_r,Lr={})=>{get(Ee,_r)&&(isUndefined(Lr.defaultValue)?lr(_r,cloneObject(get(Re,_r))):(lr(_r,Lr.defaultValue),set(Re,_r,cloneObject(Lr.defaultValue))),Lr.keepTouched||unset(n.touchedFields,_r),Lr.keepDirty||(unset(n.dirtyFields,_r),n.isDirty=Lr.defaultValue?ur(_r,cloneObject(get(Re,_r))):ur()),Lr.keepError||(unset(n.errors,_r),Be.isValid&&Ve()),$e.state.next({...n}))},Yr=(_r,Lr={})=>{const Or=_r?cloneObject(_r):Re,tn=cloneObject(Or),sn=isEmptyObject$1(_r),en=sn?Re:tn;if(Lr.keepDefaultValues||(Re=Or),!Lr.keepValues){if(Lr.keepDirtyValues){const fn=new Set([...Me.mount,...Object.keys(getDirtyFields(Re,Ce))]);for(const Sn of Array.from(fn))get(n.dirtyFields,Sn)?set(en,Sn,get(Ce,Sn)):lr(Sn,get(en,Sn))}else{if(isWeb&&isUndefined(_r))for(const fn of Me.mount){const Sn=get(Ee,fn);if(Sn&&Sn._f){const Rn=Array.isArray(Sn._f.refs)?Sn._f.refs[0]:Sn._f.ref;if(isHTMLElement(Rn)){const jn=Rn.closest("form");if(jn){jn.reset();break}}}}if(Lr.keepFieldsRef)for(const fn of Me.mount)lr(fn,get(en,fn));else Ee={}}Ce=t.shouldUnregister?Lr.keepDefaultValues?cloneObject(Re):{}:cloneObject(en),$e.array.next({values:{...en}}),$e.state.next({values:{...en}})}Me={mount:Lr.keepDirtyValues?Me.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},Te.mount=!Be.isValid||!!Lr.keepIsValid||!!Lr.keepDirtyValues||!t.shouldUnregister&&!isEmptyObject$1(en),Te.watch=!!t.shouldUnregister,$e.state.next({submitCount:Lr.keepSubmitCount?n.submitCount:0,isDirty:sn?!1:Lr.keepDirty?n.isDirty:!!(Lr.keepDefaultValues&&!deepEqual$1(_r,Re)),isSubmitted:Lr.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:sn?{}:Lr.keepDirtyValues?Lr.keepDefaultValues&&Ce?getDirtyFields(Re,Ce):n.dirtyFields:Lr.keepDefaultValues&&_r?getDirtyFields(Re,_r):Lr.keepDirty?n.dirtyFields:{},touchedFields:Lr.keepTouched?n.touchedFields:{},errors:Lr.keepErrors?n.errors:{},isSubmitSuccessful:Lr.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:Re})},Rr=(_r,Lr)=>Yr(isFunction$1(_r)?_r(Ce):_r,Lr),Xr=(_r,Lr={})=>{const Or=get(Ee,_r),tn=Or&&Or._f;if(tn){const sn=tn.refs?tn.refs[0]:tn.ref;sn.focus&&(sn.focus(),Lr.shouldSelect&&isFunction$1(sn.select)&&sn.select())}},mn=_r=>{n={...n,..._r}},rn={control:{register:$r,unregister:Mr,getFieldState:ir,handleSubmit:nn,setError:gr,_subscribe:Cr,_runSchema:er,_focusError:Wr,_getWatch:dr,_getDirty:ur,_setValid:Ve,_setFieldArray:qe,_setDisabledField:Fr,_setErrors:Ye,_getFieldArray:vr,_reset:Yr,_resetDefaultValues:()=>isFunction$1(t.defaultValues)&&t.defaultValues().then(_r=>{Rr(_r,t.resetOptions),$e.state.next({isLoading:!1})}),_removeUnmounted:hr,_disableForm:Zr,_subjects:$e,_proxyFormState:Be,get _fields(){return Ee},get _formValues(){return Ce},get _state(){return Te},set _state(_r){Te=_r},get _defaultValues(){return Re},get _names(){return Me},set _names(_r){Me=_r},get _formState(){return n},get _options(){return t},set _options(_r){t={...t,..._r}}},subscribe:Nr,trigger:pr,register:$r,handleSubmit:nn,watch:Er,setValue:lr,getValues:mr,reset:Rr,resetField:an,clearErrors:nr,unregister:Mr,setError:gr,setFocus:Xr,getFieldState:ir};return{...rn,formControl:rn}}function useForm(e={}){const t=React4.useRef(void 0),n=React4.useRef(void 0),[Ee,Re]=React4.useState({isDirty:!1,isValidating:!1,isLoading:isFunction$1(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:isFunction$1(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:Ee},e.defaultValues&&!isFunction$1(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:Te,...Me}=createFormControl(e);t.current={...Me,formState:Ee}}const Ce=t.current.control;return Ce._options=e,useIsomorphicLayoutEffect$1(()=>{const Te=Ce._subscribe({formState:Ce._proxyFormState,callback:()=>Re({...Ce._formState}),reRenderRoot:!0});return Re(Me=>({...Me,isReady:!0})),Ce._formState.isReady=!0,Te},[Ce]),React4.useEffect(()=>Ce._disableForm(e.disabled),[Ce,e.disabled]),React4.useEffect(()=>{e.mode&&(Ce._options.mode=e.mode),e.reValidateMode&&(Ce._options.reValidateMode=e.reValidateMode)},[Ce,e.mode,e.reValidateMode]),React4.useEffect(()=>{e.errors&&(Ce._setErrors(e.errors),Ce._focusError())},[Ce,e.errors]),React4.useEffect(()=>{e.shouldUnregister&&Ce._subjects.state.next({values:Ce._getWatch()})},[Ce,e.shouldUnregister]),React4.useEffect(()=>{if(Ce._proxyFormState.isDirty){const Te=Ce._getDirty();Te!==Ee.isDirty&&Ce._subjects.state.next({isDirty:Te})}},[Ce,Ee.isDirty]),React4.useEffect(()=>{var Te;e.values&&!deepEqual$1(e.values,n.current)?(Ce._reset(e.values,{keepFieldsRef:!0,...Ce._options.resetOptions}),!((Te=Ce._options.resetOptions)===null||Te===void 0)&&Te.keepIsValid||Ce._setValid(),n.current=e.values,Re(Me=>({...Me}))):Ce._resetDefaultValues()},[Ce,e.values]),React4.useEffect(()=>{Ce._state.mount||(Ce._setValid(),Ce._state.mount=!0),Ce._state.watch&&(Ce._state.watch=!1,Ce._subjects.state.next({...Ce._formState})),Ce._removeUnmounted()}),t.current.formState=getProxyFormState(Ee,Ce),t.current}const Toggle=({label:e,checked:t,onChange:n,helpText:Ee,className:Re=""})=>jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-between ${Re}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-text-primary",children:e}),Ee&&jsxRuntimeExports.jsx("span",{className:"text-xs text-text-secondary mt-0.5",children:Ee})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>n(!t),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${t?"bg-brand-primary":"bg-gray-200"}`,role:"switch","aria-checked":t,children:jsxRuntimeExports.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t?"translate-x-5":"translate-x-0"}`})})]}),CheckboxGroup=({options:e,values:t,onChange:n})=>{const Ee=Re=>{t.includes(Re)?n(t.filter(Ce=>Ce!==Re)):n([...t,Re])};return jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.map(Re=>jsxRuntimeExports.jsx(Checkbox,{label:Re,checked:t.includes(Re),onChange:()=>Ee(Re)},Re))})};function LeavePolicyForm({policyId:e,isOpen:t,onClose:n}){var Ue;const{register:Ee,control:Re,handleSubmit:Ce,reset:Te,watch:Me,formState:{errors:De,isSubmitting:Oe},setValue:Be}=useForm({defaultValues:{name:"",shortCode:"",description:"",status:"Active",totalLeaves:12,accrualType:"Monthly",allowCarryForward:!1,maxCarryForward:0,allowHalfDay:!1,allowNegative:!1,isPaid:!0,employeeTypes:["Permanent"],requiresApproval:!0,minNotice:0,docRequired:!1,docRequiredAfter:3,visibleToEmployees:!0}}),ze=Me();reactExports.useEffect(()=>{e&&t?apiService.getLeavePolicy(e).then(Ve=>{var We,qe,Ge,Ye,Ke,Xe,Ze,er,St,ar,hr,ur,dr;if(Ve.policy){const vr=Ve.policy;Te({name:vr.name,shortCode:vr.shortCode||"",description:vr.description||"",status:vr.status,totalLeaves:((We=vr.allocation)==null?void 0:We.cycle)==="Monthly"?vr.allocation.count*12:((qe=vr.allocation)==null?void 0:qe.count)||0,accrualType:(Ge=vr.allocation)!=null&&Ge.proRata?"Pro-rata":((Ye=vr.allocation)==null?void 0:Ye.cycle)||"Yearly",allowCarryForward:((Ke=vr.allocation)==null?void 0:Ke.carryForward)||!1,maxCarryForward:((Xe=vr.allocation)==null?void 0:Xe.maxCarryForward)||0,allowHalfDay:((Ze=vr.rules)==null?void 0:Ze.allowHalfDay)||!1,allowNegative:((er=vr.rules)==null?void 0:er.allowNegative)||!1,isPaid:vr.category==="Paid",employeeTypes:((St=vr.eligibility)==null?void 0:St.employeeTypes)||[],requiresApproval:((ar=vr.rules)==null?void 0:ar.requiresApproval)||!1,minNotice:((hr=vr.rules)==null?void 0:hr.minNotice)||0,docRequired:((ur=vr.docs)==null?void 0:ur.mandatory)||!1,docRequiredAfter:((dr=vr.docs)==null?void 0:dr.requiredAfter)||0,visibleToEmployees:vr.visibleToEmployees??!0})}}):!e&&t&&Te({name:"",shortCode:"",description:"",status:"Active",totalLeaves:12,accrualType:"Monthly",allowCarryForward:!1,maxCarryForward:0,allowHalfDay:!1,allowNegative:!1,isPaid:!0,employeeTypes:["Permanent"],requiresApproval:!0,minNotice:0,docRequired:!1,docRequiredAfter:3,visibleToEmployees:!0})},[e,t,Te]);const $e=async Ve=>{var We;try{const qe={name:Ve.name,shortCode:Ve.shortCode,description:Ve.description,status:Ve.status,visibleToEmployees:Ve.visibleToEmployees,type:"Custom",category:Ve.isPaid?"Paid":"Unpaid",allocation:{cycle:Ve.accrualType==="Monthly"?"Monthly":"Yearly",count:Ve.accrualType==="Monthly"?Ve.totalLeaves/12:Ve.totalLeaves,proRata:Ve.accrualType==="Pro-rata",carryForward:Ve.allowCarryForward,maxCarryForward:Ve.allowCarryForward?Ve.maxCarryForward:0,encashment:!1,maxEncashment:0},eligibility:{employeeTypes:Ve.employeeTypes,gender:"All",minTenure:0},rules:{minNotice:Ve.minNotice,maxConsecutive:30,requiresApproval:Ve.requiresApproval,allowHalfDay:Ve.allowHalfDay,allowNegative:Ve.allowNegative},docs:{mandatory:Ve.docRequired,requiredAfter:Ve.docRequired?Ve.docRequiredAfter:0}},Ge=document.querySelector('input[name="document"]'),Ye=(We=Ge==null?void 0:Ge.files)==null?void 0:We[0];let Ke=qe;if(Ye){const Xe=new FormData;Xe.append("document",Ye),Xe.append("data",JSON.stringify(qe)),Ke=Xe}e?await apiService.updateLeavePolicy(e,Ke):await apiService.createLeavePolicy(Ke),n()}catch(qe){alert("Failed to save policy: "+qe.message)}},He=()=>{const Ve=[];return Ve.push(`${ze.totalLeaves} leaves/year`),ze.accrualType==="Monthly"?Ve.push("credited monthly"):ze.accrualType==="Pro-rata"?Ve.push("pro-rata accrual"):Ve.push("credited yearly"),ze.allowHalfDay&&Ve.push("half-day"),ze.requiresApproval&&Ve.push("approval req."),Ve.join(", ")};return jsxRuntimeExports.jsx(Modal,{isOpen:t,onClose:n,title:e?"Edit Leave Policy":"Create Leave Policy",maxWidth:"max-w-2xl",footer:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col text-left w-full sm:w-auto",children:[jsxRuntimeExports.jsx("span",{className:"text-xs uppercase tracking-wider text-text-secondary font-semibold",children:"Summary"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-text-primary",children:He().charAt(0).toUpperCase()+He().slice(1)})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 w-full sm:w-auto justify-end",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:n,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:Ce($e),isLoading:Oe,leftIcon:jsxRuntimeExports.jsx(Save,{size:16}),children:"Save"})]})]}),children:jsxRuntimeExports.jsxs("form",{onSubmit:Ce($e),className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 border-b border-border pb-2",children:[jsxRuntimeExports.jsx("div",{className:"h-5 w-1 bg-brand-primary rounded-full"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-base text-text-primary",children:"Leave Details"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Input,{label:"Leave Name",placeholder:"e.g. Casual Leave",...Ee("name",{required:"Name is required"}),error:(Ue=De.name)==null?void 0:Ue.message}),jsxRuntimeExports.jsx(Input,{label:"Short Code",placeholder:"e.g. CL",...Ee("shortCode")})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{placeholder:"Brief description visible to employees...",rows:2,...Ee("description")})]}),jsxRuntimeExports.jsx(Controller,{name:"status",control:Re,render:({field:Ve})=>jsxRuntimeExports.jsx(Toggle,{label:"Is it Active?",checked:Ve.value==="Active",onChange:We=>Ve.onChange(We?"Active":"Inactive")})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 border-b border-border pb-2",children:[jsxRuntimeExports.jsx("div",{className:"h-5 w-1 bg-brand-primary rounded-full"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-base text-text-primary",children:"Accrual & Usage"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[jsxRuntimeExports.jsx(Input,{label:"Total Leaves / Year",type:"number",...Ee("totalLeaves",{valueAsNumber:!0,min:0})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Accrual Type"}),jsxRuntimeExports.jsx("div",{className:"flex bg-bg-main p-1 rounded-md border border-border",children:["Yearly","Monthly","Pro-rata"].map(Ve=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Be("accrualType",Ve),className:`flex-1 text-xs py-1.5 rounded-sm transition-all ${Me("accrualType")===Ve?"bg-white shadow text-brand-primary font-medium":"text-text-secondary hover:text-text-primary"}`,children:Ve},Ve))})]})]}),Me("accrualType")==="Monthly"&&jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 text-blue-700 px-3 py-2 rounded text-xs flex items-center gap-2",children:[jsxRuntimeExports.jsx(Info,{size:14}),jsxRuntimeExports.jsxs("span",{children:[(Me("totalLeaves")/12).toFixed(1)," days credited per month"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-main rounded-md p-4 space-y-3 border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center gap-4",children:[jsxRuntimeExports.jsx(Controller,{name:"allowCarryForward",control:Re,render:({field:Ve})=>jsxRuntimeExports.jsx(Toggle,{label:"Carry Forward",checked:Ve.value||!1,onChange:Ve.onChange,className:"flex-1"})}),Me("allowCarryForward")&&jsxRuntimeExports.jsx("div",{className:"w-24",children:jsxRuntimeExports.jsx(Input,{placeholder:"Max Days",type:"number",className:"h-8 text-sm",...Ee("maxCarryForward",{valueAsNumber:!0})})})]}),jsxRuntimeExports.jsx("hr",{className:"border-border/50"}),jsxRuntimeExports.jsx(Controller,{name:"allowHalfDay",control:Re,render:({field:Ve})=>jsxRuntimeExports.jsx(Toggle,{label:"Allow Half Day",checked:Ve.value||!1,onChange:Ve.onChange})}),jsxRuntimeExports.jsx(Controller,{name:"allowNegative",control:Re,render:({field:Ve})=>jsxRuntimeExports.jsx(Toggle,{label:"Allow Negative Balance",checked:Ve.value||!1,onChange:Ve.onChange})}),jsxRuntimeExports.jsx(Controller,{name:"isPaid",control:Re,render:({field:Ve})=>jsxRuntimeExports.jsx(Toggle,{label:"Paid Leave",checked:Ve.value||!1,onChange:Ve.onChange,helpText:Ve.value?"Salary is paid":"Loss of Pay"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 border-b border-border pb-2",children:[jsxRuntimeExports.jsx("div",{className:"h-5 w-1 bg-brand-primary rounded-full"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-base text-text-primary",children:"Applicability & Approval"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Applicable Employee Types"}),jsxRuntimeExports.jsx(Controller,{name:"employeeTypes",control:Re,render:({field:Ve})=>jsxRuntimeExports.jsx(CheckboxGroup,{options:["Permanent","Contract","Intern","Freelancer","Part-Time"],values:Ve.value||[],onChange:Ve.onChange})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-main rounded-md p-4 space-y-3 border border-border",children:[jsxRuntimeExports.jsx(Controller,{name:"requiresApproval",control:Re,render:({field:Ve})=>jsxRuntimeExports.jsx(Toggle,{label:"Approval Required",checked:Ve.value||!1,onChange:Ve.onChange})}),jsxRuntimeExports.jsx(Input,{label:"Min Notice Period (Days)",type:"number",...Ee("minNotice",{valueAsNumber:!0})}),jsxRuntimeExports.jsx("hr",{className:"border-border/50"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Policy Document (PDF/Image)"}),jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:Ve=>{Ve.target.files&&Ve.target.files[0]},name:"document",className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/10 file:text-brand-primary hover:file:bg-brand-primary/20"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"Upload a policy document for employees to view."})]}),jsxRuntimeExports.jsx("hr",{className:"border-border/50"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center gap-4",children:[jsxRuntimeExports.jsx(Controller,{name:"docRequired",control:Re,render:({field:Ve})=>jsxRuntimeExports.jsx(Toggle,{label:"Document Required",checked:Ve.value||!1,onChange:Ve.onChange,className:"flex-1"})}),Me("docRequired")&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-text-secondary whitespace-nowrap",children:"After days:"}),jsxRuntimeExports.jsx("div",{className:"w-20",children:jsxRuntimeExports.jsx(Input,{type:"number",className:"h-8 text-sm",...Ee("docRequiredAfter",{valueAsNumber:!0})})})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-border/50"}),jsxRuntimeExports.jsx(Controller,{name:"visibleToEmployees",control:Re,render:({field:Ve})=>jsxRuntimeExports.jsx(Toggle,{label:"Visible to Employees",checked:Ve.value||!1,onChange:Ve.onChange,helpText:Ve.value?"":"Hidden from employee dashboard"})})]})]})]})})}function UploadPolicyModal({isOpen:e,onClose:t}){var Be;const{register:n,handleSubmit:Ee,reset:Re,formState:{errors:Ce,isSubmitting:Te}}=useForm({defaultValues:{name:"",description:""}}),[Me,De]=reactExports.useState(null),Oe=async ze=>{if(!Me){alert("Please select a document to upload.");return}try{const $e={name:ze.name,description:ze.description,status:"Active",type:"Custom",category:"Unpaid",visibleToEmployees:!0,allocation:{cycle:"Yearly",count:0,proRata:!1,carryForward:!1,maxCarryForward:0,encashment:!1,maxEncashment:0},eligibility:{employeeTypes:["Permanent","Contract","Intern","Induction"],gender:"All",minTenure:0},rules:{minNotice:0,maxConsecutive:365,requiresApproval:!1,allowHalfDay:!1,allowNegative:!1},docs:{mandatory:!1,requiredAfter:0}},He=new FormData;He.append("document",Me),He.append("data",JSON.stringify($e)),await apiService.createLeavePolicy(He),Re(),De(null),t()}catch($e){alert("Failed to upload policy: "+$e.message)}};return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:t,title:"Upload Policy Document",maxWidth:"max-w-lg",footer:jsxRuntimeExports.jsxs("div",{className:"flex gap-3 justify-end w-full",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:t,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:Ee(Oe),isLoading:Te,leftIcon:jsxRuntimeExports.jsx(CloudUpload,{size:16}),children:"Upload"})]}),children:jsxRuntimeExports.jsxs("form",{onSubmit:Ee(Oe),className:"space-y-4",children:[jsxRuntimeExports.jsx(Input,{label:"Policy Name",placeholder:"e.g. Employee Handbook 2024",...n("name",{required:"Name is required"}),error:(Be=Ce.name)==null?void 0:Be.message}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{placeholder:"Brief description...",rows:3,...n("description")})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-medium text-text-primary",children:["Document (PDF/Image) ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 flex flex-col items-center justify-center bg-bg-main hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:ze=>{ze.target.files&&ze.target.files[0]&&De(ze.target.files[0])},className:"hidden",id:"policy-doc-upload"}),jsxRuntimeExports.jsxs("label",{htmlFor:"policy-doc-upload",className:"cursor-pointer flex flex-col items-center gap-2 text-center",children:[jsxRuntimeExports.jsx(CloudUpload,{size:32,className:"text-brand-primary/50"}),Me?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-text-primary",children:Me.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"Click to change file"})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-brand-primary",children:"Click to upload"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"PDF, JPG, PNG up to 10MB"})]})]})]})]})]})})}function LeavePolicyList(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(""),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(!1),[Be,ze]=reactExports.useState(null);reactExports.useEffect(()=>{$e()},[]);const $e=async()=>{try{Ee(!0);const Ke=await apiService.getLeavePolicies();t(Ke.policies||[])}catch(Ke){console.error("Failed to fetch policies:",Ke)}finally{Ee(!1)}},He=async Ke=>{if(confirm("Are you sure you want to delete this policy?"))try{await apiService.deleteLeavePolicy(Ke),$e()}catch{alert("Failed to delete policy")}},{user:Ue}=useAuth(),Ve=(Ue==null?void 0:Ue.role)==="Admin"||(Ue==null?void 0:Ue.role)==="HR",We=e.filter(Ke=>!(Ke.type==="Custom"&&Ke.allocation.count===0)),qe=e.filter(Ke=>Ke.type==="Custom"&&Ke.allocation.count===0),Ge=We.filter(Ke=>Ke.name.toLowerCase().includes(Re.toLowerCase())||Ke.type.toLowerCase().includes(Re.toLowerCase())),Ye=qe.filter(Ke=>Ke.name.toLowerCase().includes(Re.toLowerCase())||Ke.description&&Ke.description.toLowerCase().includes(Re.toLowerCase()));return jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Leave Policies"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Manage leave types and allocation rules"})]}),Ve&&jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>Oe(!0),leftIcon:jsxRuntimeExports.jsx(Upload,{size:20}),children:"Upload Policy Document"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Me(!0),leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Create New Policy"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center bg-bg-panel border border-border rounded-lg p-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-secondary",size:18}),jsxRuntimeExports.jsx(Input,{className:"pl-10",placeholder:"Search policies & documents...",value:Re,onChange:Ke=>Ce(Ke.target.value)})]}),jsxRuntimeExports.jsx(Button,{variant:"secondary",leftIcon:jsxRuntimeExports.jsx(SlidersHorizontal,{size:18}),children:"Filters"})]}),jsxRuntimeExports.jsx("div",{className:"border border-border rounded-lg overflow-hidden bg-bg-panel",children:jsxRuntimeExports.jsx(Table$1,{columns:[{header:"Policy Name",accessorKey:"name",render:Ke=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-text-primary",children:Ke.name}),jsxRuntimeExports.jsx("div",{className:"text-xs text-text-secondary",children:Ke.category})]})},{header:"Leave Type",accessorKey:"type"},{header:"Cycle",accessorKey:"allocation.cycle",render:Ke=>Ke.allocation.cycle},{header:"Count",render:Ke=>jsxRuntimeExports.jsxs("span",{className:"font-semibold text-brand-primary",children:[Ke.allocation.count," days"]})},{header:"Apply To",render:Ke=>jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:Ke.eligibility.applyTo.length>0?Ke.eligibility.applyTo.map(Xe=>jsxRuntimeExports.jsx("span",{className:"bg-bg-main text-xs px-2 py-0.5 rounded-full border border-border",children:Xe},Xe)):jsxRuntimeExports.jsx("span",{className:"text-xs text-text-secondary",children:"All"})})},{header:"Status",render:Ke=>jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${Ke.status==="Active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:Ke.status})},{header:"Actions",render:Ke=>jsxRuntimeExports.jsx(PolicyActions,{policy:Ke,onDelete:He,onEdit:Xe=>{ze(Xe),Me(!0)}})}],data:Ge,isLoading:n,emptyMessage:"No leave policies found"})})]}),Ye.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"Reference Documents"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Company handbooks, guidelines, and general policies"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ye.map(Ke=>{var Xe;return jsxRuntimeExports.jsxs("div",{className:"bg-bg-panel border border-border rounded-lg p-5 hover:border-brand-primary/50 transition-colors flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-brand-primary/10 text-brand-primary rounded-lg",children:jsxRuntimeExports.jsx(FileText,{size:24})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-text-primary truncate",title:Ke.name,children:Ke.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary line-clamp-2 mt-1",children:Ke.description||"No description provided"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-4",children:[((Xe=Ke.docs)==null?void 0:Xe.documentUrl)&&jsxRuntimeExports.jsxs("a",{href:Ke.docs.documentUrl.startsWith("http")?Ke.docs.documentUrl:`${ASSET_BASE_URL}${Ke.docs.documentUrl}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-medium text-brand-primary hover:underline flex items-center gap-1",children:[jsxRuntimeExports.jsx(Eye,{size:14})," View Document"]}),Ve&&jsxRuntimeExports.jsxs("button",{onClick:()=>He(Ke._id),className:"text-xs font-medium text-red-500 hover:text-red-600 hover:underline flex items-center gap-1 ml-auto",children:[jsxRuntimeExports.jsx(Trash2,{size:14})," Delete"]})]})]})]},Ke._id)})})]}),jsxRuntimeExports.jsx(LeavePolicyForm,{isOpen:Te,policyId:Be,onClose:()=>{Me(!1),ze(null),$e()}}),jsxRuntimeExports.jsx(UploadPolicyModal,{isOpen:De,onClose:()=>{Oe(!1),$e()}})]})}const PolicyActions=({policy:e,onDelete:t,onEdit:n})=>{const{user:Ee}=useAuth();return(Ee==null?void 0:Ee.role)==="Admin"||(Ee==null?void 0:Ee.role)==="HR"?jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>n(e._id),className:"p-1 text-text-secondary hover:text-brand-primary transition-colors",title:"Edit",children:jsxRuntimeExports.jsx(Eye,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>t(e._id),className:"p-1 text-text-secondary hover:text-red-500 transition-colors",title:"Delete",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]}):null},HOLIDAY_TYPES=[{value:"Public",label:"Public Holiday"},{value:"Optional",label:"Optional"},{value:"Weekend",label:"Weekend"}];function HolidayManagement({isModal:e=!1}){const{user:t}=useAuth(),n=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="HR",[Ee,Re]=reactExports.useState([]),[Ce,Te]=reactExports.useState(!0),[Me,De]=reactExports.useState(""),[Oe,Be]=reactExports.useState(!1),[ze,$e]=reactExports.useState({name:"",date:"",type:"Public"}),He=async()=>{try{Te(!0);const qe=await apiService.getHolidays(2025);Re(qe),De("")}catch(qe){De("Failed to load holidays"),console.error(qe)}finally{Te(!1)}};reactExports.useEffect(()=>{He()},[]);const Ue=async qe=>{qe.preventDefault();try{await apiService.addHoliday(ze),$e({name:"",date:"",type:"Public"}),Be(!1),He()}catch(Ge){alert(Ge.message)}},Ve=async qe=>{if(window.confirm("Are you sure you want to delete this holiday?"))try{await apiService.deleteHoliday(qe),He()}catch(Ge){alert(Ge.message)}},We=reactExports.useMemo(()=>[{header:"Date",accessorKey:"date",render:qe=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar$1,{size:16,className:"text-brand-primary opacity-70"}),jsxRuntimeExports.jsx("span",{children:format(new Date(qe.date),"do MMM yyyy")})]})},{header:"Day",accessorKey:"day"},{header:"Holiday Name",accessorKey:"name",render:qe=>{const Ge=qe.name.toLowerCase().includes("no holiday");return jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[qe.name,Ge&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs bg-status-warning/20 text-status-warning px-2 py-0.5 rounded-full",children:"Not Observed"})]})}},{header:"Type",accessorKey:"type",render:qe=>jsxRuntimeExports.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${qe.type==="Public"?"bg-status-success/10 text-status-success border-status-success/20":"bg-bg-main text-text-secondary border-border"}`,children:qe.type})},...n?[{header:"Actions",className:"text-right",render:qe=>jsxRuntimeExports.jsx("div",{className:"text-right",children:jsxRuntimeExports.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),Ve(qe._id)},className:"text-text-muted hover:text-status-error p-2 rounded-full hover:bg-status-error/10 transition-colors",title:"Delete Holiday",children:jsxRuntimeExports.jsx(Trash2,{size:16})})})}]:[]],[n]);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[!e&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Holiday List"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Official holidays for the current year"}),Me&&jsxRuntimeExports.jsx("p",{className:"text-status-error text-sm mt-1",children:Me})]}),n&&jsxRuntimeExports.jsx(Button,{onClick:()=>Be(!Oe),leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Add Holiday"})]}),e&&n&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Me&&jsxRuntimeExports.jsx("p",{className:"text-status-error text-sm",children:Me}),!Me&&jsxRuntimeExports.jsx("span",{})," ",jsxRuntimeExports.jsxs("button",{onClick:()=>Be(!Oe),className:"flex items-center gap-2 bg-brand-primary text-white px-3 py-1.5 text-sm rounded-lg hover:bg-brand-primary/90 transition-colors",children:[jsxRuntimeExports.jsx(Plus,{size:16}),"Add Holiday"]})]}),Oe&&n&&jsxRuntimeExports.jsxs("form",{onSubmit:Ue,className:"bg-bg-card p-4 rounded-lg border border-border shadow-sm flex flex-wrap gap-4 items-end animate-in slide-in-from-top-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-[200px]",children:jsxRuntimeExports.jsx(Input,{label:"Holiday Name",required:!0,value:ze.name,onChange:qe=>$e({...ze,name:qe.target.value}),placeholder:"e.g. Independence Day"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-[150px]",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),jsxRuntimeExports.jsx(DatePicker,{required:!0,className:"w-full p-2 rounded border border-border bg-bg-main",value:ze.date,onChange:qe=>$e({...ze,date:qe.target.value})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-[150px]",children:jsxRuntimeExports.jsx(Select,{label:"Type",value:ze.type,onChange:qe=>$e({...ze,type:qe}),options:HOLIDAY_TYPES})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Be(!1),className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors",children:"Save"})]})]}),jsxRuntimeExports.jsx(Table$1,{columns:We,data:Ee,isLoading:Ce})]})}function HolidayModal({isOpen:e,onClose:t}){return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:t,title:"Holiday Calendar",maxWidth:"max-w-4xl",children:jsxRuntimeExports.jsx(HolidayManagement,{isModal:!0})})}function Badge({children:e,variant:t="default",className:n,size:Ee="md"}){const Re={default:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 border-transparent",primary:"bg-brand-primary/10 text-brand-primary dark:bg-brand-primary/20 border-transparent",secondary:"bg-brand-secondary/10 text-brand-secondary dark:bg-brand-secondary/20 border-transparent",success:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border-transparent",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 border-transparent",error:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 border-transparent",info:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 border-transparent",outline:"bg-transparent border-gray-200 text-gray-600 dark:border-gray-700 dark:text-gray-400"},Ce={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-sm"};return jsxRuntimeExports.jsx("span",{className:cn$2("inline-flex items-center font-medium rounded-full border",Re[t],Ce[Ee],n),children:e})}function HRLeaveOverview(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(new Date().getMonth()+1),[Te,Me]=reactExports.useState(new Date().getFullYear()),[De,Oe]=reactExports.useState("All"),[Be,ze]=reactExports.useState("All"),[$e,He]=reactExports.useState("All"),[Ue,Ve]=reactExports.useState("All"),[We,qe]=reactExports.useState([]),Ge=[{value:"All",label:"All Departments"},{value:"Engineering",label:"Engineering"},{value:"Design",label:"Design"},{value:"Product",label:"Product"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"},{value:"HR",label:"Human Resources"},{value:"Finance",label:"Finance"}],Ye=[{value:"All",label:"All Types"},{value:"Sick",label:"Sick"},{value:"Casual",label:"Casual"},{value:"Paid",label:"Paid"},{value:"Unpaid",label:"Unpaid"},{value:"Floating",label:"Floating"}],Ke=[{value:"All",label:"All Status"},{value:"Approved",label:"Approved"},{value:"Pending",label:"Pending"},{value:"Rejected",label:"Rejected"}];reactExports.useEffect(()=>{Xe()},[]),reactExports.useEffect(()=>{Ze()},[Re,Te,De,Be,$e,Ue]);const Xe=async()=>{try{const ar=(await apiService.getEmployees()).map(hr=>{var ur;return{value:((ur=hr.user)==null?void 0:ur._id)||hr._id,label:`${hr.firstName} ${hr.lastName} (${hr.employeeId||"N/A"})`}});qe([{value:"All",label:"All Employees"},...ar])}catch(St){console.error("Failed to fetch employees",St)}},Ze=async()=>{try{Ee(!0);const St={month:Re,year:Te,department:De,employee:Be,status:$e,type:Ue},ar=await apiService.getHRLeaveOverview(St);t(ar)}catch(St){console.error("Failed to fetch leave overview",St)}finally{Ee(!1)}},er=[{header:"Employee",accessorKey:"employeeName",render:St=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-text-primary",children:St.employeeName}),jsxRuntimeExports.jsx("div",{className:"text-xs text-text-secondary",children:St.employeeId})]})},{header:"Details",accessorKey:"department",render:St=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-text-primary",children:St.department}),jsxRuntimeExports.jsx("div",{className:"text-xs text-text-secondary",children:St.designation})]})},{header:"Leave Type",accessorKey:"type",render:St=>jsxRuntimeExports.jsx("span",{className:"font-medium",children:St.type})},{header:"Duration",accessorKey:"startDate",render:St=>jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[format(new Date(St.startDate),"MMM dd")," -"," ",format(new Date(St.endDate),"MMM dd")]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-text-muted",children:[St.totalDays," day",St.totalDays>1?"s":""]})]})},{header:"Total (Month)",accessorKey:"totalLeavesTakenMonth",render:St=>jsxRuntimeExports.jsx("div",{className:"font-bold text-center text-brand-primary",children:St.totalLeavesTakenMonth})},{header:"Status",accessorKey:"status",render:St=>{const ar={Approved:"success",Pending:"warning",Rejected:"error"};return jsxRuntimeExports.jsx(Badge,{variant:ar[St.status]||"default",children:St.status})}}];return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-bg-card border border-border rounded-xl p-4 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1.5",children:jsxRuntimeExports.jsx(DatePicker,{label:"Month & Year",showMonthYearPicker:!0,dateFormat:"MMMM yyyy",value:`${Te}-${String(Re).padStart(2,"0")}-01`,onChange:St=>{const ar=St.target.value;if(ar){const hr=new Date(ar);isNaN(hr.getTime())||(Me(hr.getFullYear()),Ce(hr.getMonth()+1))}},renderCustomHeader:void 0})}),jsxRuntimeExports.jsx(Select,{label:"Department",value:De,onChange:St=>Oe(String(St)),options:Ge}),jsxRuntimeExports.jsx(Select,{label:"Employee",value:Be,onChange:St=>ze(String(St)),options:We}),jsxRuntimeExports.jsx(Select,{label:"Type",value:Ue,onChange:St=>Ve(String(St)),options:Ye}),jsxRuntimeExports.jsx(Select,{label:"Status",value:$e,onChange:St=>He(String(St)),options:Ke})]})}),jsxRuntimeExports.jsx("div",{className:"bg-bg-card border border-border rounded-xl overflow-hidden shadow-sm",children:jsxRuntimeExports.jsx(Table$1,{data:e,columns:er,isLoading:n,emptyMessage:"No leave records found for selected criteria."})})]})}function LeaveDashboard(){const{user:e}=useAuth(),[t,n]=reactExports.useState("my-leaves"),[Ee,Re]=reactExports.useState(!1),[Ce,Te]=reactExports.useState(!1),Me=(e==null?void 0:e.role)==="Admin"||(e==null?void 0:e.role)==="HR"||(e==null?void 0:e.role)==="Project Manager",De=((e==null?void 0:e.role)==="Admin"||(e==null?void 0:e.role)==="HR")&&(!(e!=null&&e.tenantId)||typeof e.tenantId=="string"||!e.tenantId.limits||e.tenantId.limits.enabledModules.includes("policies")),Oe=(e==null?void 0:e.role)==="Admin"||(e==null?void 0:e.role)==="HR";return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Leave Management"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Manage your leaves and approvals"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>Te(!0),leftIcon:jsxRuntimeExports.jsx(Calendar$1,{size:20}),children:"View Holidays"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Re(!0),leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Apply for Leave"})]})]}),t==="my-leaves"||!De&&t!=="policies"?jsxRuntimeExports.jsx(LeaveBalance,{}):null,jsxRuntimeExports.jsxs("div",{className:"flex border-b border-border overflow-x-auto",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>n("my-leaves"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${t==="my-leaves"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[jsxRuntimeExports.jsx(List,{size:18}),"My Leaves"]}),Me&&jsxRuntimeExports.jsxs("button",{onClick:()=>n("approvals"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${t==="approvals"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[jsxRuntimeExports.jsx(SquareCheckBig,{size:18}),"Approvals"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("policies"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${t==="policies"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[jsxRuntimeExports.jsx(FileText,{size:18}),"Policies"]}),Oe&&jsxRuntimeExports.jsxs("button",{onClick:()=>n("overview"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${t==="overview"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[jsxRuntimeExports.jsx(FileText,{size:18}),"Overview"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[t==="my-leaves"&&jsxRuntimeExports.jsx(LeaveList,{}),t==="approvals"&&jsxRuntimeExports.jsx(LeaveApproval,{}),t==="policies"&&jsxRuntimeExports.jsx(LeavePolicyList,{}),t==="overview"&&jsxRuntimeExports.jsx(HRLeaveOverview,{})]})]}),Ee&&jsxRuntimeExports.jsx(ApplyLeaveModal,{isOpen:Ee,onClose:()=>Re(!1)}),Ce&&jsxRuntimeExports.jsx(HolidayModal,{isOpen:Ce,onClose:()=>Te(!1)})]})}function SalaryStructureManager(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(""),[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(!1),[Be,ze]=reactExports.useState({baseSalary:0,hra:0,allowances:[],deductions:[]});reactExports.useEffect(()=>{$e()},[]),reactExports.useEffect(()=>{n&&He(n)},[n]);const $e=async()=>{try{const Ze=await apiService.getEmployees();t(Array.isArray(Ze)?Ze:Ze.employees||[])}catch{console.error("Failed to load employees")}},He=async Ze=>{try{Me(!0);const er=await apiService.getSalaryStructure(Ze);er.structure?ze(er.structure):ze({baseSalary:0,hra:0,allowances:[],deductions:[]})}catch{console.error("Failed to load structure")}finally{Me(!1)}},Ue=async()=>{if(n)try{Ce(!0),await apiService.upsertSalaryStructure({employeeId:n,...Be}),Oe(!0)}catch{alert("Failed to save structure")}finally{Ce(!1)}},Ve=(Ze,er)=>{ze(St=>({...St,[Ze]:er}))},We=()=>{ze(Ze=>({...Ze,allowances:[...Ze.allowances,{name:"",amount:0}]}))},qe=Ze=>{const er=[...Be.allowances];er.splice(Ze,1),Ve("allowances",er)},Ge=(Ze,er,St)=>{const ar=[...Be.allowances];ar[Ze]={...ar[Ze],[er]:St},Ve("allowances",ar)},Ye=()=>{ze(Ze=>({...Ze,deductions:[...Ze.deductions,{name:"",amount:0}]}))},Ke=Ze=>{const er=[...Be.deductions];er.splice(Ze,1),Ve("deductions",er)},Xe=(Ze,er,St)=>{const ar=[...Be.deductions];ar[Ze]={...ar[Ze],[er]:St},Ve("deductions",ar)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-lg border border-border p-4 h-fit",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Search,{size:18})," Select Employee"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:e.map(Ze=>jsxRuntimeExports.jsxs("button",{onClick:()=>Ee(Ze._id),className:`w-full text-left p-3 rounded-lg text-sm transition-colors ${n===Ze._id?"bg-brand-primary text-white":"hover:bg-bg-hover text-text-secondary"}`,children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:[Ze.firstName," ",Ze.lastName]}),jsxRuntimeExports.jsxs("div",{className:`text-xs ${n===Ze._id?"text-white/80":"text-text-muted"}`,children:[Ze.employeeId,"  ",Ze.designation]})]},Ze._id))})]}),jsxRuntimeExports.jsx("div",{className:"md:col-span-2 space-y-6",children:n?Te?jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-lg border border-border p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center border-b border-border pb-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-9 w-32 rounded-lg"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-20"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-full rounded"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-20"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-full rounded"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-12"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-9 flex-1"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-9 w-32"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-9 flex-1"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-9 w-32"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-12"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-9 flex-1"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-9 w-32"})]})})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-16 w-full rounded-lg"})]}):jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-lg border border-border p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center border-b border-border pb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Salary Structure"}),jsxRuntimeExports.jsx(Button,{onClick:Ue,disabled:Re,leftIcon:jsxRuntimeExports.jsx(Save,{size:20}),children:"Save Changes"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-text-secondary uppercase",children:"Basic Salary"}),jsxRuntimeExports.jsx(Input,{type:"number",value:Be.baseSalary,onChange:Ze=>Ve("baseSalary",Number(Ze.target.value)),className:"bg-bg-card"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-text-secondary uppercase",children:"HRA"}),jsxRuntimeExports.jsx(Input,{type:"number",value:Be.hra,onChange:Ze=>Ve("hra",Number(Ze.target.value)),className:"bg-bg-card"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Allowances"}),jsxRuntimeExports.jsxs("button",{onClick:We,className:"text-brand-primary text-sm flex items-center gap-1 hover:underline",children:[jsxRuntimeExports.jsx(Plus,{size:14})," Add"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 bg-bg-main p-3 rounded-lg",children:[Be.allowances.map((Ze,er)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx(Input,{type:"text",placeholder:"Name",value:Ze.name,onChange:St=>Ge(er,"name",St.target.value),className:"flex-1 bg-bg-card"}),jsxRuntimeExports.jsx(Input,{type:"number",placeholder:"Amount",value:Ze.amount,onChange:St=>Ge(er,"amount",Number(St.target.value)),className:"w-32 bg-bg-card"}),jsxRuntimeExports.jsx("button",{onClick:()=>qe(er),className:"text-status-error hover:bg-status-error/10 p-1 rounded",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]},er)),Be.allowances.length===0&&jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted text-center py-2",children:"No allowances defined"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Deductions"}),jsxRuntimeExports.jsxs("button",{onClick:Ye,className:"text-brand-primary text-sm flex items-center gap-1 hover:underline",children:[jsxRuntimeExports.jsx(Plus,{size:14})," Add"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 bg-bg-main p-3 rounded-lg",children:[Be.deductions.map((Ze,er)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx(Input,{type:"text",placeholder:"Name",value:Ze.name,onChange:St=>Xe(er,"name",St.target.value),className:"flex-1 bg-bg-card"}),jsxRuntimeExports.jsx(Input,{type:"number",placeholder:"Amount",value:Ze.amount,onChange:St=>Xe(er,"amount",Number(St.target.value)),className:"w-32 bg-bg-card"}),jsxRuntimeExports.jsx("button",{onClick:()=>Ke(er),className:"text-status-error hover:bg-status-error/10 p-1 rounded",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]},er)),Be.deductions.length===0&&jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted text-center py-2",children:"No deductions defined"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-brand-primary/5 p-4 rounded-lg flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-text-primary",children:"Estimated Net Salary"}),jsxRuntimeExports.jsxs("span",{className:"text-xl font-bold text-brand-primary",children:[""," ",(Number(Be.baseSalary)+Number(Be.hra)+Be.allowances.reduce((Ze,er)=>Ze+Number(er.amount),0)-Be.deductions.reduce((Ze,er)=>Ze+Number(er.amount),0)).toLocaleString()]})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-bg-card rounded-lg border border-border p-12 text-text-secondary",children:[jsxRuntimeExports.jsx(Users,{size:48,className:"mb-4 text-text-muted opacity-50"}),jsxRuntimeExports.jsx("p",{children:"Select an employee to manage their salary structure."})]})})]}),jsxRuntimeExports.jsx(Modal,{isOpen:De,onClose:()=>Oe(!1),title:"Success",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-status-success/10 rounded-full flex items-center justify-center text-status-success mb-4",children:jsxRuntimeExports.jsx(CircleCheckBig,{size:24})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Salary Structure Saved!"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mb-6",children:"The salary details for the selected employee have been successfully updated."}),jsxRuntimeExports.jsx("button",{onClick:()=>Oe(!1),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-colors",children:"Close"})]})})]})}function PayrollProcessor(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState([]),[Re,Ce]=reactExports.useState(new Date().toLocaleString("default",{month:"long"})),[Te,Me]=reactExports.useState(new Date().getFullYear()),[De,Oe]=reactExports.useState(!1),[Be,ze]=reactExports.useState(!0),[$e,He]=reactExports.useState(!1),[Ue,Ve]=reactExports.useState("");reactExports.useEffect(()=>{(async()=>{ze(!0),await Promise.all([We(),qe()]),ze(!1)})()},[Re,Te]);const We=async()=>{try{const Xe=await apiService.getPayrollList({month:Re,year:Te});Ee(Xe.payrolls||[])}catch{console.error("Failed to load payroll list")}},qe=async()=>{try{const Xe=await apiService.getEmployees();t(Array.isArray(Xe)?Xe:Xe.employees||[])}catch{console.error("failed to load employees")}},Ge=async Xe=>{try{Oe(!0),await apiService.calculatePayroll({employeeId:Xe,month:Re,year:Te}),We()}catch(Ze){Ve(Ze.message||"Failed to calculate payroll. Ensure salary structure is defined."),He(!0)}finally{Oe(!1)}},Ye=async(Xe,Ze)=>{try{await apiService.updatePayrollStatus(Xe,Ze),We()}catch{alert("Failed to update status")}},Ke=reactExports.useMemo(()=>[{header:"Employee",searchKey:"firstName",render:Xe=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium text-text-primary",children:[Xe.firstName," ",Xe.lastName]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-text-muted",children:Xe.employeeId})]}),Xe.bankDetails&&jsxRuntimeExports.jsx(Tooltip,{trigger:"click",position:"right",content:jsxRuntimeExports.jsxs("div",{className:"p-1 space-y-1",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-xs border-b border-border pb-1 mb-1",children:"Bank Details"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 text-xs",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Bank:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:Xe.bankDetails.bankName||"N/A"}),jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"A/C:"}),jsxRuntimeExports.jsx("span",{className:"font-medium font-mono",children:Xe.bankDetails.accountNumber||"N/A"}),jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"IFSC:"}),jsxRuntimeExports.jsx("span",{className:"font-medium font-mono",children:Xe.bankDetails.ifscCode||"N/A"})]})]}),children:jsxRuntimeExports.jsx("div",{className:"p-1.5 pt-0 rounded-full hover:bg-bg-active text-text-muted hover:text-brand-primary cursor-pointer transition-colors",children:jsxRuntimeExports.jsx(Landmark,{size:18})})})]})},{header:"Status",render:Xe=>{const Ze=n.find(St=>St.employee._id===Xe._id),er=Ze?Ze.status:"Not Processed";return jsxRuntimeExports.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border
              ${er==="Paid"?"bg-status-success/10 text-status-success border-status-success/20":er==="Approved"?"bg-brand-primary/10 text-brand-primary border-brand-primary/20":er==="Draft"?"bg-status-warning/10 text-status-warning border-status-warning/20":"bg-bg-secondary text-text-secondary border-border"}`,children:er})}},{header:"Gross Salary",render:Xe=>{const Ze=n.find(er=>er.employee._id===Xe._id);return jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:Ze?`${Ze.grossSalary.toLocaleString()}`:"-"})}},{header:"Net Payable",render:Xe=>{const Ze=n.find(er=>er.employee._id===Xe._id);return jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:Ze?`${Ze.netSalary.toLocaleString()}`:"-"})}},{header:"Actions",className:"text-right",render:Xe=>{const Ze=n.find(er=>er.employee._id===Xe._id);return jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[!Ze&&jsxRuntimeExports.jsx("button",{onClick:er=>{er.stopPropagation(),Ge(Xe._id)},disabled:De,className:"px-3 py-1.5 bg-brand-primary text-white hover:bg-brand-secondary rounded-md text-xs font-medium transition-colors shadow-sm",children:"Calculate"}),Ze&&Ze.status==="Draft"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:er=>{er.stopPropagation(),Ye(Ze._id,"Approved")},className:"px-3 py-1.5 bg-status-success text-white hover:bg-status-success/90 rounded-md text-xs font-medium transition-colors shadow-sm",children:"Approve"}),jsxRuntimeExports.jsx("button",{onClick:er=>{er.stopPropagation(),Ge(Xe._id)},disabled:De,className:"px-3 py-1.5 border border-border text-text-secondary hover:bg-bg-active hover:text-text-primary rounded-md text-xs font-medium transition-all",children:"Recalculate"})]}),Ze&&Ze.status==="Approved"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:er=>{er.stopPropagation(),Ye(Ze._id,"Paid")},className:"px-3 py-1.5 bg-brand-primary text-white hover:bg-brand-secondary rounded-md text-xs font-medium transition-colors shadow-sm",children:"Mark as Paid"}),jsxRuntimeExports.jsx("button",{onClick:er=>{er.stopPropagation(),Ge(Xe._id)},disabled:De,className:"px-3 py-1.5 border border-border text-text-secondary hover:bg-bg-active hover:text-text-primary rounded-md text-xs font-medium transition-all",children:"Recalculate"})]}),Ze&&Ze.status==="Paid"&&jsxRuntimeExports.jsx("button",{onClick:er=>{er.stopPropagation(),Ge(Xe._id)},disabled:De,className:"px-3 py-1.5 border border-border text-text-secondary hover:bg-bg-active hover:text-text-primary rounded-md text-xs font-medium transition-all",children:"Recalculate"})]})}}],[n,De]);return jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-lg border border-border p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4 mb-6 items-center bg-bg-main p-4 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"w-40",children:jsxRuntimeExports.jsx(Select,{value:Re,onChange:Xe=>Ce(Xe),options:["January","February","March","April","May","June","July","August","September","October","November","December"].map(Xe=>({value:Xe,label:Xe}))})}),jsxRuntimeExports.jsx("div",{className:"w-28",children:jsxRuntimeExports.jsx(Select,{value:Te,onChange:Xe=>Me(Number(Xe)),options:(()=>{const Xe=new Date().getFullYear();return Array.from({length:100},(Ze,er)=>{const St=Xe-50+er;return{value:St,label:String(St)}})})()})}),jsxRuntimeExports.jsxs("div",{className:"ml-auto text-sm text-text-secondary",children:["Process payroll for ",Re," ",Te]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-4 border-b border-border bg-bg-secondary/30",children:jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-text-primary",children:["Payroll Processing (",e.length," Employees)"]})}),jsxRuntimeExports.jsx(Table$1,{columns:Ke,data:e,isLoading:Be,emptyMessage:"No employees found to process."})]}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:$e,onClose:()=>He(!1),onConfirm:()=>He(!1),title:"Processing Error",message:Ue,confirmText:"OK",variant:"danger",isLoading:!1})]})}function PayslipView(){const{user:e}=useAuth(),[t,n]=reactExports.useState([]),[Ee,Re]=reactExports.useState(!0);reactExports.useEffect(()=>{Ce()},[]);const Ce=async()=>{try{const Me=await apiService.getMyPayslips();n(Me.payslips||[])}catch{console.error("Failed to load payslips")}finally{Re(!1)}},Te=async Me=>{await generatePayslipPDF(Me,e)};return Ee?jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(Me=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-lg p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-16"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-10 rounded-full"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 border-b border-border pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-20"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-20"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-16"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-32"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-9 w-full rounded-lg"})]},Me))}):jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.length===0?jsxRuntimeExports.jsxs("div",{className:"col-span-full text-center py-12 text-text-muted bg-bg-card border border-border rounded-lg",children:[jsxRuntimeExports.jsx(FileText,{size:48,className:"mx-auto mb-2 opacity-20"}),jsxRuntimeExports.jsx("p",{children:"No payslips available yet."})]}):t.map(Me=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-lg p-6 hover:shadow-md transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-lg text-text-primary",children:[Me.month," ",Me.year]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary",children:"Payslip"})]}),jsxRuntimeExports.jsx("div",{className:"bg-brand-primary/5 p-2 rounded-full text-brand-primary",children:jsxRuntimeExports.jsx(FileText,{size:24})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 mb-6 border-b border-border pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Basic Pay"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:["",Me.basicPay.toLocaleString()]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Total Allowances"}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-status-success",children:["+ ",(Me.grossSalary-Me.basicPay-Me.hra).toLocaleString()]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:"Deductions"}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-status-error",children:["- ",Me.totalDeductions.toLocaleString()]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Net Pay"}),jsxRuntimeExports.jsxs("span",{className:"text-xl font-bold text-brand-primary",children:["",Me.netSalary.toLocaleString()]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Te(Me),className:"w-full flex items-center justify-center gap-2 px-4 py-2 border border-border rounded-lg hover:bg-bg-hover transition-colors text-sm font-medium text-text-primary",children:[jsxRuntimeExports.jsx(Download,{size:16})," Download PDF"]})]},Me._id))})}function PayrollDashboard(){const{user:e}=useAuth(),t=()=>(e==null?void 0:e.role)==="Employee"||(e==null?void 0:e.role)==="Intern"||(e==null?void 0:e.role)==="Consultant"||(e==null?void 0:e.role)==="Project Manager"?"payslips":(e==null?void 0:e.role)==="Accountant"?"processing":(e==null?void 0:e.role)==="HR"?"structure":"processing",[n,Ee]=reactExports.useState(t()),Re=(e==null?void 0:e.role)==="HR"||(e==null?void 0:e.role)==="Admin",Ce=(e==null?void 0:e.role)==="Accountant"||(e==null?void 0:e.role)==="Admin";return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Payroll & Finance"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Manage salaries, process payrolls, and view payslips."})]}),jsxRuntimeExports.jsxs("div",{className:"flex border-b border-border overflow-x-auto",children:[Ce&&jsxRuntimeExports.jsxs("button",{onClick:()=>Ee("processing"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${n==="processing"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[jsxRuntimeExports.jsx(IndianRupee,{size:18}),"Payroll Processing"]}),Re&&jsxRuntimeExports.jsxs("button",{onClick:()=>Ee("structure"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${n==="structure"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[jsxRuntimeExports.jsx(Settings,{size:18}),"Salary Structures"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ee("payslips"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${n==="payslips"?"border-brand-primary text-brand-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[jsxRuntimeExports.jsx(FileText,{size:18}),"My Payslips"]})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4",children:[n==="processing"&&Ce&&jsxRuntimeExports.jsx(PayrollProcessor,{}),n==="structure"&&Re&&jsxRuntimeExports.jsx(SalaryStructureManager,{}),n==="payslips"&&jsxRuntimeExports.jsx(PayslipView,{})]})]})}function CreateProjectModal({onClose:e,onSuccess:t}){const[n,Ee]=reactExports.useState({name:"",client:"",description:"",manager:"",startDate:"",endDate:"",members:[]}),[Re,Ce]=reactExports.useState([]),[Te,Me]=reactExports.useState(!1);reactExports.useEffect(()=>{De()},[]);const De=async()=>{try{const ze=await apiService.getEmployees();Ce(Array.isArray(ze)?ze:ze.employees||[])}catch{console.error("Failed to load users")}},Oe=ze=>{Ee($e=>$e.members.includes(ze)?{...$e,members:$e.members.filter(Ue=>Ue!==ze)}:{...$e,members:[...$e.members,ze]})},Be=async ze=>{ze.preventDefault();try{Me(!0),await apiService.createProject(n),t()}catch{alert("Failed to create project")}finally{Me(!1)}};return jsxRuntimeExports.jsx(Modal,{isOpen:!0,onClose:e,title:"Create New Project",maxWidth:"max-w-lg",footer:jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>Be({preventDefault:()=>{}}),className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors disabled:opacity-50 flex items-center gap-2",disabled:Te,children:Te?"Creating...":"Create Project"})]}),children:jsxRuntimeExports.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"Project Name *",type:"text",required:!0,value:n.name,onChange:ze=>Ee({...n,name:ze.target.value})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"Client Name",type:"text",value:n.client,onChange:ze=>Ee({...n,client:ze.target.value})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Project Manager *",required:!0,value:n.manager,onChange:ze=>Ee({...n,manager:ze}),options:Re.map(ze=>{var $e;return{value:(($e=ze.user)==null?void 0:$e._id)||ze._id,label:`${ze.firstName} ${ze.lastName}`}}),helperText:"Select the person responsible for this project."})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Team Members (",n.members.length,")"]}),jsxRuntimeExports.jsx("div",{className:"border border-border rounded-lg p-2 max-h-40 overflow-y-auto space-y-2",children:Re.length===0?jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary text-center py-2",children:"No employees found."}):Re.map(ze=>{var He;const $e=((He=ze.user)==null?void 0:He._id)||ze._id;return jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 p-2 hover:bg-bg-hover rounded cursor-pointer",children:jsxRuntimeExports.jsx(Checkbox,{checked:n.members.includes($e),onChange:()=>Oe($e),label:jsxRuntimeExports.jsxs("span",{className:"text-sm text-text-primary",children:[ze.firstName," ",ze.lastName," ",jsxRuntimeExports.jsxs("span",{className:"text-text-secondary text-xs",children:["(",ze.designation,")"]})]})})},$e)})}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Select employees to assign to this project."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DatePicker,{label:"Start Date *",name:"startDate",required:!0,value:n.startDate,onChange:ze=>Ee({...n,startDate:ze.target.value})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DatePicker,{label:"End Date",name:"endDate",value:n.endDate,onChange:ze=>Ee({...n,endDate:ze.target.value})})})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Textarea,{label:"Description",rows:3,value:n.description,onChange:ze=>Ee({...n,description:ze.target.value})})})]})})}function ProjectDashboard(){const{user:e}=useAuth(),[t,n]=reactExports.useState([]),[Ee,Re]=reactExports.useState(!0),[Ce,Te]=reactExports.useState(!1);reactExports.useEffect(()=>{Me()},[]);const Me=async()=>{try{Re(!0);const Oe=await apiService.getProjects();n(Oe.projects||[])}catch{console.error("Failed to load projects")}finally{Re(!1)}},De=(e==null?void 0:e.role)==="Project Manager"||(e==null?void 0:e.role)==="Admin";return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Projects"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Manage and track your projects and tasks."})]}),De&&jsxRuntimeExports.jsx(Button,{onClick:()=>Te(!0),leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"New Project"})]}),Ee?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(Oe=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-lg p-5 flex flex-col h-[180px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2 flex-1",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-3/4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-1/3"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-16 rounded ml-4"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 mb-4 flex-1",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-5/6"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 border-t border-border pt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-4 h-4 rounded-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-20"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-4 h-4 rounded-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-16"})]})]})]},Oe))}):t.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12 bg-bg-card border border-border rounded-lg",children:[jsxRuntimeExports.jsx(Briefcase,{size:48,className:"mx-auto mb-4 text-text-muted opacity-50"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-text-primary",children:"No Projects Found"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mb-4",children:"Get started by creating a new project."}),De&&jsxRuntimeExports.jsx(Button,{onClick:()=>Te(!0),children:"Create Project"})]}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(Oe=>{var Be;return jsxRuntimeExports.jsxs(Link$1,{to:`/projects/${Oe._id}`,className:"bg-bg-card border border-border rounded-lg p-5 hover:shadow-md transition-shadow group",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg text-text-primary group-hover:text-brand-primary transition-colors",children:Oe.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary",children:Oe.client})]}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${Oe.status==="Active"?"bg-status-success/10 text-status-success":"bg-text-muted/10 text-text-muted"}`,children:Oe.status})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary line-clamp-2 mb-4 h-10",children:Oe.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-secondary border-t border-border pt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar$1,{size:14}),jsxRuntimeExports.jsx("span",{children:Oe.endDate?new Date(Oe.endDate).toLocaleDateString():"No deadline"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[jsxRuntimeExports.jsx(Users,{size:14}),jsxRuntimeExports.jsxs("span",{children:[((Be=Oe.members)==null?void 0:Be.length)||0," Members"]})]})]})]},Oe._id)})}),Ce&&jsxRuntimeExports.jsx(CreateProjectModal,{onClose:()=>Te(!1),onSuccess:()=>{Te(!1),Me()}})]})}function TaskBoard({projectId:e}){const[t,n]=reactExports.useState([]),[Ee,Re]=reactExports.useState(!0);reactExports.useEffect(()=>{e&&Ce()},[e]);const Ce=async()=>{try{const De=await apiService.getTasks({projectId:e});n(De.tasks||[])}catch{console.error("Failed to load tasks")}finally{Re(!1)}},Te=async(De,Oe)=>{try{const Be=t.map(ze=>ze._id===De?{...ze,status:Oe}:ze);n(Be),await apiService.updateTask(De,{status:Oe})}catch{console.error("Failed to update status"),Ce()}},Me=["To Do","In Progress","Review","Done"];return Ee?jsxRuntimeExports.jsx("div",{className:"flex justify-center py-12",children:jsxRuntimeExports.jsx(Loader,{size:32})}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 h-full overflow-x-auto",children:Me.map(De=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-main rounded-lg p-4 min-w-[250px]",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-text-secondary text-sm mb-3 flex justify-between",children:[De,jsxRuntimeExports.jsx("span",{className:"bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:t.filter(Oe=>Oe.status===De).length})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[t.filter(Oe=>Oe.status===De).map(Oe=>{var Be;return jsxRuntimeExports.jsxs("div",{className:"bg-white border border-border rounded p-3 shadow-sm hover:shadow-md transition-all cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-sm text-text-primary mb-1",children:Oe.title}),jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full ${Oe.priority==="High"||Oe.priority==="Urgent"?"bg-status-error":Oe.priority==="Low"?"bg-status-success":"bg-status-warning"}`,title:Oe.priority})]}),Oe.assignee&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 rounded-full bg-brand-primary/10 flex items-center justify-center text-[10px] text-brand-primary font-bold",children:((Be=Oe.assignee.name)==null?void 0:Be.charAt(0))||"U"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-text-secondary truncate",children:Oe.assignee.name})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-1 mt-3 pt-2 border-t border-gray-100",children:[De!=="To Do"&&jsxRuntimeExports.jsx("button",{onClick:()=>Te(Oe._id,Me[Me.indexOf(De)-1]),className:"text-[10px] px-1 bg-gray-100 rounded hover:bg-gray-200",children:"< Back"}),De!=="Done"&&jsxRuntimeExports.jsx("button",{onClick:()=>Te(Oe._id,Me[Me.indexOf(De)+1]),className:"text-[10px] px-1 bg-gray-100 rounded hover:bg-gray-200",children:"Next >"})]})]},Oe._id)}),t.filter(Oe=>Oe.status===De).length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-4 text-xs text-gray-400 border border-dashed border-gray-200 rounded",children:"No tasks"})]})]},De))})}function CreateTaskModal({projectId:e,onClose:t,onSuccess:n}){const[Ee,Re]=reactExports.useState({title:"",description:"",assignee:"",priority:"Medium",dueDate:""}),[Ce,Te]=reactExports.useState([]),[Me,De]=reactExports.useState(!1);reactExports.useEffect(()=>{Oe()},[]);const Oe=async()=>{try{const ze=await apiService.getEmployees();Te(Array.isArray(ze)?ze:ze.employees||[])}catch{console.error("Failed to load users")}},Be=async ze=>{ze.preventDefault();try{De(!0),await apiService.createTask({...Ee,project:e}),n()}catch{alert("Failed to create task")}finally{De(!1)}};return jsxRuntimeExports.jsx(Modal,{isOpen:!0,onClose:t,title:"New Task",maxWidth:"max-w-md",footer:jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>Be({preventDefault:()=>{}}),className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors disabled:opacity-50 flex items-center gap-2",disabled:Me,children:Me?"Creating...":"Create Task"})]}),children:jsxRuntimeExports.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"Title *",type:"text",required:!0,value:Ee.title,onChange:ze=>Re({...Ee,title:ze.target.value})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Assignee",value:Ee.assignee,onChange:ze=>Re({...Ee,assignee:ze}),options:Ce.map(ze=>{var $e;return{value:(($e=ze.user)==null?void 0:$e._id)||ze._id,label:`${ze.firstName} ${ze.lastName}`}}),placeholder:"Unassigned"})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Priority",value:Ee.priority,onChange:ze=>Re({...Ee,priority:ze}),options:[{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"},{value:"Urgent",label:"Urgent"}]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DatePicker,{label:"Due Date",value:Ee.dueDate,onChange:ze=>Re({...Ee,dueDate:ze.target.value})})})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Textarea,{label:"Description",rows:2,value:Ee.description,onChange:ze=>Re({...Ee,description:ze.target.value})})})]})})}function ProjectDetails(){var He;const{id:e}=useParams(),t=useNavigate(),{user:n}=useAuth(),[Ee,Re]=reactExports.useState(null),[Ce,Te]=reactExports.useState(!0),[Me,De]=reactExports.useState(!1);reactExports.useEffect(()=>{e&&Oe(e)},[e]);const Oe=async Ue=>{try{Te(!0);const Ve=await apiService.getProjectById(Ue);Re(Ve.project)}catch{console.error("Failed to load project")}finally{Te(!1)}};if(Ce)return jsxRuntimeExports.jsx("div",{className:"flex justify-center py-12",children:jsxRuntimeExports.jsx(Loader,{size:32})});if(!Ee)return jsxRuntimeExports.jsx("div",{children:"Project not found"});const Be=(n==null?void 0:n.role)==="Project Manager"||(n==null?void 0:n.role)==="Admin",ze=n!=null&&n.tenantId&&typeof n.tenantId=="object"&&"limits"in n.tenantId?n.tenantId.limits:null,$e=!ze||!ze.enabledModules||ze.enabledModules.includes("tasks");return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>t("/projects"),className:"flex items-center gap-1 text-sm text-text-secondary hover:text-brand-primary",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16})," Back to Projects"]}),jsxRuntimeExports.jsxs("div",{className:"bg-white border border-border rounded-lg p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:Ee.name}),jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold border ${Ee.status==="Active"?"bg-status-success/10 text-status-success border-status-success/20":"bg-gray-100 text-gray-500 border-gray-200"}`,children:Ee.status})]}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-lg",children:Ee.client})]}),Be&&$e&&jsxRuntimeExports.jsx(Button,{onClick:()=>De(!0),leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Add Task"})]}),jsxRuntimeExports.jsx("p",{className:"text-text-primary mb-6 max-w-3xl",children:Ee.description}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 py-4 border-t border-border",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-text-secondary uppercase font-semibold flex items-center gap-1 mb-1",children:[jsxRuntimeExports.jsx(Calendar$1,{size:14})," Start Date"]}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:Ee.startDate?new Date(Ee.startDate).toLocaleDateString():"N/A"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-text-secondary uppercase font-semibold flex items-center gap-1 mb-1",children:[jsxRuntimeExports.jsx(Calendar$1,{size:14})," Deadline"]}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:Ee.endDate?new Date(Ee.endDate).toLocaleDateString():"N/A"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-text-secondary uppercase font-semibold flex items-center gap-1 mb-1",children:[jsxRuntimeExports.jsx(Users,{size:14})," Manager"]}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-brand-primary",children:((He=Ee.manager)==null?void 0:He.name)||"Unassigned"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-text-secondary uppercase font-semibold flex items-center gap-1 mb-1",children:[jsxRuntimeExports.jsx(DollarSign,{size:14})," Budget"]}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:Ee.budget?`$${Ee.budget.toLocaleString()}`:"N/A"})]})]})]}),$e&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-text-primary mb-4",children:"Tasks"}),jsxRuntimeExports.jsx(TaskBoard,{projectId:Ee._id})]}),Me&&jsxRuntimeExports.jsx(CreateTaskModal,{projectId:Ee._id,onClose:()=>De(!1),onSuccess:()=>{De(!1),window.location.reload()}})]})}function QAConfig(){const[e,t]=reactExports.useState(null),[n,Ee]=reactExports.useState(!1),[Re,Ce]=reactExports.useState(null),[Te,Me]=reactExports.useState([]);reactExports.useEffect(()=>{De()},[]);const De=async()=>{try{const $e=await apiService.getPolicyStatus();$e.policies&&Me($e.policies)}catch($e){console.error("Failed to fetch policy status",$e)}},Oe=$e=>{if($e.target.files&&$e.target.files.length>0){const He=$e.target.files;for(let Ue=0;Ue<He.length;Ue++)if(He[Ue].type!=="application/pdf"){Ce({type:"error",text:"Only PDF files are allowed"});return}t(He),Ce(null)}},Be=async()=>{if(!(!e||e.length===0)){Ee(!0),Ce(null);try{await apiService.uploadPolicy(e),Ce({type:"success",text:"Policies uploaded successfully!"}),t(null),De()}catch($e){Ce({type:"error",text:$e.message||"Upload failed"})}finally{Ee(!1)}}},ze=async $e=>{if(window.confirm("Are you sure you want to remove this document?"))try{await apiService.deletePolicy($e),De(),Ce({type:"success",text:"Document removed successfully"})}catch(He){Ce({type:"error",text:He.message||"Failed to delete document"})}};return jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-xl shadow-sm border border-border p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-brand-primary/10 rounded-lg text-brand-primary",children:jsxRuntimeExports.jsx(FileText,{size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"AI Chatbot Configuration"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm",children:"Manage Knowledge Base Documents"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-main rounded-lg p-4 border border-border",children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-text-secondary mb-3 uppercase tracking-wider",children:["Active Documents (",Te.length,")"]}),Te.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Te.map($e=>{var He;return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between bg-bg-card p-3 rounded-lg border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"text-status-success shrink-0 mt-0.5",size:18}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-text-primary",children:$e.originalName}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Uploaded by ",(He=$e.uploadedBy)==null?void 0:He.name," on"," ",new Date($e.createdAt).toLocaleDateString()]})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ze($e._id),className:"p-2 text-text-muted hover:text-status-error hover:bg-status-error/10 rounded-lg transition-colors",title:"Remove Document",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]},$e._id)})}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-text-muted italic",children:[jsxRuntimeExports.jsx(CircleAlert,{size:16}),jsxRuntimeExports.jsx("p",{children:"No active documents found."})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2 text-text-primary",children:"Upload New Documents (PDF Only)"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("input",{type:"file",multiple:!0,accept:"application/pdf",onChange:Oe,className:`w-full text-sm text-text-secondary
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-lg file:border-0
                  file:text-sm file:font-semibold
                  file:bg-brand-primary/10 file:text-brand-primary
                  hover:file:bg-brand-primary/20
                  cursor-pointer bg-bg-main rounded-lg border border-border`}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted mt-2",children:"You can upload multiple documents. New uploads will be added to the knowledge base."})]}),jsxRuntimeExports.jsxs("button",{onClick:Be,disabled:!e||n,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[n?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:18}):jsxRuntimeExports.jsx(Upload,{size:18}),"Upload"]})]})]}),Re&&jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg text-sm flex items-center gap-2 ${Re.type==="success"?"bg-status-success/10 text-status-success":"bg-status-error/10 text-status-error"}`,children:[Re.type==="success"?jsxRuntimeExports.jsx(CircleCheckBig,{size:16}):jsxRuntimeExports.jsx(CircleAlert,{size:16}),Re.text]})]})]})}const TreeNode=({node:e})=>{const[t,n]=reactExports.useState(!0),Ee=e.children&&e.children.length>0;return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:`
          flex flex-col items-center p-3 rounded-lg border bg-white shadow-sm hover:shadow-md transition-all
          ${Ee?"cursor-pointer":""}
          w-48 relative z-10
        `,onClick:()=>Ee&&n(!t),children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden mb-2 border-2 border-brand-primary/20",children:jsxRuntimeExports.jsx(Avatar,{src:e.profilePicture?e.profilePicture.startsWith("http")?e.profilePicture:`${ASSET_BASE_URL}${e.profilePicture}`.replace("//uploads","/uploads"):void 0,name:`${e.firstName} ${e.lastName}`,alt:e.firstName,className:"w-full h-full",size:"md"})}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-text-primary text-sm truncate w-full",children:[e.firstName," ",e.lastName]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary truncate w-full",children:e.designation||"N/A"})]}),Ee&&jsxRuntimeExports.jsx("div",{className:"absolute -bottom-3 bg-white rounded-full p-0.5 border border-border",children:t?jsxRuntimeExports.jsx(ChevronDown,{size:14}):jsxRuntimeExports.jsx(ChevronRight,{size:14})})]}),Ee&&t&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mt-4 relative",children:[jsxRuntimeExports.jsx("div",{className:"w-px h-4 bg-border absolute -top-4"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 pt-4 relative",children:[e.children.length>1&&jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 h-px bg-border w-[calc(100%-12rem)]"}),e.children.map(Re=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center relative",children:[jsxRuntimeExports.jsx("div",{className:"w-px h-4 bg-border absolute -top-4"}),jsxRuntimeExports.jsx(TreeNode,{node:Re})]},Re._id))]})]})]})};function TeamHierarchy(){const{showToast:e}=useNotification(),[t,n]=reactExports.useState("hierarchy"),[Ee,Re]=reactExports.useState([]),[Ce,Te]=reactExports.useState([]),[Me,De]=reactExports.useState(!0),[Oe,Be]=reactExports.useState(null),[ze,$e]=reactExports.useState("");reactExports.useEffect(()=>{He()},[]);const He=async()=>{try{De(!0);const[We,qe]=await Promise.all([apiService.getHierarchy(),apiService.getEmployees()]),Ge=Ue(We);Re(Ge),Te(qe)}catch(We){console.error(We),Be(We.message||"Failed to load data")}finally{De(!1)}},Ue=We=>{const qe=new Map,Ge=[];return We.forEach(Ye=>{qe.set(Ye._id,{...Ye,children:[]})}),We.forEach(Ye=>{const Ke=qe.get(Ye._id);if(Ye.reportingManager&&typeof Ye.reportingManager=="object"&&"_id"in Ye.reportingManager&&qe.has(Ye.reportingManager._id)){const Xe=Ye.reportingManager._id;qe.get(Xe).children.push(Ke)}else Ge.push(Ke)}),Ge},Ve=Ce.filter(We=>{const qe=ze.toLowerCase();return We.firstName.toLowerCase().includes(qe)||We.lastName.toLowerCase().includes(qe)||We.designation.toLowerCase().includes(qe)||We.department&&We.department.toLowerCase().includes(qe)});return Me?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-[600px] bg-bg-card rounded-lg border border-border p-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-8 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border border-border bg-bg-main w-48 shadow-sm",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-12 h-12 rounded-full mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"w-32 h-4 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"w-24 h-3"})]}),jsxRuntimeExports.jsx("div",{className:"w-px h-8 bg-border absolute -bottom-8"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-8 relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 w-[calc(100%-12rem)] h-px bg-border"}),[1,2].map(We=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center relative",children:[jsxRuntimeExports.jsx("div",{className:"w-px h-4 bg-border absolute -top-4"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border border-border bg-bg-main w-48 shadow-sm",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-12 h-12 rounded-full mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"w-32 h-4 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"w-24 h-3"})]})]},We))]})]}):Oe?jsxRuntimeExports.jsx("div",{className:"text-center text-red-500 p-8 bg-red-50 rounded-lg",children:Oe}):jsxRuntimeExports.jsx("div",{className:"flex flex-col h-full gap-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border flex flex-col h-full min-h-[600px] overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between border-b border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex overflow-x-auto",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>n("hierarchy"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap border-b-2 ${t==="hierarchy"?"border-brand-primary text-brand-primary bg-brand-primary/5":"border-transparent text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[jsxRuntimeExports.jsx(Network,{size:16}),"Org Chart"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("directory"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap border-b-2 ${t==="directory"?"border-brand-primary text-brand-primary bg-brand-primary/5":"border-transparent text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[jsxRuntimeExports.jsx(LayoutGrid,{size:16}),"Directory"]})]}),t==="directory"&&jsxRuntimeExports.jsx("div",{className:"pr-2 w-full md:w-auto",children:jsxRuntimeExports.jsx("div",{className:"relative w-full md:w-64",children:jsxRuntimeExports.jsx(Input,{placeholder:"Search employees...",value:ze,onChange:We=>$e(We.target.value),leftIcon:jsxRuntimeExports.jsx(Search,{className:"text-text-muted",size:16}),className:"bg-bg-secondary w-full"})})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 relative",children:t==="hierarchy"?jsxRuntimeExports.jsx("div",{className:"absolute inset-0 overflow-auto p-8 flex justify-center bg-bg-secondary/20",children:jsxRuntimeExports.jsx("div",{className:"min-w-max flex justify-center gap-12",children:Ee.length>0?Ee.map(We=>jsxRuntimeExports.jsx(TreeNode,{node:We},We._id)):jsxRuntimeExports.jsx("div",{className:"text-center text-text-secondary mt-12",children:"No hierarchy data available."})})}):jsxRuntimeExports.jsx("div",{className:"absolute inset-0 overflow-auto p-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[Ve.map(We=>jsxRuntimeExports.jsxs("div",{className:"group relative bg-bg-card border border-border rounded-xl hover:shadow-lg transition-all duration-300 hover:-translate-y-1 overflow-hidden flex flex-col items-center text-center p-4",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-brand-primary to-brand-secondary opacity-80"}),jsxRuntimeExports.jsxs("div",{className:"mt-2 mb-3 relative",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-white dark:border-gray-800 shadow-md ring-1 ring-black/5 dark:ring-white/10 overflow-hidden",children:jsxRuntimeExports.jsx(Avatar,{src:We.profilePicture?We.profilePicture.startsWith("http")?We.profilePicture:`${ASSET_BASE_URL}${We.profilePicture}`.replace("//uploads","/uploads"):void 0,name:`${We.firstName} ${We.lastName}`,alt:We.firstName,className:"w-full h-full",size:"md"})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 p-0.5 bg-bg-card rounded-full",children:jsxRuntimeExports.jsx("div",{className:`w-3 h-3 rounded-full border-2 border-bg-card ${We.isOnline?"bg-status-success":"bg-gray-300"}`,title:We.isOnline?"Online":"Offline"})})]}),jsxRuntimeExports.jsxs("div",{className:"w-full mb-3",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-text-primary text-sm truncate px-1",children:[We.firstName," ",We.lastName]}),jsxRuntimeExports.jsx("p",{className:"text-brand-primary text-xs font-medium truncate px-1 mb-1",children:We.designation}),jsxRuntimeExports.jsx("span",{className:"inline-block px-2 py-0.5 bg-bg-secondary text-text-secondary text-xs rounded-full truncate max-w-full",children:We.department||"General"})]}),jsxRuntimeExports.jsxs("div",{className:"w-full flex items-center justify-center gap-2 mt-auto pt-3 border-t border-border/50",children:[We.workPhone&&jsxRuntimeExports.jsx(Tooltip,{content:`Work: ${We.workPhone} (Click to copy)`,children:jsxRuntimeExports.jsx("button",{onClick:()=>{navigator.clipboard.writeText(We.workPhone),e("Work phone copied to clipboard","success")},className:"p-2 rounded-full bg-bg-hover text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 transition-colors",children:jsxRuntimeExports.jsx(Phone,{size:14})})}),We.personalMobile&&jsxRuntimeExports.jsx(Tooltip,{content:`Mobile: ${We.personalMobile} (Click to copy)`,children:jsxRuntimeExports.jsx("button",{onClick:()=>{navigator.clipboard.writeText(We.personalMobile),e("Mobile number copied to clipboard","success")},className:"p-2 rounded-full bg-bg-hover text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 transition-colors",children:jsxRuntimeExports.jsx(Smartphone,{size:14})})}),jsxRuntimeExports.jsx(Tooltip,{content:`Email: ${We.email} (Click to copy)`,children:jsxRuntimeExports.jsx("button",{onClick:()=>{We.email&&(navigator.clipboard.writeText(We.email),e("Email copied to clipboard","success"))},className:"p-2 rounded-full bg-bg-hover text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 transition-colors",children:jsxRuntimeExports.jsx(Mail,{size:14})})})]})]},We._id)),Ve.length===0&&jsxRuntimeExports.jsx("div",{className:"col-span-full text-center py-12 text-text-secondary",children:"No employees found matching your search."})]})})})]})})}function Organization(){return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Organization Structure"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"View the reporting hierarchy of the organization."})]}),jsxRuntimeExports.jsx(TeamHierarchy,{})]})}const MODULES=[{key:"employees",label:"Employee Management",shortLabel:"Employees"},{key:"roles",label:"Role Management",shortLabel:"Roles"},{key:"assets",label:"Asset Management",shortLabel:"Assets"},{key:"ai_chatbot",label:"AI Chatbot Configuration",shortLabel:"AI Chatbot"},{key:"audit",label:"Audit Trail",shortLabel:"Audit"},{key:"leave",label:"Leave Management",shortLabel:"Leave"},{key:"attendance",label:"Attendance",shortLabel:"Attendance"},{key:"payroll",label:"Payroll & Finance",shortLabel:"Payroll"},{key:"projects",label:"Project Management",shortLabel:"Projects"},{key:"organization",label:"Organization Structure",shortLabel:"Org Structure"},{key:"feedback",label:"Feedback",shortLabel:"Feedback"},{key:"social",label:"Social Wall",shortLabel:"Social Wall"},{key:"appreciation",label:"Appreciation",shortLabel:"Appreciation"},{key:"email_automation",label:"Email Automation",shortLabel:"Email Auto"},{key:"tasks",label:"Task",shortLabel:"Tasks"},{key:"timesheet",label:"Timesheet Management",shortLabel:"Timesheets"},{key:"timesheet",label:"Timesheet Management",shortLabel:"Timesheet"},{key:"shifts",label:"Shift Management",shortLabel:"Shifts"},{key:"attendance",label:"Attendance & Time Tracking",shortLabel:"Attendance"},{key:"policies",label:"Policy Management",shortLabel:"Policies"},{key:"documents",label:"Document Management",shortLabel:"Documents"}],MODULE_KEYS=MODULES.map(e=>e.key),CreateTenantModal=({onClose:e,onCreate:t})=>{const[n,Ee]=reactExports.useState({companyName:"",ownerEmail:"",plan:"free",subdomain:"",limits:{enabledModules:MODULE_KEYS}}),[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState(""),[De,Oe]=reactExports.useState(null),[Be,ze]=reactExports.useState(null),[$e,He]=reactExports.useState(null),[Ue,Ve]=reactExports.useState(null),[We,qe]=reactExports.useState(null),Ge=(Xe,Ze)=>{if(Xe.target.files&&Xe.target.files[0]){const er=Xe.target.files[0];Ze==="logo"?ze(er):He(er);const St=new FileReader;St.onloadend=()=>{Ze==="logo"?Ve(St.result):qe(St.result)},St.readAsDataURL(er)}},Ye=async Xe=>{Xe.preventDefault(),Me(""),Ce(!0);try{const Ze=new FormData;Ze.append("companyName",n.companyName),Ze.append("ownerEmail",n.ownerEmail),Ze.append("plan",n.plan),Ze.append("subdomain",n.subdomain),Ze.append("limits",JSON.stringify(n.limits)),Be&&Ze.append("logo",Be),$e&&Ze.append("favicon",$e);const er=await apiService.createTenant(Ze);Oe({email:er.admin.email,password:er.admin.tempPassword}),t()}catch(Ze){Me(Ze.message||"Failed to create tenant")}finally{Ce(!1)}},Ke=Xe=>{Ee({...n,[Xe.target.name]:Xe.target.value})};return De?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:jsxRuntimeExports.jsx("svg",{className:"h-6 w-6 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Tenant Created Successfully!"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"The company admin account has been created. Please save these credentials:"}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-left mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:De.email})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Temporary Password"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-mono font-medium text-gray-900 dark:text-white bg-white dark:bg-gray-800 px-2 py-1 rounded",children:De.password})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mb-4",children:" The admin should change this password on first login"}),jsxRuntimeExports.jsx("button",{onClick:e,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})})}):jsxRuntimeExports.jsx(Modal,{isOpen:!0,onClose:e,title:"Create Tenant",maxWidth:"max-w-4xl",children:jsxRuntimeExports.jsxs("form",{onSubmit:Ye,className:"space-y-6",children:[Te&&jsxRuntimeExports.jsxs("div",{className:"bg-status-error/10 text-status-error p-4 rounded-lg flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx(X$1,{size:16}),Te]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Company Name ",jsxRuntimeExports.jsx("span",{className:"text-status-error",children:"*"})]}),jsxRuntimeExports.jsx(Input,{name:"companyName",value:n.companyName,onChange:Ke,className:"bg-bg-main",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Owner Email ",jsxRuntimeExports.jsx("span",{className:"text-status-error",children:"*"})]}),jsxRuntimeExports.jsx(Input,{type:"email",name:"ownerEmail",value:n.ownerEmail,onChange:Ke,className:"bg-bg-main",required:!0,placeholder:"admin@company.com"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Plan"}),jsxRuntimeExports.jsx(Select,{name:"plan",value:n.plan,onChange:Xe=>Ee({...n,plan:Xe}),options:[{value:"free",label:"Free"},{value:"basic",label:"Basic"},{value:"pro",label:"Pro"},{value:"enterprise",label:"Enterprise"}],className:"w-full"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subdomain (Optional)"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Input,{name:"subdomain",value:n.subdomain,onChange:Ke,className:"bg-bg-main rounded-r-none",placeholder:"company"})}),jsxRuntimeExports.jsx("span",{className:"px-3 py-2 bg-bg-secondary border-y border-r border-border rounded-r-lg text-text-secondary text-sm",children:".hrms.com"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"e.g., acme.yourhrms.com"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Image$2,{className:"text-brand-primary",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Branding"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Company Logo"}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-24 h-24 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[Ue?jsxRuntimeExports.jsx("img",{src:Ue,alt:"Logo preview",className:"w-full h-full object-contain"}):jsxRuntimeExports.jsx("span",{className:"text-text-muted text-[10px]",children:"No Logo"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-white text-[10px] font-medium",children:"Change"})}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Xe=>Ge(Xe,"logo"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Upload company logo."}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[jsxRuntimeExports.jsx(Upload,{size:14}),"Choose File",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Xe=>Ge(Xe,"logo"),className:"hidden"})]})})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Favicon"}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-16 h-16 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[We?jsxRuntimeExports.jsx("img",{src:We,alt:"Favicon preview",className:"w-8 h-8 object-contain"}):jsxRuntimeExports.jsx(Globe,{className:"text-text-muted",size:24}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-white text-[10px] font-medium",children:"Change"})}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Xe=>Ge(Xe,"favicon"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Upload favicon."}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[jsxRuntimeExports.jsx(Upload,{size:14}),"Choose File",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Xe=>Ge(Xe,"favicon"),className:"hidden"})]})})]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-base font-semibold text-text-primary",children:"Enabled Modules"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ee({...n,limits:{...n.limits,enabledModules:MODULE_KEYS}}),className:"text-xs font-medium text-brand-primary hover:text-brand-primary/80 transition-colors",children:"Select All"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ee({...n,limits:{...n.limits,enabledModules:[]}}),className:"text-xs font-medium text-text-secondary hover:text-text-primary transition-colors",children:"Deselect All"})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 bg-bg-secondary/50 rounded-lg border border-border",children:MODULES.map(Xe=>jsxRuntimeExports.jsx(Checkbox,{label:Xe.shortLabel||Xe.label,checked:n.limits.enabledModules.includes(Xe.key),onChange:Ze=>{const er=Ze.target.checked,St=n.limits.enabledModules;Ee({...n,limits:{...n.limits,enabledModules:er?[...St,Xe.key]:St.filter(ar=>ar!==Xe.key)}})}},Xe.key))})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-text-secondary bg-bg-main border border-border rounded-lg hover:bg-bg-hover transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Re,className:"px-4 py-2 text-sm font-medium text-white bg-brand-primary rounded-lg hover:bg-brand-primary/90 focus:ring-4 focus:ring-brand-primary/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:Re?"Creating...":"Create Tenant"})]})]})})},EditTenantModal=({tenant:e,onClose:t,onUpdate:n})=>{const[Ee,Re]=reactExports.useState({companyName:"",ownerEmail:"",plan:"free",subdomain:"",limits:{enabledModules:[]}}),[Ce,Te]=reactExports.useState(!1),[Me,De]=reactExports.useState(""),[Oe,Be]=reactExports.useState(null),[ze,$e]=reactExports.useState(null),[He,Ue]=reactExports.useState(null),[Ve,We]=reactExports.useState(null),qe=(Ke,Xe)=>{if(Ke.target.files&&Ke.target.files[0]){const Ze=Ke.target.files[0];Xe==="logo"?Be(Ze):$e(Ze);const er=new FileReader;er.onloadend=()=>{Xe==="logo"?Ue(er.result):We(er.result)},er.readAsDataURL(Ze)}};reactExports.useEffect(()=>{var Ke,Xe;if(e){Re({companyName:e.companyName||"",ownerEmail:e.ownerEmail||"",plan:e.plan||"free",subdomain:e.subdomain||"",limits:e.limits||{enabledModules:[]}});const Ze=((Ke=e.settings)==null?void 0:Ke.logo)||e.logo,er=((Xe=e.settings)==null?void 0:Xe.favicon)||e.favicon;Ze&&Ue(Ze),er&&We(er)}},[e]);const Ge=async Ke=>{Ke.preventDefault(),De(""),Te(!0);try{const Xe=new FormData;Xe.append("companyName",Ee.companyName),Xe.append("plan",Ee.plan),Xe.append("subdomain",Ee.subdomain),Xe.append("limits",JSON.stringify(Ee.limits)),Oe&&Xe.append("logo",Oe),ze&&Xe.append("favicon",ze),await apiService.updateTenant(e._id,Xe),n(),t()}catch(Xe){De(Xe.message||"Failed to update tenant")}finally{Te(!1)}},Ye=Ke=>{Re({...Ee,[Ke.target.name]:Ke.target.value})};return jsxRuntimeExports.jsx(Modal,{isOpen:!0,onClose:t,title:"Edit Tenant",maxWidth:"max-w-4xl",children:jsxRuntimeExports.jsxs("form",{onSubmit:Ge,className:"space-y-6",children:[Me&&jsxRuntimeExports.jsxs("div",{className:"bg-status-error/10 text-status-error p-4 rounded-lg flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx(X$1,{size:16}),Me]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Company Name"}),jsxRuntimeExports.jsx(Input,{name:"companyName",value:Ee.companyName,onChange:Ye,className:"bg-bg-main",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Owner Email"}),jsxRuntimeExports.jsx(Input,{type:"email",name:"ownerEmail",value:Ee.ownerEmail,onChange:Ye,className:"bg-bg-main opacity-70 cursor-not-allowed",required:!0,disabled:!0}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-text-secondary",children:"Cannot be changed after creation"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Plan"}),jsxRuntimeExports.jsx(Select,{name:"plan",value:Ee.plan,onChange:Ke=>Re({...Ee,plan:Ke}),options:[{value:"free",label:"Free"},{value:"basic",label:"Basic"},{value:"pro",label:"Pro"},{value:"enterprise",label:"Enterprise"}],className:"w-full"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subdomain (Optional)"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Input,{name:"subdomain",value:Ee.subdomain,onChange:Ye,className:"bg-bg-main rounded-r-none",placeholder:"company"})}),jsxRuntimeExports.jsx("span",{className:"px-3 py-2 bg-bg-secondary border-y border-r border-border rounded-r-lg text-text-secondary text-sm",children:".hrms.com"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Image$2,{className:"text-brand-primary",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Branding"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Company Logo"}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-24 h-24 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[He?jsxRuntimeExports.jsx("img",{src:He,alt:"Logo preview",className:"w-full h-full object-contain"}):jsxRuntimeExports.jsx("span",{className:"text-text-muted text-[10px]",children:"No Logo"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-white text-[10px] font-medium",children:"Change"})}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Ke=>qe(Ke,"logo"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Upload company logo."}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[jsxRuntimeExports.jsx(Upload,{size:14}),"Choose File",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Ke=>qe(Ke,"logo"),className:"hidden"})]})})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Favicon"}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-16 h-16 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[Ve?jsxRuntimeExports.jsx("img",{src:Ve,alt:"Favicon preview",className:"w-8 h-8 object-contain"}):jsxRuntimeExports.jsx(Globe,{className:"text-text-muted",size:24}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-white text-[10px] font-medium",children:"Change"})}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Ke=>qe(Ke,"favicon"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Upload favicon."}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[jsxRuntimeExports.jsx(Upload,{size:14}),"Choose File",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Ke=>qe(Ke,"favicon"),className:"hidden"})]})})]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-base font-semibold text-text-primary",children:"Enabled Modules"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Re({...Ee,limits:{...Ee.limits,enabledModules:MODULE_KEYS}}),className:"text-xs font-medium text-brand-primary hover:text-brand-primary/80 transition-colors",children:"Select All"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Re({...Ee,limits:{...Ee.limits,enabledModules:[]}}),className:"text-xs font-medium text-text-secondary hover:text-text-primary transition-colors",children:"Deselect All"})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 p-4 bg-bg-secondary/50 rounded-lg border border-border",children:MODULES.map(Ke=>{var Xe,Ze;return jsxRuntimeExports.jsx(Checkbox,{label:Ke.shortLabel||Ke.label,checked:((Ze=(Xe=Ee.limits)==null?void 0:Xe.enabledModules)==null?void 0:Ze.includes(Ke.key))||!1,onChange:er=>{var hr;const St=er.target.checked,ar=((hr=Ee.limits)==null?void 0:hr.enabledModules)||[];Re({...Ee,limits:{...Ee.limits,enabledModules:St?[...ar,Ke.key]:ar.filter(ur=>ur!==Ke.key)}})}},Ke.key)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-text-secondary bg-bg-main border border-border rounded-lg hover:bg-bg-hover transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ce,className:"px-4 py-2 text-sm font-medium text-white bg-brand-primary rounded-lg hover:bg-brand-primary/90 focus:ring-4 focus:ring-brand-primary/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:Ce?"Saving...":"Save Changes"})]})]})})},TenantList=()=>{const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(""),[Te,Me]=reactExports.useState("all"),[De,Oe]=reactExports.useState("all"),[Be,ze]=reactExports.useState(!1),[$e,He]=reactExports.useState(null),[Ue,Ve]=reactExports.useState(null),[We,qe]=reactExports.useState(!1);reactExports.useEffect(()=>{Ge()},[Te,De]);const Ge=async()=>{try{Ee(!0);const St={};Te!=="all"&&(St.status=Te),De!=="all"&&(St.plan=De),Re&&(St.search=Re);const ar=await apiService.getAllTenants(St);t(ar.tenants||[])}catch(St){console.error("Failed to load tenants:",St)}finally{Ee(!1)}},Ye=()=>{Ge()},Ke=St=>{const ar={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",suspended:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",trial:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",expired:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return ar[St]||ar.active},Xe=St=>{const ar={free:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",basic:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",pro:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",enterprise:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300"};return ar[St]||ar.free},Ze=async()=>{if(Ue){qe(!0);try{await apiService.deleteTenant(Ue),await Ge(),Ve(null)}catch(St){console.error("Failed to delete tenant:",St),alert("Failed to delete tenant. Please try again.")}finally{qe(!1)}}},er=async(St,ar)=>{const hr=ar==="active"?"suspended":"active";try{await apiService.updateTenantStatus(St,hr),await Ge()}catch(ur){console.error("Failed to update tenant status:",ur),alert("Failed to update tenant status. Please try again.")}};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Tenant Management"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Manage all companies and their subscriptions"})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>ze(!0),leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Create Tenant"})]}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 mb-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx("div",{className:"col-span-2",children:jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx(Input,{placeholder:"Search by company name or email...",value:Re,onChange:St=>Ce(St.target.value),onKeyPress:St=>St.key==="Enter"&&Ye(),leftIcon:jsxRuntimeExports.jsx(Search,{className:"text-gray-400",size:20}),className:"bg-white dark:bg-gray-700"})})}),jsxRuntimeExports.jsx(Select,{value:Te,onChange:St=>Me(St),options:[{value:"all",label:"All Statuses"},{value:"active",label:"Active"},{value:"trial",label:"Trial"},{value:"suspended",label:"Suspended"},{value:"expired",label:"Expired"}],className:"bg-white dark:bg-gray-700"}),jsxRuntimeExports.jsx(Select,{value:De,onChange:St=>Oe(St),options:[{value:"all",label:"All Plans"},{value:"free",label:"Free"},{value:"basic",label:"Basic"},{value:"pro",label:"Pro"},{value:"enterprise",label:"Enterprise"}],className:"bg-white dark:bg-gray-700"})]})}),n?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(St=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-3/4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-1/2"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-16 rounded-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-16 rounded-full"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-16"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-16"})]})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-9 flex-1 rounded-lg"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-9 flex-1 rounded-lg"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-9 w-10 rounded-lg"})]})]},St))}):e.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(Building,{className:"mx-auto h-12 w-12 text-gray-400"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"No tenants found"})]}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(St=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg truncate",children:St.companyName}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:St.ownerEmail})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-4",children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ke(St.status)}`,children:St.status}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Xe(St.plan)}`,children:St.plan.toUpperCase()})]}),St.stats&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Users,{size:16}),"Employees"]}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[St.stats.employeeCount,"/",St.limits.maxEmployees]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Database,{size:16}),"Storage"]}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[St.stats.storageUsed.toFixed(1),"/",St.limits.maxStorage," MB"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:["Created ",new Date(St.createdAt).toLocaleDateString()]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:ar=>{ar.stopPropagation(),He(St)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-blue-600 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 rounded-lg transition-colors text-sm",title:"Edit Tenant",children:[jsxRuntimeExports.jsx(SquarePen,{size:16}),"Edit"]}),St.status==="active"?jsxRuntimeExports.jsxs("button",{onClick:ar=>{ar.stopPropagation(),er(St._id,St.status)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-amber-600 bg-amber-50 hover:bg-amber-100 dark:bg-amber-900/20 dark:hover:bg-amber-900/30 rounded-lg transition-colors text-sm",title:"Suspend Tenant",children:[jsxRuntimeExports.jsx(Ban,{size:16}),"Suspend"]}):jsxRuntimeExports.jsxs("button",{onClick:ar=>{ar.stopPropagation(),er(St._id,St.status)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-green-600 bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30 rounded-lg transition-colors text-sm",title:"Activate Tenant",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:16}),"Activate"]}),jsxRuntimeExports.jsx("button",{onClick:ar=>{ar.stopPropagation(),Ve(St._id)},className:"px-3 py-2 text-red-600 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete Tenant",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})]})]},St._id))}),Be&&jsxRuntimeExports.jsx(CreateTenantModal,{onClose:()=>ze(!1),onCreate:Ge}),$e&&jsxRuntimeExports.jsx(EditTenantModal,{tenant:$e,onClose:()=>He(null),onUpdate:Ge}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:Ue!==null,onClose:()=>Ve(null),onConfirm:Ze,title:"Delete Tenant",message:"Are you sure you want to delete this tenant? This will permanently delete all data including employees, projects, and records. This action cannot be undone.",confirmText:"Delete Tenant",variant:"danger",isLoading:We})]})},Analytics=()=>{const[e,t]=reactExports.useState(null),[n,Ee]=reactExports.useState(!0);reactExports.useEffect(()=>{Re()},[]);const Re=async()=>{try{Ee(!0);const Te=await apiService.getPlatformAnalytics();t(Te)}catch(Te){console.error("Failed to load analytics:",Te)}finally{Ee(!1)}};if(n||!e)return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-48 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-64"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[1,2,3,4].map(Te=>jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-16"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-12 w-12 rounded-lg"})]})},Te))}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-32 mb-4"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(Te=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-20"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-12"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-2 w-full rounded-full"})]},Te))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-32 mb-4"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:[1,2,3].map(Te=>jsxRuntimeExports.jsx(Skeleton,{className:"h-12 w-full rounded-lg"},Te))})]})]})]});const Ce={free:"bg-gray-500",basic:"bg-blue-500",pro:"bg-purple-500",enterprise:"bg-amber-500"};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Platform Analytics"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Overview of platform usage and metrics"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Tenants"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.overview.totalTenants})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:jsxRuntimeExports.jsx(Building,{className:"h-6 w-6 text-blue-600 dark:text-blue-300"})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Active Tenants"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:e.overview.activeTenants})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:jsxRuntimeExports.jsx(TrendingUp,{className:"h-6 w-6 text-green-600 dark:text-green-300"})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Users"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.overview.totalUsers})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-lg",children:jsxRuntimeExports.jsx(Users,{className:"h-6 w-6 text-purple-600 dark:text-purple-300"})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Trial Tenants"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400",children:e.overview.trialTenants})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900 rounded-lg",children:jsxRuntimeExports.jsx(DollarSign,{className:"h-6 w-6 text-orange-600 dark:text-orange-300"})})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Plan Distribution"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:e.planDistribution.map(Te=>{const Me=(Te.count/e.overview.totalTenants*100).toFixed(1);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:Te._id}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Te.count," (",Me,"%)"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:`h-2 rounded-full ${Ce[Te._id]||"bg-gray-500"}`,style:{width:`${Me}%`}})})]},Te._id)})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Status Breakdown"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Active"}),jsxRuntimeExports.jsx("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:e.overview.activeTenants})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Trial"}),jsxRuntimeExports.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:e.overview.trialTenants})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Suspended"}),jsxRuntimeExports.jsx("span",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:e.overview.suspendedTenants})]})]})]})]})]})};function RoleManagement(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState([]),[Re,Ce]=reactExports.useState([]),{user:Te}=useAuth(),[Me,De]=reactExports.useState(!0),[Oe,Be]=reactExports.useState(null),[ze,$e]=reactExports.useState(!1),[He,Ue]=reactExports.useState(null),[Ve,We]=reactExports.useState(""),[qe,Ge]=reactExports.useState([]),[Ye,Ke]=reactExports.useState([]),[Xe,Ze]=reactExports.useState([]),[er,St]=reactExports.useState(!1),ar=MODULES.filter(mr=>{if(!(Te!=null&&Te.tenantId)||typeof Te.tenantId!="object"||!("limits"in Te.tenantId))return!0;const ir=Te.tenantId;return ir.limits&&ir.limits.enabledModules&&ir.limits.enabledModules.includes(mr.key)}),[hr,ur]=reactExports.useState(null),[dr,vr]=reactExports.useState(!1),yr=async()=>{De(!0);try{const[mr,ir,nr]=await Promise.all([apiService.getRoles(),apiService.getPermissions(),apiService.getAllDocumentTypes()]);t(mr),Ee(ir),nr.success&&Ce(nr.data),Be(null)}catch(mr){Be("Failed to fetch data"),console.error(mr)}finally{De(!1)}};reactExports.useEffect(()=>{yr()},[]);const br=mr=>{mr?(Ue(mr),We(mr.name),Ge(mr.permissions.map(ir=>ir._id)),Ke(mr.accessibleModules||[]),Ze(mr.mandatoryDocuments||[])):(Ue(null),We(""),Ge([]),Ke([]),Ze([])),$e(!0)},lr=mr=>{Ge(ir=>ir.includes(mr)?ir.filter(nr=>nr!==mr):[...ir,mr])},cr=mr=>{Ze(ir=>ir.includes(mr)?ir.filter(nr=>nr!==mr):[...ir,mr])},rr=async mr=>{if(mr.preventDefault(),!!Ve.trim()){St(!0);try{const ir={name:Ve,permissions:qe,accessibleModules:Ye,mandatoryDocuments:Xe};He?await apiService.updateRole(He._id,ir):await apiService.createRole(ir),yr(),$e(!1)}catch(ir){console.error(ir),alert(ir.message||"Failed to save role")}finally{St(!1)}}},pr=async()=>{if(hr){vr(!0);try{await apiService.deleteRole(hr),t(e.filter(mr=>mr._id!==hr)),ur(null)}catch(mr){console.error(mr),alert("Failed to delete role")}finally{vr(!1)}}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Role Management"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Manage system roles and permissions"})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>br(),leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Add Role"})]}),Oe&&jsxRuntimeExports.jsxs("div",{className:"bg-status-error/10 text-status-error p-4 rounded-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleAlert,{size:20}),jsxRuntimeExports.jsx("span",{children:Oe})]}),jsxRuntimeExports.jsx(Table$1,{columns:[{header:"Role Name",accessorKey:"name",searchKey:"name",render:mr=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 font-medium text-text-primary",children:[jsxRuntimeExports.jsx(Shield,{size:16,className:"text-brand-primary"}),mr.name]})},{header:"Mandatory Documents",render:mr=>jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:mr.mandatoryDocuments&&mr.mandatoryDocuments.length>0?jsxRuntimeExports.jsxs("span",{className:"px-2 py-0.5 bg-purple-50 text-purple-700 text-xs rounded-full border border-purple-100",children:[mr.mandatoryDocuments.length," Documents Required"]}):jsxRuntimeExports.jsx("span",{className:"text-xs text-text-secondary",children:"None"})})},{header:"Permissions",render:mr=>jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1",children:[mr.permissions.length>0?mr.permissions.slice(0,3).map(ir=>jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 bg-brand-primary/10 text-brand-primary text-xs rounded-full",children:ir.name.split(":")[1]||ir.name},ir._id)):jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary",children:"No permissions"}),mr.permissions.length>3&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-text-secondary",children:["+",mr.permissions.length-3," more"]})]})},{header:"Accessible Modules",render:mr=>jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1",children:[mr.accessibleModules&&mr.accessibleModules.length>0?mr.accessibleModules.slice(0,3).map(ir=>{var gr;const nr=((gr=MODULES.find(Er=>Er.key===ir))==null?void 0:gr.label)||ir;return jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-xs rounded-full border border-blue-100 dark:border-blue-800",children:nr},ir)}):jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary",children:"No modules"}),mr.accessibleModules&&mr.accessibleModules.length>3&&jsxRuntimeExports.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 text-xs rounded-full border border-gray-200 dark:border-gray-700",children:["+",mr.accessibleModules.length-3," more"]})]})},{header:"Actions",className:"text-right",render:mr=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>br(mr),className:"p-2 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-lg transition-colors",title:"Edit Role",children:jsxRuntimeExports.jsx(Pen,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>ur(mr._id),className:"p-2 text-text-secondary hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Role",children:jsxRuntimeExports.jsx(Trash2,{size:18})})]})}],data:e,isLoading:Me,emptyMessage:"No roles found."}),jsxRuntimeExports.jsx(Modal,{isOpen:ze,onClose:()=>$e(!1),title:He?"Edit Role":"Add New Role",maxWidth:"max-w-4xl",children:jsxRuntimeExports.jsxs("form",{onSubmit:rr,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:["Role Name ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(Input,{value:Ve,onChange:mr=>We(mr.target.value),placeholder:"e.g. HR Manager",className:"bg-bg-main",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-text-secondary mb-2",children:"Mandatory Documents Checklist"}),jsxRuntimeExports.jsx("div",{className:"border border-border rounded-lg p-4 bg-bg-main/50 max-h-48 overflow-y-auto grid grid-cols-2 gap-3",children:Re.length>0?Re.map(mr=>jsxRuntimeExports.jsx(Checkbox,{label:mr.name,checked:Xe.includes(mr._id),onChange:()=>cr(mr._id)},mr._id)):jsxRuntimeExports.jsx("p",{className:"col-span-2 text-sm text-text-secondary text-center",children:"No document types available. Configure them in Settings."})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Select documents that employees with this role MUST upload."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Accessible Modules"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 text-sm",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ke(ar.map(mr=>mr.key)),className:"text-brand-primary hover:text-brand-primary/80 font-medium",children:"Select All"}),jsxRuntimeExports.jsx("span",{className:"text-border",children:"|"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ke([]),className:"text-text-secondary hover:text-text-primary",children:"Deselect All"})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 border border-border rounded-lg p-4 bg-bg-main/50",children:ar.map(mr=>jsxRuntimeExports.jsx(Checkbox,{label:mr.shortLabel||mr.label,checked:Ye.includes(mr.key),onChange:ir=>{ir.target.checked?Ke([...Ye,mr.key]):Ke(Ye.filter(nr=>nr!==mr.key))}},mr.key))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Permissions"}),jsxRuntimeExports.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto border border-border rounded-lg p-4",children:n.length>0?Object.entries(n.reduce((mr,ir)=>{const[nr]=ir.name.split(":"),gr=nr||"Other";return mr[gr]||(mr[gr]=[]),mr[gr].push(ir),mr},{})).map(([mr,ir])=>jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-text-primary capitalize border-b border-border pb-1",children:mr.replace("_"," ")}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:ir.map(nr=>jsxRuntimeExports.jsx("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:jsxRuntimeExports.jsx(Checkbox,{checked:qe.includes(nr._id),onChange:()=>lr(nr._id),label:nr.name.split(":")[1]||nr.name})},nr._id))})]},mr)):jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary text-center py-2",children:"No permissions available."})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$e(!1),className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-gray-50 font-medium transition-colors",disabled:er,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary font-medium transition-colors disabled:opacity-50",disabled:er,children:er?"Saving...":"Save Role"})]})]})}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:!!hr,onClose:()=>ur(null),onConfirm:pr,title:"Delete Role",message:"Are you sure you want to delete this role? This action cannot be undone.",confirmText:"Delete",variant:"danger",isLoading:dr})]})}function DesignationManagement(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(null),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(null),[Be,ze]=reactExports.useState({name:"",description:"",status:"active"}),[$e,He]=reactExports.useState(!1),[Ue,Ve]=reactExports.useState(null),[We,qe]=reactExports.useState(!1),Ge=async()=>{Ee(!0);try{const Ze=await apiService.getDesignations();t(Ze),Ce(null)}catch(Ze){Ce("Failed to fetch designations"),console.error(Ze)}finally{Ee(!1)}};reactExports.useEffect(()=>{Ge()},[]);const Ye=Ze=>{Ze?(Oe(Ze),ze({name:Ze.name,description:Ze.description||"",status:Ze.status})):(Oe(null),ze({name:"",description:"",status:"active"})),Me(!0)},Ke=async Ze=>{if(Ze.preventDefault(),!!Be.name.trim()){He(!0);try{De?await apiService.updateDesignation(De._id,Be):await apiService.createDesignation(Be),Ge(),Me(!1)}catch(er){console.error(er),alert(er.message||"Failed to save designation")}finally{He(!1)}}},Xe=async()=>{if(Ue){qe(!0);try{await apiService.deleteDesignation(Ue),t(e.filter(Ze=>Ze._id!==Ue)),Ve(null)}catch(Ze){console.error(Ze),alert(Ze.message||"Failed to delete designation")}finally{qe(!1)}}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Designation Management"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Create and manage employee job designations"})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>Ye(),leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Add Designation"})]}),Re&&jsxRuntimeExports.jsxs("div",{className:"bg-status-error/10 text-status-error p-4 rounded-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleAlert,{size:20}),jsxRuntimeExports.jsx("span",{children:Re})]}),jsxRuntimeExports.jsx(Table$1,{columns:[{header:"Designation Name",accessorKey:"name",searchKey:"name",render:Ze=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 font-medium text-text-primary",children:[jsxRuntimeExports.jsx(Badge$1,{size:16,className:"text-brand-primary"}),Ze.name]})},{header:"Description",accessorKey:"description",render:Ze=>jsxRuntimeExports.jsx("span",{className:"text-text-secondary truncate block max-w-md",children:Ze.description||"-"})},{header:"Status",accessorKey:"status",render:Ze=>jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Ze.status==="active"?"bg-status-success/10 text-status-success":"bg-status-error/10 text-status-error"}`,children:Ze.status.charAt(0).toUpperCase()+Ze.status.slice(1)})},{header:"Actions",className:"text-right",render:Ze=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ye(Ze),className:"p-2 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-lg transition-colors",title:"Edit",children:jsxRuntimeExports.jsx(Pen,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ve(Ze._id),className:"p-2 text-text-secondary hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:jsxRuntimeExports.jsx(Trash2,{size:18})})]})}],data:e,isLoading:n,emptyMessage:"No designations found."}),jsxRuntimeExports.jsx(Modal,{isOpen:Te,onClose:()=>Me(!1),title:De?"Edit Designation":"Add Designation",maxWidth:"max-w-md",children:jsxRuntimeExports.jsxs("form",{onSubmit:Ke,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:["Name ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(Input,{value:Be.name,onChange:Ze=>ze({...Be,name:Ze.target.value}),placeholder:"e.g. Senior Software Engineer",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:Be.description,onChange:Ze=>ze({...Be,description:Ze.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 bg-bg-main text-text-primary",rows:3,placeholder:"Optional description"})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Status",value:Be.status,onChange:Ze=>ze({...Be,status:Ze}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Me(!1),className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary font-medium transition-colors disabled:opacity-50",disabled:$e,children:$e?"Saving...":"Save Designation"})]})]})}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:!!Ue,onClose:()=>Ve(null),onConfirm:Xe,title:"Delete Designation",message:"Are you sure you want to delete this designation?",confirmText:"Delete",variant:"danger",isLoading:We})]})}const DAYS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function ShiftManagement(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState(null),[De,Oe]=reactExports.useState(""),[Be,ze]=reactExports.useState({name:"",startTime:"",endTime:"",breakDuration:0,gracePeriod:0,workingDays:["Monday","Tuesday","Wednesday","Thursday","Friday"],status:"active"}),$e=async()=>{try{Ee(!0);const Ke=await apiService.getShifts();t(Ke)}catch(Ke){console.error("Failed to fetch shifts:",Ke)}finally{Ee(!1)}};reactExports.useEffect(()=>{$e()},[]);const He=Ke=>{Me(Ke),ze({name:Ke.name,startTime:Ke.startTime,endTime:Ke.endTime,breakDuration:Ke.breakDuration,gracePeriod:Ke.gracePeriod,workingDays:Ke.workingDays,status:Ke.status}),Ce(!0)},Ue=async Ke=>{if(window.confirm("Are you sure you want to delete this shift?"))try{await apiService.deleteShift(Ke),$e()}catch(Xe){alert(Xe.message)}},Ve=async Ke=>{Ke.preventDefault();try{Te?await apiService.updateShift(Te._id,Be):await apiService.createShift(Be),Ce(!1),$e(),We()}catch(Xe){alert(Xe.message)}},We=()=>{Me(null),ze({name:"",startTime:"",endTime:"",breakDuration:0,gracePeriod:0,workingDays:["Monday","Tuesday","Wednesday","Thursday","Friday"],status:"active"})},qe=Ke=>{ze(Xe=>{const Ze=Xe.workingDays.includes(Ke)?Xe.workingDays.filter(er=>er!==Ke):[...Xe.workingDays,Ke];return{...Xe,workingDays:Ze}})},Ge=e.filter(Ke=>Ke.name.toLowerCase().includes(De.toLowerCase())),Ye=[{header:"Shift Name",accessorKey:"name"},{header:"Timings",render:Ke=>jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{size:14,className:"text-text-secondary"}),Ke.startTime," - ",Ke.endTime]})},{header:"Working Days",render:Ke=>jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:Ke.workingDays.map(Xe=>jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 bg-bg-hover rounded text-text-secondary",children:Xe.slice(0,3)},Xe))})},{header:"Status",render:Ke=>jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ke.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:Ke.status.charAt(0).toUpperCase()+Ke.status.slice(1)})},{header:"Actions",render:Ke=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>He(Ke),className:"p-1 text-text-secondary hover:text-brand-primary transition-colors",children:jsxRuntimeExports.jsx(Pencil,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ue(Ke._id),className:"p-1 text-text-secondary hover:text-red-500 transition-colors",children:jsxRuntimeExports.jsx(Trash2,{size:18})})]})}];return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Shift Management"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Manage work shifts and timings"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{We(),Ce(!0)},className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 flex items-center gap-2 transition-colors",children:[jsxRuntimeExports.jsx(Plus,{size:20}),"Add Shift"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 bg-bg-card p-4 rounded-lg border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1 max-w-md",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search shifts...",value:De,onChange:Ke=>Oe(Ke.target.value),className:"w-full pl-10 pr-4 py-2 bg-bg-main border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 text-text-primary"})]}),jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-text-secondary hover:bg-bg-hover rounded-lg transition-colors border border-border",children:[jsxRuntimeExports.jsx(Funnel,{size:18}),"Filters"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-lg border border-border overflow-hidden",children:jsxRuntimeExports.jsx(Table$1,{data:Ge,columns:Ye,isLoading:n,emptyMessage:"No shifts found. Create your first shift to get started."})}),jsxRuntimeExports.jsx(Modal,{isOpen:Re,onClose:()=>Ce(!1),title:Te?"Edit Shift":"Add New Shift",maxWidth:"max-w-xl",children:jsxRuntimeExports.jsxs("form",{onSubmit:Ve,className:"space-y-4",children:[jsxRuntimeExports.jsx(Input,{label:"Shift Name",value:Be.name,onChange:Ke=>ze({...Be,name:Ke.target.value}),placeholder:"e.g. General Shift, Night Shift",required:!0}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Input,{label:"Start Time",type:"time",value:Be.startTime,onChange:Ke=>ze({...Be,startTime:Ke.target.value}),required:!0}),jsxRuntimeExports.jsx(Input,{label:"End Time",type:"time",value:Be.endTime,onChange:Ke=>ze({...Be,endTime:Ke.target.value}),required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Input,{label:"Break Duration (mins)",type:"number",value:Be.breakDuration,onChange:Ke=>ze({...Be,breakDuration:parseInt(Ke.target.value)||0})}),jsxRuntimeExports.jsx(Input,{label:"Grace Period (mins)",type:"number",value:Be.gracePeriod,onChange:Ke=>ze({...Be,gracePeriod:parseInt(Ke.target.value)||0})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Working Days"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:DAYS.map(Ke=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>qe(Ke),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${Be.workingDays.includes(Ke)?"bg-brand-primary text-white":"bg-bg-hover text-text-secondary hover:bg-bg-secondary"}`,children:Ke.slice(0,3)},Ke))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Status"}),jsxRuntimeExports.jsx(Select,{value:Be.status,onChange:Ke=>ze({...Be,status:Ke}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ce(!1),className:"px-4 py-2 text-text-secondary hover:bg-bg-hover rounded-lg transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 transition-colors",children:Te?"Update Shift":"Create Shift"})]})]})})]})}function UserManagement(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState(null);reactExports.useEffect(()=>{De()},[]);const De=async()=>{try{Ee(!0);const Ve=(await apiService.getAllGlobalUsers({})).filter(We=>!We.isSuperAdmin&&!We.roles.some(qe=>qe.name==="Super Admin"));t(Ve)}catch(Ue){console.error("Failed to fetch users",Ue)}finally{Ee(!1)}},Oe=async Ue=>{try{const Ve=Ue.status==="active"?"inactive":"active";await apiService.updateGlobalUserStatus(Ue._id,Ve),De()}catch(Ve){console.error("Failed to update status",Ve),alert("Failed to update user status")}},Be=Ue=>{Me(Ue._id)},ze=async()=>{if(Te){Ce(!0);try{await apiService.deleteGlobalUser(Te),De()}catch(Ue){console.error("Failed to delete user",Ue),alert(Ue.message||"Failed to delete user")}finally{Ce(!1),Me(null)}}},$e=Ue=>{switch(Ue){case"active":return"success";case"inactive":return"warning";case"suspended":return"error";default:return"default"}},He=[{header:"User",accessorKey:"name",render:Ue=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary/10 flex items-center justify-center text-brand-primary font-medium",children:Ue.name.charAt(0)}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-text-primary",children:Ue.name}),jsxRuntimeExports.jsx("div",{className:"text-xs text-text-secondary",children:Ue.email})]})]})},{header:"Tenant (Company)",accessorKey:"tenantId",render:Ue=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Building,{size:14,className:"text-text-muted"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-text-primary",children:Ue.tenantId?Ue.tenantId.companyName:"N/A (Super Admin)"})]})},{header:"Role",accessorKey:"roles",render:Ue=>jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1",children:[Ue.roles.map(Ve=>jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",children:Ve.name},Ve._id)),Ue.isSuperAdmin&&jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:"Super Admin"})]})},{header:"Status",accessorKey:"status",render:Ue=>jsxRuntimeExports.jsx(Badge,{variant:$e(Ue.status),children:Ue.status})},{header:"Actions",accessorKey:"actions",render:Ue=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Oe(Ue),className:`p-1 rounded transition-colors ${Ue.status==="active"?"text-amber-600 hover:bg-amber-50":"text-green-600 hover:bg-green-50"}`,title:Ue.status==="active"?"Deactivate User":"Activate User",children:Ue.status==="active"?jsxRuntimeExports.jsx(UserX,{size:16}):jsxRuntimeExports.jsx(UserCheck,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>Be(Ue),className:"p-1 hover:bg-red-50 text-text-muted hover:text-red-600 rounded transition-colors",title:"Delete User",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})}];return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"User Management"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"View and manage all users across all tenants"})]})}),n?jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-xl border border-border shadow-sm overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"min-w-full divide-y divide-border",children:[jsxRuntimeExports.jsx("div",{className:"bg-bg-secondary/50 px-6 py-3 border-b border-border flex justify-between",children:[1,2,3,4,5].map(Ue=>jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"},Ue))}),[1,2,3,4,5].map(Ue=>jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-8 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-32 mb-1"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-48"})]})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-32"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-16"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-16"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-16 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-6"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-6"})]})]},Ue))]})}):jsxRuntimeExports.jsx("div",{className:"bg-bg-card rounded-xl border border-border shadow-sm overflow-hidden",children:jsxRuntimeExports.jsx(Table$1,{data:e,columns:He})}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:Te!==null,onClose:()=>Me(null),onConfirm:ze,title:"Delete User",message:"Are you sure you want to delete this user? This will also remove their employee record if it exists. This action cannot be undone.",confirmText:"Delete",variant:"danger",isLoading:Re})]})}function SuperAdminSettings(){const[e,t]=reactExports.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[n,Ee]=reactExports.useState(!1),[Re,Ce]=reactExports.useState(""),[Te,Me]=reactExports.useState(""),De=Be=>{t({...e,[Be.target.name]:Be.target.value}),Me("")},Oe=async Be=>{if(Be.preventDefault(),Me(""),Ce(""),e.newPassword!==e.confirmPassword){Me("New passwords do not match");return}if(e.newPassword.length<8){Me("Password must be at least 8 characters long");return}Ee(!0);try{await apiService.updateProfile({currentPassword:e.currentPassword,newPassword:e.newPassword}),Ce("Password updated successfully"),t({currentPassword:"",newPassword:"",confirmPassword:""})}catch(ze){Me(ze.message||"Failed to update password")}finally{Ee(!1)}};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Settings"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mt-1",children:"Manage your account settings and security"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:jsxRuntimeExports.jsx("div",{className:"lg:col-span-2",children:jsxRuntimeExports.jsxs("div",{className:"bg-bg-card rounded-xl shadow-sm border border-border p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-brand-primary/10 rounded-lg",children:jsxRuntimeExports.jsx(Shield,{className:"text-brand-primary",size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Security Settings"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary",children:"Update your password and security preferences"})]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Oe,className:"space-y-4 max-w-md",children:[Te&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400 text-sm",children:[jsxRuntimeExports.jsx(CircleAlert,{size:16}),Te]}),Re&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2 text-green-700 dark:text-green-400 text-sm",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:16}),Re]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Current Password"}),jsxRuntimeExports.jsx(PasswordInput,{name:"currentPassword",value:e.currentPassword,onChange:De,required:!0,placeholder:""})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"New Password"}),jsxRuntimeExports.jsx(PasswordInput,{name:"newPassword",value:e.newPassword,onChange:De,required:!0,placeholder:""}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Must be at least 8 characters long"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Confirm New Password"}),jsxRuntimeExports.jsx(PasswordInput,{name:"confirmPassword",value:e.confirmPassword,onChange:De,required:!0,placeholder:""})]}),jsxRuntimeExports.jsx("div",{className:"pt-4",children:jsxRuntimeExports.jsx(Button,{type:"submit",disabled:n,isLoading:n,className:"px-6 py-2 shadow-lg shadow-brand-primary/20",children:"Update Password"})})]})]})})})]})}const CompanySettings=()=>{const[e,t]=reactExports.useState(null),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState(""),[De,Oe]=reactExports.useState(!1),[Be,ze]=reactExports.useState({companyName:"",timezone:"America/New_York",currency:"USD",workHours:{start:"09:00",end:"18:00"},dateFormat:"MM/DD/YYYY"});reactExports.useEffect(()=>{$e()},[]);const $e=async()=>{try{Ee(!0);const Ve=await apiService.getCompanySettings();t(Ve.company),ze({companyName:Ve.company.name,timezone:Ve.company.timezone,currency:Ve.company.currency,workHours:Ve.company.workHours,dateFormat:Ve.company.dateFormat})}catch(Ve){Me(Ve.message||"Failed to load settings")}finally{Ee(!1)}},He=async Ve=>{Ve.preventDefault(),Me(""),Oe(!1),Ce(!0);try{await apiService.updateCompanySettings(Be),Oe(!0),$e(),setTimeout(()=>Oe(!1),3e3)}catch(We){Me(We.message||"Failed to save settings")}finally{Ce(!1)}},Ue=Ve=>{const{name:We,value:qe}=Ve.target;if(We.startsWith("workHours.")){const Ge=We.split(".")[1];ze({...Be,workHours:{...Be.workHours,[Ge]:qe}})}else ze({...Be,[We]:qe})};return n?jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Loading settings..."})]})}):jsxRuntimeExports.jsxs("div",{className:"p-6 max-w-4xl",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Company Settings"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your organization's configuration"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:He,className:"space-y-6",children:[Te&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400",children:Te}),De&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400",children:"Settings saved successfully!"}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Building,{className:"text-blue-600",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Company Information"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Name"}),jsxRuntimeExports.jsx(Input,{name:"companyName",value:Be.companyName,onChange:Ue,required:!0,className:"bg-white dark:bg-gray-700"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subdomain"}),jsxRuntimeExports.jsx(Input,{value:(e==null?void 0:e.subdomain)||"",disabled:!0,className:"bg-gray-100 dark:bg-gray-900 cursor-not-allowed"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Subdomain cannot be changed"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Globe,{className:"text-blue-600",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Regional Settings"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Timezone"}),jsxRuntimeExports.jsx(Select,{value:Be.timezone,onChange:Ve=>ze(We=>({...We,timezone:Ve})),options:[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"Europe/London",label:"London (GMT)"},{value:"Asia/Kolkata",label:"India (IST)"},{value:"Asia/Singapore",label:"Singapore (SGT)"}],className:"bg-white dark:bg-gray-700"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[jsxRuntimeExports.jsx(DollarSign,{className:"inline mr-1",size:16}),"Currency"]}),jsxRuntimeExports.jsx(Select,{value:Be.currency,onChange:Ve=>ze(We=>({...We,currency:Ve})),options:[{value:"USD",label:"USD - US Dollar"},{value:"EUR",label:"EUR - Euro"},{value:"GBP",label:"GBP - British Pound"},{value:"INR",label:"INR - Indian Rupee"},{value:"SGD",label:"SGD - Singapore Dollar"}],className:"bg-white dark:bg-gray-700"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Format"}),jsxRuntimeExports.jsx(Select,{value:Be.dateFormat,onChange:Ve=>ze(We=>({...We,dateFormat:Ve})),options:[{value:"MM/DD/YYYY",label:"MM/DD/YYYY (12/31/2024)"},{value:"DD/MM/YYYY",label:"DD/MM/YYYY (31/12/2024)"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD (2024-12-31)"}],className:"bg-white dark:bg-gray-700"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Clock,{className:"text-blue-600",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Work Hours"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Time"}),jsxRuntimeExports.jsx(Input,{type:"time",name:"workHours.start",value:Be.workHours.start,onChange:Ue,className:"bg-white dark:bg-gray-700"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Time"}),jsxRuntimeExports.jsx(Input,{type:"time",name:"workHours.end",value:Be.workHours.end,onChange:Ue,className:"bg-white dark:bg-gray-700"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsxs("button",{type:"submit",disabled:Re,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[jsxRuntimeExports.jsx(Save,{size:20}),Re?"Saving...":"Save Settings"]})})]})]})},SubscriptionPage=()=>{const[e,t]=reactExports.useState(null),[n,Ee]=reactExports.useState(!0);reactExports.useEffect(()=>{Re()},[]);const Re=async()=>{try{Ee(!0);const $e=await apiService.getSubscriptionDetails();t($e.subscription)}catch($e){console.error("Failed to load subscription:",$e)}finally{Ee(!1)}},Ce=$e=>{const He={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",trial:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",suspended:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",expired:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return He[$e]||He.active},Te=$e=>{const He={free:{name:"Free",price:"$0/mo",color:"gray"},basic:{name:"Basic",price:"$29/mo",color:"blue"},pro:{name:"Pro",price:"$99/mo",color:"purple"},enterprise:{name:"Enterprise",price:"Custom",color:"amber"}};return He[$e]||He.free},Me=($e,He)=>($e/He*100).toFixed(1),De=[{id:"free",name:"Free",price:"$0",period:"/month",features:["Up to 10 employees","100 MB storage","Basic modules (3)"],maxEmployees:10},{id:"basic",name:"Basic",price:"$29",period:"/month",features:["Up to 50 employees","500 MB storage","Standard modules (5)"],maxEmployees:50},{id:"pro",name:"Pro",price:"$99",period:"/month",features:["Up to 200 employees","2 GB storage","Advanced modules (7)","Priority support"],maxEmployees:200},{id:"enterprise",name:"Enterprise",price:"Custom",period:"",features:["Unlimited employees","10 GB storage","All modules (8)","24/7 support","Custom integrations"],maxEmployees:9999}];if(n||!e)return jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Loading subscription..."})]})});const Oe=Te(e.plan),Be=Me(e.usage.employeeCount,e.limits.maxEmployees),ze=Me(e.usage.storageUsed,e.limits.maxStorage);return jsxRuntimeExports.jsxs("div",{className:"p-6 max-w-6xl",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Subscription & Billing"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your subscription plan and usage"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg p-6 text-white mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold",children:[Oe.name," Plan"]}),jsxRuntimeExports.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Ce(e.status)}`,children:e.status})]}),jsxRuntimeExports.jsx("p",{className:"text-blue-100 mb-4",children:e.subscriptionEnd?`Renews on ${new Date(e.subscriptionEnd).toLocaleDateString()}`:"Current plan"}),jsxRuntimeExports.jsxs("div",{className:"flex items-baseline gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-4xl font-bold",children:Oe.price}),e.plan!=="free"&&jsxRuntimeExports.jsx("span",{className:"text-blue-100",children:"/month"})]})]}),jsxRuntimeExports.jsx(Package,{className:"h-16 w-16 opacity-50"})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{className:"text-blue-600",size:20}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Employee Usage"})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.usage.employeeCount," /"," ",e.limits.maxEmployees]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 mb-2",children:jsxRuntimeExports.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${Math.min(Number(Be),100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Be,"% used"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Database,{className:"text-purple-600",size:20}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Storage Usage"})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.usage.storageUsed.toFixed(1)," /"," ",e.limits.maxStorage," MB"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 mb-2",children:jsxRuntimeExports.jsx("div",{className:"bg-purple-600 h-3 rounded-full transition-all",style:{width:`${Math.min(Number(ze),100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[ze,"% used"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"All Plans"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:De.map($e=>jsxRuntimeExports.jsxs("div",{className:`rounded-lg border-2 p-6 ${e.plan===$e.id?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:$e.name}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:$e.price}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:$e.period})]}),jsxRuntimeExports.jsx("ul",{className:"space-y-2 mb-6",children:$e.features.map((He,Ue)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start text-sm text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"mr-2 text-green-500 flex-shrink-0",size:16}),He]},Ue))}),e.plan===$e.id?jsxRuntimeExports.jsx("button",{disabled:!0,className:"w-full px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-400 rounded-lg cursor-not-allowed",children:"Current Plan"}):jsxRuntimeExports.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",onClick:()=>alert("Stripe integration will be available in Week 5"),children:"Upgrade"})]},$e.id))})]})]})},UsageDashboard=()=>{const[e,t]=reactExports.useState(null),[n,Ee]=reactExports.useState(!0);reactExports.useEffect(()=>{Re()},[]);const Re=async()=>{try{Ee(!0);const Te=await apiService.getUsageAnalytics();t(Te)}catch(Te){console.error("Failed to load usage:",Te)}finally{Ee(!1)}};if(n||!e)return jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Loading usage data..."})]})});const Ce=[{id:"attendance",name:"Attendance"},{id:"leave",name:"Leave Management"},{id:"employees",name:"Employee Management"},{id:"payroll",name:"Payroll"},{id:"projects",name:"Projects"},{id:"tasks",name:"Tasks"},{id:"timesheet",name:"Timesheet"},{id:"policies",name:"Policies"}];return jsxRuntimeExports.jsxs("div",{className:"p-6 max-w-6xl",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Usage & Analytics"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Monitor your organization's usage and limits"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Users,{className:"text-blue-600",size:24}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Employee Usage"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.employees.current," / ",e.employees.limit]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["(",e.employees.percentage,"%)"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:jsxRuntimeExports.jsx("div",{className:`h-4 rounded-full transition-all ${Number(e.employees.percentage)>80?"bg-orange-500":"bg-blue-600"}`,style:{width:`${Math.min(Number(e.employees.percentage),100)}%`}})}),Number(e.employees.percentage)>80&&jsxRuntimeExports.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400 mt-2",children:" You're approaching your employee limit. Consider upgrading your plan."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Database,{className:"text-purple-600",size:24}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Storage Usage"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.storage.used.toFixed(1)," MB / ",e.storage.limit," MB"]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["(",e.storage.percentage,"%)"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 mb-4",children:jsxRuntimeExports.jsx("div",{className:`h-4 rounded-full transition-all ${Number(e.storage.percentage)>80?"bg-orange-500":"bg-purple-600"}`,style:{width:`${Math.min(Number(e.storage.percentage),100)}%`}})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Documents"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[e.storage.breakdown.documents," MB"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Profile Pictures"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[e.storage.breakdown.profilePictures," MB"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Payslips"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[e.storage.breakdown.payslips," MB"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Package,{className:"text-green-600",size:24}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Module Access"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Ce.map(Te=>{const Me=e.modules.enabled.includes(Te.id);return jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${Me?"bg-green-50 dark:bg-green-900/20":"bg-gray-50 dark:bg-gray-700"}`,children:[Me?jsxRuntimeExports.jsx(CircleCheckBig,{className:"text-green-600 dark:text-green-400",size:20}):jsxRuntimeExports.jsx(CircleX,{className:"text-gray-400",size:20}),jsxRuntimeExports.jsx("span",{className:`font-medium ${Me?"text-green-900 dark:text-green-300":"text-gray-500 dark:text-gray-400"}`,children:Te.name})]},Te.id)})}),e.modules.disabled.length>0&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4",children:["Upgrade your plan to access all ",Ce.length," modules"]})]})]})},DocumentTypeModal=({isOpen:e,onClose:t,onSuccess:n,initialData:Ee})=>{const[Re,Ce]=reactExports.useState({name:"",category:"Employment",description:"",isRequired:!1,expiryRequired:!1,maxFileSize:5}),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(""),Be=[{value:"Employment",label:"Employment"},{value:"Identity",label:"Identity"},{value:"Legal",label:"Legal"},{value:"Education",label:"Education"},{value:"Other",label:"Other"}];reactExports.useEffect(()=>{Ce(Ee?{name:Ee.name,category:Ee.category,description:Ee.description||"",isRequired:Ee.isRequired,expiryRequired:Ee.expiryRequired,maxFileSize:Ee.maxFileSize?Ee.maxFileSize/(1024*1024):5}:{name:"",category:"Employment",description:"",isRequired:!1,expiryRequired:!1,maxFileSize:5})},[Ee]);const ze=Ue=>{const{name:Ve,value:We,type:qe}=Ue.target;Ce(Ge=>({...Ge,[Ve]:qe==="checkbox"?Ue.target.checked:We}))},$e=Ue=>{Ce(Ve=>({...Ve,category:Ue}))},He=async Ue=>{Ue.preventDefault(),Me(!0),Oe("");try{const Ve={...Re,maxFileSize:Number(Re.maxFileSize)*1024*1024};Ee?await apiService.updateDocumentType(Ee._id,Ve):await apiService.createDocumentType(Ve),n(),t()}catch(Ve){Oe(Ve.message||"Failed to save document type")}finally{Me(!1)}};return jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:t,title:Ee?"Edit Document Type":"Add Document Type",maxWidth:"max-w-xl",children:jsxRuntimeExports.jsxs("form",{onSubmit:He,className:"space-y-4",children:[De&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-status-error/10 border border-status-error/20 rounded-lg text-status-error text-sm",children:De}),jsxRuntimeExports.jsx(Input,{label:"Document Name",name:"name",value:Re.name,onChange:ze,required:!0,placeholder:"e.g. Offer Letter"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Category",options:Be,value:Re.category,onChange:$e})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Description (Optional)"}),jsxRuntimeExports.jsx("textarea",{name:"description",value:Re.description,onChange:ze,rows:3,className:"w-full px-4 py-2 bg-bg-card border border-border rounded-lg text-text-primary focus:ring-2 focus:ring-brand-primary/20 focus:outline-none resize-none",placeholder:"Briefly describe this document purpose..."})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-4",children:jsxRuntimeExports.jsx(Input,{label:"Max File Size (MB)",name:"maxFileSize",type:"number",value:Re.maxFileSize,onChange:ze,min:"1",max:"50",required:!0})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 p-3 border border-border rounded-lg cursor-pointer hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",name:"isRequired",checked:Re.isRequired,onChange:ze,className:"w-4 h-4 text-brand-primary rounded border-gray-300 focus:ring-brand-primary"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"block text-sm font-medium text-text-primary",children:"Mark as Mandatory"}),jsxRuntimeExports.jsx("span",{className:"block text-xs text-text-secondary",children:"Employees must upload this document"})]})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 p-3 border border-border rounded-lg cursor-pointer hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",name:"expiryRequired",checked:Re.expiryRequired,onChange:ze,className:"w-4 h-4 text-brand-primary rounded border-gray-300 focus:ring-brand-primary"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"block text-sm font-medium text-text-primary",children:"Requires Expiry Date"}),jsxRuntimeExports.jsx("span",{className:"block text-xs text-text-secondary",children:"User must select expiration date when uploading"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border mt-6",children:[jsxRuntimeExports.jsx(Button,{type:"button",onClick:t,variant:"ghost",className:"text-text-secondary hover:bg-bg-hover",children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",isLoading:Te,children:Te?"Saving...":"Save Document Type"})]})]})})},DocumentSettings=()=>{const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState(null),[De,Oe]=reactExports.useState(""),Be=async()=>{try{Ee(!0);const Ve=await apiService.getAllDocumentTypes();Ve.success&&t(Ve.data)}catch(Ve){console.error("Failed to fetch document types:",Ve)}finally{Ee(!1)}};reactExports.useEffect(()=>{Be()},[]);const ze=Ve=>{Me(Ve),Ce(!0)},$e=async Ve=>{if(window.confirm("Are you sure you want to delete this document type? This action cannot be undone."))try{await apiService.deleteDocumentType(Ve),Be()}catch(We){console.error("Failed to delete document type:",We),alert("Failed to delete document type")}},He=()=>{Ce(!1),Me(null)},Ue=e.filter(Ve=>Ve.name.toLowerCase().includes(De.toLowerCase()));return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Document Management"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm",children:"Configure the types of documents employees can upload"})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>Ce(!0),leftIcon:jsxRuntimeExports.jsx(Plus,{size:18}),children:"Add Document Type"})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-4 mb-6",children:jsxRuntimeExports.jsxs("div",{className:"relative flex-1 max-w-md",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",size:18}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search document types...",value:De,onChange:Ve=>Oe(Ve.target.value),className:"w-full pl-10 pr-4 py-2 bg-bg-card border border-border rounded-lg text-text-primary focus:ring-2 focus:ring-brand-primary/20 focus:outline-none"})]})}),n?jsxRuntimeExports.jsx("div",{className:"flex justify-center py-10",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"})}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ue.map(Ve=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-5 hover:border-brand-primary/30 transition-all shadow-sm group",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2.5 bg-brand-primary/10 text-brand-primary rounded-lg",children:jsxRuntimeExports.jsx(FileText,{size:24})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ze(Ve),className:"p-1.5 text-text-secondary hover:text-brand-primary hover:bg-bg-hover rounded-lg transition-colors",children:jsxRuntimeExports.jsx(Pen,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>$e(Ve._id),className:"p-1.5 text-text-secondary hover:text-status-error hover:bg-status-error/10 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})]}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-text-primary text-lg mb-1",children:Ve.name}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm mb-4 line-clamp-2 min-h-[40px]",children:Ve.description||"No description provided"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[jsxRuntimeExports.jsx("span",{className:"px-2.5 py-1 bg-bg-main rounded-md text-text-secondary border border-border",children:Ve.category}),Ve.isRequired&&jsxRuntimeExports.jsx("span",{className:"px-2.5 py-1 bg-status-error/10 text-status-error rounded-md border border-status-error/20 font-medium",children:"Required"}),Ve.expiryRequired&&jsxRuntimeExports.jsx("span",{className:"px-2.5 py-1 bg-status-warning/10 text-status-warning rounded-md border border-status-warning/20 font-medium",children:"Expiry Tracking"})]})]},Ve._id)),Ue.length===0&&jsxRuntimeExports.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center border-2 border-dashed border-border rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"bg-bg-main p-4 rounded-full mb-3",children:jsxRuntimeExports.jsx(FileText,{size:32,className:"text-text-muted"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-text-primary mb-1",children:"No document types found"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary max-w-sm mx-auto",children:"Create a new document type to start managing employee documents."})]})]}),Re&&jsxRuntimeExports.jsx(DocumentTypeModal,{isOpen:Re,onClose:He,onSuccess:Be,initialData:Te})]})};function Miscellaneous(){const e=useNavigate(),{user:t}=useAuth();return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Miscellaneous"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Additional tools and features."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(!(t!=null&&t.tenantId)||typeof t.tenantId=="string"||!t.tenantId.limits||t.tenantId.limits.enabledModules.includes("feedback"))&&jsxRuntimeExports.jsxs("div",{onClick:()=>e("/miscellaneous/feedback"),className:"bg-bg-card p-6 rounded-xl border border-border shadow-sm hover:shadow-md transition-shadow cursor-pointer group",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-brand-primary/10 rounded-lg group-hover:bg-brand-primary/20 transition-colors",children:jsxRuntimeExports.jsx(MessageSquarePlus,{className:"text-brand-primary",size:24})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Feedback"})]}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm",children:"Send constructive feedback or appreciation to your colleagues."})]}),(!(t!=null&&t.tenantId)||typeof t.tenantId=="string"||!t.tenantId.limits||t.tenantId.limits.enabledModules.includes("appreciation"))&&(!(t!=null&&t.accessibleModules)||t.accessibleModules.includes("appreciation"))&&jsxRuntimeExports.jsxs("div",{onClick:()=>e("/miscellaneous/appreciation"),className:"bg-bg-card p-6 rounded-xl border border-border shadow-sm hover:shadow-md transition-shadow cursor-pointer group",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-brand-primary/10 rounded-lg group-hover:bg-brand-primary/20 transition-colors",children:jsxRuntimeExports.jsx(Award,{className:"text-brand-primary",size:24})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Appreciation Center"})]}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm",children:"Recognize and celebrate your colleagues with virtual badges."})]}),((t==null?void 0:t.role)==="HR"||(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.isSuperAdmin))&&(!(t!=null&&t.tenantId)||typeof t.tenantId=="string"||!t.tenantId.limits||t.tenantId.limits.enabledModules.includes("email_automation"))&&jsxRuntimeExports.jsxs("div",{onClick:()=>e("/miscellaneous/email-automation"),className:"bg-bg-card p-6 rounded-xl border border-border shadow-sm hover:shadow-md transition-shadow cursor-pointer group",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-brand-primary/10 rounded-lg group-hover:bg-brand-primary/20 transition-colors",children:jsxRuntimeExports.jsx(Mail,{className:"text-brand-primary",size:24})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Email Automation"})]}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm",children:"Configure automated Birthday and Anniversary emails."})]})]})]})}function Feedback(){const e=useNavigate(),{user:t}=useAuth(),[n,Ee]=reactExports.useState([]),[Re,Ce]=reactExports.useState([]),[Te,Me]=reactExports.useState(!0),[De,Oe]=reactExports.useState(""),[Be,ze]=reactExports.useState(""),[$e,He]=reactExports.useState(!1),[Ue,Ve]=reactExports.useState(!1),[We,qe]=reactExports.useState("");reactExports.useEffect(()=>{Ge()},[]);const Ge=async()=>{try{Me(!0);const[Ke,Xe]=await Promise.all([apiService.getEmployees(),apiService.getMyFeedbacks()]),Ze=Ke.filter(er=>er.user&&er.user._id!==(t==null?void 0:t.id));Ee(Ze),Ce(Xe)}catch(Ke){console.error("Failed to fetch feedback data",Ke)}finally{Me(!1)}},Ye=async Ke=>{if(Ke.preventDefault(),!(!De||!Be.trim())){He(!0),qe("");try{await apiService.createFeedback({recipientId:De,message:Be.trim()}),Ve(!0),ze(""),Oe("")}catch(Xe){qe(Xe.message||"Failed to send feedback")}finally{He(!1)}}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-0",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:()=>e("/miscellaneous"),leftIcon:jsxRuntimeExports.jsx(ChevronLeft,{size:20}),style:{paddingRight:"0",paddingLeft:"0"}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Feedback"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Send constructive feedback or appreciation"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-1 space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 shadow-sm sticky top-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(MessageSquarePlus,{className:"text-brand-primary",size:20}),"Send Feedback"]}),We&&jsxRuntimeExports.jsx("div",{className:"bg-status-error/10 text-status-error p-3 rounded-lg text-sm mb-4",children:We}),jsxRuntimeExports.jsxs("form",{onSubmit:Ye,className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Recipient",value:De,onChange:Ke=>Oe(Ke),options:n.map(Ke=>({value:Ke.user._id,label:`${Ke.firstName} ${Ke.lastName}`})),placeholder:"Select a colleague...",required:!0})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Message"}),jsxRuntimeExports.jsx("textarea",{value:Be,onChange:Ke=>ze(Ke.target.value),placeholder:"Write your feedback here...",className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 resize-none h-32",required:!0})]}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full",disabled:$e||!De||!Be.trim(),isLoading:$e,leftIcon:jsxRuntimeExports.jsx(Send,{size:16}),children:"Send Feedback"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"My Feedback History"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[Re.map(Ke=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-4 shadow-sm flex items-start gap-3 animate-in fade-in slide-in-from-bottom-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 bg-brand-primary/5 rounded-full p-2 border border-brand-primary/10",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:jsxRuntimeExports.jsx(MessageSquareQuote,{className:"w-5 h-5 text-brand-primary"})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-start gap-2",children:jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("p",{className:"text-text-primary font-medium text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"text-text-secondary",children:["Feedback from"," "]}),jsxRuntimeExports.jsx("span",{className:"font-bold text-brand-primary",children:Ke.sender.name})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-text-muted mt-0.5",children:["Received on"," ",new Date(Ke.createdAt).toLocaleDateString()]})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-2 bg-bg-main p-3 rounded-lg text-sm text-text-secondary italic border border-border/50 break-words",children:['"',Ke.message,'"']})]})]},Ke._id)),Re.length===0&&!Te&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-text-secondary bg-bg-main rounded-xl border border-border border-dashed",children:[jsxRuntimeExports.jsx(MessageSquareQuote,{size:32,className:"mx-auto mb-2 opacity-50"}),jsxRuntimeExports.jsx("p",{children:"No feedback received yet."})]}),Te&&jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-text-secondary",children:"Loading..."})]})]})]}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:Ue,onClose:()=>Ve(!1),onConfirm:()=>Ve(!1),title:"Feedback Sent",message:"Your feedback has been sent successfully!",confirmText:"OK",variant:"success",showCancel:!1})]})}function Appreciation(){const e=useNavigate(),{user:t}=useAuth(),n=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="HR",[Ee,Re]=reactExports.useState([]),[Ce,Te]=reactExports.useState([]),[Me,De]=reactExports.useState([]),[Oe,Be]=reactExports.useState(!0),[ze,$e]=reactExports.useState(""),[He,Ue]=reactExports.useState(""),[Ve,We]=reactExports.useState(""),[qe,Ge]=reactExports.useState(!1),[Ye,Ke]=reactExports.useState(!1),[Xe,Ze]=reactExports.useState(!1),[er,St]=reactExports.useState(""),[ar,hr]=reactExports.useState(null),[ur,dr]=reactExports.useState(!1),[vr,yr]=reactExports.useState(null),[br,lr]=reactExports.useState(!1),[cr,rr]=reactExports.useState(null);reactExports.useEffect(()=>{pr()},[]);const pr=async()=>{try{Be(!0);const[Nr,Mr,Fr]=await Promise.all([apiService.getBadges(),apiService.getAppreciations(),apiService.getEmployees()]);Re(Nr),Te(Mr),De(Fr.filter($r=>$r.user&&$r.user._id!==(t==null?void 0:t.id)))}catch(Nr){console.error("Failed to fetch appreciation data",Nr)}finally{Be(!1)}},mr=async Nr=>{if(Nr.preventDefault(),!(!ze||!He))try{Ge(!0),await apiService.createAppreciation({recipientId:ze,badgeId:He,message:Ve}),Ke(!0),$e(""),Ue(""),We("");const Mr=await apiService.getAppreciations();Te(Mr)}catch(Mr){console.error("Failed to send appreciation",Mr)}finally{Ge(!1)}},ir=async Nr=>{if(Nr.preventDefault(),!(!er||!ar&&!vr))try{dr(!0);const Mr=new FormData;Mr.append("title",er),ar&&Mr.append("icon",ar),vr?await apiService.updateBadge(vr,Mr):await apiService.createBadge(Mr);const Fr=await apiService.getBadges();Re(Fr),St(""),hr(null),yr(null)}catch(Mr){console.error("Failed to save badge",Mr)}finally{dr(!1)}},nr=Nr=>{yr(Nr._id),St(Nr.title),hr(null)},gr=()=>{yr(null),St(""),hr(null)},Er=Nr=>{rr(Nr),lr(!0)},Cr=async()=>{if(cr)try{await apiService.deleteBadge(cr),Re(Ee.filter(Nr=>Nr._id!==cr)),lr(!1),rr(null)}catch(Nr){console.error("Failed to delete badge",Nr)}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-0",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:()=>e("/miscellaneous"),leftIcon:jsxRuntimeExports.jsx(ChevronLeft,{size:20}),style:{paddingRight:"0",paddingLeft:"0"}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Appreciation Center"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Recognize and celebrate your colleagues"})]})]}),n&&jsxRuntimeExports.jsx(Button,{onClick:()=>Ze(!0),leftIcon:jsxRuntimeExports.jsx(Award,{size:18}),children:"Manage Badges"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-1 space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 shadow-sm sticky top-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Award,{className:"text-brand-primary",size:20}),"Send Appreciation"]}),jsxRuntimeExports.jsxs("form",{onSubmit:mr,className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Recipient",value:ze,onChange:Nr=>$e(Nr),options:Me.map(Nr=>({value:Nr.user._id,label:`${Nr.firstName} ${Nr.lastName}`})),placeholder:"Select a colleague...",required:!0})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Select Badge"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2 max-h-48 overflow-y-auto p-1",children:[Ee.map(Nr=>jsxRuntimeExports.jsxs("div",{onClick:()=>Ue(Nr._id),className:`cursor-pointer rounded-lg p-2 border transition-all flex flex-col items-center gap-1 text-center ${He===Nr._id?"border-brand-primary bg-brand-primary/5 ring-1 ring-brand-primary":"border-border hover:border-brand-primary/50"}`,children:[jsxRuntimeExports.jsx("img",{src:Nr.icon.startsWith("http")?Nr.icon:`${ASSET_BASE_URL}${Nr.icon}`,alt:Nr.title,className:"w-8 h-8 object-contain"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-medium truncate w-full",children:Nr.title})]},Nr._id)),Ee.length===0&&jsxRuntimeExports.jsx("div",{className:"col-span-3 text-center py-4 text-xs text-text-muted",children:"No badges available."})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Message (Optional)"}),jsxRuntimeExports.jsx("textarea",{value:Ve,onChange:Nr=>We(Nr.target.value),placeholder:"Why are you appreciating them?",className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20 resize-none h-24"})]}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full",disabled:qe||!ze||!He,isLoading:qe,children:"Send Appreciation"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Recent Appreciations"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[Ce.map(Nr=>{var Mr;return jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-4 shadow-sm flex items-start gap-3 animate-in fade-in slide-in-from-bottom-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 bg-brand-primary/5 rounded-full p-2 border border-brand-primary/10",children:Nr.badge?jsxRuntimeExports.jsx("img",{src:Nr.badge.icon.startsWith("http")?Nr.badge.icon:`${ASSET_BASE_URL}${Nr.badge.icon}`,alt:Nr.badge.title,className:"w-8 h-8 object-contain"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:jsxRuntimeExports.jsx(Award,{className:"w-5 h-5 text-text-muted opacity-50"})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("p",{className:"text-text-primary font-medium text-base truncate",children:[jsxRuntimeExports.jsxs("span",{className:"font-bold text-brand-primary",children:[Nr.recipient.firstName," ",Nr.recipient.lastName]}),jsxRuntimeExports.jsx("span",{className:"text-text-secondary font-normal mx-1",children:"recieved"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-text-primary",children:((Mr=Nr.badge)==null?void 0:Mr.title)||"Unknown Badge"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-secondary mt-0.5 truncate",children:["from ",Nr.sender.firstName," ",Nr.sender.lastName]})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-text-muted whitespace-nowrap pt-1",children:new Date(Nr.createdAt).toLocaleDateString()})]}),Nr.message&&jsxRuntimeExports.jsxs("div",{className:"mt-2 bg-bg-main p-3 rounded-lg text-sm text-text-secondary italic border border-border/50 break-words",children:['"',Nr.message,'"']})]})]},Nr._id)}),Ce.length===0&&!Oe&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-text-secondary bg-bg-main rounded-xl border border-border border-dashed",children:[jsxRuntimeExports.jsx(Award,{size:32,className:"mx-auto mb-2 opacity-50"}),jsxRuntimeExports.jsx("p",{children:"No appreciations yet. Be the first to recognize someone!"})]}),Oe&&jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-text-secondary",children:"Loading..."})]})]})]}),jsxRuntimeExports.jsx(Modal,{isOpen:Xe,onClose:()=>Ze(!1),title:"Manage Badges",maxWidth:"max-w-2xl",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center border-b border-border pb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-text-primary",children:vr?"Edit Badge":"Add New Badge"}),vr&&jsxRuntimeExports.jsxs("button",{onClick:gr,className:"text-xs flex items-center gap-1 text-text-secondary hover:text-text-primary",children:[jsxRuntimeExports.jsx(X$1,{size:14})," Cancel"]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ir,className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Badge Title"}),jsxRuntimeExports.jsx(Input,{value:er,onChange:Nr=>St(Nr.target.value),placeholder:"e.g. Star Performer",className:"bg-bg-input",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Icon (SVG/PNG)"}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full",children:jsxRuntimeExports.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-border border-dashed rounded-lg cursor-pointer bg-bg-main hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:ar?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{className:"mb-2 text-sm text-brand-primary font-semibold",children:ar.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted",children:"Click to change"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Upload,{className:"w-8 h-8 mb-3 text-text-muted"}),jsxRuntimeExports.jsx("p",{className:"mb-2 text-sm text-text-secondary",children:jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Click to upload"})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted",children:"SVG, PNG (max 5MB)"})]})}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Nr=>Nr.target.files&&hr(Nr.target.files[0]),required:!vr})]})})]}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full",disabled:ur,isLoading:ur,children:vr?"Update Badge":"Upload Badge"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-text-primary border-b border-border pb-2",children:"Existing Badges"}),jsxRuntimeExports.jsxs("div",{className:"max-h-[400px] overflow-y-auto space-y-2 pr-1",children:[Ee.map(Nr=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-main rounded-lg border border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:Nr.icon.startsWith("http")?Nr.icon:`${ASSET_BASE_URL}${Nr.icon}`,alt:Nr.title,className:"w-8 h-8 object-contain"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-text-primary",children:Nr.title})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>nr(Nr),className:"p-1.5 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-md transition-colors",title:"Edit",children:jsxRuntimeExports.jsx(Pen,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>Er(Nr._id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-md transition-colors",title:"Delete",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})]},Nr._id)),Ee.length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"No badges added yet."})]})]})]})}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:br,onClose:()=>{lr(!1),rr(null)},onConfirm:Cr,title:"Delete Badge?",message:"Are you sure? This will not remove past appreciations but will prevent new ones.",confirmText:"Yes, Delete",cancelText:"Cancel",variant:"danger"}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:Ye,onClose:()=>Ke(!1),onConfirm:()=>Ke(!1),title:"Appreciation Sent!",message:"Your appreciation badge has been successfully delivered to your colleague.",confirmText:"Awesome!",variant:"success",showCancel:!1})]})}var shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports;function is$1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var objectIs$1=typeof Object.is=="function"?Object.is:is$1,useState=React$1.useState,useEffect$1=React$1.useEffect,useLayoutEffect=React$1.useLayoutEffect,useDebugValue$1=React$1.useDebugValue;function useSyncExternalStore$2(e,t){var n=t(),Ee=useState({inst:{value:n,getSnapshot:t}}),Re=Ee[0].inst,Ce=Ee[1];return useLayoutEffect(function(){Re.value=n,Re.getSnapshot=t,checkIfSnapshotChanged(Re)&&Ce({inst:Re})},[e,n,t]),useEffect$1(function(){return checkIfSnapshotChanged(Re)&&Ce({inst:Re}),e(function(){checkIfSnapshotChanged(Re)&&Ce({inst:Re})})},[e]),useDebugValue$1(n),n}function checkIfSnapshotChanged(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!objectIs$1(e,n)}catch{return!0}}function useSyncExternalStore$1(e,t){return t()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$1.useSyncExternalStore!==void 0?React$1.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;function OrderedMap(e){this.content=e}OrderedMap.prototype={constructor:OrderedMap,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var Ee=n&&n!=e?this.remove(n):this,Re=Ee.find(e),Ce=Ee.content.slice();return Re==-1?Ce.push(n||e,t):(Ce[Re+1]=t,n&&(Ce[Re]=n)),new OrderedMap(Ce)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new OrderedMap(n)},addToStart:function(e,t){return new OrderedMap([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new OrderedMap(n)},addBefore:function(e,t,n){var Ee=this.remove(t),Re=Ee.content.slice(),Ce=Ee.find(e);return Re.splice(Ce==-1?Re.length:Ce,0,t,n),new OrderedMap(Re)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=OrderedMap.from(e),e.size?new OrderedMap(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=OrderedMap.from(e),e.size?new OrderedMap(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=OrderedMap.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};OrderedMap.from=function(e){if(e instanceof OrderedMap)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new OrderedMap(t)};function findDiffStart(e,t,n){for(let Ee=0;;Ee++){if(Ee==e.childCount||Ee==t.childCount)return e.childCount==t.childCount?null:n;let Re=e.child(Ee),Ce=t.child(Ee);if(Re==Ce){n+=Re.nodeSize;continue}if(!Re.sameMarkup(Ce))return n;if(Re.isText&&Re.text!=Ce.text){for(let Te=0;Re.text[Te]==Ce.text[Te];Te++)n++;return n}if(Re.content.size||Ce.content.size){let Te=findDiffStart(Re.content,Ce.content,n+1);if(Te!=null)return Te}n+=Re.nodeSize}}function findDiffEnd(e,t,n,Ee){for(let Re=e.childCount,Ce=t.childCount;;){if(Re==0||Ce==0)return Re==Ce?null:{a:n,b:Ee};let Te=e.child(--Re),Me=t.child(--Ce),De=Te.nodeSize;if(Te==Me){n-=De,Ee-=De;continue}if(!Te.sameMarkup(Me))return{a:n,b:Ee};if(Te.isText&&Te.text!=Me.text){let Oe=0,Be=Math.min(Te.text.length,Me.text.length);for(;Oe<Be&&Te.text[Te.text.length-Oe-1]==Me.text[Me.text.length-Oe-1];)Oe++,n--,Ee--;return{a:n,b:Ee}}if(Te.content.size||Me.content.size){let Oe=findDiffEnd(Te.content,Me.content,n-1,Ee-1);if(Oe)return Oe}n-=De,Ee-=De}}class Fragment{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let Ee=0;Ee<t.length;Ee++)this.size+=t[Ee].nodeSize}nodesBetween(t,n,Ee,Re=0,Ce){for(let Te=0,Me=0;Me<n;Te++){let De=this.content[Te],Oe=Me+De.nodeSize;if(Oe>t&&Ee(De,Re+Me,Ce||null,Te)!==!1&&De.content.size){let Be=Me+1;De.nodesBetween(Math.max(0,t-Be),Math.min(De.content.size,n-Be),Ee,Re+Be)}Me=Oe}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,Ee,Re){let Ce="",Te=!0;return this.nodesBetween(t,n,(Me,De)=>{let Oe=Me.isText?Me.text.slice(Math.max(t,De)-De,n-De):Me.isLeaf?Re?typeof Re=="function"?Re(Me):Re:Me.type.spec.leafText?Me.type.spec.leafText(Me):"":"";Me.isBlock&&(Me.isLeaf&&Oe||Me.isTextblock)&&Ee&&(Te?Te=!1:Ce+=Ee),Ce+=Oe},0),Ce}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,Ee=t.firstChild,Re=this.content.slice(),Ce=0;for(n.isText&&n.sameMarkup(Ee)&&(Re[Re.length-1]=n.withText(n.text+Ee.text),Ce=1);Ce<t.content.length;Ce++)Re.push(t.content[Ce]);return new Fragment(Re,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let Ee=[],Re=0;if(n>t)for(let Ce=0,Te=0;Te<n;Ce++){let Me=this.content[Ce],De=Te+Me.nodeSize;De>t&&((Te<t||De>n)&&(Me.isText?Me=Me.cut(Math.max(0,t-Te),Math.min(Me.text.length,n-Te)):Me=Me.cut(Math.max(0,t-Te-1),Math.min(Me.content.size,n-Te-1))),Ee.push(Me),Re+=Me.nodeSize),Te=De}return new Fragment(Ee,Re)}cutByIndex(t,n){return t==n?Fragment.empty:t==0&&n==this.content.length?this:new Fragment(this.content.slice(t,n))}replaceChild(t,n){let Ee=this.content[t];if(Ee==n)return this;let Re=this.content.slice(),Ce=this.size+n.nodeSize-Ee.nodeSize;return Re[t]=n,new Fragment(Re,Ce)}addToStart(t){return new Fragment([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Fragment(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,Ee=0;n<this.content.length;n++){let Re=this.content[n];t(Re,Ee,n),Ee+=Re.nodeSize}}findDiffStart(t,n=0){return findDiffStart(this,t,n)}findDiffEnd(t,n=this.size,Ee=t.size){return findDiffEnd(this,t,n,Ee)}findIndex(t){if(t==0)return retIndex(0,t);if(t==this.size)return retIndex(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,Ee=0;;n++){let Re=this.child(n),Ce=Ee+Re.nodeSize;if(Ce>=t)return Ce==t?retIndex(n+1,Ce):retIndex(n,Ee);Ee=Ce}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return Fragment.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Fragment.empty;let n,Ee=0;for(let Re=0;Re<t.length;Re++){let Ce=t[Re];Ee+=Ce.nodeSize,Re&&Ce.isText&&t[Re-1].sameMarkup(Ce)?(n||(n=t.slice(0,Re)),n[n.length-1]=Ce.withText(n[n.length-1].text+Ce.text)):n&&n.push(Ce)}return new Fragment(n||t,Ee)}static from(t){if(!t)return Fragment.empty;if(t instanceof Fragment)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Fragment([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(e,t){return found.index=e,found.offset=t,found}function compareDeep(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let Ee=0;Ee<e.length;Ee++)if(!compareDeep(e[Ee],t[Ee]))return!1}else{for(let Ee in e)if(!(Ee in t)||!compareDeep(e[Ee],t[Ee]))return!1;for(let Ee in t)if(!(Ee in e))return!1}return!0}let Mark$1=class kl{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,Ee=!1;for(let Re=0;Re<t.length;Re++){let Ce=t[Re];if(this.eq(Ce))return t;if(this.type.excludes(Ce.type))n||(n=t.slice(0,Re));else{if(Ce.type.excludes(this.type))return t;!Ee&&Ce.type.rank>this.type.rank&&(n||(n=t.slice(0,Re)),n.push(this),Ee=!0),n&&n.push(Ce)}}return n||(n=t.slice()),Ee||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&compareDeep(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let Ee=t.marks[n.type];if(!Ee)throw new RangeError(`There is no mark type ${n.type} in this schema`);let Re=Ee.create(n.attrs);return Ee.checkAttrs(Re.attrs),Re}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let Ee=0;Ee<t.length;Ee++)if(!t[Ee].eq(n[Ee]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return kl.none;if(t instanceof kl)return[t];let n=t.slice();return n.sort((Ee,Re)=>Ee.type.rank-Re.type.rank),n}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(t,n,Ee){this.content=t,this.openStart=n,this.openEnd=Ee}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let Ee=insertInto(this.content,t+this.openStart,n);return Ee&&new Slice(Ee,this.openStart,this.openEnd)}removeBetween(t,n){return new Slice(removeRange(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Slice.empty;let Ee=n.openStart||0,Re=n.openEnd||0;if(typeof Ee!="number"||typeof Re!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(t,n.content),Ee,Re)}static maxOpen(t,n=!0){let Ee=0,Re=0;for(let Ce=t.firstChild;Ce&&!Ce.isLeaf&&(n||!Ce.type.spec.isolating);Ce=Ce.firstChild)Ee++;for(let Ce=t.lastChild;Ce&&!Ce.isLeaf&&(n||!Ce.type.spec.isolating);Ce=Ce.lastChild)Re++;return new Slice(t,Ee,Re)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(e,t,n){let{index:Ee,offset:Re}=e.findIndex(t),Ce=e.maybeChild(Ee),{index:Te,offset:Me}=e.findIndex(n);if(Re==t||Ce.isText){if(Me!=n&&!e.child(Te).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(Ee!=Te)throw new RangeError("Removing non-flat range");return e.replaceChild(Ee,Ce.copy(removeRange(Ce.content,t-Re-1,n-Re-1)))}function insertInto(e,t,n,Ee){let{index:Re,offset:Ce}=e.findIndex(t),Te=e.maybeChild(Re);if(Ce==t||Te.isText)return Ee&&!Ee.canReplace(Re,Re,n)?null:e.cut(0,t).append(n).append(e.cut(t));let Me=insertInto(Te.content,t-Ce-1,n,Te);return Me&&e.replaceChild(Re,Te.copy(Me))}function replace(e,t,n){if(n.openStart>e.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(e,t,n,0)}function replaceOuter(e,t,n,Ee){let Re=e.index(Ee),Ce=e.node(Ee);if(Re==t.index(Ee)&&Ee<e.depth-n.openStart){let Te=replaceOuter(e,t,n,Ee+1);return Ce.copy(Ce.content.replaceChild(Re,Te))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==Ee&&t.depth==Ee){let Te=e.parent,Me=Te.content;return close(Te,Me.cut(0,e.parentOffset).append(n.content).append(Me.cut(t.parentOffset)))}else{let{start:Te,end:Me}=prepareSliceForReplace(n,e);return close(Ce,replaceThreeWay(e,Te,Me,t,Ee))}else return close(Ce,replaceTwoWay(e,t,Ee))}function checkJoin(e,t){if(!t.type.compatibleContent(e.type))throw new ReplaceError("Cannot join "+t.type.name+" onto "+e.type.name)}function joinable$1(e,t,n){let Ee=e.node(n);return checkJoin(Ee,t.node(n)),Ee}function addNode(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function addRange(e,t,n,Ee){let Re=(t||e).node(n),Ce=0,Te=t?t.index(n):Re.childCount;e&&(Ce=e.index(n),e.depth>n?Ce++:e.textOffset&&(addNode(e.nodeAfter,Ee),Ce++));for(let Me=Ce;Me<Te;Me++)addNode(Re.child(Me),Ee);t&&t.depth==n&&t.textOffset&&addNode(t.nodeBefore,Ee)}function close(e,t){return e.type.checkContent(t),e.copy(t)}function replaceThreeWay(e,t,n,Ee,Re){let Ce=e.depth>Re&&joinable$1(e,t,Re+1),Te=Ee.depth>Re&&joinable$1(n,Ee,Re+1),Me=[];return addRange(null,e,Re,Me),Ce&&Te&&t.index(Re)==n.index(Re)?(checkJoin(Ce,Te),addNode(close(Ce,replaceThreeWay(e,t,n,Ee,Re+1)),Me)):(Ce&&addNode(close(Ce,replaceTwoWay(e,t,Re+1)),Me),addRange(t,n,Re,Me),Te&&addNode(close(Te,replaceTwoWay(n,Ee,Re+1)),Me)),addRange(Ee,null,Re,Me),new Fragment(Me)}function replaceTwoWay(e,t,n){let Ee=[];if(addRange(null,e,n,Ee),e.depth>n){let Re=joinable$1(e,t,n+1);addNode(close(Re,replaceTwoWay(e,t,n+1)),Ee)}return addRange(t,null,n,Ee),new Fragment(Ee)}function prepareSliceForReplace(e,t){let n=t.depth-e.openStart,Re=t.node(n).copy(e.content);for(let Ce=n-1;Ce>=0;Ce--)Re=t.node(Ce).copy(Fragment.from(Re));return{start:Re.resolveNoCache(e.openStart+n),end:Re.resolveNoCache(Re.content.size-e.openEnd-n)}}class ResolvedPos{constructor(t,n,Ee){this.pos=t,this.path=n,this.parentOffset=Ee,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let Ee=this.pos-this.path[this.path.length-1],Re=t.child(n);return Ee?t.child(n).cut(Ee):Re}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let Ee=this.path[n*3],Re=n==0?0:this.path[n*3-1]+1;for(let Ce=0;Ce<t;Ce++)Re+=Ee.child(Ce).nodeSize;return Re}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Mark$1.none;if(this.textOffset)return t.child(n).marks;let Ee=t.maybeChild(n-1),Re=t.maybeChild(n);if(!Ee){let Me=Ee;Ee=Re,Re=Me}let Ce=Ee.marks;for(var Te=0;Te<Ce.length;Te++)Ce[Te].type.spec.inclusive===!1&&(!Re||!Ce[Te].isInSet(Re.marks))&&(Ce=Ce[Te--].removeFromSet(Ce));return Ce}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let Ee=n.marks,Re=t.parent.maybeChild(t.index());for(var Ce=0;Ce<Ee.length;Ce++)Ee[Ce].type.spec.inclusive===!1&&(!Re||!Ee[Ce].isInSet(Re.marks))&&(Ee=Ee[Ce--].removeFromSet(Ee));return Ee}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let Ee=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);Ee>=0;Ee--)if(t.pos<=this.end(Ee)&&(!n||n(this.node(Ee))))return new NodeRange(this,t,Ee);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let Ee=[],Re=0,Ce=n;for(let Te=t;;){let{index:Me,offset:De}=Te.content.findIndex(Ce),Oe=Ce-De;if(Ee.push(Te,Me,Re+De),!Oe||(Te=Te.child(Me),Te.isText))break;Ce=Oe-1,Re+=De+1}return new ResolvedPos(n,Ee,Ce)}static resolveCached(t,n){let Ee=resolveCache.get(t);if(Ee)for(let Ce=0;Ce<Ee.elts.length;Ce++){let Te=Ee.elts[Ce];if(Te.pos==n)return Te}else resolveCache.set(t,Ee=new ResolveCache);let Re=Ee.elts[Ee.i]=ResolvedPos.resolve(t,n);return Ee.i=(Ee.i+1)%resolveCacheSize,Re}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(t,n,Ee){this.$from=t,this.$to=n,this.depth=Ee}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$1=class Cl{constructor(t,n,Ee,Re=Mark$1.none){this.type=t,this.attrs=n,this.marks=Re,this.content=Ee||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,Ee,Re=0){this.content.nodesBetween(t,n,Ee,Re,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,Ee,Re){return this.content.textBetween(t,n,Ee,Re)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,Ee){return this.type==t&&compareDeep(this.attrs,n||t.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,Ee||Mark$1.none)}copy(t=null){return t==this.content?this:new Cl(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Cl(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,Ee=!1){if(t==n)return Slice.empty;let Re=this.resolve(t),Ce=this.resolve(n),Te=Ee?0:Re.sharedDepth(n),Me=Re.start(Te),Oe=Re.node(Te).content.cut(Re.pos-Me,Ce.pos-Me);return new Slice(Oe,Re.depth-Te,Ce.depth-Te)}replace(t,n,Ee){return replace(this.resolve(t),this.resolve(n),Ee)}nodeAt(t){for(let n=this;;){let{index:Ee,offset:Re}=n.content.findIndex(t);if(n=n.maybeChild(Ee),!n)return null;if(Re==t||n.isText)return n;t-=Re+1}}childAfter(t){let{index:n,offset:Ee}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:Ee}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:Ee}=this.content.findIndex(t);if(Ee<t)return{node:this.content.child(n),index:n,offset:Ee};let Re=this.content.child(n-1);return{node:Re,index:n-1,offset:Ee-Re.nodeSize}}resolve(t){return ResolvedPos.resolveCached(this,t)}resolveNoCache(t){return ResolvedPos.resolve(this,t)}rangeHasMark(t,n,Ee){let Re=!1;return n>t&&this.nodesBetween(t,n,Ce=>(Ee.isInSet(Ce.marks)&&(Re=!0),!Re)),Re}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,Ee=Fragment.empty,Re=0,Ce=Ee.childCount){let Te=this.contentMatchAt(t).matchFragment(Ee,Re,Ce),Me=Te&&Te.matchFragment(this.content,n);if(!Me||!Me.validEnd)return!1;for(let De=Re;De<Ce;De++)if(!this.type.allowsMarks(Ee.child(De).marks))return!1;return!0}canReplaceWith(t,n,Ee,Re){if(Re&&!this.type.allowsMarks(Re))return!1;let Ce=this.contentMatchAt(t).matchType(Ee),Te=Ce&&Ce.matchFragment(this.content,n);return Te?Te.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Mark$1.none;for(let n=0;n<this.marks.length;n++){let Ee=this.marks[n];Ee.type.checkAttrs(Ee.attrs),t=Ee.addToSet(t)}if(!Mark$1.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let Ee;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");Ee=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,Ee)}let Re=Fragment.fromJSON(t,n.content),Ce=t.nodeType(n.type).create(n.attrs,Re,Ee);return Ce.type.checkAttrs(Ce.attrs),Ce}};Node$1.prototype.text=void 0;class TextNode extends Node$1{constructor(t,n,Ee,Re){if(super(t,n,null,Re),!Ee)throw new RangeError("Empty text nodes are not allowed");this.text=Ee}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new TextNode(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new TextNode(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function wrapMarks(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class ContentMatch{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let Ee=new TokenStream(t,n);if(Ee.next==null)return ContentMatch.empty;let Re=parseExpr(Ee);Ee.next&&Ee.err("Unexpected trailing text");let Ce=dfa(nfa(Re));return checkForDeadEnds(Ce,Ee),Ce}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,Ee=t.childCount){let Re=this;for(let Ce=n;Re&&Ce<Ee;Ce++)Re=Re.matchType(t.child(Ce).type);return Re}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let Ee=0;Ee<t.next.length;Ee++)if(this.next[n].type==t.next[Ee].type)return!0;return!1}fillBefore(t,n=!1,Ee=0){let Re=[this];function Ce(Te,Me){let De=Te.matchFragment(t,Ee);if(De&&(!n||De.validEnd))return Fragment.from(Me.map(Oe=>Oe.createAndFill()));for(let Oe=0;Oe<Te.next.length;Oe++){let{type:Be,next:ze}=Te.next[Oe];if(!(Be.isText||Be.hasRequiredAttrs())&&Re.indexOf(ze)==-1){Re.push(ze);let $e=Ce(ze,Me.concat(Be));if($e)return $e}}return null}return Ce(this,[])}findWrapping(t){for(let Ee=0;Ee<this.wrapCache.length;Ee+=2)if(this.wrapCache[Ee]==t)return this.wrapCache[Ee+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),Ee=[{match:this,type:null,via:null}];for(;Ee.length;){let Re=Ee.shift(),Ce=Re.match;if(Ce.matchType(t)){let Te=[];for(let Me=Re;Me.type;Me=Me.via)Te.push(Me.type);return Te.reverse()}for(let Te=0;Te<Ce.next.length;Te++){let{type:Me,next:De}=Ce.next[Te];!Me.isLeaf&&!Me.hasRequiredAttrs()&&!(Me.name in n)&&(!Re.type||De.validEnd)&&(Ee.push({match:Me.contentMatch,type:Me,via:Re}),n[Me.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(Ee){t.push(Ee);for(let Re=0;Re<Ee.next.length;Re++)t.indexOf(Ee.next[Re].next)==-1&&n(Ee.next[Re].next)}return n(this),t.map((Ee,Re)=>{let Ce=Re+(Ee.validEnd?"*":" ")+" ";for(let Te=0;Te<Ee.next.length;Te++)Ce+=(Te?", ":"")+Ee.next[Te].type.name+"->"+t.indexOf(Ee.next[Te].next);return Ce}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function parseExpr(e){let t=[];do t.push(parseExprSeq(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function parseExprSeq(e){let t=[];do t.push(parseExprSubscript(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function parseExprSubscript(e){let t=parseExprAtom(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=parseExprRange(e,t);else break;return t}function parseNum(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function parseExprRange(e,t){let n=parseNum(e),Ee=n;return e.eat(",")&&(e.next!="}"?Ee=parseNum(e):Ee=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:Ee,expr:t}}function resolveName(e,t){let n=e.nodeTypes,Ee=n[t];if(Ee)return[Ee];let Re=[];for(let Ce in n){let Te=n[Ce];Te.isInGroup(t)&&Re.push(Te)}return Re.length==0&&e.err("No node type or group '"+t+"' found"),Re}function parseExprAtom(e){if(e.eat("(")){let t=parseExpr(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=resolveName(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function nfa(e){let t=[[]];return Re(Ce(e,0),n()),t;function n(){return t.push([])-1}function Ee(Te,Me,De){let Oe={term:De,to:Me};return t[Te].push(Oe),Oe}function Re(Te,Me){Te.forEach(De=>De.to=Me)}function Ce(Te,Me){if(Te.type=="choice")return Te.exprs.reduce((De,Oe)=>De.concat(Ce(Oe,Me)),[]);if(Te.type=="seq")for(let De=0;;De++){let Oe=Ce(Te.exprs[De],Me);if(De==Te.exprs.length-1)return Oe;Re(Oe,Me=n())}else if(Te.type=="star"){let De=n();return Ee(Me,De),Re(Ce(Te.expr,De),De),[Ee(De)]}else if(Te.type=="plus"){let De=n();return Re(Ce(Te.expr,Me),De),Re(Ce(Te.expr,De),De),[Ee(De)]}else{if(Te.type=="opt")return[Ee(Me)].concat(Ce(Te.expr,Me));if(Te.type=="range"){let De=Me;for(let Oe=0;Oe<Te.min;Oe++){let Be=n();Re(Ce(Te.expr,De),Be),De=Be}if(Te.max==-1)Re(Ce(Te.expr,De),De);else for(let Oe=Te.min;Oe<Te.max;Oe++){let Be=n();Ee(De,Be),Re(Ce(Te.expr,De),Be),De=Be}return[Ee(De)]}else{if(Te.type=="name")return[Ee(Me,void 0,Te.value)];throw new Error("Unknown expr type")}}}}function cmp(e,t){return t-e}function nullFrom(e,t){let n=[];return Ee(t),n.sort(cmp);function Ee(Re){let Ce=e[Re];if(Ce.length==1&&!Ce[0].term)return Ee(Ce[0].to);n.push(Re);for(let Te=0;Te<Ce.length;Te++){let{term:Me,to:De}=Ce[Te];!Me&&n.indexOf(De)==-1&&Ee(De)}}}function dfa(e){let t=Object.create(null);return n(nullFrom(e,0));function n(Ee){let Re=[];Ee.forEach(Te=>{e[Te].forEach(({term:Me,to:De})=>{if(!Me)return;let Oe;for(let Be=0;Be<Re.length;Be++)Re[Be][0]==Me&&(Oe=Re[Be][1]);nullFrom(e,De).forEach(Be=>{Oe||Re.push([Me,Oe=[]]),Oe.indexOf(Be)==-1&&Oe.push(Be)})})});let Ce=t[Ee.join(",")]=new ContentMatch(Ee.indexOf(e.length-1)>-1);for(let Te=0;Te<Re.length;Te++){let Me=Re[Te][1].sort(cmp);Ce.next.push({type:Re[Te][0],next:t[Me.join(",")]||n(Me)})}return Ce}}function checkForDeadEnds(e,t){for(let n=0,Ee=[e];n<Ee.length;n++){let Re=Ee[n],Ce=!Re.validEnd,Te=[];for(let Me=0;Me<Re.next.length;Me++){let{type:De,next:Oe}=Re.next[Me];Te.push(De.name),Ce&&!(De.isText||De.hasRequiredAttrs())&&(Ce=!1),Ee.indexOf(Oe)==-1&&Ee.push(Oe)}Ce&&t.err("Only non-generatable nodes ("+Te.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(e){let t=Object.create(null);for(let n in e){let Ee=e[n];if(!Ee.hasDefault)return null;t[n]=Ee.default}return t}function computeAttrs(e,t){let n=Object.create(null);for(let Ee in e){let Re=t&&t[Ee];if(Re===void 0){let Ce=e[Ee];if(Ce.hasDefault)Re=Ce.default;else throw new RangeError("No value supplied for attribute "+Ee)}n[Ee]=Re}return n}function checkAttrs(e,t,n,Ee){for(let Re in t)if(!(Re in e))throw new RangeError(`Unsupported attribute ${Re} for ${n} of type ${Re}`);for(let Re in e){let Ce=e[Re];Ce.validate&&Ce.validate(t[Re])}}function initAttrs(e,t){let n=Object.create(null);if(t)for(let Ee in t)n[Ee]=new Attribute(e,Ee,t[Ee]);return n}let NodeType$1=class hc{constructor(t,n,Ee){this.name=t,this.schema=n,this.spec=Ee,this.markSet=null,this.groups=Ee.group?Ee.group.split(" "):[],this.attrs=initAttrs(t,Ee.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(Ee.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,t)}create(t=null,n,Ee){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(t),Fragment.from(n),Mark$1.setFrom(Ee))}createChecked(t=null,n,Ee){return n=Fragment.from(n),this.checkContent(n),new Node$1(this,this.computeAttrs(t),n,Mark$1.setFrom(Ee))}createAndFill(t=null,n,Ee){if(t=this.computeAttrs(t),n=Fragment.from(n),n.size){let Te=this.contentMatch.fillBefore(n);if(!Te)return null;n=Te.append(n)}let Re=this.contentMatch.matchFragment(n),Ce=Re&&Re.fillBefore(Fragment.empty,!0);return Ce?new Node$1(this,t,n.append(Ce),Mark$1.setFrom(Ee)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let Ee=0;Ee<t.childCount;Ee++)if(!this.allowsMarks(t.child(Ee).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){checkAttrs(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let Ee=0;Ee<t.length;Ee++)this.allowsMarkType(t[Ee].type)?n&&n.push(t[Ee]):n||(n=t.slice(0,Ee));return n?n.length?n:Mark$1.none:t}static compile(t,n){let Ee=Object.create(null);t.forEach((Ce,Te)=>Ee[Ce]=new hc(Ce,n,Te));let Re=n.spec.topNode||"doc";if(!Ee[Re])throw new RangeError("Schema is missing its top node type ('"+Re+"')");if(!Ee.text)throw new RangeError("Every schema needs a 'text' type");for(let Ce in Ee.text.attrs)throw new RangeError("The text node type should not have attributes");return Ee}};function validateType(e,t,n){let Ee=n.split("|");return Re=>{let Ce=Re===null?"null":typeof Re;if(Ee.indexOf(Ce)<0)throw new RangeError(`Expected value of type ${Ee} for attribute ${t} on type ${e}, got ${Ce}`)}}class Attribute{constructor(t,n,Ee){this.hasDefault=Object.prototype.hasOwnProperty.call(Ee,"default"),this.default=Ee.default,this.validate=typeof Ee.validate=="string"?validateType(t,n,Ee.validate):Ee.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(t,n,Ee,Re){this.name=t,this.rank=n,this.schema=Ee,this.spec=Re,this.attrs=initAttrs(t,Re.attrs),this.excluded=null;let Ce=defaultAttrs(this.attrs);this.instance=Ce?new Mark$1(this,Ce):null}create(t=null){return!t&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,t))}static compile(t,n){let Ee=Object.create(null),Re=0;return t.forEach((Ce,Te)=>Ee[Ce]=new MarkType(Ce,Re++,n,Te)),Ee}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){checkAttrs(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class Schema{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let Re in t)n[Re]=t[Re];n.nodes=OrderedMap.from(t.nodes),n.marks=OrderedMap.from(t.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let Ee=Object.create(null);for(let Re in this.nodes){if(Re in this.marks)throw new RangeError(Re+" can not be both a node and a mark");let Ce=this.nodes[Re],Te=Ce.spec.content||"",Me=Ce.spec.marks;if(Ce.contentMatch=Ee[Te]||(Ee[Te]=ContentMatch.parse(Te,this.nodes)),Ce.inlineContent=Ce.contentMatch.inlineContent,Ce.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!Ce.isInline||!Ce.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=Ce}Ce.markSet=Me=="_"?null:Me?gatherMarks(this,Me.split(" ")):Me==""||!Ce.inlineContent?[]:null}for(let Re in this.marks){let Ce=this.marks[Re],Te=Ce.spec.excludes;Ce.excluded=Te==null?[Ce]:Te==""?[]:gatherMarks(this,Te.split(" "))}this.nodeFromJSON=Re=>Node$1.fromJSON(this,Re),this.markFromJSON=Re=>Mark$1.fromJSON(this,Re),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,Ee,Re){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof NodeType$1){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,Ee,Re)}text(t,n){let Ee=this.nodes.text;return new TextNode(Ee,Ee.defaultAttrs,t,Mark$1.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function gatherMarks(e,t){let n=[];for(let Ee=0;Ee<t.length;Ee++){let Re=t[Ee],Ce=e.marks[Re],Te=Ce;if(Ce)n.push(Ce);else for(let Me in e.marks){let De=e.marks[Me];(Re=="_"||De.spec.group&&De.spec.group.split(" ").indexOf(Re)>-1)&&n.push(Te=De)}if(!Te)throw new SyntaxError("Unknown mark type: '"+t[Ee]+"'")}return n}function isTagRule(e){return e.tag!=null}function isStyleRule(e){return e.style!=null}class DOMParser{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let Ee=this.matchedStyles=[];n.forEach(Re=>{if(isTagRule(Re))this.tags.push(Re);else if(isStyleRule(Re)){let Ce=/[^=]*/.exec(Re.style)[0];Ee.indexOf(Ce)<0&&Ee.push(Ce),this.styles.push(Re)}}),this.normalizeLists=!this.tags.some(Re=>{if(!/^(ul|ol)\b/.test(Re.tag)||!Re.node)return!1;let Ce=t.nodes[Re.node];return Ce.contentMatch.matchType(Ce)})}parse(t,n={}){let Ee=new ParseContext(this,n,!1);return Ee.addAll(t,Mark$1.none,n.from,n.to),Ee.finish()}parseSlice(t,n={}){let Ee=new ParseContext(this,n,!0);return Ee.addAll(t,Mark$1.none,n.from,n.to),Slice.maxOpen(Ee.finish())}matchTag(t,n,Ee){for(let Re=Ee?this.tags.indexOf(Ee)+1:0;Re<this.tags.length;Re++){let Ce=this.tags[Re];if(matches(t,Ce.tag)&&(Ce.namespace===void 0||t.namespaceURI==Ce.namespace)&&(!Ce.context||n.matchesContext(Ce.context))){if(Ce.getAttrs){let Te=Ce.getAttrs(t);if(Te===!1)continue;Ce.attrs=Te||void 0}return Ce}}}matchStyle(t,n,Ee,Re){for(let Ce=Re?this.styles.indexOf(Re)+1:0;Ce<this.styles.length;Ce++){let Te=this.styles[Ce],Me=Te.style;if(!(Me.indexOf(t)!=0||Te.context&&!Ee.matchesContext(Te.context)||Me.length>t.length&&(Me.charCodeAt(t.length)!=61||Me.slice(t.length+1)!=n))){if(Te.getAttrs){let De=Te.getAttrs(n);if(De===!1)continue;Te.attrs=De||void 0}return Te}}}static schemaRules(t){let n=[];function Ee(Re){let Ce=Re.priority==null?50:Re.priority,Te=0;for(;Te<n.length;Te++){let Me=n[Te];if((Me.priority==null?50:Me.priority)<Ce)break}n.splice(Te,0,Re)}for(let Re in t.marks){let Ce=t.marks[Re].spec.parseDOM;Ce&&Ce.forEach(Te=>{Ee(Te=copy(Te)),Te.mark||Te.ignore||Te.clearMark||(Te.mark=Re)})}for(let Re in t.nodes){let Ce=t.nodes[Re].spec.parseDOM;Ce&&Ce.forEach(Te=>{Ee(Te=copy(Te)),Te.node||Te.ignore||Te.mark||(Te.node=Re)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new DOMParser(t,DOMParser.schemaRules(t)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(e,t,n){return t!=null?(t?OPT_PRESERVE_WS:0)|(t==="full"?OPT_PRESERVE_WS_FULL:0):e&&e.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:n&~OPT_OPEN_LEFT}class NodeContext{constructor(t,n,Ee,Re,Ce,Te){this.type=t,this.attrs=n,this.marks=Ee,this.solid=Re,this.options=Te,this.content=[],this.activeMarks=Mark$1.none,this.match=Ce||(Te&OPT_OPEN_LEFT?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Fragment.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let Ee=this.type.contentMatch,Re;return(Re=Ee.findWrapping(t.type))?(this.match=Ee,Re):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&OPT_PRESERVE_WS)){let Ee=this.content[this.content.length-1],Re;if(Ee&&Ee.isText&&(Re=/[ \t\r\n\u000c]+$/.exec(Ee.text))){let Ce=Ee;Ee.text.length==Re[0].length?this.content.pop():this.content[this.content.length-1]=Ce.withText(Ce.text.slice(0,Ce.text.length-Re[0].length))}}let n=Fragment.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!blockTags.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(t,n,Ee){this.parser=t,this.options=n,this.isOpen=Ee,this.open=0,this.localPreserveWS=!1;let Re=n.topNode,Ce,Te=wsOptionsFor(null,n.preserveWhitespace,0)|(Ee?OPT_OPEN_LEFT:0);Re?Ce=new NodeContext(Re.type,Re.attrs,Mark$1.none,!0,n.topMatch||Re.type.contentMatch,Te):Ee?Ce=new NodeContext(null,null,Mark$1.none,!0,null,Te):Ce=new NodeContext(t.schema.topNodeType,null,Mark$1.none,!0,null,Te),this.nodes=[Ce],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let Ee=t.nodeValue,Re=this.top,Ce=Re.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(Re.options&OPT_PRESERVE_WS)>0,{schema:Te}=this.parser;if(Ce==="full"||Re.inlineContext(t)||/[^ \t\r\n\u000c]/.test(Ee)){if(Ce)if(Ce==="full")Ee=Ee.replace(/\r\n?/g,`
`);else if(Te.linebreakReplacement&&/[\r\n]/.test(Ee)&&this.top.findWrapping(Te.linebreakReplacement.create())){let Me=Ee.split(/\r?\n|\r/);for(let De=0;De<Me.length;De++)De&&this.insertNode(Te.linebreakReplacement.create(),n,!0),Me[De]&&this.insertNode(Te.text(Me[De]),n,!/\S/.test(Me[De]));Ee=""}else Ee=Ee.replace(/\r?\n|\r/g," ");else if(Ee=Ee.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(Ee)&&this.open==this.nodes.length-1){let Me=Re.content[Re.content.length-1],De=t.previousSibling;(!Me||De&&De.nodeName=="BR"||Me.isText&&/[ \t\r\n\u000c]$/.test(Me.text))&&(Ee=Ee.slice(1))}Ee&&this.insertNode(Te.text(Ee),n,!/\S/.test(Ee)),this.findInText(t)}else this.findInside(t)}addElement(t,n,Ee){let Re=this.localPreserveWS,Ce=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let Te=t.nodeName.toLowerCase(),Me;listTags.hasOwnProperty(Te)&&this.parser.normalizeLists&&normalizeList(t);let De=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(Me=this.parser.matchTag(t,this,Ee));e:if(De?De.ignore:ignoreTags.hasOwnProperty(Te))this.findInside(t),this.ignoreFallback(t,n);else if(!De||De.skip||De.closeParent){De&&De.closeParent?this.open=Math.max(0,this.open-1):De&&De.skip.nodeType&&(t=De.skip);let Oe,Be=this.needsBlock;if(blockTags.hasOwnProperty(Te))Ce.content.length&&Ce.content[0].isInline&&this.open&&(this.open--,Ce=this.top),Oe=!0,Ce.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let ze=De&&De.skip?n:this.readStyles(t,n);ze&&this.addAll(t,ze),Oe&&this.sync(Ce),this.needsBlock=Be}else{let Oe=this.readStyles(t,n);Oe&&this.addElementByRule(t,De,Oe,De.consuming===!1?Me:void 0)}this.localPreserveWS=Re}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let Ee=t.style;if(Ee&&Ee.length)for(let Re=0;Re<this.parser.matchedStyles.length;Re++){let Ce=this.parser.matchedStyles[Re],Te=Ee.getPropertyValue(Ce);if(Te)for(let Me=void 0;;){let De=this.parser.matchStyle(Ce,Te,this,Me);if(!De)break;if(De.ignore)return null;if(De.clearMark?n=n.filter(Oe=>!De.clearMark(Oe)):n=n.concat(this.parser.schema.marks[De.mark].create(De.attrs)),De.consuming===!1)Me=De;else break}}return n}addElementByRule(t,n,Ee,Re){let Ce,Te;if(n.node)if(Te=this.parser.schema.nodes[n.node],Te.isLeaf)this.insertNode(Te.create(n.attrs),Ee,t.nodeName=="BR")||this.leafFallback(t,Ee);else{let De=this.enter(Te,n.attrs||null,Ee,n.preserveWhitespace);De&&(Ce=!0,Ee=De)}else{let De=this.parser.schema.marks[n.mark];Ee=Ee.concat(De.create(n.attrs))}let Me=this.top;if(Te&&Te.isLeaf)this.findInside(t);else if(Re)this.addElement(t,Ee,Re);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(De=>this.insertNode(De,Ee,!1));else{let De=t;typeof n.contentElement=="string"?De=t.querySelector(n.contentElement):typeof n.contentElement=="function"?De=n.contentElement(t):n.contentElement&&(De=n.contentElement),this.findAround(t,De,!0),this.addAll(De,Ee),this.findAround(t,De,!1)}Ce&&this.sync(Me)&&this.open--}addAll(t,n,Ee,Re){let Ce=Ee||0;for(let Te=Ee?t.childNodes[Ee]:t.firstChild,Me=Re==null?null:t.childNodes[Re];Te!=Me;Te=Te.nextSibling,++Ce)this.findAtPoint(t,Ce),this.addDOM(Te,n);this.findAtPoint(t,Ce)}findPlace(t,n,Ee){let Re,Ce;for(let Te=this.open,Me=0;Te>=0;Te--){let De=this.nodes[Te],Oe=De.findWrapping(t);if(Oe&&(!Re||Re.length>Oe.length+Me)&&(Re=Oe,Ce=De,!Oe.length))break;if(De.solid){if(Ee)break;Me+=2}}if(!Re)return null;this.sync(Ce);for(let Te=0;Te<Re.length;Te++)n=this.enterInner(Re[Te],null,n,!1);return n}insertNode(t,n,Ee){if(t.isInline&&this.needsBlock&&!this.top.type){let Ce=this.textblockFromContext();Ce&&(n=this.enterInner(Ce,null,n))}let Re=this.findPlace(t,n,Ee);if(Re){this.closeExtra();let Ce=this.top;Ce.match&&(Ce.match=Ce.match.matchType(t.type));let Te=Mark$1.none;for(let Me of Re.concat(t.marks))(Ce.type?Ce.type.allowsMarkType(Me.type):markMayApply(Me.type,t.type))&&(Te=Me.addToSet(Te));return Ce.content.push(t.mark(Te)),!0}return!1}enter(t,n,Ee,Re){let Ce=this.findPlace(t.create(n),Ee,!1);return Ce&&(Ce=this.enterInner(t,n,Ee,!0,Re)),Ce}enterInner(t,n,Ee,Re=!1,Ce){this.closeExtra();let Te=this.top;Te.match=Te.match&&Te.match.matchType(t);let Me=wsOptionsFor(t,Ce,Te.options);Te.options&OPT_OPEN_LEFT&&Te.content.length==0&&(Me|=OPT_OPEN_LEFT);let De=Mark$1.none;return Ee=Ee.filter(Oe=>(Te.type?Te.type.allowsMarkType(Oe.type):markMayApply(Oe.type,t))?(De=Oe.addToSet(De),!1):!0),this.nodes.push(new NodeContext(t,n,De,Re,null,Me)),this.open++,Ee}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let Ee=this.nodes[n].content;for(let Re=Ee.length-1;Re>=0;Re--)t+=Ee[Re].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let Ee=0;Ee<this.find.length;Ee++)this.find[Ee].node==t&&this.find[Ee].offset==n&&(this.find[Ee].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,Ee){if(t!=n&&this.find)for(let Re=0;Re<this.find.length;Re++)this.find[Re].pos==null&&t.nodeType==1&&t.contains(this.find[Re].node)&&n.compareDocumentPosition(this.find[Re].node)&(Ee?2:4)&&(this.find[Re].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),Ee=this.options.context,Re=!this.isOpen&&(!Ee||Ee.parent.type==this.nodes[0].type),Ce=-(Ee?Ee.depth+1:0)+(Re?0:1),Te=(Me,De)=>{for(;Me>=0;Me--){let Oe=n[Me];if(Oe==""){if(Me==n.length-1||Me==0)continue;for(;De>=Ce;De--)if(Te(Me-1,De))return!0;return!1}else{let Be=De>0||De==0&&Re?this.nodes[De].type:Ee&&De>=Ce?Ee.node(De-Ce).type:null;if(!Be||Be.name!=Oe&&!Be.isInGroup(Oe))return!1;De--}}return!0};return Te(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let Ee=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(Ee&&Ee.isTextblock&&Ee.defaultAttrs)return Ee}for(let n in this.parser.schema.nodes){let Ee=this.parser.schema.nodes[n];if(Ee.isTextblock&&Ee.defaultAttrs)return Ee}}}function normalizeList(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let Ee=t.nodeType==1?t.nodeName.toLowerCase():null;Ee&&listTags.hasOwnProperty(Ee)&&n?(n.appendChild(t),t=n):Ee=="li"?n=t:Ee&&(n=null)}}function matches(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function copy(e){let t={};for(let n in e)t[n]=e[n];return t}function markMayApply(e,t){let n=t.schema.nodes;for(let Ee in n){let Re=n[Ee];if(!Re.allowsMarkType(e))continue;let Ce=[],Te=Me=>{Ce.push(Me);for(let De=0;De<Me.edgeCount;De++){let{type:Oe,next:Be}=Me.edge(De);if(Oe==t||Ce.indexOf(Be)<0&&Te(Be))return!0}};if(Te(Re.contentMatch))return!0}}class DOMSerializer{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},Ee){Ee||(Ee=doc$1(n).createDocumentFragment());let Re=Ee,Ce=[];return t.forEach(Te=>{if(Ce.length||Te.marks.length){let Me=0,De=0;for(;Me<Ce.length&&De<Te.marks.length;){let Oe=Te.marks[De];if(!this.marks[Oe.type.name]){De++;continue}if(!Oe.eq(Ce[Me][0])||Oe.type.spec.spanning===!1)break;Me++,De++}for(;Me<Ce.length;)Re=Ce.pop()[1];for(;De<Te.marks.length;){let Oe=Te.marks[De++],Be=this.serializeMark(Oe,Te.isInline,n);Be&&(Ce.push([Oe,Re]),Re.appendChild(Be.dom),Re=Be.contentDOM||Be.dom)}}Re.appendChild(this.serializeNodeInner(Te,n))}),Ee}serializeNodeInner(t,n){let{dom:Ee,contentDOM:Re}=renderSpec(doc$1(n),this.nodes[t.type.name](t),null,t.attrs);if(Re){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,Re)}return Ee}serializeNode(t,n={}){let Ee=this.serializeNodeInner(t,n);for(let Re=t.marks.length-1;Re>=0;Re--){let Ce=this.serializeMark(t.marks[Re],t.isInline,n);Ce&&((Ce.contentDOM||Ce.dom).appendChild(Ee),Ee=Ce.dom)}return Ee}serializeMark(t,n,Ee={}){let Re=this.marks[t.type.name];return Re&&renderSpec(doc$1(Ee),Re(t,n),null,t.attrs)}static renderSpec(t,n,Ee=null,Re){return renderSpec(t,n,Ee,Re)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=gatherToDOM(t.nodes);return n.text||(n.text=Ee=>Ee.text),n}static marksFromSchema(t){return gatherToDOM(t.marks)}}function gatherToDOM(e){let t={};for(let n in e){let Ee=e[n].spec.toDOM;Ee&&(t[n]=Ee)}return t}function doc$1(e){return e.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(e){let t=suspiciousAttributeCache.get(e);return t===void 0&&suspiciousAttributeCache.set(e,t=suspiciousAttributesInner(e)),t}function suspiciousAttributesInner(e){let t=null;function n(Ee){if(Ee&&typeof Ee=="object")if(Array.isArray(Ee))if(typeof Ee[0]=="string")t||(t=[]),t.push(Ee);else for(let Re=0;Re<Ee.length;Re++)n(Ee[Re]);else for(let Re in Ee)n(Ee[Re])}return n(e),t}function renderSpec(e,t,n,Ee){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let Re=t[0],Ce;if(typeof Re!="string")throw new RangeError("Invalid array passed to renderSpec");if(Ee&&(Ce=suspiciousAttributes(Ee))&&Ce.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let Te=Re.indexOf(" ");Te>0&&(n=Re.slice(0,Te),Re=Re.slice(Te+1));let Me,De=n?e.createElementNS(n,Re):e.createElement(Re),Oe=t[1],Be=1;if(Oe&&typeof Oe=="object"&&Oe.nodeType==null&&!Array.isArray(Oe)){Be=2;for(let ze in Oe)if(Oe[ze]!=null){let $e=ze.indexOf(" ");$e>0?De.setAttributeNS(ze.slice(0,$e),ze.slice($e+1),Oe[ze]):ze=="style"&&De.style?De.style.cssText=Oe[ze]:De.setAttribute(ze,Oe[ze])}}for(let ze=Be;ze<t.length;ze++){let $e=t[ze];if($e===0){if(ze<t.length-1||ze>Be)throw new RangeError("Content hole must be the only child of its parent node");return{dom:De,contentDOM:De}}else{let{dom:He,contentDOM:Ue}=renderSpec(e,$e,n,Ee);if(De.appendChild(He),Ue){if(Me)throw new RangeError("Multiple content holes");Me=Ue}}}return{dom:De,contentDOM:Me}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(e,t){return e+t*factor16}function recoverIndex(e){return e&lower16}function recoverOffset(e){return(e-(e&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(t,n,Ee){this.pos=t,this.delInfo=n,this.recover=Ee}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&StepMap.empty)return StepMap.empty}recover(t){let n=0,Ee=recoverIndex(t);if(!this.inverted)for(let Re=0;Re<Ee;Re++)n+=this.ranges[Re*3+2]-this.ranges[Re*3+1];return this.ranges[Ee*3]+n+recoverOffset(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,Ee){let Re=0,Ce=this.inverted?2:1,Te=this.inverted?1:2;for(let Me=0;Me<this.ranges.length;Me+=3){let De=this.ranges[Me]-(this.inverted?Re:0);if(De>t)break;let Oe=this.ranges[Me+Ce],Be=this.ranges[Me+Te],ze=De+Oe;if(t<=ze){let $e=Oe?t==De?-1:t==ze?1:n:n,He=De+Re+($e<0?0:Be);if(Ee)return He;let Ue=t==(n<0?De:ze)?null:makeRecover(Me/3,t-De),Ve=t==De?DEL_AFTER:t==ze?DEL_BEFORE:DEL_ACROSS;return(n<0?t!=De:t!=ze)&&(Ve|=DEL_SIDE),new MapResult(He,Ve,Ue)}Re+=Be-Oe}return Ee?t+Re:new MapResult(t+Re,0,null)}touches(t,n){let Ee=0,Re=recoverIndex(n),Ce=this.inverted?2:1,Te=this.inverted?1:2;for(let Me=0;Me<this.ranges.length;Me+=3){let De=this.ranges[Me]-(this.inverted?Ee:0);if(De>t)break;let Oe=this.ranges[Me+Ce],Be=De+Oe;if(t<=Be&&Me==Re*3)return!0;Ee+=this.ranges[Me+Te]-Oe}return!1}forEach(t){let n=this.inverted?2:1,Ee=this.inverted?1:2;for(let Re=0,Ce=0;Re<this.ranges.length;Re+=3){let Te=this.ranges[Re],Me=Te-(this.inverted?Ce:0),De=Te+(this.inverted?0:Ce),Oe=this.ranges[Re+n],Be=this.ranges[Re+Ee];t(Me,Me+Oe,De,De+Be),Ce+=Be-Oe}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?StepMap.empty:new StepMap(t<0?[0,-t,0]:[0,0,t])}}StepMap.empty=new StepMap([]);class Mapping{constructor(t,n,Ee=0,Re=t?t.length:0){this.mirror=n,this.from=Ee,this.to=Re,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Mapping(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,Ee=this._maps.length;n<t._maps.length;n++){let Re=t.getMirror(n);this.appendMap(t._maps[n],Re!=null&&Re<n?Ee+Re:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,Ee=this._maps.length+t._maps.length;n>=0;n--){let Re=t.getMirror(n);this.appendMap(t._maps[n].invert(),Re!=null&&Re>n?Ee-Re-1:void 0)}}invert(){let t=new Mapping;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let Ee=this.from;Ee<this.to;Ee++)t=this._maps[Ee].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,Ee){let Re=0;for(let Ce=this.from;Ce<this.to;Ce++){let Te=this._maps[Ce],Me=Te.mapResult(t,n);if(Me.recover!=null){let De=this.getMirror(Ce);if(De!=null&&De>Ce&&De<this.to){Ce=De,t=this._maps[De].recover(Me.recover);continue}}Re|=Me.delInfo,t=Me.pos}return Ee?t:new MapResult(t,Re,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let Ee=stepsByID[n.stepType];if(!Ee)throw new RangeError(`No step type ${n.stepType} defined`);return Ee.fromJSON(t,n)}static jsonID(t,n){if(t in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+t);return stepsByID[t]=n,n.prototype.jsonID=t,n}}class StepResult{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new StepResult(t,null)}static fail(t){return new StepResult(null,t)}static fromReplace(t,n,Ee,Re){try{return StepResult.ok(t.replace(n,Ee,Re))}catch(Ce){if(Ce instanceof ReplaceError)return StepResult.fail(Ce.message);throw Ce}}}function mapFragment(e,t,n){let Ee=[];for(let Re=0;Re<e.childCount;Re++){let Ce=e.child(Re);Ce.content.size&&(Ce=Ce.copy(mapFragment(Ce.content,t,Ce))),Ce.isInline&&(Ce=t(Ce,n,Re)),Ee.push(Ce)}return Fragment.fromArray(Ee)}class AddMarkStep extends Step{constructor(t,n,Ee){super(),this.from=t,this.to=n,this.mark=Ee}apply(t){let n=t.slice(this.from,this.to),Ee=t.resolve(this.from),Re=Ee.node(Ee.sharedDepth(this.to)),Ce=new Slice(mapFragment(n.content,(Te,Me)=>!Te.isAtom||!Me.type.allowsMarkType(this.mark.type)?Te:Te.mark(this.mark.addToSet(Te.marks)),Re),n.openStart,n.openEnd);return StepResult.fromReplace(t,this.from,this.to,Ce)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),Ee=t.mapResult(this.to,-1);return n.deleted&&Ee.deleted||n.pos>=Ee.pos?null:new AddMarkStep(n.pos,Ee.pos,this.mark)}merge(t){return t instanceof AddMarkStep&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new AddMarkStep(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(n.from,n.to,t.markFromJSON(n.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(t,n,Ee){super(),this.from=t,this.to=n,this.mark=Ee}apply(t){let n=t.slice(this.from,this.to),Ee=new Slice(mapFragment(n.content,Re=>Re.mark(this.mark.removeFromSet(Re.marks)),t),n.openStart,n.openEnd);return StepResult.fromReplace(t,this.from,this.to,Ee)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),Ee=t.mapResult(this.to,-1);return n.deleted&&Ee.deleted||n.pos>=Ee.pos?null:new RemoveMarkStep(n.pos,Ee.pos,this.mark)}merge(t){return t instanceof RemoveMarkStep&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new RemoveMarkStep(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(n.from,n.to,t.markFromJSON(n.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return StepResult.fail("No node at mark step's position");let Ee=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return StepResult.fromReplace(t,this.pos,this.pos+1,new Slice(Fragment.from(Ee),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let Ee=this.mark.addToSet(n.marks);if(Ee.length==n.marks.length){for(let Re=0;Re<n.marks.length;Re++)if(!n.marks[Re].isInSet(Ee))return new AddNodeMarkStep(this.pos,n.marks[Re]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new AddNodeMarkStep(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(n.pos,t.markFromJSON(n.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return StepResult.fail("No node at mark step's position");let Ee=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return StepResult.fromReplace(t,this.pos,this.pos+1,new Slice(Fragment.from(Ee),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new RemoveNodeMarkStep(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(n.pos,t.markFromJSON(n.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(t,n,Ee,Re=!1){super(),this.from=t,this.to=n,this.slice=Ee,this.structure=Re}apply(t){return this.structure&&contentBetween(t,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(t){return new ReplaceStep(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),Ee=t.mapResult(this.to,-1);return n.deletedAcross&&Ee.deletedAcross?null:new ReplaceStep(n.pos,Math.max(n.pos,Ee.pos),this.slice,this.structure)}merge(t){if(!(t instanceof ReplaceStep)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Slice.empty:new Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new ReplaceStep(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Slice.empty:new Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new ReplaceStep(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(n.from,n.to,Slice.fromJSON(t,n.slice),!!n.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(t,n,Ee,Re,Ce,Te,Me=!1){super(),this.from=t,this.to=n,this.gapFrom=Ee,this.gapTo=Re,this.slice=Ce,this.insert=Te,this.structure=Me}apply(t){if(this.structure&&(contentBetween(t,this.from,this.gapFrom)||contentBetween(t,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return StepResult.fail("Gap is not a flat range");let Ee=this.slice.insertAt(this.insert,n.content);return Ee?StepResult.fromReplace(t,this.from,this.to,Ee):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),Ee=t.mapResult(this.to,-1),Re=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),Ce=this.to==this.gapTo?Ee.pos:t.map(this.gapTo,1);return n.deletedAcross&&Ee.deletedAcross||Re<n.pos||Ce>Ee.pos?null:new ReplaceAroundStep(n.pos,Ee.pos,Re,Ce,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(n.from,n.to,n.gapFrom,n.gapTo,Slice.fromJSON(t,n.slice),n.insert,!!n.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(e,t,n){let Ee=e.resolve(t),Re=n-t,Ce=Ee.depth;for(;Re>0&&Ce>0&&Ee.indexAfter(Ce)==Ee.node(Ce).childCount;)Ce--,Re--;if(Re>0){let Te=Ee.node(Ce).maybeChild(Ee.indexAfter(Ce));for(;Re>0;){if(!Te||Te.isLeaf)return!0;Te=Te.firstChild,Re--}}return!1}function addMark(e,t,n,Ee){let Re=[],Ce=[],Te,Me;e.doc.nodesBetween(t,n,(De,Oe,Be)=>{if(!De.isInline)return;let ze=De.marks;if(!Ee.isInSet(ze)&&Be.type.allowsMarkType(Ee.type)){let $e=Math.max(Oe,t),He=Math.min(Oe+De.nodeSize,n),Ue=Ee.addToSet(ze);for(let Ve=0;Ve<ze.length;Ve++)ze[Ve].isInSet(Ue)||(Te&&Te.to==$e&&Te.mark.eq(ze[Ve])?Te.to=He:Re.push(Te=new RemoveMarkStep($e,He,ze[Ve])));Me&&Me.to==$e?Me.to=He:Ce.push(Me=new AddMarkStep($e,He,Ee))}}),Re.forEach(De=>e.step(De)),Ce.forEach(De=>e.step(De))}function removeMark(e,t,n,Ee){let Re=[],Ce=0;e.doc.nodesBetween(t,n,(Te,Me)=>{if(!Te.isInline)return;Ce++;let De=null;if(Ee instanceof MarkType){let Oe=Te.marks,Be;for(;Be=Ee.isInSet(Oe);)(De||(De=[])).push(Be),Oe=Be.removeFromSet(Oe)}else Ee?Ee.isInSet(Te.marks)&&(De=[Ee]):De=Te.marks;if(De&&De.length){let Oe=Math.min(Me+Te.nodeSize,n);for(let Be=0;Be<De.length;Be++){let ze=De[Be],$e;for(let He=0;He<Re.length;He++){let Ue=Re[He];Ue.step==Ce-1&&ze.eq(Re[He].style)&&($e=Ue)}$e?($e.to=Oe,$e.step=Ce):Re.push({style:ze,from:Math.max(Me,t),to:Oe,step:Ce})}}}),Re.forEach(Te=>e.step(new RemoveMarkStep(Te.from,Te.to,Te.style)))}function clearIncompatible(e,t,n,Ee=n.contentMatch,Re=!0){let Ce=e.doc.nodeAt(t),Te=[],Me=t+1;for(let De=0;De<Ce.childCount;De++){let Oe=Ce.child(De),Be=Me+Oe.nodeSize,ze=Ee.matchType(Oe.type);if(!ze)Te.push(new ReplaceStep(Me,Be,Slice.empty));else{Ee=ze;for(let $e=0;$e<Oe.marks.length;$e++)n.allowsMarkType(Oe.marks[$e].type)||e.step(new RemoveMarkStep(Me,Be,Oe.marks[$e]));if(Re&&Oe.isText&&n.whitespace!="pre"){let $e,He=/\r?\n|\r/g,Ue;for(;$e=He.exec(Oe.text);)Ue||(Ue=new Slice(Fragment.from(n.schema.text(" ",n.allowedMarks(Oe.marks))),0,0)),Te.push(new ReplaceStep(Me+$e.index,Me+$e.index+$e[0].length,Ue))}}Me=Be}if(!Ee.validEnd){let De=Ee.fillBefore(Fragment.empty,!0);e.replace(Me,Me,new Slice(De,0,0))}for(let De=Te.length-1;De>=0;De--)e.step(Te[De])}function canCut(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function liftTarget(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let Ee=e.depth,Re=0,Ce=0;;--Ee){let Te=e.$from.node(Ee),Me=e.$from.index(Ee)+Re,De=e.$to.indexAfter(Ee)-Ce;if(Ee<e.depth&&Te.canReplace(Me,De,n))return Ee;if(Ee==0||Te.type.spec.isolating||!canCut(Te,Me,De))break;Me&&(Re=1),De<Te.childCount&&(Ce=1)}return null}function lift$2(e,t,n){let{$from:Ee,$to:Re,depth:Ce}=t,Te=Ee.before(Ce+1),Me=Re.after(Ce+1),De=Te,Oe=Me,Be=Fragment.empty,ze=0;for(let Ue=Ce,Ve=!1;Ue>n;Ue--)Ve||Ee.index(Ue)>0?(Ve=!0,Be=Fragment.from(Ee.node(Ue).copy(Be)),ze++):De--;let $e=Fragment.empty,He=0;for(let Ue=Ce,Ve=!1;Ue>n;Ue--)Ve||Re.after(Ue+1)<Re.end(Ue)?(Ve=!0,$e=Fragment.from(Re.node(Ue).copy($e)),He++):Oe++;e.step(new ReplaceAroundStep(De,Oe,Te,Me,new Slice(Be.append($e),ze,He),Be.size-ze,!0))}function findWrapping(e,t,n=null,Ee=e){let Re=findWrappingOutside(e,t),Ce=Re&&findWrappingInside(Ee,t);return Ce?Re.map(withAttrs).concat({type:t,attrs:n}).concat(Ce.map(withAttrs)):null}function withAttrs(e){return{type:e,attrs:null}}function findWrappingOutside(e,t){let{parent:n,startIndex:Ee,endIndex:Re}=e,Ce=n.contentMatchAt(Ee).findWrapping(t);if(!Ce)return null;let Te=Ce.length?Ce[0]:t;return n.canReplaceWith(Ee,Re,Te)?Ce:null}function findWrappingInside(e,t){let{parent:n,startIndex:Ee,endIndex:Re}=e,Ce=n.child(Ee),Te=t.contentMatch.findWrapping(Ce.type);if(!Te)return null;let De=(Te.length?Te[Te.length-1]:t).contentMatch;for(let Oe=Ee;De&&Oe<Re;Oe++)De=De.matchType(n.child(Oe).type);return!De||!De.validEnd?null:Te}function wrap(e,t,n){let Ee=Fragment.empty;for(let Te=n.length-1;Te>=0;Te--){if(Ee.size){let Me=n[Te].type.contentMatch.matchFragment(Ee);if(!Me||!Me.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}Ee=Fragment.from(n[Te].type.create(n[Te].attrs,Ee))}let Re=t.start,Ce=t.end;e.step(new ReplaceAroundStep(Re,Ce,Re,Ce,new Slice(Ee,0,0),n.length,!0))}function setBlockType$1(e,t,n,Ee,Re){if(!Ee.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let Ce=e.steps.length;e.doc.nodesBetween(t,n,(Te,Me)=>{let De=typeof Re=="function"?Re(Te):Re;if(Te.isTextblock&&!Te.hasMarkup(Ee,De)&&canChangeType(e.doc,e.mapping.slice(Ce).map(Me),Ee)){let Oe=null;if(Ee.schema.linebreakReplacement){let He=Ee.whitespace=="pre",Ue=!!Ee.contentMatch.matchType(Ee.schema.linebreakReplacement);He&&!Ue?Oe=!1:!He&&Ue&&(Oe=!0)}Oe===!1&&replaceLinebreaks(e,Te,Me,Ce),clearIncompatible(e,e.mapping.slice(Ce).map(Me,1),Ee,void 0,Oe===null);let Be=e.mapping.slice(Ce),ze=Be.map(Me,1),$e=Be.map(Me+Te.nodeSize,1);return e.step(new ReplaceAroundStep(ze,$e,ze+1,$e-1,new Slice(Fragment.from(Ee.create(De,null,Te.marks)),0,0),1,!0)),Oe===!0&&replaceNewlines(e,Te,Me,Ce),!1}})}function replaceNewlines(e,t,n,Ee){t.forEach((Re,Ce)=>{if(Re.isText){let Te,Me=/\r?\n|\r/g;for(;Te=Me.exec(Re.text);){let De=e.mapping.slice(Ee).map(n+1+Ce+Te.index);e.replaceWith(De,De+1,t.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(e,t,n,Ee){t.forEach((Re,Ce)=>{if(Re.type==Re.type.schema.linebreakReplacement){let Te=e.mapping.slice(Ee).map(n+1+Ce);e.replaceWith(Te,Te+1,t.type.schema.text(`
`))}})}function canChangeType(e,t,n){let Ee=e.resolve(t),Re=Ee.index();return Ee.parent.canReplaceWith(Re,Re+1,n)}function setNodeMarkup(e,t,n,Ee,Re){let Ce=e.doc.nodeAt(t);if(!Ce)throw new RangeError("No node at given position");n||(n=Ce.type);let Te=n.create(Ee,null,Re||Ce.marks);if(Ce.isLeaf)return e.replaceWith(t,t+Ce.nodeSize,Te);if(!n.validContent(Ce.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new ReplaceAroundStep(t,t+Ce.nodeSize,t+1,t+Ce.nodeSize-1,new Slice(Fragment.from(Te),0,0),1,!0))}function canSplit(e,t,n=1,Ee){let Re=e.resolve(t),Ce=Re.depth-n,Te=Ee&&Ee[Ee.length-1]||Re.parent;if(Ce<0||Re.parent.type.spec.isolating||!Re.parent.canReplace(Re.index(),Re.parent.childCount)||!Te.type.validContent(Re.parent.content.cutByIndex(Re.index(),Re.parent.childCount)))return!1;for(let Oe=Re.depth-1,Be=n-2;Oe>Ce;Oe--,Be--){let ze=Re.node(Oe),$e=Re.index(Oe);if(ze.type.spec.isolating)return!1;let He=ze.content.cutByIndex($e,ze.childCount),Ue=Ee&&Ee[Be+1];Ue&&(He=He.replaceChild(0,Ue.type.create(Ue.attrs)));let Ve=Ee&&Ee[Be]||ze;if(!ze.canReplace($e+1,ze.childCount)||!Ve.type.validContent(He))return!1}let Me=Re.indexAfter(Ce),De=Ee&&Ee[0];return Re.node(Ce).canReplaceWith(Me,Me,De?De.type:Re.node(Ce+1).type)}function split(e,t,n=1,Ee){let Re=e.doc.resolve(t),Ce=Fragment.empty,Te=Fragment.empty;for(let Me=Re.depth,De=Re.depth-n,Oe=n-1;Me>De;Me--,Oe--){Ce=Fragment.from(Re.node(Me).copy(Ce));let Be=Ee&&Ee[Oe];Te=Fragment.from(Be?Be.type.create(Be.attrs,Te):Re.node(Me).copy(Te))}e.step(new ReplaceStep(t,t,new Slice(Ce.append(Te),n,n),!0))}function canJoin(e,t){let n=e.resolve(t),Ee=n.index();return joinable(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(Ee,Ee+1)}function canAppendWithSubstitutedLinebreaks(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:Ee}=e.type.schema;for(let Re=0;Re<t.childCount;Re++){let Ce=t.child(Re),Te=Ce.type==Ee?e.type.schema.nodes.text:Ce.type;if(n=n.matchType(Te),!n||!e.type.allowsMarks(Ce.marks))return!1}return n.validEnd}function joinable(e,t){return!!(e&&t&&!e.isLeaf&&canAppendWithSubstitutedLinebreaks(e,t))}function joinPoint(e,t,n=-1){let Ee=e.resolve(t);for(let Re=Ee.depth;;Re--){let Ce,Te,Me=Ee.index(Re);if(Re==Ee.depth?(Ce=Ee.nodeBefore,Te=Ee.nodeAfter):n>0?(Ce=Ee.node(Re+1),Me++,Te=Ee.node(Re).maybeChild(Me)):(Ce=Ee.node(Re).maybeChild(Me-1),Te=Ee.node(Re+1)),Ce&&!Ce.isTextblock&&joinable(Ce,Te)&&Ee.node(Re).canReplace(Me,Me+1))return t;if(Re==0)break;t=n<0?Ee.before(Re):Ee.after(Re)}}function join(e,t,n){let Ee=null,{linebreakReplacement:Re}=e.doc.type.schema,Ce=e.doc.resolve(t-n),Te=Ce.node().type;if(Re&&Te.inlineContent){let Be=Te.whitespace=="pre",ze=!!Te.contentMatch.matchType(Re);Be&&!ze?Ee=!1:!Be&&ze&&(Ee=!0)}let Me=e.steps.length;if(Ee===!1){let Be=e.doc.resolve(t+n);replaceLinebreaks(e,Be.node(),Be.before(),Me)}Te.inlineContent&&clearIncompatible(e,t+n-1,Te,Ce.node().contentMatchAt(Ce.index()),Ee==null);let De=e.mapping.slice(Me),Oe=De.map(t-n);if(e.step(new ReplaceStep(Oe,De.map(t+n,-1),Slice.empty,!0)),Ee===!0){let Be=e.doc.resolve(Oe);replaceNewlines(e,Be.node(),Be.before(),e.steps.length)}return e}function insertPoint(e,t,n){let Ee=e.resolve(t);if(Ee.parent.canReplaceWith(Ee.index(),Ee.index(),n))return t;if(Ee.parentOffset==0)for(let Re=Ee.depth-1;Re>=0;Re--){let Ce=Ee.index(Re);if(Ee.node(Re).canReplaceWith(Ce,Ce,n))return Ee.before(Re+1);if(Ce>0)return null}if(Ee.parentOffset==Ee.parent.content.size)for(let Re=Ee.depth-1;Re>=0;Re--){let Ce=Ee.indexAfter(Re);if(Ee.node(Re).canReplaceWith(Ce,Ce,n))return Ee.after(Re+1);if(Ce<Ee.node(Re).childCount)return null}return null}function dropPoint(e,t,n){let Ee=e.resolve(t);if(!n.content.size)return t;let Re=n.content;for(let Ce=0;Ce<n.openStart;Ce++)Re=Re.firstChild.content;for(let Ce=1;Ce<=(n.openStart==0&&n.size?2:1);Ce++)for(let Te=Ee.depth;Te>=0;Te--){let Me=Te==Ee.depth?0:Ee.pos<=(Ee.start(Te+1)+Ee.end(Te+1))/2?-1:1,De=Ee.index(Te)+(Me>0?1:0),Oe=Ee.node(Te),Be=!1;if(Ce==1)Be=Oe.canReplace(De,De,Re);else{let ze=Oe.contentMatchAt(De).findWrapping(Re.firstChild.type);Be=ze&&Oe.canReplaceWith(De,De,ze[0])}if(Be)return Me==0?Ee.pos:Me<0?Ee.before(Te+1):Ee.after(Te+1)}return null}function replaceStep(e,t,n=t,Ee=Slice.empty){if(t==n&&!Ee.size)return null;let Re=e.resolve(t),Ce=e.resolve(n);return fitsTrivially(Re,Ce,Ee)?new ReplaceStep(t,n,Ee):new Fitter(Re,Ce,Ee).fit()}function fitsTrivially(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class Fitter{constructor(t,n,Ee){this.$from=t,this.$to=n,this.unplaced=Ee,this.frontier=[],this.placed=Fragment.empty;for(let Re=0;Re<=t.depth;Re++){let Ce=t.node(Re);this.frontier.push({type:Ce.type,match:Ce.contentMatchAt(t.indexAfter(Re))})}for(let Re=t.depth;Re>0;Re--)this.placed=Fragment.from(t.node(Re).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let Oe=this.findFittable();Oe?this.placeNodes(Oe):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,Ee=this.$from,Re=this.close(t<0?this.$to:Ee.doc.resolve(t));if(!Re)return null;let Ce=this.placed,Te=Ee.depth,Me=Re.depth;for(;Te&&Me&&Ce.childCount==1;)Ce=Ce.firstChild.content,Te--,Me--;let De=new Slice(Ce,Te,Me);return t>-1?new ReplaceAroundStep(Ee.pos,t,this.$to.pos,this.$to.end(),De,n):De.size||Ee.pos!=this.$to.pos?new ReplaceStep(Ee.pos,Re.pos,De):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,Ee=0,Re=this.unplaced.openEnd;Ee<t;Ee++){let Ce=n.firstChild;if(n.childCount>1&&(Re=0),Ce.type.spec.isolating&&Re<=Ee){t=Ee;break}n=Ce.content}for(let n=1;n<=2;n++)for(let Ee=n==1?t:this.unplaced.openStart;Ee>=0;Ee--){let Re,Ce=null;Ee?(Ce=contentAt(this.unplaced.content,Ee-1).firstChild,Re=Ce.content):Re=this.unplaced.content;let Te=Re.firstChild;for(let Me=this.depth;Me>=0;Me--){let{type:De,match:Oe}=this.frontier[Me],Be,ze=null;if(n==1&&(Te?Oe.matchType(Te.type)||(ze=Oe.fillBefore(Fragment.from(Te),!1)):Ce&&De.compatibleContent(Ce.type)))return{sliceDepth:Ee,frontierDepth:Me,parent:Ce,inject:ze};if(n==2&&Te&&(Be=Oe.findWrapping(Te.type)))return{sliceDepth:Ee,frontierDepth:Me,parent:Ce,wrap:Be};if(Ce&&Oe.matchType(Ce.type))break}}}openMore(){let{content:t,openStart:n,openEnd:Ee}=this.unplaced,Re=contentAt(t,n);return!Re.childCount||Re.firstChild.isLeaf?!1:(this.unplaced=new Slice(t,n+1,Math.max(Ee,Re.size+n>=t.size-Ee?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:Ee}=this.unplaced,Re=contentAt(t,n);if(Re.childCount<=1&&n>0){let Ce=t.size-n<=n+Re.size;this.unplaced=new Slice(dropFromFragment(t,n-1,1),n-1,Ce?n-1:Ee)}else this.unplaced=new Slice(dropFromFragment(t,n,1),n,Ee)}placeNodes({sliceDepth:t,frontierDepth:n,parent:Ee,inject:Re,wrap:Ce}){for(;this.depth>n;)this.closeFrontierNode();if(Ce)for(let Ve=0;Ve<Ce.length;Ve++)this.openFrontierNode(Ce[Ve]);let Te=this.unplaced,Me=Ee?Ee.content:Te.content,De=Te.openStart-t,Oe=0,Be=[],{match:ze,type:$e}=this.frontier[n];if(Re){for(let Ve=0;Ve<Re.childCount;Ve++)Be.push(Re.child(Ve));ze=ze.matchFragment(Re)}let He=Me.size+t-(Te.content.size-Te.openEnd);for(;Oe<Me.childCount;){let Ve=Me.child(Oe),We=ze.matchType(Ve.type);if(!We)break;Oe++,(Oe>1||De==0||Ve.content.size)&&(ze=We,Be.push(closeNodeStart(Ve.mark($e.allowedMarks(Ve.marks)),Oe==1?De:0,Oe==Me.childCount?He:-1)))}let Ue=Oe==Me.childCount;Ue||(He=-1),this.placed=addToFragment(this.placed,n,Fragment.from(Be)),this.frontier[n].match=ze,Ue&&He<0&&Ee&&Ee.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let Ve=0,We=Me;Ve<He;Ve++){let qe=We.lastChild;this.frontier.push({type:qe.type,match:qe.contentMatchAt(qe.childCount)}),We=qe.content}this.unplaced=Ue?t==0?Slice.empty:new Slice(dropFromFragment(Te.content,t-1,1),t-1,He<0?Te.openEnd:t-1):new Slice(dropFromFragment(Te.content,t,Oe),Te.openStart,Te.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:Ee}=this.$to,Re=this.$to.after(Ee);for(;Ee>1&&Re==this.$to.end(--Ee);)++Re;return Re}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:Ee,type:Re}=this.frontier[n],Ce=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),Te=contentAfterFits(t,n,Re,Ee,Ce);if(Te){for(let Me=n-1;Me>=0;Me--){let{match:De,type:Oe}=this.frontier[Me],Be=contentAfterFits(t,Me,Oe,De,!0);if(!Be||Be.childCount)continue e}return{depth:n,fit:Te,move:Ce?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=addToFragment(this.placed,n.depth,n.fit)),t=n.move;for(let Ee=n.depth+1;Ee<=t.depth;Ee++){let Re=t.node(Ee),Ce=Re.type.contentMatch.fillBefore(Re.content,!0,t.index(Ee));this.openFrontierNode(Re.type,Re.attrs,Ce)}return t}openFrontierNode(t,n=null,Ee){let Re=this.frontier[this.depth];Re.match=Re.match.matchType(t),this.placed=addToFragment(this.placed,this.depth,Fragment.from(t.create(n,Ee))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Fragment.empty,!0);n.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,n))}}function dropFromFragment(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(dropFromFragment(e.firstChild.content,t-1,n)))}function addToFragment(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(addToFragment(e.lastChild.content,t-1,n)))}function contentAt(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function closeNodeStart(e,t,n){if(t<=0)return e;let Ee=e.content;return t>1&&(Ee=Ee.replaceChild(0,closeNodeStart(Ee.firstChild,t-1,Ee.childCount==1?n-1:0))),t>0&&(Ee=e.type.contentMatch.fillBefore(Ee).append(Ee),n<=0&&(Ee=Ee.append(e.type.contentMatch.matchFragment(Ee).fillBefore(Fragment.empty,!0)))),e.copy(Ee)}function contentAfterFits(e,t,n,Ee,Re){let Ce=e.node(t),Te=Re?e.indexAfter(t):e.index(t);if(Te==Ce.childCount&&!n.compatibleContent(Ce.type))return null;let Me=Ee.fillBefore(Ce.content,!0,Te);return Me&&!invalidMarks(n,Ce.content,Te)?Me:null}function invalidMarks(e,t,n){for(let Ee=n;Ee<t.childCount;Ee++)if(!e.allowsMarks(t.child(Ee).marks))return!0;return!1}function definesContent(e){return e.spec.defining||e.spec.definingForContent}function replaceRange(e,t,n,Ee){if(!Ee.size)return e.deleteRange(t,n);let Re=e.doc.resolve(t),Ce=e.doc.resolve(n);if(fitsTrivially(Re,Ce,Ee))return e.step(new ReplaceStep(t,n,Ee));let Te=coveredDepths(Re,Ce);Te[Te.length-1]==0&&Te.pop();let Me=-(Re.depth+1);Te.unshift(Me);for(let $e=Re.depth,He=Re.pos-1;$e>0;$e--,He--){let Ue=Re.node($e).type.spec;if(Ue.defining||Ue.definingAsContext||Ue.isolating)break;Te.indexOf($e)>-1?Me=$e:Re.before($e)==He&&Te.splice(1,0,-$e)}let De=Te.indexOf(Me),Oe=[],Be=Ee.openStart;for(let $e=Ee.content,He=0;;He++){let Ue=$e.firstChild;if(Oe.push(Ue),He==Ee.openStart)break;$e=Ue.content}for(let $e=Be-1;$e>=0;$e--){let He=Oe[$e],Ue=definesContent(He.type);if(Ue&&!He.sameMarkup(Re.node(Math.abs(Me)-1)))Be=$e;else if(Ue||!He.type.isTextblock)break}for(let $e=Ee.openStart;$e>=0;$e--){let He=($e+Be+1)%(Ee.openStart+1),Ue=Oe[He];if(Ue)for(let Ve=0;Ve<Te.length;Ve++){let We=Te[(Ve+De)%Te.length],qe=!0;We<0&&(qe=!1,We=-We);let Ge=Re.node(We-1),Ye=Re.index(We-1);if(Ge.canReplaceWith(Ye,Ye,Ue.type,Ue.marks))return e.replace(Re.before(We),qe?Ce.after(We):n,new Slice(closeFragment(Ee.content,0,Ee.openStart,He),He,Ee.openEnd))}}let ze=e.steps.length;for(let $e=Te.length-1;$e>=0&&(e.replace(t,n,Ee),!(e.steps.length>ze));$e--){let He=Te[$e];He<0||(t=Re.before(He),n=Ce.after(He))}}function closeFragment(e,t,n,Ee,Re){if(t<n){let Ce=e.firstChild;e=e.replaceChild(0,Ce.copy(closeFragment(Ce.content,t+1,n,Ee,Ce)))}if(t>Ee){let Ce=Re.contentMatchAt(0),Te=Ce.fillBefore(e).append(e);e=Te.append(Ce.matchFragment(Te).fillBefore(Fragment.empty,!0))}return e}function replaceRangeWith(e,t,n,Ee){if(!Ee.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let Re=insertPoint(e.doc,t,Ee.type);Re!=null&&(t=n=Re)}e.replaceRange(t,n,new Slice(Fragment.from(Ee),0,0))}function deleteRange$1(e,t,n){let Ee=e.doc.resolve(t),Re=e.doc.resolve(n),Ce=coveredDepths(Ee,Re);for(let Te=0;Te<Ce.length;Te++){let Me=Ce[Te],De=Te==Ce.length-1;if(De&&Me==0||Ee.node(Me).type.contentMatch.validEnd)return e.delete(Ee.start(Me),Re.end(Me));if(Me>0&&(De||Ee.node(Me-1).canReplace(Ee.index(Me-1),Re.indexAfter(Me-1))))return e.delete(Ee.before(Me),Re.after(Me))}for(let Te=1;Te<=Ee.depth&&Te<=Re.depth;Te++)if(t-Ee.start(Te)==Ee.depth-Te&&n>Ee.end(Te)&&Re.end(Te)-n!=Re.depth-Te&&Ee.start(Te-1)==Re.start(Te-1)&&Ee.node(Te-1).canReplace(Ee.index(Te-1),Re.index(Te-1)))return e.delete(Ee.before(Te),n);e.delete(t,n)}function coveredDepths(e,t){let n=[],Ee=Math.min(e.depth,t.depth);for(let Re=Ee;Re>=0;Re--){let Ce=e.start(Re);if(Ce<e.pos-(e.depth-Re)||t.end(Re)>t.pos+(t.depth-Re)||e.node(Re).type.spec.isolating||t.node(Re).type.spec.isolating)break;(Ce==t.start(Re)||Re==e.depth&&Re==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&Re&&t.start(Re-1)==Ce-1)&&n.push(Re)}return n}class AttrStep extends Step{constructor(t,n,Ee){super(),this.pos=t,this.attr=n,this.value=Ee}apply(t){let n=t.nodeAt(this.pos);if(!n)return StepResult.fail("No node at attribute step's position");let Ee=Object.create(null);for(let Ce in n.attrs)Ee[Ce]=n.attrs[Ce];Ee[this.attr]=this.value;let Re=n.type.create(Ee,null,n.marks);return StepResult.fromReplace(t,this.pos,this.pos+1,new Slice(Fragment.from(Re),0,n.isLeaf?0:1))}getMap(){return StepMap.empty}invert(t){return new AttrStep(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new AttrStep(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(n.pos,n.attr,n.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let Re in t.attrs)n[Re]=t.attrs[Re];n[this.attr]=this.value;let Ee=t.type.create(n,t.content,t.marks);return StepResult.ok(Ee)}getMap(){return StepMap.empty}invert(t){return new DocAttrStep(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(n.attr,n.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new TransformError(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,Ee=Slice.empty){let Re=replaceStep(this.doc,t,n,Ee);return Re&&this.step(Re),this}replaceWith(t,n,Ee){return this.replace(t,n,new Slice(Fragment.from(Ee),0,0))}delete(t,n){return this.replace(t,n,Slice.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,Ee){return replaceRange(this,t,n,Ee),this}replaceRangeWith(t,n,Ee){return replaceRangeWith(this,t,n,Ee),this}deleteRange(t,n){return deleteRange$1(this,t,n),this}lift(t,n){return lift$2(this,t,n),this}join(t,n=1){return join(this,t,n),this}wrap(t,n){return wrap(this,t,n),this}setBlockType(t,n=t,Ee,Re=null){return setBlockType$1(this,t,n,Ee,Re),this}setNodeMarkup(t,n,Ee=null,Re){return setNodeMarkup(this,t,n,Ee,Re),this}setNodeAttribute(t,n,Ee){return this.step(new AttrStep(t,n,Ee)),this}setDocAttribute(t,n){return this.step(new DocAttrStep(t,n)),this}addNodeMark(t,n){return this.step(new AddNodeMarkStep(t,n)),this}removeNodeMark(t,n){let Ee=this.doc.nodeAt(t);if(!Ee)throw new RangeError("No node at position "+t);if(n instanceof Mark$1)n.isInSet(Ee.marks)&&this.step(new RemoveNodeMarkStep(t,n));else{let Re=Ee.marks,Ce,Te=[];for(;Ce=n.isInSet(Re);)Te.push(new RemoveNodeMarkStep(t,Ce)),Re=Ce.removeFromSet(Re);for(let Me=Te.length-1;Me>=0;Me--)this.step(Te[Me])}return this}split(t,n=1,Ee){return split(this,t,n,Ee),this}addMark(t,n,Ee){return addMark(this,t,n,Ee),this}removeMark(t,n,Ee){return removeMark(this,t,n,Ee),this}clearIncompatible(t,n,Ee){return clearIncompatible(this,t,n,Ee),this}}const classesById=Object.create(null);class Selection{constructor(t,n,Ee){this.$anchor=t,this.$head=n,this.ranges=Ee||[new SelectionRange(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Slice.empty){let Ee=n.content.lastChild,Re=null;for(let Me=0;Me<n.openEnd;Me++)Re=Ee,Ee=Ee.lastChild;let Ce=t.steps.length,Te=this.ranges;for(let Me=0;Me<Te.length;Me++){let{$from:De,$to:Oe}=Te[Me],Be=t.mapping.slice(Ce);t.replaceRange(Be.map(De.pos),Be.map(Oe.pos),Me?Slice.empty:n),Me==0&&selectionToInsertionEnd$1(t,Ce,(Ee?Ee.isInline:Re&&Re.isTextblock)?-1:1)}}replaceWith(t,n){let Ee=t.steps.length,Re=this.ranges;for(let Ce=0;Ce<Re.length;Ce++){let{$from:Te,$to:Me}=Re[Ce],De=t.mapping.slice(Ee),Oe=De.map(Te.pos),Be=De.map(Me.pos);Ce?t.deleteRange(Oe,Be):(t.replaceRangeWith(Oe,Be,n),selectionToInsertionEnd$1(t,Ee,n.isInline?-1:1))}}static findFrom(t,n,Ee=!1){let Re=t.parent.inlineContent?new TextSelection(t):findSelectionIn(t.node(0),t.parent,t.pos,t.index(),n,Ee);if(Re)return Re;for(let Ce=t.depth-1;Ce>=0;Ce--){let Te=n<0?findSelectionIn(t.node(0),t.node(Ce),t.before(Ce+1),t.index(Ce),n,Ee):findSelectionIn(t.node(0),t.node(Ce),t.after(Ce+1),t.index(Ce)+1,n,Ee);if(Te)return Te}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new AllSelection(t.node(0))}static atStart(t){return findSelectionIn(t,t,0,0,1)||new AllSelection(t)}static atEnd(t){return findSelectionIn(t,t,t.content.size,t.childCount,-1)||new AllSelection(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let Ee=classesById[n.type];if(!Ee)throw new RangeError(`No selection type ${n.type} defined`);return Ee.fromJSON(t,n)}static jsonID(t,n){if(t in classesById)throw new RangeError("Duplicate use of selection JSON ID "+t);return classesById[t]=n,n.prototype.jsonID=t,n}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(t,n){this.$from=t,this.$to=n}}let warnedAboutTextSelection=!1;function checkTextSelection(e){!warnedAboutTextSelection&&!e.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class TextSelection extends Selection{constructor(t,n=t){checkTextSelection(t),checkTextSelection(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let Ee=t.resolve(n.map(this.head));if(!Ee.parent.inlineContent)return Selection.near(Ee);let Re=t.resolve(n.map(this.anchor));return new TextSelection(Re.parent.inlineContent?Re:Ee,Ee)}replace(t,n=Slice.empty){if(super.replace(t,n),n==Slice.empty){let Ee=this.$from.marksAcross(this.$to);Ee&&t.ensureMarks(Ee)}}eq(t){return t instanceof TextSelection&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,Ee=n){let Re=t.resolve(n);return new this(Re,Ee==n?Re:t.resolve(Ee))}static between(t,n,Ee){let Re=t.pos-n.pos;if((!Ee||Re)&&(Ee=Re>=0?1:-1),!n.parent.inlineContent){let Ce=Selection.findFrom(n,Ee,!0)||Selection.findFrom(n,-Ee,!0);if(Ce)n=Ce.$head;else return Selection.near(n,Ee)}return t.parent.inlineContent||(Re==0?t=n:(t=(Selection.findFrom(t,-Ee,!0)||Selection.findFrom(t,Ee,!0)).$anchor,t.pos<n.pos!=Re<0&&(t=n))),new TextSelection(t,n)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(t,n){this.anchor=t,this.head=n}map(t){return new TextBookmark(t.map(this.anchor),t.map(this.head))}resolve(t){return TextSelection.between(t.resolve(this.anchor),t.resolve(this.head))}}class NodeSelection extends Selection{constructor(t){let n=t.nodeAfter,Ee=t.node(0).resolve(t.pos+n.nodeSize);super(t,Ee),this.node=n}map(t,n){let{deleted:Ee,pos:Re}=n.mapResult(this.anchor),Ce=t.resolve(Re);return Ee?Selection.near(Ce):new NodeSelection(Ce)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(t){return t instanceof NodeSelection&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(t.resolve(n.anchor))}static create(t,n){return new NodeSelection(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:Ee}=t.mapResult(this.anchor);return n?new TextBookmark(Ee,Ee):new NodeBookmark(Ee)}resolve(t){let n=t.resolve(this.anchor),Ee=n.nodeAfter;return Ee&&NodeSelection.isSelectable(Ee)?new NodeSelection(n):Selection.near(n)}}class AllSelection extends Selection{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Slice.empty){if(n==Slice.empty){t.delete(0,t.doc.content.size);let Ee=Selection.atStart(t.doc);Ee.eq(t.selection)||t.setSelection(Ee)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new AllSelection(t)}map(t){return new AllSelection(t)}eq(t){return t instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(e){return new AllSelection(e)}};function findSelectionIn(e,t,n,Ee,Re,Ce=!1){if(t.inlineContent)return TextSelection.create(e,n);for(let Te=Ee-(Re>0?0:1);Re>0?Te<t.childCount:Te>=0;Te+=Re){let Me=t.child(Te);if(Me.isAtom){if(!Ce&&NodeSelection.isSelectable(Me))return NodeSelection.create(e,n-(Re<0?Me.nodeSize:0))}else{let De=findSelectionIn(e,Me,n+Re,Re<0?Me.childCount:0,Re,Ce);if(De)return De}n+=Me.nodeSize*Re}return null}function selectionToInsertionEnd$1(e,t,n){let Ee=e.steps.length-1;if(Ee<t)return;let Re=e.steps[Ee];if(!(Re instanceof ReplaceStep||Re instanceof ReplaceAroundStep))return;let Ce=e.mapping.maps[Ee],Te;Ce.forEach((Me,De,Oe,Be)=>{Te==null&&(Te=Be)}),e.setSelection(Selection.near(e.doc.resolve(Te),n))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=UPDATED_MARKS,this}ensureMarks(t){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let Ee=this.selection;return n&&(t=t.mark(this.storedMarks||(Ee.empty?Ee.$from.marks():Ee.$from.marksAcross(Ee.$to)||Mark$1.none))),Ee.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,Ee){let Re=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(Re.text(t),!0):this.deleteSelection();{if(Ee==null&&(Ee=n),!t)return this.deleteRange(n,Ee);let Ce=this.storedMarks;if(!Ce){let Te=this.doc.resolve(n);Ce=Ee==n?Te.marks():Te.marksAcross(this.doc.resolve(Ee))}return this.replaceRangeWith(n,Ee,Re.text(t,Ce)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(e,t){return!t||!e?e:e.bind(t)}class FieldDesc{constructor(t,n,Ee){this.name=t,this.init=bind(n.init,Ee),this.apply=bind(n.apply,Ee)}}const baseFields=[new FieldDesc("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new FieldDesc("selection",{init(e,t){return e.selection||Selection.atStart(t.doc)},apply(e){return e.selection}}),new FieldDesc("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,Ee){return Ee.selection.$cursor?e.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Configuration{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),n&&n.forEach(Ee=>{if(this.pluginsByKey[Ee.key])throw new RangeError("Adding different instances of a keyed plugin ("+Ee.key+")");this.plugins.push(Ee),this.pluginsByKey[Ee.key]=Ee,Ee.spec.state&&this.fields.push(new FieldDesc(Ee.key,Ee.spec.state,Ee))})}}class EditorState{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let Ee=0;Ee<this.config.plugins.length;Ee++)if(Ee!=n){let Re=this.config.plugins[Ee];if(Re.spec.filterTransaction&&!Re.spec.filterTransaction.call(Re,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],Ee=this.applyInner(t),Re=null;for(;;){let Ce=!1;for(let Te=0;Te<this.config.plugins.length;Te++){let Me=this.config.plugins[Te];if(Me.spec.appendTransaction){let De=Re?Re[Te].n:0,Oe=Re?Re[Te].state:this,Be=De<n.length&&Me.spec.appendTransaction.call(Me,De?n.slice(De):n,Oe,Ee);if(Be&&Ee.filterTransaction(Be,Te)){if(Be.setMeta("appendedTransaction",t),!Re){Re=[];for(let ze=0;ze<this.config.plugins.length;ze++)Re.push(ze<Te?{state:Ee,n:n.length}:{state:this,n:0})}n.push(Be),Ee=Ee.applyInner(Be),Ce=!0}Re&&(Re[Te]={state:Ee,n:n.length})}}if(!Ce)return{state:Ee,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new EditorState(this.config),Ee=this.config.fields;for(let Re=0;Re<Ee.length;Re++){let Ce=Ee[Re];n[Ce.name]=Ce.apply(t,this[Ce.name],this,n)}return n}get tr(){return new Transaction(this)}static create(t){let n=new Configuration(t.doc?t.doc.type.schema:t.schema,t.plugins),Ee=new EditorState(n);for(let Re=0;Re<n.fields.length;Re++)Ee[n.fields[Re].name]=n.fields[Re].init(t,Ee);return Ee}reconfigure(t){let n=new Configuration(this.schema,t.plugins),Ee=n.fields,Re=new EditorState(n);for(let Ce=0;Ce<Ee.length;Ce++){let Te=Ee[Ce].name;Re[Te]=this.hasOwnProperty(Te)?this[Te]:Ee[Ce].init(t,Re)}return Re}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(Ee=>Ee.toJSON())),t&&typeof t=="object")for(let Ee in t){if(Ee=="doc"||Ee=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let Re=t[Ee],Ce=Re.spec.state;Ce&&Ce.toJSON&&(n[Ee]=Ce.toJSON.call(Re,this[Re.key]))}return n}static fromJSON(t,n,Ee){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let Re=new Configuration(t.schema,t.plugins),Ce=new EditorState(Re);return Re.fields.forEach(Te=>{if(Te.name=="doc")Ce.doc=Node$1.fromJSON(t.schema,n.doc);else if(Te.name=="selection")Ce.selection=Selection.fromJSON(Ce.doc,n.selection);else if(Te.name=="storedMarks")n.storedMarks&&(Ce.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(Ee)for(let Me in Ee){let De=Ee[Me],Oe=De.spec.state;if(De.key==Te.name&&Oe&&Oe.fromJSON&&Object.prototype.hasOwnProperty.call(n,Me)){Ce[Te.name]=Oe.fromJSON.call(De,t,n[Me],Ce);return}}Ce[Te.name]=Te.init(t,Ce)}}),Ce}}function bindProps(e,t,n){for(let Ee in e){let Re=e[Ee];Re instanceof Function?Re=Re.bind(t):Ee=="handleDOMEvents"&&(Re=bindProps(Re,t,{})),n[Ee]=Re}return n}class Plugin{constructor(t){this.spec=t,this.props={},t.props&&bindProps(t.props,this,this.props),this.key=t.key?t.key.key:createKey("plugin")}getState(t){return t[this.key]}}const keys$1=Object.create(null);function createKey(e){return e in keys$1?e+"$"+ ++keys$1[e]:(keys$1[e]=0,e+"$")}class PluginKey{constructor(t="key"){this.key=createKey(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const deleteSelection$1=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const joinBackward$1=(e,t,n)=>{let Ee=atBlockStart(e,n);if(!Ee)return!1;let Re=findCutBefore(Ee);if(!Re){let Te=Ee.blockRange(),Me=Te&&liftTarget(Te);return Me==null?!1:(t&&t(e.tr.lift(Te,Me).scrollIntoView()),!0)}let Ce=Re.nodeBefore;if(deleteBarrier(e,Re,t,-1))return!0;if(Ee.parent.content.size==0&&(textblockAt(Ce,"end")||NodeSelection.isSelectable(Ce)))for(let Te=Ee.depth;;Te--){let Me=replaceStep(e.doc,Ee.before(Te),Ee.after(Te),Slice.empty);if(Me&&Me.slice.size<Me.to-Me.from){if(t){let De=e.tr.step(Me);De.setSelection(textblockAt(Ce,"end")?Selection.findFrom(De.doc.resolve(De.mapping.map(Re.pos,-1)),-1):NodeSelection.create(De.doc,Re.pos-Ce.nodeSize)),t(De.scrollIntoView())}return!0}if(Te==1||Ee.node(Te-1).childCount>1)break}return Ce.isAtom&&Re.depth==Ee.depth-1?(t&&t(e.tr.delete(Re.pos-Ce.nodeSize,Re.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(e,t,n)=>{let Ee=atBlockStart(e,n);if(!Ee)return!1;let Re=findCutBefore(Ee);return Re?joinTextblocksAround(e,Re,t):!1},joinTextblockForward$1=(e,t,n)=>{let Ee=atBlockEnd(e,n);if(!Ee)return!1;let Re=findCutAfter(Ee);return Re?joinTextblocksAround(e,Re,t):!1};function joinTextblocksAround(e,t,n){let Ee=t.nodeBefore,Re=Ee,Ce=t.pos-1;for(;!Re.isTextblock;Ce--){if(Re.type.spec.isolating)return!1;let Be=Re.lastChild;if(!Be)return!1;Re=Be}let Te=t.nodeAfter,Me=Te,De=t.pos+1;for(;!Me.isTextblock;De++){if(Me.type.spec.isolating)return!1;let Be=Me.firstChild;if(!Be)return!1;Me=Be}let Oe=replaceStep(e.doc,Ce,De,Slice.empty);if(!Oe||Oe.from!=Ce||Oe instanceof ReplaceStep&&Oe.slice.size>=De-Ce)return!1;if(n){let Be=e.tr.step(Oe);Be.setSelection(TextSelection.create(Be.doc,Ce)),n(Be.scrollIntoView())}return!0}function textblockAt(e,t,n=!1){for(let Ee=e;Ee;Ee=t=="start"?Ee.firstChild:Ee.lastChild){if(Ee.isTextblock)return!0;if(n&&Ee.childCount!=1)return!1}return!1}const selectNodeBackward$1=(e,t,n)=>{let{$head:Ee,empty:Re}=e.selection,Ce=Ee;if(!Re)return!1;if(Ee.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):Ee.parentOffset>0)return!1;Ce=findCutBefore(Ee)}let Te=Ce&&Ce.nodeBefore;return!Te||!NodeSelection.isSelectable(Te)?!1:(t&&t(e.tr.setSelection(NodeSelection.create(e.doc,Ce.pos-Te.nodeSize)).scrollIntoView()),!0)};function findCutBefore(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function atBlockEnd(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const joinForward$1=(e,t,n)=>{let Ee=atBlockEnd(e,n);if(!Ee)return!1;let Re=findCutAfter(Ee);if(!Re)return!1;let Ce=Re.nodeAfter;if(deleteBarrier(e,Re,t,1))return!0;if(Ee.parent.content.size==0&&(textblockAt(Ce,"start")||NodeSelection.isSelectable(Ce))){let Te=replaceStep(e.doc,Ee.before(),Ee.after(),Slice.empty);if(Te&&Te.slice.size<Te.to-Te.from){if(t){let Me=e.tr.step(Te);Me.setSelection(textblockAt(Ce,"start")?Selection.findFrom(Me.doc.resolve(Me.mapping.map(Re.pos)),1):NodeSelection.create(Me.doc,Me.mapping.map(Re.pos))),t(Me.scrollIntoView())}return!0}}return Ce.isAtom&&Re.depth==Ee.depth-1?(t&&t(e.tr.delete(Re.pos,Re.pos+Ce.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(e,t,n)=>{let{$head:Ee,empty:Re}=e.selection,Ce=Ee;if(!Re)return!1;if(Ee.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):Ee.parentOffset<Ee.parent.content.size)return!1;Ce=findCutAfter(Ee)}let Te=Ce&&Ce.nodeAfter;return!Te||!NodeSelection.isSelectable(Te)?!1:(t&&t(e.tr.setSelection(NodeSelection.create(e.doc,Ce.pos)).scrollIntoView()),!0)};function findCutAfter(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const joinUp$1=(e,t)=>{let n=e.selection,Ee=n instanceof NodeSelection,Re;if(Ee){if(n.node.isTextblock||!canJoin(e.doc,n.from))return!1;Re=n.from}else if(Re=joinPoint(e.doc,n.from,-1),Re==null)return!1;if(t){let Ce=e.tr.join(Re);Ee&&Ce.setSelection(NodeSelection.create(Ce.doc,Re-e.doc.resolve(Re).nodeBefore.nodeSize)),t(Ce.scrollIntoView())}return!0},joinDown$1=(e,t)=>{let n=e.selection,Ee;if(n instanceof NodeSelection){if(n.node.isTextblock||!canJoin(e.doc,n.to))return!1;Ee=n.to}else if(Ee=joinPoint(e.doc,n.to,1),Ee==null)return!1;return t&&t(e.tr.join(Ee).scrollIntoView()),!0},lift$1=(e,t)=>{let{$from:n,$to:Ee}=e.selection,Re=n.blockRange(Ee),Ce=Re&&liftTarget(Re);return Ce==null?!1:(t&&t(e.tr.lift(Re,Ce).scrollIntoView()),!0)},newlineInCode$1=(e,t)=>{let{$head:n,$anchor:Ee}=e.selection;return!n.parent.type.spec.code||!n.sameParent(Ee)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const exitCode$1=(e,t)=>{let{$head:n,$anchor:Ee}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(Ee))return!1;let Re=n.node(-1),Ce=n.indexAfter(-1),Te=defaultBlockAt$1(Re.contentMatchAt(Ce));if(!Te||!Re.canReplaceWith(Ce,Ce,Te))return!1;if(t){let Me=n.after(),De=e.tr.replaceWith(Me,Me,Te.createAndFill());De.setSelection(Selection.near(De.doc.resolve(Me),1)),t(De.scrollIntoView())}return!0},createParagraphNear$1=(e,t)=>{let n=e.selection,{$from:Ee,$to:Re}=n;if(n instanceof AllSelection||Ee.parent.inlineContent||Re.parent.inlineContent)return!1;let Ce=defaultBlockAt$1(Re.parent.contentMatchAt(Re.indexAfter()));if(!Ce||!Ce.isTextblock)return!1;if(t){let Te=(!Ee.parentOffset&&Re.index()<Re.parent.childCount?Ee:Re).pos,Me=e.tr.insert(Te,Ce.createAndFill());Me.setSelection(TextSelection.create(Me.doc,Te+1)),t(Me.scrollIntoView())}return!0},liftEmptyBlock$1=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let Ce=n.before();if(canSplit(e.doc,Ce))return t&&t(e.tr.split(Ce).scrollIntoView()),!0}let Ee=n.blockRange(),Re=Ee&&liftTarget(Ee);return Re==null?!1:(t&&t(e.tr.lift(Ee,Re).scrollIntoView()),!0)};function splitBlockAs(e){return(t,n)=>{let{$from:Ee,$to:Re}=t.selection;if(t.selection instanceof NodeSelection&&t.selection.node.isBlock)return!Ee.parentOffset||!canSplit(t.doc,Ee.pos)?!1:(n&&n(t.tr.split(Ee.pos).scrollIntoView()),!0);if(!Ee.depth)return!1;let Ce=[],Te,Me,De=!1,Oe=!1;for(let He=Ee.depth;;He--)if(Ee.node(He).isBlock){De=Ee.end(He)==Ee.pos+(Ee.depth-He),Oe=Ee.start(He)==Ee.pos-(Ee.depth-He),Me=defaultBlockAt$1(Ee.node(He-1).contentMatchAt(Ee.indexAfter(He-1))),Ce.unshift(De&&Me?{type:Me}:null),Te=He;break}else{if(He==1)return!1;Ce.unshift(null)}let Be=t.tr;(t.selection instanceof TextSelection||t.selection instanceof AllSelection)&&Be.deleteSelection();let ze=Be.mapping.map(Ee.pos),$e=canSplit(Be.doc,ze,Ce.length,Ce);if($e||(Ce[0]=Me?{type:Me}:null,$e=canSplit(Be.doc,ze,Ce.length,Ce)),!$e)return!1;if(Be.split(ze,Ce.length,Ce),!De&&Oe&&Ee.node(Te).type!=Me){let He=Be.mapping.map(Ee.before(Te)),Ue=Be.doc.resolve(He);Me&&Ee.node(Te-1).canReplaceWith(Ue.index(),Ue.index()+1,Me)&&Be.setNodeMarkup(Be.mapping.map(Ee.before(Te)),Me)}return n&&n(Be.scrollIntoView()),!0}}const splitBlock$1=splitBlockAs(),selectParentNode$1=(e,t)=>{let{$from:n,to:Ee}=e.selection,Re,Ce=n.sharedDepth(Ee);return Ce==0?!1:(Re=n.before(Ce),t&&t(e.tr.setSelection(NodeSelection.create(e.doc,Re))),!0)};function joinMaybeClear(e,t,n){let Ee=t.nodeBefore,Re=t.nodeAfter,Ce=t.index();return!Ee||!Re||!Ee.type.compatibleContent(Re.type)?!1:!Ee.content.size&&t.parent.canReplace(Ce-1,Ce)?(n&&n(e.tr.delete(t.pos-Ee.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(Ce,Ce+1)||!(Re.isTextblock||canJoin(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function deleteBarrier(e,t,n,Ee){let Re=t.nodeBefore,Ce=t.nodeAfter,Te,Me,De=Re.type.spec.isolating||Ce.type.spec.isolating;if(!De&&joinMaybeClear(e,t,n))return!0;let Oe=!De&&t.parent.canReplace(t.index(),t.index()+1);if(Oe&&(Te=(Me=Re.contentMatchAt(Re.childCount)).findWrapping(Ce.type))&&Me.matchType(Te[0]||Ce.type).validEnd){if(n){let He=t.pos+Ce.nodeSize,Ue=Fragment.empty;for(let qe=Te.length-1;qe>=0;qe--)Ue=Fragment.from(Te[qe].create(null,Ue));Ue=Fragment.from(Re.copy(Ue));let Ve=e.tr.step(new ReplaceAroundStep(t.pos-1,He,t.pos,He,new Slice(Ue,1,0),Te.length,!0)),We=Ve.doc.resolve(He+2*Te.length);We.nodeAfter&&We.nodeAfter.type==Re.type&&canJoin(Ve.doc,We.pos)&&Ve.join(We.pos),n(Ve.scrollIntoView())}return!0}let Be=Ce.type.spec.isolating||Ee>0&&De?null:Selection.findFrom(t,1),ze=Be&&Be.$from.blockRange(Be.$to),$e=ze&&liftTarget(ze);if($e!=null&&$e>=t.depth)return n&&n(e.tr.lift(ze,$e).scrollIntoView()),!0;if(Oe&&textblockAt(Ce,"start",!0)&&textblockAt(Re,"end")){let He=Re,Ue=[];for(;Ue.push(He),!He.isTextblock;)He=He.lastChild;let Ve=Ce,We=1;for(;!Ve.isTextblock;Ve=Ve.firstChild)We++;if(He.canReplace(He.childCount,He.childCount,Ve.content)){if(n){let qe=Fragment.empty;for(let Ye=Ue.length-1;Ye>=0;Ye--)qe=Fragment.from(Ue[Ye].copy(qe));let Ge=e.tr.step(new ReplaceAroundStep(t.pos-Ue.length,t.pos+Ce.nodeSize,t.pos+We,t.pos+Ce.nodeSize-We,new Slice(qe,Ue.length,0),0,!0));n(Ge.scrollIntoView())}return!0}}return!1}function selectTextblockSide(e){return function(t,n){let Ee=t.selection,Re=e<0?Ee.$from:Ee.$to,Ce=Re.depth;for(;Re.node(Ce).isInline;){if(!Ce)return!1;Ce--}return Re.node(Ce).isTextblock?(n&&n(t.tr.setSelection(TextSelection.create(t.doc,e<0?Re.start(Ce):Re.end(Ce)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(e,t=null){return function(n,Ee){let{$from:Re,$to:Ce}=n.selection,Te=Re.blockRange(Ce),Me=Te&&findWrapping(Te,e,t);return Me?(Ee&&Ee(n.tr.wrap(Te,Me).scrollIntoView()),!0):!1}}function setBlockType(e,t=null){return function(n,Ee){let Re=!1;for(let Ce=0;Ce<n.selection.ranges.length&&!Re;Ce++){let{$from:{pos:Te},$to:{pos:Me}}=n.selection.ranges[Ce];n.doc.nodesBetween(Te,Me,(De,Oe)=>{if(Re)return!1;if(!(!De.isTextblock||De.hasMarkup(e,t)))if(De.type==e)Re=!0;else{let Be=n.doc.resolve(Oe),ze=Be.index();Re=Be.parent.canReplaceWith(ze,ze+1,e)}})}if(!Re)return!1;if(Ee){let Ce=n.tr;for(let Te=0;Te<n.selection.ranges.length;Te++){let{$from:{pos:Me},$to:{pos:De}}=n.selection.ranges[Te];Ce.setBlockType(Me,De,e,t)}Ee(Ce.scrollIntoView())}return!0}}function chainCommands(...e){return function(t,n,Ee){for(let Re=0;Re<e.length;Re++)if(e[Re](t,n,Ee))return!0;return!1}}chainCommands(deleteSelection$1,joinBackward$1,selectNodeBackward$1);chainCommands(deleteSelection$1,joinForward$1,selectNodeForward$1);chainCommands(newlineInCode$1,createParagraphNear$1,liftEmptyBlock$1,splitBlock$1);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(e,t=null){return function(n,Ee){let{$from:Re,$to:Ce}=n.selection,Te=Re.blockRange(Ce);if(!Te)return!1;let Me=Ee?n.tr:null;return wrapRangeInList(Me,Te,e,t)?(Ee&&Ee(Me.scrollIntoView()),!0):!1}}function wrapRangeInList(e,t,n,Ee=null){let Re=!1,Ce=t,Te=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let De=Te.resolve(t.start-2);Ce=new NodeRange(De,De,t.depth),t.endIndex<t.parent.childCount&&(t=new NodeRange(t.$from,Te.resolve(t.$to.end(t.depth)),t.depth)),Re=!0}let Me=findWrapping(Ce,n,Ee,t);return Me?(e&&doWrapInList(e,t,Me,Re,n),!0):!1}function doWrapInList(e,t,n,Ee,Re){let Ce=Fragment.empty;for(let Be=n.length-1;Be>=0;Be--)Ce=Fragment.from(n[Be].type.create(n[Be].attrs,Ce));e.step(new ReplaceAroundStep(t.start-(Ee?2:0),t.end,t.start,t.end,new Slice(Ce,0,0),n.length,!0));let Te=0;for(let Be=0;Be<n.length;Be++)n[Be].type==Re&&(Te=Be+1);let Me=n.length-Te,De=t.start+n.length-(Ee?2:0),Oe=t.parent;for(let Be=t.startIndex,ze=t.endIndex,$e=!0;Be<ze;Be++,$e=!1)!$e&&canSplit(e.doc,De,Me)&&(e.split(De,Me),De+=2*Me),De+=Oe.child(Be).nodeSize;return e}function liftListItem$1(e){return function(t,n){let{$from:Ee,$to:Re}=t.selection,Ce=Ee.blockRange(Re,Te=>Te.childCount>0&&Te.firstChild.type==e);return Ce?n?Ee.node(Ce.depth-1).type==e?liftToOuterList(t,n,e,Ce):liftOutOfList(t,n,Ce):!0:!1}}function liftToOuterList(e,t,n,Ee){let Re=e.tr,Ce=Ee.end,Te=Ee.$to.end(Ee.depth);Ce<Te&&(Re.step(new ReplaceAroundStep(Ce-1,Te,Ce,Te,new Slice(Fragment.from(n.create(null,Ee.parent.copy())),1,0),1,!0)),Ee=new NodeRange(Re.doc.resolve(Ee.$from.pos),Re.doc.resolve(Te),Ee.depth));const Me=liftTarget(Ee);if(Me==null)return!1;Re.lift(Ee,Me);let De=Re.doc.resolve(Re.mapping.map(Ce,-1)-1);return canJoin(Re.doc,De.pos)&&De.nodeBefore.type==De.nodeAfter.type&&Re.join(De.pos),t(Re.scrollIntoView()),!0}function liftOutOfList(e,t,n){let Ee=e.tr,Re=n.parent;for(let He=n.end,Ue=n.endIndex-1,Ve=n.startIndex;Ue>Ve;Ue--)He-=Re.child(Ue).nodeSize,Ee.delete(He-1,He+1);let Ce=Ee.doc.resolve(n.start),Te=Ce.nodeAfter;if(Ee.mapping.map(n.end)!=n.start+Ce.nodeAfter.nodeSize)return!1;let Me=n.startIndex==0,De=n.endIndex==Re.childCount,Oe=Ce.node(-1),Be=Ce.index(-1);if(!Oe.canReplace(Be+(Me?0:1),Be+1,Te.content.append(De?Fragment.empty:Fragment.from(Re))))return!1;let ze=Ce.pos,$e=ze+Te.nodeSize;return Ee.step(new ReplaceAroundStep(ze-(Me?1:0),$e+(De?1:0),ze+1,$e-1,new Slice((Me?Fragment.empty:Fragment.from(Re.copy(Fragment.empty))).append(De?Fragment.empty:Fragment.from(Re.copy(Fragment.empty))),Me?0:1,De?0:1),Me?0:1)),t(Ee.scrollIntoView()),!0}function sinkListItem$1(e){return function(t,n){let{$from:Ee,$to:Re}=t.selection,Ce=Ee.blockRange(Re,Oe=>Oe.childCount>0&&Oe.firstChild.type==e);if(!Ce)return!1;let Te=Ce.startIndex;if(Te==0)return!1;let Me=Ce.parent,De=Me.child(Te-1);if(De.type!=e)return!1;if(n){let Oe=De.lastChild&&De.lastChild.type==Me.type,Be=Fragment.from(Oe?e.create():null),ze=new Slice(Fragment.from(e.create(null,Fragment.from(Me.type.create(null,Be)))),Oe?3:1,0),$e=Ce.start,He=Ce.end;n(t.tr.step(new ReplaceAroundStep($e-(Oe?3:1),He,$e,He,ze,1,!0)).scrollIntoView())}return!0}}const domIndex=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},parentNode=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let reusedRange=null;const textRange=function(e,t,n){let Ee=reusedRange||(reusedRange=document.createRange());return Ee.setEnd(e,n??e.nodeValue.length),Ee.setStart(e,t||0),Ee},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(e,t,n,Ee){return n&&(scanFor(e,t,n,Ee,-1)||scanFor(e,t,n,Ee,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(e,t,n,Ee,Re){for(var Ce;;){if(e==n&&t==Ee)return!0;if(t==(Re<0?0:nodeSize(e))){let Te=e.parentNode;if(!Te||Te.nodeType!=1||hasBlockDesc(e)||atomElements.test(e.nodeName)||e.contentEditable=="false")return!1;t=domIndex(e)+(Re<0?0:1),e=Te}else if(e.nodeType==1){let Te=e.childNodes[t+(Re<0?-1:0)];if(Te.nodeType==1&&Te.contentEditable=="false")if(!((Ce=Te.pmViewDesc)===null||Ce===void 0)&&Ce.ignoreForSelection)t+=Re;else return!1;else e=Te,t=Re<0?nodeSize(e):0}else return!1}}function nodeSize(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function textNodeBefore$1(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=nodeSize(e)}else if(e.parentNode&&!hasBlockDesc(e))t=domIndex(e),e=e.parentNode;else return null}}function textNodeAfter$1(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!hasBlockDesc(e))t=domIndex(e)+1,e=e.parentNode;else return null}}function isOnEdge(e,t,n){for(let Ee=t==0,Re=t==nodeSize(e);Ee||Re;){if(e==n)return!0;let Ce=domIndex(e);if(e=e.parentNode,!e)return!1;Ee=Ee&&Ce==0,Re=Re&&Ce==nodeSize(e)}}function hasBlockDesc(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const selectionCollapsed=function(e){return e.focusNode&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function keyEvent(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function deepActiveElement(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function caretFromPoint(e,t,n){if(e.caretPositionFromPoint)try{let Ee=e.caretPositionFromPoint(t,n);if(Ee)return{node:Ee.offsetNode,offset:Math.min(nodeSize(Ee.offsetNode),Ee.offset)}}catch{}if(e.caretRangeFromPoint){let Ee=e.caretRangeFromPoint(t,n);if(Ee)return{node:Ee.startContainer,offset:Math.min(nodeSize(Ee.startContainer),Ee.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari$1=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari$1&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows$1=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function getSide(e,t){return typeof e=="number"?e:e[t]}function clientRect(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,Ee=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*Ee}}function scrollRectIntoView(e,t,n){let Ee=e.someProp("scrollThreshold")||0,Re=e.someProp("scrollMargin")||5,Ce=e.dom.ownerDocument;for(let Te=n||e.dom;Te;){if(Te.nodeType!=1){Te=parentNode(Te);continue}let Me=Te,De=Me==Ce.body,Oe=De?windowRect(Ce):clientRect(Me),Be=0,ze=0;if(t.top<Oe.top+getSide(Ee,"top")?ze=-(Oe.top-t.top+getSide(Re,"top")):t.bottom>Oe.bottom-getSide(Ee,"bottom")&&(ze=t.bottom-t.top>Oe.bottom-Oe.top?t.top+getSide(Re,"top")-Oe.top:t.bottom-Oe.bottom+getSide(Re,"bottom")),t.left<Oe.left+getSide(Ee,"left")?Be=-(Oe.left-t.left+getSide(Re,"left")):t.right>Oe.right-getSide(Ee,"right")&&(Be=t.right-Oe.right+getSide(Re,"right")),Be||ze)if(De)Ce.defaultView.scrollBy(Be,ze);else{let He=Me.scrollLeft,Ue=Me.scrollTop;ze&&(Me.scrollTop+=ze),Be&&(Me.scrollLeft+=Be);let Ve=Me.scrollLeft-He,We=Me.scrollTop-Ue;t={left:t.left-Ve,top:t.top-We,right:t.right-Ve,bottom:t.bottom-We}}let $e=De?"fixed":getComputedStyle(Te).position;if(/^(fixed|sticky)$/.test($e))break;Te=$e=="absolute"?Te.offsetParent:parentNode(Te)}}function storeScrollPos(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),Ee,Re;for(let Ce=(t.left+t.right)/2,Te=n+1;Te<Math.min(innerHeight,t.bottom);Te+=5){let Me=e.root.elementFromPoint(Ce,Te);if(!Me||Me==e.dom||!e.dom.contains(Me))continue;let De=Me.getBoundingClientRect();if(De.top>=n-20){Ee=Me,Re=De.top;break}}return{refDOM:Ee,refTop:Re,stack:scrollStack(e.dom)}}function scrollStack(e){let t=[],n=e.ownerDocument;for(let Ee=e;Ee&&(t.push({dom:Ee,top:Ee.scrollTop,left:Ee.scrollLeft}),e!=n);Ee=parentNode(Ee));return t}function resetScrollPos({refDOM:e,refTop:t,stack:n}){let Ee=e?e.getBoundingClientRect().top:0;restoreScrollStack(n,Ee==0?0:Ee-t)}function restoreScrollStack(e,t){for(let n=0;n<e.length;n++){let{dom:Ee,top:Re,left:Ce}=e[n];Ee.scrollTop!=Re+t&&(Ee.scrollTop=Re+t),Ee.scrollLeft!=Ce&&(Ee.scrollLeft=Ce)}}let preventScrollSupported=null;function focusPreventScroll(e){if(e.setActive)return e.setActive();if(preventScrollSupported)return e.focus(preventScrollSupported);let t=scrollStack(e);e.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(t,0))}function findOffsetInNode(e,t){let n,Ee=2e8,Re,Ce=0,Te=t.top,Me=t.top,De,Oe;for(let Be=e.firstChild,ze=0;Be;Be=Be.nextSibling,ze++){let $e;if(Be.nodeType==1)$e=Be.getClientRects();else if(Be.nodeType==3)$e=textRange(Be).getClientRects();else continue;for(let He=0;He<$e.length;He++){let Ue=$e[He];if(Ue.top<=Te&&Ue.bottom>=Me){Te=Math.max(Ue.bottom,Te),Me=Math.min(Ue.top,Me);let Ve=Ue.left>t.left?Ue.left-t.left:Ue.right<t.left?t.left-Ue.right:0;if(Ve<Ee){n=Be,Ee=Ve,Re=Ve&&n.nodeType==3?{left:Ue.right<t.left?Ue.right:Ue.left,top:t.top}:t,Be.nodeType==1&&Ve&&(Ce=ze+(t.left>=(Ue.left+Ue.right)/2?1:0));continue}}else Ue.top>t.top&&!De&&Ue.left<=t.left&&Ue.right>=t.left&&(De=Be,Oe={left:Math.max(Ue.left,Math.min(Ue.right,t.left)),top:Ue.top});!n&&(t.left>=Ue.right&&t.top>=Ue.top||t.left>=Ue.left&&t.top>=Ue.bottom)&&(Ce=ze+1)}}return!n&&De&&(n=De,Re=Oe,Ee=0),n&&n.nodeType==3?findOffsetInText(n,Re):!n||Ee&&n.nodeType==1?{node:e,offset:Ce}:findOffsetInNode(n,Re)}function findOffsetInText(e,t){let n=e.nodeValue.length,Ee=document.createRange(),Re;for(let Ce=0;Ce<n;Ce++){Ee.setEnd(e,Ce+1),Ee.setStart(e,Ce);let Te=singleRect(Ee,1);if(Te.top!=Te.bottom&&inRect(t,Te)){Re={node:e,offset:Ce+(t.left>=(Te.left+Te.right)/2?1:0)};break}}return Ee.detach(),Re||{node:e,offset:0}}function inRect(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function targetKludge(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function posFromElement(e,t,n){let{node:Ee,offset:Re}=findOffsetInNode(t,n),Ce=-1;if(Ee.nodeType==1&&!Ee.firstChild){let Te=Ee.getBoundingClientRect();Ce=Te.left!=Te.right&&n.left>(Te.left+Te.right)/2?1:-1}return e.docView.posFromDOM(Ee,Re,Ce)}function posFromCaret(e,t,n,Ee){let Re=-1;for(let Ce=t,Te=!1;Ce!=e.dom;){let Me=e.docView.nearestDesc(Ce,!0),De;if(!Me)return null;if(Me.dom.nodeType==1&&(Me.node.isBlock&&Me.parent||!Me.contentDOM)&&((De=Me.dom.getBoundingClientRect()).width||De.height)&&(Me.node.isBlock&&Me.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(Me.dom.nodeName)&&(!Te&&De.left>Ee.left||De.top>Ee.top?Re=Me.posBefore:(!Te&&De.right<Ee.left||De.bottom<Ee.top)&&(Re=Me.posAfter),Te=!0),!Me.contentDOM&&Re<0&&!Me.node.isText))return(Me.node.isBlock?Ee.top<(De.top+De.bottom)/2:Ee.left<(De.left+De.right)/2)?Me.posBefore:Me.posAfter;Ce=Me.dom.parentNode}return Re>-1?Re:e.docView.posFromDOM(t,n,-1)}function elementFromPoint(e,t,n){let Ee=e.childNodes.length;if(Ee&&n.top<n.bottom)for(let Re=Math.max(0,Math.min(Ee-1,Math.floor(Ee*(t.top-n.top)/(n.bottom-n.top))-2)),Ce=Re;;){let Te=e.childNodes[Ce];if(Te.nodeType==1){let Me=Te.getClientRects();for(let De=0;De<Me.length;De++){let Oe=Me[De];if(inRect(t,Oe))return elementFromPoint(Te,t,Oe)}}if((Ce=(Ce+1)%Ee)==Re)break}return e}function posAtCoords(e,t){let n=e.dom.ownerDocument,Ee,Re=0,Ce=caretFromPoint(n,t.left,t.top);Ce&&({node:Ee,offset:Re}=Ce);let Te=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),Me;if(!Te||!e.dom.contains(Te.nodeType!=1?Te.parentNode:Te)){let Oe=e.dom.getBoundingClientRect();if(!inRect(t,Oe)||(Te=elementFromPoint(e.dom,t,Oe),!Te))return null}if(safari$1)for(let Oe=Te;Ee&&Oe;Oe=parentNode(Oe))Oe.draggable&&(Ee=void 0);if(Te=targetKludge(Te,t),Ee){if(gecko&&Ee.nodeType==1&&(Re=Math.min(Re,Ee.childNodes.length),Re<Ee.childNodes.length)){let Be=Ee.childNodes[Re],ze;Be.nodeName=="IMG"&&(ze=Be.getBoundingClientRect()).right<=t.left&&ze.bottom>t.top&&Re++}let Oe;webkit&&Re&&Ee.nodeType==1&&(Oe=Ee.childNodes[Re-1]).nodeType==1&&Oe.contentEditable=="false"&&Oe.getBoundingClientRect().top>=t.top&&Re--,Ee==e.dom&&Re==Ee.childNodes.length-1&&Ee.lastChild.nodeType==1&&t.top>Ee.lastChild.getBoundingClientRect().bottom?Me=e.state.doc.content.size:(Re==0||Ee.nodeType!=1||Ee.childNodes[Re-1].nodeName!="BR")&&(Me=posFromCaret(e,Ee,Re,t))}Me==null&&(Me=posFromElement(e,Te,t));let De=e.docView.nearestDesc(Te,!0);return{pos:Me,inside:De?De.posAtStart-De.border:-1}}function nonZero(e){return e.top<e.bottom||e.left<e.right}function singleRect(e,t){let n=e.getClientRects();if(n.length){let Ee=n[t<0?0:n.length-1];if(nonZero(Ee))return Ee}return Array.prototype.find.call(n,nonZero)||e.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(e,t,n){let{node:Ee,offset:Re,atom:Ce}=e.docView.domFromPos(t,n<0?-1:1),Te=webkit||gecko;if(Ee.nodeType==3)if(Te&&(BIDI.test(Ee.nodeValue)||(n<0?!Re:Re==Ee.nodeValue.length))){let De=singleRect(textRange(Ee,Re,Re),n);if(gecko&&Re&&/\s/.test(Ee.nodeValue[Re-1])&&Re<Ee.nodeValue.length){let Oe=singleRect(textRange(Ee,Re-1,Re-1),-1);if(Oe.top==De.top){let Be=singleRect(textRange(Ee,Re,Re+1),-1);if(Be.top!=De.top)return flattenV(Be,Be.left<Oe.left)}}return De}else{let De=Re,Oe=Re,Be=n<0?1:-1;return n<0&&!Re?(Oe++,Be=-1):n>=0&&Re==Ee.nodeValue.length?(De--,Be=1):n<0?De--:Oe++,flattenV(singleRect(textRange(Ee,De,Oe),Be),Be<0)}if(!e.state.doc.resolve(t-(Ce||0)).parent.inlineContent){if(Ce==null&&Re&&(n<0||Re==nodeSize(Ee))){let De=Ee.childNodes[Re-1];if(De.nodeType==1)return flattenH(De.getBoundingClientRect(),!1)}if(Ce==null&&Re<nodeSize(Ee)){let De=Ee.childNodes[Re];if(De.nodeType==1)return flattenH(De.getBoundingClientRect(),!0)}return flattenH(Ee.getBoundingClientRect(),n>=0)}if(Ce==null&&Re&&(n<0||Re==nodeSize(Ee))){let De=Ee.childNodes[Re-1],Oe=De.nodeType==3?textRange(De,nodeSize(De)-(Te?0:1)):De.nodeType==1&&(De.nodeName!="BR"||!De.nextSibling)?De:null;if(Oe)return flattenV(singleRect(Oe,1),!1)}if(Ce==null&&Re<nodeSize(Ee)){let De=Ee.childNodes[Re];for(;De.pmViewDesc&&De.pmViewDesc.ignoreForCoords;)De=De.nextSibling;let Oe=De?De.nodeType==3?textRange(De,0,Te?0:1):De.nodeType==1?De:null:null;if(Oe)return flattenV(singleRect(Oe,-1),!0)}return flattenV(singleRect(Ee.nodeType==3?textRange(Ee):Ee,-n),n>=0)}function flattenV(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function flattenH(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function withFlushedState(e,t,n){let Ee=e.state,Re=e.root.activeElement;Ee!=t&&e.updateState(t),Re!=e.dom&&e.focus();try{return n()}finally{Ee!=t&&e.updateState(Ee),Re!=e.dom&&Re&&Re.focus()}}function endOfTextblockVertical(e,t,n){let Ee=t.selection,Re=n=="up"?Ee.$from:Ee.$to;return withFlushedState(e,t,()=>{let{node:Ce}=e.docView.domFromPos(Re.pos,n=="up"?-1:1);for(;;){let Me=e.docView.nearestDesc(Ce,!0);if(!Me)break;if(Me.node.isBlock){Ce=Me.contentDOM||Me.dom;break}Ce=Me.dom.parentNode}let Te=coordsAtPos(e,Re.pos,1);for(let Me=Ce.firstChild;Me;Me=Me.nextSibling){let De;if(Me.nodeType==1)De=Me.getClientRects();else if(Me.nodeType==3)De=textRange(Me,0,Me.nodeValue.length).getClientRects();else continue;for(let Oe=0;Oe<De.length;Oe++){let Be=De[Oe];if(Be.bottom>Be.top+1&&(n=="up"?Te.top-Be.top>(Be.bottom-Te.top)*2:Be.bottom-Te.bottom>(Te.bottom-Be.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(e,t,n){let{$head:Ee}=t.selection;if(!Ee.parent.isTextblock)return!1;let Re=Ee.parentOffset,Ce=!Re,Te=Re==Ee.parent.content.size,Me=e.domSelection();return Me?!maybeRTL.test(Ee.parent.textContent)||!Me.modify?n=="left"||n=="backward"?Ce:Te:withFlushedState(e,t,()=>{let{focusNode:De,focusOffset:Oe,anchorNode:Be,anchorOffset:ze}=e.domSelectionRange(),$e=Me.caretBidiLevel;Me.modify("move",n,"character");let He=Ee.depth?e.docView.domAfterPos(Ee.before()):e.dom,{focusNode:Ue,focusOffset:Ve}=e.domSelectionRange(),We=Ue&&!He.contains(Ue.nodeType==1?Ue:Ue.parentNode)||De==Ue&&Oe==Ve;try{Me.collapse(Be,ze),De&&(De!=Be||Oe!=ze)&&Me.extend&&Me.extend(De,Oe)}catch{}return $e!=null&&(Me.caretBidiLevel=$e),We}):Ee.pos==Ee.start()||Ee.pos==Ee.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(e,t,n){return cachedState==t&&cachedDir==n?cachedResult:(cachedState=t,cachedDir=n,cachedResult=n=="up"||n=="down"?endOfTextblockVertical(e,t,n):endOfTextblockHorizontal(e,t,n))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(t,n,Ee,Re){this.parent=t,this.children=n,this.dom=Ee,this.contentDOM=Re,this.dirty=NOT_DIRTY,Ee.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,Ee){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,Ee=this.posAtStart;;n++){let Re=this.children[n];if(Re==t)return Ee;Ee+=Re.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,Ee){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(Ee<0){let Ce,Te;if(t==this.contentDOM)Ce=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;Ce=t.previousSibling}for(;Ce&&!((Te=Ce.pmViewDesc)&&Te.parent==this);)Ce=Ce.previousSibling;return Ce?this.posBeforeChild(Te)+Te.size:this.posAtStart}else{let Ce,Te;if(t==this.contentDOM)Ce=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;Ce=t.nextSibling}for(;Ce&&!((Te=Ce.pmViewDesc)&&Te.parent==this);)Ce=Ce.nextSibling;return Ce?this.posBeforeChild(Te):this.posAtEnd}let Re;if(t==this.dom&&this.contentDOM)Re=n>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))Re=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let Ce=t;;Ce=Ce.parentNode){if(Ce==this.dom){Re=!1;break}if(Ce.previousSibling)break}if(Re==null&&n==t.childNodes.length)for(let Ce=t;;Ce=Ce.parentNode){if(Ce==this.dom){Re=!0;break}if(Ce.nextSibling)break}}return Re??Ee>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let Ee=!0,Re=t;Re;Re=Re.parentNode){let Ce=this.getDesc(Re),Te;if(Ce&&(!n||Ce.node))if(Ee&&(Te=Ce.nodeDOM)&&!(Te.nodeType==1?Te.contains(t.nodeType==1?t:t.parentNode):Te==t))Ee=!1;else return Ce}}getDesc(t){let n=t.pmViewDesc;for(let Ee=n;Ee;Ee=Ee.parent)if(Ee==this)return n}posFromDOM(t,n,Ee){for(let Re=t;Re;Re=Re.parentNode){let Ce=this.getDesc(Re);if(Ce)return Ce.localPosFromDOM(t,n,Ee)}return-1}descAt(t){for(let n=0,Ee=0;n<this.children.length;n++){let Re=this.children[n],Ce=Ee+Re.size;if(Ee==t&&Ce!=Ee){for(;!Re.border&&Re.children.length;)for(let Te=0;Te<Re.children.length;Te++){let Me=Re.children[Te];if(Me.size){Re=Me;break}}return Re}if(t<Ce)return Re.descAt(t-Ee-Re.border);Ee=Ce}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let Ee=0,Re=0;for(let Ce=0;Ee<this.children.length;Ee++){let Te=this.children[Ee],Me=Ce+Te.size;if(Me>t||Te instanceof TrailingHackViewDesc){Re=t-Ce;break}Ce=Me}if(Re)return this.children[Ee].domFromPos(Re-this.children[Ee].border,n);for(let Ce;Ee&&!(Ce=this.children[Ee-1]).size&&Ce instanceof WidgetViewDesc&&Ce.side>=0;Ee--);if(n<=0){let Ce,Te=!0;for(;Ce=Ee?this.children[Ee-1]:null,!(!Ce||Ce.dom.parentNode==this.contentDOM);Ee--,Te=!1);return Ce&&n&&Te&&!Ce.border&&!Ce.domAtom?Ce.domFromPos(Ce.size,n):{node:this.contentDOM,offset:Ce?domIndex(Ce.dom)+1:0}}else{let Ce,Te=!0;for(;Ce=Ee<this.children.length?this.children[Ee]:null,!(!Ce||Ce.dom.parentNode==this.contentDOM);Ee++,Te=!1);return Ce&&Te&&!Ce.border&&!Ce.domAtom?Ce.domFromPos(0,n):{node:this.contentDOM,offset:Ce?domIndex(Ce.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,Ee=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let Re=-1,Ce=-1;for(let Te=Ee,Me=0;;Me++){let De=this.children[Me],Oe=Te+De.size;if(Re==-1&&t<=Oe){let Be=Te+De.border;if(t>=Be&&n<=Oe-De.border&&De.node&&De.contentDOM&&this.contentDOM.contains(De.contentDOM))return De.parseRange(t,n,Be);t=Te;for(let ze=Me;ze>0;ze--){let $e=this.children[ze-1];if($e.size&&$e.dom.parentNode==this.contentDOM&&!$e.emptyChildAt(1)){Re=domIndex($e.dom)+1;break}t-=$e.size}Re==-1&&(Re=0)}if(Re>-1&&(Oe>n||Me==this.children.length-1)){n=Oe;for(let Be=Me+1;Be<this.children.length;Be++){let ze=this.children[Be];if(ze.size&&ze.dom.parentNode==this.contentDOM&&!ze.emptyChildAt(-1)){Ce=domIndex(ze.dom);break}n+=ze.size}Ce==-1&&(Ce=this.contentDOM.childNodes.length);break}Te=Oe}return{node:this.contentDOM,from:t,to:n,fromOffset:Re,toOffset:Ce}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:Ee}=this.domFromPos(t,0);if(n.nodeType!=1||Ee==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[Ee]}setSelection(t,n,Ee,Re=!1){let Ce=Math.min(t,n),Te=Math.max(t,n);for(let He=0,Ue=0;He<this.children.length;He++){let Ve=this.children[He],We=Ue+Ve.size;if(Ce>Ue&&Te<We)return Ve.setSelection(t-Ue-Ve.border,n-Ue-Ve.border,Ee,Re);Ue=We}let Me=this.domFromPos(t,t?-1:1),De=n==t?Me:this.domFromPos(n,n?-1:1),Oe=Ee.root.getSelection(),Be=Ee.domSelectionRange(),ze=!1;if((gecko||safari$1)&&t==n){let{node:He,offset:Ue}=Me;if(He.nodeType==3){if(ze=!!(Ue&&He.nodeValue[Ue-1]==`
`),ze&&Ue==He.nodeValue.length)for(let Ve=He,We;Ve;Ve=Ve.parentNode){if(We=Ve.nextSibling){We.nodeName=="BR"&&(Me=De={node:We.parentNode,offset:domIndex(We)+1});break}let qe=Ve.pmViewDesc;if(qe&&qe.node&&qe.node.isBlock)break}}else{let Ve=He.childNodes[Ue-1];ze=Ve&&(Ve.nodeName=="BR"||Ve.contentEditable=="false")}}if(gecko&&Be.focusNode&&Be.focusNode!=De.node&&Be.focusNode.nodeType==1){let He=Be.focusNode.childNodes[Be.focusOffset];He&&He.contentEditable=="false"&&(Re=!0)}if(!(Re||ze&&safari$1)&&isEquivalentPosition(Me.node,Me.offset,Be.anchorNode,Be.anchorOffset)&&isEquivalentPosition(De.node,De.offset,Be.focusNode,Be.focusOffset))return;let $e=!1;if((Oe.extend||t==n)&&!(ze&&gecko)){Oe.collapse(Me.node,Me.offset);try{t!=n&&Oe.extend(De.node,De.offset),$e=!0}catch{}}if(!$e){if(t>n){let Ue=Me;Me=De,De=Ue}let He=document.createRange();He.setEnd(De.node,De.offset),He.setStart(Me.node,Me.offset),Oe.removeAllRanges(),Oe.addRange(He)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let Ee=0,Re=0;Re<this.children.length;Re++){let Ce=this.children[Re],Te=Ee+Ce.size;if(Ee==Te?t<=Te&&n>=Ee:t<Te&&n>Ee){let Me=Ee+Ce.border,De=Te-Ce.border;if(t>=Me&&n<=De){this.dirty=t==Ee||n==Te?CONTENT_DIRTY:CHILD_DIRTY,t==Me&&n==De&&(Ce.contentLost||Ce.dom.parentNode!=this.contentDOM)?Ce.dirty=NODE_DIRTY:Ce.markDirty(t-Me,n-Me);return}else Ce.dirty=Ce.dom==Ce.contentDOM&&Ce.dom.parentNode==this.contentDOM&&!Ce.children.length?CONTENT_DIRTY:NODE_DIRTY}Ee=Te}this.dirty=CONTENT_DIRTY}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let Ee=t==1?CONTENT_DIRTY:CHILD_DIRTY;n.dirty<Ee&&(n.dirty=Ee)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class WidgetViewDesc extends ViewDesc{constructor(t,n,Ee,Re){let Ce,Te=n.type.toDOM;if(typeof Te=="function"&&(Te=Te(Ee,()=>{if(!Ce)return Re;if(Ce.parent)return Ce.parent.posBeforeChild(Ce)})),!n.type.spec.raw){if(Te.nodeType!=1){let Me=document.createElement("span");Me.appendChild(Te),Te=Me}Te.contentEditable="false",Te.classList.add("ProseMirror-widget")}super(t,[],Te,null),this.widget=n,this.widget=n,Ce=this}matchesWidget(t){return this.dirty==NOT_DIRTY&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(t,n,Ee,Re){super(t,[],n,null),this.textDOM=Ee,this.text=Re}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class MarkViewDesc extends ViewDesc{constructor(t,n,Ee,Re,Ce){super(t,[],Ee,Re),this.mark=n,this.spec=Ce}static create(t,n,Ee,Re){let Ce=Re.nodeViews[n.type.name],Te=Ce&&Ce(n,Re,Ee);return(!Te||!Te.dom)&&(Te=DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,Ee),null,n.attrs)),new MarkViewDesc(t,n,Te.dom,Te.contentDOM||Te.dom,Te)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=NODE_DIRTY&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=NOT_DIRTY){let Ee=this.parent;for(;!Ee.node;)Ee=Ee.parent;Ee.dirty<this.dirty&&(Ee.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(t,n,Ee){let Re=MarkViewDesc.create(this.parent,this.mark,!0,Ee),Ce=this.children,Te=this.size;n<Te&&(Ce=replaceNodes(Ce,n,Te,Ee)),t>0&&(Ce=replaceNodes(Ce,0,t,Ee));for(let Me=0;Me<Ce.length;Me++)Ce[Me].parent=Re;return Re.children=Ce,Re}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(t,n,Ee,Re,Ce,Te,Me,De,Oe){super(t,[],Ce,Te),this.node=n,this.outerDeco=Ee,this.innerDeco=Re,this.nodeDOM=Me}static create(t,n,Ee,Re,Ce,Te){let Me=Ce.nodeViews[n.type.name],De,Oe=Me&&Me(n,Ce,()=>{if(!De)return Te;if(De.parent)return De.parent.posBeforeChild(De)},Ee,Re),Be=Oe&&Oe.dom,ze=Oe&&Oe.contentDOM;if(n.isText){if(!Be)Be=document.createTextNode(n.text);else if(Be.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else Be||({dom:Be,contentDOM:ze}=DOMSerializer.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!ze&&!n.isText&&Be.nodeName!="BR"&&(Be.hasAttribute("contenteditable")||(Be.contentEditable="false"),n.type.spec.draggable&&(Be.draggable=!0));let $e=Be;return Be=applyOuterDeco(Be,Ee,n),Oe?De=new CustomNodeViewDesc(t,n,Ee,Re,Be,ze||null,$e,Oe,Ce,Te+1):n.isText?new TextViewDesc(t,n,Ee,Re,Be,$e,Ce):new NodeViewDesc(t,n,Ee,Re,Be,ze||null,$e,Ce,Te+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let Ee=this.children[n];if(this.dom.contains(Ee.dom.parentNode)){t.contentElement=Ee.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Fragment.empty)}return t}matchesNode(t,n,Ee){return this.dirty==NOT_DIRTY&&t.eq(this.node)&&sameOuterDeco(n,this.outerDeco)&&Ee.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let Ee=this.node.inlineContent,Re=n,Ce=t.composing?this.localCompositionInfo(t,n):null,Te=Ce&&Ce.pos>-1?Ce:null,Me=Ce&&Ce.pos<0,De=new ViewTreeUpdater(this,Te&&Te.node,t);iterDeco(this.node,this.innerDeco,(Oe,Be,ze)=>{Oe.spec.marks?De.syncToMarks(Oe.spec.marks,Ee,t):Oe.type.side>=0&&!ze&&De.syncToMarks(Be==this.node.childCount?Mark$1.none:this.node.child(Be).marks,Ee,t),De.placeWidget(Oe,t,Re)},(Oe,Be,ze,$e)=>{De.syncToMarks(Oe.marks,Ee,t);let He;De.findNodeMatch(Oe,Be,ze,$e)||Me&&t.state.selection.from>Re&&t.state.selection.to<Re+Oe.nodeSize&&(He=De.findIndexWithChild(Ce.node))>-1&&De.updateNodeAt(Oe,Be,ze,He,t)||De.updateNextNode(Oe,Be,ze,t,$e,Re)||De.addNode(Oe,Be,ze,t,Re),Re+=Oe.nodeSize}),De.syncToMarks([],Ee,t),this.node.isTextblock&&De.addTextblockHacks(),De.destroyRest(),(De.changed||this.dirty==CONTENT_DIRTY)&&(Te&&this.protectLocalComposition(t,Te),renderDescs(this.contentDOM,this.children,t),ios&&iosHacks(this.dom))}localCompositionInfo(t,n){let{from:Ee,to:Re}=t.state.selection;if(!(t.state.selection instanceof TextSelection)||Ee<n||Re>n+this.node.content.size)return null;let Ce=t.input.compositionNode;if(!Ce||!this.dom.contains(Ce.parentNode))return null;if(this.node.inlineContent){let Te=Ce.nodeValue,Me=findTextInFragment(this.node.content,Te,Ee-n,Re-n);return Me<0?null:{node:Ce,pos:Me,text:Te}}else return{node:Ce,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:Ee,text:Re}){if(this.getDesc(n))return;let Ce=n;for(;Ce.parentNode!=this.contentDOM;Ce=Ce.parentNode){for(;Ce.previousSibling;)Ce.parentNode.removeChild(Ce.previousSibling);for(;Ce.nextSibling;)Ce.parentNode.removeChild(Ce.nextSibling);Ce.pmViewDesc&&(Ce.pmViewDesc=void 0)}let Te=new CompositionViewDesc(this,Ce,n,Re);t.input.compositionNodes.push(Te),this.children=replaceNodes(this.children,Ee,Ee+Re.length,t,Te)}update(t,n,Ee,Re){return this.dirty==NODE_DIRTY||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,Ee,Re),!0)}updateInner(t,n,Ee,Re){this.updateOuterDeco(n),this.node=t,this.innerDeco=Ee,this.contentDOM&&this.updateChildren(Re,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(t){if(sameOuterDeco(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,Ee=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,n),computeOuterDeco(t,this.node,n)),this.dom!=Ee&&(Ee.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(e,t,n,Ee,Re){applyOuterDeco(Ee,t,e);let Ce=new NodeViewDesc(void 0,e,t,n,Ee,Ee,Ee,Re,0);return Ce.contentDOM&&Ce.updateChildren(Re,0),Ce}class TextViewDesc extends NodeViewDesc{constructor(t,n,Ee,Re,Ce,Te,Me){super(t,n,Ee,Re,Ce,null,Te,Me,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,Ee,Re){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=NOT_DIRTY||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,Re.trackWrites==this.nodeDOM&&(Re.trackWrites=null)),this.node=t,this.dirty=NOT_DIRTY,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,Ee){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,Ee)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,Ee){let Re=this.node.cut(t,n),Ce=document.createTextNode(Re.text);return new TextViewDesc(this.parent,Re,this.outerDeco,this.innerDeco,Ce,Ce,Ee)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(t){return this.node.text==t}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==NOT_DIRTY&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(t,n,Ee,Re,Ce,Te,Me,De,Oe,Be){super(t,n,Ee,Re,Ce,Te,Me,Oe,Be),this.spec=De}update(t,n,Ee,Re){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let Ce=this.spec.update(t,n,Ee);return Ce&&this.updateInner(t,n,Ee,Re),Ce}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,Ee,Re)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,Ee,Re){this.spec.setSelection?this.spec.setSelection(t,n,Ee.root):super.setSelection(t,n,Ee,Re)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function renderDescs(e,t,n){let Ee=e.firstChild,Re=!1;for(let Ce=0;Ce<t.length;Ce++){let Te=t[Ce],Me=Te.dom;if(Me.parentNode==e){for(;Me!=Ee;)Ee=rm(Ee),Re=!0;Ee=Ee.nextSibling}else Re=!0,e.insertBefore(Me,Ee);if(Te instanceof MarkViewDesc){let De=Ee?Ee.previousSibling:e.lastChild;renderDescs(Te.contentDOM,Te.children,n),Ee=De?De.nextSibling:e.firstChild}}for(;Ee;)Ee=rm(Ee),Re=!0;Re&&n.trackWrites==e&&(n.trackWrites=null)}const OuterDecoLevel=function(e){e&&(this.nodeName=e)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(e,t,n){if(e.length==0)return noDeco;let Ee=n?noDeco[0]:new OuterDecoLevel,Re=[Ee];for(let Ce=0;Ce<e.length;Ce++){let Te=e[Ce].type.attrs;if(Te){Te.nodeName&&Re.push(Ee=new OuterDecoLevel(Te.nodeName));for(let Me in Te){let De=Te[Me];De!=null&&(n&&Re.length==1&&Re.push(Ee=new OuterDecoLevel(t.isInline?"span":"div")),Me=="class"?Ee.class=(Ee.class?Ee.class+" ":"")+De:Me=="style"?Ee.style=(Ee.style?Ee.style+";":"")+De:Me!="nodeName"&&(Ee[Me]=De))}}}return Re}function patchOuterDeco(e,t,n,Ee){if(n==noDeco&&Ee==noDeco)return t;let Re=t;for(let Ce=0;Ce<Ee.length;Ce++){let Te=Ee[Ce],Me=n[Ce];if(Ce){let De;Me&&Me.nodeName==Te.nodeName&&Re!=e&&(De=Re.parentNode)&&De.nodeName.toLowerCase()==Te.nodeName||(De=document.createElement(Te.nodeName),De.pmIsDeco=!0,De.appendChild(Re),Me=noDeco[0]),Re=De}patchAttributes(Re,Me||noDeco[0],Te)}return Re}function patchAttributes(e,t,n){for(let Ee in t)Ee!="class"&&Ee!="style"&&Ee!="nodeName"&&!(Ee in n)&&e.removeAttribute(Ee);for(let Ee in n)Ee!="class"&&Ee!="style"&&Ee!="nodeName"&&n[Ee]!=t[Ee]&&e.setAttribute(Ee,n[Ee]);if(t.class!=n.class){let Ee=t.class?t.class.split(" ").filter(Boolean):[],Re=n.class?n.class.split(" ").filter(Boolean):[];for(let Ce=0;Ce<Ee.length;Ce++)Re.indexOf(Ee[Ce])==-1&&e.classList.remove(Ee[Ce]);for(let Ce=0;Ce<Re.length;Ce++)Ee.indexOf(Re[Ce])==-1&&e.classList.add(Re[Ce]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let Ee=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,Re;for(;Re=Ee.exec(t.style);)e.style.removeProperty(Re[1])}n.style&&(e.style.cssText+=n.style)}}function applyOuterDeco(e,t,n){return patchOuterDeco(e,e,noDeco,computeOuterDeco(t,n,e.nodeType!=1))}function sameOuterDeco(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function rm(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class ViewTreeUpdater{constructor(t,n,Ee){this.lock=n,this.view=Ee,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=preMatch(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let Ee=t;Ee<n;Ee++)this.top.children[Ee].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,Ee){let Re=0,Ce=this.stack.length>>1,Te=Math.min(Ce,t.length);for(;Re<Te&&(Re==Ce-1?this.top:this.stack[Re+1<<1]).matchesMark(t[Re])&&t[Re].type.spec.spanning!==!1;)Re++;for(;Re<Ce;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),Ce--;for(;Ce<t.length;){this.stack.push(this.top,this.index+1);let Me=-1;for(let De=this.index;De<Math.min(this.index+3,this.top.children.length);De++){let Oe=this.top.children[De];if(Oe.matchesMark(t[Ce])&&!this.isLocked(Oe.dom)){Me=De;break}}if(Me>-1)Me>this.index&&(this.changed=!0,this.destroyBetween(this.index,Me)),this.top=this.top.children[this.index];else{let De=MarkViewDesc.create(this.top,t[Ce],n,Ee);this.top.children.splice(this.index,0,De),this.top=De,this.changed=!0}this.index=0,Ce++}}findNodeMatch(t,n,Ee,Re){let Ce=-1,Te;if(Re>=this.preMatch.index&&(Te=this.preMatch.matches[Re-this.preMatch.index]).parent==this.top&&Te.matchesNode(t,n,Ee))Ce=this.top.children.indexOf(Te,this.index);else for(let Me=this.index,De=Math.min(this.top.children.length,Me+5);Me<De;Me++){let Oe=this.top.children[Me];if(Oe.matchesNode(t,n,Ee)&&!this.preMatch.matched.has(Oe)){Ce=Me;break}}return Ce<0?!1:(this.destroyBetween(this.index,Ce),this.index++,!0)}updateNodeAt(t,n,Ee,Re,Ce){let Te=this.top.children[Re];return Te.dirty==NODE_DIRTY&&Te.dom==Te.contentDOM&&(Te.dirty=CONTENT_DIRTY),Te.update(t,n,Ee,Ce)?(this.destroyBetween(this.index,Re),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let Ee=t.pmViewDesc;if(Ee){for(let Re=this.index;Re<this.top.children.length;Re++)if(this.top.children[Re]==Ee)return Re}return-1}t=n}}updateNextNode(t,n,Ee,Re,Ce,Te){for(let Me=this.index;Me<this.top.children.length;Me++){let De=this.top.children[Me];if(De instanceof NodeViewDesc){let Oe=this.preMatch.matched.get(De);if(Oe!=null&&Oe!=Ce)return!1;let Be=De.dom,ze,$e=this.isLocked(Be)&&!(t.isText&&De.node&&De.node.isText&&De.nodeDOM.nodeValue==t.text&&De.dirty!=NODE_DIRTY&&sameOuterDeco(n,De.outerDeco));if(!$e&&De.update(t,n,Ee,Re))return this.destroyBetween(this.index,Me),De.dom!=Be&&(this.changed=!0),this.index++,!0;if(!$e&&(ze=this.recreateWrapper(De,t,n,Ee,Re,Te)))return this.destroyBetween(this.index,Me),this.top.children[this.index]=ze,ze.contentDOM&&(ze.dirty=CONTENT_DIRTY,ze.updateChildren(Re,Te+1),ze.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,Ee,Re,Ce,Te){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!sameOuterDeco(Ee,t.outerDeco)||!Re.eq(t.innerDeco))return null;let Me=NodeViewDesc.create(this.top,n,Ee,Re,Ce,Te);if(Me.contentDOM){Me.children=t.children,t.children=[];for(let De of Me.children)De.parent=Me}return t.destroy(),Me}addNode(t,n,Ee,Re,Ce){let Te=NodeViewDesc.create(this.top,t,n,Ee,Re,Ce);Te.contentDOM&&Te.updateChildren(Re,Ce+1),this.top.children.splice(this.index++,0,Te),this.changed=!0}placeWidget(t,n,Ee){let Re=this.index<this.top.children.length?this.top.children[this.index]:null;if(Re&&Re.matchesWidget(t)&&(t==Re.widget||!Re.widget.type.toDOM.parentNode))this.index++;else{let Ce=new WidgetViewDesc(this.top,t,n,Ee);this.top.children.splice(this.index++,0,Ce),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof MarkViewDesc;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof TextViewDesc)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((safari$1||chrome)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let Ee=document.createElement(t);t=="IMG"&&(Ee.className="ProseMirror-separator",Ee.alt=""),t=="BR"&&(Ee.className="ProseMirror-trailingBreak");let Re=new TrailingHackViewDesc(this.top,[],Ee,null);n!=this.top?n.children.push(Re):n.children.splice(this.index++,0,Re),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function preMatch(e,t){let n=t,Ee=n.children.length,Re=e.childCount,Ce=new Map,Te=[];e:for(;Re>0;){let Me;for(;;)if(Ee){let Oe=n.children[Ee-1];if(Oe instanceof MarkViewDesc)n=Oe,Ee=Oe.children.length;else{Me=Oe,Ee--;break}}else{if(n==t)break e;Ee=n.parent.children.indexOf(n),n=n.parent}let De=Me.node;if(De){if(De!=e.child(Re-1))break;--Re,Ce.set(Me,Re),Te.push(Me)}}return{index:Re,matched:Ce,matches:Te.reverse()}}function compareSide(e,t){return e.type.side-t.type.side}function iterDeco(e,t,n,Ee){let Re=t.locals(e),Ce=0;if(Re.length==0){for(let Oe=0;Oe<e.childCount;Oe++){let Be=e.child(Oe);Ee(Be,Re,t.forChild(Ce,Be),Oe),Ce+=Be.nodeSize}return}let Te=0,Me=[],De=null;for(let Oe=0;;){let Be,ze;for(;Te<Re.length&&Re[Te].to==Ce;){let We=Re[Te++];We.widget&&(Be?(ze||(ze=[Be])).push(We):Be=We)}if(Be)if(ze){ze.sort(compareSide);for(let We=0;We<ze.length;We++)n(ze[We],Oe,!!De)}else n(Be,Oe,!!De);let $e,He;if(De)He=-1,$e=De,De=null;else if(Oe<e.childCount)He=Oe,$e=e.child(Oe++);else break;for(let We=0;We<Me.length;We++)Me[We].to<=Ce&&Me.splice(We--,1);for(;Te<Re.length&&Re[Te].from<=Ce&&Re[Te].to>Ce;)Me.push(Re[Te++]);let Ue=Ce+$e.nodeSize;if($e.isText){let We=Ue;Te<Re.length&&Re[Te].from<We&&(We=Re[Te].from);for(let qe=0;qe<Me.length;qe++)Me[qe].to<We&&(We=Me[qe].to);We<Ue&&(De=$e.cut(We-Ce),$e=$e.cut(0,We-Ce),Ue=We,He=-1)}else for(;Te<Re.length&&Re[Te].to<Ue;)Te++;let Ve=$e.isInline&&!$e.isLeaf?Me.filter(We=>!We.inline):Me.slice();Ee($e,Ve,t.forChild(Ce,$e),He),Ce=Ue}}function iosHacks(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function findTextInFragment(e,t,n,Ee){for(let Re=0,Ce=0;Re<e.childCount&&Ce<=Ee;){let Te=e.child(Re++),Me=Ce;if(Ce+=Te.nodeSize,!Te.isText)continue;let De=Te.text;for(;Re<e.childCount;){let Oe=e.child(Re++);if(Ce+=Oe.nodeSize,!Oe.isText)break;De+=Oe.text}if(Ce>=n){if(Ce>=Ee&&De.slice(Ee-t.length-Me,Ee-Me)==t)return Ee-t.length;let Oe=Me<Ee?De.lastIndexOf(t,Ee-Me-1):-1;if(Oe>=0&&Oe+t.length+Me>=n)return Me+Oe;if(n==Ee&&De.length>=Ee+t.length-Me&&De.slice(Ee-Me,Ee-Me+t.length)==t)return Ee}}return-1}function replaceNodes(e,t,n,Ee,Re){let Ce=[];for(let Te=0,Me=0;Te<e.length;Te++){let De=e[Te],Oe=Me,Be=Me+=De.size;Oe>=n||Be<=t?Ce.push(De):(Oe<t&&Ce.push(De.slice(0,t-Oe,Ee)),Re&&(Ce.push(Re),Re=void 0),Be>n&&Ce.push(De.slice(n-Oe,De.size,Ee)))}return Ce}function selectionFromDOM(e,t=null){let n=e.domSelectionRange(),Ee=e.state.doc;if(!n.focusNode)return null;let Re=e.docView.nearestDesc(n.focusNode),Ce=Re&&Re.size==0,Te=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(Te<0)return null;let Me=Ee.resolve(Te),De,Oe;if(selectionCollapsed(n)){for(De=Te;Re&&!Re.node;)Re=Re.parent;let ze=Re.node;if(Re&&ze.isAtom&&NodeSelection.isSelectable(ze)&&Re.parent&&!(ze.isInline&&isOnEdge(n.focusNode,n.focusOffset,Re.dom))){let $e=Re.posBefore;Oe=new NodeSelection(Te==$e?Me:Ee.resolve($e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let ze=Te,$e=Te;for(let He=0;He<n.rangeCount;He++){let Ue=n.getRangeAt(He);ze=Math.min(ze,e.docView.posFromDOM(Ue.startContainer,Ue.startOffset,1)),$e=Math.max($e,e.docView.posFromDOM(Ue.endContainer,Ue.endOffset,-1))}if(ze<0)return null;[De,Te]=$e==e.state.selection.anchor?[$e,ze]:[ze,$e],Me=Ee.resolve(Te)}else De=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(De<0)return null}let Be=Ee.resolve(De);if(!Oe){let ze=t=="pointer"||e.state.selection.head<Me.pos&&!Ce?1:-1;Oe=selectionBetween(e,Be,Me,ze)}return Oe}function editorOwnsSelection(e){return e.editable?e.hasFocus():hasSelection(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function selectionToDOM(e,t=!1){let n=e.state.selection;if(syncNodeSelection(e,n),!!editorOwnsSelection(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&chrome){let Ee=e.domSelectionRange(),Re=e.domObserver.currentSelection;if(Ee.anchorNode&&Re.anchorNode&&isEquivalentPosition(Ee.anchorNode,Ee.anchorOffset,Re.anchorNode,Re.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)selectCursorWrapper(e);else{let{anchor:Ee,head:Re}=n,Ce,Te;brokenSelectBetweenUneditable&&!(n instanceof TextSelection)&&(n.$from.parent.inlineContent||(Ce=temporarilyEditableNear(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(Te=temporarilyEditableNear(e,n.to))),e.docView.setSelection(Ee,Re,e,t),brokenSelectBetweenUneditable&&(Ce&&resetEditable(Ce),Te&&resetEditable(Te)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari$1||chrome&&chrome_version<63;function temporarilyEditableNear(e,t){let{node:n,offset:Ee}=e.docView.domFromPos(t,0),Re=Ee<n.childNodes.length?n.childNodes[Ee]:null,Ce=Ee?n.childNodes[Ee-1]:null;if(safari$1&&Re&&Re.contentEditable=="false")return setEditable(Re);if((!Re||Re.contentEditable=="false")&&(!Ce||Ce.contentEditable=="false")){if(Re)return setEditable(Re);if(Ce)return setEditable(Ce)}}function setEditable(e){return e.contentEditable="true",safari$1&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function resetEditable(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function removeClassOnSelectionChange(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),Ee=n.anchorNode,Re=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=Ee||n.anchorOffset!=Re)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,Ee=n.nodeName=="IMG";Ee?t.collapse(n.parentNode,domIndex(n)+1):t.collapse(n,0),!Ee&&!e.state.selection.visible&&ie$1&&ie_version<=11&&(n.disabled=!0,n.disabled=!1)}function syncNodeSelection(e,t){if(t instanceof NodeSelection){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(clearNodeSelection(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else clearNodeSelection(e)}function clearNodeSelection(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function selectionBetween(e,t,n,Ee){return e.someProp("createSelectionBetween",Re=>Re(e,t,n))||TextSelection.between(t,n,Ee)}function hasFocusAndSelection(e){return e.editable&&!e.hasFocus()?!1:hasSelection(e)}function hasSelection(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function anchorInRightPlace(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return isEquivalentPosition(t.node,t.offset,n.anchorNode,n.anchorOffset)}function moveSelectionBlock(e,t){let{$anchor:n,$head:Ee}=e.selection,Re=t>0?n.max(Ee):n.min(Ee),Ce=Re.parent.inlineContent?Re.depth?e.doc.resolve(t>0?Re.after():Re.before()):null:Re;return Ce&&Selection.findFrom(Ce,t)}function apply(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function selectHorizontally(e,t,n){let Ee=e.state.selection;if(Ee instanceof TextSelection)if(n.indexOf("s")>-1){let{$head:Re}=Ee,Ce=Re.textOffset?null:t<0?Re.nodeBefore:Re.nodeAfter;if(!Ce||Ce.isText||!Ce.isLeaf)return!1;let Te=e.state.doc.resolve(Re.pos+Ce.nodeSize*(t<0?-1:1));return apply(e,new TextSelection(Ee.$anchor,Te))}else if(Ee.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let Re=moveSelectionBlock(e.state,t);return Re&&Re instanceof NodeSelection?apply(e,Re):!1}else if(!(mac$2&&n.indexOf("m")>-1)){let Re=Ee.$head,Ce=Re.textOffset?null:t<0?Re.nodeBefore:Re.nodeAfter,Te;if(!Ce||Ce.isText)return!1;let Me=t<0?Re.pos-Ce.nodeSize:Re.pos;return Ce.isAtom||(Te=e.docView.descAt(Me))&&!Te.contentDOM?NodeSelection.isSelectable(Ce)?apply(e,new NodeSelection(t<0?e.state.doc.resolve(Re.pos-Ce.nodeSize):Re)):webkit?apply(e,new TextSelection(e.state.doc.resolve(t<0?Me:Me+Ce.nodeSize))):!1:!1}}else return!1;else{if(Ee instanceof NodeSelection&&Ee.node.isInline)return apply(e,new TextSelection(t>0?Ee.$to:Ee.$from));{let Re=moveSelectionBlock(e.state,t);return Re?apply(e,Re):!1}}}function nodeLen(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function isIgnorable(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function skipIgnoredNodes(e,t){return t<0?skipIgnoredNodesBefore(e):skipIgnoredNodesAfter(e)}function skipIgnoredNodesBefore(e){let t=e.domSelectionRange(),n=t.focusNode,Ee=t.focusOffset;if(!n)return;let Re,Ce,Te=!1;for(gecko&&n.nodeType==1&&Ee<nodeLen(n)&&isIgnorable(n.childNodes[Ee],-1)&&(Te=!0);;)if(Ee>0){if(n.nodeType!=1)break;{let Me=n.childNodes[Ee-1];if(isIgnorable(Me,-1))Re=n,Ce=--Ee;else if(Me.nodeType==3)n=Me,Ee=n.nodeValue.length;else break}}else{if(isBlockNode(n))break;{let Me=n.previousSibling;for(;Me&&isIgnorable(Me,-1);)Re=n.parentNode,Ce=domIndex(Me),Me=Me.previousSibling;if(Me)n=Me,Ee=nodeLen(n);else{if(n=n.parentNode,n==e.dom)break;Ee=0}}}Te?setSelFocus(e,n,Ee):Re&&setSelFocus(e,Re,Ce)}function skipIgnoredNodesAfter(e){let t=e.domSelectionRange(),n=t.focusNode,Ee=t.focusOffset;if(!n)return;let Re=nodeLen(n),Ce,Te;for(;;)if(Ee<Re){if(n.nodeType!=1)break;let Me=n.childNodes[Ee];if(isIgnorable(Me,1))Ce=n,Te=++Ee;else break}else{if(isBlockNode(n))break;{let Me=n.nextSibling;for(;Me&&isIgnorable(Me,1);)Ce=Me.parentNode,Te=domIndex(Me)+1,Me=Me.nextSibling;if(Me)n=Me,Ee=0,Re=nodeLen(n);else{if(n=n.parentNode,n==e.dom)break;Ee=Re=0}}}Ce&&setSelFocus(e,Ce,Te)}function isBlockNode(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function textNodeAfter(e,t){for(;e&&t==e.childNodes.length&&!hasBlockDesc(e);)t=domIndex(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function textNodeBefore(e,t){for(;e&&!t&&!hasBlockDesc(e);)t=domIndex(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function setSelFocus(e,t,n){if(t.nodeType!=3){let Ce,Te;(Te=textNodeAfter(t,n))?(t=Te,n=0):(Ce=textNodeBefore(t,n))&&(t=Ce,n=Ce.nodeValue.length)}let Ee=e.domSelection();if(!Ee)return;if(selectionCollapsed(Ee)){let Ce=document.createRange();Ce.setEnd(t,n),Ce.setStart(t,n),Ee.removeAllRanges(),Ee.addRange(Ce)}else Ee.extend&&Ee.extend(t,n);e.domObserver.setCurSelection();let{state:Re}=e;setTimeout(()=>{e.state==Re&&selectionToDOM(e)},50)}function findDirection(e,t){let n=e.state.doc.resolve(t);if(!(chrome||windows$1)&&n.parent.inlineContent){let Re=e.coordsAtPos(t);if(t>n.start()){let Ce=e.coordsAtPos(t-1),Te=(Ce.top+Ce.bottom)/2;if(Te>Re.top&&Te<Re.bottom&&Math.abs(Ce.left-Re.left)>1)return Ce.left<Re.left?"ltr":"rtl"}if(t<n.end()){let Ce=e.coordsAtPos(t+1),Te=(Ce.top+Ce.bottom)/2;if(Te>Re.top&&Te<Re.bottom&&Math.abs(Ce.left-Re.left)>1)return Ce.left>Re.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(e,t,n){let Ee=e.state.selection;if(Ee instanceof TextSelection&&!Ee.empty||n.indexOf("s")>-1||mac$2&&n.indexOf("m")>-1)return!1;let{$from:Re,$to:Ce}=Ee;if(!Re.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let Te=moveSelectionBlock(e.state,t);if(Te&&Te instanceof NodeSelection)return apply(e,Te)}if(!Re.parent.inlineContent){let Te=t<0?Re:Ce,Me=Ee instanceof AllSelection?Selection.near(Te,t):Selection.findFrom(Te,t);return Me?apply(e,Me):!1}return!1}function stopNativeHorizontalDelete(e,t){if(!(e.state.selection instanceof TextSelection))return!0;let{$head:n,$anchor:Ee,empty:Re}=e.state.selection;if(!n.sameParent(Ee))return!0;if(!Re)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let Ce=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(Ce&&!Ce.isText){let Te=e.state.tr;return t<0?Te.delete(n.pos-Ce.nodeSize,n.pos):Te.delete(n.pos,n.pos+Ce.nodeSize),e.dispatch(Te),!0}return!1}function switchEditable(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function safariDownArrowBug(e){if(!safari$1||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let Ee=t.firstChild;switchEditable(e,Ee,"true"),setTimeout(()=>switchEditable(e,Ee,"false"),20)}return!1}function getMods(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function captureKeyDown(e,t){let n=t.keyCode,Ee=getMods(t);if(n==8||mac$2&&n==72&&Ee=="c")return stopNativeHorizontalDelete(e,-1)||skipIgnoredNodes(e,-1);if(n==46&&!t.shiftKey||mac$2&&n==68&&Ee=="c")return stopNativeHorizontalDelete(e,1)||skipIgnoredNodes(e,1);if(n==13||n==27)return!0;if(n==37||mac$2&&n==66&&Ee=="c"){let Re=n==37?findDirection(e,e.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(e,Re,Ee)||skipIgnoredNodes(e,Re)}else if(n==39||mac$2&&n==70&&Ee=="c"){let Re=n==39?findDirection(e,e.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(e,Re,Ee)||skipIgnoredNodes(e,Re)}else{if(n==38||mac$2&&n==80&&Ee=="c")return selectVertically(e,-1,Ee)||skipIgnoredNodes(e,-1);if(n==40||mac$2&&n==78&&Ee=="c")return safariDownArrowBug(e)||selectVertically(e,1,Ee)||skipIgnoredNodes(e,1);if(Ee==(mac$2?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function serializeForClipboard(e,t){e.someProp("transformCopied",He=>{t=He(t,e)});let n=[],{content:Ee,openStart:Re,openEnd:Ce}=t;for(;Re>1&&Ce>1&&Ee.childCount==1&&Ee.firstChild.childCount==1;){Re--,Ce--;let He=Ee.firstChild;n.push(He.type.name,He.attrs!=He.type.defaultAttrs?He.attrs:null),Ee=He.content}let Te=e.someProp("clipboardSerializer")||DOMSerializer.fromSchema(e.state.schema),Me=detachedDoc(),De=Me.createElement("div");De.appendChild(Te.serializeFragment(Ee,{document:Me}));let Oe=De.firstChild,Be,ze=0;for(;Oe&&Oe.nodeType==1&&(Be=wrapMap[Oe.nodeName.toLowerCase()]);){for(let He=Be.length-1;He>=0;He--){let Ue=Me.createElement(Be[He]);for(;De.firstChild;)Ue.appendChild(De.firstChild);De.appendChild(Ue),ze++}Oe=De.firstChild}Oe&&Oe.nodeType==1&&Oe.setAttribute("data-pm-slice",`${Re} ${Ce}${ze?` -${ze}`:""} ${JSON.stringify(n)}`);let $e=e.someProp("clipboardTextSerializer",He=>He(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:De,text:$e,slice:t}}function parseFromClipboard(e,t,n,Ee,Re){let Ce=Re.parent.type.spec.code,Te,Me;if(!n&&!t)return null;let De=!!t&&(Ee||Ce||!n);if(De){if(e.someProp("transformPastedText",$e=>{t=$e(t,Ce||Ee,e)}),Ce)return Me=new Slice(Fragment.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",$e=>{Me=$e(Me,e,!0)}),Me;let ze=e.someProp("clipboardTextParser",$e=>$e(t,Re,Ee,e));if(ze)Me=ze;else{let $e=Re.marks(),{schema:He}=e.state,Ue=DOMSerializer.fromSchema(He);Te=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(Ve=>{let We=Te.appendChild(document.createElement("p"));Ve&&We.appendChild(Ue.serializeNode(He.text(Ve,$e)))})}}else e.someProp("transformPastedHTML",ze=>{n=ze(n,e)}),Te=readHTML(n),webkit&&restoreReplacedSpaces(Te);let Oe=Te&&Te.querySelector("[data-pm-slice]"),Be=Oe&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(Oe.getAttribute("data-pm-slice")||"");if(Be&&Be[3])for(let ze=+Be[3];ze>0;ze--){let $e=Te.firstChild;for(;$e&&$e.nodeType!=1;)$e=$e.nextSibling;if(!$e)break;Te=$e}if(Me||(Me=(e.someProp("clipboardParser")||e.someProp("domParser")||DOMParser.fromSchema(e.state.schema)).parseSlice(Te,{preserveWhitespace:!!(De||Be),context:Re,ruleFromNode($e){return $e.nodeName=="BR"&&!$e.nextSibling&&$e.parentNode&&!inlineParents.test($e.parentNode.nodeName)?{ignore:!0}:null}})),Be)Me=addContext(closeSlice(Me,+Be[1],+Be[2]),Be[4]);else if(Me=Slice.maxOpen(normalizeSiblings(Me.content,Re),!0),Me.openStart||Me.openEnd){let ze=0,$e=0;for(let He=Me.content.firstChild;ze<Me.openStart&&!He.type.spec.isolating;ze++,He=He.firstChild);for(let He=Me.content.lastChild;$e<Me.openEnd&&!He.type.spec.isolating;$e++,He=He.lastChild);Me=closeSlice(Me,ze,$e)}return e.someProp("transformPasted",ze=>{Me=ze(Me,e,De)}),Me}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let Re=t.node(n).contentMatchAt(t.index(n)),Ce,Te=[];if(e.forEach(Me=>{if(!Te)return;let De=Re.findWrapping(Me.type),Oe;if(!De)return Te=null;if(Oe=Te.length&&Ce.length&&addToSibling(De,Ce,Me,Te[Te.length-1],0))Te[Te.length-1]=Oe;else{Te.length&&(Te[Te.length-1]=closeRight(Te[Te.length-1],Ce.length));let Be=withWrappers(Me,De);Te.push(Be),Re=Re.matchType(Be.type),Ce=De}}),Te)return Fragment.from(Te)}return e}function withWrappers(e,t,n=0){for(let Ee=t.length-1;Ee>=n;Ee--)e=t[Ee].create(null,Fragment.from(e));return e}function addToSibling(e,t,n,Ee,Re){if(Re<e.length&&Re<t.length&&e[Re]==t[Re]){let Ce=addToSibling(e,t,n,Ee.lastChild,Re+1);if(Ce)return Ee.copy(Ee.content.replaceChild(Ee.childCount-1,Ce));if(Ee.contentMatchAt(Ee.childCount).matchType(Re==e.length-1?n.type:e[Re+1]))return Ee.copy(Ee.content.append(Fragment.from(withWrappers(n,e,Re+1))))}}function closeRight(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,closeRight(e.lastChild,t-1)),Ee=e.contentMatchAt(e.childCount).fillBefore(Fragment.empty,!0);return e.copy(n.append(Ee))}function closeRange(e,t,n,Ee,Re,Ce){let Te=t<0?e.firstChild:e.lastChild,Me=Te.content;return e.childCount>1&&(Ce=0),Re<Ee-1&&(Me=closeRange(Me,t,n,Ee,Re+1,Ce)),Re>=n&&(Me=t<0?Te.contentMatchAt(0).fillBefore(Me,Ce<=Re).append(Me):Me.append(Te.contentMatchAt(Te.childCount).fillBefore(Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,Te.copy(Me))}function closeSlice(e,t,n){return t<e.openStart&&(e=new Slice(closeRange(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Slice(closeRange(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(e){let t=window.trustedTypes;return t?(_policy||(_policy=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),_policy.createHTML(e)):e}function readHTML(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=detachedDoc().createElement("div"),Ee=/<([a-z][^>\s]+)/i.exec(e),Re;if((Re=Ee&&wrapMap[Ee[1].toLowerCase()])&&(e=Re.map(Ce=>"<"+Ce+">").join("")+e+Re.map(Ce=>"</"+Ce+">").reverse().join("")),n.innerHTML=maybeWrapTrusted(e),Re)for(let Ce=0;Ce<Re.length;Ce++)n=n.querySelector(Re[Ce])||n;return n}function restoreReplacedSpaces(e){let t=e.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let Ee=t[n];Ee.childNodes.length==1&&Ee.textContent==""&&Ee.parentNode&&Ee.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),Ee)}}function addContext(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,Ee;try{Ee=JSON.parse(t)}catch{return e}let{content:Re,openStart:Ce,openEnd:Te}=e;for(let Me=Ee.length-2;Me>=0;Me-=2){let De=n.nodes[Ee[Me]];if(!De||De.hasRequiredAttrs())break;Re=Fragment.from(De.create(Ee[Me+1],Re)),Ce++,Te++}return new Slice(Re,Ce,Te)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(e){for(let t in handlers){let n=handlers[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=Ee=>{eventBelongsToView(e,Ee)&&!runCustomHandler(e,Ee)&&(e.editable||!(Ee.type in editHandlers))&&n(e,Ee)},passiveHandlers[t]?{passive:!0}:void 0)}safari$1&&e.dom.addEventListener("input",()=>null),ensureListeners(e)}function setSelectionOrigin(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function destroyInput(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function ensureListeners(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=Ee=>runCustomHandler(e,Ee))})}function runCustomHandler(e,t){return e.someProp("handleDOMEvents",n=>{let Ee=n[t.type];return Ee?Ee(e,t)||t.defaultPrevented:!1})}function eventBelongsToView(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function dispatchEvent(e,t){!runCustomHandler(e,t)&&handlers[t.type]&&(e.editable||!(t.type in editHandlers))&&handlers[t.type](e,t)}editHandlers.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!inOrNearComposition(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),ios&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let Ee=Date.now();e.input.lastIOSEnter=Ee,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==Ee&&(e.someProp("handleKeyDown",Re=>Re(e,keyEvent(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",Ee=>Ee(e,n))||captureKeyDown(e,n)?n.preventDefault():setSelectionOrigin(e,"key")};editHandlers.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};editHandlers.keypress=(e,t)=>{let n=t;if(inOrNearComposition(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||mac$2&&n.metaKey)return;if(e.someProp("handleKeyPress",Re=>Re(e,n))){n.preventDefault();return}let Ee=e.state.selection;if(!(Ee instanceof TextSelection)||!Ee.$from.sameParent(Ee.$to)){let Re=String.fromCharCode(n.charCode),Ce=()=>e.state.tr.insertText(Re).scrollIntoView();!/[\r\n]/.test(Re)&&!e.someProp("handleTextInput",Te=>Te(e,Ee.$from.pos,Ee.$to.pos,Re,Ce))&&e.dispatch(Ce()),n.preventDefault()}};function eventCoords(e){return{left:e.clientX,top:e.clientY}}function isNear(e,t){let n=t.x-e.clientX,Ee=t.y-e.clientY;return n*n+Ee*Ee<100}function runHandlerOnContext(e,t,n,Ee,Re){if(Ee==-1)return!1;let Ce=e.state.doc.resolve(Ee);for(let Te=Ce.depth+1;Te>0;Te--)if(e.someProp(t,Me=>Te>Ce.depth?Me(e,n,Ce.nodeAfter,Ce.before(Te),Re,!0):Me(e,n,Ce.node(Te),Ce.before(Te),Re,!1)))return!0;return!1}function updateSelection(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let Ee=e.state.tr.setSelection(t);Ee.setMeta("pointer",!0),e.dispatch(Ee)}function selectClickedLeaf(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),Ee=n.nodeAfter;return Ee&&Ee.isAtom&&NodeSelection.isSelectable(Ee)?(updateSelection(e,new NodeSelection(n)),!0):!1}function selectClickedNode(e,t){if(t==-1)return!1;let n=e.state.selection,Ee,Re;n instanceof NodeSelection&&(Ee=n.node);let Ce=e.state.doc.resolve(t);for(let Te=Ce.depth+1;Te>0;Te--){let Me=Te>Ce.depth?Ce.nodeAfter:Ce.node(Te);if(NodeSelection.isSelectable(Me)){Ee&&n.$from.depth>0&&Te>=n.$from.depth&&Ce.before(n.$from.depth+1)==n.$from.pos?Re=Ce.before(n.$from.depth):Re=Ce.before(Te);break}}return Re!=null?(updateSelection(e,NodeSelection.create(e.state.doc,Re)),!0):!1}function handleSingleClick(e,t,n,Ee,Re){return runHandlerOnContext(e,"handleClickOn",t,n,Ee)||e.someProp("handleClick",Ce=>Ce(e,t,Ee))||(Re?selectClickedNode(e,n):selectClickedLeaf(e,n))}function handleDoubleClick(e,t,n,Ee){return runHandlerOnContext(e,"handleDoubleClickOn",t,n,Ee)||e.someProp("handleDoubleClick",Re=>Re(e,t,Ee))}function handleTripleClick(e,t,n,Ee){return runHandlerOnContext(e,"handleTripleClickOn",t,n,Ee)||e.someProp("handleTripleClick",Re=>Re(e,t,Ee))||defaultTripleClick(e,n,Ee)}function defaultTripleClick(e,t,n){if(n.button!=0)return!1;let Ee=e.state.doc;if(t==-1)return Ee.inlineContent?(updateSelection(e,TextSelection.create(Ee,0,Ee.content.size)),!0):!1;let Re=Ee.resolve(t);for(let Ce=Re.depth+1;Ce>0;Ce--){let Te=Ce>Re.depth?Re.nodeAfter:Re.node(Ce),Me=Re.before(Ce);if(Te.inlineContent)updateSelection(e,TextSelection.create(Ee,Me+1,Me+1+Te.content.size));else if(NodeSelection.isSelectable(Te))updateSelection(e,NodeSelection.create(Ee,Me));else continue;return!0}}function forceDOMFlush(e){return endComposition(e)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let Ee=forceDOMFlush(e),Re=Date.now(),Ce="singleClick";Re-e.input.lastClick.time<500&&isNear(n,e.input.lastClick)&&!n[selectNodeModifier]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?Ce="doubleClick":e.input.lastClick.type=="doubleClick"&&(Ce="tripleClick")),e.input.lastClick={time:Re,x:n.clientX,y:n.clientY,type:Ce,button:n.button};let Te=e.posAtCoords(eventCoords(n));Te&&(Ce=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new MouseDown(e,Te,n,!!Ee)):(Ce=="doubleClick"?handleDoubleClick:handleTripleClick)(e,Te.pos,Te.inside,n)?n.preventDefault():setSelectionOrigin(e,"pointer"))};class MouseDown{constructor(t,n,Ee,Re){this.view=t,this.pos=n,this.event=Ee,this.flushed=Re,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!Ee[selectNodeModifier],this.allowDefault=Ee.shiftKey;let Ce,Te;if(n.inside>-1)Ce=t.state.doc.nodeAt(n.inside),Te=n.inside;else{let Be=t.state.doc.resolve(n.pos);Ce=Be.parent,Te=Be.depth?Be.before():0}const Me=Re?null:Ee.target,De=Me?t.docView.nearestDesc(Me,!0):null;this.target=De&&De.nodeDOM.nodeType==1?De.nodeDOM:null;let{selection:Oe}=t.state;(Ee.button==0&&Ce.type.spec.draggable&&Ce.type.spec.selectable!==!1||Oe instanceof NodeSelection&&Oe.from<=Te&&Oe.to>Te)&&(this.mightDrag={node:Ce,pos:Te,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(eventCoords(t))),this.updateAllowDefault(t),this.allowDefault||!n?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||safari$1&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(t){this.updateAllowDefault(t),setSelectionOrigin(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=e=>{e.input.lastTouch=Date.now(),forceDOMFlush(e),setSelectionOrigin(e,"pointer")};handlers.touchmove=e=>{e.input.lastTouch=Date.now(),setSelectionOrigin(e,"pointer")};handlers.contextmenu=e=>forceDOMFlush(e);function inOrNearComposition(e,t){return e.composing?!0:safari$1&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof TextSelection&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(Ee=>Ee.type.spec.inclusive===!1)||chrome&&windows$1&&selectionBeforeUneditable(e)))e.markCursor=e.state.storedMarks||n.marks(),endComposition(e,!0),e.markCursor=null;else if(endComposition(e,!t.selection.empty),gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let Ee=e.domSelectionRange();for(let Re=Ee.focusNode,Ce=Ee.focusOffset;Re&&Re.nodeType==1&&Ce!=0;){let Te=Ce<0?Re.lastChild:Re.childNodes[Ce-1];if(!Te)break;if(Te.nodeType==3){let Me=e.domSelection();Me&&Me.collapse(Te,Te.nodeValue.length);break}else Re=Te,Ce=-1}}e.input.composing=!0}scheduleComposeEnd(e,timeoutComposition)};function selectionBeforeUneditable(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let Ee=t.childNodes[n];return Ee.nodeType==1&&Ee.contentEditable=="false"}editHandlers.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,scheduleComposeEnd(e,20))};function scheduleComposeEnd(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>endComposition(e),t))}function clearComposition(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=timestampFromCustomEvent());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=textNodeBefore$1(t.focusNode,t.focusOffset),Ee=textNodeAfter$1(t.focusNode,t.focusOffset);if(n&&Ee&&n!=Ee){let Re=Ee.pmViewDesc,Ce=e.domObserver.lastChangedTextNode;if(n==Ce||Ee==Ce)return Ce;if(!Re||!Re.isText(Ee.nodeValue))return Ee;if(e.input.compositionNode==Ee){let Te=n.pmViewDesc;if(!(!Te||!Te.isText(n.nodeValue)))return Ee}}return n||Ee}function timestampFromCustomEvent(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function endComposition(e,t=!1){if(!(android&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),clearComposition(e),t||e.docView&&e.docView.dirty){let n=selectionFromDOM(e),Ee=e.state.selection;return n&&!n.eq(Ee)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!Ee.$from.node(Ee.$from.sharedDepth(Ee.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function captureCopy(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let Ee=getSelection(),Re=document.createRange();Re.selectNodeContents(t),e.dom.blur(),Ee.removeAllRanges(),Ee.addRange(Re),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(e,t)=>{let n=t,Ee=e.state.selection,Re=n.type=="cut";if(Ee.empty)return;let Ce=brokenClipboardAPI?null:n.clipboardData,Te=Ee.content(),{dom:Me,text:De}=serializeForClipboard(e,Te);Ce?(n.preventDefault(),Ce.clearData(),Ce.setData("text/html",Me.innerHTML),Ce.setData("text/plain",De)):captureCopy(e,Me),Re&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function capturePaste(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,Ee=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(Ee.contentEditable="true"),Ee.style.cssText="position: fixed; left: -10000px; top: 10px",Ee.focus();let Re=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),Ee.parentNode&&Ee.parentNode.removeChild(Ee),n?doPaste(e,Ee.value,null,Re,t):doPaste(e,Ee.textContent,Ee.innerHTML,Re,t)},50)}function doPaste(e,t,n,Ee,Re){let Ce=parseFromClipboard(e,t,n,Ee,e.state.selection.$from);if(e.someProp("handlePaste",De=>De(e,Re,Ce||Slice.empty)))return!0;if(!Ce)return!1;let Te=sliceSingleNode(Ce),Me=Te?e.state.tr.replaceSelectionWith(Te,Ee):e.state.tr.replaceSelection(Ce);return e.dispatch(Me.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}editHandlers.paste=(e,t)=>{let n=t;if(e.composing&&!android)return;let Ee=brokenClipboardAPI?null:n.clipboardData,Re=e.input.shiftKey&&e.input.lastKeyCode!=45;Ee&&doPaste(e,getText$1(Ee),Ee.getData("text/html"),Re,n)?n.preventDefault():capturePaste(e,n)};class Dragging{constructor(t,n,Ee){this.slice=t,this.move=n,this.node=Ee}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";function dragMoves(e,t){let n=e.someProp("dragCopies",Ee=>!Ee(t));return n??!t[dragCopyModifier]}handlers.dragstart=(e,t)=>{let n=t,Ee=e.input.mouseDown;if(Ee&&Ee.done(),!n.dataTransfer)return;let Re=e.state.selection,Ce=Re.empty?null:e.posAtCoords(eventCoords(n)),Te;if(!(Ce&&Ce.pos>=Re.from&&Ce.pos<=(Re instanceof NodeSelection?Re.to-1:Re.to))){if(Ee&&Ee.mightDrag)Te=NodeSelection.create(e.state.doc,Ee.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let ze=e.docView.nearestDesc(n.target,!0);ze&&ze.node.type.spec.draggable&&ze!=e.docView&&(Te=NodeSelection.create(e.state.doc,ze.posBefore))}}let Me=(Te||e.state.selection).content(),{dom:De,text:Oe,slice:Be}=serializeForClipboard(e,Me);(!n.dataTransfer.files.length||!chrome||chrome_version>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",De.innerHTML),n.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||n.dataTransfer.setData("text/plain",Oe),e.dragging=new Dragging(Be,dragMoves(e,n),Te)};handlers.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(e,t)=>t.preventDefault();editHandlers.drop=(e,t)=>{try{handleDrop(e,t,e.dragging)}finally{e.dragging=null}};function handleDrop(e,t,n){if(!t.dataTransfer)return;let Ee=e.posAtCoords(eventCoords(t));if(!Ee)return;let Re=e.state.doc.resolve(Ee.pos),Ce=n&&n.slice;Ce?e.someProp("transformPasted",He=>{Ce=He(Ce,e,!1)}):Ce=parseFromClipboard(e,getText$1(t.dataTransfer),brokenClipboardAPI?null:t.dataTransfer.getData("text/html"),!1,Re);let Te=!!(n&&dragMoves(e,t));if(e.someProp("handleDrop",He=>He(e,t,Ce||Slice.empty,Te))){t.preventDefault();return}if(!Ce)return;t.preventDefault();let Me=Ce?dropPoint(e.state.doc,Re.pos,Ce):Re.pos;Me==null&&(Me=Re.pos);let De=e.state.tr;if(Te){let{node:He}=n;He?He.replace(De):De.deleteSelection()}let Oe=De.mapping.map(Me),Be=Ce.openStart==0&&Ce.openEnd==0&&Ce.content.childCount==1,ze=De.doc;if(Be?De.replaceRangeWith(Oe,Oe,Ce.content.firstChild):De.replaceRange(Oe,Oe,Ce),De.doc.eq(ze))return;let $e=De.doc.resolve(Oe);if(Be&&NodeSelection.isSelectable(Ce.content.firstChild)&&$e.nodeAfter&&$e.nodeAfter.sameMarkup(Ce.content.firstChild))De.setSelection(new NodeSelection($e));else{let He=De.mapping.map(Me);De.mapping.maps[De.mapping.maps.length-1].forEach((Ue,Ve,We,qe)=>He=qe),De.setSelection(selectionBetween(e,$e,De.doc.resolve(He)))}e.focus(),e.dispatch(De.setMeta("uiEvent","drop"))}handlers.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&selectionToDOM(e)},20))};handlers.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};handlers.beforeinput=(e,t)=>{if(chrome&&android&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:Ee}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=Ee||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",Ce=>Ce(e,keyEvent(8,"Backspace")))))return;let{$cursor:Re}=e.state.selection;Re&&Re.pos>0&&e.dispatch(e.state.tr.delete(Re.pos-1,Re.pos).scrollIntoView())},50)}};for(let e in editHandlers)handlers[e]=editHandlers[e];function compareObjs(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class WidgetType{constructor(t,n){this.toDOM=t,this.spec=n||noSpec,this.side=this.spec.side||0}map(t,n,Ee,Re){let{pos:Ce,deleted:Te}=t.mapResult(n.from+Re,this.side<0?-1:1);return Te?null:new Decoration(Ce-Ee,Ce-Ee,this)}valid(){return!0}eq(t){return this==t||t instanceof WidgetType&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&compareObjs(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class InlineType{constructor(t,n){this.attrs=t,this.spec=n||noSpec}map(t,n,Ee,Re){let Ce=t.map(n.from+Re,this.spec.inclusiveStart?-1:1)-Ee,Te=t.map(n.to+Re,this.spec.inclusiveEnd?1:-1)-Ee;return Ce>=Te?null:new Decoration(Ce,Te,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof InlineType&&compareObjs(this.attrs,t.attrs)&&compareObjs(this.spec,t.spec)}static is(t){return t.type instanceof InlineType}destroy(){}}class NodeType{constructor(t,n){this.attrs=t,this.spec=n||noSpec}map(t,n,Ee,Re){let Ce=t.mapResult(n.from+Re,1);if(Ce.deleted)return null;let Te=t.mapResult(n.to+Re,-1);return Te.deleted||Te.pos<=Ce.pos?null:new Decoration(Ce.pos-Ee,Te.pos-Ee,this)}valid(t,n){let{index:Ee,offset:Re}=t.content.findIndex(n.from),Ce;return Re==n.from&&!(Ce=t.child(Ee)).isText&&Re+Ce.nodeSize==n.to}eq(t){return this==t||t instanceof NodeType&&compareObjs(this.attrs,t.attrs)&&compareObjs(this.spec,t.spec)}destroy(){}}class Decoration{constructor(t,n,Ee){this.from=t,this.to=n,this.type=Ee}copy(t,n){return new Decoration(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,Ee){return this.type.map(t,this,n,Ee)}static widget(t,n,Ee){return new Decoration(t,t,new WidgetType(n,Ee))}static inline(t,n,Ee,Re){return new Decoration(t,n,new InlineType(Ee,Re))}static node(t,n,Ee,Re){return new Decoration(t,n,new NodeType(Ee,Re))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(t,n){this.local=t.length?t:none,this.children=n.length?n:none}static create(t,n){return n.length?buildTree(n,t,0,noSpec):empty}find(t,n,Ee){let Re=[];return this.findInner(t??0,n??1e9,Re,0,Ee),Re}findInner(t,n,Ee,Re,Ce){for(let Te=0;Te<this.local.length;Te++){let Me=this.local[Te];Me.from<=n&&Me.to>=t&&(!Ce||Ce(Me.spec))&&Ee.push(Me.copy(Me.from+Re,Me.to+Re))}for(let Te=0;Te<this.children.length;Te+=3)if(this.children[Te]<n&&this.children[Te+1]>t){let Me=this.children[Te]+1;this.children[Te+2].findInner(t-Me,n-Me,Ee,Re+Me,Ce)}}map(t,n,Ee){return this==empty||t.maps.length==0?this:this.mapInner(t,n,0,0,Ee||noSpec)}mapInner(t,n,Ee,Re,Ce){let Te;for(let Me=0;Me<this.local.length;Me++){let De=this.local[Me].map(t,Ee,Re);De&&De.type.valid(n,De)?(Te||(Te=[])).push(De):Ce.onRemove&&Ce.onRemove(this.local[Me].spec)}return this.children.length?mapChildren(this.children,Te||[],t,n,Ee,Re,Ce):Te?new DecorationSet(Te.sort(byPos),none):empty}add(t,n){return n.length?this==empty?DecorationSet.create(t,n):this.addInner(t,n,0):this}addInner(t,n,Ee){let Re,Ce=0;t.forEach((Me,De)=>{let Oe=De+Ee,Be;if(Be=takeSpansForNode(n,Me,Oe)){for(Re||(Re=this.children.slice());Ce<Re.length&&Re[Ce]<De;)Ce+=3;Re[Ce]==De?Re[Ce+2]=Re[Ce+2].addInner(Me,Be,Oe+1):Re.splice(Ce,0,De,De+Me.nodeSize,buildTree(Be,Me,Oe+1,noSpec)),Ce+=3}});let Te=moveSpans(Ce?withoutNulls(n):n,-Ee);for(let Me=0;Me<Te.length;Me++)Te[Me].type.valid(t,Te[Me])||Te.splice(Me--,1);return new DecorationSet(Te.length?this.local.concat(Te).sort(byPos):this.local,Re||this.children)}remove(t){return t.length==0||this==empty?this:this.removeInner(t,0)}removeInner(t,n){let Ee=this.children,Re=this.local;for(let Ce=0;Ce<Ee.length;Ce+=3){let Te,Me=Ee[Ce]+n,De=Ee[Ce+1]+n;for(let Be=0,ze;Be<t.length;Be++)(ze=t[Be])&&ze.from>Me&&ze.to<De&&(t[Be]=null,(Te||(Te=[])).push(ze));if(!Te)continue;Ee==this.children&&(Ee=this.children.slice());let Oe=Ee[Ce+2].removeInner(Te,Me+1);Oe!=empty?Ee[Ce+2]=Oe:(Ee.splice(Ce,3),Ce-=3)}if(Re.length){for(let Ce=0,Te;Ce<t.length;Ce++)if(Te=t[Ce])for(let Me=0;Me<Re.length;Me++)Re[Me].eq(Te,n)&&(Re==this.local&&(Re=this.local.slice()),Re.splice(Me--,1))}return Ee==this.children&&Re==this.local?this:Re.length||Ee.length?new DecorationSet(Re,Ee):empty}forChild(t,n){if(this==empty)return this;if(n.isLeaf)return DecorationSet.empty;let Ee,Re;for(let Me=0;Me<this.children.length;Me+=3)if(this.children[Me]>=t){this.children[Me]==t&&(Ee=this.children[Me+2]);break}let Ce=t+1,Te=Ce+n.content.size;for(let Me=0;Me<this.local.length;Me++){let De=this.local[Me];if(De.from<Te&&De.to>Ce&&De.type instanceof InlineType){let Oe=Math.max(Ce,De.from)-Ce,Be=Math.min(Te,De.to)-Ce;Oe<Be&&(Re||(Re=[])).push(De.copy(Oe,Be))}}if(Re){let Me=new DecorationSet(Re.sort(byPos),none);return Ee?new DecorationGroup([Me,Ee]):Me}return Ee||empty}eq(t){if(this==t)return!0;if(!(t instanceof DecorationSet)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return removeOverlap(this.localsInner(t))}localsInner(t){if(this==empty)return none;if(t.inlineContent||!this.local.some(InlineType.is))return this.local;let n=[];for(let Ee=0;Ee<this.local.length;Ee++)this.local[Ee].type instanceof InlineType||n.push(this.local[Ee]);return n}forEachSet(t){t(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(t){this.members=t}map(t,n){const Ee=this.members.map(Re=>Re.map(t,n,noSpec));return DecorationGroup.from(Ee)}forChild(t,n){if(n.isLeaf)return DecorationSet.empty;let Ee=[];for(let Re=0;Re<this.members.length;Re++){let Ce=this.members[Re].forChild(t,n);Ce!=empty&&(Ce instanceof DecorationGroup?Ee=Ee.concat(Ce.members):Ee.push(Ce))}return DecorationGroup.from(Ee)}eq(t){if(!(t instanceof DecorationGroup)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,Ee=!0;for(let Re=0;Re<this.members.length;Re++){let Ce=this.members[Re].localsInner(t);if(Ce.length)if(!n)n=Ce;else{Ee&&(n=n.slice(),Ee=!1);for(let Te=0;Te<Ce.length;Te++)n.push(Ce[Te])}}return n?removeOverlap(Ee?n:n.sort(byPos)):none}static from(t){switch(t.length){case 0:return empty;case 1:return t[0];default:return new DecorationGroup(t.every(n=>n instanceof DecorationSet)?t:t.reduce((n,Ee)=>n.concat(Ee instanceof DecorationSet?Ee:Ee.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function mapChildren(e,t,n,Ee,Re,Ce,Te){let Me=e.slice();for(let Oe=0,Be=Ce;Oe<n.maps.length;Oe++){let ze=0;n.maps[Oe].forEach(($e,He,Ue,Ve)=>{let We=Ve-Ue-(He-$e);for(let qe=0;qe<Me.length;qe+=3){let Ge=Me[qe+1];if(Ge<0||$e>Ge+Be-ze)continue;let Ye=Me[qe]+Be-ze;He>=Ye?Me[qe+1]=$e<=Ye?-2:-1:$e>=Be&&We&&(Me[qe]+=We,Me[qe+1]+=We)}ze+=We}),Be=n.maps[Oe].map(Be,-1)}let De=!1;for(let Oe=0;Oe<Me.length;Oe+=3)if(Me[Oe+1]<0){if(Me[Oe+1]==-2){De=!0,Me[Oe+1]=-1;continue}let Be=n.map(e[Oe]+Ce),ze=Be-Re;if(ze<0||ze>=Ee.content.size){De=!0;continue}let $e=n.map(e[Oe+1]+Ce,-1),He=$e-Re,{index:Ue,offset:Ve}=Ee.content.findIndex(ze),We=Ee.maybeChild(Ue);if(We&&Ve==ze&&Ve+We.nodeSize==He){let qe=Me[Oe+2].mapInner(n,We,Be+1,e[Oe]+Ce+1,Te);qe!=empty?(Me[Oe]=ze,Me[Oe+1]=He,Me[Oe+2]=qe):(Me[Oe+1]=-2,De=!0)}else De=!0}if(De){let Oe=mapAndGatherRemainingDecorations(Me,e,t,n,Re,Ce,Te),Be=buildTree(Oe,Ee,0,Te);t=Be.local;for(let ze=0;ze<Me.length;ze+=3)Me[ze+1]<0&&(Me.splice(ze,3),ze-=3);for(let ze=0,$e=0;ze<Be.children.length;ze+=3){let He=Be.children[ze];for(;$e<Me.length&&Me[$e]<He;)$e+=3;Me.splice($e,0,Be.children[ze],Be.children[ze+1],Be.children[ze+2])}}return new DecorationSet(t.sort(byPos),Me)}function moveSpans(e,t){if(!t||!e.length)return e;let n=[];for(let Ee=0;Ee<e.length;Ee++){let Re=e[Ee];n.push(new Decoration(Re.from+t,Re.to+t,Re.type))}return n}function mapAndGatherRemainingDecorations(e,t,n,Ee,Re,Ce,Te){function Me(De,Oe){for(let Be=0;Be<De.local.length;Be++){let ze=De.local[Be].map(Ee,Re,Oe);ze?n.push(ze):Te.onRemove&&Te.onRemove(De.local[Be].spec)}for(let Be=0;Be<De.children.length;Be+=3)Me(De.children[Be+2],De.children[Be]+Oe+1)}for(let De=0;De<e.length;De+=3)e[De+1]==-1&&Me(e[De+2],t[De]+Ce+1);return n}function takeSpansForNode(e,t,n){if(t.isLeaf)return null;let Ee=n+t.nodeSize,Re=null;for(let Ce=0,Te;Ce<e.length;Ce++)(Te=e[Ce])&&Te.from>n&&Te.to<Ee&&((Re||(Re=[])).push(Te),e[Ce]=null);return Re}function withoutNulls(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function buildTree(e,t,n,Ee){let Re=[],Ce=!1;t.forEach((Me,De)=>{let Oe=takeSpansForNode(e,Me,De+n);if(Oe){Ce=!0;let Be=buildTree(Oe,Me,n+De+1,Ee);Be!=empty&&Re.push(De,De+Me.nodeSize,Be)}});let Te=moveSpans(Ce?withoutNulls(e):e,-n).sort(byPos);for(let Me=0;Me<Te.length;Me++)Te[Me].type.valid(t,Te[Me])||(Ee.onRemove&&Ee.onRemove(Te[Me].spec),Te.splice(Me--,1));return Te.length||Re.length?new DecorationSet(Te,Re):empty}function byPos(e,t){return e.from-t.from||e.to-t.to}function removeOverlap(e){let t=e;for(let n=0;n<t.length-1;n++){let Ee=t[n];if(Ee.from!=Ee.to)for(let Re=n+1;Re<t.length;Re++){let Ce=t[Re];if(Ce.from==Ee.from){Ce.to!=Ee.to&&(t==e&&(t=e.slice()),t[Re]=Ce.copy(Ce.from,Ee.to),insertAhead(t,Re+1,Ce.copy(Ee.to,Ce.to)));continue}else{Ce.from<Ee.to&&(t==e&&(t=e.slice()),t[n]=Ee.copy(Ee.from,Ce.from),insertAhead(t,Re,Ee.copy(Ce.from,Ee.to)));break}}}return t}function insertAhead(e,t,n){for(;t<e.length&&byPos(n,e[t])>0;)t++;e.splice(t,0,n)}function viewDecorations(e){let t=[];return e.someProp("decorations",n=>{let Ee=n(e.state);Ee&&Ee!=empty&&t.push(Ee)}),e.cursorWrapper&&t.push(DecorationSet.create(e.state.doc,[e.cursorWrapper.deco])),DecorationGroup.from(t)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class DOMObserver{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(Ee=>{for(let Re=0;Re<Ee.length;Re++)this.queue.push(Ee[Re]);ie$1&&ie_version<=11&&Ee.some(Re=>Re.type=="childList"&&Re.removedNodes.length||Re.type=="characterData"&&Re.oldValue.length>Re.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=Ee=>{this.queue.push({target:Ee.target,type:"characterData",oldValue:Ee.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&isEquivalentPosition(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,Ee;for(let Ce=t.focusNode;Ce;Ce=parentNode(Ce))n.add(Ce);for(let Ce=t.anchorNode;Ce;Ce=parentNode(Ce))if(n.has(Ce)){Ee=Ce;break}let Re=Ee&&this.view.docView.nearestDesc(Ee);if(Re&&Re.ignoreMutation({type:"selection",target:Ee.nodeType==3?Ee.parentNode:Ee}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let Ee=t.domSelectionRange(),Re=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(Ee)&&hasFocusAndSelection(t)&&!this.ignoreSelectionChange(Ee),Ce=-1,Te=-1,Me=!1,De=[];if(t.editable)for(let Be=0;Be<n.length;Be++){let ze=this.registerMutation(n[Be],De);ze&&(Ce=Ce<0?ze.from:Math.min(ze.from,Ce),Te=Te<0?ze.to:Math.max(ze.to,Te),ze.typeOver&&(Me=!0))}if(gecko&&De.length){let Be=De.filter(ze=>ze.nodeName=="BR");if(Be.length==2){let[ze,$e]=Be;ze.parentNode&&ze.parentNode.parentNode==$e.parentNode?$e.remove():ze.remove()}else{let{focusNode:ze}=this.currentSelection;for(let $e of Be){let He=$e.parentNode;He&&He.nodeName=="LI"&&(!ze||blockParent(t,ze)!=He)&&$e.remove()}}}else if((chrome||safari$1)&&De.some(Be=>Be.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let Be of De)if(Be.nodeName=="BR"&&Be.parentNode){let ze=Be.nextSibling;ze&&ze.nodeType==1&&ze.contentEditable=="false"&&Be.parentNode.removeChild(Be)}}let Oe=null;Ce<0&&Re&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&selectionCollapsed(Ee)&&(Oe=selectionFromDOM(t))&&Oe.eq(Selection.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,selectionToDOM(t),this.currentSelection.set(Ee),t.scrollToSelection()):(Ce>-1||Re)&&(Ce>-1&&(t.docView.markDirty(Ce,Te),checkCSS(t)),this.handleDOMChange(Ce,Te,Me,De),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(Ee)||selectionToDOM(t),this.currentSelection.set(Ee))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let Ee=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(Ee==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!Ee||Ee.ignoreMutation(t))return null;if(t.type=="childList"){for(let Be=0;Be<t.addedNodes.length;Be++){let ze=t.addedNodes[Be];n.push(ze),ze.nodeType==3&&(this.lastChangedTextNode=ze)}if(Ee.contentDOM&&Ee.contentDOM!=Ee.dom&&!Ee.contentDOM.contains(t.target))return{from:Ee.posBefore,to:Ee.posAfter};let Re=t.previousSibling,Ce=t.nextSibling;if(ie$1&&ie_version<=11&&t.addedNodes.length)for(let Be=0;Be<t.addedNodes.length;Be++){let{previousSibling:ze,nextSibling:$e}=t.addedNodes[Be];(!ze||Array.prototype.indexOf.call(t.addedNodes,ze)<0)&&(Re=ze),(!$e||Array.prototype.indexOf.call(t.addedNodes,$e)<0)&&(Ce=$e)}let Te=Re&&Re.parentNode==t.target?domIndex(Re)+1:0,Me=Ee.localPosFromDOM(t.target,Te,-1),De=Ce&&Ce.parentNode==t.target?domIndex(Ce):t.target.childNodes.length,Oe=Ee.localPosFromDOM(t.target,De,1);return{from:Me,to:Oe}}else return t.type=="attributes"?{from:Ee.posAtStart-Ee.border,to:Ee.posAtEnd+Ee.border}:(this.lastChangedTextNode=t.target,{from:Ee.posAtStart,to:Ee.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(e){if(!cssChecked.has(e)&&(cssChecked.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(e,t){let n=t.startContainer,Ee=t.startOffset,Re=t.endContainer,Ce=t.endOffset,Te=e.domAtPos(e.state.selection.anchor);return isEquivalentPosition(Te.node,Te.offset,Re,Ce)&&([n,Ee,Re,Ce]=[Re,Ce,n,Ee]),{anchorNode:n,anchorOffset:Ee,focusNode:Re,focusOffset:Ce}}function safariShadowSelectionRange(e,t){if(t.getComposedRanges){let Re=t.getComposedRanges(e.root)[0];if(Re)return rangeToSelectionRange(e,Re)}let n;function Ee(Re){Re.preventDefault(),Re.stopImmediatePropagation(),n=Re.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",Ee,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",Ee,!0),n?rangeToSelectionRange(e,n):null}function blockParent(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let Ee=e.docView.nearestDesc(n,!0);if(Ee&&Ee.node.isBlock)return n}return null}function parseBetween(e,t,n){let{node:Ee,fromOffset:Re,toOffset:Ce,from:Te,to:Me}=e.docView.parseRange(t,n),De=e.domSelectionRange(),Oe,Be=De.anchorNode;if(Be&&e.dom.contains(Be.nodeType==1?Be:Be.parentNode)&&(Oe=[{node:Be,offset:De.anchorOffset}],selectionCollapsed(De)||Oe.push({node:De.focusNode,offset:De.focusOffset})),chrome&&e.input.lastKeyCode===8)for(let We=Ce;We>Re;We--){let qe=Ee.childNodes[We-1],Ge=qe.pmViewDesc;if(qe.nodeName=="BR"&&!Ge){Ce=We;break}if(!Ge||Ge.size)break}let ze=e.state.doc,$e=e.someProp("domParser")||DOMParser.fromSchema(e.state.schema),He=ze.resolve(Te),Ue=null,Ve=$e.parse(Ee,{topNode:He.parent,topMatch:He.parent.contentMatchAt(He.index()),topOpen:!0,from:Re,to:Ce,preserveWhitespace:He.parent.type.whitespace=="pre"?"full":!0,findPositions:Oe,ruleFromNode,context:He});if(Oe&&Oe[0].pos!=null){let We=Oe[0].pos,qe=Oe[1]&&Oe[1].pos;qe==null&&(qe=We),Ue={anchor:We+Te,head:qe+Te}}return{doc:Ve,sel:Ue,from:Te,to:Me}}function ruleFromNode(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(safari$1&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||safari$1&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(e,t,n,Ee,Re){let Ce=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let er=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,St=selectionFromDOM(e,er);if(St&&!e.state.selection.eq(St)){if(chrome&&android&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",hr=>hr(e,keyEvent(13,"Enter"))))return;let ar=e.state.tr.setSelection(St);er=="pointer"?ar.setMeta("pointer",!0):er=="key"&&ar.scrollIntoView(),Ce&&ar.setMeta("composition",Ce),e.dispatch(ar)}return}let Te=e.state.doc.resolve(t),Me=Te.sharedDepth(n);t=Te.before(Me+1),n=e.state.doc.resolve(n).after(Me+1);let De=e.state.selection,Oe=parseBetween(e,t,n),Be=e.state.doc,ze=Be.slice(Oe.from,Oe.to),$e,He;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?($e=e.state.selection.to,He="end"):($e=e.state.selection.from,He="start"),e.input.lastKeyCode=null;let Ue=findDiff(ze.content,Oe.doc.content,Oe.from,$e,He);if(Ue&&e.input.domChangeCount++,(ios&&e.input.lastIOSEnter>Date.now()-225||android)&&Re.some(er=>er.nodeType==1&&!isInline.test(er.nodeName))&&(!Ue||Ue.endA>=Ue.endB)&&e.someProp("handleKeyDown",er=>er(e,keyEvent(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!Ue)if(Ee&&De instanceof TextSelection&&!De.empty&&De.$head.sameParent(De.$anchor)&&!e.composing&&!(Oe.sel&&Oe.sel.anchor!=Oe.sel.head))Ue={start:De.from,endA:De.to,endB:De.to};else{if(Oe.sel){let er=resolveSelection(e,e.state.doc,Oe.sel);if(er&&!er.eq(e.state.selection)){let St=e.state.tr.setSelection(er);Ce&&St.setMeta("composition",Ce),e.dispatch(St)}}return}e.state.selection.from<e.state.selection.to&&Ue.start==Ue.endB&&e.state.selection instanceof TextSelection&&(Ue.start>e.state.selection.from&&Ue.start<=e.state.selection.from+2&&e.state.selection.from>=Oe.from?Ue.start=e.state.selection.from:Ue.endA<e.state.selection.to&&Ue.endA>=e.state.selection.to-2&&e.state.selection.to<=Oe.to&&(Ue.endB+=e.state.selection.to-Ue.endA,Ue.endA=e.state.selection.to)),ie$1&&ie_version<=11&&Ue.endB==Ue.start+1&&Ue.endA==Ue.start&&Ue.start>Oe.from&&Oe.doc.textBetween(Ue.start-Oe.from-1,Ue.start-Oe.from+1)==" "&&(Ue.start--,Ue.endA--,Ue.endB--);let Ve=Oe.doc.resolveNoCache(Ue.start-Oe.from),We=Oe.doc.resolveNoCache(Ue.endB-Oe.from),qe=Be.resolve(Ue.start),Ge=Ve.sameParent(We)&&Ve.parent.inlineContent&&qe.end()>=Ue.endA;if((ios&&e.input.lastIOSEnter>Date.now()-225&&(!Ge||Re.some(er=>er.nodeName=="DIV"||er.nodeName=="P"))||!Ge&&Ve.pos<Oe.doc.content.size&&(!Ve.sameParent(We)||!Ve.parent.inlineContent)&&Ve.pos<We.pos&&!/\S/.test(Oe.doc.textBetween(Ve.pos,We.pos,"","")))&&e.someProp("handleKeyDown",er=>er(e,keyEvent(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>Ue.start&&looksLikeBackspace(Be,Ue.start,Ue.endA,Ve,We)&&e.someProp("handleKeyDown",er=>er(e,keyEvent(8,"Backspace")))){android&&chrome&&e.domObserver.suppressSelectionUpdates();return}chrome&&Ue.endB==Ue.start&&(e.input.lastChromeDelete=Date.now()),android&&!Ge&&Ve.start()!=We.start()&&We.parentOffset==0&&Ve.depth==We.depth&&Oe.sel&&Oe.sel.anchor==Oe.sel.head&&Oe.sel.head==Ue.endA&&(Ue.endB-=2,We=Oe.doc.resolveNoCache(Ue.endB-Oe.from),setTimeout(()=>{e.someProp("handleKeyDown",function(er){return er(e,keyEvent(13,"Enter"))})},20));let Ye=Ue.start,Ke=Ue.endA,Xe=er=>{let St=er||e.state.tr.replace(Ye,Ke,Oe.doc.slice(Ue.start-Oe.from,Ue.endB-Oe.from));if(Oe.sel){let ar=resolveSelection(e,St.doc,Oe.sel);ar&&!(chrome&&e.composing&&ar.empty&&(Ue.start!=Ue.endB||e.input.lastChromeDelete<Date.now()-100)&&(ar.head==Ye||ar.head==St.mapping.map(Ke)-1)||ie$1&&ar.empty&&ar.head==Ye)&&St.setSelection(ar)}return Ce&&St.setMeta("composition",Ce),St.scrollIntoView()},Ze;if(Ge)if(Ve.pos==We.pos){ie$1&&ie_version<=11&&Ve.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(e),20));let er=Xe(e.state.tr.delete(Ye,Ke)),St=Be.resolve(Ue.start).marksAcross(Be.resolve(Ue.endA));St&&er.ensureMarks(St),e.dispatch(er)}else if(Ue.endA==Ue.endB&&(Ze=isMarkChange(Ve.parent.content.cut(Ve.parentOffset,We.parentOffset),qe.parent.content.cut(qe.parentOffset,Ue.endA-qe.start())))){let er=Xe(e.state.tr);Ze.type=="add"?er.addMark(Ye,Ke,Ze.mark):er.removeMark(Ye,Ke,Ze.mark),e.dispatch(er)}else if(Ve.parent.child(Ve.index()).isText&&Ve.index()==We.index()-(We.textOffset?0:1)){let er=Ve.parent.textBetween(Ve.parentOffset,We.parentOffset),St=()=>Xe(e.state.tr.insertText(er,Ye,Ke));e.someProp("handleTextInput",ar=>ar(e,Ye,Ke,er,St))||e.dispatch(St())}else e.dispatch(Xe());else e.dispatch(Xe())}function resolveSelection(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:selectionBetween(e,t.resolve(n.anchor),t.resolve(n.head))}function isMarkChange(e,t){let n=e.firstChild.marks,Ee=t.firstChild.marks,Re=n,Ce=Ee,Te,Me,De;for(let Be=0;Be<Ee.length;Be++)Re=Ee[Be].removeFromSet(Re);for(let Be=0;Be<n.length;Be++)Ce=n[Be].removeFromSet(Ce);if(Re.length==1&&Ce.length==0)Me=Re[0],Te="add",De=Be=>Be.mark(Me.addToSet(Be.marks));else if(Re.length==0&&Ce.length==1)Me=Ce[0],Te="remove",De=Be=>Be.mark(Me.removeFromSet(Be.marks));else return null;let Oe=[];for(let Be=0;Be<t.childCount;Be++)Oe.push(De(t.child(Be)));if(Fragment.from(Oe).eq(e))return{mark:Me,type:Te}}function looksLikeBackspace(e,t,n,Ee,Re){if(n-t<=Re.pos-Ee.pos||skipClosingAndOpening(Ee,!0,!1)<Re.pos)return!1;let Ce=e.resolve(t);if(!Ee.parent.isTextblock){let Me=Ce.nodeAfter;return Me!=null&&n==t+Me.nodeSize}if(Ce.parentOffset<Ce.parent.content.size||!Ce.parent.isTextblock)return!1;let Te=e.resolve(skipClosingAndOpening(Ce,!0,!0));return!Te.parent.isTextblock||Te.pos>n||skipClosingAndOpening(Te,!0,!1)<n?!1:Ee.parent.content.cut(Ee.parentOffset).eq(Te.parent.content)}function skipClosingAndOpening(e,t,n){let Ee=e.depth,Re=t?e.end():e.pos;for(;Ee>0&&(t||e.indexAfter(Ee)==e.node(Ee).childCount);)Ee--,Re++,t=!1;if(n){let Ce=e.node(Ee).maybeChild(e.indexAfter(Ee));for(;Ce&&!Ce.isLeaf;)Ce=Ce.firstChild,Re++}return Re}function findDiff(e,t,n,Ee,Re){let Ce=e.findDiffStart(t,n);if(Ce==null)return null;let{a:Te,b:Me}=e.findDiffEnd(t,n+e.size,n+t.size);if(Re=="end"){let De=Math.max(0,Ce-Math.min(Te,Me));Ee-=Te+De-Ce}if(Te<Ce&&e.size<t.size){let De=Ee<=Ce&&Ee>=Te?Ce-Ee:0;Ce-=De,Ce&&Ce<t.size&&isSurrogatePair(t.textBetween(Ce-1,Ce+1))&&(Ce+=De?1:-1),Me=Ce+(Me-Te),Te=Ce}else if(Me<Ce){let De=Ee<=Ce&&Ee>=Me?Ce-Ee:0;Ce-=De,Ce&&Ce<e.size&&isSurrogatePair(e.textBetween(Ce-1,Ce+1))&&(Ce+=De?1:-1),Te=Ce+(Te-Me),Me=Ce}return{start:Ce,endA:Te,endB:Me}}function isSurrogatePair(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class EditorView{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(Ee,Re,Ce,Te)=>readDOMChange(this,Ee,Re,Ce,Te)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(checkStateComponent),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let Ee in this._props)n[Ee]=this._props[Ee];n.state=this.state;for(let Ee in t)n[Ee]=t[Ee];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var Ee;let Re=this.state,Ce=!1,Te=!1;t.storedMarks&&this.composing&&(clearComposition(this),Te=!0),this.state=t;let Me=Re.plugins!=t.plugins||this._props.plugins!=n.plugins;if(Me||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let He=buildNodeViews(this);changedNodeViews(He,this.nodeViews)&&(this.nodeViews=He,Ce=!0)}(Me||n.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let De=viewDecorations(this),Oe=computeDocDeco(this),Be=Re.plugins!=t.plugins&&!Re.doc.eq(t.doc)?"reset":t.scrollToSelection>Re.scrollToSelection?"to selection":"preserve",ze=Ce||!this.docView.matchesNode(t.doc,Oe,De);(ze||!t.selection.eq(Re.selection))&&(Te=!0);let $e=Be=="preserve"&&Te&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(Te){this.domObserver.stop();let He=ze&&(ie$1||chrome)&&!this.composing&&!Re.selection.empty&&!t.selection.empty&&selectionContextChanged(Re.selection,t.selection);if(ze){let Ue=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(Ce||!this.docView.update(t.doc,Oe,De,this))&&(this.docView.updateOuterDeco(Oe),this.docView.destroy(),this.docView=docViewDesc(t.doc,Oe,De,this.dom,this)),Ue&&!this.trackWrites&&(He=!0)}He||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,He):(syncNodeSelection(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(Re),!((Ee=this.dragging)===null||Ee===void 0)&&Ee.node&&!Re.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,Re),Be=="reset"?this.dom.scrollTop=0:Be=="to selection"?this.scrollToSelection():$e&&resetScrollPos($e)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof NodeSelection){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&scrollRectIntoView(this,n.getBoundingClientRect(),t)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let Ee=this.directPlugins[n];Ee.spec.view&&this.pluginViews.push(Ee.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let Ee=this.state.plugins[n];Ee.spec.view&&this.pluginViews.push(Ee.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let Ee=this.pluginViews[n];Ee.update&&Ee.update(this,t)}}updateDraggedNode(t,n){let Ee=t.node,Re=-1;if(this.state.doc.nodeAt(Ee.from)==Ee.node)Re=Ee.from;else{let Ce=Ee.from+(this.state.doc.content.size-n.doc.content.size);(Ce>0&&this.state.doc.nodeAt(Ce))==Ee.node&&(Re=Ce)}this.dragging=new Dragging(t.slice,t.move,Re<0?void 0:NodeSelection.create(this.state.doc,Re))}someProp(t,n){let Ee=this._props&&this._props[t],Re;if(Ee!=null&&(Re=n?n(Ee):Ee))return Re;for(let Te=0;Te<this.directPlugins.length;Te++){let Me=this.directPlugins[Te].props[t];if(Me!=null&&(Re=n?n(Me):Me))return Re}let Ce=this.state.plugins;if(Ce)for(let Te=0;Te<Ce.length;Te++){let Me=Ce[Te].props[t];if(Me!=null&&(Re=n?n(Me):Me))return Re}}hasFocus(){if(ie$1){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return posAtCoords(this,t)}coordsAtPos(t,n=1){return coordsAtPos(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,Ee=-1){let Re=this.docView.posFromDOM(t,n,Ee);if(Re==null)throw new RangeError("DOM position not inside the editor");return Re}endOfTextblock(t,n){return endOfTextblock(this,n||this.state,t)}pasteHTML(t,n){return doPaste(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return doPaste(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return serializeForClipboard(this,t)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return dispatchEvent(this,t)}domSelectionRange(){let t=this.domSelection();return t?safari$1&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}EditorView.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function computeDocDeco(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let Ee in n)Ee=="class"?t.class+=" "+n[Ee]:Ee=="style"?t.style=(t.style?t.style+";":"")+n[Ee]:!t[Ee]&&Ee!="contenteditable"&&Ee!="nodeName"&&(t[Ee]=String(n[Ee]))}),t.translate||(t.translate="no"),[Decoration.node(0,e.state.doc.content.size,t)]}function updateCursorWrapper(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Decoration.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function getEditable(e){return!e.someProp("editable",t=>t(e.state)===!1)}function selectionContextChanged(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function buildNodeViews(e){let t=Object.create(null);function n(Ee){for(let Re in Ee)Object.prototype.hasOwnProperty.call(t,Re)||(t[Re]=Ee[Re])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function changedNodeViews(e,t){let n=0,Ee=0;for(let Re in e){if(e[Re]!=t[Re])return!0;n++}for(let Re in t)Ee++;return n!=Ee}function checkStateComponent(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(e){var t=mac$1&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ie&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?shift:base)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const mac=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let Ee,Re,Ce,Te;for(let Me=0;Me<t.length-1;Me++){let De=t[Me];if(/^(cmd|meta|m)$/i.test(De))Te=!0;else if(/^a(lt)?$/i.test(De))Ee=!0;else if(/^(c|ctrl|control)$/i.test(De))Re=!0;else if(/^s(hift)?$/i.test(De))Ce=!0;else if(/^mod$/i.test(De))mac?Te=!0:Re=!0;else throw new Error("Unrecognized modifier name: "+De)}return Ee&&(n="Alt-"+n),Re&&(n="Ctrl-"+n),Te&&(n="Meta-"+n),Ce&&(n="Shift-"+n),n}function normalize(e){let t=Object.create(null);for(let n in e)t[normalizeKeyName$1(n)]=e[n];return t}function modifiers(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function keymap(e){return new Plugin({props:{handleKeyDown:keydownHandler(e)}})}function keydownHandler(e){let t=normalize(e);return function(n,Ee){let Re=keyName(Ee),Ce,Te=t[modifiers(Re,Ee)];if(Te&&Te(n.state,n.dispatch,n))return!0;if(Re.length==1&&Re!=" "){if(Ee.shiftKey){let Me=t[modifiers(Re,Ee,!1)];if(Me&&Me(n.state,n.dispatch,n))return!0}if((Ee.altKey||Ee.metaKey||Ee.ctrlKey)&&!(windows&&Ee.ctrlKey&&Ee.altKey)&&(Ce=base[Ee.keyCode])&&Ce!=Re){let Me=t[modifiers(Ce,Ee)];if(Me&&Me(n.state,n.dispatch,n))return!0}}return!1}}var __defProp$1=Object.defineProperty,__export$1=(e,t)=>{for(var n in t)__defProp$1(e,n,{get:t[n],enumerable:!0})};function createChainableState(e){const{state:t,transaction:n}=e;let{selection:Ee}=n,{doc:Re}=n,{storedMarks:Ce}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return Ce},get selection(){return Ee},get doc(){return Re},get tr(){return Ee=n.selection,Re=n.doc,Ce=n.storedMarks,n}}}var CommandManager=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:Ee}=t,{tr:Re}=n,Ce=this.buildProps(Re);return Object.fromEntries(Object.entries(e).map(([Te,Me])=>[Te,(...Oe)=>{const Be=Me(...Oe)(Ce);return!Re.getMeta("preventDispatch")&&!this.hasCustomState&&Ee.dispatch(Re),Be}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:Ee,state:Re}=this,{view:Ce}=Ee,Te=[],Me=!!e,De=e||Re.tr,Oe=()=>(!Me&&t&&!De.getMeta("preventDispatch")&&!this.hasCustomState&&Ce.dispatch(De),Te.every(ze=>ze===!0)),Be={...Object.fromEntries(Object.entries(n).map(([ze,$e])=>[ze,(...Ue)=>{const Ve=this.buildProps(De,t),We=$e(...Ue)(Ve);return Te.push(We),Be}])),run:Oe};return Be}createCan(e){const{rawCommands:t,state:n}=this,Ee=!1,Re=e||n.tr,Ce=this.buildProps(Re,Ee);return{...Object.fromEntries(Object.entries(t).map(([Me,De])=>[Me,(...Oe)=>De(...Oe)({...Ce,dispatch:void 0})])),chain:()=>this.createChain(Re,Ee)}}buildProps(e,t=!0){const{rawCommands:n,editor:Ee,state:Re}=this,{view:Ce}=Ee,Te={tr:e,editor:Ee,view:Ce,state:createChainableState({state:Re,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([Me,De])=>[Me,(...Oe)=>De(...Oe)(Te)]))}};return Te}},commands_exports={};__export$1(commands_exports,{blur:()=>blur,clearContent:()=>clearContent,clearNodes:()=>clearNodes,command:()=>command,createParagraphNear:()=>createParagraphNear,cut:()=>cut,deleteCurrentNode:()=>deleteCurrentNode,deleteNode:()=>deleteNode,deleteRange:()=>deleteRange,deleteSelection:()=>deleteSelection,enter:()=>enter,exitCode:()=>exitCode,extendMarkRange:()=>extendMarkRange,first:()=>first,focus:()=>focus,forEach:()=>forEach,insertContent:()=>insertContent,insertContentAt:()=>insertContentAt,joinBackward:()=>joinBackward,joinDown:()=>joinDown,joinForward:()=>joinForward,joinItemBackward:()=>joinItemBackward,joinItemForward:()=>joinItemForward,joinTextblockBackward:()=>joinTextblockBackward,joinTextblockForward:()=>joinTextblockForward,joinUp:()=>joinUp,keyboardShortcut:()=>keyboardShortcut,lift:()=>lift,liftEmptyBlock:()=>liftEmptyBlock,liftListItem:()=>liftListItem,newlineInCode:()=>newlineInCode,resetAttributes:()=>resetAttributes,scrollIntoView:()=>scrollIntoView,selectAll:()=>selectAll,selectNodeBackward:()=>selectNodeBackward,selectNodeForward:()=>selectNodeForward,selectParentNode:()=>selectParentNode,selectTextblockEnd:()=>selectTextblockEnd,selectTextblockStart:()=>selectTextblockStart,setContent:()=>setContent,setMark:()=>setMark,setMeta:()=>setMeta,setNode:()=>setNode,setNodeSelection:()=>setNodeSelection,setTextDirection:()=>setTextDirection,setTextSelection:()=>setTextSelection,sinkListItem:()=>sinkListItem,splitBlock:()=>splitBlock,splitListItem:()=>splitListItem,toggleList:()=>toggleList,toggleMark:()=>toggleMark,toggleNode:()=>toggleNode,toggleWrap:()=>toggleWrap,undoInputRule:()=>undoInputRule,unsetAllMarks:()=>unsetAllMarks,unsetMark:()=>unsetMark,unsetTextDirection:()=>unsetTextDirection,updateAttributes:()=>updateAttributes,wrapIn:()=>wrapIn,wrapInList:()=>wrapInList});var blur=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),clearContent=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),clearNodes=()=>({state:e,tr:t,dispatch:n})=>{const{selection:Ee}=t,{ranges:Re}=Ee;return n&&Re.forEach(({$from:Ce,$to:Te})=>{e.doc.nodesBetween(Ce.pos,Te.pos,(Me,De)=>{if(Me.type.isText)return;const{doc:Oe,mapping:Be}=t,ze=Oe.resolve(Be.map(De)),$e=Oe.resolve(Be.map(De+Me.nodeSize)),He=ze.blockRange($e);if(!He)return;const Ue=liftTarget(He);if(Me.type.isTextblock){const{defaultType:Ve}=ze.parent.contentMatchAt(ze.index());t.setNodeMarkup(He.start,Ve)}(Ue||Ue===0)&&t.lift(He,Ue)})}),!0},command=e=>t=>e(t),createParagraphNear=()=>({state:e,dispatch:t})=>createParagraphNear$1(e,t),cut=(e,t)=>({editor:n,tr:Ee})=>{const{state:Re}=n,Ce=Re.doc.slice(e.from,e.to);Ee.deleteRange(e.from,e.to);const Te=Ee.mapping.map(t);return Ee.insert(Te,Ce.content),Ee.setSelection(new TextSelection(Ee.doc.resolve(Math.max(Te-1,0)))),!0},deleteCurrentNode=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,Ee=n.$anchor.node();if(Ee.content.size>0)return!1;const Re=e.selection.$anchor;for(let Ce=Re.depth;Ce>0;Ce-=1)if(Re.node(Ce).type===Ee.type){if(t){const Me=Re.before(Ce),De=Re.after(Ce);e.delete(Me,De).scrollIntoView()}return!0}return!1};function getNodeType(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var deleteNode=e=>({tr:t,state:n,dispatch:Ee})=>{const Re=getNodeType(e,n.schema),Ce=t.selection.$anchor;for(let Te=Ce.depth;Te>0;Te-=1)if(Ce.node(Te).type===Re){if(Ee){const De=Ce.before(Te),Oe=Ce.after(Te);t.delete(De,Oe).scrollIntoView()}return!0}return!1},deleteRange=e=>({tr:t,dispatch:n})=>{const{from:Ee,to:Re}=e;return n&&t.delete(Ee,Re),!0},deleteSelection=()=>({state:e,dispatch:t})=>deleteSelection$1(e,t),enter=()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode=()=>({state:e,dispatch:t})=>exitCode$1(e,t);function isRegExp(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function objectIncludes(e,t,n={strict:!0}){const Ee=Object.keys(t);return Ee.length?Ee.every(Re=>n.strict?t[Re]===e[Re]:isRegExp(t[Re])?t[Re].test(e[Re]):t[Re]===e[Re]):!0}function findMarkInSet(e,t,n={}){return e.find(Ee=>Ee.type===t&&objectIncludes(Object.fromEntries(Object.keys(n).map(Re=>[Re,Ee.attrs[Re]])),n))}function isMarkInSet(e,t,n={}){return!!findMarkInSet(e,t,n)}function getMarkRange(e,t,n){var Ee;if(!e||!t)return;let Re=e.parent.childAfter(e.parentOffset);if((!Re.node||!Re.node.marks.some(Be=>Be.type===t))&&(Re=e.parent.childBefore(e.parentOffset)),!Re.node||!Re.node.marks.some(Be=>Be.type===t)||(n=n||((Ee=Re.node.marks[0])==null?void 0:Ee.attrs),!findMarkInSet([...Re.node.marks],t,n)))return;let Te=Re.index,Me=e.start()+Re.offset,De=Te+1,Oe=Me+Re.node.nodeSize;for(;Te>0&&isMarkInSet([...e.parent.child(Te-1).marks],t,n);)Te-=1,Me-=e.parent.child(Te).nodeSize;for(;De<e.parent.childCount&&isMarkInSet([...e.parent.child(De).marks],t,n);)Oe+=e.parent.child(De).nodeSize,De+=1;return{from:Me,to:Oe}}function getMarkType(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var extendMarkRange=(e,t={})=>({tr:n,state:Ee,dispatch:Re})=>{const Ce=getMarkType(e,Ee.schema),{doc:Te,selection:Me}=n,{$from:De,from:Oe,to:Be}=Me;if(Re){const ze=getMarkRange(De,Ce,t);if(ze&&ze.from<=Oe&&ze.to>=Be){const $e=TextSelection.create(Te,ze.from,ze.to);n.setSelection($e)}}return!0},first=e=>t=>{const n=typeof e=="function"?e(t):e;for(let Ee=0;Ee<n.length;Ee+=1)if(n[Ee](t))return!0;return!1};function isTextSelection(e){return e instanceof TextSelection}function minMax(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function resolveFocusPosition(e,t=null){if(!t)return null;const n=Selection.atStart(e),Ee=Selection.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return Ee;const Re=n.from,Ce=Ee.to;return t==="all"?TextSelection.create(e,minMax(0,Re,Ce),minMax(e.content.size,Re,Ce)):TextSelection.create(e,minMax(t,Re,Ce),minMax(t,Re,Ce))}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var focus=(e=null,t={})=>({editor:n,view:Ee,tr:Re,dispatch:Ce})=>{t={scrollIntoView:!0,...t};const Te=()=>{(isiOS()||isAndroid())&&Ee.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(Ee.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(Ee.hasFocus()&&e===null||e===!1)return!0;if(Ce&&e===null&&!isTextSelection(n.state.selection))return Te(),!0;const Me=resolveFocusPosition(Re.doc,e)||n.state.selection,De=n.state.selection.eq(Me);return Ce&&(De||Re.setSelection(Me),De&&Re.storedMarks&&Re.setStoredMarks(Re.storedMarks),Te()),!0},forEach=(e,t)=>n=>e.every((Ee,Re)=>t(Ee,{...n,index:Re})),insertContent=(e,t)=>({tr:n,commands:Ee})=>Ee.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),removeWhitespaces=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const Ee=t[n];Ee.nodeType===3&&Ee.nodeValue&&/^(\n\s\s|\n)$/.test(Ee.nodeValue)?e.removeChild(Ee):Ee.nodeType===1&&removeWhitespaces(Ee)}return e};function elementFromString(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return removeWhitespaces(n)}function createNodeFromContent(e,t,n){if(e instanceof Node$1||e instanceof Fragment)return e;n={slice:!0,parseOptions:{},...n};const Ee=typeof e=="object"&&e!==null,Re=typeof e=="string";if(Ee)try{if(Array.isArray(e)&&e.length>0)return Fragment.fromArray(e.map(Me=>t.nodeFromJSON(Me)));const Te=t.nodeFromJSON(e);return n.errorOnInvalidContent&&Te.check(),Te}catch(Ce){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:Ce});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",Ce),createNodeFromContent("",t,n)}if(Re){if(n.errorOnInvalidContent){let Te=!1,Me="";const De=new Schema({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:Oe=>(Te=!0,Me=typeof Oe=="string"?Oe:Oe.outerHTML,null)}]}})});if(n.slice?DOMParser.fromSchema(De).parseSlice(elementFromString(e),n.parseOptions):DOMParser.fromSchema(De).parse(elementFromString(e),n.parseOptions),n.errorOnInvalidContent&&Te)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${Me}`)})}const Ce=DOMParser.fromSchema(t);return n.slice?Ce.parseSlice(elementFromString(e),n.parseOptions).content:Ce.parse(elementFromString(e),n.parseOptions)}return createNodeFromContent("",t,n)}function selectionToInsertionEnd(e,t,n){const Ee=e.steps.length-1;if(Ee<t)return;const Re=e.steps[Ee];if(!(Re instanceof ReplaceStep||Re instanceof ReplaceAroundStep))return;const Ce=e.mapping.maps[Ee];let Te=0;Ce.forEach((Me,De,Oe,Be)=>{Te===0&&(Te=Be)}),e.setSelection(Selection.near(e.doc.resolve(Te),n))}var isFragment=e=>!("type"in e),insertContentAt=(e,t,n)=>({tr:Ee,dispatch:Re,editor:Ce})=>{var Te;if(Re){n={parseOptions:Ce.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let Me;const De=We=>{Ce.emit("contentError",{editor:Ce,error:We,disableCollaboration:()=>{"collaboration"in Ce.storage&&typeof Ce.storage.collaboration=="object"&&Ce.storage.collaboration&&(Ce.storage.collaboration.isDisabled=!0)}})},Oe={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!Ce.options.enableContentCheck&&Ce.options.emitContentError)try{createNodeFromContent(t,Ce.schema,{parseOptions:Oe,errorOnInvalidContent:!0})}catch(We){De(We)}try{Me=createNodeFromContent(t,Ce.schema,{parseOptions:Oe,errorOnInvalidContent:(Te=n.errorOnInvalidContent)!=null?Te:Ce.options.enableContentCheck})}catch(We){return De(We),!1}let{from:Be,to:ze}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},$e=!0,He=!0;if((isFragment(Me)?Me:[Me]).forEach(We=>{We.check(),$e=$e?We.isText&&We.marks.length===0:!1,He=He?We.isBlock:!1}),Be===ze&&He){const{parent:We}=Ee.doc.resolve(Be);We.isTextblock&&!We.type.spec.code&&!We.childCount&&(Be-=1,ze+=1)}let Ve;if($e){if(Array.isArray(t))Ve=t.map(We=>We.text||"").join("");else if(t instanceof Fragment){let We="";t.forEach(qe=>{qe.text&&(We+=qe.text)}),Ve=We}else typeof t=="object"&&t&&t.text?Ve=t.text:Ve=t;Ee.insertText(Ve,Be,ze)}else{Ve=Me;const We=Ee.doc.resolve(Be),qe=We.node(),Ge=We.parentOffset===0,Ye=qe.isText||qe.isTextblock,Ke=qe.content.size>0;Ge&&Ye&&Ke&&(Be=Math.max(0,Be-1)),Ee.replaceWith(Be,ze,Ve)}n.updateSelection&&selectionToInsertionEnd(Ee,Ee.steps.length-1,-1),n.applyInputRules&&Ee.setMeta("applyInputRules",{from:Be,text:Ve}),n.applyPasteRules&&Ee.setMeta("applyPasteRules",{from:Be,text:Ve})}return!0},joinUp=()=>({state:e,dispatch:t})=>joinUp$1(e,t),joinDown=()=>({state:e,dispatch:t})=>joinDown$1(e,t),joinBackward=()=>({state:e,dispatch:t})=>joinBackward$1(e,t),joinForward=()=>({state:e,dispatch:t})=>joinForward$1(e,t),joinItemBackward=()=>({state:e,dispatch:t,tr:n})=>{try{const Ee=joinPoint(e.doc,e.selection.$from.pos,-1);return Ee==null?!1:(n.join(Ee,2),t&&t(n),!0)}catch{return!1}},joinItemForward=()=>({state:e,dispatch:t,tr:n})=>{try{const Ee=joinPoint(e.doc,e.selection.$from.pos,1);return Ee==null?!1:(n.join(Ee,2),t&&t(n),!0)}catch{return!1}},joinTextblockBackward=()=>({state:e,dispatch:t})=>joinTextblockBackward$1(e,t),joinTextblockForward=()=>({state:e,dispatch:t})=>joinTextblockForward$1(e,t);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let Ee,Re,Ce,Te;for(let Me=0;Me<t.length-1;Me+=1){const De=t[Me];if(/^(cmd|meta|m)$/i.test(De))Te=!0;else if(/^a(lt)?$/i.test(De))Ee=!0;else if(/^(c|ctrl|control)$/i.test(De))Re=!0;else if(/^s(hift)?$/i.test(De))Ce=!0;else if(/^mod$/i.test(De))isiOS()||isMacOS()?Te=!0:Re=!0;else throw new Error(`Unrecognized modifier name: ${De}`)}return Ee&&(n=`Alt-${n}`),Re&&(n=`Ctrl-${n}`),Te&&(n=`Meta-${n}`),Ce&&(n=`Shift-${n}`),n}var keyboardShortcut=e=>({editor:t,view:n,tr:Ee,dispatch:Re})=>{const Ce=normalizeKeyName(e).split(/-(?!$)/),Te=Ce.find(Oe=>!["Alt","Ctrl","Meta","Shift"].includes(Oe)),Me=new KeyboardEvent("keydown",{key:Te==="Space"?" ":Te,altKey:Ce.includes("Alt"),ctrlKey:Ce.includes("Ctrl"),metaKey:Ce.includes("Meta"),shiftKey:Ce.includes("Shift"),bubbles:!0,cancelable:!0}),De=t.captureTransaction(()=>{n.someProp("handleKeyDown",Oe=>Oe(n,Me))});return De==null||De.steps.forEach(Oe=>{const Be=Oe.map(Ee.mapping);Be&&Re&&Ee.maybeStep(Be)}),!0};function isNodeActive(e,t,n={}){const{from:Ee,to:Re,empty:Ce}=e.selection,Te=t?getNodeType(t,e.schema):null,Me=[];e.doc.nodesBetween(Ee,Re,(ze,$e)=>{if(ze.isText)return;const He=Math.max(Ee,$e),Ue=Math.min(Re,$e+ze.nodeSize);Me.push({node:ze,from:He,to:Ue})});const De=Re-Ee,Oe=Me.filter(ze=>Te?Te.name===ze.node.type.name:!0).filter(ze=>objectIncludes(ze.node.attrs,n,{strict:!1}));return Ce?!!Oe.length:Oe.reduce((ze,$e)=>ze+$e.to-$e.from,0)>=De}var lift=(e,t={})=>({state:n,dispatch:Ee})=>{const Re=getNodeType(e,n.schema);return isNodeActive(n,Re,t)?lift$1(n,Ee):!1},liftEmptyBlock=()=>({state:e,dispatch:t})=>liftEmptyBlock$1(e,t),liftListItem=e=>({state:t,dispatch:n})=>{const Ee=getNodeType(e,t.schema);return liftListItem$1(Ee)(t,n)},newlineInCode=()=>({state:e,dispatch:t})=>newlineInCode$1(e,t);function getSchemaTypeNameByName(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function deleteProps(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((Ee,Re)=>(n.includes(Re)||(Ee[Re]=e[Re]),Ee),{})}var resetAttributes=(e,t)=>({tr:n,state:Ee,dispatch:Re})=>{let Ce=null,Te=null;const Me=getSchemaTypeNameByName(typeof e=="string"?e:e.name,Ee.schema);if(!Me)return!1;Me==="node"&&(Ce=getNodeType(e,Ee.schema)),Me==="mark"&&(Te=getMarkType(e,Ee.schema));let De=!1;return n.selection.ranges.forEach(Oe=>{Ee.doc.nodesBetween(Oe.$from.pos,Oe.$to.pos,(Be,ze)=>{Ce&&Ce===Be.type&&(De=!0,Re&&n.setNodeMarkup(ze,void 0,deleteProps(Be.attrs,t))),Te&&Be.marks.length&&Be.marks.forEach($e=>{Te===$e.type&&(De=!0,Re&&n.addMark(ze,ze+Be.nodeSize,Te.create(deleteProps($e.attrs,t))))})})}),De},scrollIntoView=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll=()=>({tr:e,dispatch:t})=>{if(t){const n=new AllSelection(e.doc);e.setSelection(n)}return!0},selectNodeBackward=()=>({state:e,dispatch:t})=>selectNodeBackward$1(e,t),selectNodeForward=()=>({state:e,dispatch:t})=>selectNodeForward$1(e,t),selectParentNode=()=>({state:e,dispatch:t})=>selectParentNode$1(e,t),selectTextblockEnd=()=>({state:e,dispatch:t})=>selectTextblockEnd$1(e,t),selectTextblockStart=()=>({state:e,dispatch:t})=>selectTextblockStart$1(e,t);function createDocument(e,t,n={},Ee={}){return createNodeFromContent(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:Ee.errorOnInvalidContent})}var setContent=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:Ee={}}={})=>({editor:Re,tr:Ce,dispatch:Te,commands:Me})=>{const{doc:De}=Ce;if(Ee.preserveWhitespace!=="full"){const Oe=createDocument(e,Re.schema,Ee,{errorOnInvalidContent:t??Re.options.enableContentCheck});return Te&&Ce.replaceWith(0,De.content.size,Oe).setMeta("preventUpdate",!n),!0}return Te&&Ce.setMeta("preventUpdate",!n),Me.insertContentAt({from:0,to:De.content.size},e,{parseOptions:Ee,errorOnInvalidContent:t??Re.options.enableContentCheck})};function getMarkAttributes(e,t){const n=getMarkType(t,e.schema),{from:Ee,to:Re,empty:Ce}=e.selection,Te=[];Ce?(e.storedMarks&&Te.push(...e.storedMarks),Te.push(...e.selection.$head.marks())):e.doc.nodesBetween(Ee,Re,De=>{Te.push(...De.marks)});const Me=Te.find(De=>De.type.name===n.name);return Me?{...Me.attrs}:{}}function combineTransactionSteps(e,t){const n=new Transform(e);return t.forEach(Ee=>{Ee.steps.forEach(Re=>{n.step(Re)})}),n}function defaultBlockAt(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function findChildrenInRange(e,t,n){const Ee=[];return e.nodesBetween(t.from,t.to,(Re,Ce)=>{n(Re)&&Ee.push({node:Re,pos:Ce})}),Ee}function findParentNodeClosestToPos(e,t){for(let n=e.depth;n>0;n-=1){const Ee=e.node(n);if(t(Ee))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:Ee}}}function findParentNode(e){return t=>findParentNodeClosestToPos(t.$from,e)}function getExtensionField(e,t,n){return e.config[t]===void 0&&e.parent?getExtensionField(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?getExtensionField(e.parent,t,n):null}):e.config[t]}function flattenExtensions(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},Ee=getExtensionField(t,"addExtensions",n);return Ee?[t,...flattenExtensions(Ee())]:t}).flat(10)}function getHTMLFromFragment(e,t){const n=DOMSerializer.fromSchema(t).serializeFragment(e),Re=document.implementation.createHTMLDocument().createElement("div");return Re.appendChild(n),Re.innerHTML}function isFunction(e){return typeof e=="function"}function callOrReturn(e,t=void 0,...n){return isFunction(e)?t?e.bind(t)(...n):e(...n):e}function isEmptyObject(e={}){return Object.keys(e).length===0&&e.constructor===Object}function splitExtensions(e){const t=e.filter(Re=>Re.type==="extension"),n=e.filter(Re=>Re.type==="node"),Ee=e.filter(Re=>Re.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:Ee}}function getAttributesFromExtensions(e){const t=[],{nodeExtensions:n,markExtensions:Ee}=splitExtensions(e),Re=[...n,...Ee],Ce={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(Te=>{const Me={name:Te.name,options:Te.options,storage:Te.storage,extensions:Re},De=getExtensionField(Te,"addGlobalAttributes",Me);if(!De)return;De().forEach(Be=>{Be.types.forEach(ze=>{Object.entries(Be.attributes).forEach(([$e,He])=>{t.push({type:ze,name:$e,attribute:{...Ce,...He}})})})})}),Re.forEach(Te=>{const Me={name:Te.name,options:Te.options,storage:Te.storage},De=getExtensionField(Te,"addAttributes",Me);if(!De)return;const Oe=De();Object.entries(Oe).forEach(([Be,ze])=>{const $e={...Ce,...ze};typeof($e==null?void 0:$e.default)=="function"&&($e.default=$e.default()),$e!=null&&$e.isRequired&&($e==null?void 0:$e.default)===void 0&&delete $e.default,t.push({type:Te.name,name:Be,attribute:$e})})}),t}function mergeAttributes(...e){return e.filter(t=>!!t).reduce((t,n)=>{const Ee={...t};return Object.entries(n).forEach(([Re,Ce])=>{if(!Ee[Re]){Ee[Re]=Ce;return}if(Re==="class"){const Me=Ce?String(Ce).split(" "):[],De=Ee[Re]?Ee[Re].split(" "):[],Oe=Me.filter(Be=>!De.includes(Be));Ee[Re]=[...De,...Oe].join(" ")}else if(Re==="style"){const Me=Ce?Ce.split(";").map(Be=>Be.trim()).filter(Boolean):[],De=Ee[Re]?Ee[Re].split(";").map(Be=>Be.trim()).filter(Boolean):[],Oe=new Map;De.forEach(Be=>{const[ze,$e]=Be.split(":").map(He=>He.trim());Oe.set(ze,$e)}),Me.forEach(Be=>{const[ze,$e]=Be.split(":").map(He=>He.trim());Oe.set(ze,$e)}),Ee[Re]=Array.from(Oe.entries()).map(([Be,ze])=>`${Be}: ${ze}`).join("; ")}else Ee[Re]=Ce}),Ee},{})}function getRenderedAttributes(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,Ee)=>mergeAttributes(n,Ee),{})}function fromString(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function injectExtensionAttributesToParseRule(e,t){return"style"in e?e:{...e,getAttrs:n=>{const Ee=e.getAttrs?e.getAttrs(n):e.attrs;if(Ee===!1)return!1;const Re=t.reduce((Ce,Te)=>{const Me=Te.attribute.parseHTML?Te.attribute.parseHTML(n):fromString(n.getAttribute(Te.name));return Me==null?Ce:{...Ce,[Te.name]:Me}},{});return{...Ee,...Re}}}}function cleanUpSchemaItem(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&isEmptyObject(n)?!1:n!=null))}function buildAttributeSpec(e){var t,n;const Ee={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(Ee.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(Ee.validate=e.attribute.validate),[e.name,Ee]}function getSchemaByResolvedExtensions(e,t){var n;const Ee=getAttributesFromExtensions(e),{nodeExtensions:Re,markExtensions:Ce}=splitExtensions(e),Te=(n=Re.find(Oe=>getExtensionField(Oe,"topNode")))==null?void 0:n.name,Me=Object.fromEntries(Re.map(Oe=>{const Be=Ee.filter(qe=>qe.type===Oe.name),ze={name:Oe.name,options:Oe.options,storage:Oe.storage,editor:t},$e=e.reduce((qe,Ge)=>{const Ye=getExtensionField(Ge,"extendNodeSchema",ze);return{...qe,...Ye?Ye(Oe):{}}},{}),He=cleanUpSchemaItem({...$e,content:callOrReturn(getExtensionField(Oe,"content",ze)),marks:callOrReturn(getExtensionField(Oe,"marks",ze)),group:callOrReturn(getExtensionField(Oe,"group",ze)),inline:callOrReturn(getExtensionField(Oe,"inline",ze)),atom:callOrReturn(getExtensionField(Oe,"atom",ze)),selectable:callOrReturn(getExtensionField(Oe,"selectable",ze)),draggable:callOrReturn(getExtensionField(Oe,"draggable",ze)),code:callOrReturn(getExtensionField(Oe,"code",ze)),whitespace:callOrReturn(getExtensionField(Oe,"whitespace",ze)),linebreakReplacement:callOrReturn(getExtensionField(Oe,"linebreakReplacement",ze)),defining:callOrReturn(getExtensionField(Oe,"defining",ze)),isolating:callOrReturn(getExtensionField(Oe,"isolating",ze)),attrs:Object.fromEntries(Be.map(buildAttributeSpec))}),Ue=callOrReturn(getExtensionField(Oe,"parseHTML",ze));Ue&&(He.parseDOM=Ue.map(qe=>injectExtensionAttributesToParseRule(qe,Be)));const Ve=getExtensionField(Oe,"renderHTML",ze);Ve&&(He.toDOM=qe=>Ve({node:qe,HTMLAttributes:getRenderedAttributes(qe,Be)}));const We=getExtensionField(Oe,"renderText",ze);return We&&(He.toText=We),[Oe.name,He]})),De=Object.fromEntries(Ce.map(Oe=>{const Be=Ee.filter(We=>We.type===Oe.name),ze={name:Oe.name,options:Oe.options,storage:Oe.storage,editor:t},$e=e.reduce((We,qe)=>{const Ge=getExtensionField(qe,"extendMarkSchema",ze);return{...We,...Ge?Ge(Oe):{}}},{}),He=cleanUpSchemaItem({...$e,inclusive:callOrReturn(getExtensionField(Oe,"inclusive",ze)),excludes:callOrReturn(getExtensionField(Oe,"excludes",ze)),group:callOrReturn(getExtensionField(Oe,"group",ze)),spanning:callOrReturn(getExtensionField(Oe,"spanning",ze)),code:callOrReturn(getExtensionField(Oe,"code",ze)),attrs:Object.fromEntries(Be.map(buildAttributeSpec))}),Ue=callOrReturn(getExtensionField(Oe,"parseHTML",ze));Ue&&(He.parseDOM=Ue.map(We=>injectExtensionAttributesToParseRule(We,Be)));const Ve=getExtensionField(Oe,"renderHTML",ze);return Ve&&(He.toDOM=We=>Ve({mark:We,HTMLAttributes:getRenderedAttributes(We,Be)})),[Oe.name,He]}));return new Schema({topNode:Te,nodes:Me,marks:De})}function findDuplicates(e){const t=e.filter((n,Ee)=>e.indexOf(n)!==Ee);return Array.from(new Set(t))}function sortExtensions(e){return e.sort((n,Ee)=>{const Re=getExtensionField(n,"priority")||100,Ce=getExtensionField(Ee,"priority")||100;return Re>Ce?-1:Re<Ce?1:0})}function resolveExtensions(e){const t=sortExtensions(flattenExtensions(e)),n=findDuplicates(t.map(Ee=>Ee.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(Ee=>`'${Ee}'`).join(", ")}]. This can lead to issues.`),t}function getTextBetween(e,t,n){const{from:Ee,to:Re}=t,{blockSeparator:Ce=`

`,textSerializers:Te={}}=n||{};let Me="";return e.nodesBetween(Ee,Re,(De,Oe,Be,ze)=>{var $e;De.isBlock&&Oe>Ee&&(Me+=Ce);const He=Te==null?void 0:Te[De.type.name];if(He)return Be&&(Me+=He({node:De,pos:Oe,parent:Be,index:ze,range:t})),!1;De.isText&&(Me+=($e=De==null?void 0:De.text)==null?void 0:$e.slice(Math.max(Ee,Oe)-Oe,Re-Oe))}),Me}function getText(e,t){const n={from:0,to:e.content.size};return getTextBetween(e,n,t)}function getTextSerializersFromSchema(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function getNodeAttributes(e,t){const n=getNodeType(t,e.schema),{from:Ee,to:Re}=e.selection,Ce=[];e.doc.nodesBetween(Ee,Re,Me=>{Ce.push(Me)});const Te=Ce.reverse().find(Me=>Me.type.name===n.name);return Te?{...Te.attrs}:{}}function getAttributes(e,t){const n=getSchemaTypeNameByName(typeof t=="string"?t:t.name,e.schema);return n==="node"?getNodeAttributes(e,t):n==="mark"?getMarkAttributes(e,t):{}}function removeDuplicates(e,t=JSON.stringify){const n={};return e.filter(Ee=>{const Re=t(Ee);return Object.prototype.hasOwnProperty.call(n,Re)?!1:n[Re]=!0})}function simplifyChangedRanges(e){const t=removeDuplicates(e);return t.length===1?t:t.filter((n,Ee)=>!t.filter((Ce,Te)=>Te!==Ee).some(Ce=>n.oldRange.from>=Ce.oldRange.from&&n.oldRange.to<=Ce.oldRange.to&&n.newRange.from>=Ce.newRange.from&&n.newRange.to<=Ce.newRange.to))}function getChangedRanges(e){const{mapping:t,steps:n}=e,Ee=[];return t.maps.forEach((Re,Ce)=>{const Te=[];if(Re.ranges.length)Re.forEach((Me,De)=>{Te.push({from:Me,to:De})});else{const{from:Me,to:De}=n[Ce];if(Me===void 0||De===void 0)return;Te.push({from:Me,to:De})}Te.forEach(({from:Me,to:De})=>{const Oe=t.slice(Ce).map(Me,-1),Be=t.slice(Ce).map(De),ze=t.invert().map(Oe,-1),$e=t.invert().map(Be);Ee.push({oldRange:{from:ze,to:$e},newRange:{from:Oe,to:Be}})})}),simplifyChangedRanges(Ee)}function getMarksBetween(e,t,n){const Ee=[];return e===t?n.resolve(e).marks().forEach(Re=>{const Ce=n.resolve(e),Te=getMarkRange(Ce,Re.type);Te&&Ee.push({mark:Re,...Te})}):n.nodesBetween(e,t,(Re,Ce)=>{!Re||(Re==null?void 0:Re.nodeSize)===void 0||Ee.push(...Re.marks.map(Te=>({from:Ce,to:Ce+Re.nodeSize,mark:Te})))}),Ee}var getNodeAtPosition=(e,t,n,Ee=20)=>{const Re=e.doc.resolve(n);let Ce=Ee,Te=null;for(;Ce>0&&Te===null;){const Me=Re.node(Ce);(Me==null?void 0:Me.type.name)===t?Te=Me:Ce-=1}return[Te,Ce]};function getSchemaTypeByName(e,t){return t.nodes[e]||t.marks[e]||null}function getSplittedAttributes(e,t,n){return Object.fromEntries(Object.entries(n).filter(([Ee])=>{const Re=e.find(Ce=>Ce.type===t&&Ce.name===Ee);return Re?Re.attribute.keepOnSplit:!1}))}var getTextContentFromNodes=(e,t=500)=>{let n="";const Ee=e.parentOffset;return e.parent.nodesBetween(Math.max(0,Ee-t),Ee,(Re,Ce,Te,Me)=>{var De,Oe;const Be=((Oe=(De=Re.type.spec).toText)==null?void 0:Oe.call(De,{node:Re,pos:Ce,parent:Te,index:Me}))||Re.textContent||"%leaf%";n+=Re.isAtom&&!Re.isText?Be:Be.slice(0,Math.max(0,Ee-Ce))}),n};function isMarkActive(e,t,n={}){const{empty:Ee,ranges:Re}=e.selection,Ce=t?getMarkType(t,e.schema):null;if(Ee)return!!(e.storedMarks||e.selection.$from.marks()).filter(ze=>Ce?Ce.name===ze.type.name:!0).find(ze=>objectIncludes(ze.attrs,n,{strict:!1}));let Te=0;const Me=[];if(Re.forEach(({$from:ze,$to:$e})=>{const He=ze.pos,Ue=$e.pos;e.doc.nodesBetween(He,Ue,(Ve,We)=>{if(!Ve.isText&&!Ve.marks.length)return;const qe=Math.max(He,We),Ge=Math.min(Ue,We+Ve.nodeSize),Ye=Ge-qe;Te+=Ye,Me.push(...Ve.marks.map(Ke=>({mark:Ke,from:qe,to:Ge})))})}),Te===0)return!1;const De=Me.filter(ze=>Ce?Ce.name===ze.mark.type.name:!0).filter(ze=>objectIncludes(ze.mark.attrs,n,{strict:!1})).reduce((ze,$e)=>ze+$e.to-$e.from,0),Oe=Me.filter(ze=>Ce?ze.mark.type!==Ce&&ze.mark.type.excludes(Ce):!0).reduce((ze,$e)=>ze+$e.to-$e.from,0);return(De>0?De+Oe:De)>=Te}function isActive(e,t,n={}){if(!t)return isNodeActive(e,null,n)||isMarkActive(e,null,n);const Ee=getSchemaTypeNameByName(t,e.schema);return Ee==="node"?isNodeActive(e,t,n):Ee==="mark"?isMarkActive(e,t,n):!1}var isAtEndOfNode=(e,t)=>{const{$from:n,$to:Ee,$anchor:Re}=e.selection;if(t){const Ce=findParentNode(Me=>Me.type.name===t)(e.selection);if(!Ce)return!1;const Te=e.doc.resolve(Ce.pos+1);return Re.pos+1===Te.end()}return!(Ee.parentOffset<Ee.parent.nodeSize-2||n.pos!==Ee.pos)},isAtStartOfNode=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function isExtensionRulesEnabled(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function isList(e,t){const{nodeExtensions:n}=splitExtensions(t),Ee=n.find(Te=>Te.name===e);if(!Ee)return!1;const Re={name:Ee.name,options:Ee.options,storage:Ee.storage},Ce=callOrReturn(getExtensionField(Ee,"group",Re));return typeof Ce!="string"?!1:Ce.split(" ").includes("list")}function isNodeEmpty(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var Ee;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((Ee=e.text)!=null?Ee:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let Re=!0;return e.content.forEach(Ce=>{Re!==!1&&(isNodeEmpty(Ce,{ignoreWhitespace:n,checkChildren:t})||(Re=!1))}),Re}return!1}function isNodeSelection(e){return e instanceof NodeSelection}var MappablePosition=class fc{constructor(t){this.position=t}static fromJSON(t){return new fc(t.position)}toJSON(){return{position:this.position}}};function getUpdatedPosition(e,t){const n=t.mapping.mapResult(e.position);return{position:new MappablePosition(n.pos),mapResult:n}}function createMappablePosition(e){return new MappablePosition(e)}function canSetMark(e,t,n){var Ee;const{selection:Re}=t;let Ce=null;if(isTextSelection(Re)&&(Ce=Re.$cursor),Ce){const Me=(Ee=e.storedMarks)!=null?Ee:Ce.marks();return Ce.parent.type.allowsMarkType(n)&&(!!n.isInSet(Me)||!Me.some(Oe=>Oe.type.excludes(n)))}const{ranges:Te}=Re;return Te.some(({$from:Me,$to:De})=>{let Oe=Me.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(Me.pos,De.pos,(Be,ze,$e)=>{if(Oe)return!1;if(Be.isInline){const He=!$e||$e.type.allowsMarkType(n),Ue=!!n.isInSet(Be.marks)||!Be.marks.some(Ve=>Ve.type.excludes(n));Oe=He&&Ue}return!Oe}),Oe})}var setMark=(e,t={})=>({tr:n,state:Ee,dispatch:Re})=>{const{selection:Ce}=n,{empty:Te,ranges:Me}=Ce,De=getMarkType(e,Ee.schema);if(Re)if(Te){const Oe=getMarkAttributes(Ee,De);n.addStoredMark(De.create({...Oe,...t}))}else Me.forEach(Oe=>{const Be=Oe.$from.pos,ze=Oe.$to.pos;Ee.doc.nodesBetween(Be,ze,($e,He)=>{const Ue=Math.max(He,Be),Ve=Math.min(He+$e.nodeSize,ze);$e.marks.find(qe=>qe.type===De)?$e.marks.forEach(qe=>{De===qe.type&&n.addMark(Ue,Ve,De.create({...qe.attrs,...t}))}):n.addMark(Ue,Ve,De.create(t))})});return canSetMark(Ee,n,De)},setMeta=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode=(e,t={})=>({state:n,dispatch:Ee,chain:Re})=>{const Ce=getNodeType(e,n.schema);let Te;return n.selection.$anchor.sameParent(n.selection.$head)&&(Te=n.selection.$anchor.parent.attrs),Ce.isTextblock?Re().command(({commands:Me})=>setBlockType(Ce,{...Te,...t})(n)?!0:Me.clearNodes()).command(({state:Me})=>setBlockType(Ce,{...Te,...t})(Me,Ee)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=e=>({tr:t,dispatch:n})=>{if(n){const{doc:Ee}=t,Re=minMax(e,0,Ee.content.size),Ce=NodeSelection.create(Ee,Re);t.setSelection(Ce)}return!0},setTextDirection=(e,t)=>({tr:n,state:Ee,dispatch:Re})=>{const{selection:Ce}=Ee;let Te,Me;return typeof t=="number"?(Te=t,Me=t):t&&"from"in t&&"to"in t?(Te=t.from,Me=t.to):(Te=Ce.from,Me=Ce.to),Re&&n.doc.nodesBetween(Te,Me,(De,Oe)=>{De.isText||n.setNodeMarkup(Oe,void 0,{...De.attrs,dir:e})}),!0},setTextSelection=e=>({tr:t,dispatch:n})=>{if(n){const{doc:Ee}=t,{from:Re,to:Ce}=typeof e=="number"?{from:e,to:e}:e,Te=TextSelection.atStart(Ee).from,Me=TextSelection.atEnd(Ee).to,De=minMax(Re,Te,Me),Oe=minMax(Ce,Te,Me),Be=TextSelection.create(Ee,De,Oe);t.setSelection(Be)}return!0},sinkListItem=e=>({state:t,dispatch:n})=>{const Ee=getNodeType(e,t.schema);return sinkListItem$1(Ee)(t,n)};function ensureMarks(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const Ee=n.filter(Re=>t==null?void 0:t.includes(Re.type.name));e.tr.ensureMarks(Ee)}}var splitBlock=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:Ee,editor:Re})=>{const{selection:Ce,doc:Te}=t,{$from:Me,$to:De}=Ce,Oe=Re.extensionManager.attributes,Be=getSplittedAttributes(Oe,Me.node().type.name,Me.node().attrs);if(Ce instanceof NodeSelection&&Ce.node.isBlock)return!Me.parentOffset||!canSplit(Te,Me.pos)?!1:(Ee&&(e&&ensureMarks(n,Re.extensionManager.splittableMarks),t.split(Me.pos).scrollIntoView()),!0);if(!Me.parent.isBlock)return!1;const ze=De.parentOffset===De.parent.content.size,$e=Me.depth===0?void 0:defaultBlockAt(Me.node(-1).contentMatchAt(Me.indexAfter(-1)));let He=ze&&$e?[{type:$e,attrs:Be}]:void 0,Ue=canSplit(t.doc,t.mapping.map(Me.pos),1,He);if(!He&&!Ue&&canSplit(t.doc,t.mapping.map(Me.pos),1,$e?[{type:$e}]:void 0)&&(Ue=!0,He=$e?[{type:$e,attrs:Be}]:void 0),Ee){if(Ue&&(Ce instanceof TextSelection&&t.deleteSelection(),t.split(t.mapping.map(Me.pos),1,He),$e&&!ze&&!Me.parentOffset&&Me.parent.type!==$e)){const Ve=t.mapping.map(Me.before()),We=t.doc.resolve(Ve);Me.node(-1).canReplaceWith(We.index(),We.index()+1,$e)&&t.setNodeMarkup(t.mapping.map(Me.before()),$e)}e&&ensureMarks(n,Re.extensionManager.splittableMarks),t.scrollIntoView()}return Ue},splitListItem=(e,t={})=>({tr:n,state:Ee,dispatch:Re,editor:Ce})=>{var Te;const Me=getNodeType(e,Ee.schema),{$from:De,$to:Oe}=Ee.selection,Be=Ee.selection.node;if(Be&&Be.isBlock||De.depth<2||!De.sameParent(Oe))return!1;const ze=De.node(-1);if(ze.type!==Me)return!1;const $e=Ce.extensionManager.attributes;if(De.parent.content.size===0&&De.node(-1).childCount===De.indexAfter(-1)){if(De.depth===2||De.node(-3).type!==Me||De.index(-2)!==De.node(-2).childCount-1)return!1;if(Re){let qe=Fragment.empty;const Ge=De.index(-1)?1:De.index(-2)?2:3;for(let St=De.depth-Ge;St>=De.depth-3;St-=1)qe=Fragment.from(De.node(St).copy(qe));const Ye=De.indexAfter(-1)<De.node(-2).childCount?1:De.indexAfter(-2)<De.node(-3).childCount?2:3,Ke={...getSplittedAttributes($e,De.node().type.name,De.node().attrs),...t},Xe=((Te=Me.contentMatch.defaultType)==null?void 0:Te.createAndFill(Ke))||void 0;qe=qe.append(Fragment.from(Me.createAndFill(null,Xe)||void 0));const Ze=De.before(De.depth-(Ge-1));n.replace(Ze,De.after(-Ye),new Slice(qe,4-Ge,0));let er=-1;n.doc.nodesBetween(Ze,n.doc.content.size,(St,ar)=>{if(er>-1)return!1;St.isTextblock&&St.content.size===0&&(er=ar+1)}),er>-1&&n.setSelection(TextSelection.near(n.doc.resolve(er))),n.scrollIntoView()}return!0}const He=Oe.pos===De.end()?ze.contentMatchAt(0).defaultType:null,Ue={...getSplittedAttributes($e,ze.type.name,ze.attrs),...t},Ve={...getSplittedAttributes($e,De.node().type.name,De.node().attrs),...t};n.delete(De.pos,Oe.pos);const We=He?[{type:Me,attrs:Ue},{type:He,attrs:Ve}]:[{type:Me,attrs:Ue}];if(!canSplit(n.doc,De.pos,2))return!1;if(Re){const{selection:qe,storedMarks:Ge}=Ee,{splittableMarks:Ye}=Ce.extensionManager,Ke=Ge||qe.$to.parentOffset&&qe.$from.marks();if(n.split(De.pos,2,We).scrollIntoView(),!Ke||!Re)return!0;const Xe=Ke.filter(Ze=>Ye.includes(Ze.type.name));n.ensureMarks(Xe)}return!0},joinListBackwards=(e,t)=>{const n=findParentNode(Te=>Te.type===t)(e.selection);if(!n)return!0;const Ee=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(Ee===void 0)return!0;const Re=e.doc.nodeAt(Ee);return n.node.type===(Re==null?void 0:Re.type)&&canJoin(e.doc,n.pos)&&e.join(n.pos),!0},joinListForwards=(e,t)=>{const n=findParentNode(Te=>Te.type===t)(e.selection);if(!n)return!0;const Ee=e.doc.resolve(n.start).after(n.depth);if(Ee===void 0)return!0;const Re=e.doc.nodeAt(Ee);return n.node.type===(Re==null?void 0:Re.type)&&canJoin(e.doc,Ee)&&e.join(Ee),!0},toggleList=(e,t,n,Ee={})=>({editor:Re,tr:Ce,state:Te,dispatch:Me,chain:De,commands:Oe,can:Be})=>{const{extensions:ze,splittableMarks:$e}=Re.extensionManager,He=getNodeType(e,Te.schema),Ue=getNodeType(t,Te.schema),{selection:Ve,storedMarks:We}=Te,{$from:qe,$to:Ge}=Ve,Ye=qe.blockRange(Ge),Ke=We||Ve.$to.parentOffset&&Ve.$from.marks();if(!Ye)return!1;const Xe=findParentNode(Ze=>isList(Ze.type.name,ze))(Ve);if(Ye.depth>=1&&Xe&&Ye.depth-Xe.depth<=1){if(Xe.node.type===He)return Oe.liftListItem(Ue);if(isList(Xe.node.type.name,ze)&&He.validContent(Xe.node.content)&&Me)return De().command(()=>(Ce.setNodeMarkup(Xe.pos,He),!0)).command(()=>joinListBackwards(Ce,He)).command(()=>joinListForwards(Ce,He)).run()}return!n||!Ke||!Me?De().command(()=>Be().wrapInList(He,Ee)?!0:Oe.clearNodes()).wrapInList(He,Ee).command(()=>joinListBackwards(Ce,He)).command(()=>joinListForwards(Ce,He)).run():De().command(()=>{const Ze=Be().wrapInList(He,Ee),er=Ke.filter(St=>$e.includes(St.type.name));return Ce.ensureMarks(er),Ze?!0:Oe.clearNodes()}).wrapInList(He,Ee).command(()=>joinListBackwards(Ce,He)).command(()=>joinListForwards(Ce,He)).run()},toggleMark=(e,t={},n={})=>({state:Ee,commands:Re})=>{const{extendEmptyMarkRange:Ce=!1}=n,Te=getMarkType(e,Ee.schema);return isMarkActive(Ee,Te,t)?Re.unsetMark(Te,{extendEmptyMarkRange:Ce}):Re.setMark(Te,t)},toggleNode=(e,t,n={})=>({state:Ee,commands:Re})=>{const Ce=getNodeType(e,Ee.schema),Te=getNodeType(t,Ee.schema),Me=isNodeActive(Ee,Ce,n);let De;return Ee.selection.$anchor.sameParent(Ee.selection.$head)&&(De=Ee.selection.$anchor.parent.attrs),Me?Re.setNode(Te,De):Re.setNode(Ce,{...De,...n})},toggleWrap=(e,t={})=>({state:n,commands:Ee})=>{const Re=getNodeType(e,n.schema);return isNodeActive(n,Re,t)?Ee.lift(Re):Ee.wrapIn(Re,t)},undoInputRule=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let Ee=0;Ee<n.length;Ee+=1){const Re=n[Ee];let Ce;if(Re.spec.isInputRules&&(Ce=Re.getState(e))){if(t){const Te=e.tr,Me=Ce.transform;for(let De=Me.steps.length-1;De>=0;De-=1)Te.step(Me.steps[De].invert(Me.docs[De]));if(Ce.text){const De=Te.doc.resolve(Ce.from).marks();Te.replaceWith(Ce.from,Ce.to,e.schema.text(Ce.text,De))}else Te.delete(Ce.from,Ce.to)}return!0}}return!1},unsetAllMarks=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:Ee,ranges:Re}=n;return Ee||t&&Re.forEach(Ce=>{e.removeMark(Ce.$from.pos,Ce.$to.pos)}),!0},unsetMark=(e,t={})=>({tr:n,state:Ee,dispatch:Re})=>{var Ce;const{extendEmptyMarkRange:Te=!1}=t,{selection:Me}=n,De=getMarkType(e,Ee.schema),{$from:Oe,empty:Be,ranges:ze}=Me;if(!Re)return!0;if(Be&&Te){let{from:$e,to:He}=Me;const Ue=(Ce=Oe.marks().find(We=>We.type===De))==null?void 0:Ce.attrs,Ve=getMarkRange(Oe,De,Ue);Ve&&($e=Ve.from,He=Ve.to),n.removeMark($e,He,De)}else ze.forEach($e=>{n.removeMark($e.$from.pos,$e.$to.pos,De)});return n.removeStoredMark(De),!0},unsetTextDirection=e=>({tr:t,state:n,dispatch:Ee})=>{const{selection:Re}=n;let Ce,Te;return typeof e=="number"?(Ce=e,Te=e):e&&"from"in e&&"to"in e?(Ce=e.from,Te=e.to):(Ce=Re.from,Te=Re.to),Ee&&t.doc.nodesBetween(Ce,Te,(Me,De)=>{if(Me.isText)return;const Oe={...Me.attrs};delete Oe.dir,t.setNodeMarkup(De,void 0,Oe)}),!0},updateAttributes=(e,t={})=>({tr:n,state:Ee,dispatch:Re})=>{let Ce=null,Te=null;const Me=getSchemaTypeNameByName(typeof e=="string"?e:e.name,Ee.schema);if(!Me)return!1;Me==="node"&&(Ce=getNodeType(e,Ee.schema)),Me==="mark"&&(Te=getMarkType(e,Ee.schema));let De=!1;return n.selection.ranges.forEach(Oe=>{const Be=Oe.$from.pos,ze=Oe.$to.pos;let $e,He,Ue,Ve;n.selection.empty?Ee.doc.nodesBetween(Be,ze,(We,qe)=>{Ce&&Ce===We.type&&(De=!0,Ue=Math.max(qe,Be),Ve=Math.min(qe+We.nodeSize,ze),$e=qe,He=We)}):Ee.doc.nodesBetween(Be,ze,(We,qe)=>{qe<Be&&Ce&&Ce===We.type&&(De=!0,Ue=Math.max(qe,Be),Ve=Math.min(qe+We.nodeSize,ze),$e=qe,He=We),qe>=Be&&qe<=ze&&(Ce&&Ce===We.type&&(De=!0,Re&&n.setNodeMarkup(qe,void 0,{...We.attrs,...t})),Te&&We.marks.length&&We.marks.forEach(Ge=>{if(Te===Ge.type&&(De=!0,Re)){const Ye=Math.max(qe,Be),Ke=Math.min(qe+We.nodeSize,ze);n.addMark(Ye,Ke,Te.create({...Ge.attrs,...t}))}}))}),He&&($e!==void 0&&Re&&n.setNodeMarkup($e,void 0,{...He.attrs,...t}),Te&&He.marks.length&&He.marks.forEach(We=>{Te===We.type&&Re&&n.addMark(Ue,Ve,Te.create({...We.attrs,...t}))}))}),De},wrapIn=(e,t={})=>({state:n,dispatch:Ee})=>{const Re=getNodeType(e,n.schema);return wrapIn$1(Re,t)(n,Ee)},wrapInList=(e,t={})=>({state:n,dispatch:Ee})=>{const Re=getNodeType(e,n.schema);return wrapInList$1(Re,t)(n,Ee)},EventEmitter=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(Ee=>Ee.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(Ee=>Ee!==t):delete this.callbacks[e]),this}once(e,t){const n=(...Ee)=>{this.off(e,n),t.apply(this,Ee)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},InputRule=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},inputRuleMatcherHandler=(e,t)=>{if(isRegExp(t))return t.exec(e);const n=t(e);if(!n)return null;const Ee=[n.text];return Ee.index=n.index,Ee.input=e,Ee.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),Ee.push(n.replaceWith)),Ee};function run$2(e){var t;const{editor:n,from:Ee,to:Re,text:Ce,rules:Te,plugin:Me}=e,{view:De}=n;if(De.composing)return!1;const Oe=De.state.doc.resolve(Ee);if(Oe.parent.type.spec.code||(t=Oe.nodeBefore||Oe.nodeAfter)!=null&&t.marks.find($e=>$e.type.spec.code))return!1;let Be=!1;const ze=getTextContentFromNodes(Oe)+Ce;return Te.forEach($e=>{if(Be)return;const He=inputRuleMatcherHandler(ze,$e.find);if(!He)return;const Ue=De.state.tr,Ve=createChainableState({state:De.state,transaction:Ue}),We={from:Ee-(He[0].length-Ce.length),to:Re},{commands:qe,chain:Ge,can:Ye}=new CommandManager({editor:n,state:Ve});$e.handler({state:Ve,range:We,match:He,commands:qe,chain:Ge,can:Ye})===null||!Ue.steps.length||($e.undoable&&Ue.setMeta(Me,{transform:Ue,from:Ee,to:Re,text:Ce}),De.dispatch(Ue),Be=!0)}),Be}function inputRulesPlugin(e){const{editor:t,rules:n}=e,Ee=new Plugin({state:{init(){return null},apply(Re,Ce,Te){const Me=Re.getMeta(Ee);if(Me)return Me;const De=Re.getMeta("applyInputRules");return!!De&&setTimeout(()=>{let{text:Be}=De;typeof Be=="string"?Be=Be:Be=getHTMLFromFragment(Fragment.from(Be),Te.schema);const{from:ze}=De,$e=ze+Be.length;run$2({editor:t,from:ze,to:$e,text:Be,rules:n,plugin:Ee})}),Re.selectionSet||Re.docChanged?null:Ce}},props:{handleTextInput(Re,Ce,Te,Me){return run$2({editor:t,from:Ce,to:Te,text:Me,rules:n,plugin:Ee})},handleDOMEvents:{compositionend:Re=>(setTimeout(()=>{const{$cursor:Ce}=Re.state.selection;Ce&&run$2({editor:t,from:Ce.pos,to:Ce.pos,text:"",rules:n,plugin:Ee})}),!1)},handleKeyDown(Re,Ce){if(Ce.key!=="Enter")return!1;const{$cursor:Te}=Re.state.selection;return Te?run$2({editor:t,from:Te.pos,to:Te.pos,text:`
`,rules:n,plugin:Ee}):!1}},isInputRules:!0});return Ee}function getType(e){return Object.prototype.toString.call(e).slice(8,-1)}function isPlainObject(e){return getType(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function mergeDeep(e,t){const n={...e};return isPlainObject(e)&&isPlainObject(t)&&Object.keys(t).forEach(Ee=>{isPlainObject(t[Ee])&&isPlainObject(e[Ee])?n[Ee]=mergeDeep(e[Ee],t[Ee]):n[Ee]=t[Ee]}),n}var Extendable=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Mark=class mc extends Extendable{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new mc(n)}static handleExit({editor:t,mark:n}){const{tr:Ee}=t.state,Re=t.state.selection.$from;if(Re.pos===Re.end()){const Te=Re.marks();if(!!!Te.find(Oe=>(Oe==null?void 0:Oe.type.name)===n.name))return!1;const De=Te.find(Oe=>(Oe==null?void 0:Oe.type.name)===n.name);return De&&Ee.removeStoredMark(De),Ee.insertText(" ",Re.pos),t.view.dispatch(Ee),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function isNumber(e){return typeof e=="number"}var PasteRule=class{constructor(e){this.find=e.find,this.handler=e.handler}},pasteRuleMatcherHandler=(e,t,n)=>{if(isRegExp(t))return[...e.matchAll(t)];const Ee=t(e,n);return Ee?Ee.map(Re=>{const Ce=[Re.text];return Ce.index=Re.index,Ce.input=e,Ce.data=Re.data,Re.replaceWith&&(Re.text.includes(Re.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),Ce.push(Re.replaceWith)),Ce}):[]};function run2(e){const{editor:t,state:n,from:Ee,to:Re,rule:Ce,pasteEvent:Te,dropEvent:Me}=e,{commands:De,chain:Oe,can:Be}=new CommandManager({editor:t,state:n}),ze=[];return n.doc.nodesBetween(Ee,Re,(He,Ue)=>{var Ve,We,qe,Ge,Ye;if((We=(Ve=He.type)==null?void 0:Ve.spec)!=null&&We.code||!(He.isText||He.isTextblock||He.isInline))return;const Ke=(Ye=(Ge=(qe=He.content)==null?void 0:qe.size)!=null?Ge:He.nodeSize)!=null?Ye:0,Xe=Math.max(Ee,Ue),Ze=Math.min(Re,Ue+Ke);if(Xe>=Ze)return;const er=He.isText?He.text||"":He.textBetween(Xe-Ue,Ze-Ue,void 0,"");pasteRuleMatcherHandler(er,Ce.find,Te).forEach(ar=>{if(ar.index===void 0)return;const hr=Xe+ar.index+1,ur=hr+ar[0].length,dr={from:n.tr.mapping.map(hr),to:n.tr.mapping.map(ur)},vr=Ce.handler({state:n,range:dr,match:ar,commands:De,chain:Oe,can:Be,pasteEvent:Te,dropEvent:Me});ze.push(vr)})}),ze.every(He=>He!==null)}var tiptapDragFromOtherEditor=null,createClipboardPasteEvent=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function pasteRulesPlugin(e){const{editor:t,rules:n}=e;let Ee=null,Re=!1,Ce=!1,Te=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,Me;try{Me=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{Me=null}const De=({state:Be,from:ze,to:$e,rule:He,pasteEvt:Ue})=>{const Ve=Be.tr,We=createChainableState({state:Be,transaction:Ve});if(!(!run2({editor:t,state:We,from:Math.max(ze-1,0),to:$e.b-1,rule:He,pasteEvent:Ue,dropEvent:Me})||!Ve.steps.length)){try{Me=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{Me=null}return Te=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,Ve}};return n.map(Be=>new Plugin({view(ze){const $e=Ue=>{var Ve;Ee=(Ve=ze.dom.parentElement)!=null&&Ve.contains(Ue.target)?ze.dom.parentElement:null,Ee&&(tiptapDragFromOtherEditor=t)},He=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",$e),window.addEventListener("dragend",He),{destroy(){window.removeEventListener("dragstart",$e),window.removeEventListener("dragend",He)}}},props:{handleDOMEvents:{drop:(ze,$e)=>{if(Ce=Ee===ze.dom.parentElement,Me=$e,!Ce){const He=tiptapDragFromOtherEditor;He!=null&&He.isEditable&&setTimeout(()=>{const Ue=He.state.selection;Ue&&He.commands.deleteRange({from:Ue.from,to:Ue.to})},10)}return!1},paste:(ze,$e)=>{var He;const Ue=(He=$e.clipboardData)==null?void 0:He.getData("text/html");return Te=$e,Re=!!(Ue!=null&&Ue.includes("data-pm-slice")),!1}}},appendTransaction:(ze,$e,He)=>{const Ue=ze[0],Ve=Ue.getMeta("uiEvent")==="paste"&&!Re,We=Ue.getMeta("uiEvent")==="drop"&&!Ce,qe=Ue.getMeta("applyPasteRules"),Ge=!!qe;if(!Ve&&!We&&!Ge)return;if(Ge){let{text:Xe}=qe;typeof Xe=="string"?Xe=Xe:Xe=getHTMLFromFragment(Fragment.from(Xe),He.schema);const{from:Ze}=qe,er=Ze+Xe.length,St=createClipboardPasteEvent(Xe);return De({rule:Be,state:He,from:Ze,to:{b:er},pasteEvt:St})}const Ye=$e.doc.content.findDiffStart(He.doc.content),Ke=$e.doc.content.findDiffEnd(He.doc.content);if(!(!isNumber(Ye)||!Ke||Ye===Ke.b))return De({rule:Be,state:He,from:Ye,to:Ke,pasteEvt:Te})}}))}var ExtensionManager=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=resolveExtensions(e),this.schema=getSchemaByResolvedExtensions(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:getSchemaTypeByName(t.name,this.schema)},Ee=getExtensionField(t,"addCommands",n);return Ee?{...e,...Ee()}:e},{})}get plugins(){const{editor:e}=this;return sortExtensions([...this.extensions].reverse()).flatMap(Ee=>{const Re={name:Ee.name,options:Ee.options,storage:this.editor.extensionStorage[Ee.name],editor:e,type:getSchemaTypeByName(Ee.name,this.schema)},Ce=[],Te=getExtensionField(Ee,"addKeyboardShortcuts",Re);let Me={};if(Ee.type==="mark"&&getExtensionField(Ee,"exitable",Re)&&(Me.ArrowRight=()=>Mark.handleExit({editor:e,mark:Ee})),Te){const $e=Object.fromEntries(Object.entries(Te()).map(([He,Ue])=>[He,()=>Ue({editor:e})]));Me={...Me,...$e}}const De=keymap(Me);Ce.push(De);const Oe=getExtensionField(Ee,"addInputRules",Re);if(isExtensionRulesEnabled(Ee,e.options.enableInputRules)&&Oe){const $e=Oe();if($e&&$e.length){const He=inputRulesPlugin({editor:e,rules:$e}),Ue=Array.isArray(He)?He:[He];Ce.push(...Ue)}}const Be=getExtensionField(Ee,"addPasteRules",Re);if(isExtensionRulesEnabled(Ee,e.options.enablePasteRules)&&Be){const $e=Be();if($e&&$e.length){const He=pasteRulesPlugin({editor:e,rules:$e});Ce.push(...He)}}const ze=getExtensionField(Ee,"addProseMirrorPlugins",Re);if(ze){const $e=ze();Ce.push(...$e)}return Ce})}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=splitExtensions(this.extensions);return Object.fromEntries(t.filter(n=>!!getExtensionField(n,"addNodeView")).map(n=>{const Ee=this.attributes.filter(De=>De.type===n.name),Re={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:getNodeType(n.name,this.schema)},Ce=getExtensionField(n,"addNodeView",Re);if(!Ce)return[];const Te=Ce();if(!Te)return[];const Me=(De,Oe,Be,ze,$e)=>{const He=getRenderedAttributes(De,Ee);return Te({node:De,view:Oe,getPos:Be,decorations:ze,innerDecorations:$e,editor:e,extension:n,HTMLAttributes:He})};return[n.name,Me]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=splitExtensions(this.extensions);return Object.fromEntries(t.filter(n=>!!getExtensionField(n,"addMarkView")).map(n=>{const Ee=this.attributes.filter(Me=>Me.type===n.name),Re={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:getMarkType(n.name,this.schema)},Ce=getExtensionField(n,"addMarkView",Re);if(!Ce)return[];const Te=(Me,De,Oe)=>{const Be=getRenderedAttributes(Me,Ee);return Ce()({mark:Me,view:De,inline:Oe,editor:e,extension:n,HTMLAttributes:Be,updateAttributes:ze=>{updateMarkViewAttributes(Me,e,ze)}})};return[n.name,Te]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const Ee={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:getSchemaTypeByName(t.name,this.schema)};t.type==="mark"&&((n=callOrReturn(getExtensionField(t,"keepOnSplit",Ee)))==null||n)&&this.splittableMarks.push(t.name);const Re=getExtensionField(t,"onBeforeCreate",Ee),Ce=getExtensionField(t,"onCreate",Ee),Te=getExtensionField(t,"onUpdate",Ee),Me=getExtensionField(t,"onSelectionUpdate",Ee),De=getExtensionField(t,"onTransaction",Ee),Oe=getExtensionField(t,"onFocus",Ee),Be=getExtensionField(t,"onBlur",Ee),ze=getExtensionField(t,"onDestroy",Ee);Re&&this.editor.on("beforeCreate",Re),Ce&&this.editor.on("create",Ce),Te&&this.editor.on("update",Te),Me&&this.editor.on("selectionUpdate",Me),De&&this.editor.on("transaction",De),Oe&&this.editor.on("focus",Oe),Be&&this.editor.on("blur",Be),ze&&this.editor.on("destroy",ze)})}};ExtensionManager.resolve=resolveExtensions;ExtensionManager.sort=sortExtensions;ExtensionManager.flatten=flattenExtensions;var extensions_exports={};__export$1(extensions_exports,{ClipboardTextSerializer:()=>ClipboardTextSerializer,Commands:()=>Commands,Delete:()=>Delete,Drop:()=>Drop,Editable:()=>Editable,FocusEvents:()=>FocusEvents,Keymap:()=>Keymap,Paste:()=>Paste,Tabindex:()=>Tabindex,TextDirection:()=>TextDirection,focusEventsPluginKey:()=>focusEventsPluginKey});var Extension=class xc extends Extendable{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new xc(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:Ee,selection:Re}=t,{ranges:Ce}=Re,Te=Math.min(...Ce.map(Be=>Be.$from.pos)),Me=Math.max(...Ce.map(Be=>Be.$to.pos)),De=getTextSerializersFromSchema(n);return getTextBetween(Ee,{from:Te,to:Me},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:De})}}})]}}),Commands=Extension.create({name:"commands",addCommands(){return{...commands_exports}}}),Delete=Extension.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,Ee,Re;const Ce=()=>{var Te,Me,De,Oe;if((Oe=(De=(Me=(Te=this.editor.options.coreExtensionOptions)==null?void 0:Te.delete)==null?void 0:Me.filterTransaction)==null?void 0:De.call(Me,e))!=null?Oe:e.getMeta("y-sync$"))return;const Be=combineTransactionSteps(e.before,[e,...t]);getChangedRanges(Be).forEach(He=>{Be.mapping.mapResult(He.oldRange.from).deletedAfter&&Be.mapping.mapResult(He.oldRange.to).deletedBefore&&Be.before.nodesBetween(He.oldRange.from,He.oldRange.to,(Ue,Ve)=>{const We=Ve+Ue.nodeSize-2,qe=He.oldRange.from<=Ve&&We<=He.oldRange.to;this.editor.emit("delete",{type:"node",node:Ue,from:Ve,to:We,newFrom:Be.mapping.map(Ve),newTo:Be.mapping.map(We),deletedRange:He.oldRange,newRange:He.newRange,partial:!qe,editor:this.editor,transaction:e,combinedTransform:Be})})});const $e=Be.mapping;Be.steps.forEach((He,Ue)=>{var Ve,We;if(He instanceof RemoveMarkStep){const qe=$e.slice(Ue).map(He.from,-1),Ge=$e.slice(Ue).map(He.to),Ye=$e.invert().map(qe,-1),Ke=$e.invert().map(Ge),Xe=(Ve=Be.doc.nodeAt(qe-1))==null?void 0:Ve.marks.some(er=>er.eq(He.mark)),Ze=(We=Be.doc.nodeAt(Ge))==null?void 0:We.marks.some(er=>er.eq(He.mark));this.editor.emit("delete",{type:"mark",mark:He.mark,from:He.from,to:He.to,deletedRange:{from:Ye,to:Ke},newRange:{from:qe,to:Ge},partial:!!(Ze||Xe),editor:this.editor,transaction:e,combinedTransform:Be})}})};(Re=(Ee=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:Ee.async)==null||Re?setTimeout(Ce,0):Ce()}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(e,t,n,Ee)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:Ee})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),focusEventsPluginKey=new PluginKey("focusEvents"),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Plugin({key:focusEventsPluginKey,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const Ee=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(Ee),!1},blur:(t,n)=>{e.isFocused=!1;const Ee=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(Ee),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:Te})=>[()=>Te.undoInputRule(),()=>Te.command(({tr:Me})=>{const{selection:De,doc:Oe}=Me,{empty:Be,$anchor:ze}=De,{pos:$e,parent:He}=ze,Ue=ze.parent.isTextblock&&$e>0?Me.doc.resolve($e-1):ze,Ve=Ue.parent.type.spec.isolating,We=ze.pos-ze.parentOffset,qe=Ve&&Ue.parent.childCount===1?We===ze.pos:Selection.atStart(Oe).from===$e;return!Be||!He.type.isTextblock||He.textContent.length||!qe||qe&&ze.parent.type.name==="paragraph"?!1:Te.clearNodes()}),()=>Te.deleteSelection(),()=>Te.joinBackward(),()=>Te.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:Te})=>[()=>Te.deleteSelection(),()=>Te.deleteCurrentNode(),()=>Te.joinForward(),()=>Te.selectNodeForward()]),Ee={Enter:()=>this.editor.commands.first(({commands:Te})=>[()=>Te.newlineInCode(),()=>Te.createParagraphNear(),()=>Te.liftEmptyBlock(),()=>Te.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},Re={...Ee},Ce={...Ee,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?Ce:Re},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(Ve=>Ve.getMeta("composition")))return;const Ee=e.some(Ve=>Ve.docChanged)&&!t.doc.eq(n.doc),Re=e.some(Ve=>Ve.getMeta("preventClearDocument"));if(!Ee||Re)return;const{empty:Ce,from:Te,to:Me}=t.selection,De=Selection.atStart(t.doc).from,Oe=Selection.atEnd(t.doc).to;if(Ce||!(Te===De&&Me===Oe)||!isNodeEmpty(n.doc))return;const $e=n.tr,He=createChainableState({state:n,transaction:$e}),{commands:Ue}=new CommandManager({editor:this.editor,state:He});if(Ue.clearNodes(),!!$e.steps.length)return $e}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),TextDirection=Extension.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=splitExtensions(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),NodePos=class Wi{constructor(t,n,Ee=!1,Re=null){this.currentNode=null,this.actualDepth=null,this.isBlock=Ee,this.resolvedPos=t,this.editor=n,this.currentNode=Re}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,Ee=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,Ee=this.to-1}this.editor.commands.insertContentAt({from:n,to:Ee},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new Wi(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Wi(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Wi(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,Ee)=>{const Re=n.isBlock&&!n.isTextblock,Ce=n.isAtom&&!n.isText,Te=this.pos+Ee+(Ce?0:1);if(Te<0||Te>this.resolvedPos.doc.nodeSize-2)return;const Me=this.resolvedPos.doc.resolve(Te);if(!Re&&Me.depth<=this.depth)return;const De=new Wi(Me,this.editor,Re,Re?n:null);Re&&(De.actualDepth=this.depth+1),t.push(new Wi(Me,this.editor,Re,Re?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let Ee=null,Re=this.parent;for(;Re&&!Ee;){if(Re.node.type.name===t)if(Object.keys(n).length>0){const Ce=Re.node.attrs,Te=Object.keys(n);for(let Me=0;Me<Te.length;Me+=1){const De=Te[Me];if(Ce[De]!==n[De])break}}else Ee=Re;Re=Re.parent}return Ee}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},Ee=!1){let Re=[];if(!this.children||this.children.length===0)return Re;const Ce=Object.keys(n);return this.children.forEach(Te=>{Ee&&Re.length>0||(Te.node.type.name===t&&Ce.every(De=>n[De]===Te.node.attrs[De])&&Re.push(Te),!(Ee&&Re.length>0)&&(Re=Re.concat(Te.querySelectorAll(t,n,Ee))))}),Re}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function createStyleTag(e,t,n){const Ee=document.querySelector("style[data-tiptap-style]");if(Ee!==null)return Ee;const Re=document.createElement("style");return t&&Re.setAttribute("nonce",t),Re.setAttribute("data-tiptap-style",""),Re.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(Re),Re}var Editor=class extends EventEmitter{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:Ee})=>{throw Ee},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition,createMappablePosition},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:Ee,slice:Re,moved:Ce})=>this.options.onDrop(Ee,Re,Ce)),this.on("paste",({event:Ee,slice:Re})=>this.options.onPaste(Ee,Re)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=resolveFocusPosition(t,this.options.autofocus);this.editorState=EditorState.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=isFunction(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],Ee=this.state.reconfigure({plugins:n});return this.view.updateState(Ee),Ee}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(Re=>{const Ce=typeof Re=="string"?`${Re}$`:Re.key;n=n.filter(Te=>!Te.key.startsWith(Ce))}),t.length===n.length)return;const Ee=this.state.reconfigure({plugins:n});return this.view.updateState(Ee),Ee}createExtensionManager(){var e,t;const Ee=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste,Delete,TextDirection.configure({direction:this.options.textDirection})].filter(Re=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[Re.name]!==!1:!0):[],...this.options.extensions].filter(Re=>["extension","node","mark"].includes(Re==null?void 0:Re.type));this.extensionManager=new ExtensionManager(Ee,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new EditorView(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const Ee=this.view.dom;Ee.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(Oe=>{var Be;return(Be=this.capturedTransaction)==null?void 0:Be.step(Oe)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),Ee=!this.state.selection.eq(t.selection),Re=n.includes(e),Ce=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!Re)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),Ee&&this.emit("selectionUpdate",{editor:this,transaction:e});const Te=n.findLast(Oe=>Oe.getMeta("focus")||Oe.getMeta("blur")),Me=Te==null?void 0:Te.getMeta("focus"),De=Te==null?void 0:Te.getMeta("blur");Me&&this.emit("focus",{editor:this,event:Me.event,transaction:Te}),De&&this.emit("blur",{editor:this,event:De.event,transaction:Te}),!(e.getMeta("preventUpdate")||!n.some(Oe=>Oe.docChanged)||Ce.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return getAttributes(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,Ee=typeof e=="string"?t:e;return isActive(this.state,n,Ee)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return getText(this.state.doc,{blockSeparator:t,textSerializers:{...getTextSerializersFromSchema(this.schema),...n}})}get isEmpty(){return isNodeEmpty(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new NodePos(t,this)}get $doc(){return this.$pos(0)}};function markInputRule(e){return new InputRule({find:e.find,handler:({state:t,range:n,match:Ee})=>{const Re=callOrReturn(e.getAttributes,void 0,Ee);if(Re===!1||Re===null)return null;const{tr:Ce}=t,Te=Ee[Ee.length-1],Me=Ee[0];if(Te){const De=Me.search(/\S/),Oe=n.from+Me.indexOf(Te),Be=Oe+Te.length;if(getMarksBetween(n.from,n.to,t.doc).filter(He=>He.mark.type.excluded.find(Ve=>Ve===e.type&&Ve!==He.mark.type)).filter(He=>He.to>Oe).length)return null;Be<n.to&&Ce.delete(Be,n.to),Oe>n.from&&Ce.delete(n.from+De,Oe);const $e=n.from+De+Te.length;Ce.addMark(n.from+De,$e,e.type.create(Re||{})),Ce.removeStoredMark(e.type)}},undoable:e.undoable})}function nodeInputRule(e){return new InputRule({find:e.find,handler:({state:t,range:n,match:Ee})=>{const Re=callOrReturn(e.getAttributes,void 0,Ee)||{},{tr:Ce}=t,Te=n.from;let Me=n.to;const De=e.type.create(Re);if(Ee[1]){const Oe=Ee[0].lastIndexOf(Ee[1]);let Be=Te+Oe;Be>Me?Be=Me:Me=Be+Ee[1].length;const ze=Ee[0][Ee[0].length-1];Ce.insertText(ze,Te+Ee[0].length-1),Ce.replaceWith(Be,Me,De)}else if(Ee[0]){const Oe=e.type.isInline?Te:Te-1;Ce.insert(Oe,e.type.create(Re)).delete(Ce.mapping.map(Te),Ce.mapping.map(Me))}Ce.scrollIntoView()},undoable:e.undoable})}function textblockTypeInputRule(e){return new InputRule({find:e.find,handler:({state:t,range:n,match:Ee})=>{const Re=t.doc.resolve(n.from),Ce=callOrReturn(e.getAttributes,void 0,Ee)||{};if(!Re.node(-1).canReplaceWith(Re.index(-1),Re.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,Ce)},undoable:e.undoable})}function wrappingInputRule(e){return new InputRule({find:e.find,handler:({state:t,range:n,match:Ee,chain:Re})=>{const Ce=callOrReturn(e.getAttributes,void 0,Ee)||{},Te=t.tr.delete(n.from,n.to),De=Te.doc.resolve(n.from).blockRange(),Oe=De&&findWrapping(De,e.type,Ce);if(!Oe)return null;if(Te.wrap(De,Oe),e.keepMarks&&e.editor){const{selection:ze,storedMarks:$e}=t,{splittableMarks:He}=e.editor.extensionManager,Ue=$e||ze.$to.parentOffset&&ze.$from.marks();if(Ue){const Ve=Ue.filter(We=>He.includes(We.type.name));Te.ensureMarks(Ve)}}if(e.keepAttributes){const ze=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";Re().updateAttributes(ze,Ce).run()}const Be=Te.doc.resolve(n.from-1).nodeBefore;Be&&Be.type===e.type&&canJoin(Te.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(Ee,Be))&&Te.join(n.from-1)},undoable:e.undoable})}var isTouchEvent=e=>"touches"in e,ResizableNodeView=class{constructor(e){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=Me=>{if(!this.isResizing||!this.activeHandle)return;const De=Me.clientX-this.startX,Oe=Me.clientY-this.startY;this.handleResize(De,Oe)},this.handleTouchMove=Me=>{if(!this.isResizing||!this.activeHandle)return;const De=Me.touches[0];if(!De)return;const Oe=De.clientX-this.startX,Be=De.clientY-this.startY;this.handleResize(Oe,Be)},this.handleMouseUp=()=>{if(!this.isResizing)return;const Me=this.element.offsetWidth,De=this.element.offsetHeight;this.onCommit(Me,De),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=Me=>{Me.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=Me=>{Me.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,n,Ee,Re,Ce,Te;this.node=e.node,this.editor=e.editor,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(t=e.options)!=null&&t.min&&(this.minSize={...this.minSize,...e.options.min}),(n=e.options)!=null&&n.max&&(this.maxSize=e.options.max),(Ee=e==null?void 0:e.options)!=null&&Ee.directions&&(this.directions=e.options.directions),(Re=e.options)!=null&&Re.preserveAspectRatio&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(Ce=e.options)!=null&&Ce.className&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),(Te=e.options)!=null&&Te.createCustomHandle&&(this.createCustomHandle=e.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const e=this.editor.isEditable;e!==this.lastEditableState&&(this.lastEditableState=e,e?e&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(e,t,n){return e.type!==this.node.type?!1:(this.node=e,this.onUpdate?this.onUpdate(e,t,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){const n=t.includes("top"),Ee=t.includes("bottom"),Re=t.includes("left"),Ce=t.includes("right");n&&(e.style.top="0"),Ee&&(e.style.bottom="0"),Re&&(e.style.left="0"),Ce&&(e.style.right="0"),(t==="top"||t==="bottom")&&(e.style.left="0",e.style.right="0"),(t==="left"||t==="right")&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let t;this.createCustomHandle?t=this.createCustomHandle(e):t=this.createHandle(e),t instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${e}") did not return an HTMLElement. Falling back to default handle.`),t=this.createHandle(e)),this.createCustomHandle||this.positionHandle(t,e),t.addEventListener("mousedown",n=>this.handleResizeStart(n,e)),t.addEventListener("touchstart",n=>this.handleResizeStart(n,e)),this.handleMap.set(e,t),this.wrapper.appendChild(t)})}removeHandles(){this.handleMap.forEach(e=>e.remove()),this.handleMap.clear()}applyInitialSize(){const e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,isTouchEvent(e)?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:Ee,height:Re}=this.calculateNewDimensions(this.activeHandle,e,t),Ce=this.applyConstraints(Ee,Re,n);this.element.style.width=`${Ce.width}px`,this.element.style.height=`${Ce.height}px`,this.onResize&&this.onResize(Ce.width,Ce.height)}calculateNewDimensions(e,t,n){let Ee=this.startWidth,Re=this.startHeight;const Ce=e.includes("right"),Te=e.includes("left"),Me=e.includes("bottom"),De=e.includes("top");return Ce?Ee=this.startWidth+t:Te&&(Ee=this.startWidth-t),Me?Re=this.startHeight+n:De&&(Re=this.startHeight-n),(e==="right"||e==="left")&&(Ee=this.startWidth+(Ce?t:-t)),(e==="top"||e==="bottom")&&(Re=this.startHeight+(Me?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(Ee,Re,e):{width:Ee,height:Re}}applyConstraints(e,t,n){var Ee,Re,Ce,Te;if(!n){let Oe=Math.max(this.minSize.width,e),Be=Math.max(this.minSize.height,t);return(Ee=this.maxSize)!=null&&Ee.width&&(Oe=Math.min(this.maxSize.width,Oe)),(Re=this.maxSize)!=null&&Re.height&&(Be=Math.min(this.maxSize.height,Be)),{width:Oe,height:Be}}let Me=e,De=t;return Me<this.minSize.width&&(Me=this.minSize.width,De=Me/this.aspectRatio),De<this.minSize.height&&(De=this.minSize.height,Me=De*this.aspectRatio),(Ce=this.maxSize)!=null&&Ce.width&&Me>this.maxSize.width&&(Me=this.maxSize.width,De=Me/this.aspectRatio),(Te=this.maxSize)!=null&&Te.height&&De>this.maxSize.height&&(De=this.maxSize.height,Me=De*this.aspectRatio),{width:Me,height:De}}applyAspectRatio(e,t,n){const Ee=n==="left"||n==="right",Re=n==="top"||n==="bottom";return Ee?{width:e,height:e/this.aspectRatio}:Re?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function canInsertNode(e,t){const{selection:n}=e,{$from:Ee}=n;if(n instanceof NodeSelection){const Ce=Ee.index();return Ee.parent.canReplaceWith(Ce,Ce+1,t)}let Re=Ee.depth;for(;Re>=0;){const Ce=Ee.index(Re);if(Ee.node(Re).contentMatchAt(Ce).matchType(t))return!0;Re-=1}return!1}var markdown_exports={};__export$1(markdown_exports,{createAtomBlockMarkdownSpec:()=>createAtomBlockMarkdownSpec,createBlockMarkdownSpec:()=>createBlockMarkdownSpec,createInlineMarkdownSpec:()=>createInlineMarkdownSpec,parseAttributes:()=>parseAttributes,parseIndentedBlocks:()=>parseIndentedBlocks,renderNestedMarkdownContent:()=>renderNestedMarkdownContent,serializeAttributes:()=>serializeAttributes});function parseAttributes(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],Ee=e.replace(/["']([^"']*)["']/g,Oe=>(n.push(Oe),`__QUOTED_${n.length-1}__`)),Re=Ee.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(Re){const Oe=Re.map(Be=>Be.trim().slice(1));t.class=Oe.join(" ")}const Ce=Ee.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);Ce&&(t.id=Ce[1]);const Te=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(Ee.matchAll(Te)).forEach(([,Oe,Be])=>{var ze;const $e=parseInt(((ze=Be.match(/__QUOTED_(\d+)__/))==null?void 0:ze[1])||"0",10),He=n[$e];He&&(t[Oe]=He.slice(1,-1))});const De=Ee.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return De&&De.split(/\s+/).filter(Boolean).forEach(Be=>{Be.match(/^[a-zA-Z][\w-]*$/)&&(t[Be]=!0)}),t}function serializeAttributes(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(Ee=>t.push(`.${Ee}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,Ee])=>{n==="class"||n==="id"||(Ee===!0?t.push(n):Ee!==!1&&Ee!=null&&t.push(`${n}="${String(Ee)}"`))}),t.join(" ")}function createAtomBlockMarkdownSpec(e){const{nodeName:t,name:n,parseAttributes:Ee=parseAttributes,serializeAttributes:Re=serializeAttributes,defaultAttributes:Ce={},requiredAttributes:Te=[],allowedAttributes:Me}=e,De=n||t,Oe=Be=>{if(!Me)return Be;const ze={};return Me.forEach($e=>{$e in Be&&(ze[$e]=Be[$e])}),ze};return{parseMarkdown:(Be,ze)=>{const $e={...Ce,...Be.attributes};return ze.createNode(t,$e,[])},markdownTokenizer:{name:t,level:"block",start(Be){var ze;const $e=new RegExp(`^:::${De}(?:\\s|$)`,"m"),He=(ze=Be.match($e))==null?void 0:ze.index;return He!==void 0?He:-1},tokenize(Be,ze,$e){const He=new RegExp(`^:::${De}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),Ue=Be.match(He);if(!Ue)return;const Ve=Ue[1]||"",We=Ee(Ve);if(!Te.find(Ge=>!(Ge in We)))return{type:t,raw:Ue[0],attributes:We}}},renderMarkdown:Be=>{const ze=Oe(Be.attrs||{}),$e=Re(ze),He=$e?` {${$e}}`:"";return`:::${De}${He} :::`}}}function createBlockMarkdownSpec(e){const{nodeName:t,name:n,getContent:Ee,parseAttributes:Re=parseAttributes,serializeAttributes:Ce=serializeAttributes,defaultAttributes:Te={},content:Me="block",allowedAttributes:De}=e,Oe=n||t,Be=ze=>{if(!De)return ze;const $e={};return De.forEach(He=>{He in ze&&($e[He]=ze[He])}),$e};return{parseMarkdown:(ze,$e)=>{let He;if(Ee){const Ve=Ee(ze);He=typeof Ve=="string"?[{type:"text",text:Ve}]:Ve}else Me==="block"?He=$e.parseChildren(ze.tokens||[]):He=$e.parseInline(ze.tokens||[]);const Ue={...Te,...ze.attributes};return $e.createNode(t,Ue,He)},markdownTokenizer:{name:t,level:"block",start(ze){var $e;const He=new RegExp(`^:::${Oe}`,"m"),Ue=($e=ze.match(He))==null?void 0:$e.index;return Ue!==void 0?Ue:-1},tokenize(ze,$e,He){var Ue;const Ve=new RegExp(`^:::${Oe}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),We=ze.match(Ve);if(!We)return;const[qe,Ge=""]=We,Ye=Re(Ge);let Ke=1;const Xe=qe.length;let Ze="";const er=/^:::([\w-]*)(\s.*)?/gm,St=ze.slice(Xe);for(er.lastIndex=0;;){const ar=er.exec(St);if(ar===null)break;const hr=ar.index,ur=ar[1];if(!((Ue=ar[2])!=null&&Ue.endsWith(":::"))){if(ur)Ke+=1;else if(Ke-=1,Ke===0){const dr=St.slice(0,hr);Ze=dr.trim();const vr=ze.slice(0,Xe+hr+ar[0].length);let yr=[];if(Ze)if(Me==="block")for(yr=He.blockTokens(dr),yr.forEach(br=>{br.text&&(!br.tokens||br.tokens.length===0)&&(br.tokens=He.inlineTokens(br.text))});yr.length>0;){const br=yr[yr.length-1];if(br.type==="paragraph"&&(!br.text||br.text.trim()===""))yr.pop();else break}else yr=He.inlineTokens(Ze);return{type:t,raw:vr,attributes:Ye,content:Ze,tokens:yr}}}}}},renderMarkdown:(ze,$e)=>{const He=Be(ze.attrs||{}),Ue=Ce(He),Ve=Ue?` {${Ue}}`:"",We=$e.renderChildren(ze.content||[],`

`);return`:::${Oe}${Ve}

${We}

:::`}}}function parseShortcodeAttributes(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let Ee=n.exec(e);for(;Ee!==null;){const[,Re,Ce,Te]=Ee;t[Re]=Ce||Te,Ee=n.exec(e)}return t}function serializeShortcodeAttributes(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function createInlineMarkdownSpec(e){const{nodeName:t,name:n,getContent:Ee,parseAttributes:Re=parseShortcodeAttributes,serializeAttributes:Ce=serializeShortcodeAttributes,defaultAttributes:Te={},selfClosing:Me=!1,allowedAttributes:De}=e,Oe=n||t,Be=$e=>{if(!De)return $e;const He={};return De.forEach(Ue=>{const Ve=typeof Ue=="string"?Ue:Ue.name,We=typeof Ue=="string"?void 0:Ue.skipIfDefault;if(Ve in $e){const qe=$e[Ve];if(We!==void 0&&qe===We)return;He[Ve]=qe}}),He},ze=Oe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:($e,He)=>{const Ue={...Te,...$e.attributes};if(Me)return He.createNode(t,Ue);const Ve=Ee?Ee($e):$e.content||"";return Ve?He.createNode(t,Ue,[He.createTextNode(Ve)]):He.createNode(t,Ue,[])},markdownTokenizer:{name:t,level:"inline",start($e){const He=Me?new RegExp(`\\[${ze}\\s*[^\\]]*\\]`):new RegExp(`\\[${ze}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${ze}\\]`),Ue=$e.match(He),Ve=Ue==null?void 0:Ue.index;return Ve!==void 0?Ve:-1},tokenize($e,He,Ue){const Ve=Me?new RegExp(`^\\[${ze}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${ze}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${ze}\\]`),We=$e.match(Ve);if(!We)return;let qe="",Ge="";if(Me){const[,Ke]=We;Ge=Ke}else{const[,Ke,Xe]=We;Ge=Ke,qe=Xe||""}const Ye=Re(Ge.trim());return{type:t,raw:We[0],content:qe.trim(),attributes:Ye}}},renderMarkdown:$e=>{let He="";Ee?He=Ee($e):$e.content&&$e.content.length>0&&(He=$e.content.filter(qe=>qe.type==="text").map(qe=>qe.text).join(""));const Ue=Be($e.attrs||{}),Ve=Ce(Ue),We=Ve?` ${Ve}`:"";return Me?`[${Oe}${We}]`:`[${Oe}${We}]${He}[/${Oe}]`}}}function parseIndentedBlocks(e,t,n){var Ee,Re,Ce,Te;const Me=e.split(`
`),De=[];let Oe="",Be=0;const ze=t.baseIndentSize||2;for(;Be<Me.length;){const $e=Me[Be],He=$e.match(t.itemPattern);if(!He){if(De.length>0)break;if($e.trim()===""){Be+=1,Oe=`${Oe}${$e}
`;continue}else return}const Ue=t.extractItemData(He),{indentLevel:Ve,mainContent:We}=Ue;Oe=`${Oe}${$e}
`;const qe=[We];for(Be+=1;Be<Me.length;){const Xe=Me[Be];if(Xe.trim()===""){const er=Me.slice(Be+1).findIndex(hr=>hr.trim()!=="");if(er===-1)break;if((((Re=(Ee=Me[Be+1+er].match(/^(\s*)/))==null?void 0:Ee[1])==null?void 0:Re.length)||0)>Ve){qe.push(Xe),Oe=`${Oe}${Xe}
`,Be+=1;continue}else break}if((((Te=(Ce=Xe.match(/^(\s*)/))==null?void 0:Ce[1])==null?void 0:Te.length)||0)>Ve)qe.push(Xe),Oe=`${Oe}${Xe}
`,Be+=1;else break}let Ge;const Ye=qe.slice(1);if(Ye.length>0){const Xe=Ye.map(Ze=>Ze.slice(Ve+ze)).join(`
`);Xe.trim()&&(t.customNestedParser?Ge=t.customNestedParser(Xe):Ge=n.blockTokens(Xe))}const Ke=t.createToken(Ue,Ge);De.push(Ke)}if(De.length!==0)return{items:De,raw:Oe}}function renderNestedMarkdownContent(e,t,n,Ee){if(!e||!Array.isArray(e.content))return"";const Re=typeof n=="function"?n(Ee):n,[Ce,...Te]=e.content,Me=t.renderChildren([Ce]),De=[`${Re}${Me}`];return Te&&Te.length>0&&Te.forEach(Oe=>{const Be=t.renderChildren([Oe]);if(Be){const ze=Be.split(`
`).map($e=>$e?t.indent($e):"").join(`
`);De.push(ze)}}),De.join(`
`)}function updateMarkViewAttributes(e,t,n={}){const{state:Ee}=t,{doc:Re,tr:Ce}=Ee,Te=e;Re.descendants((Me,De)=>{const Oe=Ce.mapping.map(De),Be=Ce.mapping.map(De)+Me.nodeSize;let ze=null;if(Me.marks.forEach(He=>{if(He!==Te)return!1;ze=He}),!ze)return;let $e=!1;if(Object.keys(n).forEach(He=>{n[He]!==ze.attrs[He]&&($e=!0)}),$e){const He=e.type.create({...e.attrs,...n});Ce.removeMark(Oe,Be,e.type),Ce.addMark(Oe,Be,He)}}),Ce.docChanged&&t.view.dispatch(Ce)}var Node3=class gc extends Extendable{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new gc(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function markPasteRule(e){return new PasteRule({find:e.find,handler:({state:t,range:n,match:Ee,pasteEvent:Re})=>{const Ce=callOrReturn(e.getAttributes,void 0,Ee,Re);if(Ce===!1||Ce===null)return null;const{tr:Te}=t,Me=Ee[Ee.length-1],De=Ee[0];let Oe=n.to;if(Me){const Be=De.search(/\S/),ze=n.from+De.indexOf(Me),$e=ze+Me.length;if(getMarksBetween(n.from,n.to,t.doc).filter(Ue=>Ue.mark.type.excluded.find(We=>We===e.type&&We!==Ue.mark.type)).filter(Ue=>Ue.to>ze).length)return null;$e<n.to&&Te.delete($e,n.to),ze>n.from&&Te.delete(n.from+Be,ze),Oe=n.from+Be+Me.length,Te.addMark(n.from+Be,Oe,e.type.create(Ce||{})),Te.removeStoredMark(e.type)}}})}const{getOwnPropertyNames,getOwnPropertySymbols}=Object,{hasOwnProperty}=Object.prototype;function combineComparators(e,t){return function(Ee,Re,Ce){return e(Ee,Re,Ce)&&t(Ee,Re,Ce)}}function createIsCircular(e){return function(n,Ee,Re){if(!n||!Ee||typeof n!="object"||typeof Ee!="object")return e(n,Ee,Re);const{cache:Ce}=Re,Te=Ce.get(n),Me=Ce.get(Ee);if(Te&&Me)return Te===Ee&&Me===n;Ce.set(n,Ee),Ce.set(Ee,n);const De=e(n,Ee,Re);return Ce.delete(n),Ce.delete(Ee),De}}function getShortTag(e){return e!=null?e[Symbol.toStringTag]:void 0}function getStrictProperties(e){return getOwnPropertyNames(e).concat(getOwnPropertySymbols(e))}const hasOwn=Object.hasOwn||((e,t)=>hasOwnProperty.call(e,t));function sameValueZeroEqual(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const PREACT_VNODE="__v",PREACT_OWNER="__o",REACT_OWNER="_owner",{getOwnPropertyDescriptor,keys}=Object;function areArraysEqual(e,t,n){let Ee=e.length;if(t.length!==Ee)return!1;for(;Ee-- >0;)if(!n.equals(e[Ee],t[Ee],Ee,Ee,e,t,n))return!1;return!0}function areDatesEqual(e,t){return sameValueZeroEqual(e.getTime(),t.getTime())}function areErrorsEqual(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function areFunctionsEqual(e,t){return e===t}function areMapsEqual(e,t,n){const Ee=e.size;if(Ee!==t.size)return!1;if(!Ee)return!0;const Re=new Array(Ee),Ce=e.entries();let Te,Me,De=0;for(;(Te=Ce.next())&&!Te.done;){const Oe=t.entries();let Be=!1,ze=0;for(;(Me=Oe.next())&&!Me.done;){if(Re[ze]){ze++;continue}const $e=Te.value,He=Me.value;if(n.equals($e[0],He[0],De,ze,e,t,n)&&n.equals($e[1],He[1],$e[0],He[0],e,t,n)){Be=Re[ze]=!0;break}ze++}if(!Be)return!1;De++}return!0}const areNumbersEqual=sameValueZeroEqual;function areObjectsEqual(e,t,n){const Ee=keys(e);let Re=Ee.length;if(keys(t).length!==Re)return!1;for(;Re-- >0;)if(!isPropertyEqual(e,t,n,Ee[Re]))return!1;return!0}function areObjectsEqualStrict(e,t,n){const Ee=getStrictProperties(e);let Re=Ee.length;if(getStrictProperties(t).length!==Re)return!1;let Ce,Te,Me;for(;Re-- >0;)if(Ce=Ee[Re],!isPropertyEqual(e,t,n,Ce)||(Te=getOwnPropertyDescriptor(e,Ce),Me=getOwnPropertyDescriptor(t,Ce),(Te||Me)&&(!Te||!Me||Te.configurable!==Me.configurable||Te.enumerable!==Me.enumerable||Te.writable!==Me.writable)))return!1;return!0}function arePrimitiveWrappersEqual(e,t){return sameValueZeroEqual(e.valueOf(),t.valueOf())}function areRegExpsEqual(e,t){return e.source===t.source&&e.flags===t.flags}function areSetsEqual(e,t,n){const Ee=e.size;if(Ee!==t.size)return!1;if(!Ee)return!0;const Re=new Array(Ee),Ce=e.values();let Te,Me;for(;(Te=Ce.next())&&!Te.done;){const De=t.values();let Oe=!1,Be=0;for(;(Me=De.next())&&!Me.done;){if(!Re[Be]&&n.equals(Te.value,Me.value,Te.value,Me.value,e,t,n)){Oe=Re[Be]=!0;break}Be++}if(!Oe)return!1}return!0}function areTypedArraysEqual(e,t){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function areUrlsEqual(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function isPropertyEqual(e,t,n,Ee){return(Ee===REACT_OWNER||Ee===PREACT_OWNER||Ee===PREACT_VNODE)&&(e.$$typeof||t.$$typeof)?!0:hasOwn(t,Ee)&&n.equals(e[Ee],t[Ee],Ee,Ee,e,t,n)}const ARGUMENTS_TAG="[object Arguments]",BOOLEAN_TAG="[object Boolean]",DATE_TAG="[object Date]",ERROR_TAG="[object Error]",MAP_TAG="[object Map]",NUMBER_TAG="[object Number]",OBJECT_TAG="[object Object]",REG_EXP_TAG="[object RegExp]",SET_TAG="[object Set]",STRING_TAG="[object String]",URL_TAG="[object URL]",{isArray}=Array,isTypedArray=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,{assign}=Object,getTag=Object.prototype.toString.call.bind(Object.prototype.toString);function createEqualityComparator({areArraysEqual:e,areDatesEqual:t,areErrorsEqual:n,areFunctionsEqual:Ee,areMapsEqual:Re,areNumbersEqual:Ce,areObjectsEqual:Te,arePrimitiveWrappersEqual:Me,areRegExpsEqual:De,areSetsEqual:Oe,areTypedArraysEqual:Be,areUrlsEqual:ze,unknownTagComparators:$e}){return function(Ue,Ve,We){if(Ue===Ve)return!0;if(Ue==null||Ve==null)return!1;const qe=typeof Ue;if(qe!==typeof Ve)return!1;if(qe!=="object")return qe==="number"?Ce(Ue,Ve,We):qe==="function"?Ee(Ue,Ve,We):!1;const Ge=Ue.constructor;if(Ge!==Ve.constructor)return!1;if(Ge===Object)return Te(Ue,Ve,We);if(isArray(Ue))return e(Ue,Ve,We);if(isTypedArray!=null&&isTypedArray(Ue))return Be(Ue,Ve,We);if(Ge===Date)return t(Ue,Ve,We);if(Ge===RegExp)return De(Ue,Ve,We);if(Ge===Map)return Re(Ue,Ve,We);if(Ge===Set)return Oe(Ue,Ve,We);const Ye=getTag(Ue);if(Ye===DATE_TAG)return t(Ue,Ve,We);if(Ye===REG_EXP_TAG)return De(Ue,Ve,We);if(Ye===MAP_TAG)return Re(Ue,Ve,We);if(Ye===SET_TAG)return Oe(Ue,Ve,We);if(Ye===OBJECT_TAG)return typeof Ue.then!="function"&&typeof Ve.then!="function"&&Te(Ue,Ve,We);if(Ye===URL_TAG)return ze(Ue,Ve,We);if(Ye===ERROR_TAG)return n(Ue,Ve,We);if(Ye===ARGUMENTS_TAG)return Te(Ue,Ve,We);if(Ye===BOOLEAN_TAG||Ye===NUMBER_TAG||Ye===STRING_TAG)return Me(Ue,Ve,We);if($e){let Ke=$e[Ye];if(!Ke){const Xe=getShortTag(Ue);Xe&&(Ke=$e[Xe])}if(Ke)return Ke(Ue,Ve,We)}return!1}}function createEqualityComparatorConfig({circular:e,createCustomConfig:t,strict:n}){let Ee={areArraysEqual:n?areObjectsEqualStrict:areArraysEqual,areDatesEqual,areErrorsEqual,areFunctionsEqual,areMapsEqual:n?combineComparators(areMapsEqual,areObjectsEqualStrict):areMapsEqual,areNumbersEqual,areObjectsEqual:n?areObjectsEqualStrict:areObjectsEqual,arePrimitiveWrappersEqual,areRegExpsEqual,areSetsEqual:n?combineComparators(areSetsEqual,areObjectsEqualStrict):areSetsEqual,areTypedArraysEqual:n?areObjectsEqualStrict:areTypedArraysEqual,areUrlsEqual,unknownTagComparators:void 0};if(t&&(Ee=assign({},Ee,t(Ee))),e){const Re=createIsCircular(Ee.areArraysEqual),Ce=createIsCircular(Ee.areMapsEqual),Te=createIsCircular(Ee.areObjectsEqual),Me=createIsCircular(Ee.areSetsEqual);Ee=assign({},Ee,{areArraysEqual:Re,areMapsEqual:Ce,areObjectsEqual:Te,areSetsEqual:Me})}return Ee}function createInternalEqualityComparator(e){return function(t,n,Ee,Re,Ce,Te,Me){return e(t,n,Me)}}function createIsEqual({circular:e,comparator:t,createState:n,equals:Ee,strict:Re}){if(n)return function(Me,De){const{cache:Oe=e?new WeakMap:void 0,meta:Be}=n();return t(Me,De,{cache:Oe,equals:Ee,meta:Be,strict:Re})};if(e)return function(Me,De){return t(Me,De,{cache:new WeakMap,equals:Ee,meta:void 0,strict:Re})};const Ce={cache:void 0,equals:Ee,meta:void 0,strict:Re};return function(Me,De){return t(Me,De,Ce)}}const deepEqual=createCustomEqual();createCustomEqual({strict:!0});createCustomEqual({circular:!0});createCustomEqual({circular:!0,strict:!0});createCustomEqual({createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({strict:!0,createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({circular:!0,createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({circular:!0,createInternalComparator:()=>sameValueZeroEqual,strict:!0});function createCustomEqual(e={}){const{circular:t=!1,createInternalComparator:n,createState:Ee,strict:Re=!1}=e,Ce=createEqualityComparatorConfig(e),Te=createEqualityComparator(Ce),Me=n?n(Te):createInternalEqualityComparator(Te);return createIsEqual({circular:t,comparator:Te,createState:Ee,equals:Me,strict:Re})}var withSelector={exports:{}},withSelector_production={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports,shim=shimExports;function is(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var objectIs=typeof Object.is=="function"?Object.is:is,useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(e,t,n,Ee,Re){var Ce=useRef(null);if(Ce.current===null){var Te={hasValue:!1,value:null};Ce.current=Te}else Te=Ce.current;Ce=useMemo(function(){function De(He){if(!Oe){if(Oe=!0,Be=He,He=Ee(He),Re!==void 0&&Te.hasValue){var Ue=Te.value;if(Re(Ue,He))return ze=Ue}return ze=He}if(Ue=ze,objectIs(Be,He))return Ue;var Ve=Ee(He);return Re!==void 0&&Re(Ue,Ve)?(Be=He,Ue):(Be=He,ze=Ve)}var Oe=!1,Be,ze,$e=n===void 0?null:n;return[function(){return De(t())},$e===null?void 0:function(){return De($e())}]},[t,n,Ee,Re]);var Me=useSyncExternalStore(e,Ce[0],Ce[1]);return useEffect(function(){Te.hasValue=!0,Te.value=Me},[Me]),useDebugValue(Me),Me};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,mergeRefs=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},Portals=({contentComponent:e})=>{const t=shimExports.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Object.values(t)})};function getInstance(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,Ee){t={...t,[n]:ReactDOM$1.createPortal(Ee.reactElement,Ee.element,n)},e.forEach(Re=>Re())},removeRenderer(n){const Ee={...t};delete Ee[n],t=Ee,e.forEach(Re=>Re())}}}var PureEditorContent=class extends React4.Component{constructor(e){var t;super(e),this.editorContentRef=React4.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:mergeRefs(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&jsxRuntimeExports.jsx(Portals,{contentComponent:e.contentComponent})]})}},EditorContentWithKey=reactExports.forwardRef((e,t)=>{const n=React4.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return React4.createElement(PureEditorContent,{key:n,innerRef:t,...e})}),EditorContent=React4.memo(EditorContentWithKey),useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,EditorStateManager=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(Ee=>Ee())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function useEditorState(e){var t;const[n]=reactExports.useState(()=>new EditorStateManager(e.editor)),Ee=withSelectorExports.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:deepEqual);return useIsomorphicLayoutEffect(()=>n.watch(e.editor),[e.editor,n]),reactExports.useDebugValue(Ee),Ee}var isDev=!1,isSSR=typeof window>"u",isNext=isSSR||!!(typeof window<"u"&&window.next),EditorInstanceManager=class yc{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?isSSR||isNext?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onBeforeCreate)==null?void 0:Ce.call(Re,...Ee)},onBlur:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onBlur)==null?void 0:Ce.call(Re,...Ee)},onCreate:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onCreate)==null?void 0:Ce.call(Re,...Ee)},onDestroy:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onDestroy)==null?void 0:Ce.call(Re,...Ee)},onFocus:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onFocus)==null?void 0:Ce.call(Re,...Ee)},onSelectionUpdate:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onSelectionUpdate)==null?void 0:Ce.call(Re,...Ee)},onTransaction:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onTransaction)==null?void 0:Ce.call(Re,...Ee)},onUpdate:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onUpdate)==null?void 0:Ce.call(Re,...Ee)},onContentError:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onContentError)==null?void 0:Ce.call(Re,...Ee)},onDrop:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onDrop)==null?void 0:Ce.call(Re,...Ee)},onPaste:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onPaste)==null?void 0:Ce.call(Re,...Ee)},onDelete:(...Ee)=>{var Re,Ce;return(Ce=(Re=this.options.current).onDelete)==null?void 0:Ce.call(Re,...Ee)}};return new Editor(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(Ee=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(Ee)?!0:Ee==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((Re,Ce)=>{var Te;return Re===((Te=n.extensions)==null?void 0:Te[Ce])}):t[Ee]===n[Ee])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?yc.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((Ee,Re)=>Ee===t[Re]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function useEditor(e={},t=[]){const n=reactExports.useRef(e);n.current=e;const[Ee]=reactExports.useState(()=>new EditorInstanceManager(n)),Re=shimExports.useSyncExternalStore(Ee.subscribe,Ee.getEditor,Ee.getServerSnapshot);return reactExports.useDebugValue(Re),reactExports.useEffect(Ee.onRender(t)),useEditorState({editor:Re,selector:({transactionNumber:Ce})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&Ce===0?0:Ce+1}),Re}var EditorContext=reactExports.createContext({editor:null});EditorContext.Consumer;var ReactNodeViewContext=reactExports.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext);React4.forwardRef((e,t)=>{const{onDragStart:n}=useReactNodeView(),Ee=e.as||"div";return jsxRuntimeExports.jsx(Ee,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});React4.createContext({markViewContentRef:()=>{}});var h=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...Ee}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,Ee,n]},inputRegex$4=/^\s*>\s$/,Blockquote=Node3.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return h("blockquote",{...mergeAttributes(this.options.HTMLAttributes,e),children:h("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",Ee=[];return e.content.forEach(Re=>{const Me=t.renderChildren([Re]).split(`
`).map(De=>De.trim()===""?n:`${n} ${De}`);Ee.push(Me.join(`
`))}),Ee.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$4,type:this.type})]}}),starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return h("strong",{...mergeAttributes(this.options.HTMLAttributes,e),children:h("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),inputRegex$3=/(^|[^`])`([^`]+)`(?!`)$/,pasteRegex$1=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",mergeAttributes(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$3,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),DEFAULT_TAB_SIZE=4,backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node3.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:DEFAULT_TAB_SIZE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const Ce=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(Te=>Te.startsWith(n)).map(Te=>Te.replace(n,""))[0];return Ce||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",mergeAttributes(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let Ee="";const Re=((n=e.attrs)==null?void 0:n.language)||"";return e.content?Ee=[`\`\`\`${Re}`,t.renderChildren(e.content),"```"].join(`
`):Ee=`\`\`\`${Re}

\`\`\``,Ee},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:DEFAULT_TAB_SIZE,{state:Ee}=e,{selection:Re}=Ee,{$from:Ce,empty:Te}=Re;if(Ce.parent.type!==this.type)return!1;const Me=" ".repeat(n);return Te?e.commands.insertContent(Me):e.commands.command(({tr:De})=>{const{from:Oe,to:Be}=Re,He=Ee.doc.textBetween(Oe,Be,`
`,`
`).split(`
`).map(Ue=>Me+Ue).join(`
`);return De.replaceWith(Oe,Be,Ee.schema.text(He)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:DEFAULT_TAB_SIZE,{state:Ee}=e,{selection:Re}=Ee,{$from:Ce,empty:Te}=Re;return Ce.parent.type!==this.type?!1:Te?e.commands.command(({tr:Me})=>{var De;const{pos:Oe}=Ce,Be=Ce.start(),ze=Ce.end(),He=Ee.doc.textBetween(Be,ze,`
`,`
`).split(`
`);let Ue=0,Ve=0;const We=Oe-Be;for(let Ze=0;Ze<He.length;Ze+=1){if(Ve+He[Ze].length>=We){Ue=Ze;break}Ve+=He[Ze].length+1}const Ge=((De=He[Ue].match(/^ */))==null?void 0:De[0])||"",Ye=Math.min(Ge.length,n);if(Ye===0)return!0;let Ke=Be;for(let Ze=0;Ze<Ue;Ze+=1)Ke+=He[Ze].length+1;return Me.delete(Ke,Ke+Ye),Oe-Ke<=Ye&&Me.setSelection(TextSelection.create(Me.doc,Ke)),!0}):e.commands.command(({tr:Me})=>{const{from:De,to:Oe}=Re,$e=Ee.doc.textBetween(De,Oe,`
`,`
`).split(`
`).map(He=>{var Ue;const Ve=((Ue=He.match(/^ */))==null?void 0:Ue[0])||"",We=Math.min(Ve.length,n);return He.slice(We)}).join(`
`);return Me.replaceWith(De,Oe,Ee.schema.text($e)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:Ee,empty:Re}=n;if(!Re||Ee.parent.type!==this.type)return!1;const Ce=Ee.parentOffset===Ee.parent.nodeSize-2,Te=Ee.parent.textContent.endsWith(`

`);return!Ce||!Te?!1:e.chain().command(({tr:Me})=>(Me.delete(Ee.pos-2,Ee.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:Ee}=t,{$from:Re,empty:Ce}=n;if(!Ce||Re.parent.type!==this.type||!(Re.parentOffset===Re.parent.nodeSize-2))return!1;const Me=Re.after();return Me===void 0?!1:Ee.nodeAt(Me)?e.commands.command(({tr:Oe})=>(Oe.setSelection(Selection.near(Ee.resolve(Me))),!0)):e.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:e=>({language:e[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),Ee=t.clipboardData.getData("vscode-editor-data"),Re=Ee?JSON.parse(Ee):void 0,Ce=Re==null?void 0:Re.mode;if(!n||!Ce)return!1;const{tr:Te,schema:Me}=e.state,De=Me.text(n.replace(/\r\n?/g,`
`));return Te.replaceSelectionWith(this.type.create({language:Ce},De)),Te.selection.$from.parent.type!==this.type&&Te.setSelection(TextSelection.near(Te.doc.resolve(Math.max(0,Te.selection.from-2)))),Te.setMeta("paste",!0),e.dispatch(Te),!0}}})]}}),Document=Node3.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),HardBreak=Node3.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",mergeAttributes(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:Ee})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:Re,storedMarks:Ce}=n;if(Re.$from.parent.type.spec.isolating)return!1;const{keepMarks:Te}=this.options,{splittableMarks:Me}=Ee.extensionManager,De=Ce||Re.$to.parentOffset&&Re.$from.marks();return t().insertContent({type:this.name}).command(({tr:Oe,dispatch:Be})=>{if(Be&&De&&Te){const ze=De.filter($e=>Me.includes($e.type.name));Oe.ensureMarks(ze)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node3.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const Ee=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,Re="#".repeat(Ee);return e.content?`${Re} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),HorizontalRule=Node3.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",mergeAttributes(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!canInsertNode(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:Ee}=n,Re=e();return isNodeSelection(n)?Re.insertContentAt(Ee.pos,{type:this.name}):Re.insertContent({type:this.name}),Re.command(({state:Ce,tr:Te,dispatch:Me})=>{if(Me){const{$to:De}=Te.selection,Oe=De.end();if(De.nodeAfter)De.nodeAfter.isTextblock?Te.setSelection(TextSelection.create(Te.doc,De.pos+1)):De.nodeAfter.isBlock?Te.setSelection(NodeSelection.create(Te.doc,De.pos)):Te.setSelection(TextSelection.create(Te.doc,De.pos));else{const Be=Ce.schema.nodes[this.options.nextNodeType]||De.parent.type.contentMatch.defaultType,ze=Be==null?void 0:Be.create();ze&&(Te.insert(Oe,ze),Te.setSelection(TextSelection.create(Te.doc,Oe+1)))}Te.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}});const encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(e,t){return e in t||(t[e]=[]),t[e]}function addToGroups(e,t,n){t[numeric]&&(t[asciinumeric]=!0,t[alphanumeric]=!0),t[ascii]&&(t[asciinumeric]=!0,t[alpha]=!0),t[asciinumeric]&&(t[alphanumeric]=!0),t[alpha]&&(t[alphanumeric]=!0),t[alphanumeric]&&(t[domain]=!0),t[emoji]&&(t[domain]=!0);for(const Ee in t){const Re=registerGroup(Ee,n);Re.indexOf(e)<0&&Re.push(e)}}function flagsForToken(e,t){const n={};for(const Ee in t)t[Ee].indexOf(e)>=0&&(n[Ee]=!0);return n}function State(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}State.groups={};State.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let Ee=0;Ee<t.jr.length;Ee++){const Re=t.jr[Ee][0],Ce=t.jr[Ee][1];if(Ce&&Re.test(e))return Ce}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,Ee){for(let Re=0;Re<e.length;Re++)this.tt(e[Re],t,n,Ee)},tr(e,t,n,Ee){Ee=Ee||State.groups;let Re;return t&&t.j?Re=t:(Re=new State(t),n&&Ee&&addToGroups(t,n,Ee)),this.jr.push([e,Re]),Re},ts(e,t,n,Ee){let Re=this;const Ce=e.length;if(!Ce)return Re;for(let Te=0;Te<Ce-1;Te++)Re=Re.tt(e[Te]);return Re.tt(e[Ce-1],t,n,Ee)},tt(e,t,n,Ee){Ee=Ee||State.groups;const Re=this;if(t&&t.j)return Re.j[e]=t,t;const Ce=t;let Te,Me=Re.go(e);if(Me?(Te=new State,Object.assign(Te.j,Me.j),Te.jr.push.apply(Te.jr,Me.jr),Te.jd=Me.jd,Te.t=Me.t):Te=new State,Ce){if(Ee)if(Te.t&&typeof Te.t=="string"){const De=Object.assign(flagsForToken(Te.t,Ee),n);addToGroups(Ce,De,Ee)}else n&&addToGroups(Ce,n,Ee);Te.t=Ce}return Re.j[e]=Te,Te}};const ta=(e,t,n,Ee,Re)=>e.ta(t,n,Ee,Re),tr=(e,t,n,Ee,Re)=>e.tr(t,n,Ee,Re),ts=(e,t,n,Ee,Re)=>e.ts(t,n,Ee,Re),tt=(e,t,n,Ee,Re)=>e.tt(t,n,Ee,Re),WORD="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,ALPHANUMERICAL,AMPERSAND,APOSTROPHE,ASCIINUMERICAL,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,CLOSEANGLEBRACKET,CLOSEBRACE,CLOSEBRACKET,CLOSEPAREN,COLON,COMMA,DOLLAR,DOT,EMOJI:EMOJI$1,EQUALS,EXCLAMATION,FULLWIDTHGREATERTHAN,FULLWIDTHLEFTPAREN,FULLWIDTHLESSTHAN,FULLWIDTHMIDDLEDOT,FULLWIDTHRIGHTPAREN,HYPHEN,LEFTCORNERBRACKET,LEFTWHITECORNERBRACKET,LOCALHOST,NL,NUM,OPENANGLEBRACKET,OPENBRACE,OPENBRACKET,OPENPAREN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,RIGHTCORNERBRACKET,RIGHTWHITECORNERBRACKET,SCHEME,SEMI,SLASH,SLASH_SCHEME,SYM,TILDE,TLD,UNDERSCORE,UTLD,UWORD,WORD,WS});const ASCII_LETTER=/[a-z]/,LETTER=new RegExp("\\p{L}","u"),EMOJI=new RegExp("\\p{Emoji}","u"),DIGIT=/\d/,SPACE=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="",EMOJI_JOINER="",OBJECT_REPLACEMENT="";let tlds=null,utlds=null;function init$2(e=[]){const t={};State.groups=t;const n=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt(n,"'",APOSTROPHE),tt(n,"{",OPENBRACE),tt(n,"}",CLOSEBRACE),tt(n,"[",OPENBRACKET),tt(n,"]",CLOSEBRACKET),tt(n,"(",OPENPAREN),tt(n,")",CLOSEPAREN),tt(n,"<",OPENANGLEBRACKET),tt(n,">",CLOSEANGLEBRACKET),tt(n,"",FULLWIDTHLEFTPAREN),tt(n,"",FULLWIDTHRIGHTPAREN),tt(n,"",LEFTCORNERBRACKET),tt(n,"",RIGHTCORNERBRACKET),tt(n,"",LEFTWHITECORNERBRACKET),tt(n,"",RIGHTWHITECORNERBRACKET),tt(n,"",FULLWIDTHLESSTHAN),tt(n,"",FULLWIDTHGREATERTHAN),tt(n,"&",AMPERSAND),tt(n,"*",ASTERISK),tt(n,"@",AT),tt(n,"`",BACKTICK),tt(n,"^",CARET),tt(n,":",COLON),tt(n,",",COMMA),tt(n,"$",DOLLAR),tt(n,".",DOT),tt(n,"=",EQUALS),tt(n,"!",EXCLAMATION),tt(n,"-",HYPHEN),tt(n,"%",PERCENT),tt(n,"|",PIPE),tt(n,"+",PLUS),tt(n,"#",POUND),tt(n,"?",QUERY),tt(n,'"',QUOTE),tt(n,"/",SLASH),tt(n,";",SEMI),tt(n,"~",TILDE),tt(n,"_",UNDERSCORE),tt(n,"\\",BACKSLASH),tt(n,"",FULLWIDTHMIDDLEDOT);const Ee=tr(n,DIGIT,NUM,{[numeric]:!0});tr(Ee,DIGIT,Ee);const Re=tr(Ee,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),Ce=tr(Ee,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),Te=tr(n,ASCII_LETTER,WORD,{[ascii]:!0});tr(Te,DIGIT,Re),tr(Te,ASCII_LETTER,Te),tr(Re,DIGIT,Re),tr(Re,ASCII_LETTER,Re);const Me=tr(n,LETTER,UWORD,{[alpha]:!0});tr(Me,ASCII_LETTER),tr(Me,DIGIT,Ce),tr(Me,LETTER,Me),tr(Ce,DIGIT,Ce),tr(Ce,ASCII_LETTER),tr(Ce,LETTER,Ce);const De=tt(n,LF,NL,{[whitespace]:!0}),Oe=tt(n,CR,WS,{[whitespace]:!0}),Be=tr(n,SPACE,WS,{[whitespace]:!0});tt(n,OBJECT_REPLACEMENT,Be),tt(Oe,LF,De),tt(Oe,OBJECT_REPLACEMENT,Be),tr(Oe,SPACE,Be),tt(Be,CR),tt(Be,LF),tr(Be,SPACE,Be),tt(Be,OBJECT_REPLACEMENT,Be);const ze=tr(n,EMOJI,EMOJI$1,{[emoji]:!0});tt(ze,"#"),tr(ze,EMOJI,ze),tt(ze,EMOJI_VARIATION,ze);const $e=tt(ze,EMOJI_JOINER);tt($e,"#"),tr($e,EMOJI,ze);const He=[[ASCII_LETTER,Te],[DIGIT,Re]],Ue=[[ASCII_LETTER,null],[LETTER,Me],[DIGIT,Ce]];for(let Ve=0;Ve<tlds.length;Ve++)fastts(n,tlds[Ve],TLD,WORD,He);for(let Ve=0;Ve<utlds.length;Ve++)fastts(n,utlds[Ve],UTLD,UWORD,Ue);addToGroups(TLD,{tld:!0,ascii:!0},t),addToGroups(UTLD,{utld:!0,alpha:!0},t),fastts(n,"file",SCHEME,WORD,He),fastts(n,"mailto",SCHEME,WORD,He),fastts(n,"http",SLASH_SCHEME,WORD,He),fastts(n,"https",SLASH_SCHEME,WORD,He),fastts(n,"ftp",SLASH_SCHEME,WORD,He),fastts(n,"ftps",SLASH_SCHEME,WORD,He),addToGroups(SCHEME,{scheme:!0,ascii:!0},t),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},t),e=e.sort((Ve,We)=>Ve[0]>We[0]?1:-1);for(let Ve=0;Ve<e.length;Ve++){const We=e[Ve][0],Ge=e[Ve][1]?{[scheme]:!0}:{[slashscheme]:!0};We.indexOf("-")>=0?Ge[domain]=!0:ASCII_LETTER.test(We)?DIGIT.test(We)?Ge[asciinumeric]=!0:Ge[ascii]=!0:Ge[numeric]=!0,ts(n,We,We,Ge)}return ts(n,"localhost",LOCALHOST,{ascii:!0}),n.jd=new State(SYM),{start:n,tokens:Object.assign({groups:t},tk)}}function run$1(e,t){const n=stringToArray(t.replace(/[A-Z]/g,Me=>Me.toLowerCase())),Ee=n.length,Re=[];let Ce=0,Te=0;for(;Te<Ee;){let Me=e,De=null,Oe=0,Be=null,ze=-1,$e=-1;for(;Te<Ee&&(De=Me.go(n[Te]));)Me=De,Me.accepts()?(ze=0,$e=0,Be=Me):ze>=0&&(ze+=n[Te].length,$e++),Oe+=n[Te].length,Ce+=n[Te].length,Te++;Ce-=ze,Te-=$e,Oe-=ze,Re.push({t:Be.t,v:t.slice(Ce-Oe,Ce),s:Ce-Oe,e:Ce})}return Re}function stringToArray(e){const t=[],n=e.length;let Ee=0;for(;Ee<n;){let Re=e.charCodeAt(Ee),Ce,Te=Re<55296||Re>56319||Ee+1===n||(Ce=e.charCodeAt(Ee+1))<56320||Ce>57343?e[Ee]:e.slice(Ee,Ee+2);t.push(Te),Ee+=Te.length}return t}function fastts(e,t,n,Ee,Re){let Ce;const Te=t.length;for(let Me=0;Me<Te-1;Me++){const De=t[Me];e.j[De]?Ce=e.j[De]:(Ce=new State(Ee),Ce.jr=Re.slice(),e.j[De]=Ce),e=Ce}return Ce=new State(n),Ce.jr=Re.slice(),e.j[t[Te-1]]=Ce,Ce}function decodeTlds(e){const t=[],n=[];let Ee=0,Re="0123456789";for(;Ee<e.length;){let Ce=0;for(;Re.indexOf(e[Ee+Ce])>=0;)Ce++;if(Ce>0){t.push(n.join(""));for(let Te=parseInt(e.substring(Ee,Ee+Ce),10);Te>0;Te--)n.pop();Ee+=Ce}else n.push(e[Ee]),Ee++}return t}const defaults={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(e,t=null){let n=Object.assign({},defaults);e&&(n=Object.assign(n,e instanceof Options?e.o:e));const Ee=n.ignoreTags,Re=[];for(let Ce=0;Ce<Ee.length;Ce++)Re.push(Ee[Ce].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=Re}Options.prototype={o:defaults,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const Ee=t!=null;let Re=this.o[e];return Re&&(typeof Re=="object"?(Re=n.t in Re?Re[n.t]:defaults[e],typeof Re=="function"&&Ee&&(Re=Re(t,n))):typeof Re=="function"&&Ee&&(Re=Re(t,n.t,n)),Re)},getObj(e,t,n){let Ee=this.o[e];return typeof Ee=="function"&&t!=null&&(Ee=Ee(t,n.t,n)),Ee},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function noop(e){return e}function MultiToken(e,t){this.t="token",this.v=e,this.tk=t}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),Ee=e.get("format",t,this);return n&&Ee.length>n?Ee.substring(0,n)+"":Ee},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=defaults.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),Ee=e.get("formatHref",n,this),Re=e.get("tagName",n,t),Ce=this.toFormattedString(e),Te={},Me=e.get("className",n,t),De=e.get("target",n,t),Oe=e.get("rel",n,t),Be=e.getObj("attributes",n,t),ze=e.getObj("events",n,t);return Te.href=Ee,Me&&(Te.class=Me),De&&(Te.target=De),Oe&&(Te.rel=Oe),Be&&Object.assign(Te,Be),{tagName:Re,attributes:Te,content:Ce,eventListeners:ze}}};function createTokenClass(e,t){class n extends MultiToken{constructor(Re,Ce){super(Re,Ce),this.t=e}}for(const Ee in t)n.prototype[Ee]=t[Ee];return n.t=e,n}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$1=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(e=defaults.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==LOCALHOST&&e[1].t===COLON}}),makeState=e=>new State(e);function init$1({groups:e}){const t=e.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),n=[APOSTROPHE,COLON,COMMA,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],Ee=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],Re=makeState(),Ce=tt(Re,TILDE);ta(Ce,Ee,Ce),ta(Ce,e.domain,Ce);const Te=makeState(),Me=makeState(),De=makeState();ta(Re,e.domain,Te),ta(Re,e.scheme,Me),ta(Re,e.slashscheme,De),ta(Te,Ee,Ce),ta(Te,e.domain,Te);const Oe=tt(Te,AT);tt(Ce,AT,Oe),tt(Me,AT,Oe),tt(De,AT,Oe);const Be=tt(Ce,DOT);ta(Be,Ee,Ce),ta(Be,e.domain,Ce);const ze=makeState();ta(Oe,e.domain,ze),ta(ze,e.domain,ze);const $e=tt(ze,DOT);ta($e,e.domain,ze);const He=makeState(Email);ta($e,e.tld,He),ta($e,e.utld,He),tt(Oe,LOCALHOST,He);const Ue=tt(ze,HYPHEN);tt(Ue,HYPHEN,Ue),ta(Ue,e.domain,ze),ta(He,e.domain,ze),tt(He,DOT,$e),tt(He,HYPHEN,Ue);const Ve=tt(He,COLON);ta(Ve,e.numeric,Email);const We=tt(Te,HYPHEN),qe=tt(Te,DOT);tt(We,HYPHEN,We),ta(We,e.domain,Te),ta(qe,Ee,Ce),ta(qe,e.domain,Te);const Ge=makeState(Url);ta(qe,e.tld,Ge),ta(qe,e.utld,Ge),ta(Ge,e.domain,Te),ta(Ge,Ee,Ce),tt(Ge,DOT,qe),tt(Ge,HYPHEN,We),tt(Ge,AT,Oe);const Ye=tt(Ge,COLON),Ke=makeState(Url);ta(Ye,e.numeric,Ke);const Xe=makeState(Url),Ze=makeState();ta(Xe,t,Xe),ta(Xe,n,Ze),ta(Ze,t,Xe),ta(Ze,n,Ze),tt(Ge,SLASH,Xe),tt(Ke,SLASH,Xe);const er=tt(Me,COLON),St=tt(De,COLON),ar=tt(St,SLASH),hr=tt(ar,SLASH);ta(Me,e.domain,Te),tt(Me,DOT,qe),tt(Me,HYPHEN,We),ta(De,e.domain,Te),tt(De,DOT,qe),tt(De,HYPHEN,We),ta(er,e.domain,Xe),tt(er,SLASH,Xe),tt(er,QUERY,Xe),ta(hr,e.domain,Xe),ta(hr,t,Xe),tt(hr,SLASH,Xe);const ur=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let dr=0;dr<ur.length;dr++){const[vr,yr]=ur[dr],br=tt(Xe,vr);tt(Ze,vr,br),tt(br,yr,Xe);const lr=makeState(Url);ta(br,t,lr);const cr=makeState();ta(br,n),ta(lr,t,lr),ta(lr,n,cr),ta(cr,t,lr),ta(cr,n,cr),tt(lr,yr,Xe),tt(cr,yr,Xe)}return tt(Re,LOCALHOST,Ge),tt(Re,NL,Nl),{start:Re,tokens:tk}}function run(e,t,n){let Ee=n.length,Re=0,Ce=[],Te=[];for(;Re<Ee;){let Me=e,De=null,Oe=null,Be=0,ze=null,$e=-1;for(;Re<Ee&&!(De=Me.go(n[Re].t));)Te.push(n[Re++]);for(;Re<Ee&&(Oe=De||Me.go(n[Re].t));)De=null,Me=Oe,Me.accepts()?($e=0,ze=Me):$e>=0&&$e++,Re++,Be++;if($e<0)Re-=Be,Re<Ee&&(Te.push(n[Re]),Re++);else{Te.length>0&&(Ce.push(initMultiToken(Text$1,t,Te)),Te=[]),Re-=$e,Be-=$e;const He=ze.t,Ue=n.slice(Re-Be,Re);Ce.push(initMultiToken(He,t,Ue))}}return Te.length>0&&Ce.push(initMultiToken(Text$1,t,Te)),Ce}function initMultiToken(e,t,n){const Ee=n[0].s,Re=n[n.length-1].e,Ce=t.slice(Ee,Re);return new e(Ce,n)}const warn=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(e,t=!1){if(INIT.initialized&&warn(`linkifyjs: already initialized - will not register custom scheme "${e}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([e,t])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let e=0;e<INIT.tokenQueue.length;e++)INIT.tokenQueue[e][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let e=0;e<INIT.pluginQueue.length;e++)INIT.pluginQueue[e][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(e){return INIT.initialized||init(),run(INIT.parser.start,e,run$1(INIT.scanner.start,e))}tokenize.scan=run$1;function find(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const Ee=new Options(n),Re=tokenize(e),Ce=[];for(let Te=0;Te<Re.length;Te++){const Me=Re[Te];Me.isLink&&(!t||Me.t===t)&&Ee.check(Me)&&Ce.push(Me.toFormattedObject(Ee))}return Ce}var UNICODE_WHITESPACE_PATTERN="[\0- -\u2029]",UNICODE_WHITESPACE_REGEX=new RegExp(UNICODE_WHITESPACE_PATTERN),UNICODE_WHITESPACE_REGEX_END=new RegExp(`${UNICODE_WHITESPACE_PATTERN}$`),UNICODE_WHITESPACE_REGEX_GLOBAL=new RegExp(UNICODE_WHITESPACE_PATTERN,"g");function isValidLinkStructure(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function autolink(e){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(t,n,Ee)=>{const Re=t.some(Oe=>Oe.docChanged)&&!n.doc.eq(Ee.doc),Ce=t.some(Oe=>Oe.getMeta("preventAutolink"));if(!Re||Ce)return;const{tr:Te}=Ee,Me=combineTransactionSteps(n.doc,[...t]);if(getChangedRanges(Me).forEach(({newRange:Oe})=>{const Be=findChildrenInRange(Ee.doc,Oe,He=>He.isTextblock);let ze,$e;if(Be.length>1)ze=Be[0],$e=Ee.doc.textBetween(ze.pos,ze.pos+ze.node.nodeSize,void 0," ");else if(Be.length){const He=Ee.doc.textBetween(Oe.from,Oe.to," "," ");if(!UNICODE_WHITESPACE_REGEX_END.test(He))return;ze=Be[0],$e=Ee.doc.textBetween(ze.pos,Oe.to,void 0," ")}if(ze&&$e){const He=$e.split(UNICODE_WHITESPACE_REGEX).filter(Boolean);if(He.length<=0)return!1;const Ue=He[He.length-1],Ve=ze.pos+$e.lastIndexOf(Ue);if(!Ue)return!1;const We=tokenize(Ue).map(qe=>qe.toObject(e.defaultProtocol));if(!isValidLinkStructure(We))return!1;We.filter(qe=>qe.isLink).map(qe=>({...qe,from:Ve+qe.start+1,to:Ve+qe.end+1})).filter(qe=>Ee.schema.marks.code?!Ee.doc.rangeHasMark(qe.from,qe.to,Ee.schema.marks.code):!0).filter(qe=>e.validate(qe.value)).filter(qe=>e.shouldAutoLink(qe.value)).forEach(qe=>{getMarksBetween(qe.from,qe.to,Ee.doc).some(Ge=>Ge.mark.type===e.type)||Te.addMark(qe.from,qe.to,e.type.create({href:qe.href}))})}}),!!Te.steps.length)return Te}})}function clickHandler(e){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(t,n,Ee)=>{var Re,Ce;if(Ee.button!==0||!t.editable)return!1;let Te=!1;if(e.enableClickSelection&&(Te=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let Me=null;if(Ee.target instanceof HTMLAnchorElement)Me=Ee.target;else{let ze=Ee.target;const $e=[];for(;ze.nodeName!=="DIV";)$e.push(ze),ze=ze.parentNode;Me=$e.find(He=>He.nodeName==="A")}if(!Me)return Te;const De=getAttributes(t.state,e.type.name),Oe=(Re=Me==null?void 0:Me.href)!=null?Re:De.href,Be=(Ce=Me==null?void 0:Me.target)!=null?Ce:De.target;Me&&Oe&&(window.open(Oe,Be),Te=!0)}return Te}}})}function pasteHandler(e){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(t,n,Ee)=>{const{shouldAutoLink:Re}=e,{state:Ce}=t,{selection:Te}=Ce,{empty:Me}=Te;if(Me)return!1;let De="";Ee.content.forEach(Be=>{De+=Be.textContent});const Oe=find(De,{defaultProtocol:e.defaultProtocol}).find(Be=>Be.isLink&&Be.value===De);return!De||!Oe||Re!==void 0&&!Re(Oe.href)?!1:e.editor.commands.setMark(e.type,{href:Oe.href})}}})}function isAllowedUri(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(Ee=>{const Re=typeof Ee=="string"?Ee:Ee.scheme;Re&&n.push(Re)}),!e||e.replace(UNICODE_WHITESPACE_REGEX_GLOBAL,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){registerCustomProtocol(e);return}registerCustomProtocol(e.scheme,e.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!isAllowedUri(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!isAllowedUri(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!isAllowedUri(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,e),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n;const Ee=((n=e.attrs)==null?void 0:n.href)||"";return`[${t.renderChildren(e)}](${Ee})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:Ee=>!!isAllowedUri(Ee,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:Ee=>!!isAllowedUri(Ee,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:Ee}=this.options,Re=find(e).filter(Ce=>Ce.isLink&&this.options.isAllowedUri(Ce.value,{defaultValidate:Te=>!!isAllowedUri(Te,n),protocols:n,defaultProtocol:Ee}));Re.length&&Re.forEach(Ce=>{this.options.shouldAutoLink(Ce.value)&&t.push({text:Ce.value,data:{href:Ce.href},index:Ce.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:Ee=>this.options.isAllowedUri(Ee,{defaultValidate:Re=>!!isAllowedUri(Re,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(clickHandler({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),__defProp=Object.defineProperty,__export=(e,t)=>{for(var n in t)__defProp(e,n,{get:t[n],enumerable:!0})},ListItemName="listItem",TextStyleName="textStyle",bulletListInputRegex=/^\s*([-+*])\s$/,BulletList=Node3.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",mergeAttributes(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=wrappingInputRule({find:bulletListInputRegex,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=wrappingInputRule({find:bulletListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName),editor:this.editor})),[e]}}),ListItem=Node3.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",mergeAttributes(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(Re=>Re.type==="paragraph"))n=t.parseChildren(e.tokens);else{const Re=e.tokens[0];if(Re&&Re.type==="text"&&Re.tokens&&Re.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(Re.tokens)}],e.tokens.length>1){const Te=e.tokens.slice(1),Me=t.parseChildren(Te);n.push(...Me)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>renderNestedMarkdownContent(e,t,Ee=>Ee.parentType==="bulletList"?"- ":Ee.parentType==="orderedList"?`${Ee.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),listHelpers_exports={};__export(listHelpers_exports,{findListItemPos:()=>findListItemPos,getNextListDepth:()=>getNextListDepth,handleBackspace:()=>handleBackspace,handleDelete:()=>handleDelete,hasListBefore:()=>hasListBefore,hasListItemAfter:()=>hasListItemAfter,hasListItemBefore:()=>hasListItemBefore,listItemHasSubList:()=>listItemHasSubList,nextListIsDeeper:()=>nextListIsDeeper,nextListIsHigher:()=>nextListIsHigher});var findListItemPos=(e,t)=>{const{$from:n}=t.selection,Ee=getNodeType(e,t.schema);let Re=null,Ce=n.depth,Te=n.pos,Me=null;for(;Ce>0&&Me===null;)Re=n.node(Ce),Re.type===Ee?Me=Ce:(Ce-=1,Te-=1);return Me===null?null:{$pos:t.doc.resolve(Te),depth:Me}},getNextListDepth=(e,t)=>{const n=findListItemPos(e,t);if(!n)return!1;const[,Ee]=getNodeAtPosition(t,e,n.$pos.pos+4);return Ee},hasListBefore=(e,t,n)=>{const{$anchor:Ee}=e.selection,Re=Math.max(0,Ee.pos-2),Ce=e.doc.resolve(Re).node();return!(!Ce||!n.includes(Ce.type.name))},hasListItemBefore=(e,t)=>{var n;const{$anchor:Ee}=t.selection,Re=t.doc.resolve(Ee.pos-2);return!(Re.index()===0||((n=Re.nodeBefore)==null?void 0:n.type.name)!==e)},listItemHasSubList=(e,t,n)=>{if(!n)return!1;const Ee=getNodeType(e,t.schema);let Re=!1;return n.descendants(Ce=>{Ce.type===Ee&&(Re=!0)}),Re},handleBackspace=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!isNodeActive(e.state,t)&&hasListBefore(e.state,t,n)){const{$anchor:Me}=e.state.selection,De=e.state.doc.resolve(Me.before()-1),Oe=[];De.node().descendants(($e,He)=>{$e.type.name===t&&Oe.push({node:$e,pos:He})});const Be=Oe.at(-1);if(!Be)return!1;const ze=e.state.doc.resolve(De.start()+Be.pos+1);return e.chain().cut({from:Me.start()-1,to:Me.end()+1},ze.end()).joinForward().run()}if(!isNodeActive(e.state,t)||!isAtStartOfNode(e.state))return!1;const Ee=findListItemPos(t,e.state);if(!Ee)return!1;const Ce=e.state.doc.resolve(Ee.$pos.pos-2).node(Ee.depth),Te=listItemHasSubList(t,e.state,Ce);return hasListItemBefore(t,e.state)&&!Te?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},nextListIsDeeper=(e,t)=>{const n=getNextListDepth(e,t),Ee=findListItemPos(e,t);return!Ee||!n?!1:n>Ee.depth},nextListIsHigher=(e,t)=>{const n=getNextListDepth(e,t),Ee=findListItemPos(e,t);return!Ee||!n?!1:n<Ee.depth},handleDelete=(e,t)=>{if(!isNodeActive(e.state,t)||!isAtEndOfNode(e.state,t))return!1;const{selection:n}=e.state,{$from:Ee,$to:Re}=n;return!n.empty&&Ee.sameParent(Re)?!1:nextListIsDeeper(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():nextListIsHigher(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},hasListItemAfter=(e,t)=>{var n;const{$anchor:Ee}=t.selection,Re=t.doc.resolve(Ee.pos-Ee.parentOffset-2);return!(Re.index()===Re.parent.childCount-1||((n=Re.nodeAfter)==null?void 0:n.type.name)!==e)},ListKeymap=Extension.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&handleDelete(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&handleDelete(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:Ee})=>{e.state.schema.nodes[n]!==void 0&&handleBackspace(e,n,Ee)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:Ee})=>{e.state.schema.nodes[n]!==void 0&&handleBackspace(e,n,Ee)&&(t=!0)}),t}}}}),ORDERED_LIST_ITEM_REGEX=/^(\s*)(\d+)\.\s+(.*)$/,INDENTED_LINE_REGEX=/^\s/;function collectOrderedListItems(e){const t=[];let n=0,Ee=0;for(;n<e.length;){const Re=e[n],Ce=Re.match(ORDERED_LIST_ITEM_REGEX);if(!Ce)break;const[,Te,Me,De]=Ce,Oe=Te.length;let Be=De,ze=n+1;const $e=[Re];for(;ze<e.length;){const He=e[ze];if(He.match(ORDERED_LIST_ITEM_REGEX))break;if(He.trim()==="")$e.push(He),Be+=`
`,ze+=1;else if(He.match(INDENTED_LINE_REGEX))$e.push(He),Be+=`
${He.slice(Oe+2)}`,ze+=1;else break}t.push({indent:Oe,number:parseInt(Me,10),content:Be.trim(),raw:$e.join(`
`)}),Ee=ze,n=ze}return[t,Ee]}function buildNestedStructure(e,t,n){var Ee;const Re=[];let Ce=0;for(;Ce<e.length;){const Te=e[Ce];if(Te.indent===t){const Me=Te.content.split(`
`),De=((Ee=Me[0])==null?void 0:Ee.trim())||"",Oe=[];De&&Oe.push({type:"paragraph",raw:De,tokens:n.inlineTokens(De)});const Be=Me.slice(1).join(`
`).trim();if(Be){const He=n.blockTokens(Be);Oe.push(...He)}let ze=Ce+1;const $e=[];for(;ze<e.length&&e[ze].indent>t;)$e.push(e[ze]),ze+=1;if($e.length>0){const He=Math.min(...$e.map(Ve=>Ve.indent)),Ue=buildNestedStructure($e,He,n);Oe.push({type:"list",ordered:!0,start:$e[0].number,items:Ue,raw:$e.map(Ve=>Ve.raw).join(`
`)})}Re.push({type:"list_item",raw:Te.raw,tokens:Oe}),Ce=ze}else Ce+=1}return Re}function parseListItems(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const Ee=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(Re=>{if(Re.type==="paragraph"||Re.type==="list"||Re.type==="blockquote"||Re.type==="code")Ee.push(...t.parseChildren([Re]));else if(Re.type==="text"&&Re.tokens){const Ce=t.parseChildren([Re]);Ee.push({type:"paragraph",content:Ce})}else{const Ce=t.parseChildren([Re]);Ce.length>0&&Ee.push(...Ce)}}),{type:"listItem",content:Ee}})}var ListItemName2="listItem",TextStyleName2="textStyle",orderedListInputRegex=/^(\d+)\.\s$/,OrderedList=Node3.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",mergeAttributes(this.options.HTMLAttributes,n),0]:["ol",mergeAttributes(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,Ee=e.items?parseListItems(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:Ee}:{type:"orderedList",content:Ee}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var Ee;const Re=e.split(`
`),[Ce,Te]=collectOrderedListItems(Re);if(Ce.length===0)return;const Me=buildNestedStructure(Ce,0,n);return Me.length===0?void 0:{type:"list",ordered:!0,start:((Ee=Ce[0])==null?void 0:Ee.number)||1,items:Me,raw:Re.slice(0,Te).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName2,this.editor.getAttributes(TextStyleName2)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=wrappingInputRule({find:orderedListInputRegex,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=wrappingInputRule({find:orderedListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(TextStyleName2)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),inputRegex$2=/^\s*(\[([( |x])?\])\s$/,TaskItem=Node3.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",mergeAttributes(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const Ee=t.parseChildren(e.nestedTokens);n.push(...Ee)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const Re=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return renderNestedMarkdownContent(e,t,Re)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:Ee})=>{const Re=document.createElement("li"),Ce=document.createElement("label"),Te=document.createElement("span"),Me=document.createElement("input"),De=document.createElement("div"),Oe=Be=>{var ze,$e;Me.ariaLabel=(($e=(ze=this.options.a11y)==null?void 0:ze.checkboxLabel)==null?void 0:$e.call(ze,Be,Me.checked))||`Task item checkbox for ${Be.textContent||"empty task item"}`};return Oe(e),Ce.contentEditable="false",Me.type="checkbox",Me.addEventListener("mousedown",Be=>Be.preventDefault()),Me.addEventListener("change",Be=>{if(!Ee.isEditable&&!this.options.onReadOnlyChecked){Me.checked=!Me.checked;return}const{checked:ze}=Be.target;Ee.isEditable&&typeof n=="function"&&Ee.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:$e})=>{const He=n();if(typeof He!="number")return!1;const Ue=$e.doc.nodeAt(He);return $e.setNodeMarkup(He,void 0,{...Ue==null?void 0:Ue.attrs,checked:ze}),!0}).run(),!Ee.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,ze)||(Me.checked=!Me.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([Be,ze])=>{Re.setAttribute(Be,ze)}),Re.dataset.checked=e.attrs.checked,Me.checked=e.attrs.checked,Ce.append(Me,Te),Re.append(Ce,De),Object.entries(t).forEach(([Be,ze])=>{Re.setAttribute(Be,ze)}),{dom:Re,contentDOM:De,update:Be=>Be.type!==this.type?!1:(Re.dataset.checked=Be.attrs.checked,Me.checked=Be.attrs.checked,Oe(Be),!0)}}},addInputRules(){return[wrappingInputRule({find:inputRegex$2,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),TaskList=Node3.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",mergeAttributes(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const Ee=Ce=>{const Te=parseIndentedBlocks(Ce,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:Me=>({indentLevel:Me[1].length,mainContent:Me[4],checked:Me[3].toLowerCase()==="x"}),createToken:(Me,De)=>({type:"taskItem",raw:"",mainContent:Me.mainContent,indentLevel:Me.indentLevel,checked:Me.checked,text:Me.mainContent,tokens:n.inlineTokens(Me.mainContent),nestedTokens:De}),customNestedParser:Ee},n);return Te?[{type:"taskList",raw:Te.raw,items:Te.items}]:n.blockTokens(Ce)},Re=parseIndentedBlocks(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:Ce=>({indentLevel:Ce[1].length,mainContent:Ce[4],checked:Ce[3].toLowerCase()==="x"}),createToken:(Ce,Te)=>({type:"taskItem",raw:"",mainContent:Ce.mainContent,indentLevel:Ce.indentLevel,checked:Ce.checked,text:Ce.mainContent,tokens:n.inlineTokens(Ce.mainContent),nestedTokens:Te}),customNestedParser:Ee},n);if(Re)return{type:"taskList",raw:Re.raw,items:Re.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Extension.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(BulletList.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(ListKeymap.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(OrderedList.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(TaskItem.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(TaskList.configure(this.options.taskList)),e}});var Paragraph=Node3.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",mergeAttributes(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];return n.length===1&&n[0].type==="image"?t.parseChildren([n[0]]):t.createNode("paragraph",void 0,t.parseInline(n))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",mergeAttributes(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),Text=Node3.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",mergeAttributes(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const Re=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!Re)return;const Ce=Re[2].trim();return{type:"underline",raw:Re[0],text:Ce,tokens:n.inlineTokens(Ce)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function dropCursor(e={}){return new Plugin({view(t){return new DropCursorView(t,e)}})}class DropCursorView{constructor(t,n){var Ee;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(Ee=n.width)!==null&&Ee!==void 0?Ee:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(Re=>{let Ce=Te=>{this[Re](Te)};return t.dom.addEventListener(Re,Ce),{name:Re,handler:Ce}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,Ee,Re=this.editorView.dom,Ce=Re.getBoundingClientRect(),Te=Ce.width/Re.offsetWidth,Me=Ce.height/Re.offsetHeight;if(n){let ze=t.nodeBefore,$e=t.nodeAfter;if(ze||$e){let He=this.editorView.nodeDOM(this.cursorPos-(ze?ze.nodeSize:0));if(He){let Ue=He.getBoundingClientRect(),Ve=ze?Ue.bottom:Ue.top;ze&&$e&&(Ve=(Ve+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let We=this.width/2*Me;Ee={left:Ue.left,right:Ue.right,top:Ve-We,bottom:Ve+We}}}}if(!Ee){let ze=this.editorView.coordsAtPos(this.cursorPos),$e=this.width/2*Te;Ee={left:ze.left-$e,right:ze.left+$e,top:ze.top,bottom:ze.bottom}}let De=this.editorView.dom.offsetParent;this.element||(this.element=De.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let Oe,Be;if(!De||De==document.body&&getComputedStyle(De).position=="static")Oe=-pageXOffset,Be=-pageYOffset;else{let ze=De.getBoundingClientRect(),$e=ze.width/De.offsetWidth,He=ze.height/De.offsetHeight;Oe=ze.left-De.scrollLeft*$e,Be=ze.top-De.scrollTop*He}this.element.style.left=(Ee.left-Oe)/Te+"px",this.element.style.top=(Ee.top-Be)/Me+"px",this.element.style.width=(Ee.right-Ee.left)/Te+"px",this.element.style.height=(Ee.bottom-Ee.top)/Me+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),Ee=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),Re=Ee&&Ee.type.spec.disableDropCursor,Ce=typeof Re=="function"?Re(this.editorView,n,t):Re;if(n&&!Ce){let Te=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Me=dropPoint(this.editorView.state.doc,Te,this.editorView.dragging.slice);Me!=null&&(Te=Me)}this.setCursor(Te),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class GapCursor extends Selection{constructor(t){super(t,t)}map(t,n){let Ee=t.resolve(n.map(this.head));return GapCursor.valid(Ee)?new GapCursor(Ee):Selection.near(Ee)}content(){return Slice.empty}eq(t){return t instanceof GapCursor&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(t.resolve(n.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!closedBefore(t)||!closedAfter(t))return!1;let Ee=n.type.spec.allowGapCursor;if(Ee!=null)return Ee;let Re=n.contentMatchAt(t.index()).defaultType;return Re&&Re.isTextblock}static findGapCursorFrom(t,n,Ee=!1){e:for(;;){if(!Ee&&GapCursor.valid(t))return t;let Re=t.pos,Ce=null;for(let Te=t.depth;;Te--){let Me=t.node(Te);if(n>0?t.indexAfter(Te)<Me.childCount:t.index(Te)>0){Ce=Me.child(n>0?t.indexAfter(Te):t.index(Te)-1);break}else if(Te==0)return null;Re+=n;let De=t.doc.resolve(Re);if(GapCursor.valid(De))return De}for(;;){let Te=n>0?Ce.firstChild:Ce.lastChild;if(!Te){if(Ce.isAtom&&!Ce.isText&&!NodeSelection.isSelectable(Ce)){t=t.doc.resolve(Re+Ce.nodeSize*n),Ee=!1;continue e}break}Ce=Te,Re+=n;let Me=t.doc.resolve(Re);if(GapCursor.valid(Me))return Me}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(t){this.pos=t}map(t){return new GapBookmark(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return GapCursor.valid(n)?new GapCursor(n):Selection.near(n)}}function needsGap(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function closedBefore(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),Ee=e.node(t);if(n==0){if(Ee.type.spec.isolating)return!0;continue}for(let Re=Ee.child(n-1);;Re=Re.lastChild){if(Re.childCount==0&&!Re.inlineContent||needsGap(Re.type))return!0;if(Re.inlineContent)return!1}}return!0}function closedAfter(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),Ee=e.node(t);if(n==Ee.childCount){if(Ee.type.spec.isolating)return!0;continue}for(let Re=Ee.child(n);;Re=Re.firstChild){if(Re.childCount==0&&!Re.inlineContent||needsGap(Re.type))return!0;if(Re.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(e,t,n){return t.pos==n.pos&&GapCursor.valid(n)?new GapCursor(n):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(Ee,Re,Ce){let Te=Ee.selection,Me=t>0?Te.$to:Te.$from,De=Te.empty;if(Te instanceof TextSelection){if(!Ce.endOfTextblock(n)||Me.depth==0)return!1;De=!1,Me=Ee.doc.resolve(t>0?Me.after():Me.before())}let Oe=GapCursor.findGapCursorFrom(Me,t,De);return Oe?(Re&&Re(Ee.tr.setSelection(new GapCursor(Oe))),!0):!1}}function handleClick(e,t,n){if(!e||!e.editable)return!1;let Ee=e.state.doc.resolve(t);if(!GapCursor.valid(Ee))return!1;let Re=e.posAtCoords({left:n.clientX,top:n.clientY});return Re&&Re.inside>-1&&NodeSelection.isSelectable(e.state.doc.nodeAt(Re.inside))?!1:(e.dispatch(e.state.tr.setSelection(new GapCursor(Ee))),!0)}function beforeinput(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof GapCursor))return!1;let{$from:n}=e.state.selection,Ee=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!Ee)return!1;let Re=Fragment.empty;for(let Te=Ee.length-1;Te>=0;Te--)Re=Fragment.from(Ee[Te].createAndFill(null,Re));let Ce=e.state.tr.replace(n.pos,n.pos,new Slice(Re,0,0));return Ce.setSelection(TextSelection.near(Ce.doc.resolve(n.pos+1))),e.dispatch(Ce),!1}function drawGapCursor(e){if(!(e.selection instanceof GapCursor))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",DecorationSet.create(e.doc,[Decoration.widget(e.selection.head,t,{key:"gapcursor"})])}var GOOD_LEAF_SIZE=200,RopeSequence=function e(){};RopeSequence.prototype.append=function e(t){return t.length?(t=RopeSequence.from(t),!this.length&&t||t.length<GOOD_LEAF_SIZE&&this.leafAppend(t)||this.length<GOOD_LEAF_SIZE&&t.leafPrepend(this)||this.appendInner(t)):this};RopeSequence.prototype.prepend=function e(t){return t.length?RopeSequence.from(t).append(this):this};RopeSequence.prototype.appendInner=function e(t){return new Append(this,t)};RopeSequence.prototype.slice=function e(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?RopeSequence.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};RopeSequence.prototype.get=function e(t){if(!(t<0||t>=this.length))return this.getInner(t)};RopeSequence.prototype.forEach=function e(t,n,Ee){n===void 0&&(n=0),Ee===void 0&&(Ee=this.length),n<=Ee?this.forEachInner(t,n,Ee,0):this.forEachInvertedInner(t,n,Ee,0)};RopeSequence.prototype.map=function e(t,n,Ee){n===void 0&&(n=0),Ee===void 0&&(Ee=this.length);var Re=[];return this.forEach(function(Ce,Te){return Re.push(t(Ce,Te))},n,Ee),Re};RopeSequence.from=function e(t){return t instanceof RopeSequence?t:t&&t.length?new Leaf(t):RopeSequence.empty};var Leaf=function(e){function t(Ee){e.call(this),this.values=Ee}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(Re,Ce){return Re==0&&Ce==this.length?this:new t(this.values.slice(Re,Ce))},t.prototype.getInner=function(Re){return this.values[Re]},t.prototype.forEachInner=function(Re,Ce,Te,Me){for(var De=Ce;De<Te;De++)if(Re(this.values[De],Me+De)===!1)return!1},t.prototype.forEachInvertedInner=function(Re,Ce,Te,Me){for(var De=Ce-1;De>=Te;De--)if(Re(this.values[De],Me+De)===!1)return!1},t.prototype.leafAppend=function(Re){if(this.length+Re.length<=GOOD_LEAF_SIZE)return new t(this.values.concat(Re.flatten()))},t.prototype.leafPrepend=function(Re){if(this.length+Re.length<=GOOD_LEAF_SIZE)return new t(Re.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(e){function t(n,Ee){e.call(this),this.left=n,this.right=Ee,this.length=n.length+Ee.length,this.depth=Math.max(n.depth,Ee.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(Ee){return Ee<this.left.length?this.left.get(Ee):this.right.get(Ee-this.left.length)},t.prototype.forEachInner=function(Ee,Re,Ce,Te){var Me=this.left.length;if(Re<Me&&this.left.forEachInner(Ee,Re,Math.min(Ce,Me),Te)===!1||Ce>Me&&this.right.forEachInner(Ee,Math.max(Re-Me,0),Math.min(this.length,Ce)-Me,Te+Me)===!1)return!1},t.prototype.forEachInvertedInner=function(Ee,Re,Ce,Te){var Me=this.left.length;if(Re>Me&&this.right.forEachInvertedInner(Ee,Re-Me,Math.max(Ce,Me)-Me,Te+Me)===!1||Ce<Me&&this.left.forEachInvertedInner(Ee,Math.min(Re,Me),Ce,Te)===!1)return!1},t.prototype.sliceInner=function(Ee,Re){if(Ee==0&&Re==this.length)return this;var Ce=this.left.length;return Re<=Ce?this.left.slice(Ee,Re):Ee>=Ce?this.right.slice(Ee-Ce,Re-Ce):this.left.slice(Ee,Ce).append(this.right.slice(0,Re-Ce))},t.prototype.leafAppend=function(Ee){var Re=this.right.leafAppend(Ee);if(Re)return new t(this.left,Re)},t.prototype.leafPrepend=function(Ee){var Re=this.left.leafPrepend(Ee);if(Re)return new t(Re,this.right)},t.prototype.appendInner=function(Ee){return this.left.depth>=Math.max(this.right.depth,Ee.depth)+1?new t(this.left,new t(this.right,Ee)):new t(this,Ee)},t}(RopeSequence);const max_empty_items=500;class Branch{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let Ee=this.items.length;for(;;Ee--)if(this.items.get(Ee-1).selection){--Ee;break}let Re,Ce;n&&(Re=this.remapping(Ee,this.items.length),Ce=Re.maps.length);let Te=t.tr,Me,De,Oe=[],Be=[];return this.items.forEach((ze,$e)=>{if(!ze.step){Re||(Re=this.remapping(Ee,$e+1),Ce=Re.maps.length),Ce--,Be.push(ze);return}if(Re){Be.push(new Item(ze.map));let He=ze.step.map(Re.slice(Ce)),Ue;He&&Te.maybeStep(He).doc&&(Ue=Te.mapping.maps[Te.mapping.maps.length-1],Oe.push(new Item(Ue,void 0,void 0,Oe.length+Be.length))),Ce--,Ue&&Re.appendMap(Ue,Ce)}else Te.maybeStep(ze.step);if(ze.selection)return Me=Re?ze.selection.map(Re.slice(Ce)):ze.selection,De=new Branch(this.items.slice(0,Ee).append(Be.reverse().concat(Oe)),this.eventCount-1),!1},this.items.length,0),{remaining:De,transform:Te,selection:Me}}addTransform(t,n,Ee,Re){let Ce=[],Te=this.eventCount,Me=this.items,De=!Re&&Me.length?Me.get(Me.length-1):null;for(let Be=0;Be<t.steps.length;Be++){let ze=t.steps[Be].invert(t.docs[Be]),$e=new Item(t.mapping.maps[Be],ze,n),He;(He=De&&De.merge($e))&&($e=He,Be?Ce.pop():Me=Me.slice(0,Me.length-1)),Ce.push($e),n&&(Te++,n=void 0),Re||(De=$e)}let Oe=Te-Ee.depth;return Oe>DEPTH_OVERFLOW&&(Me=cutOffEvents(Me,Oe),Te-=Oe),new Branch(Me.append(Ce),Te)}remapping(t,n){let Ee=new Mapping;return this.items.forEach((Re,Ce)=>{let Te=Re.mirrorOffset!=null&&Ce-Re.mirrorOffset>=t?Ee.maps.length-Re.mirrorOffset:void 0;Ee.appendMap(Re.map,Te)},t,n),Ee}addMaps(t){return this.eventCount==0?this:new Branch(this.items.append(t.map(n=>new Item(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let Ee=[],Re=Math.max(0,this.items.length-n),Ce=t.mapping,Te=t.steps.length,Me=this.eventCount;this.items.forEach($e=>{$e.selection&&Me--},Re);let De=n;this.items.forEach($e=>{let He=Ce.getMirror(--De);if(He==null)return;Te=Math.min(Te,He);let Ue=Ce.maps[He];if($e.step){let Ve=t.steps[He].invert(t.docs[He]),We=$e.selection&&$e.selection.map(Ce.slice(De+1,He));We&&Me++,Ee.push(new Item(Ue,Ve,We))}else Ee.push(new Item(Ue))},Re);let Oe=[];for(let $e=n;$e<Te;$e++)Oe.push(new Item(Ce.maps[$e]));let Be=this.items.slice(0,Re).append(Oe).append(Ee),ze=new Branch(Be,Me);return ze.emptyItemCount()>max_empty_items&&(ze=ze.compress(this.items.length-Ee.length)),ze}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),Ee=n.maps.length,Re=[],Ce=0;return this.items.forEach((Te,Me)=>{if(Me>=t)Re.push(Te),Te.selection&&Ce++;else if(Te.step){let De=Te.step.map(n.slice(Ee)),Oe=De&&De.getMap();if(Ee--,Oe&&n.appendMap(Oe,Ee),De){let Be=Te.selection&&Te.selection.map(n.slice(Ee));Be&&Ce++;let ze=new Item(Oe.invert(),De,Be),$e,He=Re.length-1;($e=Re.length&&Re[He].merge(ze))?Re[He]=$e:Re.push(ze)}}else Te.map&&Ee--},this.items.length,0),new Branch(RopeSequence.from(Re.reverse()),Ce)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(e,t){let n;return e.forEach((Ee,Re)=>{if(Ee.selection&&t--==0)return n=Re,!1}),e.slice(n)}class Item{constructor(t,n,Ee,Re){this.map=t,this.step=n,this.selection=Ee,this.mirrorOffset=Re}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Item(n.getMap().invert(),n,this.selection)}}}class HistoryState{constructor(t,n,Ee,Re,Ce){this.done=t,this.undone=n,this.prevRanges=Ee,this.prevTime=Re,this.prevComposition=Ce}}const DEPTH_OVERFLOW=20;function applyTransaction(e,t,n,Ee){let Re=n.getMeta(historyKey),Ce;if(Re)return Re.historyState;n.getMeta(closeHistoryKey)&&(e=new HistoryState(e.done,e.undone,null,0,-1));let Te=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(Te&&Te.getMeta(historyKey))return Te.getMeta(historyKey).redo?new HistoryState(e.done.addTransform(n,void 0,Ee,mustPreserveItems(t)),e.undone,rangesFor(n.mapping.maps),e.prevTime,e.prevComposition):new HistoryState(e.done,e.undone.addTransform(n,void 0,Ee,mustPreserveItems(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(Te&&Te.getMeta("addToHistory")===!1)){let Me=n.getMeta("composition"),De=e.prevTime==0||!Te&&e.prevComposition!=Me&&(e.prevTime<(n.time||0)-Ee.newGroupDelay||!isAdjacentTo(n,e.prevRanges)),Oe=Te?mapRanges(e.prevRanges,n.mapping):rangesFor(n.mapping.maps);return new HistoryState(e.done.addTransform(n,De?t.selection.getBookmark():void 0,Ee,mustPreserveItems(t)),Branch.empty,Oe,n.time,Me??e.prevComposition)}else return(Ce=n.getMeta("rebased"))?new HistoryState(e.done.rebased(n,Ce),e.undone.rebased(n,Ce),mapRanges(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new HistoryState(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),mapRanges(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function isAdjacentTo(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((Ee,Re)=>{for(let Ce=0;Ce<t.length;Ce+=2)Ee<=t[Ce+1]&&Re>=t[Ce]&&(n=!0)}),n}function rangesFor(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((Ee,Re,Ce,Te)=>t.push(Ce,Te));return t}function mapRanges(e,t){if(!e)return null;let n=[];for(let Ee=0;Ee<e.length;Ee+=2){let Re=t.map(e[Ee],1),Ce=t.map(e[Ee+1],-1);Re<=Ce&&n.push(Re,Ce)}return n}function histTransaction(e,t,n){let Ee=mustPreserveItems(t),Re=historyKey.get(t).spec.config,Ce=(n?e.undone:e.done).popEvent(t,Ee);if(!Ce)return null;let Te=Ce.selection.resolve(Ce.transform.doc),Me=(n?e.done:e.undone).addTransform(Ce.transform,t.selection.getBookmark(),Re,Ee),De=new HistoryState(n?Me:Ce.remaining,n?Ce.remaining:Me,null,0,-1);return Ce.transform.setSelection(Te).setMeta(historyKey,{redo:n,historyState:De})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(e){let t=e.plugins;if(cachedPreserveItemsPlugins!=t){cachedPreserveItems=!1,cachedPreserveItemsPlugins=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(t,n,Ee){return applyTransaction(n,Ee,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let Ee=n.inputType,Re=Ee=="historyUndo"?undo:Ee=="historyRedo"?redo:null;return!Re||!t.editable?!1:(n.preventDefault(),Re(t.state,t.dispatch))}}}})}function buildCommand(e,t){return(n,Ee)=>{let Re=historyKey.getState(n);if(!Re||(e?Re.undone:Re.done).eventCount==0)return!1;if(Ee){let Ce=histTransaction(Re,n,e);Ce&&Ee(t?Ce.scrollIntoView():Ce)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0);Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const Ee=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(Ee)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new Plugin({key:new PluginKey("characterCount"),appendTransaction:(t,n,Ee)=>{if(e)return;const Re=this.options.limit;if(Re==null||Re===0){e=!0;return}const Ce=this.storage.characters({node:Ee.doc});if(Ce>Re){const Te=Ce-Re,Me=0,De=Te;console.warn(`[CharacterCount] Initial content exceeded limit of ${Re} characters. Content was automatically trimmed.`);const Oe=Ee.tr.deleteRange(Me,De);return e=!0,Oe}e=!0},filterTransaction:(t,n)=>{const Ee=this.options.limit;if(!t.docChanged||Ee===0||Ee===null||Ee===void 0)return!0;const Re=this.storage.characters({node:n.doc}),Ce=this.storage.characters({node:t.doc});if(Ce<=Ee||Re>Ee&&Ce>Ee&&Ce<=Re)return!0;if(Re>Ee&&Ce>Ee&&Ce>Re||!t.getMeta("paste"))return!1;const Me=t.selection.$head.pos,De=Ce-Ee,Oe=Me-De,Be=Me;return t.deleteRange(Oe,Be),!(this.storage.characters({node:t.doc})>Ee)}})]}});var Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:Ee}=this.editor,{anchor:Re}=t,Ce=[];if(!n||!Ee)return DecorationSet.create(e,[]);let Te=0;this.options.mode==="deepest"&&e.descendants((De,Oe)=>{if(De.isText)return;if(!(Re>=Oe&&Re<=Oe+De.nodeSize-1))return!1;Te+=1});let Me=0;return e.descendants((De,Oe)=>{if(De.isText||!(Re>=Oe&&Re<=Oe+De.nodeSize-1))return!1;if(Me+=1,this.options.mode==="deepest"&&Te-Me>0||this.options.mode==="shallowest"&&Me>1)return this.options.mode==="deepest";Ce.push(Decoration.node(Oe,Oe+De.nodeSize,{class:this.options.className}))}),DecorationSet.create(e,Ce)}}})]}});var Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=callOrReturn(getExtensionField(e,"allowGapCursor",n)))!=null?t:null}}});Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:Ee}=t,Re=[];if(!n)return null;const Ce=this.editor.isEmpty;return e.descendants((Te,Me)=>{const De=Ee>=Me&&Ee<=Me+Te.nodeSize,Oe=!Te.isLeaf&&isNodeEmpty(Te);if((De||!this.options.showOnlyCurrent)&&Oe){const Be=[this.options.emptyNodeClass];Ce&&Be.push(this.options.emptyEditorClass);const ze=Decoration.node(Me,Me+Te.nodeSize,{class:Be.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:Te,pos:Me,hasAnchor:De}):this.options.placeholder});Re.push(ze)}return this.options.includeChildren}),DecorationSet.create(e,Re)}}})]}});Extension.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Plugin({key:new PluginKey("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||isNodeSelection(n.selection)||e.view.dragging?null:DecorationSet.create(n.doc,[Decoration.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function nodeEqualsType({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var TrailingNode=Extension.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new PluginKey(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",Ee=Object.entries(this.editor.schema.nodes).map(([,Re])=>Re).filter(Re=>(this.options.notAfter||[]).concat(n).includes(Re.name));return[new Plugin({key:t,appendTransaction:(Re,Ce,Te)=>{const{doc:Me,tr:De,schema:Oe}=Te,Be=t.getState(Te),ze=Me.content.size,$e=Oe.nodes[n];if(Be)return De.insert(ze,$e.create())},state:{init:(Re,Ce)=>{const Te=Ce.tr.doc.lastChild;return!nodeEqualsType({node:Te,types:Ee})},apply:(Re,Ce)=>{if(!Re.docChanged||Re.getMeta("__uniqueIDTransaction"))return Ce;const Te=Re.doc.lastChild;return!nodeEqualsType({node:Te,types:Ee})}}})]}}),UndoRedo=Extension.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>undo(e,t),redo:()=>({state:e,dispatch:t})=>redo(e,t)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var e,t,n,Ee;const Re=[];return this.options.bold!==!1&&Re.push(Bold.configure(this.options.bold)),this.options.blockquote!==!1&&Re.push(Blockquote.configure(this.options.blockquote)),this.options.bulletList!==!1&&Re.push(BulletList.configure(this.options.bulletList)),this.options.code!==!1&&Re.push(Code.configure(this.options.code)),this.options.codeBlock!==!1&&Re.push(CodeBlock.configure(this.options.codeBlock)),this.options.document!==!1&&Re.push(Document.configure(this.options.document)),this.options.dropcursor!==!1&&Re.push(Dropcursor.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&Re.push(Gapcursor.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&Re.push(HardBreak.configure(this.options.hardBreak)),this.options.heading!==!1&&Re.push(Heading.configure(this.options.heading)),this.options.undoRedo!==!1&&Re.push(UndoRedo.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&Re.push(HorizontalRule.configure(this.options.horizontalRule)),this.options.italic!==!1&&Re.push(Italic.configure(this.options.italic)),this.options.listItem!==!1&&Re.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&Re.push(ListKeymap.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&Re.push(Link.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&Re.push(OrderedList.configure(this.options.orderedList)),this.options.paragraph!==!1&&Re.push(Paragraph.configure(this.options.paragraph)),this.options.strike!==!1&&Re.push(Strike.configure(this.options.strike)),this.options.text!==!1&&Re.push(Text.configure(this.options.text)),this.options.underline!==!1&&Re.push(Underline.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&Re.push(TrailingNode.configure((Ee=this.options)==null?void 0:Ee.trailingNode)),Re}}),index_default=StarterKit,inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$1=Node3.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",mergeAttributes(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,n,Ee,Re,Ce,Te;const Me=(n=(t=e.attrs)==null?void 0:t.src)!=null?n:"",De=(Re=(Ee=e.attrs)==null?void 0:Ee.alt)!=null?Re:"",Oe=(Te=(Ce=e.attrs)==null?void 0:Ce.title)!=null?Te:"";return Oe?`![${De}](${Me} "${Oe}")`:`![${De}](${Me})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:e,minWidth:t,minHeight:n,alwaysPreserveAspectRatio:Ee}=this.options.resize;return({node:Re,getPos:Ce,HTMLAttributes:Te,editor:Me})=>{const De=document.createElement("img");Object.entries(Te).forEach(([ze,$e])=>{if($e!=null)switch(ze){case"width":case"height":break;default:De.setAttribute(ze,$e);break}}),De.src=Te.src;const Oe=new ResizableNodeView({element:De,editor:Me,node:Re,getPos:Ce,onResize:(ze,$e)=>{De.style.width=`${ze}px`,De.style.height=`${$e}px`},onCommit:(ze,$e)=>{const He=Ce();He!==void 0&&this.editor.chain().setNodeSelection(He).updateAttributes(this.name,{width:ze,height:$e}).run()},onUpdate:(ze,$e,He)=>ze.type===Re.type,options:{directions:e,min:{width:t,height:n},preserveAspectRatio:Ee===!0}}),Be=Oe.dom;return Be.style.visibility="hidden",Be.style.pointerEvents="none",De.onload=()=>{Be.style.visibility="",Be.style.pointerEvents=""},Oe}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:e=>{const[,,t,n,Ee]=e;return{src:n,alt:t,title:Ee}}})]}}),TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).some(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).some(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),MAX_FIND_CHILD_SPAN_DEPTH=20,findChildSpans=(e,t=0)=>{const n=[];return!e.children.length||t>MAX_FIND_CHILD_SPAN_DEPTH||Array.from(e.children).forEach(Ee=>{Ee.tagName==="SPAN"?n.push(Ee):Ee.children.length&&n.push(...findChildSpans(Ee,t+1))}),n},mergeNestedSpanStyles=e=>{if(!e.children.length)return;const t=findChildSpans(e);t&&t.forEach(n=>{var Ee,Re;const Ce=n.getAttribute("style"),Te=(Re=(Ee=n.parentElement)==null?void 0:Ee.closest("span"))==null?void 0:Re.getAttribute("style");n.setAttribute("style",`${Te};${Ce}`)})},TextStyle=Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:e=>e.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&mergeNestedSpanStyles(e),{}):!1}]},renderHTML({HTMLAttributes:e}){return["span",mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleTextStyle:e=>({commands:t})=>t.toggleMark(this.name,e),removeEmptyTextStyle:()=>({tr:e})=>{const{selection:t}=e;return e.doc.nodesBetween(t.from,t.to,(n,Ee)=>{if(n.isTextblock)return!0;n.marks.filter(Re=>Re.type===this.type).some(Re=>Object.values(Re.attrs).some(Ce=>!!Ce))||e.removeMark(Ee,Ee+n.nodeSize,this.type)}),!0}}}}),BackgroundColor=Extension.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const Ee=n.split(";").map(Re=>Re.trim()).filter(Boolean);for(let Re=Ee.length-1;Re>=0;Re-=1){const Ce=Ee[Re].split(":");if(Ce.length>=2){const Te=Ce[0].trim().toLowerCase(),Me=Ce.slice(1).join(":").trim();if(Te==="background-color")return Me.replace(/['"]+/g,"")}}}return(t=e.style.backgroundColor)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.backgroundColor?{style:`background-color: ${e.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:e=>({chain:t})=>t().setMark("textStyle",{backgroundColor:e}).run(),unsetBackgroundColor:()=>({chain:e})=>e().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Color=Extension.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const Ee=n.split(";").map(Re=>Re.trim()).filter(Boolean);for(let Re=Ee.length-1;Re>=0;Re-=1){const Ce=Ee[Re].split(":");if(Ce.length>=2){const Te=Ce[0].trim().toLowerCase(),Me=Ce.slice(1).join(":").trim();if(Te==="color")return Me.replace(/['"]+/g,"")}}}return(t=e.style.color)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:`color: ${e.color}`}:{}}}}]},addCommands(){return{setColor:e=>({chain:t})=>t().setMark("textStyle",{color:e}).run(),unsetColor:()=>({chain:e})=>e().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),FontFamily=Extension.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.fontFamily?{style:`font-family: ${e.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:e=>({chain:t})=>t().setMark("textStyle",{fontFamily:e}).run(),unsetFontFamily:()=>({chain:e})=>e().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),FontSize=Extension.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:e=>({chain:t})=>t().setMark("textStyle",{fontSize:e}).run(),unsetFontSize:()=>({chain:e})=>e().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),LineHeight=Extension.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:e=>e.style.lineHeight,renderHTML:e=>e.lineHeight?{style:`line-height: ${e.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:e=>({chain:t})=>t().setMark("textStyle",{lineHeight:e}).run(),unsetLineHeight:()=>({chain:e})=>e().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Extension.create({name:"textStyleKit",addExtensions(){const e=[];return this.options.backgroundColor!==!1&&e.push(BackgroundColor.configure(this.options.backgroundColor)),this.options.color!==!1&&e.push(Color.configure(this.options.color)),this.options.fontFamily!==!1&&e.push(FontFamily.configure(this.options.fontFamily)),this.options.fontSize!==!1&&e.push(FontSize.configure(this.options.fontSize)),this.options.lineHeight!==!1&&e.push(LineHeight.configure(this.options.lineHeight)),this.options.textStyle!==!1&&e.push(TextStyle.configure(this.options.textStyle)),e}});function RichTextEditor({value:e,onChange:t}){const n=useEditor({extensions:[index_default,Image$1.configure({inline:!0,allowBase64:!0}),TextAlign.configure({types:["heading","paragraph"]}),TextStyle,Color],content:e,onUpdate:({editor:Re})=>{t(Re.getHTML())},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[300px] p-4"}}}),Ee=reactExports.useCallback(()=>{const Re=document.createElement("input");Re.type="file",Re.accept="image/*",Re.onchange=Ce=>{var Me;const Te=(Me=Ce.target.files)==null?void 0:Me[0];if(Te){const De=new FileReader;De.onload=Oe=>{var ze;const Be=(ze=Oe.target)==null?void 0:ze.result;n==null||n.chain().focus().setImage({src:Be}).run()},De.readAsDataURL(Te)}},Re.click()},[n]);return n?jsxRuntimeExports.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-white dark:bg-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1 p-2 border-b border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900",children:[jsxRuntimeExports.jsx("button",{onClick:()=>n.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("bold")?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Bold",children:jsxRuntimeExports.jsx(Bold$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>n.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("italic")?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Italic",children:jsxRuntimeExports.jsx(Italic$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>n.chain().focus().toggleCode().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("code")?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Inline Code",children:jsxRuntimeExports.jsx(Code$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),jsxRuntimeExports.jsx("button",{onClick:()=>n.chain().focus().toggleBulletList().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("bulletList")?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Bullet List",children:jsxRuntimeExports.jsx(List,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>n.chain().focus().toggleOrderedList().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("orderedList")?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Numbered List",children:jsxRuntimeExports.jsx(ListOrdered,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),jsxRuntimeExports.jsx("button",{onClick:()=>n.chain().focus().setTextAlign("left").run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive({textAlign:"left"})?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Align Left",children:jsxRuntimeExports.jsx(TextAlignStart,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>n.chain().focus().setTextAlign("center").run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive({textAlign:"center"})?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Align Center",children:jsxRuntimeExports.jsx(TextAlignCenter,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>n.chain().focus().setTextAlign("right").run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive({textAlign:"right"})?"bg-gray-300 dark:bg-gray-600":""}`,type:"button",title:"Align Right",children:jsxRuntimeExports.jsx(TextAlignEnd,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),jsxRuntimeExports.jsx("button",{onClick:Ee,className:"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700",type:"button",title:"Insert Image",children:jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600 mx-1"}),jsxRuntimeExports.jsx("button",{onClick:()=>n.chain().focus().undo().run(),disabled:!n.can().undo(),className:"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",type:"button",title:"Undo",children:jsxRuntimeExports.jsx(Undo,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>n.chain().focus().redo().run(),disabled:!n.can().redo(),className:"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",type:"button",title:"Redo",children:jsxRuntimeExports.jsx(Redo,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("div",{className:"ml-auto flex items-center gap-2",children:jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Supports:"," ","{{employee_name}}, {{company_name}}, {{years_completed}}"]})})]}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:jsxRuntimeExports.jsx(EditorContent,{editor:n})})]}):null}function EmailAutomation(){var We,qe,Ge,Ye,Ke,Xe,Ze,er;const[e,t]=reactExports.useState("settings"),[n,Ee]=reactExports.useState(!1),[Re,Ce]=reactExports.useState(null),[Te,Me]=reactExports.useState([]),[De,Oe]=reactExports.useState(null);reactExports.useEffect(()=>{e==="settings"&&Be(),e==="logs"&&ze()},[e]);const Be=async()=>{try{Ee(!0),Oe(null);const St=await apiService.getEmailSettings();Ce(St)}catch(St){console.error("Failed to fetch settings",St),Oe(St.message||"Failed to load settings")}finally{Ee(!1)}},ze=async()=>{try{Ee(!0),Oe(null);const St=await apiService.getEmailAuditLogs();Me(St)}catch(St){console.error("Failed to fetch logs",St)}finally{Ee(!1)}},$e=async()=>{try{Ee(!0),Oe(null),await apiService.updateEmailSettings(Re)}catch(St){console.error("Failed to save settings",St),Oe(St.message||"Failed to save settings")}finally{Ee(!1)}},He=async()=>{try{Ee(!0),Oe(null),await apiService.triggerEmailAutomation(),t("logs")}catch(St){console.error("Failed to trigger automation",St),Oe(St.message||"Failed to trigger automation")}finally{Ee(!1)}},Ue=(St,ar)=>{Ce(hr=>{const ur=St.split("."),dr={...hr};let vr=dr;for(let yr=0;yr<ur.length-1;yr++)vr=vr[ur[yr]];return vr[ur[ur.length-1]]=ar,dr})},Ve=[{header:"Recipient",accessorKey:"recipient.name",render:St=>St.recipient.name},{header:"Type",accessorKey:"type",render:St=>jsxRuntimeExports.jsx(Badge,{variant:"primary",children:St.type})},{header:"Subject",accessorKey:"subject"},{header:"Date",accessorKey:"sentAt",render:St=>new Date(St.sentAt).toLocaleString()},{header:"Status",accessorKey:"status",render:St=>jsxRuntimeExports.jsx(Badge,{variant:St.status==="Success"?"success":"error",children:St.status})},{header:"Trigger",accessorKey:"triggeredBy"}];return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-0",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors -ml-2",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Email Automation"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Configure automated birthday and work anniversary email notifications"})]})]})}),De&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:De})}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl shadow-sm overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex border-b border-border",children:[jsxRuntimeExports.jsx("button",{onClick:()=>t("settings"),className:`px-6 py-3 text-sm font-medium transition-colors ${e==="settings"?"border-b-2 border-brand-primary text-brand-primary":"text-text-secondary hover:text-text-primary"}`,children:"Settings"}),jsxRuntimeExports.jsx("button",{onClick:()=>t("logs"),className:`px-6 py-3 text-sm font-medium transition-colors ${e==="logs"?"border-b-2 border-brand-primary text-brand-primary":"text-text-secondary hover:text-text-primary"}`,children:"Audit Logs"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[De&&jsxRuntimeExports.jsxs("div",{className:"p-4 mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg",children:["Error: ",De,jsxRuntimeExports.jsx("button",{onClick:Be,className:"ml-4 underline hover:text-red-800",children:"Retry"})]}),e==="settings"&&!Re&&!n&&!De&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[jsxRuntimeExports.jsx("p",{children:"No settings data found."}),jsxRuntimeExports.jsx("button",{onClick:Be,className:"mt-2 text-brand-primary underline",children:"Retry"})]}),e==="settings"&&Re&&jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Birthday Emails"}),jsxRuntimeExports.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:((We=Re.birthday)==null?void 0:We.enabled)||!1,onChange:St=>Ue("birthday.enabled",St.target.checked),className:"sr-only peer"}),jsxRuntimeExports.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-primary"})]})]}),((qe=Re.birthday)==null?void 0:qe.enabled)&&jsxRuntimeExports.jsxs("div",{className:"grid gap-4 pl-4 border-l-2 border-border",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subject"}),jsxRuntimeExports.jsx(Input,{type:"text",value:Re.birthday.subject,onChange:St=>Ue("birthday.subject",St.target.value),className:"bg-bg-input"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Body (HTML Editor)"}),jsxRuntimeExports.jsx(RichTextEditor,{value:Re.birthday.body,onChange:St=>Ue("birthday.body",St),placeholder:"Enter birthday email template..."})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Work Anniversary Emails"}),jsxRuntimeExports.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:((Ge=Re.anniversary)==null?void 0:Ge.enabled)||!1,onChange:St=>Ue("anniversary.enabled",St.target.checked),className:"sr-only peer"}),jsxRuntimeExports.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-primary"})]})]}),((Ye=Re.anniversary)==null?void 0:Ye.enabled)&&jsxRuntimeExports.jsxs("div",{className:"grid gap-4 pl-4 border-l-2 border-border",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subject"}),jsxRuntimeExports.jsx(Input,{type:"text",value:Re.anniversary.subject,onChange:St=>Ue("anniversary.subject",St.target.value),className:"bg-bg-input"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Body (HTML Editor)"}),jsxRuntimeExports.jsx(RichTextEditor,{value:Re.anniversary.body,onChange:St=>Ue("anniversary.body",St),placeholder:"Enter anniversary email template..."})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 pt-4 border-t border-border md:flex gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-text-primary mb-2",children:"Schedule"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-text-secondary",children:"Send daily at:"}),jsxRuntimeExports.jsx(Input,{type:"time",value:((Ke=Re.schedule)==null?void 0:Ke.time)||"09:00",onChange:St=>Ue("schedule.time",St.target.value),className:"px-2 py-1 bg-bg-input"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-text-primary mb-2",children:"Notifications"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[" ",jsxRuntimeExports.jsx(Checkbox,{checked:((Xe=Re.notification)==null?void 0:Xe.ccManager)||!1,onChange:St=>Ue("notification.ccManager",St.target.checked),label:"CC Employee's Manager"}),jsxRuntimeExports.jsx(Checkbox,{checked:((Ze=Re.notification)==null?void 0:Ze.notifyHR)||!1,onChange:St=>Ue("notification.notifyHR",St.target.checked),label:"Notify HR upon sending"}),jsxRuntimeExports.jsx(Checkbox,{checked:((er=Re.notification)==null?void 0:er.notifyAllEmployees)||!1,onChange:St=>Ue("notification.notifyAllEmployees",St.target.checked),label:"Send celebration email to all employees"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-border",children:[jsxRuntimeExports.jsxs("button",{onClick:He,disabled:n,className:"flex items-center gap-2 px-4 py-2 text-brand-primary bg-brand-primary/10 hover:bg-brand-primary/20 rounded-lg transition-colors",children:[jsxRuntimeExports.jsx(CirclePlay,{size:18}),"Run Now"]}),jsxRuntimeExports.jsxs("button",{onClick:$e,disabled:n,className:"flex items-center gap-2 px-4 py-2 bg-brand-primary text-white hover:bg-brand-primary-dark rounded-lg transition-colors",children:[n?jsxRuntimeExports.jsx(LoaderCircle,{size:18,className:"animate-spin"}):jsxRuntimeExports.jsx(Save,{size:18}),"Save Changes"]})]})]}),e==="logs"&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Table$1,{data:Te,columns:Ve,isLoading:n,emptyMessage:"No emails sent yet."})})]})]})]})}function AssetCategories(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(""),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(null),[Be,ze]=reactExports.useState(null),[$e,He]=reactExports.useState({name:"",description:"",customFields:[]});reactExports.useEffect(()=>{Ue()},[]);const Ue=async()=>{try{Ee(!0);const Ze=await apiService.getAssetCategories(!0);t(Ze)}catch(Ze){Ce(Ze.message)}finally{Ee(!1)}},Ve=async Ze=>{Ze.preventDefault();try{De?await apiService.updateAssetCategory(De._id,$e):await apiService.createAssetCategory($e),Me(!1),Ge(),Ue()}catch(er){Ce(er.message)}},We=Ze=>{Oe(Ze),He({name:Ze.name,description:Ze.description,customFields:Ze.customFields||[]}),Me(!0)},qe=async Ze=>{try{await apiService.deleteAssetCategory(Ze),ze(null),Ue()}catch(er){Ce(er.message)}},Ge=()=>{He({name:"",description:"",customFields:[]}),Oe(null)},Ye=()=>{He({...$e,customFields:[...$e.customFields,{name:"",fieldType:"text",required:!1,options:[]}]})},Ke=(Ze,er)=>{const St=[...$e.customFields];St[Ze]={...St[Ze],...er},He({...$e,customFields:St})},Xe=Ze=>{He({...$e,customFields:$e.customFields.filter((er,St)=>St!==Ze)})};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-0",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors -ml-2",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 text-text-secondary"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Asset Categories"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Configure asset types and their custom fields"})]})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>{Ge(),Me(!0)},leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Add Category"})]}),Re&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:Re})}),jsxRuntimeExports.jsx("div",{className:"bg-bg-card border border-border rounded-xl shadow-sm overflow-hidden",children:n?jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-bg-secondary border-b border-border",children:jsxRuntimeExports.jsx("tr",{children:["Name","Description","Custom Fields","Status","Actions"].map((Ze,er)=>jsxRuntimeExports.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider ${Ze==="Actions"?"text-right":""}`,children:Ze},er))})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-border",children:[1,2,3,4,5].map(Ze=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-32"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-48"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-20"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-16 rounded-full"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 rounded"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 rounded"})]})})]},Ze))})]})}):e.length===0?jsxRuntimeExports.jsx("div",{className:"p-12 text-center text-text-secondary",children:'No asset categories found. Click "Add Category" to create one.'}):jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-bg-secondary border-b border-border",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Name"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Description"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Custom Fields"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-border",children:e.map(Ze=>{var er;return jsxRuntimeExports.jsxs("tr",{className:"hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:Ze.name})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary",children:Ze.description||"-"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsxs("span",{className:"text-sm text-text-secondary",children:[((er=Ze.customFields)==null?void 0:er.length)||0," field(s)"]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Ze.isActive?"bg-status-success/10 text-status-success":"bg-status-muted/10 text-status-muted"}`,children:Ze.isActive?"Active":"Inactive"})}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[jsxRuntimeExports.jsx("button",{onClick:()=>We(Ze),className:"text-brand-primary hover:text-brand-secondary mr-4",children:jsxRuntimeExports.jsx(SquarePen,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>ze(Ze._id),className:"text-status-error hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{size:18})})]})]},Ze._id)})})]})})}),jsxRuntimeExports.jsx(Modal,{isOpen:Te,onClose:()=>{Me(!1),Ge()},title:De?"Edit Category":"Add Category",children:jsxRuntimeExports.jsxs("form",{onSubmit:Ve,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Name *"}),jsxRuntimeExports.jsx(Input,{required:!0,value:$e.name,onChange:Ze=>He({...$e,name:Ze.target.value}),className:"bg-bg-input",placeholder:"e.g., Laptop, Monitor, Keyboard"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:$e.description,onChange:Ze=>He({...$e,description:Ze.target.value}),className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary/20",rows:3,placeholder:"Optional description"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary",children:"Custom Fields"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Ye,className:"text-sm text-brand-primary hover:underline",children:"+ Add Field"})]}),$e.customFields.map((Ze,er)=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg mb-2 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-start",children:[jsxRuntimeExports.jsx(Input,{placeholder:"Field name",value:Ze.name,onChange:St=>Ke(er,{name:St.target.value}),className:"flex-1 bg-bg-input"}),jsxRuntimeExports.jsx("div",{className:"w-1/3",children:jsxRuntimeExports.jsx(Select,{value:Ze.fieldType,onChange:St=>Ke(er,{fieldType:St}),options:[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"dropdown",label:"Dropdown"},{value:"boolean",label:"Yes/No"}],className:"bg-bg-input"})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Xe(er),className:"p-2 text-status-error hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg mt-1",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mt-2",children:jsxRuntimeExports.jsx(Checkbox,{checked:Ze.required,onChange:St=>Ke(er,{required:St.target.checked}),label:"Required field"})})]},er))]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"secondary",onClick:()=>{Me(!1),Ge()},children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",children:De?"Update":"Create"})]})]})}),jsxRuntimeExports.jsxs(Modal,{isOpen:Be!==null,onClose:()=>ze(null),title:"Delete Category",children:[jsxRuntimeExports.jsx("p",{className:"text-text-secondary mb-4",children:"Are you sure you want to delete this category? This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>ze(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{variant:"danger",onClick:()=>Be&&qe(Be),children:"Delete"})]})]})]})}function AssetInventory(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState([]),[Re,Ce]=reactExports.useState(!0),[Te,Me]=reactExports.useState(""),[De,Oe]=reactExports.useState(!1),[Be,ze]=reactExports.useState(null),[$e,He]=reactExports.useState(null),[Ue,Ve]=reactExports.useState(""),[We,qe]=reactExports.useState(""),[Ge,Ye]=reactExports.useState(null),[Ke,Xe]=reactExports.useState([]),[Ze,er]=reactExports.useState({employeeId:"",expectedReturnDate:"",notes:""}),[St,ar]=reactExports.useState({categoryId:"",status:"",search:""}),[hr,ur]=reactExports.useState({categoryId:"",name:"",manufacturer:"",model:"",serialNumber:"",purchaseDate:"",vendor:"",warrantyExpiry:"",condition:"New",purchasePrice:"",currentValue:"",notes:"",image:null});reactExports.useEffect(()=>{Promise.all([yr(),vr(),dr()])},[]);const dr=async()=>{try{const nr=await apiService.getEmployees();Xe(nr)}catch(nr){console.error("Failed to fetch employees:",nr)}},vr=async()=>{try{const nr=await apiService.getAssetCategories();Ee(nr)}catch(nr){console.error(nr)}},yr=async()=>{try{Ce(!0);const nr={};St.categoryId&&(nr.categoryId=St.categoryId),St.status&&(nr.status=St.status),St.search&&(nr.search=St.search);const gr=await apiService.getAssets(nr);t(gr.assets||gr)}catch(nr){Me(nr.message)}finally{Ce(!1)}};reactExports.useEffect(()=>{yr()},[St]);const br=async nr=>{nr.preventDefault();try{const gr=new FormData;gr.append("categoryId",hr.categoryId),gr.append("name",hr.name),hr.manufacturer&&gr.append("manufacturer",hr.manufacturer),hr.model&&gr.append("model",hr.model),hr.serialNumber&&gr.append("serialNumber",hr.serialNumber),hr.purchaseDate&&gr.append("purchaseDate",hr.purchaseDate),hr.vendor&&gr.append("vendor",hr.vendor),hr.warrantyExpiry&&gr.append("warrantyExpiry",hr.warrantyExpiry),gr.append("condition",hr.condition),hr.purchasePrice&&gr.append("purchasePrice",hr.purchasePrice),hr.currentValue&&gr.append("currentValue",hr.currentValue),hr.notes&&gr.append("notes",hr.notes),hr.image&&gr.append("image",hr.image),Be?await apiService.updateAsset(Be._id,gr):await apiService.createAsset(gr),Oe(!1),pr(),yr()}catch(gr){Me(gr.message)}},lr=nr=>{var gr,Er;ze(nr),ur({categoryId:nr.categoryId._id,name:nr.name,manufacturer:nr.manufacturer||"",model:nr.model||"",serialNumber:nr.serialNumber||"",purchaseDate:"",vendor:"",warrantyExpiry:"",condition:nr.condition,purchasePrice:((gr=nr.purchasePrice)==null?void 0:gr.toString())||"",currentValue:((Er=nr.currentValue)==null?void 0:Er.toString())||"",notes:"",image:null}),Oe(!0)},cr=async()=>{if($e)try{await apiService.disposeAsset($e,{disposalReason:Ue,disposalNotes:We,disposalDate:new Date().toISOString()}),He(null),Ve(""),qe(""),yr()}catch(nr){Me(nr.message)}},rr=async()=>{if(!(!Ge||!Ze.employeeId))try{await apiService.assignAsset({assetId:Ge._id,employeeId:Ze.employeeId,expectedReturnDate:Ze.expectedReturnDate||void 0,conditionAtIssue:Ge.condition,notes:Ze.notes}),Ye(null),er({employeeId:"",expectedReturnDate:"",notes:""}),yr()}catch(nr){Me(nr.message)}},pr=()=>{ur({categoryId:"",name:"",manufacturer:"",model:"",serialNumber:"",purchaseDate:"",vendor:"",warrantyExpiry:"",condition:"New",purchasePrice:"",currentValue:"",notes:"",image:null}),ze(null)},mr=nr=>{switch(nr){case"Available":return"success";case"Issued":return"info";case"Under Repair":return"warning";case"Lost":case"Disposed":return"error";default:return"default"}},ir=()=>{if(e.length===0)return;const nr=["Asset Code","Name","Category","Manufacturer","Model","Serial Number","Status","Condition","Purchase Price","Current Value"],gr=e.map(Fr=>{var $r;return[Fr.assetCode,Fr.name,(($r=Fr.categoryId)==null?void 0:$r.name)||"N/A",Fr.manufacturer||"-",Fr.model||"-",Fr.serialNumber||"-",Fr.status,Fr.condition,Fr.purchasePrice||"0",Fr.currentValue||"0"]}),Er=[nr.join(","),...gr.map(Fr=>Fr.map($r=>`"${$r}"`).join(","))].join(`
`),Cr=new Blob([Er],{type:"text/csv;charset=utf-8;"}),Nr=document.createElement("a"),Mr=URL.createObjectURL(Cr);Nr.setAttribute("href",Mr),Nr.setAttribute("download",`asset-inventory-${new Date().toISOString().split("T")[0]}.csv`),Nr.style.visibility="hidden",document.body.appendChild(Nr),Nr.click(),document.body.removeChild(Nr)};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-0",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors -ml-2",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 text-text-secondary"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Asset Inventory"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Manage and track all company assets"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:ir,leftIcon:jsxRuntimeExports.jsx(Download,{size:18}),disabled:e.length===0,children:"Export CSV"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{pr(),Oe(!0)},leftIcon:jsxRuntimeExports.jsx(Plus,{size:20}),children:"Add Asset"})]})]}),Te&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:Te})}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card p-4 rounded-xl border border-border flex gap-4",children:[jsxRuntimeExports.jsx(Input,{type:"text",placeholder:"Search by name, code, or serial number...",value:St.search,onChange:nr=>ar({...St,search:nr.target.value}),className:"flex-1 bg-bg-input"}),jsxRuntimeExports.jsx("div",{className:"w-48",children:jsxRuntimeExports.jsx(Select,{value:St.categoryId,onChange:nr=>ar({...St,categoryId:nr}),options:[{value:"",label:"All Categories"},...n.map(nr=>({value:nr._id,label:nr.name}))],className:"bg-bg-input"})}),jsxRuntimeExports.jsx("div",{className:"w-40",children:jsxRuntimeExports.jsx(Select,{value:St.status,onChange:nr=>ar({...St,status:nr}),options:[{value:"",label:"All Statuses"},{value:"Available",label:"Available"},{value:"Issued",label:"Issued"},{value:"Under Repair",label:"Under Repair"},{value:"Lost",label:"Lost"},{value:"Disposed",label:"Disposed"}],className:"bg-bg-input"})})]}),jsxRuntimeExports.jsx("div",{className:"bg-bg-card border border-border rounded-xl shadow-sm overflow-hidden",children:Re?jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-bg-secondary border-b border-border",children:jsxRuntimeExports.jsx("tr",{children:["Image","Asset Code","Name","Category","Serial Number","Status","Condition","Actions"].map((nr,gr)=>jsxRuntimeExports.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase ${nr==="Actions"?"text-right":""}`,children:nr},gr))})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-border",children:[1,2,3,4,5,6].map(nr=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-10 rounded-lg"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-20"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-24"})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-20"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-24 rounded-full"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-16"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 rounded"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 rounded"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 rounded"})]})})]},nr))})]})}):e.length===0?jsxRuntimeExports.jsxs("div",{className:"p-12 text-center text-text-secondary",children:[jsxRuntimeExports.jsx(Package,{className:"mx-auto mb-4 text-text-muted",size:48}),jsxRuntimeExports.jsx("p",{children:'No assets found. Click "Add Asset" to register one.'})]}):jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-bg-secondary border-b border-border",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Image"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Asset Code"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Name"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Category"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Serial Number"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase",children:"Condition"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase",children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-border",children:e.map(nr=>{var gr;return jsxRuntimeExports.jsxs("tr",{className:"hover:bg-bg-hover transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-bg-secondary border border-border flex items-center justify-center overflow-hidden",children:nr.image?jsxRuntimeExports.jsx("img",{src:nr.image.startsWith("http")?nr.image:`http://localhost:5000${nr.image}`,alt:nr.name,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx(Image$2,{className:"text-text-muted",size:16})})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:"font-mono text-sm text-brand-primary",children:nr.assetCode})}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-4",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-text-primary",children:nr.name}),nr.manufacturer&&jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:nr.manufacturer})]}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary",children:((gr=nr.categoryId)==null?void 0:gr.name)||"N/A"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary font-mono",children:nr.serialNumber||"-"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx(Badge,{variant:mr(nr.status),children:nr.status})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary",children:nr.condition})}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[nr.status==="Available"&&jsxRuntimeExports.jsx("button",{onClick:()=>Ye(nr),className:"text-green-600 hover:text-green-700 mr-4",title:"Assign to Employee",children:jsxRuntimeExports.jsx(UserPlus,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>lr(nr),className:"text-brand-primary hover:text-brand-secondary mr-4",title:"Edit",children:jsxRuntimeExports.jsx(SquarePen,{size:18})}),nr.status!=="Disposed"&&jsxRuntimeExports.jsx("button",{onClick:()=>He(nr._id),className:"text-amber-600 hover:text-amber-700 mr-4",title:"Dispose Asset",children:jsxRuntimeExports.jsx(Trash2,{size:18})})]})]},nr._id)})})]})})}),jsxRuntimeExports.jsx(Modal,{isOpen:De,onClose:()=>{Oe(!1),pr()},title:Be?"Edit Asset":"Add New Asset",children:jsxRuntimeExports.jsxs("form",{onSubmit:br,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx("div",{className:"col-span-2",children:jsxRuntimeExports.jsx(Select,{label:"Category *",required:!0,value:hr.categoryId,onChange:nr=>ur({...hr,categoryId:nr}),options:[{value:"",label:"Select Category"},...n.map(nr=>({value:nr._id,label:nr.name}))],className:"bg-bg-input"})}),jsxRuntimeExports.jsx("div",{className:"col-span-2",children:jsxRuntimeExports.jsx(Input,{label:"Asset Name *",type:"text",required:!0,value:hr.name,onChange:nr=>ur({...hr,name:nr.target.value}),className:"bg-bg-input"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"Manufacturer",type:"text",value:hr.manufacturer,onChange:nr=>ur({...hr,manufacturer:nr.target.value}),className:"bg-bg-input"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"Model",type:"text",value:hr.model,onChange:nr=>ur({...hr,model:nr.target.value}),className:"bg-bg-input"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"Serial Number",type:"text",value:hr.serialNumber,onChange:nr=>ur({...hr,serialNumber:nr.target.value}),className:"bg-bg-input"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Condition",value:hr.condition,onChange:nr=>ur({...hr,condition:nr}),options:[{value:"New",label:"New"},{value:"Good",label:"Good"},{value:"Used",label:"Used"},{value:"Damaged",label:"Damaged"}],className:"bg-bg-input"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"Purchase Price",type:"number",value:hr.purchasePrice,onChange:nr=>ur({...hr,purchasePrice:nr.target.value}),className:"bg-bg-input"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"Current Value",type:"number",value:hr.currentValue,onChange:nr=>ur({...hr,currentValue:nr.target.value}),className:"bg-bg-input"})}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Asset Image"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"relative w-20 h-20 bg-bg-secondary rounded-lg border border-border flex items-center justify-center overflow-hidden",children:hr.image?jsxRuntimeExports.jsx("img",{src:URL.createObjectURL(hr.image),alt:"Preview",className:"w-full h-full object-cover"}):Be!=null&&Be.image?jsxRuntimeExports.jsx("img",{src:Be.image.startsWith("http")?Be.image:`http://localhost:5000${Be.image}`,alt:"Current",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx(Image$2,{className:"text-text-muted",size:24})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:nr=>{nr.target.files&&nr.target.files[0]&&ur({...hr,image:nr.target.files[0]})},className:`block w-full text-sm text-text-secondary
                      file:mr-4 file:py-2 file:px-4
                      file:rounded-full file:border-0
                      file:text-sm file:font-semibold
                      file:bg-brand-primary/10 file:text-brand-primary
                      hover:file:bg-brand-primary/20
                    `}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Upload an image of the asset (JPG, PNG, WebP)"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Notes"}),jsxRuntimeExports.jsx("textarea",{value:hr.notes,onChange:nr=>ur({...hr,notes:nr.target.value}),className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg",rows:3})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Oe(!1),pr()},className:"px-4 py-2 border border-border rounded-lg text-text-secondary hover:bg-bg-hover text-sm font-medium transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 text-sm font-medium transition-colors disabled:opacity-50 flex items-center gap-2",children:Be?"Update":"Create"})]})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:Ge!==null,onClose:()=>{Ye(null),er({employeeId:"",expectedReturnDate:"",notes:""})},title:"Assign Asset to Employee",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-400",children:["Asset: ",Ge==null?void 0:Ge.name," (",Ge==null?void 0:Ge.assetCode,")"]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Assign to Employee *",value:Ze.employeeId,onChange:nr=>er({...Ze,employeeId:nr}),options:[{value:"",label:"Select an employee"},...Ke.map(nr=>({value:nr._id,label:`${nr.firstName} ${nr.lastName} - ${nr.employeeId||nr.email}`}))],required:!0,className:"bg-bg-input"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Input,{label:"Expected Return Date (Optional)",type:"date",value:Ze.expectedReturnDate,onChange:nr=>er({...Ze,expectedReturnDate:nr.target.value}),className:"bg-bg-input"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Notes (Optional)"}),jsxRuntimeExports.jsx("textarea",{value:Ze.notes,onChange:nr=>er({...Ze,notes:nr.target.value}),className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg",rows:3,placeholder:"Enter any assignment notes or special instructions..."})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>{Ye(null),er({employeeId:"",expectedReturnDate:"",notes:""})},children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:rr,disabled:!Ze.employeeId,children:"Assign Asset"})]})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:$e!==null,onClose:()=>{He(null),Ve(""),qe("")},title:"Dispose Asset",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-400",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Warning:"})," Asset disposal is permanent and cannot be undone. The asset will be marked as disposed and removed from active inventory."]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Select,{label:"Disposal Reason *",required:!0,value:Ue,onChange:nr=>Ve(nr),options:[{value:"",label:"Select a reason"},{value:"End of Life",label:"End of Life"},{value:"Damaged Beyond Repair",label:"Damaged Beyond Repair"},{value:"Lost/Stolen",label:"Lost/Stolen"},{value:"Obsolete",label:"Obsolete"},{value:"Sold",label:"Sold"},{value:"Donated",label:"Donated"},{value:"Other",label:"Other"}],className:"bg-bg-input"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Additional Notes (Optional)"}),jsxRuntimeExports.jsx("textarea",{value:We,onChange:nr=>qe(nr.target.value),className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg",rows:3,placeholder:"Enter any additional details about the disposal..."})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>{He(null),Ve(""),qe("")},children:"Cancel"}),jsxRuntimeExports.jsx(Button,{variant:"danger",onClick:cr,disabled:!Ue,children:"Dispose Asset"})]})]})})]})}function MyAssets(){var vr,yr;const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(""),[Te,Me]=reactExports.useState(null),[De,Oe]=reactExports.useState(null),[Be,ze]=reactExports.useState("Good"),[$e,He]=reactExports.useState(""),[Ue,Ve]=reactExports.useState(null),[We,qe]=reactExports.useState("Damage"),[Ge,Ye]=reactExports.useState(""),[Ke,Xe]=reactExports.useState("Medium"),[Ze,er]=reactExports.useState([]);reactExports.useEffect(()=>{St()},[]);const St=async()=>{try{Ee(!0);const br=await apiService.getMyAssets();t(br)}catch(br){Ce(br.message)}finally{Ee(!1)}},ar=async br=>{try{await apiService.acknowledgeAsset(br),Me(null),St()}catch(lr){Ce(lr.message)}},hr=async()=>{if(De)try{await apiService.returnAsset(De,{conditionAtReturn:Be,notes:$e}),Oe(null),ze("Good"),He(""),St()}catch(br){Ce(br.message)}},ur=async()=>{if(Ue)try{const br={assetId:Ue.assetId._id,assignmentId:Ue._id,incidentType:We,description:Ge,urgency:Ke};await apiService.reportAssetIncident(br,Ze),Ve(null),qe("Damage"),Ye(""),Xe("Medium"),er([]),St()}catch(br){Ce(br.message)}},dr=()=>e.filter(br=>br.status==="Pending Acknowledgement").length;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"My Assets"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Assets assigned to you by the company"})]}),Re&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:Re})}),dr()>0&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-400 font-medium",children:[" You have ",dr()," asset(s) pending acknowledgement"]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n?Array.from({length:8}).map((br,lr)=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl overflow-hidden flex flex-col h-[280px]",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-5 h-5 rounded"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-32"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-20 ml-7"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-16 rounded-full"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 flex-1 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-3/4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-1/2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-2/3"})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-border/50 pt-2 space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-2/3"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 border-t border-border bg-bg-hover/50 flex gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 flex-1 rounded-lg"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-8 flex-1 rounded-lg"})]})]},lr)):e.length===0?jsxRuntimeExports.jsxs("div",{className:"col-span-full py-12 bg-bg-card border border-border rounded-xl text-center text-text-secondary",children:[jsxRuntimeExports.jsx(Package,{className:"mx-auto mb-4 text-text-muted",size:48}),jsxRuntimeExports.jsx("p",{className:"text-lg",children:"No assets assigned to you"})]}):e.map(br=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl overflow-hidden hover:shadow-sm transition-all duration-200 flex flex-col group",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-border bg-gradient-to-r from-bg-hover to-transparent flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(Package,{className:"text-brand-primary shrink-0",size:18}),jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-text-primary truncate",title:br.assetId.name,children:br.assetId.name})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary font-mono truncate pl-6.5",children:br.assetId.assetCode})]}),jsxRuntimeExports.jsx(Badge,{variant:br.status==="Pending Acknowledgement"?"warning":"success",size:"sm",className:"shrink-0",children:br.status})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 flex-1 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[br.assetId.manufacturer&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[jsxRuntimeExports.jsx(Factory,{size:14,className:"text-text-secondary shrink-0"}),jsxRuntimeExports.jsx("span",{className:"truncate",title:br.assetId.manufacturer,children:br.assetId.manufacturer})]}),br.assetId.model&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[jsxRuntimeExports.jsx(Layers,{size:14,className:"text-text-secondary shrink-0"}),jsxRuntimeExports.jsx("span",{className:"truncate",title:br.assetId.model,children:br.assetId.model})]}),br.assetId.serialNumber&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[jsxRuntimeExports.jsx(Hash,{size:14,className:"text-text-secondary shrink-0"}),jsxRuntimeExports.jsx("span",{className:"truncate font-mono text-xs",title:br.assetId.serialNumber,children:br.assetId.serialNumber})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-border/50 pt-2 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[jsxRuntimeExports.jsx(CalendarClock,{size:14,className:"text-text-secondary shrink-0"}),jsxRuntimeExports.jsxs("span",{children:["Issued:"," ",new Date(br.issueDate).toLocaleDateString()]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[jsxRuntimeExports.jsx(Activity,{size:14,className:"text-text-secondary shrink-0"}),jsxRuntimeExports.jsxs("span",{children:["Condition: ",br.conditionAtIssue]})]}),br.expectedReturnDate&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[jsxRuntimeExports.jsx(Timer,{size:14,className:"text-text-secondary shrink-0"}),jsxRuntimeExports.jsxs("span",{children:["Return:"," ",new Date(br.expectedReturnDate).toLocaleDateString()]})]})]}),br.notes&&jsxRuntimeExports.jsx("div",{className:"pt-2",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-text-secondary italic line-clamp-2",title:br.notes,children:['"',br.notes,'"']})})]}),jsxRuntimeExports.jsx("div",{className:"p-3 border-t border-border bg-bg-hover/50",children:br.status==="Pending Acknowledgement"?jsxRuntimeExports.jsx(Button,{variant:"primary",size:"sm",className:"w-full justify-center h-8",onClick:()=>Me(br._id),leftIcon:jsxRuntimeExports.jsx(CircleCheckBig,{size:14}),children:"Acknowledge"}):br.status==="Active"?jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",size:"sm",className:"flex-1 justify-center h-8 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600",onClick:()=>Oe(br._id),leftIcon:jsxRuntimeExports.jsx(CircleX,{size:14}),children:"Return"}),jsxRuntimeExports.jsx(Button,{variant:"danger",size:"sm",className:"flex-1 justify-center h-8",onClick:()=>Ve(br),leftIcon:jsxRuntimeExports.jsx(CircleAlert,{size:14}),children:"Report"})]}):jsxRuntimeExports.jsx("div",{className:"h-8"})})]},br._id))}),jsxRuntimeExports.jsx(Modal,{isOpen:Te!==null,onClose:()=>Me(null),title:"Acknowledge Asset Receipt",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"By acknowledging this asset, you confirm that:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-2 text-text-secondary text-sm",children:[jsxRuntimeExports.jsx("li",{children:"You have received the asset in the condition stated"}),jsxRuntimeExports.jsx("li",{children:"You will handle the asset with care and responsibility"}),jsxRuntimeExports.jsx("li",{children:"You will report any damage or issues immediately"}),jsxRuntimeExports.jsx("li",{children:"You will return the asset when requested or upon leaving the company"})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg",children:jsxRuntimeExports.jsx(Checkbox,{id:"agree",label:"I agree to the terms and conditions above",required:!0})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>Me(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Te&&ar(Te),children:"Acknowledge Receipt"})]})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:De!==null,onClose:()=>{Oe(null),ze("Good"),He("")},title:"Return Asset",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Condition at Return *"}),jsxRuntimeExports.jsx(Select,{value:Be,onChange:br=>ze(br),options:[{value:"New",label:"New"},{value:"Good",label:"Good"},{value:"Used",label:"Used"},{value:"Damaged",label:"Damaged"}],className:"bg-bg-input"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Notes (Optional)"}),jsxRuntimeExports.jsx(Textarea,{value:$e,onChange:br=>He(br.target.value),className:"bg-bg-input",rows:3,placeholder:"Any additional notes about the asset condition..."})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>{Oe(null),ze("Good"),He("")},children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:hr,children:"Process Return"})]})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:Ue!==null,onClose:()=>{Ve(null),qe("Damage"),Ye(""),Xe("Medium"),er([])},title:"Report Asset Issue",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-400",children:[jsxRuntimeExports.jsx("strong",{children:"Asset:"})," ",(vr=Ue==null?void 0:Ue.assetId)==null?void 0:vr.name," (",(yr=Ue==null?void 0:Ue.assetId)==null?void 0:yr.assetCode,")"]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Incident Type *"}),jsxRuntimeExports.jsx(Select,{value:We,onChange:br=>qe(br),options:[{value:"Damage",label:"Damage"},{value:"Lost",label:"Lost"},{value:"Theft",label:"Theft"},{value:"Malfunction",label:"Malfunction"}],className:"bg-bg-input"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Description *"}),jsxRuntimeExports.jsx(Textarea,{value:Ge,onChange:br=>Ye(br.target.value),className:"bg-bg-input",rows:4,placeholder:"Describe what happened in detail...",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Urgency"}),jsxRuntimeExports.jsx(Select,{value:Ke,onChange:br=>Xe(br),options:[{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"},{value:"Critical",label:"Critical"}],className:"bg-bg-input"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Upload Photos (Optional, max 5)"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:br=>{const lr=Array.from(br.target.files||[]);er(lr.slice(0,5))},className:"w-full px-3 py-2 bg-bg-input border border-border rounded-lg text-sm"}),Ze.length>0&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:[Ze.length," photo(s) selected"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>{Ve(null),qe("Damage"),Ye(""),Xe("Medium"),er([])},children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:ur,disabled:!Ge.trim(),children:"Submit Report"})]})]})})]})}function AssetDashboard(){const e=useNavigate(),[t,n]=reactExports.useState(null),[Ee,Re]=reactExports.useState(!0),[Ce,Te]=reactExports.useState("");reactExports.useEffect(()=>{Me()},[]);const Me=async()=>{try{Re(!0);const Be=await apiService.getAssetStats();n(Be)}catch(Be){Te(Be.message)}finally{Re(!1)}};if(Ee)return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-48 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-64"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(Be=>jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-6 rounded"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-12"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-16 mb-1"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"})]},Be))}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 flex flex-col h-full",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-48 mb-4"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3 flex-1",children:[[1,2,3,4].map(Be=>jsxRuntimeExports.jsxs("div",{className:"p-3 border border-border rounded-lg h-24",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-20 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-12"})]},Be)),jsxRuntimeExports.jsxs("div",{className:"col-span-2 p-3 border border-border rounded-lg flex items-center justify-between h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 rounded"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-20"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-12"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"border border-border rounded-xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-6 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 flex-1",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-48"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-32 mb-4"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4].map(Be=>jsxRuntimeExports.jsxs("div",{className:"p-4 border border-border rounded-lg h-20",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24"})]},Be))})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-40 mb-4"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(Be=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24 mb-2"}),jsxRuntimeExports.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-16"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-32"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-2 w-full rounded-full"})]},Be))})]})]});if(Ce)return jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:Ce})});const De=()=>!t||t.totalAssets===0?0:Math.round(t.issuedAssets/t.totalAssets*100),Oe=()=>!t||t.totalAssets===0?0:Math.round(t.availableAssets/t.totalAssets*100);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Asset Management"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Overview of company assets and inventory"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx(Package,{className:"text-brand-primary",size:24}),jsxRuntimeExports.jsx("span",{className:"text-xs text-text-secondary",children:"Total"})]}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-text-primary",children:(t==null?void 0:t.totalAssets)||0}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Total Assets"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"text-status-success",size:24}),jsxRuntimeExports.jsxs(Badge,{variant:"success",children:[Oe(),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-text-primary",children:(t==null?void 0:t.availableAssets)||0}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Available"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"text-status-info",size:24}),jsxRuntimeExports.jsxs(Badge,{variant:"info",children:[De(),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-text-primary",children:(t==null?void 0:t.issuedAssets)||0}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Issued"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"text-brand-primary",size:24}),jsxRuntimeExports.jsx("span",{className:"text-xs text-text-secondary",children:"INR"})]}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-text-primary",children:new Intl.NumberFormat("en-IN",{notation:"compact",maximumFractionDigits:1}).format((t==null?void 0:t.totalValue)||0)}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Total Value"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6 flex flex-col h-full",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Asset Status Breakdown"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3 flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/10 border border-green-100 dark:border-green-800 rounded-lg flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"text-green-600 dark:text-green-400",size:18}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Available"})]}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-text-primary",children:(t==null?void 0:t.availableAssets)||0})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-800 rounded-lg flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"text-blue-600 dark:text-blue-400",size:18}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Issued"})]}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-text-primary",children:(t==null?void 0:t.issuedAssets)||0})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-800 rounded-lg flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"text-amber-600 dark:text-amber-400",size:18}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Under Repair"})]}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-text-primary",children:(t==null?void 0:t.underRepairAssets)||0})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/10 border border-red-100 dark:border-red-800 rounded-lg flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(CircleX,{className:"text-red-600 dark:text-red-400",size:18}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Lost"})]}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-text-primary",children:(t==null?void 0:t.lostAssets)||0})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2 p-3 bg-gray-50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-700 rounded-lg flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Package,{className:"text-gray-500",size:18}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Disposed"})]}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-text-primary",children:(t==null?void 0:t.disposedAssets)||0})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[t&&t.warrantyExpiringSoon>0&&jsxRuntimeExports.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"text-amber-600 dark:text-amber-400 flex-shrink-0",size:24}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-amber-800 dark:text-amber-400 mb-1",children:"Warranty Expiring Soon"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-500",children:[t.warrantyExpiringSoon," asset",t.warrantyExpiringSoon!==1?"s":""," with warranty expiring in 30 days"]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Quick Actions"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>e("/assets/inventory"),className:"p-4 bg-brand-primary/10 hover:bg-brand-primary/20 rounded-lg transition-colors text-left",children:[jsxRuntimeExports.jsx(Package,{className:"text-brand-primary mb-2",size:20}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-text-primary",children:"View Inventory"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>e("/miscellaneous/asset-categories"),className:"p-4 bg-brand-primary/10 hover:bg-brand-primary/20 rounded-lg transition-colors text-left",children:[jsxRuntimeExports.jsx(Package,{className:"text-brand-primary mb-2",size:20}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-text-primary",children:"Categories"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>e("/my-assets"),className:"p-4 bg-brand-primary/10 hover:bg-brand-primary/20 rounded-lg transition-colors text-left",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"text-brand-primary mb-2",size:20}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-text-primary",children:"My Assets"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>e("/assets/inventory"),className:"p-4 bg-brand-primary/10 hover:bg-brand-primary/20 rounded-lg transition-colors text-left",children:[jsxRuntimeExports.jsx(Clock,{className:"text-brand-primary mb-2",size:20}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-text-primary",children:"History"})]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Utilization Insights"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Utilization Rate"}),jsxRuntimeExports.jsxs("div",{className:"flex items-end gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-text-primary",children:[De(),"%"]}),jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary mb-1",children:"of assets in use"})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 bg-bg-secondary rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-status-info rounded-full h-2 transition-all",style:{width:`${De()}%`}})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Availability Rate"}),jsxRuntimeExports.jsxs("div",{className:"flex items-end gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-text-primary",children:[Oe(),"%"]}),jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary mb-1",children:"available for use"})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 bg-bg-secondary rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-status-success rounded-full h-2 transition-all",style:{width:`${Oe()}%`}})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Asset Health"}),jsxRuntimeExports.jsxs("div",{className:"flex items-end gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-text-primary",children:[t?Math.round((t.totalAssets-t.lostAssets-t.disposedAssets-t.underRepairAssets)/t.totalAssets*100):0,"%"]}),jsxRuntimeExports.jsx("span",{className:"text-sm text-text-secondary mb-1",children:"in good condition"})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 bg-bg-secondary rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-status-success rounded-full h-2 transition-all",style:{width:`${t?Math.round((t.totalAssets-t.lostAssets-t.disposedAssets-t.underRepairAssets)/t.totalAssets*100):0}%`}})})]})]})]})]})}function CommentSection({postId:e}){const{user:t}=useAuth(),[n,Ee]=reactExports.useState([]),[Re,Ce]=reactExports.useState(!0),[Te,Me]=reactExports.useState(""),[De,Oe]=reactExports.useState(!1);reactExports.useEffect(()=>{Be()},[e]);const Be=async()=>{try{const $e=await apiService.getComments(e);Ee($e.comments||[])}catch($e){console.error("Failed to fetch comments",$e)}finally{Ce(!1)}},ze=async $e=>{if($e.preventDefault(),!!Te.trim()){Oe(!0);try{const He=await apiService.addComment(e,Te);Ee([...n,He.comment]),Me("")}catch(He){console.error("Failed to add comment",He)}finally{Oe(!1)}}};return Re?jsxRuntimeExports.jsx("div",{className:"flex justify-center p-4",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin text-gray-400",size:20})}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-1",children:[n.map($e=>{var Ue,Ve,We,qe,Ge,Ye,Ke,Xe;const He=(Ue=$e.reactions)==null?void 0:Ue.find(Ze=>{var er;return Ze.user===(t==null?void 0:t.employeeId)||((er=Ze.user)==null?void 0:er._id)===(t==null?void 0:t.employeeId)});return jsxRuntimeExports.jsxs("div",{className:"flex gap-2.5 group",children:[jsxRuntimeExports.jsx(Avatar,{src:(Ve=$e.author)!=null&&Ve.profilePicture?`${ASSET_BASE_URL}/${$e.author.profilePicture}`:void 0,alt:(We=$e.author)==null?void 0:We.firstName,name:`${(qe=$e.author)==null?void 0:qe.firstName} ${(Ge=$e.author)==null?void 0:Ge.lastName}`,className:"w-8 h-8 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-bg-hover rounded-lg p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[jsxRuntimeExports.jsxs("span",{className:"font-semibold text-xs text-gray-900 dark:text-text-primary",children:[(Ye=$e.author)==null?void 0:Ye.firstName," ",(Ke=$e.author)==null?void 0:Ke.lastName]}),jsxRuntimeExports.jsx("span",{className:"text-[10px] text-gray-500 dark:text-text-muted",children:formatDistanceToNow(new Date($e.createdAt),{addSuffix:!0})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 dark:text-text-primary whitespace-pre-wrap leading-tight",children:$e.content})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-4 mt-1 ml-1",children:jsxRuntimeExports.jsxs("button",{onClick:async()=>{try{const Ze=await apiService.toggleCommentReaction($e._id,"like");Ee(er=>er.map(St=>St._id===$e._id?{...St,reactions:Ze.reactions}:St))}catch(Ze){console.error("Failed to react",Ze)}},className:`text-xs font-medium flex items-center gap-1 transition-colors ${He?"text-red-500":"text-gray-500 dark:text-text-secondary hover:text-gray-700 dark:hover:text-text-primary"}`,children:[He?"Liked":"Like",((Xe=$e.reactions)==null?void 0:Xe.length)>0&&jsxRuntimeExports.jsx("span",{className:"bg-gray-100 dark:bg-bg-hover px-1 rounded-full text-[10px]",children:$e.reactions.length})]})})]})]},$e._id)}),n.length===0&&jsxRuntimeExports.jsx("p",{className:"text-center text-xs text-gray-400 py-2",children:"No comments yet. Be the first!"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ze,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Avatar,{src:t!=null&&t.avatar?`${ASSET_BASE_URL}/${t.avatar}`:void 0,name:t==null?void 0:t.name,className:"w-8 h-8"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx(Input,{value:Te,onChange:$e=>Me($e.target.value),placeholder:"Write a comment...",className:"bg-gray-100 dark:bg-bg-hover rounded-full pr-10"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:!Te.trim()||De,className:"absolute right-2 top-1/2 -translate-y-1/2 text-blue-600 hover:text-blue-700 disabled:opacity-50 p-1",children:De?jsxRuntimeExports.jsx(LoaderCircle,{size:16,className:"animate-spin"}):jsxRuntimeExports.jsx(Send,{size:16})})]})]})]})}function PostCard({post:e,onPostUpdate:t,onDelete:n}){var hr,ur,dr,vr,yr,br,lr,cr,rr,pr,mr,ir,nr,gr;const{user:Ee}=useAuth(),[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(!1),[Be,ze]=reactExports.useState(e.content),[$e,He]=reactExports.useState(!1),[Ue,Ve]=reactExports.useState(!1),[We,qe]=reactExports.useState(!1),[Ge,Ye]=reactExports.useState(!1),Ke=async()=>{try{qe(!0),await apiService.deletePost(e._id),n(e._id)}catch(Er){console.error("Delete failed",Er)}finally{qe(!1),Ve(!1)}},Xe=async()=>{if(Be.trim())try{He(!0);const Er=await apiService.updatePost(e._id,Be);t(Er.post),Oe(!1)}catch(Er){console.error("Update failed",Er)}finally{He(!1)}},Ze=(hr=e.reactions)==null?void 0:hr.find(Er=>{var Nr,Mr;if((Nr=Er.user)!=null&&Nr.employeeId)return Er.user.employeeId===(Ee==null?void 0:Ee.employeeId);const Cr=((Mr=Er.user)==null?void 0:Mr._id)||Er.user;return String(Cr)===String(Ee==null?void 0:Ee.id)||String(Cr)===String(Ee==null?void 0:Ee.employeeId)}),er=async()=>{if(!Te){Me(!0);try{const Er=await apiService.toggleReaction(e._id,"like");t({...e,reactions:Er.reactions})}catch(Er){console.error("Reaction failed",Er)}finally{Me(!1)}}},St=async Er=>{try{const Cr=await apiService.votePoll(e._id,Er);t({...e,pollData:Cr.pollData})}catch(Cr){console.error("Voting failed",Cr)}},ar=((ur=e.author)==null?void 0:ur.employeeId)===(Ee==null?void 0:Ee.employeeId)||((dr=e.author)==null?void 0:dr._id)===(Ee==null?void 0:Ee.employeeId);return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-bg-card border border-border rounded-xl p-5 shadow-sm hover:shadow-md transition-all duration-300 mb-6 group",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Avatar,{src:(vr=e.author)!=null&&vr.profilePicture?`${ASSET_BASE_URL}/${e.author.profilePicture}`:void 0,alt:(yr=e.author)==null?void 0:yr.firstName,name:`${(br=e.author)==null?void 0:br.firstName} ${(lr=e.author)==null?void 0:lr.lastName}`,className:"w-10 h-10 ring-2 ring-white dark:ring-bg-card shadow-sm"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-text-primary text-sm flex items-center gap-2",children:[(cr=e.author)==null?void 0:cr.firstName," ",(rr=e.author)==null?void 0:rr.lastName,e.type==="appreciation"&&jsxRuntimeExports.jsx("span",{className:"text-xs font-normal text-text-secondary",children:"shared an appreciation"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-muted",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-text-secondary",children:((pr=e.author)==null?void 0:pr.designation)||"Employee"}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"text-text-muted",children:formatDistanceToNow(new Date(e.createdAt),{addSuffix:!0})})]})]})]}),(ar||(Ee==null?void 0:Ee.role)==="Admin")&&jsxRuntimeExports.jsxs("div",{className:"relative opacity-0 group-hover:opacity-100 transition-opacity",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ye(!Ge),className:"text-text-muted hover:text-text-primary p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-bg-hover transition-colors",children:jsxRuntimeExports.jsx(EllipsisVertical,{size:18})}),Ge&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 top-8 w-40 bg-white dark:bg-bg-card border border-border shadow-lg rounded-xl py-1 z-20 animate-in fade-in zoom-in-95 duration-200",children:[ar&&jsxRuntimeExports.jsx("button",{onClick:()=>{Oe(!0),Ye(!1)},className:"w-full text-left px-4 py-2 text-sm text-text-primary hover:bg-gray-50 dark:hover:bg-bg-hover transition-colors font-medium",children:"Edit Post"}),jsxRuntimeExports.jsx("button",{onClick:()=>{Ve(!0),Ye(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors font-medium",children:"Delete Post"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"mb-4",children:De?jsxRuntimeExports.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-bg-hover p-4 rounded-xl border border-border",children:[jsxRuntimeExports.jsx("textarea",{value:Be,onChange:Er=>ze(Er.target.value),className:"w-full p-3 border border-border rounded-lg focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary min-h-[100px] text-sm bg-white dark:bg-bg-card"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Oe(!1),ze(e.content)},disabled:$e,className:"px-4 py-2 text-xs font-medium text-text-secondary hover:bg-gray-200 dark:hover:bg-bg-main rounded-lg transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Xe,disabled:$e||!Be.trim(),className:"px-4 py-2 text-xs font-medium bg-brand-primary text-white rounded-lg hover:bg-brand-primary/90 disabled:opacity-50 shadow-sm",children:$e?"Saving...":"Save Changes"})]})]}):e.type==="appreciation"?jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden p-3.5 bg-gradient-to-br from-brand-primary/5 via-brand-secondary/5 to-transparent rounded-xl border border-brand-primary/10",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-brand-primary/5 rounded-full blur-3xl -mr-12 -mt-12 pointer-events-none"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[e.media&&e.media.length>0&&jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 bg-white dark:bg-bg-card p-2 rounded-full border border-border shadow-sm ring-2 ring-white/50 dark:ring-white/5",children:jsxRuntimeExports.jsx("img",{src:e.media[0].startsWith("http")?e.media[0]:`${ASSET_BASE_URL}${e.media[0]}`,alt:"Badge",className:"w-10 h-10 object-contain"})}),jsxRuntimeExports.jsx("div",{className:"flex-1 text-text-primary text-sm leading-snug",children:e.relatedAppreciationId&&typeof e.relatedAppreciationId=="object"&&"sender"in e.relatedAppreciationId?jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-brand-primary",children:(mr=e.relatedAppreciationId.badge)==null?void 0:mr.title})," ","awarded to"," ",jsxRuntimeExports.jsxs("span",{className:"font-semibold text-text-primary",children:[(ir=e.relatedAppreciationId.recipient)==null?void 0:ir.firstName," ",(nr=e.relatedAppreciationId.recipient)==null?void 0:nr.lastName]})]}),e.relatedAppreciationId.message&&jsxRuntimeExports.jsx("div",{className:"relative pl-3 border-l-2 border-brand-primary/30",children:jsxRuntimeExports.jsxs("p",{className:"italic text-text-secondary text-sm line-clamp-2",children:['"',e.relatedAppreciationId.message,'"']})})]}):jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap",children:e.content})})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{className:"text-text-primary whitespace-pre-wrap text-[15px] leading-relaxed mb-4",children:e.content}),e.media&&e.media.length>0&&jsxRuntimeExports.jsx("div",{className:`grid gap-2 mb-4 rounded-xl overflow-hidden ${e.media.length===1?"grid-cols-1":"grid-cols-2"}`,children:e.media.map((Er,Cr)=>jsxRuntimeExports.jsxs("div",{className:"relative group cursor-pointer",children:[jsxRuntimeExports.jsx("img",{src:Er.startsWith("http")?Er:`${ASSET_BASE_URL}${Er}`,alt:"Post attachment",className:"w-full h-full object-cover max-h-[500px] hover:scale-[1.02] transition-transform duration-300"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors pointer-events-none"})]},Cr))}),e.type==="poll"&&e.pollData&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50/50 dark:bg-black/20 rounded-xl p-4 border border-border backdrop-blur-sm",children:[jsxRuntimeExports.jsxs("h5",{className:"font-semibold text-sm mb-4 text-text-primary flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-4 bg-brand-primary rounded-full"}),e.pollData.question||"Poll"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2.5",children:e.pollData.options.map((Er,Cr)=>{const Nr=e.pollData.options.reduce(($r,Wr)=>$r+Wr.votes.length,0),Mr=Nr===0?0:Math.round(Er.votes.length/Nr*100),Fr=Er.votes.some($r=>$r===(Ee==null?void 0:Ee.employeeId)||$r._id===(Ee==null?void 0:Ee.employeeId));return jsxRuntimeExports.jsxs("button",{onClick:()=>St(Cr),className:`relative w-full text-left p-3 rounded-xl border text-sm transition-all overflow-hidden group/opt ${Fr?"border-brand-primary/30 text-brand-primary font-medium":"border-border hover:border-brand-primary/30 text-text-primary dark:text-text-primary"}`,children:[jsxRuntimeExports.jsx("div",{className:`absolute left-0 top-0 bottom-0 transition-all duration-700 ease-out ${Fr?"bg-brand-primary/10 dark:bg-brand-primary/20":"bg-gray-100 dark:bg-white/5 group-hover/opt:bg-brand-primary/5"}`,style:{width:`${Mr}%`}}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between relative z-10",children:[jsxRuntimeExports.jsx("span",{children:Er.text}),jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:[Mr,"%"]})]})]},Cr)})}),jsxRuntimeExports.jsx("div",{className:"flex justify-end mt-3",children:jsxRuntimeExports.jsxs("span",{className:"text-xs font-medium text-text-secondary bg-white/50 dark:bg-white/5 px-2 py-1 rounded-md border border-border",children:[e.pollData.options.reduce((Er,Cr)=>Er+Cr.votes.length,0)," ","votes total"]})})]})]})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between border-t border-border pt-3",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:er,className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${Ze?"text-red-500 bg-red-50 dark:bg-red-900/10":"text-text-secondary hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10"}`,children:[jsxRuntimeExports.jsx(Heart,{size:18,className:`transition-transform duration-200 ${Ze?"fill-current scale-110":"scale-100"}`}),((gr=e.reactions)==null?void 0:gr.length)||0,jsxRuntimeExports.jsx("span",{className:"hidden sm:inline font-normal opacity-80",children:"Likes"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ce(!Re),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${Re?"text-brand-primary bg-brand-primary/10":"text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10"}`,children:[jsxRuntimeExports.jsx(MessageCircle,{size:18}),e.commentCount||0,jsxRuntimeExports.jsx("span",{className:"hidden sm:inline font-normal opacity-80",children:"Comments"})]})]})}),Re&&jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t border-border animate-in fade-in slide-in-from-top-1",children:jsxRuntimeExports.jsx(CommentSection,{postId:e._id})}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:Ue,onClose:()=>Ve(!1),onConfirm:Ke,title:"Delete Post",message:"Are you sure you want to delete this post? This action cannot be undone.",confirmText:"Delete Post",variant:"danger",isLoading:We})]})}function CreatePost({onPostCreated:e}){const{user:t}=useAuth(),[n,Ee]=reactExports.useState(""),[Re,Ce]=reactExports.useState([]),[Te,Me]=reactExports.useState(!1),[De,Oe]=reactExports.useState(["",""]),[Be,ze]=reactExports.useState("company"),[$e,He]=reactExports.useState(!1),[Ue,Ve]=reactExports.useState(!1),We=reactExports.useRef(null),qe=async Ze=>{if(Ze.target.files&&Ze.target.files.length>0){He(!0);try{const er=Ze.target.files[0],St=await apiService.uploadSocialMedia(er);Ce([...Re,St.url])}catch(er){console.error("Upload failed",er)}finally{He(!1),We.current&&(We.current.value="")}}},Ge=Ze=>{Ce(Re.filter((er,St)=>St!==Ze))},Ye=async()=>{if(!(!n.trim()&&Re.length===0&&!Te)){Ve(!0);try{const Ze={content:n,scope:Be,media:Re,type:Te?"poll":Re.length>0?"image":"text"};if(Te&&(Ze.pollData={question:n||"Poll Question",options:De.filter(St=>St.trim()).map(St=>({text:St,votes:[]})),allowMultiple:!1},Ze.pollData.options.length<2)){alert("Poll needs at least 2 options"),Ve(!1);return}const er=await apiService.createPost(Ze);e(er.post),Ee(""),Ce([]),Me(!1),Oe(["",""])}catch(Ze){console.error("Post failed",Ze)}finally{Ve(!1)}}},Ke=()=>Oe([...De,""]),Xe=(Ze,er)=>{const St=[...De];St[Ze]=er,Oe(St)};return jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-bg-card rounded-xl p-4 shadow-sm border border-border hover:shadow-md transition-shadow duration-300",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx(Avatar,{src:t!=null&&t.avatar?`${ASSET_BASE_URL}/${t.avatar}`:void 0,name:t==null?void 0:t.name,className:"w-11 h-11 ring-2 ring-white dark:ring-bg-card shadow-sm"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsxs("div",{className:"relative inline-block group",children:[jsxRuntimeExports.jsx(Select,{value:Be,onChange:Ze=>ze(Ze),options:[{value:"company",label:"Everyone"},{value:"department",label:"My Department"},{value:"project",label:"My Project"}],className:"w-40 bg-gray-50 dark:bg-bg-hover text-xs py-0 h-9"}),jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-text-muted group-hover:text-brand-primary transition-colors",children:jsxRuntimeExports.jsx(Users,{size:12})})]})}),jsxRuntimeExports.jsx(Textarea,{value:n,onChange:Ze=>Ee(Ze.target.value),placeholder:Te?"Ask a question...":"What's on your mind?",className:"w-full border-none p-0 focus:ring-0 resize-none text-base min-h-[60px] placeholder:text-text-muted/60 bg-transparent text-text-primary shadow-none"}),Re.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:[Re.map((Ze,er)=>jsxRuntimeExports.jsxs("div",{className:"relative w-32 h-32 flex-shrink-0 group",children:[jsxRuntimeExports.jsx("img",{src:Ze,alt:"preview",className:"w-full h-full object-cover rounded-xl shadow-sm border border-border"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-xl"}),jsxRuntimeExports.jsx("button",{onClick:()=>Ge(er),className:"absolute top-2 right-2 bg-black/50 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70 backdrop-blur-sm",children:jsxRuntimeExports.jsx(X$1,{size:14})})]},er)),$e&&jsxRuntimeExports.jsx("div",{className:"w-32 h-32 flex items-center justify-center bg-gray-50 dark:bg-bg-hover rounded-xl border border-border border-dashed animate-pulse",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin text-brand-primary"})})]}),Te&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50/50 dark:bg-black/20 p-4 rounded-xl border border-border space-y-3 animate-in fade-in slide-in-from-top-2",children:[jsxRuntimeExports.jsx("div",{className:"space-y-2",children:De.map((Ze,er)=>jsxRuntimeExports.jsx(Input,{type:"text",value:Ze,onChange:St=>Xe(er,St.target.value),placeholder:`Option ${er+1}`,className:"bg-gray-50 dark:bg-bg-card"},er))}),jsxRuntimeExports.jsxs("button",{onClick:Ke,className:"text-xs text-brand-primary font-semibold hover:underline flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-lg leading-none",children:"+"})," Add Option"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pt-3 mt-1 border-t border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{var Ze;return(Ze=We.current)==null?void 0:Ze.click()},className:"p-2 text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-full transition-all duration-200",title:"Add Photo",children:[jsxRuntimeExports.jsx(Image$2,{size:20,className:"stroke-[1.5]"}),jsxRuntimeExports.jsx("input",{type:"file",ref:We,className:"hidden",accept:"image/*",onChange:qe})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Me(!Te),className:`p-2 rounded-full transition-all duration-200 ${Te?"text-brand-primary bg-brand-primary/10":"text-text-secondary hover:text-brand-primary hover:bg-brand-primary/10"}`,title:"Create Poll",children:jsxRuntimeExports.jsx(ChartNoAxesColumn,{size:20,className:"stroke-[1.5]"})})]}),jsxRuntimeExports.jsx("button",{onClick:Ye,disabled:Ue||!n&&Re.length===0&&!Te,className:"bg-brand-primary text-white px-6 py-2 rounded-full text-sm font-semibold hover:bg-brand-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-brand-primary/20 hover:shadow-brand-primary/30 hover:-translate-y-0.5 active:translate-y-0 disabled:hover:translate-y-0 disabled:shadow-none",children:Ue?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(LoaderCircle,{size:16,className:"animate-spin"}),"Posting"]}):"Post"})]})]})]})})}function SocialFeed(){const[e,t]=reactExports.useState([]),[n,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState(1),[De,Oe]=reactExports.useState(!0),{clearSocialNotifications:Be}=useNotification();reactExports.useEffect(()=>{Be(),ze()},[]);const ze=async(We=1)=>{try{We>1&&Ce(!0);const qe=await apiService.getSocialFeed({page:We,limit:10});console.log(`Loaded page ${We}:`,qe.posts.length,"posts"),t(We===1?qe.posts:Ge=>{const Ye=new Set(Ge.map(Xe=>Xe._id)),Ke=qe.posts.filter(Xe=>!Ye.has(Xe._id));return[...Ge,...Ke]}),Oe(qe.currentPage<qe.totalPages),Me(We)}catch(qe){console.error("Failed to load feed",qe)}finally{Ee(!1),Ce(!1)}},$e=()=>{Re||ze(Te+1)},He=We=>{t([We,...e])},Ue=We=>{t(e.map(qe=>qe._id===We._id?We:qe))},Ve=We=>{t(e.filter(qe=>qe._id!==We))};return n&&Te===1?jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto py-6 px-4 space-y-6",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-40 w-full rounded-xl"})," ",[1,2,3].map(We=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-bg-card rounded-xl border border-gray-200 dark:border-border p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-10 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-24"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-[90%]"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-[80%]"})]})]},We))]}):jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4",children:[jsxRuntimeExports.jsx("div",{className:"mb-8",children:jsxRuntimeExports.jsx(CreatePost,{onPostCreated:He})}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:e.map(We=>jsxRuntimeExports.jsx(PostCard,{post:We,onPostUpdate:Ue,onDelete:Ve},We._id))}),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-16 bg-white/50 dark:bg-bg-card/50 rounded-xl border-2 border-dashed border-gray-200 dark:border-border backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"max-w-xs mx-auto space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-medium text-text-primary",children:"No posts yet"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Be the first to share something with your team!"})]})}),De&&e.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-10 text-center",children:jsxRuntimeExports.jsx("button",{onClick:$e,disabled:Re,className:"px-6 py-2.5 bg-white dark:bg-bg-card border border-border shadow-sm rounded-full text-brand-primary font-medium text-sm hover:bg-gray-50 dark:hover:bg-bg-hover transition-all hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:Re?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Loading..."]}):"Load more posts"})})]})}function SystemSettings(){const{showToast:e}=useNotification(),{refreshUser:t}=useAuth(),[n,Ee]=reactExports.useState(!1),[Re,Ce]=reactExports.useState(!1),[Te,Me]=reactExports.useState(null),[De,Oe]=reactExports.useState(null),[Be,ze]=reactExports.useState({companyName:"",subdomain:"",timezone:"Asia/Kolkata",currency:"INR",workHours:{start:"09:00",end:"18:00"},dateFormat:"DD/MM/YYYY",logo:null,favicon:null});reactExports.useEffect(()=>{$e()},[]);const $e=async()=>{try{Ee(!0);const We=(await apiService.getCompanySettings()).company;ze({companyName:We.name,subdomain:We.subdomain||"",timezone:We.timezone,currency:We.currency,workHours:We.workHours,dateFormat:We.dateFormat,logo:null,favicon:null}),We.logo&&Me(We.logo),We.favicon&&Oe(We.favicon)}catch(Ve){console.error("Failed to fetch settings",Ve),e("Failed to load settings","error")}finally{Ee(!1)}},He=(Ve,We)=>{if(Ve.target.files&&Ve.target.files[0]){const qe=Ve.target.files[0];ze(Ye=>({...Ye,[We]:qe}));const Ge=new FileReader;Ge.onloadend=()=>{We==="logo"?Me(Ge.result):Oe(Ge.result)},Ge.readAsDataURL(qe)}},Ue=async Ve=>{Ve.preventDefault(),Ce(!0);try{const We=new FormData;We.append("companyName",Be.companyName),We.append("timezone",Be.timezone),We.append("currency",Be.currency),We.append("workHours",JSON.stringify(Be.workHours)),We.append("dateFormat",Be.dateFormat),Be.logo&&We.append("logo",Be.logo),Be.favicon&&We.append("favicon",Be.favicon),await apiService.updateCompanySettings(We),await t(),e("System settings updated successfully","success")}catch(We){console.error("Failed to update settings",We),e(We.message||"Failed to update settings","error")}finally{Ce(!1)}};return n?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-48 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-64"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 rounded"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-32"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24 mb-2"}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-32 h-32 rounded-lg"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-3/4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-24 mt-2 rounded-lg"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24 mb-2"}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-16 h-16 rounded-lg"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-3 w-3/4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-24 mt-2 rounded-lg"})]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 rounded"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-48"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24 mb-1"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-full rounded-lg"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24 mb-1"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-full rounded-lg"})]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"System Settings"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Manage your company branding and general configuration"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Ue,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Image$2,{className:"text-brand-primary",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Branding"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Company Logo"}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-32 h-32 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[Te?jsxRuntimeExports.jsx("img",{src:Te,alt:"Logo preview",className:"w-full h-full object-contain"}):jsxRuntimeExports.jsx("span",{className:"text-text-muted text-xs",children:"No Logo"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-white text-xs font-medium",children:"Change"})}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Ve=>He(Ve,"logo"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("p",{children:"Upload your company logo."}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-text-muted",children:"Recommended size: 200x200px. Max 5MB."}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[jsxRuntimeExports.jsx(Upload,{size:14}),"Choose File",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Ve=>He(Ve,"logo"),className:"hidden"})]})})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Favicon"}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-16 h-16 border-2 border-dashed border-border rounded-lg flex items-center justify-center bg-bg-secondary overflow-hidden relative group",children:[De?jsxRuntimeExports.jsx("img",{src:De,alt:"Favicon preview",className:"w-8 h-8 object-contain"}):jsxRuntimeExports.jsx(Globe,{className:"text-text-muted",size:24}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-white text-[10px] font-medium",children:"Change"})}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Ve=>He(Ve,"favicon"),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("p",{children:"Upload browser favicon."}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-text-muted",children:".ico, .png, .jpg supported."}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 border border-border rounded-lg hover:bg-bg-hover transition-colors text-xs font-medium",children:[jsxRuntimeExports.jsx(Upload,{size:14}),"Choose File",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Ve=>He(Ve,"favicon"),className:"hidden"})]})})]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-bg-card border border-border rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Building2,{className:"text-brand-primary",size:20}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"General Configuration"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Company Name"}),jsxRuntimeExports.jsx(Input,{value:Be.companyName,onChange:Ve=>ze({...Be,companyName:Ve.target.value}),className:"bg-bg-input"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Subdomain"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Input,{value:Be.subdomain,disabled:!0,className:"bg-bg-secondary cursor-not-allowed rounded-r-none"}),jsxRuntimeExports.jsx("span",{className:"px-3 py-2 bg-bg-secondary border border-l-0 border-border rounded-r-lg text-text-secondary text-sm",children:".yourhrms.com"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Contact support to change subdomain."})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end pt-4",children:jsxRuntimeExports.jsx(Button,{type:"submit",isLoading:Re,leftIcon:jsxRuntimeExports.jsx(Save,{size:20}),children:"Save Changes"})})]})]})}const router=createBrowserRouter([{path:"/login",element:jsxRuntimeExports.jsx(Login,{})},{path:"/signup",element:jsxRuntimeExports.jsx(CompanySetup,{})},{path:"/unauthorized",element:jsxRuntimeExports.jsx(Unauthorized,{})},{path:"/",element:jsxRuntimeExports.jsx(MainLayout,{}),children:[{index:!0,element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern"],children:jsxRuntimeExports.jsx(Dashboard,{})})},{index:!0,element:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})},{path:"ai-configuration",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"ai_chatbot",children:jsxRuntimeExports.jsx(QAConfig,{})})})},{path:"employee-management",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"employees",children:jsxRuntimeExports.jsx(EmployeeManagement,{})})})},{path:"roles",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"roles",children:jsxRuntimeExports.jsx(RoleManagement,{})})})},{path:"designations",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"employees",children:jsxRuntimeExports.jsx(DesignationManagement,{})})})},{path:"shifts",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"shifts",children:jsxRuntimeExports.jsx(ShiftManagement,{})})})},{path:"profile",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:jsxRuntimeExports.jsx(Profile,{})})},{path:"attendance",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","Employee","HR","Project Manager","Intern","Consultant"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"attendance",children:jsxRuntimeExports.jsx(Attendance,{})})})},{path:"audit",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"audit",children:jsxRuntimeExports.jsx(AuditTrail,{})})})},{path:"leave",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR","Project Manager","Employee","Intern","Consultant"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"leave",children:jsxRuntimeExports.jsx(LeaveDashboard,{})})})},{path:"payroll",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"payroll",children:jsxRuntimeExports.jsx(PayrollDashboard,{})})})},{path:"projects",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","Project Manager","Employee","Intern","Consultant","Accountant"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"projects",children:jsxRuntimeExports.jsx(ProjectDashboard,{})})})},{path:"projects/:id",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","Project Manager","Employee","Intern","Consultant"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"projects",children:jsxRuntimeExports.jsx(ProjectDetails,{})})})},{path:"organization",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR","Project Manager","Employee","Intern","Consultant","Accountant"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"organization",children:jsxRuntimeExports.jsx(Organization,{})})})},{path:"/settings/company",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin"],children:jsxRuntimeExports.jsx(CompanySettings,{})})},{path:"/settings/documents",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"documents",children:jsxRuntimeExports.jsx(DocumentSettings,{})})})},{path:"/settings/subscription",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR","Accountant"],children:jsxRuntimeExports.jsx(SubscriptionPage,{})})},{path:"/settings/usage",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(UsageDashboard,{})})},{path:"/superadmin/tenants",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Super Admin"],children:jsxRuntimeExports.jsx(TenantList,{})})},{path:"/superadmin/analytics",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Super Admin"],children:jsxRuntimeExports.jsx(Analytics,{})})},{path:"/superadmin/users",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Super Admin"],children:jsxRuntimeExports.jsx(UserManagement,{})})},{path:"/superadmin/settings",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Super Admin"],children:jsxRuntimeExports.jsx(SuperAdminSettings,{})})},{path:"settings",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin"],children:jsxRuntimeExports.jsx(SystemSettings,{})})},{path:"social",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"social",children:jsxRuntimeExports.jsx(SocialFeed,{})})})},{path:"miscellaneous",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:jsxRuntimeExports.jsx(Miscellaneous,{})})},{path:"miscellaneous/feedback",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:jsxRuntimeExports.jsx(Feedback,{})})},{path:"miscellaneous/appreciation",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR","Accountant","Project Manager","Employee","Intern","Consultant"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"appreciation",children:jsxRuntimeExports.jsx(Appreciation,{})})})},{path:"miscellaneous/email-automation",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"email_automation",children:jsxRuntimeExports.jsx(EmailAutomation,{})})})},{path:"miscellaneous/asset-categories",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"assets",children:jsxRuntimeExports.jsx(AssetCategories,{})})})},{path:"assets",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"assets",children:jsxRuntimeExports.jsx(AssetDashboard,{})})})},{path:"assets/inventory",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"assets",children:jsxRuntimeExports.jsx(AssetInventory,{})})})},{path:"my-assets",element:jsxRuntimeExports.jsx(RoleGuard,{allowedRoles:["Admin","HR","Project Manager","Employee","Intern","Consultant"],children:jsxRuntimeExports.jsx(ModuleGuard,{module:"assets",children:jsxRuntimeExports.jsx(MyAssets,{})})})}]}]);function App(){return jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(NotificationProvider,{children:jsxRuntimeExports.jsx(RouterProvider,{router})})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs as g};
